---
title: 关键绩效指标 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 298d639a-7adf-4f04-b097-a17f4c77ee50
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8a03bf76c725f22567d5e884ca22e3a862b15ce3
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22298285"
---
# <a name="key-performance-indicators"></a><span data-ttu-id="b6be6-102">关键绩效指标</span><span class="sxs-lookup"><span data-stu-id="b6be6-102">Key Performance Indicators</span></span>
<span data-ttu-id="b6be6-103">本主题提供时使用以下的横向扩展方法，观察到 BizTalk Server 产品组的测试结果：</span><span class="sxs-lookup"><span data-stu-id="b6be6-103">This topic provides test results that the BizTalk Server product group observed when using the following scale-out methods:</span></span>  
  
-   <span data-ttu-id="b6be6-104">当增加的数量关键绩效指标 (Kpi)[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]中的计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-104">Key performance indicators (KPIs) when increasing the number of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span> <span data-ttu-id="b6be6-105">对于这些测试，只有一个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]MessageBox 数据库配置为[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-105">For these tests, only one [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database was configured for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span> <span data-ttu-id="b6be6-106">这些测试侧重于添加更多的影响仅[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机连接到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-106">These tests focused solely on the impact of adding more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers to a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
-   <span data-ttu-id="b6be6-107">Kpi 时增加的数量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]所用的 MessageBox 数据库[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-107">KPIs when increasing the number of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox databases used by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span> <span data-ttu-id="b6be6-108">这些测试侧重于添加更多的影响仅[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]MessageBox 数据库移到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-108">These tests focused solely on the impact of adding more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox databases to a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
-   <span data-ttu-id="b6be6-109">Kpi 时增加的数量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]所用的 MessageBox 数据库[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-109">KPIs when increasing the number of both [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox databases used by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span> <span data-ttu-id="b6be6-110">这些测试测量的影响的同时添加[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]MessageBox 数据库移到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-110">These tests measured the impact of adding both [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox databases to a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
## <a name="analysis-of-key-performance-indicators"></a><span data-ttu-id="b6be6-111">关键绩效指标的分析</span><span class="sxs-lookup"><span data-stu-id="b6be6-111">Analysis of key performance indicators</span></span>  
  
### <a name="messaging-scenario-biztalk-server-scale-out--biztalk-and-sql-kpi"></a><span data-ttu-id="b6be6-112">消息传递方案，BizTalk Server 横向扩展 – BizTalk 和 SQL KPI</span><span class="sxs-lookup"><span data-stu-id="b6be6-112">Messaging scenario, BizTalk Server scale-out – BizTalk and SQL KPI</span></span>  
 <span data-ttu-id="b6be6-113">添加运行 BizTalk Server 的第二个计算机不显示对整体吞吐量显著的影响。</span><span class="sxs-lookup"><span data-stu-id="b6be6-113">Adding a second computer running BizTalk Server does not show a significant impact on the  overall throughput.</span></span>  <span data-ttu-id="b6be6-114">在 BizTalk Server CPU 上的负载减少了 25%。</span><span class="sxs-lookup"><span data-stu-id="b6be6-114">The load on the BizTalk Server CPU decreases by 25%.</span></span> <span data-ttu-id="b6be6-115">SQL server CPU 稍会导致增加从 59%59.8%时运行 BizTalk Server 第二台计算机添加到 BizTalk Server 组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-115">The CPU for SQL Server marginally increases from 59% to 59.8% when the second computer running BizTalk Server is added to the BizTalk Server group.</span></span> <span data-ttu-id="b6be6-116">超出此点，没有进一步的性能好处已获得通过增加 BizTalk 处理服务器的数量。</span><span class="sxs-lookup"><span data-stu-id="b6be6-116">Beyond this point, no further performance benefit was gained by increasing the number of BizTalk processing servers.</span></span>  
  
 <span data-ttu-id="b6be6-117">每个 BizTalk 主机实例定期轮询 MessageBox 中相应的队列。</span><span class="sxs-lookup"><span data-stu-id="b6be6-117">Each BizTalk host instance regularly polls the appropriate queue in the MessageBox.</span></span> <span data-ttu-id="b6be6-118">消息框中的表的共享集内实际存储引用主机队列的任何消息。</span><span class="sxs-lookup"><span data-stu-id="b6be6-118">Any message that is referenced on the host queue is actually stored within the shared set of tables in the MessageBox.</span></span> <span data-ttu-id="b6be6-119">如果吞吐量下降添加更多计算机运行 BizTalk Server 时，常见的原因是针对 MessageBox 数据库中共享的表的活动太多。</span><span class="sxs-lookup"><span data-stu-id="b6be6-119">If throughput drops when adding more computers running BizTalk Server, a common cause is too much activity against the shared tables within the MessageBox database.</span></span> <span data-ttu-id="b6be6-120">可以通过将这些表分配给特定的文件组创建这些表的 SQL Server 的专用的 I/O 路径。</span><span class="sxs-lookup"><span data-stu-id="b6be6-120">A dedicated I/O path for SQL Server to these tables can be created by assigning these tables to a specific filegroup.</span></span>  
  
 <span data-ttu-id="b6be6-121">[优化文件组为 Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md)指南提供有关如何将表分配给特定的文件组。</span><span class="sxs-lookup"><span data-stu-id="b6be6-121">[Optimizing Filegroups for the Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md) provides guidance on how to assign tables to specific filegroups.</span></span> <span data-ttu-id="b6be6-122">中包含的脚本[BizTalk Server MessageBox 数据库文件组 SQL 脚本](../technical-guides/biztalk-server-messagebox-database-filegroups-sql-script.md)指南的告知如何实现此目的。</span><span class="sxs-lookup"><span data-stu-id="b6be6-122">The script included in [BizTalk Server MessageBox Database Filegroups SQL Script](../technical-guides/biztalk-server-messagebox-database-filegroups-sql-script.md) of the guide tells how you can accomplish this.</span></span> <span data-ttu-id="b6be6-123">跨多个文件组，并应用所有其他与 SQL 相关的优化之后分发 MessageBox 对象后，才应考虑到多个消息框配置的向外扩展。</span><span class="sxs-lookup"><span data-stu-id="b6be6-123">Scaling out to a multiple MessageBox configuration should only be considered after distributing MessageBox objects across multiple filegroups, and after all other SQL-related optimizations have been applied.</span></span>  
  
 <span data-ttu-id="b6be6-124">**BizTalk Server 和 SQL Server CPU 使用率百分比**</span><span class="sxs-lookup"><span data-stu-id="b6be6-124">**Percentage of BizTalk Server and SQL Server CPU utilization**</span></span>  
  
 <span data-ttu-id="b6be6-125">![&#45;SingleMsgBox](../technical-guides/media/m-singlemsgbox.gif "M SingleMsgBox")</span><span class="sxs-lookup"><span data-stu-id="b6be6-125">![M&#45;SingleMsgBox](../technical-guides/media/m-singlemsgbox.gif "M-SingleMsgBox")</span></span>  
  
### <a name="messaging-scenario-biztalk-server-and-sql-server-scale-out--biztalk-and-sql-kpi"></a><span data-ttu-id="b6be6-126">消息传递方案中，BizTalk Server 和 SQL Server 横向扩展 – BizTalk 和 SQL KPI</span><span class="sxs-lookup"><span data-stu-id="b6be6-126">Messaging scenario, BizTalk Server and SQL Server scale-out – BizTalk and SQL KPI</span></span>  
 <span data-ttu-id="b6be6-127">此测试的目的是为了确定的扩展通过添加四个 MessageBox 数据库的 SQL Server 层的效率。</span><span class="sxs-lookup"><span data-stu-id="b6be6-127">This test was performed to determine the effectiveness of scaling out the SQL Server tier by adding four MessageBox databases.</span></span> <span data-ttu-id="b6be6-128">在此方案中，添加最多两个运行 BizTalk Server 的计算机启用 2,790 每秒的消息的最大可持续吞吐量。</span><span class="sxs-lookup"><span data-stu-id="b6be6-128">In this scenario, adding up to two computers running BizTalk Server enabled a maximum sustainable throughput of 2,790 messages per second.</span></span> <span data-ttu-id="b6be6-129">使用单个消息框时，这是 118%高于最大可获得的吞吐量。</span><span class="sxs-lookup"><span data-stu-id="b6be6-129">This was 118% higher than the maximum obtainable throughput when using only a single MessageBox.</span></span> <span data-ttu-id="b6be6-130">超出此点，将更高处理能力添加到 BizTalk Server 层降级到单一的 MessageBox 方案方式相似的性能。</span><span class="sxs-lookup"><span data-stu-id="b6be6-130">Beyond this point, adding more processing power to the BizTalk Server tier degraded performance in a similar fashion to the single MessageBox scenario.</span></span>  
  
 <span data-ttu-id="b6be6-131">从消息传递方案测试的主要发现是，向外扩展 BizTalk Server 是一种有效的技术来提高总体吞吐量，如果 SQL Server 上的争用不成为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="b6be6-131">The key findings from the Messaging scenario tests are that scaling out BizTalk Server is an effective technique to increase overall throughput if contention on SQL Server is not a bottleneck.</span></span> <span data-ttu-id="b6be6-132">MessageBox 数据库将成为争用点，如果首先应用中详述的优化[优化数据库性能](../technical-guides/optimizing-database-performance.md)，特别是优化脚本的文件组中所述[BizTalk ServerMessageBox 数据库文件组的 SQL 脚本](../technical-guides/biztalk-server-messagebox-database-filegroups-sql-script.md)将 I/O 负载。</span><span class="sxs-lookup"><span data-stu-id="b6be6-132">If the MessageBox database becomes a contention point, first apply the optimizations detailed in [Optimizing Database Performance](../technical-guides/optimizing-database-performance.md), particularly the filegroup optimization script described in [BizTalk Server MessageBox Database Filegroups SQL Script](../technical-guides/biztalk-server-messagebox-database-filegroups-sql-script.md) to distribute I/O load.</span></span> <span data-ttu-id="b6be6-133">如果仍无法获得所需的吞吐量，应考虑通过添加更多的 MessageBox 数据库向外扩展。</span><span class="sxs-lookup"><span data-stu-id="b6be6-133">If you are still unable to achieve your desired throughput, you should consider scaling out by adding more MessageBox databases.</span></span>  
  
 <span data-ttu-id="b6be6-134">**BizTalk Server 和 SQL Server CPU 使用率百分比**</span><span class="sxs-lookup"><span data-stu-id="b6be6-134">**Percentage of BizTalk Server and SQL Server CPU utilization**</span></span>  
  
 <span data-ttu-id="b6be6-135">![&#45;MultipleMsgBox](../technical-guides/media/m-multiplemsgbox.gif "M MultipleMsgBox")</span><span class="sxs-lookup"><span data-stu-id="b6be6-135">![M&#45;MultipleMsgBox](../technical-guides/media/m-multiplemsgbox.gif "M-MultipleMsgBox")</span></span>  
  
### <a name="orchestration-scenario-biztalk-server-scale-out--sql-server-and-biztalk-server-kpi"></a><span data-ttu-id="b6be6-136">业务流程方案中，BizTalk Server 横向扩展 – SQL Server 和 BizTalk Server KPI</span><span class="sxs-lookup"><span data-stu-id="b6be6-136">Orchestration scenario, BizTalk Server scale-out – SQL Server and BizTalk Server KPI</span></span>  
 <span data-ttu-id="b6be6-137">添加运行 BizTalk Server 的第二个计算机不显示对整体吞吐量显著的影响。</span><span class="sxs-lookup"><span data-stu-id="b6be6-137">Adding a second computer running BizTalk Server does not show a significant impact on the  overall throughput.</span></span> <span data-ttu-id="b6be6-138">在 BizTalk Server CPU 上的负载减少了 23%。</span><span class="sxs-lookup"><span data-stu-id="b6be6-138">The load on the BizTalk Server CPU decreases by 23 percent.</span></span> <span data-ttu-id="b6be6-139">SQL server CPU 从 66.5%增加到 68.5%时添加运行 BizTalk Server 的其他计算机。</span><span class="sxs-lookup"><span data-stu-id="b6be6-139">The CPU for SQL Server increases from 66.5 percent to 68.5 percent when an additional computer running BizTalk Server is added.</span></span>  
  
 <span data-ttu-id="b6be6-140">**BizTalk Server 和 SQL Server CPU 使用率百分比**</span><span class="sxs-lookup"><span data-stu-id="b6be6-140">**Percentage of BizTalk Server and SQL Server CPU utilization**</span></span>  
  
 <span data-ttu-id="b6be6-141">![&#45;SingleMsgBox](../technical-guides/media/o-singlemsgbox.gif "O SingleMsgBox")</span><span class="sxs-lookup"><span data-stu-id="b6be6-141">![O&#45;SingleMsgBox](../technical-guides/media/o-singlemsgbox.gif "O-SingleMsgBox")</span></span>  
  
### <a name="orchestration-scenario-biztalk-server-and-sql-server-scale-out--sql-server-and-biztalk-server-kpi"></a><span data-ttu-id="b6be6-142">业务流程方案中，BizTalk Server 和 SQL Server 向外扩展 – SQL Server 和 BizTalk Server KPI</span><span class="sxs-lookup"><span data-stu-id="b6be6-142">Orchestration scenario, BizTalk Server and SQL Server scale-out – SQL Server and BizTalk Server KPI</span></span>  
 <span data-ttu-id="b6be6-143">此测试的目的是为了确定的层向外缩放的 BizTalk Server 和 SQL Server 通过添加更多计算机运行 BizTalk Server 和业务流程方案的更多的 MessageBox 数据库有效性。</span><span class="sxs-lookup"><span data-stu-id="b6be6-143">This test was performed to determine the effectiveness of scaling out both the BizTalk Server and SQL Server tier by adding more computers running BizTalk Server and more MessageBox databases for the Orchestration scenario.</span></span> <span data-ttu-id="b6be6-144">在此方案中，添加最多两个运行 BizTalk Server 的计算机启用每秒的 1,487 业务流程的最大可持续的吞吐量。</span><span class="sxs-lookup"><span data-stu-id="b6be6-144">In this scenario, adding up to two computers running BizTalk Server enabled a maximum sustainable throughput of 1,487 orchestrations per second.</span></span> <span data-ttu-id="b6be6-145">这是 116%高于单个 MessageBox 针对最大可获得结果。</span><span class="sxs-lookup"><span data-stu-id="b6be6-145">This was 116% higher than the maximum obtainable result against a single MessageBox.</span></span> <span data-ttu-id="b6be6-146">向外扩展到单独的 SQL Server 计算机上的四个 MessageBox 数据库可容纳由于额外的处理能力更高的吞吐量和能够跨多个 MessageBox 数据库分发数据库负载。</span><span class="sxs-lookup"><span data-stu-id="b6be6-146">Scaling out to four MessageBox databases on separate SQL Server computers accommodates increased throughput due to additional processing power and the ability to distribute database load across multiple MessageBox databases.</span></span> <span data-ttu-id="b6be6-147">这种做法还缓解争用上共享的表，这是在单个 MessageBox 环境中的形成瓶颈。</span><span class="sxs-lookup"><span data-stu-id="b6be6-147">This tactic also relieves contention on shared tables, which was a bottleneck in the single MessageBox environment.</span></span> <span data-ttu-id="b6be6-148">与消息传递方案中，增加 MessageBox 数据库数目和分发这些跨专用的 SQL 实例可以添加到 BizTalk Server 组的多个 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="b6be6-148">As with the Messaging scenario, increasing the number of MessageBox databases and distributing these across dedicated SQL instances enables the addition of several BizTalk Server computers to the BizTalk Server group.</span></span>  
  
 <span data-ttu-id="b6be6-149">**BizTalk Server 和 SQL Server CPU 使用率百分比**</span><span class="sxs-lookup"><span data-stu-id="b6be6-149">**Percentage of BizTalk Server and SQL Server CPU utilization**</span></span>  
  
 <span data-ttu-id="b6be6-150">![&#45;MultipleMsgBox](../technical-guides/media/o-multiplemsgbox.gif "O MultipleMsgBox")</span><span class="sxs-lookup"><span data-stu-id="b6be6-150">![O&#45;MultipleMsgBox](../technical-guides/media/o-multiplemsgbox.gif "O-MultipleMsgBox")</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b6be6-151">另请参阅</span><span class="sxs-lookup"><span data-stu-id="b6be6-151">See Also</span></span>  
 [<span data-ttu-id="b6be6-152">缩放生产 BizTalk Server 环境</span><span class="sxs-lookup"><span data-stu-id="b6be6-152">Scaling a Production BizTalk Server Environment</span></span>](../technical-guides/scaling-a-production-biztalk-server-environment.md)