---
title: 一般性的指导原则，用于提高操作系统性能 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: bc9ca38e-1feb-4f34-a64b-d04566e85db9
caps.latest.revision: 11
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e7be3f8060bba20bc0ba127443095c228f954bba
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2018
ms.locfileid: "25976571"
---
# <a name="general-guidelines-for-improving-operating-system-performance"></a><span data-ttu-id="8bbae-102">一般性的指导原则，用于提高操作系统性能</span><span class="sxs-lookup"><span data-stu-id="8bbae-102">General Guidelines for Improving Operating System Performance</span></span>
<span data-ttu-id="8bbae-103">应遵循以下常规准则，以提高操作系统性能：</span><span class="sxs-lookup"><span data-stu-id="8bbae-103">The following general guidelines should be followed to improve operating system performance:</span></span>  
  
## <a name="install-the-latest-bios-storage-area-network-san-drivers-network-adapter-firmware-and-network-adapter-drivers"></a><span data-ttu-id="8bbae-104">安装最新的 BIOS、 存储区域网络 (SAN) 驱动程序、 网络适配器的固件和网络适配器驱动程序</span><span class="sxs-lookup"><span data-stu-id="8bbae-104">Install the latest BIOS, storage area network (SAN) drivers, network adapter firmware and network adapter drivers</span></span>  
 <span data-ttu-id="8bbae-105">硬件制造商定期发布可以提高性能和可用性相关联的硬件的 BIOS、 固件和驱动程序更新。</span><span class="sxs-lookup"><span data-stu-id="8bbae-105">Hardware manufacturers regularly release BIOS, firmware, and driver updates that can improve performance and availability for the associated hardware.</span></span> <span data-ttu-id="8bbae-106">请访问硬件制造商的网站上下载并应用在 BizTalk Server 环境中的每台计算机上的以下硬件组件的更新：</span><span class="sxs-lookup"><span data-stu-id="8bbae-106">Visit the hardware manufacturer’s Web site to download and apply updates for the following hardware components on each computer in the BizTalk Server environment:</span></span>  
  
1.  <span data-ttu-id="8bbae-107">BIOS 更新</span><span class="sxs-lookup"><span data-stu-id="8bbae-107">BIOS updates</span></span>  
  
2.  <span data-ttu-id="8bbae-108">SAN 驱动程序 （如果使用 SAN）</span><span class="sxs-lookup"><span data-stu-id="8bbae-108">SAN drivers (if using a SAN)</span></span>  
  
3.  <span data-ttu-id="8bbae-109">NIC 固件</span><span class="sxs-lookup"><span data-stu-id="8bbae-109">NIC firmware</span></span>  
  
4.  <span data-ttu-id="8bbae-110">网卡驱动程序</span><span class="sxs-lookup"><span data-stu-id="8bbae-110">NIC drivers</span></span>  
  
## <a name="enable-the-high-performance-power-plan-on-all-biztalk-server-and-sql-server-computers"></a><span data-ttu-id="8bbae-111">启用"高性能"BizTalk Server 和 SQL Server 的所有计算机上的电源计划。</span><span class="sxs-lookup"><span data-stu-id="8bbae-111">Enable the “High performance” Power Plan on all BizTalk Server and SQL Server computers.</span></span>  
 <span data-ttu-id="8bbae-112">默认情况下，Windows Server 2008/2008 R2 设置 （推荐） 平衡电源计划，从而使能量节省，但可能会导致延迟时间增加 （对于某些任务减慢响应时间） 并导致 CPU 密集型应用程序性能问题。</span><span class="sxs-lookup"><span data-stu-id="8bbae-112">By default, Windows Server 2008/2008 R2 sets the Balanced (recommended) power plan, which enables energy conservation, but can cause increased latency (slower response time for some tasks) and cause performance issues with CPU-intensive applications.</span></span>  
  
 <span data-ttu-id="8bbae-113">若要减少延迟，你必须确保运行 BizTalk Server 的所有服务器和 SQL Server 具有 Windows**电源计划**设置为**高性能**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-113">In order to reduce latency, you must ensure that all the servers that are running BizTalk Server and SQL Server have the Windows **Power plan** set to **High performance**.</span></span> <span data-ttu-id="8bbae-114">有关如何切换到**高性能**电源计划，请参阅知识库文章： 2207548 [Windows Server 2008 R2 上的总体性能下降](http://go.microsoft.com/fwlink/?LinkID=219677)(http://go.microsoft.com/fwlink/?LinkID=219677)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-114">For more information about how to switch to the **High Performance**  power plan, see KB article: 2207548 [Degraded overall performance on Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=219677) (http://go.microsoft.com/fwlink/?LinkID=219677).</span></span>  
  
## <a name="evaluate-the-usage-of-intel-hyper-threading-on-biztalk-server-and-sql-server-computers"></a><span data-ttu-id="8bbae-115">评估 Intel 超线程 BizTalk Server 和 SQL Server 的计算机上的使用率</span><span class="sxs-lookup"><span data-stu-id="8bbae-115">Evaluate the usage of Intel Hyper-Threading on BizTalk Server and SQL Server computers</span></span>  
  
-   <span data-ttu-id="8bbae-116">**Pre Nehalem 超线程**:</span><span class="sxs-lookup"><span data-stu-id="8bbae-116">**Pre-Nehalem Hyper-Threading**:</span></span>  
  
    -   <span data-ttu-id="8bbae-117">超线程应关闭在 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="8bbae-117">Hyper-threading should be turned off on BizTalk Server computers.</span></span> <span data-ttu-id="8bbae-118">这是通常在 BIOS 设置的处理器设置中找到的 BIOS 设置。</span><span class="sxs-lookup"><span data-stu-id="8bbae-118">This is a BIOS setting, typically found in the Processor settings of the BIOS setup.</span></span> <span data-ttu-id="8bbae-119">超线程使服务器会显示为具有更多处理器/处理器内核不是它的实际作用;但是，超线程处理器通常提供性能的物理处理器核心 20-30%之间。</span><span class="sxs-lookup"><span data-stu-id="8bbae-119">Hyper-threading makes the server appear to have more processors/processor cores than it actually does; however, hyper-threaded processors typically provide between 20-30% of the performance of a physical processor/processor core.</span></span> <span data-ttu-id="8bbae-120">当 BizTalk Server 计算调整其自我调整算法的处理器数目时，超线程处理器将导致这些调整倾斜，这可能会导致负的整体性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-120">When BizTalk Server counts the number of processors to adjust its self-tuning algorithms, the hyper-threaded processors cause these adjustments to be skewed, which can result in negative overall performance.</span></span>  
  
    -   <span data-ttu-id="8bbae-121">超线程应打开在 SQL Server 计算机，因为应用程序可能会导致大量争用 （例如 BizTalk Server) 可能导致性能降低，在 SQL Server 计算机上的超线程环境中使用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-121">Hyper-threading should be turned off on SQL Server computers because applications that can cause high levels of contention (such as BizTalk Server) may cause decreased performance in a hyper-threaded environment on a SQL Server computer.</span></span>  
  
-   <span data-ttu-id="8bbae-122">**Nehalem 超线程**： 与不同在较旧的体系结构中启用超线程在 Intel 微体系结构"Nehalem"处理器可以提供最多几乎线性容量增加。</span><span class="sxs-lookup"><span data-stu-id="8bbae-122">**Nehalem Hyper-Threading**: Unlike in older architectures, enabling hyper-threading in Intel microarchitecture “Nehalem” processors can provide up to an almost linear capacity increase.</span></span> <span data-ttu-id="8bbae-123">为获得最佳性能结果，部署"Nehalem"处理器时我们建议你启用标记增加，吞吐量 Intel 超线程 (H-T) 技术来配置计算机的 BIOS。</span><span class="sxs-lookup"><span data-stu-id="8bbae-123">For the best performance results, when you deploy “Nehalem” processors, we recommend that you configure the computer’s BIOS by enabling Intel Hyper-Threading (H-T) Technology for a marked increase in throughput.</span></span>  
  
-   <span data-ttu-id="8bbae-124">**硬件虚拟化**： 在使用硬件虚拟化时，虚拟机使用虚拟处理器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-124">**Hardware Virtualization**: When using hardware virtualization, the virtual machine is using virtual processors.</span></span> <span data-ttu-id="8bbae-125">可用的 Cpu 数取决于时配置虚拟机选择的设置。</span><span class="sxs-lookup"><span data-stu-id="8bbae-125">The number of CPUs available is based on the settings chosen when configuring the virtual machine.</span></span> <span data-ttu-id="8bbae-126">如果硬件是超线程，虚拟机无法知道它是超线程。</span><span class="sxs-lookup"><span data-stu-id="8bbae-126">If the hardware is hyper-threaded, the virtual machine wouldn't know it is hyper-threaded.</span></span>  
  
## <a name="assign-the-msdtc-log-file-directory-to-a-separate-dedicated-drive"></a><span data-ttu-id="8bbae-127">将 MSDTC 日志文件目录分配给单独的专用驱动器</span><span class="sxs-lookup"><span data-stu-id="8bbae-127">Assign the MSDTC log file directory to a separate dedicated drive</span></span>  
 <span data-ttu-id="8bbae-128">在 BizTalk Server 环境中的 SQL Server 的单独计算机上的多个 MessageBox 数据库，产生关联与 Microsoft 分布式事务处理协调器 (MSDTC) 的其他开销。</span><span class="sxs-lookup"><span data-stu-id="8bbae-128">In a BizTalk Server environment with multiple MessageBox databases on separate SQL Server computers, additional overhead associated with Microsoft Distributed Transaction Coordinator (MSDTC) is incurred.</span></span> <span data-ttu-id="8bbae-129">默认情况下，MSDTC 日志文件位于运行 DTC 服务的计算机的 %systemdrive%\windows\system32\msdtc 目录中。</span><span class="sxs-lookup"><span data-stu-id="8bbae-129">By default the MSDTC log files are located in the %systemdrive%\windows\system32\msdtc directory of the computers running the DTC service.</span></span> <span data-ttu-id="8bbae-130">若要缓解 DTC 日志记录可能成为性能瓶颈的可能性，请考虑将 MSDTC 日志文件目录移到快速的磁盘驱动器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-130">To mitigate the possibility that DTC logging could become a performance bottleneck, consider moving the MSDTC log file directory to a fast disk drive.</span></span>  
  
 <span data-ttu-id="8bbae-131">若要更改 MSDTC 日志文件目录，请参阅[配置 DTC 日志记录](http://go.microsoft.com/fwlink/?LinkID=204107)(http://go.microsoft.com/fwlink/?LinkID=204107)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-131">To change the MSDTC log file directory, see [Configure DTC Logging](http://go.microsoft.com/fwlink/?LinkID=204107) (http://go.microsoft.com/fwlink/?LinkID=204107).</span></span>  
  
## <a name="configure-antivirus-software-to-avoid-real-time-scanning-of-biztalk-server-executables-and-file-drops"></a><span data-ttu-id="8bbae-132">配置防病毒软件，以避免的 BizTalk Server 可执行文件的实时扫描和丢失的文件</span><span class="sxs-lookup"><span data-stu-id="8bbae-132">Configure antivirus software to avoid real-time scanning of BizTalk Server executables and file drops</span></span>  
 <span data-ttu-id="8bbae-133">防病毒软件实时扫描的 BizTalk Server 可执行文件和任何文件夹或文件共享由 BizTalk Server 监视接收位置对 BizTalk 服务器性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="8bbae-133">Antivirus software real-time scanning of BizTalk Server executable files and any folders or file shares monitored by BizTalk Server receive locations can negatively affect BizTalk Server performance.</span></span> <span data-ttu-id="8bbae-134">如果在 BizTalk Server 计算机上安装防病毒软件，禁用实时扫描的非可执行文件类型引用的任何 BizTalk Server 接收位置 （通常。XML，但也可以是.csv、.txt，等等。)并配置防病毒软件扫描的 BizTalk Server 可执行文件中排除</span><span class="sxs-lookup"><span data-stu-id="8bbae-134">If antivirus software is installed on the BizTalk Server computer, disable real-time scanning of non-executable file types referenced by any BizTalk Server receive locations (usually .XML, but can also be .csv, .txt, etc.) and configure antivirus software to exclude scanning of BizTalk Server executable files</span></span>  
  
## <a name="disable-intrusion-detection-network-scanning-between-computers-in-the-biztalk-server-environment"></a><span data-ttu-id="8bbae-135">禁用扫描在 BizTalk Server 环境中的计算机之间的入侵检测网络</span><span class="sxs-lookup"><span data-stu-id="8bbae-135">Disable intrusion detection network scanning between computers in the BizTalk Server environment</span></span>  
 <span data-ttu-id="8bbae-136">入侵检测软件可以慢，或者甚至阻止通过网络的有效的通信。</span><span class="sxs-lookup"><span data-stu-id="8bbae-136">Intrusion detection software can slow down or even prevent valid communications over the network.</span></span> <span data-ttu-id="8bbae-137">如果安装入侵检测软件后，禁用扫描 BizTalk Server 计算机和外部数据存储库 (SQL Server) 的计算机之间或消息传送服务 （如消息队列和 WebSphere MQSeries） 计算机的网络。</span><span class="sxs-lookup"><span data-stu-id="8bbae-137">If intrusion detection software is installed, disable network scanning between BizTalk Server computers and external data repositories (SQL Server) computers or messaging services (such as Message Queuing and WebSphere MQSeries) computers.</span></span>  
  
## <a name="defragment-all-disks-in-the-biztalk-server-environment-on-a-regular-basis"></a><span data-ttu-id="8bbae-138">对在定期 BizTalk Server 环境中的所有磁盘碎片都整理</span><span class="sxs-lookup"><span data-stu-id="8bbae-138">Defragment all disks in the BizTalk Server environment on a regular basis</span></span>  
 <span data-ttu-id="8bbae-139">在 BizTalk Server 环境中的过多的磁盘碎片将对性能造成负面影响。</span><span class="sxs-lookup"><span data-stu-id="8bbae-139">Excessive disk fragmentation in the BizTalk Server environment will negatively affect performance.</span></span> <span data-ttu-id="8bbae-140">请按照下列步骤进行碎片整理在 BizTalk Server 环境中的磁盘：</span><span class="sxs-lookup"><span data-stu-id="8bbae-140">Follow these steps to defragment disks in the BizTalk Server environment:</span></span>  
  
1.  <span data-ttu-id="8bbae-141">对所有磁盘碎片都整理 (本地和 SAN/NAS) 定期通过计划非高峰时段磁盘碎片整理。</span><span class="sxs-lookup"><span data-stu-id="8bbae-141">Defragment all disks (local and SAN/NAS) on a regular basis by scheduling off-hours disk defragmentation.</span></span>  
  
2.  <span data-ttu-id="8bbae-142">碎片整理 Windows 页面文件和预分配在 BizTalk Server 环境中的每个磁盘的主机文件表，以提升总体系统性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-142">Defragment the Windows PageFile and pre-allocate the Master File Tables of each disk in the BizTalk Server environment to boost overall system performance.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="8bbae-143">若要预分配主文件表，请参阅知识库文章 961095， ["有关主文件表区域保留在 Windows Vista 和 Windows Server 2008"](http://go.microsoft.com/fwlink/?LinkID=204563) (http://go.microsoft.com/fwlink/?LinkID=204563)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-143">To pre-allocate the Master File Tables, see Knowledge Base article 961095, [“About the Master File Table zone reservation in Windows Vista and Windows Server 2008”](http://go.microsoft.com/fwlink/?LinkID=204563) (http://go.microsoft.com/fwlink/?LinkID=204563).</span></span>  
  
## <a name="if-antivirus-software-is-installed-on-the-sql-server-computer-disable-real-time-scanning-of-data-and-transaction-files"></a><span data-ttu-id="8bbae-144">如果在 SQL Server 计算机上安装防病毒软件，禁用实时的数据和事务文件扫描</span><span class="sxs-lookup"><span data-stu-id="8bbae-144">If antivirus software is installed on the SQL Server computer, disable real-time scanning of data and transaction files</span></span>  
 <span data-ttu-id="8bbae-145">SQL Server 数据和事务文件 （.mdf、.ndf、.ldf、.mdb） 的实时扫描可以提高磁盘 I/O 争用，并降低 SQL 服务器的性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-145">Real-time scanning of the SQL Server data and transaction files (.mdf, .ndf, .ldf, .mdb) can increase disk I/O contention and reduce SQL Server performance.</span></span> <span data-ttu-id="8bbae-146">请注意，BizTalk Server 环境之间的 SQL Server 数据和事务文件的名称可能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="8bbae-146">Note that the names of the SQL Server data and transaction files may vary between BizTalk Server environments.</span></span> <span data-ttu-id="8bbae-147">有关创建与默认 BizTalk 服务器配置的数据和事务文件的详细信息，请参阅[Databases2 优化文件组](../technical-guides/optimizing-filegroups-for-the-databases2.md)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-147">For more information about the data and transaction files created with a default BizTalk Server configuration, see [Optimizing Filegroups for the Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md).</span></span>  
  
## <a name="configure-msdtc-for-biztalk-server-and-sql-server"></a><span data-ttu-id="8bbae-148">BizTalk Server 和 SQL Server 配置 MSDTC</span><span class="sxs-lookup"><span data-stu-id="8bbae-148">Configure MSDTC for BizTalk Server and SQL Server</span></span>  
 <span data-ttu-id="8bbae-149">若要简化 SQL Server 和 BizTalk Server 之间的事务，必须启用 Microsoft 分布式事务处理协调器 (MSDTC)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-149">To facilitate transactions between SQL Server and BizTalk Server, you must enable Microsoft Distributed Transaction Coordinator (MSDTC).</span></span>  
  
#### <a name="to-configure-distributed-transaction-coordinator-dtc"></a><span data-ttu-id="8bbae-150">若要配置分布式事务处理协调器 (DTC)</span><span class="sxs-lookup"><span data-stu-id="8bbae-150">To configure Distributed Transaction Coordinator (DTC)</span></span>  
  
1.  <span data-ttu-id="8bbae-151">单击**启动**，单击**运行**，类型**dcomcnfg**，然后单击**确定**以打开**组件服务**.</span><span class="sxs-lookup"><span data-stu-id="8bbae-151">Click **Start**, click **Run**, type **dcomcnfg**, and then click **OK** to open **Component Services**.</span></span>  
  
2.  <span data-ttu-id="8bbae-152">在控制台树中，依次展开“组件服务”、“计算机”、“我的计算机”、“分布式事务处理协调器”，然后单击“本地 DTC”。</span><span class="sxs-lookup"><span data-stu-id="8bbae-152">In the console tree, expand **Component Services**, expand **Computers**, expand **My Computer**, expand **Distributed Transaction Coordinator**, and then click **Local DTC**.</span></span>  
  
3.  <span data-ttu-id="8bbae-153">右键单击**本地 DTC**，然后单击**属性**以显示**本地 DTC 属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="8bbae-153">Right-click **Local DTC**, and then click **Properties** to display the **Local DTC Properties** dialog box.</span></span>  
  
4.  <span data-ttu-id="8bbae-154">上**跟踪**选项卡上，在**输出选项**部分中，清除**跟踪输出**框。</span><span class="sxs-lookup"><span data-stu-id="8bbae-154">On the **Tracing** tab, under **Output Options** section, clear the **Trace Output** box.</span></span>  
  
5.  <span data-ttu-id="8bbae-155">单击 **“安全性”** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="8bbae-155">Click the **Security** tab.</span></span>  
  
6.  <span data-ttu-id="8bbae-156">确保以下四个选项均处于选中状态，且清除所有其他选项：</span><span class="sxs-lookup"><span data-stu-id="8bbae-156">Ensure that each of the following four options is selected, and all others are cleared:</span></span>  
  
    -   <span data-ttu-id="8bbae-157">**网络 DTC 访问**</span><span class="sxs-lookup"><span data-stu-id="8bbae-157">**Network DTC Access**</span></span>  
  
    -   <span data-ttu-id="8bbae-158">**允许入站**</span><span class="sxs-lookup"><span data-stu-id="8bbae-158">**Allow Inbound**</span></span>  
  
    -   <span data-ttu-id="8bbae-159">**允许出站**</span><span class="sxs-lookup"><span data-stu-id="8bbae-159">**Allow Outbound**</span></span>  
  
    -   <span data-ttu-id="8bbae-160">**不要求进行验证**</span><span class="sxs-lookup"><span data-stu-id="8bbae-160">**No Authentication Required**</span></span>  
  
7.  <span data-ttu-id="8bbae-161">单击**确定**关闭**本地 DTC 属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="8bbae-161">Click **OK** to close the **Local DTC Properties** dialog box.</span></span> <span data-ttu-id="8bbae-162">如果系统提示您重新启动 MSDTC 服务，请单击**是**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-162">If prompted to restart the MSDTC service, click **Yes**.</span></span>  
  
8.  <span data-ttu-id="8bbae-163">关闭“组件服务”。</span><span class="sxs-lookup"><span data-stu-id="8bbae-163">Close **Component Services**.</span></span>  
  
9. <span data-ttu-id="8bbae-164">单击**启动**，指向**管理工具**，然后单击**高级安全 Windows 防火墙**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-164">Click **Start**, point to **Administrative Tools**, and then click **Windows Firewall with Advanced Security**.</span></span>  
  
10. <span data-ttu-id="8bbae-165">在高级安全 Windows 防火墙中，单击**入站规则**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-165">In Windows Firewall with Advanced Security, click **Inbound Rules**.</span></span>  
  
11. <span data-ttu-id="8bbae-166">在**入站规则**窗格中，右键单击**分布式事务处理协调器**\* （根据需要），然后单击**启用规则**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-166">In the **Inbound Rules** pane, right-click **Distributed Transaction Coordinator**\* (as appropriate), and then click **Enable Rule**.</span></span>  
  
12. <span data-ttu-id="8bbae-167">在高级安全 Windows 防火墙中，单击**出站规则**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-167">In Windows Firewall with Advanced Security, click **Outbound Rules**.</span></span>  
  
13. <span data-ttu-id="8bbae-168">在**出站规则**窗格中，右键单击**分布式事务处理协调器**\* （根据需要），然后单击**启用规则**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-168">In the **Outbound Rules** pane, right-click **Distributed Transaction Coordinator**\* (as appropriate), and then click **Enable Rule**.</span></span>  
  
14. <span data-ttu-id="8bbae-169">上**控制面板**，双击**管理工具**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-169">On the **Control Panel**, double-click **Administrative Tools**.</span></span>  
  
15. <span data-ttu-id="8bbae-170">在右侧窗格中，双击**服务**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-170">In the right-hand pane, double-click **Services**.</span></span>  
  
16. <span data-ttu-id="8bbae-171">在右侧窗格中的**服务 （本地）**，右键单击**COM + 应用程序系统**，单击**重新启动**，并等待服务重新启动。</span><span class="sxs-lookup"><span data-stu-id="8bbae-171">In the right-hand pane of **Services (Local)**, right-click **COM+ System Application**, click **Restart**, and wait for the service to restart.</span></span>  
  
17. <span data-ttu-id="8bbae-172">右键单击并重启“分布式事务处理协调器”服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-172">Right-click and restart the **Distributed Transaction Coordinator** service.</span></span>  
  
18. <span data-ttu-id="8bbae-173">右键单击并重启“SQL Server (MSSQLSERVER)”服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-173">Right-click and restart the **SQL Server (MSSQLSERVER)** service.</span></span>  
  
19. <span data-ttu-id="8bbae-174">关闭“服务(本地)”，然后关闭“管理工具”。</span><span class="sxs-lookup"><span data-stu-id="8bbae-174">Close **Services (Local)**, and then close **Administrative Tools**.</span></span>  
  
## <a name="configure-firewalls-for-biztalk-server"></a><span data-ttu-id="8bbae-175">为 BizTalk Server 中配置防火墙</span><span class="sxs-lookup"><span data-stu-id="8bbae-175">Configure firewall(s) for BizTalk Server</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8bbae-176">此步骤才是必需的一个或多个防火墙如果都在你的 BizTalk 服务器环境中的位置。</span><span class="sxs-lookup"><span data-stu-id="8bbae-176">This step is only required if one or more firewalls are in place in your BizTalk Server environment.</span></span>  
  
 <span data-ttu-id="8bbae-177">查看以下信息来为 BizTalk Server 中配置防火墙：</span><span class="sxs-lookup"><span data-stu-id="8bbae-177">Review the following information to configure firewall(s) for BizTalk Server:</span></span>  
  
-   <span data-ttu-id="8bbae-178">[BizTalk Server 所需端口](http://go.microsoft.com/fwlink/?LinkID=153238)(http://go.microsoft.com/fwlink/?LinkID=153238)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-178">[Required Ports for BizTalk Server](http://go.microsoft.com/fwlink/?LinkID=153238) (http://go.microsoft.com/fwlink/?LinkID=153238).</span></span>  
  
-   <span data-ttu-id="8bbae-179">若要配置与防火墙一起使用的 RPC 动态端口分配，请参阅知识库文章 929851， ["在 Windows Vista 和 Windows Server 2008 中，已更改了 TCP/IP 的默认动态端口范围"](http://go.microsoft.com/fwlink/?LinkID=204568) (超链接"http://go.microsoft.com/fwlink/?LinkID=204568"http://go.microsoft.com/fwlink/?LinkID=204568).</span><span class="sxs-lookup"><span data-stu-id="8bbae-179">To configure RPC dynamic port allocation to work with firewalls, see Knowledge Base article 929851, ["The default dynamic port range for TCP/IP has changed in Windows Vista and in Windows Server 2008"](http://go.microsoft.com/fwlink/?LinkID=204568) ( HYPERLINK "http://go.microsoft.com/fwlink/?LinkID=204568" http://go.microsoft.com/fwlink/?LinkID=204568).</span></span> <span data-ttu-id="8bbae-180">有关如何配置 Windows 防火墙，以容纳所需的端口的信息，请参阅[Windows 防火墙和 IPsec 策略部署分步指南](http://go.microsoft.com/fwlink/?LinkID=204569)(http://go.microsoft.com/fwlink/?LinkID=204569)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-180">For information about how to configure Windows Firewall to accommodate the necessary ports, see [Windows Firewall and IPsec Policy Deployment Step-by-Step Guide](http://go.microsoft.com/fwlink/?LinkID=204569) (http://go.microsoft.com/fwlink/?LinkID=204569).</span></span>  
  
## <a name="install-appropriate-com-and-msdtc-hotfix-rollup-packages"></a><span data-ttu-id="8bbae-181">安装相应的 COM + 和 MSDTC 修补程序汇总包</span><span class="sxs-lookup"><span data-stu-id="8bbae-181">Install appropriate COM+ and MSDTC hotfix rollup packages</span></span>  
 <span data-ttu-id="8bbae-182">查看以下信息来安装相应的 COM + 和 MS DTC 修补程序汇总包：</span><span class="sxs-lookup"><span data-stu-id="8bbae-182">Review the following information to install the appropriate COM+ and MS DTC hotfix rollup packages:</span></span>  
  
-   <span data-ttu-id="8bbae-183">MS DTC 修补程序可在 Microsoft 知识库文章 article978476 ["在 Windows Server 2008 R2 MS DTC 修补程序汇总包 1 中修复了 MS DTC 问题"](http://go.microsoft.com/fwlink/?LinkID=204109) (http://go.microsoft.com/fwlink/?LinkID=204109)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-183">The MS DTC hotfix can be found in Microsoft Knowledge Base article978476 ["The MS DTC issue that is fixed in Windows Server 2008 R2 MS DTC Hotfix Rollup Package 1"](http://go.microsoft.com/fwlink/?LinkID=204109) (http://go.microsoft.com/fwlink/?LinkID=204109).</span></span>  
  
-   <span data-ttu-id="8bbae-184">可以通过搜索找到最新的 DTC 修补程序汇总包 KB 文章[ http://support.microsoft.com ](http://go.microsoft.com/fwlink/?LinkID=96185) (http://go.microsoft.com/fwlink/?LinkID=96185)短语 （包括引号）：</span><span class="sxs-lookup"><span data-stu-id="8bbae-184">The latest DTC hotfix rollup package KB article can be found by searching [http://support.microsoft.com](http://go.microsoft.com/fwlink/?LinkID=96185) (http://go.microsoft.com/fwlink/?LinkID=96185) for the phrase (including the quotes):</span></span>  
  
    ```  
    "MS DTC Hotfix Rollup Package"  
    ```  
  
     <span data-ttu-id="8bbae-185">下面的查询执行此搜索。</span><span class="sxs-lookup"><span data-stu-id="8bbae-185">The following query does this search for you.</span></span> <span data-ttu-id="8bbae-186">选择的最新项目：</span><span class="sxs-lookup"><span data-stu-id="8bbae-186">Choose the latest one:</span></span>   
    [<span data-ttu-id="8bbae-187">http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package"</span><span class="sxs-lookup"><span data-stu-id="8bbae-187">http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package"</span></span>](http://support.microsoft.com/search/default.aspx?query="MS+DTC+Hotfix+Rollup+Package")  
  
## <a name="use-the-interrupt-affinity-policy-tool-to-bind-network-adapter-interrupts-to-specific-processors-on-multiprocessor-computers"></a><span data-ttu-id="8bbae-188">使用中断地缘策略工具将网络适配器中断绑定到多处理器计算机上的特定处理器</span><span class="sxs-lookup"><span data-stu-id="8bbae-188">Use the Interrupt-Affinity Policy Tool to bind network adapter interrupts to specific processors on multiprocessor computers</span></span>  
 <span data-ttu-id="8bbae-189">中断地缘策略 (IntPolicy) 是一个工具，可将"绑定"或更改的中断对给定的设备 （如网络适配器） 的 CPU 相关性具有特定处理器或多处理器计算机上的处理器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-189">The Interrupt-Affinity Policy (IntPolicy) is a tool that allows you to “bind” or change the CPU affinity of the interrupts for a given device (such as a network adapter) to a specific processor or processors on a multiprocessor computer.</span></span> <span data-ttu-id="8bbae-190">此绑定也称为分区。</span><span class="sxs-lookup"><span data-stu-id="8bbae-190">This binding is also referred to as partitioning.</span></span> <span data-ttu-id="8bbae-191">来自特定网络适配器与多处理器计算机上的特定处理器的中断的绑定强制实施运行延缓的过程调用 (Dpc) 和指定的处理器上的网络适配器的中断服务例程 (Isr)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-191">The binding of interrupts from a specific network adapter to specific processors on a multiprocessor computer enforces running deferred procedure calls (DPCs) and interrupt service routines (ISRs) for the network adapter on the designated processors.</span></span> <span data-ttu-id="8bbae-192">请注意，不能在单个处理器的计算机上配置中断相关性。</span><span class="sxs-lookup"><span data-stu-id="8bbae-192">Note that interrupt affinity cannot be configured on single processor computers.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8bbae-193">DPC 被指排队通常将在以后执行的内核模式函数调用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-193">A DPC is defined as a queued call to a kernel-mode function that will usually be executed at a later time.</span></span> <span data-ttu-id="8bbae-194">ISR 被指其目的是生成中断时服务设备的例程。</span><span class="sxs-lookup"><span data-stu-id="8bbae-194">An ISR is defined as a routine whose purpose is to service a device when it generates an interrupt.</span></span> <span data-ttu-id="8bbae-195">有关延缓的过程调用和中断服务例程的详细信息，请参阅[Windows 驱动程序工具包文档](http://go.microsoft.com/fwlink/?LinkId=84418)(http://go.microsoft.com/fwlink/?LinkId=84418)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-195">For more information about deferred procedure calls and interrupt service routines, see the [Windows Driver Kit documentation](http://go.microsoft.com/fwlink/?LinkId=84418) (http://go.microsoft.com/fwlink/?LinkId=84418).</span></span>  
  
 <span data-ttu-id="8bbae-196">![中断&#45;地缘策略工具](../technical-guides/media/interrupt-affinitypolicytool.gif "中断 AffinityPolicyTool")</span><span class="sxs-lookup"><span data-stu-id="8bbae-196">![Interrupt&#45;Affinity Policy Tool](../technical-guides/media/interrupt-affinitypolicytool.gif "Interrupt-AffinityPolicyTool")</span></span>  
<span data-ttu-id="8bbae-197">中断-关联策略工具</span><span class="sxs-lookup"><span data-stu-id="8bbae-197">Interrupt-Affinity Policy Tool</span></span>  
  
 <span data-ttu-id="8bbae-198">基于 Windows Server 2008 多处理器计算机上中断控制器的默认行为是将设备中断分配给任何可用的处理器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-198">On Windows Server 2008 based multiprocessor computers, the default behavior of the interrupt controller is to assign device interrupts to any available processor.</span></span> <span data-ttu-id="8bbae-199">当网络连接和文件服务器会话的给定的网络适配器是绑定/分区以在一组特定的处理器上运行而不是任何可用的处理器、 性能以及关联的网络处理的可伸缩性得到了改进。</span><span class="sxs-lookup"><span data-stu-id="8bbae-199">When network connections and file server sessions for a given network adapter are bound/partitioned to run on a specific set of processors, rather than any available processor, the performance and scalability of the associated network processing is improved.</span></span> <span data-ttu-id="8bbae-200">BizTalk Server 中的大型解决方案通常采用使用多处理器 SQL Server 计算机具有多个网络适配器中断绑定可能特别有益的。</span><span class="sxs-lookup"><span data-stu-id="8bbae-200">Large BizTalk Server solutions often employ the use of multi-processor SQL Server computers with multiple network adapters for which interrupt-binding may be particularly beneficial.</span></span>   
<span data-ttu-id="8bbae-201">中断绑定使用 IntPolicy 应始终评估在测试环境然后再在生产环境中使用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-201">Interrupt-binding using IntPolicy should always be evaluated in a test environment before employing in a production environment.</span></span> <span data-ttu-id="8bbae-202">硬件、 操作系统和应用程序配置的测试环境应尽可能接近生产环境。</span><span class="sxs-lookup"><span data-stu-id="8bbae-202">The hardware, operating system and application configuration of the test environment should approximate the production environment as closely as possible.</span></span> <span data-ttu-id="8bbae-203">这将允许你以测试各种屏蔽的中断绑定，并确定程度该中断绑定将提高性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-203">This will allow you to test various permutations of interrupt-binding and determine the extent that interrupt-binding will increase performance.</span></span>  
 <span data-ttu-id="8bbae-204">我们建议你禁用超线程支持超线程使用 Cpu 的计算机上配置 IntPolicy 之前。</span><span class="sxs-lookup"><span data-stu-id="8bbae-204">We recommend that you disable hyper-threading before configuring IntPolicy on a computer with CPUs that supports hyper-threading.</span></span> <span data-ttu-id="8bbae-205">这将确保中断分配给物理处理器，而不是逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-205">This will ensure that interrupts are assigned to physical processors rather than logical processors.</span></span> <span data-ttu-id="8bbae-206">分配到引用相同的物理处理器的逻辑处理器的中断地缘将不会提高性能，并甚至可能会降低系统性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-206">Assigning interrupt affinity to logical processors that refer to the same physical processor will not increase performance and could even degrade system performance.</span></span>    <span data-ttu-id="8bbae-207">超链接"The"[中断地缘策略工具](http://go.microsoft.com/fwlink/?LinkID=204111)(http://go.microsoft.com/fwlink/?LinkID=204111)从 WHDC 网站下载。</span><span class="sxs-lookup"><span data-stu-id="8bbae-207">HYPERLINK "The" The [Interrupt-Affinity Policy Tool](http://go.microsoft.com/fwlink/?LinkID=204111) (http://go.microsoft.com/fwlink/?LinkID=204111) is available for download from the WHDC website.</span></span>  
  
## <a name="use-the-ntfs-file-system-on-all-volumes"></a><span data-ttu-id="8bbae-208">使用上的所有卷的 NTFS 文件系统</span><span class="sxs-lookup"><span data-stu-id="8bbae-208">Use the NTFS file system on all volumes</span></span>  
 <span data-ttu-id="8bbae-209">Windows Server 来格式化驱动器，包括 NTFS、 FAT 和 FAT32 提供多个文件系统类型。</span><span class="sxs-lookup"><span data-stu-id="8bbae-209">Windows Server offers multiple file system types for formatting drives, including NTFS, FAT, and FAT32.</span></span> <span data-ttu-id="8bbae-210">NTFS 应始终为文件系统的服务器的选择。</span><span class="sxs-lookup"><span data-stu-id="8bbae-210">NTFS should always be the file system of choice for servers.</span></span>  
<span data-ttu-id="8bbae-211">NTFS 针对 FAT 和 FAT32 文件系统中有很大的性能优点，并应在 Windows 服务器上以独占方式使用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-211">NTFS offers considerable performance benefits over the FAT and FAT32 file systems and should be used exclusively on Windows servers.</span></span> <span data-ttu-id="8bbae-212">此外，NTFS 通过 FAT 和 FAT32 提供许多安全性、 可伸缩性、 稳定性和可恢复性的好处。</span><span class="sxs-lookup"><span data-stu-id="8bbae-212">In addition, NTFS offers many security, scalability, stability and recoverability benefits over FAT and FAT32.</span></span>  
<span data-ttu-id="8bbae-213">在以前版本的 Windows，FAT 和 FAT32 上通常实现较小的卷 (例如 < 500 MB)，因为其正通常在这种情况下更快。</span><span class="sxs-lookup"><span data-stu-id="8bbae-213">Under previous versions of Windows, FAT and FAT32 were often implemented for smaller volumes (say <500 MB) because they were often faster in such situations.</span></span> <span data-ttu-id="8bbae-214">相对成本较低今天的磁盘存储和操作系统和应用程序将驱动器容量推送到最多，它不太小的卷，此类将使用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-214">With disk storage relatively inexpensive today and operating systems and applications pushing drive capacity to a maximum, it is unlikely that such small volumes will be in use.</span></span> <span data-ttu-id="8bbae-215">FAT32 伸缩性比 FAT 更好，较大卷上，但仍不适当的文件系统的 Windows 服务器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-215">FAT32 scales better than FAT on larger volumes but is still not an appropriate file system for Windows servers.</span></span>  
<span data-ttu-id="8bbae-216">FAT 和 FAT32 通常实现了在过去如它们已被视为更轻松地可恢复和可使用与卷问题的情况下的本机 DOS 工具来管理。</span><span class="sxs-lookup"><span data-stu-id="8bbae-216">FAT and FAT32 have often been implemented in the past as they were seen as more easily recoverable and manageable with native DOS tools in the event of a problem with a volume.</span></span> <span data-ttu-id="8bbae-217">现在，使用各种 NTFS 可恢复性工具生成同时本机到操作系统，但可用作第三方实用程序可用，应不再有未使用 NTFS 文件系统的有效参数。</span><span class="sxs-lookup"><span data-stu-id="8bbae-217">Today, with the various NTFS recoverability tools built both natively into the operating system and available as third-party utilities available, there should no longer be a valid argument for not using NTFS for file systems.</span></span>  
  
## <a name="do-not-use-ntfs-file-compression"></a><span data-ttu-id="8bbae-218">不会使用 NTFS 文件压缩</span><span class="sxs-lookup"><span data-stu-id="8bbae-218">Do not use NTFS file compression</span></span>  
 <span data-ttu-id="8bbae-219">虽然使用 NTFS 文件系统压缩是减少空间卷上的简单办法，但它不是适用于企业的文件服务器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-219">Though using NTFS file system compression is an easy way to reduce space on volumes, it is not appropriate for enterprise file servers.</span></span> <span data-ttu-id="8bbae-220">实现压缩在 CPU 中的所有磁盘操作上将不必要的开销，并最好避免使用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-220">Implementing compression places an unnecessary overhead on the CPU for all disk operations and is best avoided.</span></span> <span data-ttu-id="8bbae-221">考虑用于添加更多的磁盘的选项、 近线存储或请考虑将数据存档在认真考虑文件系统压缩之前。</span><span class="sxs-lookup"><span data-stu-id="8bbae-221">Think about options for adding additional disks, near-line storage or consider archiving data before seriously considering file system compression.</span></span>  
  
## <a name="review-disk-controller-stripe-size-and-volume-allocation-units"></a><span data-ttu-id="8bbae-222">查看磁盘控制器条带大小和卷分配单元。</span><span class="sxs-lookup"><span data-stu-id="8bbae-222">Review disk controller stripe size and volume allocation units</span></span>  
 <span data-ttu-id="8bbae-223">当配置驱动器数组和硬件驱动器控制器中的逻辑驱动器，并确保你匹配控制器条带大小，将使用格式化卷的分配单元大小。</span><span class="sxs-lookup"><span data-stu-id="8bbae-223">When configuring drive arrays and logical drives within your hardware drive controller, ensure you match the controller stripe size with the allocation unit size that the volumes will be formatted with.</span></span> <span data-ttu-id="8bbae-224">这将确保磁盘读取和写入已获得最佳性能，提供更好的整体服务器性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-224">This will ensure disk read and write performance is optimal and offer better overall server performance.</span></span>  
<span data-ttu-id="8bbae-225">配置更大的分配单元 （或群集或块） 的大小将会导致效率较低，使用的磁盘空间，但还将提供更高的磁盘 I/O 性能磁头可以在每个读取活动期间读取更多数据。</span><span class="sxs-lookup"><span data-stu-id="8bbae-225">Configuring larger allocation unit (or cluster or block) sizes will cause disk space to be used less efficiently, but will also provide higher disk I/O performance as the disk head can read in more data during each read activity.</span></span>  
<span data-ttu-id="8bbae-226">若要确定最佳的设置以配置控制器，然后使用磁盘进行格式化，应确定具有类似的文件系统特征的服务器的磁盘子系统上的磁盘的平均传输大小。</span><span class="sxs-lookup"><span data-stu-id="8bbae-226">To determine the optimal setting to configure the controller and format the disks with, you should determine the average disk transfer size on the disk subsystem of a server with similar file system characteristics.</span></span> <span data-ttu-id="8bbae-227">使用 Windows 性能监视器工具来监视逻辑磁盘对象计数器的 avg.Disk Bytes/Read 和 avg.正常的活动，以帮助确定要使用的最佳值一段时间内磁盘字节数/写入。</span><span class="sxs-lookup"><span data-stu-id="8bbae-227">Use the Windows Performance Monitor tool to monitor the Logical Disk object counters of Avg. Disk Bytes/Read and Avg. Disk Bytes/Write over a period of normal activity to help determine the best value to use.</span></span>  
<span data-ttu-id="8bbae-228">尽管较小的分配单元大小可能很多小的文件或记录，如果将访问系统合理，为 64 KB 分配单元大小将具有声音的性能和在大多数情况下的 I/O 吞吐量。</span><span class="sxs-lookup"><span data-stu-id="8bbae-228">Although smaller allocation unit sizes may be warranted if the system will be accessing many small files or records, an allocation unit size of 64 KB delivers sound performance and I/O throughput under most circumstances.</span></span> <span data-ttu-id="8bbae-229">改进的性能优化的分配单元大小特别说明，可在磁盘负载增加时。</span><span class="sxs-lookup"><span data-stu-id="8bbae-229">Improvements in performance with tuned allocation unit sizes can be particularly noted when disk load increases.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8bbae-230">该格式命令行工具或磁盘管理工具需要格式化卷时指定分配单元大小大于 4096 个字节 (4 KB)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-230">Either the FORMAT command line tool or the Disk Management tool is required to specify an allocation unit size larger than 4096 bytes (4 KB) when formatting volumes.</span></span> <span data-ttu-id="8bbae-231">Windows 资源管理器只能将最多此阈值设置格式。</span><span class="sxs-lookup"><span data-stu-id="8bbae-231">Windows Explorer will only format up to this threshold.</span></span> <span data-ttu-id="8bbae-232">CHKDSK 命令可以用于确认卷的当前分配单元大小，但需要扫描整个卷之前所需的信息将显示 （显示为字节每个分配单元中）。</span><span class="sxs-lookup"><span data-stu-id="8bbae-232">The CHKDSK command can be used to confirm the current allocation unit size of a volume however it needs to scan the entire volume before the desired information is displayed (shown as Bytes in each allocation unit).</span></span>  
  
## <a name="monitor-drive-space-utilization"></a><span data-ttu-id="8bbae-233">监视驱动器空间利用率</span><span class="sxs-lookup"><span data-stu-id="8bbae-233">Monitor drive space utilization</span></span>  
 <span data-ttu-id="8bbae-234">较少的数据磁盘上的已，它将运行得越快。</span><span class="sxs-lookup"><span data-stu-id="8bbae-234">The less data a disk has on it, the faster it will operate.</span></span> <span data-ttu-id="8bbae-235">这是磁盘的因为在很好地碎片驱动器上，尽可能靠近的外边缘写入数据尽可能，因为这是磁盘的其中的磁盘的速度最快旋转并实现最佳性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-235">This is because on a well defragmented drive, data is written as close to the outer edge of the disk as possible, as this is where the disk spins the fastest and yields the best performance.</span></span>  
<span data-ttu-id="8bbae-236">磁盘寻道时间通常显著超过读取或写入活动。</span><span class="sxs-lookup"><span data-stu-id="8bbae-236">Disk seek time is normally considerably longer than read or write activities.</span></span> <span data-ttu-id="8bbae-237">如上所述，数据最初是写入外边缘的磁盘。</span><span class="sxs-lookup"><span data-stu-id="8bbae-237">As noted above, data is initially written to the outside edge of a disk.</span></span> <span data-ttu-id="8bbae-238">因为减少了对磁盘存储增加和可用空间的要求，更接近将数据写入磁盘的中心。</span><span class="sxs-lookup"><span data-stu-id="8bbae-238">As demand for disk storage increases and free space reduces, data is written closer to the center of the disk.</span></span> <span data-ttu-id="8bbae-239">磁盘查找增大的定位数据作为头移动离开边缘，并且在发现时间，它将需要更长时间才能读取，影响磁盘 I/O 性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-239">Disk seek time is increased in locating the data as the head moves away from the edge, and when found, it takes longer to read, hindering disk I/O performance.</span></span>  
<span data-ttu-id="8bbae-240">这意味着，监视磁盘空间利用率非常重要不只是出于容量原因而是为了性能还。</span><span class="sxs-lookup"><span data-stu-id="8bbae-240">This means that monitoring disk space utilization is important not just for capacity reasons but for performance also.</span></span>  
<span data-ttu-id="8bbae-241">根据经验，逐步目标是保持磁盘可用空间之间 20%到 25%的总磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="8bbae-241">As a rule of thumb, work towards a goal of keeping disk free space between 20% to 25% of total disk space.</span></span> <span data-ttu-id="8bbae-242">如果可用磁盘空间下降到低于此阈值，则磁盘输入/输出性能将受到负面影响。</span><span class="sxs-lookup"><span data-stu-id="8bbae-242">If free disk space drops below this threshold, then disk I/O performance will be negatively impacted.</span></span>  
  
## <a name="implement-a-strategy-to-avoid-disk-fragmentation"></a><span data-ttu-id="8bbae-243">实现策略以避免磁盘碎片整理</span><span class="sxs-lookup"><span data-stu-id="8bbae-243">Implement a strategy to avoid disk fragmentation</span></span>  
 <span data-ttu-id="8bbae-244">你在磁盘上，包括根驱动器，以防止性能下降定期运行的碎片整理程序实用。</span><span class="sxs-lookup"><span data-stu-id="8bbae-244">Run a defragmenter utility regularly on your disks, including the root drive, to prevent performance degradation.</span></span> <span data-ttu-id="8bbae-245">执行此每周忙磁盘上。</span><span class="sxs-lookup"><span data-stu-id="8bbae-245">Do this weekly on busy disks.</span></span> <span data-ttu-id="8bbae-246">磁盘碎片整理程序随 Windows 安装，并可以从一项计划任务按照指定间隔运行。</span><span class="sxs-lookup"><span data-stu-id="8bbae-246">A disk defragmenter is installed with Windows and can be run from a Scheduled Task at specified intervals.</span></span>  
  
## <a name="optimize-windows-server-performance-for-background-services"></a><span data-ttu-id="8bbae-247">优化后台服务的 Windows Server 性能</span><span class="sxs-lookup"><span data-stu-id="8bbae-247">Optimize Windows Server performance for background services</span></span>  
 <span data-ttu-id="8bbae-248">BizTalk Server 过程 (BTSNTSVC.exe) 作为后台服务运行。</span><span class="sxs-lookup"><span data-stu-id="8bbae-248">The BizTalk Server process (BTSNTSVC.exe) runs as a background service.</span></span>   
<span data-ttu-id="8bbae-249">Windows Server 2008 使用抢先式多任务来确定优先级将受 CPU 就读到的进程线程。</span><span class="sxs-lookup"><span data-stu-id="8bbae-249">Windows Server 2008 uses preemptive multi-tasking to prioritize process threads that will be attended to by the CPU.</span></span> <span data-ttu-id="8bbae-250">Preemptive 多任务是凭此进程的执行将暂停，启动另一个进程时，操作系统自行一个方法。</span><span class="sxs-lookup"><span data-stu-id="8bbae-250">Preemptive multi-tasking is a methodology whereby the execution of a process is halted and another process is started, at the discretion of the operating system.</span></span> <span data-ttu-id="8bbae-251">此方案可防止单个线程占据 CPU。</span><span class="sxs-lookup"><span data-stu-id="8bbae-251">This scheme prevents a single thread from dominating the CPU.</span></span>  
<span data-ttu-id="8bbae-252">切换到下一个进程内执行从 CPU 被称为上下文切换。</span><span class="sxs-lookup"><span data-stu-id="8bbae-252">Switching the CPU from executing one process to the next is known as context-switching.</span></span> <span data-ttu-id="8bbae-253">Windows 操作系统的系统包括确定多长时间允许各个线程之前上下文切换时，处理下一个线程在 CPU 上运行的设置。</span><span class="sxs-lookup"><span data-stu-id="8bbae-253">The Windows operating system includes a setting that determines how long individual threads are allowed to run on the CPU before a context-switch occurs and the next thread is serviced.</span></span> <span data-ttu-id="8bbae-254">此时间量称为量程。</span><span class="sxs-lookup"><span data-stu-id="8bbae-254">This amount of time is referred to as a quantum.</span></span> <span data-ttu-id="8bbae-255">此设置允许你选择处理器量程前台程序和后台服务之间共享的方式。</span><span class="sxs-lookup"><span data-stu-id="8bbae-255">This setting lets you choose how processor quanta are shared between foreground programs and background services.</span></span> <span data-ttu-id="8bbae-256">通常为服务器不需要允许前台程序具有比后台服务分配给它的更多 CPU 时间。</span><span class="sxs-lookup"><span data-stu-id="8bbae-256">Typically for a server it is not desirable to allow a foreground program to have more CPU time allocated to it than background services.</span></span> <span data-ttu-id="8bbae-257">也就是说，所有应用程序，它们在服务器上运行的进程，应考虑相等 CPU 时间。</span><span class="sxs-lookup"><span data-stu-id="8bbae-257">That is, all applications and their processes running on the server should be given equal consideration for CPU time.</span></span>  
 <span data-ttu-id="8bbae-258">若要增加为等 BizTalk 主机实例的后台服务的性能，请按照下列步骤：</span><span class="sxs-lookup"><span data-stu-id="8bbae-258">To increase performance for background service like BizTalk host instances, follow these steps:</span></span>  
  
1.  <span data-ttu-id="8bbae-259">单击**启动**，单击**控制面板**，然后单击**系统**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-259">Click **Start**, click **Control Panel**, and then click **System**.</span></span>  
  
2.  <span data-ttu-id="8bbae-260">单击**高级**选项卡上，并依次**设置**下**性能**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-260">Click the **Advanced** tab, and then click **Settings** under **Performance**.</span></span>  
  
3.  <span data-ttu-id="8bbae-261">单击**高级**选项卡上，单击**后台服务**，然后单击**确定**两次。</span><span class="sxs-lookup"><span data-stu-id="8bbae-261">Click the **Advanced** tab, click **Background services**, and then click **OK** twice.</span></span>  
  
## <a name="disable-non-essential-services"></a><span data-ttu-id="8bbae-262">禁用不必要的服务</span><span class="sxs-lookup"><span data-stu-id="8bbae-262">Disable non-essential services</span></span>  
 <span data-ttu-id="8bbae-263">Windows Server 2008 的默认安装启用 BizTalk Server 环境中可能不需要的多个服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-263">A default installation of Windows Server 2008 enables several services that may not be required in a BizTalk Server environment.</span></span> <span data-ttu-id="8bbae-264">每个正在运行的服务使用系统资源，因此不必要的服务应被禁用，从而改善整体性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-264">Each running service consumes system resources and so unnecessary services should be disabled to improve overall performance.</span></span>  
<span data-ttu-id="8bbae-265">禁用服务时应小心。</span><span class="sxs-lookup"><span data-stu-id="8bbae-265">Care should be taken when disabling services.</span></span> <span data-ttu-id="8bbae-266">彻底研究再禁用该服务，因为 Windows Server 需要某些服务正在运行的服务的目的。</span><span class="sxs-lookup"><span data-stu-id="8bbae-266">Thoroughly research the purpose of a service before disabling the service as Windows Server requires certain services are running.</span></span> <span data-ttu-id="8bbae-267">如果所需的 Windows Server 2008 服务被禁用，操作系统可能无法运行，甚至无法启动。</span><span class="sxs-lookup"><span data-stu-id="8bbae-267">If services required by Windows Server 2008 are disabled, the operating system may become inoperable and possibly even unable to boot.</span></span>  
<span data-ttu-id="8bbae-268">若要禁用不需要专用的 BizTalk Server 的 Windows Server 2008 服务，请按照下列步骤：</span><span class="sxs-lookup"><span data-stu-id="8bbae-268">To disable Windows Server 2008 services that are not required for a dedicated BizTalk Server, follow these steps:</span></span>  
  
1.  <span data-ttu-id="8bbae-269">单击 **启动**, ，指向 **管理工具**, ，然后单击 **计算机管理**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-269">Click **Start**, point to **Administrative Tools**, and then click **Computer Management**.</span></span>  
  
2.  <span data-ttu-id="8bbae-270">下**计算机管理 （本地）**，展开**服务和应用程序**，然后单击**服务**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-270">Under **Computer Management (Local)**, expand **Services and Applications**, and then click **Services**.</span></span>  
    <span data-ttu-id="8bbae-271">在**状态**列中，每个正在运行的服务标记为"已启动。"</span><span class="sxs-lookup"><span data-stu-id="8bbae-271">In the **Status** column, each service that is running is labeled "Started."</span></span> <span data-ttu-id="8bbae-272">停止并禁用任何不必要地，启动的服务，例如，以下服务不需要专用 BizTalk 服务器上：</span><span class="sxs-lookup"><span data-stu-id="8bbae-272">Stop and disable any service that is started unnecessarily, for example, the following services are not required on a dedicated BizTalk Server:</span></span>  
  
    -   <span data-ttu-id="8bbae-273">警报</span><span class="sxs-lookup"><span data-stu-id="8bbae-273">Alerter</span></span>  
  
    -   <span data-ttu-id="8bbae-274">ClipBook</span><span class="sxs-lookup"><span data-stu-id="8bbae-274">ClipBook</span></span>  
  
    -   <span data-ttu-id="8bbae-275">DHCP Server</span><span class="sxs-lookup"><span data-stu-id="8bbae-275">DHCP Server</span></span>  
  
    -   <span data-ttu-id="8bbae-276">传真服务</span><span class="sxs-lookup"><span data-stu-id="8bbae-276">Fax Service</span></span>  
  
    -   <span data-ttu-id="8bbae-277">文件复制</span><span class="sxs-lookup"><span data-stu-id="8bbae-277">File Replication</span></span>  
  
    -   <span data-ttu-id="8bbae-278">红外的监视器</span><span class="sxs-lookup"><span data-stu-id="8bbae-278">Infrared Monitor</span></span>  
  
    -   <span data-ttu-id="8bbae-279">Internet 连接共享</span><span class="sxs-lookup"><span data-stu-id="8bbae-279">Internet Connection Sharing</span></span>  
  
    -   <span data-ttu-id="8bbae-280">Messenger</span><span class="sxs-lookup"><span data-stu-id="8bbae-280">Messenger</span></span>  
  
    -   <span data-ttu-id="8bbae-281">NetMeeting 远程桌面共享</span><span class="sxs-lookup"><span data-stu-id="8bbae-281">NetMeeting Remote Desktop Sharing</span></span>  
  
    -   <span data-ttu-id="8bbae-282">网络 DDE</span><span class="sxs-lookup"><span data-stu-id="8bbae-282">Network DDE</span></span>  
  
    -   <span data-ttu-id="8bbae-283">网络 DDE DSDM</span><span class="sxs-lookup"><span data-stu-id="8bbae-283">Network DDE DSDM</span></span>  
  
    -   <span data-ttu-id="8bbae-284">NWLink NetBIOS</span><span class="sxs-lookup"><span data-stu-id="8bbae-284">NWLink NetBIOS</span></span>  
  
    -   <span data-ttu-id="8bbae-285">NWLink IPX/SP</span><span class="sxs-lookup"><span data-stu-id="8bbae-285">NWLink IPX/SP</span></span>  
  
    -   <span data-ttu-id="8bbae-286">打印后台处理程序</span><span class="sxs-lookup"><span data-stu-id="8bbae-286">Print Spooler</span></span>  
  
    -   <span data-ttu-id="8bbae-287">电话服务</span><span class="sxs-lookup"><span data-stu-id="8bbae-287">Telephony</span></span>  
  
    -   <span data-ttu-id="8bbae-288">Telnet</span><span class="sxs-lookup"><span data-stu-id="8bbae-288">Telnet</span></span>  
  
    -   <span data-ttu-id="8bbae-289">不间断电源</span><span class="sxs-lookup"><span data-stu-id="8bbae-289">Uninterruptible Power Supply</span></span>  
  
3.  <span data-ttu-id="8bbae-290">请注意取决于你想要禁用每个服务的服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-290">Note the services that depend on each service that you want to disable.</span></span> <span data-ttu-id="8bbae-291">为此，请按照下列步骤进行操作：</span><span class="sxs-lookup"><span data-stu-id="8bbae-291">To do this, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="8bbae-292">双击你想要禁用的服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-292">Double-click the service you want to disable.</span></span>  
  
    2.  <span data-ttu-id="8bbae-293">单击 **依赖关系** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="8bbae-293">Click the **Dependencies** tab.</span></span>  
  
    3.  <span data-ttu-id="8bbae-294">在**此服务依赖于以下的系统组件**列表中，记下此服务依赖于该服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-294">In the **This service depends on the following system components** list, note the services this service depends on.</span></span>  
  
    4.  <span data-ttu-id="8bbae-295">在**以下系统组件依赖于此服务**列表中，记下该服务，无法启动而不进行此服务，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-295">In the **The following system components depend on this service** list, note the services that cannot start without this service, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="8bbae-296">一次一个地禁用所选每个服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-296">One at a time, disable each service you have selected.</span></span> <span data-ttu-id="8bbae-297">为此，请按照下列步骤进行操作：</span><span class="sxs-lookup"><span data-stu-id="8bbae-297">To do this, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="8bbae-298">右键单击你想要禁用，，然后单击的服务**属性**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-298">Right-click the service you want to disable, and then click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="8bbae-299">在**启动类型**列表中，单击**禁用**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-299">In the **Startup type** list, click **Disabled**.</span></span>  
  
    3.  <span data-ttu-id="8bbae-300">如果你想要立即停止服务，请单击**停止**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-300">If you want to stop the service immediately, click **Stop**.</span></span>  
  
         <span data-ttu-id="8bbae-301">如果**停止其他服务**对话框出现时，请注意其他相关服务将也停止，然后单击**是**，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="8bbae-301">If the **Stop Other Services** dialog box appears, note the other dependent services that will also stop, and then click **Yes**, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="8bbae-302">重复步骤 4，以禁用不重要的其他服务。</span><span class="sxs-lookup"><span data-stu-id="8bbae-302">Repeat step 4 to disable the other nonessential services.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8bbae-303">禁用每个服务以确保未禁用您想要继续使用的服务后，请测试正确的操作的服务器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-303">Test the server for correct operation after you disable each service to make sure you did not disable a service you want to continue to use.</span></span>   
> <span data-ttu-id="8bbae-304">如果服务器是 BizTalk 服务器通常是，Windows Server 2008 域的成员必须将 TCP/IP helper 服务对您的系统以正确应用于此计算机的组策略。</span><span class="sxs-lookup"><span data-stu-id="8bbae-304">If the server is a member of a Windows Server 2008 domain, which BizTalk Servers often are, you must have the TCP/IP helper service on your system to correctly apply Group Policy to the computer.</span></span>   
> <span data-ttu-id="8bbae-305">当禁用 DHCP 客户端时，DHCP 客户端停止 DNS 动态更新协议注册，并且需要手动为此客户端添加到 DNS 服务器的 DNS 记录。</span><span class="sxs-lookup"><span data-stu-id="8bbae-305">When you disable the DHCP client, the DHCP client stops DNS dynamic update protocol registration and requires manual DNS records to be added for this client to the DNS server.</span></span>  
  
## <a name="manually-load-microsoft-certificate-revocation-lists"></a><span data-ttu-id="8bbae-306">手动加载 Microsoft 证书吊销列表</span><span class="sxs-lookup"><span data-stu-id="8bbae-306">Manually load Microsoft Certificate Revocation lists</span></span>  
 <span data-ttu-id="8bbae-307">在开始时的.NET 应用程序，.NET Framework 将尝试下载的证书吊销列表 (CRL) 的任何签名的程序集。</span><span class="sxs-lookup"><span data-stu-id="8bbae-307">When starting a .NET application, the .NET Framework will attempt to download the Certificate Revocation list (CRL) for any signed assembly.</span></span> <span data-ttu-id="8bbae-308">如果你的系统没有直接访问 Internet，或者被限制访问 Microsoft.com 域，这可能会延迟启动 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="8bbae-308">If your system does not have direct access to the Internet, or is restricted from accessing the Microsoft.com domain, this may delay startup of BizTalk Server.</span></span> <span data-ttu-id="8bbae-309">若要避免在应用程序启动此延迟，可以使用以下步骤手动下载并安装代码签名你的系统上的证书吊销列表。</span><span class="sxs-lookup"><span data-stu-id="8bbae-309">To avoid this delay at application startup, you can use the following steps to manually download and install the code signing Certificate Revocation Lists on your system.</span></span>  
  
1.  <span data-ttu-id="8bbae-310">下载中的最新 CRL 更新[ http://crl.microsoft.com/pki/crl/products/CodeSignPCA.crl ](http://go.microsoft.com/fwlink/?LinkID=117794) (http://go.microsoft.com/fwlink/?LinkID=117794)和[ http://crl.microsoft.com/pki/crl/products/CodeSignPCA2.crl ](http://go.microsoft.com/fwlink/?LinkId=117795) (http://go.microsoft.com/fwlink/?LinkId=117795)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-310">Download the latest CRL updates from [http://crl.microsoft.com/pki/crl/products/CodeSignPCA.crl](http://go.microsoft.com/fwlink/?LinkID=117794) (http://go.microsoft.com/fwlink/?LinkID=117794) and [http://crl.microsoft.com/pki/crl/products/CodeSignPCA2.crl](http://go.microsoft.com/fwlink/?LinkId=117795) (http://go.microsoft.com/fwlink/?LinkId=117795).</span></span>  
  
2.  <span data-ttu-id="8bbae-311">将的 CodeSignPCA.crl 和 CodeSignPCA2.crl 文件移到独立的系统。</span><span class="sxs-lookup"><span data-stu-id="8bbae-311">Move the CodeSignPCA.crl and CodeSignPCA2.crl files to the isolated system.</span></span>  
  
3.  <span data-ttu-id="8bbae-312">从命令提示符处，输入以下命令以使用 certutil 实用程序来使用 CRL 在步骤 1 中下载更新的本地证书存储区：</span><span class="sxs-lookup"><span data-stu-id="8bbae-312">From a command prompt, enter the following command to use the certutil utility to update the local certificate store with the CRL downloaded in step 1:</span></span>  
  
     <span data-ttu-id="8bbae-313">certutil – addstore CA c:\CodeSignPCA.crl</span><span class="sxs-lookup"><span data-stu-id="8bbae-313">certutil –addstore CA c:\CodeSignPCA.crl</span></span>  
  
 <span data-ttu-id="8bbae-314">CRL 文件将定期更新，因此您应该考虑设置的重复任务的下载和安装 CRL 更新。</span><span class="sxs-lookup"><span data-stu-id="8bbae-314">The CRL files are updated regularly, so you should consider setting a reoccurring task of downloading and installing the CRL updates.</span></span> <span data-ttu-id="8bbae-315">若要查看的下一步的更新时间、 双击.crl 文件并查看的值**下一步更新**字段。</span><span class="sxs-lookup"><span data-stu-id="8bbae-315">To view the next update time, double-click the .crl file and view the value of the **Next Update** field.</span></span>  
  
## <a name="synchronize-time-on-all-servers"></a><span data-ttu-id="8bbae-316">将所有服务器上的时间同步</span><span class="sxs-lookup"><span data-stu-id="8bbae-316">Synchronize time on all servers</span></span>  
 <span data-ttu-id="8bbae-317">许多操作涉及票证，回执和日志记录依赖于正在准确的本地系统时钟。</span><span class="sxs-lookup"><span data-stu-id="8bbae-317">Many operations involving tickets, receipts and logging rely on the local system clock being accurate.</span></span> <span data-ttu-id="8bbae-318">这是在分布式环境中，其中系统之间的时间差异可能会导致日志要同步的或由一个系统被拒绝由另一个为过期颁发票证尤其如此或尚未生效。</span><span class="sxs-lookup"><span data-stu-id="8bbae-318">This is especially true in a distributed environment, where time discrepancies between systems may cause logs to be out of sync or tickets issued by one system to be rejected by another as expired or not yet valid.</span></span>  
  
 <span data-ttu-id="8bbae-319">服务器配置为自动同步时间的详细信息，请参阅[配置自动域时间同步的客户端计算机](http://go.microsoft.com/fwlink/?LinkId=99420)(http://go.microsoft.com/fwlink/?LinkId=99420)。</span><span class="sxs-lookup"><span data-stu-id="8bbae-319">For more information on configuring a server to automatically synchronize time, see [Configure a client computer for automatic domain time synchronization](http://go.microsoft.com/fwlink/?LinkId=99420) (http://go.microsoft.com/fwlink/?LinkId=99420).</span></span>  
  
## <a name="configure-the-windows-pagefile-for-optimal-performance"></a><span data-ttu-id="8bbae-320">配置 Windows 页面文件以获得最佳性能</span><span class="sxs-lookup"><span data-stu-id="8bbae-320">Configure the Windows PAGEFILE for optimal performance</span></span>  
 <span data-ttu-id="8bbae-321">为了获得最佳性能，请遵循以下准则来配置 Windows 页面文件 （分页文件）：</span><span class="sxs-lookup"><span data-stu-id="8bbae-321">Follow these guidelines to configure the Windows PAGEFILE (paging file) for optimal performance:</span></span>  
  
1.  <span data-ttu-id="8bbae-322">**将分页文件移动到不同的操作系统安装以减少磁盘争用和提高磁盘性能的物理驱动器物理卷**-BizTalk Server 在计算机上，与移动相关的性能提升分页文件的文档处理负载而异。</span><span class="sxs-lookup"><span data-stu-id="8bbae-322">**Move the paging file to a physical volume separate from the physical drive that operating system is installed on to reduce disk contention and increase disk performance** -  On BizTalk Server computers, the performance gain associated with moving the paging file will vary depending on the document processing load.</span></span> <span data-ttu-id="8bbae-323">在 SQL Server 计算机上将页面文件移动到单独的卷被视为由于 SQL Server 的磁盘密集型特性的所有方案中的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="8bbae-323">On SQL Server computers, moving the paging file to a separate volume is considered a best practice in all scenarios due to the disk intensive nature of SQL Server.</span></span>  
  
2.  <span data-ttu-id="8bbae-324">**隔离到一个或多个专用物理驱动器配置为 RAID 0 （条带化） 或 raid-1 （镜像） 的数组，或在没有 RAID 的单个磁盘上分页文件**-通过使用专用的磁盘或驱动器数组其中页面文件。SYS 是整个卷上唯一的文件、 分页文件将不会变得零碎，因而也提高了性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-324">**Isolate the paging file onto one or more dedicated physical drives that are configured as either RAID-0 (striping) or RAID-1 (mirroring) arrays, or on single disks without RAID** - By using a dedicated disk or drive array where PAGEFILE.SYS is the only file on the entire volume, the paging file will not become fragmented, which will also improve performance.</span></span> <span data-ttu-id="8bbae-325">与大多数磁盘的数组，数组的性能得到改进由于数组中的物理磁盘数已增加。</span><span class="sxs-lookup"><span data-stu-id="8bbae-325">As with most disk-arrays, performance of the array is improved as the number of physical disks in the array is increased.</span></span> <span data-ttu-id="8bbae-326">如果分页文件中的磁盘阵列的多个物理驱动器上的多个卷之间分布，分页文件大小应为数组中每个驱动器上相同的大小。</span><span class="sxs-lookup"><span data-stu-id="8bbae-326">If the paging file is distributed between multiple volumes on multiple physical drives in a disk array, the paging file size should be the same size on each drive in the array.</span></span> <span data-ttu-id="8bbae-327">在配置磁盘阵列，也建议使用具有相同的容量和速度的物理驱动器。</span><span class="sxs-lookup"><span data-stu-id="8bbae-327">When configuring a disk array, it is also recommended to use physical drives that have the same capacity and speed.</span></span> <span data-ttu-id="8bbae-328">请注意冗余不通常需要分页文件。</span><span class="sxs-lookup"><span data-stu-id="8bbae-328">Note that redundancy is not normally required for the paging file.</span></span>  
  
3.  <span data-ttu-id="8bbae-329">**未配置 RAID 5 阵列上的分页文件**-建议不要在 RAID 5 阵列上分页文件的配置，因为分页文件活动编写需要进行大量和 RAID 5 数组更好地适用于读取性能不是写入性能。</span><span class="sxs-lookup"><span data-stu-id="8bbae-329">**Do not configure the paging file on a RAID 5 array** - Configuration of the paging file on a RAID 5 array is not recommended because paging file activity is write intensive and RAID 5 arrays are better suited for read performance than write performance.</span></span>  
  
4.  <span data-ttu-id="8bbae-330">**如果你没有资源来将分页文件移动到物理卷中，而不是操作系统安装上，配置要作为操作系统相同的逻辑卷上驻留的分页文件**-配置可驻留在分页文件这将在同一个物理磁盘上，因为操作系统将增加磁盘的另一个逻辑卷查找时间和降低系统性能，因为磁盘驱动器盘磁头将不断卷，或者访问页面文件之间移动操作系统文件、 应用程序文件和数据文件。</span><span class="sxs-lookup"><span data-stu-id="8bbae-330">**If you do not have resources to move the paging file to a physical volume other than the operating system is installed on, configure the paging file to reside on the same logical volume as the operating system** - Configuring the paging file to reside on a another logical volume which is on the same physical disk as the operating system will increase disk seek time and reduce system performance as the disk drive platter heads will be continually moving between the volumes, alternately accessing the page file, operating system files, application files, and data files.</span></span> <span data-ttu-id="8bbae-331">此外，通常是通常与最近外边缘的物理磁盘的物理磁盘的第一个分区上安装操作系统以及其中磁盘速度是，关联性能最适合的磁盘。</span><span class="sxs-lookup"><span data-stu-id="8bbae-331">Also, the operating system is typically installed on the first partition of a physical disk, which is usually the closest to the outside edge of the physical disk and where disk speed is and associated performance are optimal for the disk.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="8bbae-332">如果你删除分页文件从启动分区，Windows 无法创建故障转储文件 （内存。DMP) 在其中写入调试信息的事件中内核模式下停止发生错误。</span><span class="sxs-lookup"><span data-stu-id="8bbae-332">If you do remove the paging file from the boot partition, Windows cannot create a crash dump file (MEMORY.DMP) in which to write debugging information in the event that a kernel mode STOP error occurs.</span></span> <span data-ttu-id="8bbae-333">如果你需要故障转储文件，则您将别无选择但若要将保留至少的页面文件大小的物理内存 + 1 MB 上启动分区。</span><span class="sxs-lookup"><span data-stu-id="8bbae-333">If you do require a crash dump file, then you will have no option but to leave a paging file of at least the size of physical memory + 1 MB on the boot partition.</span></span>  
  
5.  <span data-ttu-id="8bbae-334">**手动设置页面文件的大小**– 手动设置页面文件的大小通常提供更好的性能比允许自动调整大小的服务器或根本没有分页文件。</span><span class="sxs-lookup"><span data-stu-id="8bbae-334">**Manually set the size of the paging file** – Manually setting the size of the paging file typically provides better performance than allowing the server to size it automatically or having no paging file at all.</span></span> <span data-ttu-id="8bbae-335">优化最佳做法是设置的初始 （最低配置） 和分页文件的最大大小设置为相同的值。</span><span class="sxs-lookup"><span data-stu-id="8bbae-335">Best-practice tuning is to set the initial (minimum) and maximum size settings for the paging file to the same value.</span></span> <span data-ttu-id="8bbae-336">这可不确保任何处理资源丢失页面文件，可能是密集型操作的动态调整大小。</span><span class="sxs-lookup"><span data-stu-id="8bbae-336">This ensures that no processing resources are lost to the dynamic resizing of the paging file, which can be intensive.</span></span> <span data-ttu-id="8bbae-337">假设已变得约束系统上的内存资源时，通常会发生此大小调整的活动，也是如此。</span><span class="sxs-lookup"><span data-stu-id="8bbae-337">This is especially true given that this resizing activity typically occurs when the memory resources on the system are already becoming constrained.</span></span> <span data-ttu-id="8bbae-338">设置值还确保磁盘上的分页区域是一个单独的、 临近的区域，提高磁盘的相同的最小和最大页面文件大小查找时间。</span><span class="sxs-lookup"><span data-stu-id="8bbae-338">Setting the same minimum and maximum page file size values also ensure the paging area on a disk is one single, contiguous area, improving disk seek time.</span></span> <span data-ttu-id="8bbae-339">Windows Server 2008 自动建议总页面文件大小等于已安装 RAM 量的 1.5 倍。</span><span class="sxs-lookup"><span data-stu-id="8bbae-339">Windows Server 2008 automatically recommends a total paging file size equal to 1.5 times the amount of installed RAM.</span></span> <span data-ttu-id="8bbae-340">在服务器上具有足够磁盘空间，结合使用的所有磁盘上分页文件应配置最多两次以获得最佳性能的物理内存。</span><span class="sxs-lookup"><span data-stu-id="8bbae-340">On servers with adequate disk space, the paging file on all disks combined should be configured up to twice the physical memory for optimal performance.</span></span>  
  
## <a name="remove-cpu-intensive-screen-savers"></a><span data-ttu-id="8bbae-341">删除大量占用 CPU 的屏幕保护程序</span><span class="sxs-lookup"><span data-stu-id="8bbae-341">Remove CPU-intensive screen savers</span></span>  
 <span data-ttu-id="8bbae-342">三维或 OpenGL 屏幕保护程序都已知进行大量占用 CPU 的并在运行时会使用重要的系统资源。</span><span class="sxs-lookup"><span data-stu-id="8bbae-342">3D or OpenGL screen savers are known to be CPU-intensive and use important system resources when they are running.</span></span> <span data-ttu-id="8bbae-343">最好是避免作为服务器生成时，选项安装这些一起删除，或将其删除，如果已安装。</span><span class="sxs-lookup"><span data-stu-id="8bbae-343">It is best to avoid installing these altogether as an option at server-build time, or to remove them if they have been installed.</span></span> <span data-ttu-id="8bbae-344">基本"Windows Server 2008"或空白的屏幕保护程序是使用大量占用 CPU 的屏幕保护程序的绝佳替代方法。</span><span class="sxs-lookup"><span data-stu-id="8bbae-344">The basic “Windows Server 2008” or blank screen savers are an excellent alternative to using CPU-intensive screen savers.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8bbae-345">另请参阅</span><span class="sxs-lookup"><span data-stu-id="8bbae-345">See Also</span></span>  
 [<span data-ttu-id="8bbae-346">优化操作系统性能</span><span class="sxs-lookup"><span data-stu-id="8bbae-346">Optimizing Operating System Performance</span></span>](../technical-guides/optimizing-operating-system-performance.md)