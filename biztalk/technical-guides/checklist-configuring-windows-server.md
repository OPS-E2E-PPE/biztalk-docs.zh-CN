---
title: "清单： 配置 Windows Server |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ebd7ea95-cc73-4c98-a796-193f394fb5b8
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4bffa095c4ed5834f93b3a8634915214ac7b9530
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-configuring-windows-server"></a><span data-ttu-id="e4f06-102">清单： 配置 Windows Server</span><span class="sxs-lookup"><span data-stu-id="e4f06-102">Checklist: Configuring Windows Server</span></span>
<span data-ttu-id="e4f06-103">本主题列出在生产中使用准备 Windows Server 时应遵循的步骤[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境。</span><span class="sxs-lookup"><span data-stu-id="e4f06-103">This topic lists steps that you should follow when preparing Windows Server for use in a production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>  
  
##  <span data-ttu-id="e4f06-104"><a name="BKMK_Win2k8"></a>配置 Windows Server</span><span class="sxs-lookup"><span data-stu-id="e4f06-104"><a name="BKMK_Win2k8"></a> Configure Windows Server</span></span>  
  
|<span data-ttu-id="e4f06-105">步骤</span><span class="sxs-lookup"><span data-stu-id="e4f06-105">Steps</span></span>|<span data-ttu-id="e4f06-106">参考</span><span class="sxs-lookup"><span data-stu-id="e4f06-106">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e4f06-107">配置为 MSDTC [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e4f06-107">Configure MSDTC for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>|<span data-ttu-id="e4f06-108">-请参阅[如何启用 BizTalk 服务器上的 MSDTC](http://go.microsoft.com/fwlink/?LinkId=153236) (http://go.microsoft.com/fwlink/?LinkId=153236)。</span><span class="sxs-lookup"><span data-stu-id="e4f06-108">-   See [How to Enable MSDTC on the BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153236) (http://go.microsoft.com/fwlink/?LinkId=153236).</span></span><br /><span data-ttu-id="e4f06-109">-请参阅[疑难 MSDTC](http://go.microsoft.com/fwlink/?LinkId=153237) (http://go.microsoft.com/fwlink/?LinkId=153237)。</span><span class="sxs-lookup"><span data-stu-id="e4f06-109">-   See [Troubleshooting Problems with MSDTC](http://go.microsoft.com/fwlink/?LinkId=153237) (http://go.microsoft.com/fwlink/?LinkId=153237).</span></span>|  
|<span data-ttu-id="e4f06-110">配置防火墙的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e4f06-110">Configure firewall(s) for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="e4f06-111">**注意：**此步骤才是必需的一个或多个防火墙如果都在位置中你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境。</span><span class="sxs-lookup"><span data-stu-id="e4f06-111">**Note:**  This step is only required if one or more firewalls are in place in your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>|<span data-ttu-id="e4f06-112">-请参阅[BizTalk 服务器所需端口](http://go.microsoft.com/fwlink/?LinkId=153238)(http://go.microsoft.com/fwlink/?LinkId=153238)。</span><span class="sxs-lookup"><span data-stu-id="e4f06-112">-   See [Required Ports for BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=153238) (http://go.microsoft.com/fwlink/?LinkId=153238).</span></span><br /><span data-ttu-id="e4f06-113">-请参阅 Microsoft 知识库文章 154596， ["如何配置与防火墙一起使用的 RPC 动态端口分配"](http://go.microsoft.com/fwlink/?LinkId=153239) (http://go.microsoft.com/fwlink/?LinkId=153239)。</span><span class="sxs-lookup"><span data-stu-id="e4f06-113">-   See Microsoft Knowledge Base article 154596, [“How to configure RPC dynamic port allocation to work with firewalls”](http://go.microsoft.com/fwlink/?LinkId=153239) (http://go.microsoft.com/fwlink/?LinkId=153239).</span></span>|  
|<span data-ttu-id="e4f06-114">请关闭所有运行的计算机上的超线程[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境。</span><span class="sxs-lookup"><span data-stu-id="e4f06-114">Turn off hyperthreading on all computers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>|<span data-ttu-id="e4f06-115">-它是关键对于运行的计算机关闭该超线程[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e4f06-115">-   It is critical that hyperthreading be turned off for computers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="e4f06-116">这是通常在 BIOS 设置的处理器设置中找到的 BIOS 设置。</span><span class="sxs-lookup"><span data-stu-id="e4f06-116">This is a BIOS setting, typically found in the Processor settings of the BIOS setup.</span></span> <span data-ttu-id="e4f06-117">超线程使服务器会显示为具有更多处理器/处理器内核不是它的实际作用;但是，超线程处理器通常介于 20%和 30%的物理处理器核心的性能之间提供。</span><span class="sxs-lookup"><span data-stu-id="e4f06-117">Hyperthreading makes the server appear to have more processors/processor cores than it actually does; however, hyperthreaded processors typically provide between 20% and 30% of the performance of a physical processor/processor core.</span></span> <span data-ttu-id="e4f06-118">当[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计数以调整其自我调整算法，超线程处理器的处理器数会导致这些调整倾斜，这是对总体性能造成不利影响。</span><span class="sxs-lookup"><span data-stu-id="e4f06-118">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] counts the number of processors to adjust its self-tuning algorithms, the hyperthreaded processors cause these adjustments to be skewed, which is detrimental to overall performance.</span></span><br /><span data-ttu-id="e4f06-119">的应为关闭超线程[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]计算机因为可能会导致大量争用的应用程序 (如[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]) 可能会致使超线程环境中的性能降低[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="e4f06-119">-   Hyperthreading should be turned off for [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computers because applications that can cause high levels of contention (such as [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]) can cause decreased performance in a hyper-threaded environment on a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer.</span></span>|  
|<span data-ttu-id="e4f06-120">确保 Windows Server 处理器计划设置为"后台服务"。</span><span class="sxs-lookup"><span data-stu-id="e4f06-120">Ensure Windows Server processor scheduling is set to “Background services”.</span></span>|<span data-ttu-id="e4f06-121">确保在你的环境中运行 Windows Server 的所有计算机上设置此配置选项将提高总体系统性能。</span><span class="sxs-lookup"><span data-stu-id="e4f06-121">Ensuring this configuration option is set on all computers running Windows Server in your environment will improve the overall system performance.</span></span> <span data-ttu-id="e4f06-122">请按照以下步骤来确保 Windows Server 配置为倾向于后台服务操作：</span><span class="sxs-lookup"><span data-stu-id="e4f06-122">Follow these steps to ensure Windows Server is configured to favor background services:</span></span><br /><br /> <span data-ttu-id="e4f06-123">1.单击**启动**，单击**运行**，然后键入**sysdm.cpl**中**运行**框。</span><span class="sxs-lookup"><span data-stu-id="e4f06-123">1.  Click **Start**, click **Run**, and then type **sysdm.cpl** in the **Run** box.</span></span><br /><span data-ttu-id="e4f06-124">2.在**系统属性**对话框中，单击**高级**选项卡上，并依次**设置**下**性能**。</span><span class="sxs-lookup"><span data-stu-id="e4f06-124">2.  In the **System Properties** dialog box, click the **Advanced** tab, and then click **Settings** under **Performance**.</span></span><br /><span data-ttu-id="e4f06-125">3.在**性能选项**对话框中，单击**高级**选项卡上，请确保**后台服务**下选项被选中**处理器计划**，单击**确定**，然后单击**确定**以关闭**系统属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="e4f06-125">3.  In the **Performance Options** dialog box, click the **Advanced** tab, make sure the **Background services** option is selected under **Processor scheduling**, click **OK**, and then click **OK** again to close **System Properties** dialog box.</span></span>|  
|<span data-ttu-id="e4f06-126">Windows 分页文件放置在单独的本地物理驱动器。</span><span class="sxs-lookup"><span data-stu-id="e4f06-126">Place the Windows paging file on a separate local physical drive.</span></span>|<span data-ttu-id="e4f06-127">将分页文件移动到非操作系统的单独物理卷运行 Windows Server 的计算机上减少磁盘争用，从而提高了性能。</span><span class="sxs-lookup"><span data-stu-id="e4f06-127">Moving the paging file to a separate physical volume other than the operating system on a computer running Windows Server improves performance by reducing disk contention.</span></span><br /><br /> <span data-ttu-id="e4f06-128">请按照下列步骤将分页文件移动到非操作系统的单独物理卷：</span><span class="sxs-lookup"><span data-stu-id="e4f06-128">Follow these steps to move the paging file to a separate physical volume other than the operating system:</span></span><br /><br /> <span data-ttu-id="e4f06-129">1.单击**启动**，单击**运行**，然后键入**sysdm.cpl**中**打开**框。</span><span class="sxs-lookup"><span data-stu-id="e4f06-129">1.  Click **Start**, click **Run**, and then type **sysdm.cpl** in the **Open** box.</span></span><br /><span data-ttu-id="e4f06-130">2.单击**高级**选项卡上，并依次**设置**下**性能**。</span><span class="sxs-lookup"><span data-stu-id="e4f06-130">2.  Click the **Advanced** tab, and then click **Settings** under **Performance**.</span></span><br /><span data-ttu-id="e4f06-131">3.单击**高级**选项卡上，单击**更改**下**虚拟内存**、 指定分页文件的选项，请单击**确定**，然后单击**确定**以关闭系统属性。</span><span class="sxs-lookup"><span data-stu-id="e4f06-131">3.  Click the **Advanced** tab, click **Change** under **Virtual memory**, specify options for the paging file, click **OK** and then click **OK** again to close System Properties.</span></span> <span data-ttu-id="e4f06-132">**注意：**必须重新启动计算机，使新设置才会生效。</span><span class="sxs-lookup"><span data-stu-id="e4f06-132">**Note:**      You must restart the computer for the new settings to take effect.</span></span>|  
|<span data-ttu-id="e4f06-133">磁盘碎片整理所有磁盘 (本地和 SAN/NAS) 定期通过计划非高峰时段磁盘碎片整理。</span><span class="sxs-lookup"><span data-stu-id="e4f06-133">-   Defragment all disks (local and SAN/NAS) on a regular basis by scheduling off-hours disk defragmentation.</span></span><br /><span data-ttu-id="e4f06-134">磁盘碎片整理 Windows 分页文件和预分配主文件表中每个磁盘的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境以提升总体系统性能。</span><span class="sxs-lookup"><span data-stu-id="e4f06-134">-   Defragment the Windows paging file and pre-allocate the Master File Tables of each disk in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment to boost overall system performance.</span></span>|<span data-ttu-id="e4f06-135">使用[PageDefrag 实用工具](http://go.microsoft.com/fwlink/?LinkId=108976)(http://go.microsoft.com/fwlink/?LinkId=108976) 要整理 Windows 分页文件和预分配主文件表。</span><span class="sxs-lookup"><span data-stu-id="e4f06-135">Use the [PageDefrag utility](http://go.microsoft.com/fwlink/?LinkId=108976) (http://go.microsoft.com/fwlink/?LinkId=108976) to defragment the Windows paging file and pre-allocate the Master File Tables.</span></span>|  
|<span data-ttu-id="e4f06-136">如果运行的计算机上安装防病毒软件[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]，禁用的数据和事务的文件 （.mdf、.ndf、.ldf、.mdb） 的实时扫描。</span><span class="sxs-lookup"><span data-stu-id="e4f06-136">If antivirus software is installed on the computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)], disable real-time scanning of the data and transaction files (.mdf, .ndf, .ldf, .mdb).</span></span>|<span data-ttu-id="e4f06-137">实时扫描[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]数据和事务文件可增加磁盘 I/O 争用并减少[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]性能。</span><span class="sxs-lookup"><span data-stu-id="e4f06-137">Real-time scanning of the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] data and transaction files can increase disk I/O contention and reduce [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] performance.</span></span>|  
|<span data-ttu-id="e4f06-138">如果运行的计算机上安装防病毒软件[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，禁用任何引用的非可执行文件类型的实时扫描[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收位置 （通常。XML，但也可以是.csv、.txt，等等。)。</span><span class="sxs-lookup"><span data-stu-id="e4f06-138">If antivirus software is installed on the computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], disable real-time scanning of non-executable file types referenced by any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive locations (usually .XML, but can also be .csv, .txt, etc.).</span></span>|<span data-ttu-id="e4f06-139">引用的非可执行文件的实时扫描[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收位置可以提高在这些文件的 I/O 争用并减小[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能。</span><span class="sxs-lookup"><span data-stu-id="e4f06-139">Real-time scanning of non-executable files that are referenced by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive locations can increase I/O contention on these files and reduce [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span>|  
|<span data-ttu-id="e4f06-140">如果安装入侵检测软件，则禁用扫描运行的计算机之间的网络[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和外部数据存储库 ([!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]) 或消息传送服务 （如消息队列和 WebSphere MQSeries）。</span><span class="sxs-lookup"><span data-stu-id="e4f06-140">If intrusion detection software is installed, disable network scanning between computers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and external data repositories ([!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]) or messaging services (such as Message Queuing and WebSphere MQSeries).</span></span>|<span data-ttu-id="e4f06-141">入侵检测软件可以慢，或者甚至阻止通过网络的有效的通信。</span><span class="sxs-lookup"><span data-stu-id="e4f06-141">Intrusion detection software can slow down or even prevent valid communications over the network.</span></span>|  
|<span data-ttu-id="e4f06-142">网络中的所有计算机上的卡 (NIC) 驱动程序[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境应针对性能优化。</span><span class="sxs-lookup"><span data-stu-id="e4f06-142">Network card (NIC) drivers on all computers in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment should be tuned for performance.</span></span>|<span data-ttu-id="e4f06-143">调整网络设备驱动程序，以最大化传入和传出数据包缓冲，可用的内存量。</span><span class="sxs-lookup"><span data-stu-id="e4f06-143">Adjust the network device drivers to maximize the amount of memory available for packet buffering, both incoming and outgoing.</span></span> <span data-ttu-id="e4f06-144">也最大化缓冲区计数，尤其是传输缓冲区和合并缓冲区。</span><span class="sxs-lookup"><span data-stu-id="e4f06-144">Also maximize buffer counts, especially transmit buffers and coalesce buffers.</span></span> <span data-ttu-id="e4f06-145">默认值为这些参数，并是否即使提供，制造商和驱动程序版本之间的不同。</span><span class="sxs-lookup"><span data-stu-id="e4f06-145">The default values for these parameters, and whether they are even provided, vary between manufacturers and driver versions.</span></span> <span data-ttu-id="e4f06-146">目标是以最大化网络接口卡硬件，通过完成的工作并允许网络操作，以减少网络流量高峰和关联的拥塞的最大可能会发生缓冲区空间。</span><span class="sxs-lookup"><span data-stu-id="e4f06-146">The goal is to maximize the work done by the network interface card hardware, and to allow the greatest possible buffer space for network operations to mitigate network traffic bursts and associated congestion.</span></span>|  
|<span data-ttu-id="e4f06-147">设置为固定的速度和双工的网络卡</span><span class="sxs-lookup"><span data-stu-id="e4f06-147">Set the network cards to a fixed speed and duplex</span></span>|<span data-ttu-id="e4f06-148">使用固定的速度和双工 (1 千兆或更高版本与完整的双工) BizTalk 和 SQL 服务器上的网络连接。</span><span class="sxs-lookup"><span data-stu-id="e4f06-148">Use a fixed speed and duplex (1 Gigabit or higher with full duplex) for the network connections on the BizTalk and SQL servers.</span></span> <span data-ttu-id="e4f06-149">这将确保，网络接口不自动协商的较低速度或双工设置，有些企业交换机问题已在过去。</span><span class="sxs-lookup"><span data-stu-id="e4f06-149">This will ensure that the network interface does not auto-negotiate a lower speed or duplex setting, which has been a problem with some enterprise switches in the past.</span></span> <span data-ttu-id="e4f06-150">此外，在大容量环境中，则最好具有千兆位网络。</span><span class="sxs-lookup"><span data-stu-id="e4f06-150">Also, in high-volume environments, it is advisable to have Gigabit networks.</span></span>|  
|<span data-ttu-id="e4f06-151">停止或禁用任何不是绝对必需 （如打印后台处理程序和索引服务） 的 Windows 服务中的所有计算机上[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境。</span><span class="sxs-lookup"><span data-stu-id="e4f06-151">Stop or disable any Windows services that are not strictly necessary (such as Print Spooler and Indexing Service) on all computers in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>|<span data-ttu-id="e4f06-152">在生产服务器上运行不必要的服务使用系统资源，否则无法由使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]或[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e4f06-152">Running unnecessary services on a production server uses system resources which could otherwise be used by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] or [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>|  
  
## <a name="in-this-section"></a><span data-ttu-id="e4f06-153">本节内容</span><span class="sxs-lookup"><span data-stu-id="e4f06-153">In This Section</span></span>  
  
-   [<span data-ttu-id="e4f06-154">安装 COM + 修补程序汇总包</span><span class="sxs-lookup"><span data-stu-id="e4f06-154">Installing COM+ Hotfix Rollup Packages</span></span>](../technical-guides/installing-com-hotfix-rollup-packages.md)  
  
## <a name="see-also"></a><span data-ttu-id="e4f06-155">另请参阅</span><span class="sxs-lookup"><span data-stu-id="e4f06-155">See Also</span></span>  
 [<span data-ttu-id="e4f06-156">操作清单</span><span class="sxs-lookup"><span data-stu-id="e4f06-156">Operations Checklists</span></span>](../technical-guides/operations-checklists.md)