---
title: "配置 BizTalk Server 日志传送 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: bcef31f7-30d1-4ada-b627-2a5c9ec7e43e
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3209d96c4516c603510f3cbb7fb48e3b1eb3209
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="configuring-biztalk-server-log-shipping"></a><span data-ttu-id="0a0fd-102">配置 BizTalk Server 日志传送</span><span class="sxs-lookup"><span data-stu-id="0a0fd-102">Configuring BizTalk Server Log Shipping</span></span>
<span data-ttu-id="0a0fd-103">使用备份 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 作业可以备份 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 源系统中的所有数据库，但业务活动监视 (BAM) 所使用的某些数据库除外。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-103">You use the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job to back up all of the databases in your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] source system, except for some databases used by Business Activity Monitoring (BAM).</span></span> <span data-ttu-id="0a0fd-104">源系统是包含实时数据的服务器或服务器组。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-104">The source system is the server or group of servers that contain live data.</span></span> <span data-ttu-id="0a0fd-105">因为某些 BAM 数据库具有不同的备份和还原要求，这些数据库进行备份和还原使用其他方法。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-105">Because some of the BAM databases have different backup and restore requirements, these databases are backed up and restored using other methods.</span></span>  
  
 <span data-ttu-id="0a0fd-106">备份和还原 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库包括以下步骤：</span><span class="sxs-lookup"><span data-stu-id="0a0fd-106">Backing up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and restoring them involves the following steps:</span></span>  
  
1.  <span data-ttu-id="0a0fd-107">**配置 BizTalk Server 中备份作业**</span><span class="sxs-lookup"><span data-stu-id="0a0fd-107">**Configuring the Backup BizTalk Server job**</span></span>  
  
     <span data-ttu-id="0a0fd-108">备份 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库之前，必须先在源系统中配置备份 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 作业，以便将备份自动写入一个文件夹中，然后可以使用该文件夹将数据库还原到目标系统。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-108">Before you can back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, you must first configure the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job on the source system, which directs backups to be automatically written to a folder where they can then be used to restore the databases on the destination system.</span></span> <span data-ttu-id="0a0fd-109">目标系统是用于还原由源系统生成的数据库备份的服务器或服务器组。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-109">The destination system is the server or group of servers that will be used to restore the database backups produced by the source system.</span></span> <span data-ttu-id="0a0fd-110">有关此步骤的详细信息，请参阅[如何配置备份 BizTalk Server 作业](../technical-guides/how-to-configure-a-backup-biztalk-server-job.md)。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-110">For more information about this step, see [How to Configure a Backup BizTalk Server Job](../technical-guides/how-to-configure-a-backup-biztalk-server-job.md).</span></span>  
  
2.  <span data-ttu-id="0a0fd-111">**配置日志传送目标系统**</span><span class="sxs-lookup"><span data-stu-id="0a0fd-111">**Configuring the destination system for log shipping**</span></span>  
  
     <span data-ttu-id="0a0fd-112">您还必须配置日志传送的目标系统，该系统具有备用服务器功能，它可以缩短出现系统失败时的停机时间。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-112">You must also configure the destination system for log shipping, which provides standby server capabilities and reduces downtime in the event of a system failure.</span></span> <span data-ttu-id="0a0fd-113">有关此步骤的详细信息，请参阅[如何配置目标系统](../technical-guides/how-to-configure-the-destination-system.md)。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-113">For more information about this step, see [How to Configure the Destination System](../technical-guides/how-to-configure-the-destination-system.md).</span></span>  
  
3.  <span data-ttu-id="0a0fd-114">**还原数据库**</span><span class="sxs-lookup"><span data-stu-id="0a0fd-114">**Restoring the databases**</span></span>  
  
     <span data-ttu-id="0a0fd-115">在发生硬件故障时，通过使用发送到目标系统的备份和日志，可以还原数据库。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-115">When a hardware failure occurs, you can restore your databases by using the backups and logs sent to your destination system.</span></span> <span data-ttu-id="0a0fd-116">有关此步骤的详细信息，请参阅[如何还原数据库备份 BizTalk Server 作业](../technical-guides/how-to-restore-databases-in-the-backup-biztalk-server-job.md)。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-116">For more information about this step, see [How to Restore Databases in the Backup BizTalk Server Job](../technical-guides/how-to-restore-databases-in-the-backup-biztalk-server-job.md).</span></span>  
  
## <a name="biztalk-server-databases"></a><span data-ttu-id="0a0fd-117">BizTalk Server 数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-117">BizTalk Server Databases</span></span>  
 <span data-ttu-id="0a0fd-118">下表介绍了 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 使用的数据库，并指出采用哪些方法来备份数据库。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-118">The following tables describe the databases used by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and identify which methods are used to back up the databases.</span></span>  
  
### <a name="databases-backed-up-by-the-backup-biztalk-server-job"></a><span data-ttu-id="0a0fd-119">通过备份 BizTalk Server 作业备份的数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-119">Databases Backed Up by the Backup BizTalk Server Job</span></span>  
 <span data-ttu-id="0a0fd-120">下表列出了在备份 BizTalk Server 作业的过程中备份和还原的数据库。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-120">The following table lists the databases that are backed up and restored as a part of the Backup BizTalk Server job.</span></span> <span data-ttu-id="0a0fd-121">可以修改备份 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 作业，以通过将自定义数据库添加到 adm_OtherBackupDatabases 表来备份自定义数据库。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-121">You can modify the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job to back up custom databases by adding them to the adm_OtherBackupDatabases table.</span></span> <span data-ttu-id="0a0fd-122">有关详细信息，请参阅[如何返回自定义数据库](http://go.microsoft.com/fwlink/?LinkID=151569)(http://go.microsoft.com/fwlink/?LinkID=151569)。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-122">For more information, see [How to Back Up Custom Databases](http://go.microsoft.com/fwlink/?LinkID=151569) (http://go.microsoft.com/fwlink/?LinkID=151569).</span></span>  
  
|<span data-ttu-id="0a0fd-123">数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-123">Database</span></span>|<span data-ttu-id="0a0fd-124">默认数据库名称</span><span class="sxs-lookup"><span data-stu-id="0a0fd-124">Default database name</span></span>|<span data-ttu-id="0a0fd-125">Description</span><span class="sxs-lookup"><span data-stu-id="0a0fd-125">Description</span></span>|  
|--------------|---------------------------|-----------------|  
|<span data-ttu-id="0a0fd-126">BAM 主导入数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-126">BAM Primary Import database</span></span>|<span data-ttu-id="0a0fd-127">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="0a0fd-127">BAMPrimaryImport</span></span>|<span data-ttu-id="0a0fd-128">此数据库是业务活动监视 (BAM) 从中收集原始跟踪数据的数据库。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-128">This is the database where the Business Activity Monitoring (BAM) collects raw tracking data.</span></span>|  
|<span data-ttu-id="0a0fd-129">BAM 通知服务应用程序数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-129">BAM Notification Services Application database</span></span>|<span data-ttu-id="0a0fd-130">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="0a0fd-130">BAMAlertsApplication</span></span>|<span data-ttu-id="0a0fd-131">此数据库包含用于 BAM 通知的警报信息。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-131">This database contains alert information for BAM notifications.</span></span> <span data-ttu-id="0a0fd-132">例如，在使用 BAM 门户创建警报时，会将指定与警报相关的条件和事件的条目以及支持警报数据项的其他条目插入该数据库中。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-132">For example, when you create an alert using the BAM portal, entries are inserted in the database specifying the conditions and events to which the alert pertains, as well as other supporting data items for the alert.</span></span>|  
|<span data-ttu-id="0a0fd-133">BAM 通知服务实例数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-133">BAM Notification Services Instance database</span></span>|<span data-ttu-id="0a0fd-134">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="0a0fd-134">BAMAlertsNSMain</span></span>|<span data-ttu-id="0a0fd-135">此数据库包含指定通知服务如何连接到 BAM 所监视的系统的实例信息。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-135">This database contains instance information specifying how the notification services connect to the system that BAM is monitoring.</span></span>|  
|<span data-ttu-id="0a0fd-136">BizTalk 跟踪数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-136">BizTalk Tracking database</span></span>|<span data-ttu-id="0a0fd-137">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="0a0fd-137">BizTalkDTADb</span></span>|<span data-ttu-id="0a0fd-138">此数据库存储 BizTalk Server 跟踪引擎所跟踪的运行状况监视数据。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-138">This database stores health monitoring data tracked by the BizTalk Server tracking engine.</span></span>|  
|<span data-ttu-id="0a0fd-139">BizTalk 管理数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-139">BizTalk Management database</span></span>|<span data-ttu-id="0a0fd-140">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="0a0fd-140">BizTalkMgmtDb</span></span>|<span data-ttu-id="0a0fd-141">此数据库是所有 BizTalk Server 实例的中央元信息存储区。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-141">This database is the central meta-information store for all instances of BizTalk Server.</span></span>|  
|<span data-ttu-id="0a0fd-142">BizTalk MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-142">BizTalk MessageBox database</span></span>|<span data-ttu-id="0a0fd-143">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="0a0fd-143">BizTalkMsgBoxDb</span></span>|<span data-ttu-id="0a0fd-144">BizTalk Server 引擎使用此数据库来执行路由、排队、实例管理和其他各种任务。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-144">This database is used by the BizTalk Server engine for routing, queuing, instance management, and a variety of other tasks.</span></span>|  
|<span data-ttu-id="0a0fd-145">规则引擎数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-145">Rule Engine database</span></span>|<span data-ttu-id="0a0fd-146">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="0a0fd-146">BizTalkRuleEngineDb</span></span>|<span data-ttu-id="0a0fd-147">此数据库是包含以下内容的存储库：</span><span class="sxs-lookup"><span data-stu-id="0a0fd-147">This database is a repository for:</span></span><br /><br /> <span data-ttu-id="0a0fd-148">-策略，它是相关的规则集。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-148">-   Policies, which are sets of related rules.</span></span><br /><span data-ttu-id="0a0fd-149">-词汇，它们是在规则中的数据引用的用户友好的特定于域的名称的集合。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-149">-   Vocabularies, which are collections of user-friendly, domain-specific names for data references in rules.</span></span>|  
|<span data-ttu-id="0a0fd-150">SSO 数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-150">SSO database</span></span>|<span data-ttu-id="0a0fd-151">SSODB</span><span class="sxs-lookup"><span data-stu-id="0a0fd-151">SSODB</span></span>|<span data-ttu-id="0a0fd-152">此企业单一登录数据库更安全地存储配置的信息接收位置。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-152">This Enterprise Single Sign-On database more securely stores the configuration information for receive locations.</span></span>|  
  
### <a name="databases-backed-up-when-backing-up-the-bam-analysis-and-tracking-analysis-server-databases"></a><span data-ttu-id="0a0fd-153">当备份 BAM 分析和跟踪 Analysis Server 数据库备份的数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-153">Databases Backed Up When Backing Up the BAM Analysis and Tracking Analysis Server Databases</span></span>  
 <span data-ttu-id="0a0fd-154">下表列出了使用中的过程进行备份的数据库[备份 BAM 分析和跟踪 Analysis Server 数据库](http://msdn.microsoft.com/library/aa578580\(v=bts.70\).aspx):</span><span class="sxs-lookup"><span data-stu-id="0a0fd-154">The following table lists the databases that are backed up using the procedures in [Backing Up the BAM Analysis and Tracking Analysis Server Database](http://msdn.microsoft.com/library/aa578580\(v=bts.70\).aspx):</span></span>  
  
|<span data-ttu-id="0a0fd-155">数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-155">Database</span></span>|<span data-ttu-id="0a0fd-156">默认数据库名称</span><span class="sxs-lookup"><span data-stu-id="0a0fd-156">Default database name</span></span>|<span data-ttu-id="0a0fd-157">Description</span><span class="sxs-lookup"><span data-stu-id="0a0fd-157">Description</span></span>|  
|--------------|---------------------------|-----------------|  
|<span data-ttu-id="0a0fd-158">BAM 星型架构</span><span class="sxs-lookup"><span data-stu-id="0a0fd-158">BAM Star Schema</span></span>|<span data-ttu-id="0a0fd-159">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="0a0fd-159">BAMStarSchema</span></span>|<span data-ttu-id="0a0fd-160">此数据库包含中间临时表、度量值表和维度表。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-160">This database contains the staging table, and the measure and dimension tables.</span></span>|  
|<span data-ttu-id="0a0fd-161">BAM 分析</span><span class="sxs-lookup"><span data-stu-id="0a0fd-161">BAM Analysis</span></span>|<span data-ttu-id="0a0fd-162">BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="0a0fd-162">BAMAnalysis</span></span>|<span data-ttu-id="0a0fd-163">此数据库包含用于进行联机和脱机分析的 BAM OLAP 多维数据集。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-163">This database contains BAM OLAP cubes for both online and offline analysis.</span></span>|  
|<span data-ttu-id="0a0fd-164">BAM 存档</span><span class="sxs-lookup"><span data-stu-id="0a0fd-164">BAM Archive</span></span>|<span data-ttu-id="0a0fd-165">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="0a0fd-165">BAMArchive</span></span>|<span data-ttu-id="0a0fd-166">此数据库存档旧的业务活动数据。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-166">This database archives old business activity data.</span></span> <span data-ttu-id="0a0fd-167">创建 BAM 存档数据库以最大限度地减少 BAM 主导入数据库中业务活动数据的累积。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-167">Create a BAM Archive database to minimize the accumulation of business activity data in the BAM Primary Import database.</span></span>|  
|<span data-ttu-id="0a0fd-168">跟踪分析服务器</span><span class="sxs-lookup"><span data-stu-id="0a0fd-168">Tracking Analysis Server</span></span>|<span data-ttu-id="0a0fd-169">BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="0a0fd-169">BizTalkAnalysisDb</span></span>|<span data-ttu-id="0a0fd-170">此数据库存储运行状况监视联机分析处理 (OLAP) 多维数据集。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-170">This database stores health monitoring online analytical processing (OLAP) cubes.</span></span>|  
  
 <span data-ttu-id="0a0fd-171">操作指南的本部分介绍你应遵循的配置 BizTalk Server 的其他步骤日志传送。</span><span class="sxs-lookup"><span data-stu-id="0a0fd-171">This section of the operations guide describes additional steps that you should follow to configure BizTalk Server log shipping.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="0a0fd-172">本节内容</span><span class="sxs-lookup"><span data-stu-id="0a0fd-172">In This Section</span></span>  
  
-   [<span data-ttu-id="0a0fd-173">配置源系统</span><span class="sxs-lookup"><span data-stu-id="0a0fd-173">Configuring the Source System</span></span>](../technical-guides/configuring-the-source-system.md)  
  
-   [<span data-ttu-id="0a0fd-174">如何配置目标系统</span><span class="sxs-lookup"><span data-stu-id="0a0fd-174">How to Configure the Destination System</span></span>](../technical-guides/how-to-configure-the-destination-system.md)  
  
-   [<span data-ttu-id="0a0fd-175">配置 BizTalk Server 日志传送有关的其他数据库</span><span class="sxs-lookup"><span data-stu-id="0a0fd-175">Configuring BizTalk Server Log Shipping for Additional Databases</span></span>](../technical-guides/configuring-biztalk-server-log-shipping-for-additional-databases.md)  
  
-   [<span data-ttu-id="0a0fd-176">监视 BizTalk Server 日志传送</span><span class="sxs-lookup"><span data-stu-id="0a0fd-176">Monitoring BizTalk Server Log Shipping</span></span>](../technical-guides/monitoring-biztalk-server-log-shipping.md)