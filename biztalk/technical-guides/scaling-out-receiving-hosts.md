---
title: "向外扩展接收主机 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e9f78710-93fa-4877-8273-a1634d768d88
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f0a58d7dfa022c3921abb5b426dacdf387095c2
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
---
# <a name="scaling-out-receiving-hosts"></a><span data-ttu-id="280e0-102">向外扩展接收主机</span><span class="sxs-lookup"><span data-stu-id="280e0-102">Scaling Out Receiving Hosts</span></span>
<span data-ttu-id="280e0-103">若要使接收主机高度可用，必须具有两个或多[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正在运行的每个接收的主机实例的计算机。</span><span class="sxs-lookup"><span data-stu-id="280e0-103">To make receiving hosts highly available, you must have two or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers that are running instances of each receiving host.</span></span> <span data-ttu-id="280e0-104">通过向外扩展接收主机可以增加的消息传送密集型 BizTalk Server 部署的可用性。</span><span class="sxs-lookup"><span data-stu-id="280e0-104">By scaling out the receiving hosts you can increase the availability for BizTalk Server deployments that are messaging-intensive.</span></span> <span data-ttu-id="280e0-105">尽管这些部署可能很少处理业务流程，但仍可快速和可靠地路由许多不同类型的消息。</span><span class="sxs-lookup"><span data-stu-id="280e0-105">While these deployments might perform minimal processing for orchestrations, they can route many messages of varying types with great speed and reliability.</span></span>  
  
 <span data-ttu-id="280e0-106">通过将接收主机与处理业务流程和发送消息的主机分隔开来，您可增强您的环境的安全性和可伸缩性，因为可以独立于其他主机来保护和扩展每个主机。</span><span class="sxs-lookup"><span data-stu-id="280e0-106">You can enhance security and scalability in your environment by separating the receiving host from the hosts that process orchestrations and send messages because you can secure and scale each host independently of other hosts.</span></span> <span data-ttu-id="280e0-107">例如，您可以将两台计算机（主机实例）添加到接收主机，而无需向处理主机或发送主机添加任何计算机。</span><span class="sxs-lookup"><span data-stu-id="280e0-107">For example, you can add two computers (host instances) to the receiving host without adding any computers to the processing or sending hosts.</span></span>  
  
## <a name="understanding-in-process-and-isolated-receiving-hosts"></a><span data-ttu-id="280e0-108">了解在过程和独立接收主机</span><span class="sxs-lookup"><span data-stu-id="280e0-108">Understanding In-Process and Isolated Receiving Hosts</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="280e0-109">集成应用程序能够提供业务服务。</span><span class="sxs-lookup"><span data-stu-id="280e0-109"> integrates applications to provide business services.</span></span> <span data-ttu-id="280e0-110">集成通常表示为[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收 （从应用程序） 文档、 处理文档，并将处理的文档发送回应用程序或其他应用程序。</span><span class="sxs-lookup"><span data-stu-id="280e0-110">The integration is usually represented as [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives a document (from an application), processes the document, and sends the processed document back to the application or to another application.</span></span> <span data-ttu-id="280e0-111">过程被称为文档事务。</span><span class="sxs-lookup"><span data-stu-id="280e0-111">The process is called a document transaction.</span></span>  
  
 <span data-ttu-id="280e0-112">使用 BizTalk 适配器监视特定协议通道和接收文档通常启动事务。</span><span class="sxs-lookup"><span data-stu-id="280e0-112">A transaction usually starts with a BizTalk adapter monitoring a certain protocol channel and receiving a document.</span></span> <span data-ttu-id="280e0-113">*适配器*因此称作，因为它连接到其他应用程序[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="280e0-113">The *adapter* is so called because it connects other applications to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="280e0-114">根据其函数，它可以是发送适配器或接收适配器。</span><span class="sxs-lookup"><span data-stu-id="280e0-114">Based on its function, it can be a send adapter or a receive adapter.</span></span> <span data-ttu-id="280e0-115">默认适配器的大部分都是使用接收函数和内置于一个.NET 程序集的 send 函数的一个.NET 组件。</span><span class="sxs-lookup"><span data-stu-id="280e0-115">Most of the default adapters are one .NET component with both the receive function and send function built into one .NET assembly.</span></span> <span data-ttu-id="280e0-116">基于适配器所在的进程内存空间，它是任一进程 （接收） 适配器或隔离 （接收） 适配器。</span><span class="sxs-lookup"><span data-stu-id="280e0-116">Based on the process memory space in which an adapter resides, it is either an in-process (receive) adapter or an isolated (receive) adapter.</span></span> <span data-ttu-id="280e0-117">仅可由承载进程内适配器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]过程 (BTSNTSvc.exe)，并隔离的适配器旨在由另一个进程。</span><span class="sxs-lookup"><span data-stu-id="280e0-117">An in-process adapter can only be hosted by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process (BTSNTSvc.exe), and an isolated adapter is designed to be hosted by another process.</span></span> <span data-ttu-id="280e0-118">例如，HTTP 适配器和 SOAP 适配器位于通过 Internet 信息服务 (IIS) 进程。</span><span class="sxs-lookup"><span data-stu-id="280e0-118">For example, the HTTP adapter and the SOAP adapter are hosted by the Internet Information Services (IIS) process.</span></span> <span data-ttu-id="280e0-119">它们是实质上是 ISAPI 扩展。</span><span class="sxs-lookup"><span data-stu-id="280e0-119">They are essentially ISAPI extensions.</span></span> <span data-ttu-id="280e0-120">另一方面，所有发送适配器是进程内适配器。</span><span class="sxs-lookup"><span data-stu-id="280e0-120">On the other hand, all of the send adapters are in-process adapters.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="280e0-121">配置会创建两个默认主机-进程内主机是 BizTalkServerApplication，并且独立的主机中调用 BizTalkServerIsolatedHost。</span><span class="sxs-lookup"><span data-stu-id="280e0-121"> Configuration creates two default hosts—the in-process host is called BizTalkServerApplication, and the isolated host is called BizTalkServerIsolatedHost.</span></span> <span data-ttu-id="280e0-122">主机提供两个函数： 一个逻辑分组[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]项因此这些项无法分配到不同[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]进程，以及其他控制安全性。</span><span class="sxs-lookup"><span data-stu-id="280e0-122">A host serves two functions: one is logically grouping the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] items so these items can be assigned to different [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processes, and the other is controlling security.</span></span> <span data-ttu-id="280e0-123">你需要为主机指定 Windows 组。</span><span class="sxs-lookup"><span data-stu-id="280e0-123">You need to specify a Windows group for a host.</span></span> <span data-ttu-id="280e0-124">只有此组中的用户可以将文档发送到由承载适配器*托管实例*分配给此主机。</span><span class="sxs-lookup"><span data-stu-id="280e0-124">Only the users in this group can send documents to the adapters hosted by the *host instances* assigned to this host.</span></span>  
  
 <span data-ttu-id="280e0-125">每两个默认主机都有一个主机实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-125">Each of the two default hosts has a host instance.</span></span> <span data-ttu-id="280e0-126">主机实例不具有一个名称，而是与主机关联。</span><span class="sxs-lookup"><span data-stu-id="280e0-126">A host instance does not have a name, but is associated with a host.</span></span> <span data-ttu-id="280e0-127">BizTalkServerApplication 主机实例实际上是[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上服务进程 (BTSNTSvc.exe) [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] BizTalk 组中的计算机。</span><span class="sxs-lookup"><span data-stu-id="280e0-127">The BizTalkServerApplication host instance is actually the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service process (BTSNTSvc.exe) on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer within the BizTalk group.</span></span> <span data-ttu-id="280e0-128">BizTalkServerIsolatedHost 主机实例未直接绑定到一个进程。</span><span class="sxs-lookup"><span data-stu-id="280e0-128">The BizTalkServerIsolatedHost host instance is not directly bound to a process.</span></span> <span data-ttu-id="280e0-129">它是与承载接收适配器的进程相关联。</span><span class="sxs-lookup"><span data-stu-id="280e0-129">It is associated with the process that hosts the receive adapter.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="280e0-130">配置还会创建*接收处理者*为每个默认适配器 SMTP 除外 （SMTP 是发送适配器）。</span><span class="sxs-lookup"><span data-stu-id="280e0-130"> Configuration also creates a *receive handler* for each of the default adapters with the exception of SMTP (SMTP is a send adapter).</span></span> <span data-ttu-id="280e0-131">接收处理程序属性之一是主机名。</span><span class="sxs-lookup"><span data-stu-id="280e0-131">One of the receive handler properties is host name.</span></span> <span data-ttu-id="280e0-132">这就是如何绑定到主机和该主机的主机实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-132">That is how it is bound to a host and the host instances of that host.</span></span>  
  
 <span data-ttu-id="280e0-133">除了适配器、 主机、 主机实例和接收处理程序，你需要配置之前接收端口[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可以开始接收文档。</span><span class="sxs-lookup"><span data-stu-id="280e0-133">In addition to an adapter, host, host instance, and receive handler, you need to configure a receive port before [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can start receiving documents.</span></span> <span data-ttu-id="280e0-134">接收端口包含接收位置。</span><span class="sxs-lookup"><span data-stu-id="280e0-134">A receive port contains receive locations.</span></span> <span data-ttu-id="280e0-135">接收位置有一个接收处理程序属性。</span><span class="sxs-lookup"><span data-stu-id="280e0-135">A receive location has a receive handler property.</span></span> <span data-ttu-id="280e0-136">逻辑，你可以跟踪到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]过程处理此接收端口。</span><span class="sxs-lookup"><span data-stu-id="280e0-136">Following the logic, you can trace to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process that processes this receive port.</span></span>  
  
 <span data-ttu-id="280e0-137">在接收端口配置中，（可选） 指定映射。</span><span class="sxs-lookup"><span data-stu-id="280e0-137">In the receive port configuration, you optionally specify maps.</span></span> <span data-ttu-id="280e0-138">在接收位置配置中，你必须指定用于文档预处理的管道。</span><span class="sxs-lookup"><span data-stu-id="280e0-138">In the receive location configuration, you must specify a pipeline used for document preprocessing.</span></span> <span data-ttu-id="280e0-139">指定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]进程处理接收到预处理到映射文档的文档的文档的所有内容。</span><span class="sxs-lookup"><span data-stu-id="280e0-139">The designated [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process handles everything from receiving a document, to preprocessing the document, to mapping the document.</span></span> <span data-ttu-id="280e0-140">这是相同的进程内主机实例和独立的主机实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-140">This is the same for both in-process host instances and isolated host instances.</span></span>  
  
## <a name="scaling-out-in-process-receiving-hosts"></a><span data-ttu-id="280e0-141">向外扩展进程内接收承载</span><span class="sxs-lookup"><span data-stu-id="280e0-141">Scaling Out In-Process Receiving Hosts</span></span>  
 <span data-ttu-id="280e0-142">下图显示通过其他计算机上有两个主机实例每个接收的主机提供高可用性的 BizTalk Server 部署。</span><span class="sxs-lookup"><span data-stu-id="280e0-142">The following figure shows a BizTalk Server deployment that provides high availability for the receiving host by having two host instances each on a different computer.</span></span> <span data-ttu-id="280e0-143">请注意，在此图中处理和发送主机不是高可用，因为只有一个处理的 BizTalk 项分配给主机的主机实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-143">Note that in this figure the processing and sending host is not highly available, because there is only one host instance processing the BizTalk items assigned to the host.</span></span>  
  
 <span data-ttu-id="280e0-144">![用于接收消息的多个主机](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span><span class="sxs-lookup"><span data-stu-id="280e0-144">![Multiple Host for Receiving Messages](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span></span>  
  
 <span data-ttu-id="280e0-145">在进行大型部署、与多个贸易合作伙伴打交道以及使用不同的协议时，您可以采用多个接收主机来分担接收功能。</span><span class="sxs-lookup"><span data-stu-id="280e0-145">For large deployments, for scenarios dealing with multiple trading partners, and for scenarios when you use different protocols, you can spread out the receiving functionality across multiple receiving hosts.</span></span> <span data-ttu-id="280e0-146">例如，您可以创建一个主机来接收每个适配器的消息，也可以创建不同主机来接收来自不同合作伙伴的消息。</span><span class="sxs-lookup"><span data-stu-id="280e0-146">For example, you can create a host for receiving messages for each adapter, or different hosts for receiving messages from different partners.</span></span> <span data-ttu-id="280e0-147">在创建多个接收主机后，您可以创建安全边界来提高您的环境的可管理性和可伸缩性；但是，这并不能确保环境高度可用。</span><span class="sxs-lookup"><span data-stu-id="280e0-147">When you create multiple receiving hosts you can create security boundaries and ease the manageability and scalability of your environment; however, it does not make your environment highly available.</span></span> <span data-ttu-id="280e0-148">为确保环境高度可用，您必须为创建的每个接收主机创建两个或更多主机实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-148">To make your environment highly available, you must create two or more host instances for each receiving host that you create.</span></span> <span data-ttu-id="280e0-149">例如，你可以创建三个不同接收主机 （A、 B 和 C） 从三个不同公司接收消息。</span><span class="sxs-lookup"><span data-stu-id="280e0-149">For example, you can create three different receiving hosts (A, B, and C) to receive messages from three different companies.</span></span> <span data-ttu-id="280e0-150">为确保所有这些主机高度可用，随后还需要在两台或更多计算机中创建所有这些主机的实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-150">To make each of these hosts highly available you then create host instances of each of these hosts in two or more computers.</span></span> <span data-ttu-id="280e0-151">请注意，您可以在一台计算机上创建每个主机的实例，而不会影响安全边界、可管理性或可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="280e0-151">Note that you can have instances of each host on one computer without losing the security boundary, manageability, or scalability.</span></span>  
  
 <span data-ttu-id="280e0-152">下图显示了高度可用的包含三台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境与主机专用于不同公司从接收消息。</span><span class="sxs-lookup"><span data-stu-id="280e0-152">The following figure shows a highly available three-computer [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment with hosts dedicated to receiving messages from different companies.</span></span>  
  
 <span data-ttu-id="280e0-153">![向外扩展接收主机](../technical-guides/media/04bd4234-dc71-49d8-b630-0643390b29f0.gif "04bd4234-dc71-49d8-b630-0643390b29f0")</span><span class="sxs-lookup"><span data-stu-id="280e0-153">![Scaling out receive hosts](../technical-guides/media/04bd4234-dc71-49d8-b630-0643390b29f0.gif "04bd4234-dc71-49d8-b630-0643390b29f0")</span></span>  
  
 <span data-ttu-id="280e0-154">为确保此配置的高可用性，每台计算机都运行三个主机实例：三家公司中的每一个家都对应一个实例。</span><span class="sxs-lookup"><span data-stu-id="280e0-154">To provide high availability in this configuration, each computer runs three host instances: one instance for each of the three companies.</span></span> <span data-ttu-id="280e0-155">每家公司的主机实例都包含用来与该公司进行通信的接收位置和管道。</span><span class="sxs-lookup"><span data-stu-id="280e0-155">The host instances for each company contain the receive locations and pipelines to communicate with that company.</span></span> <span data-ttu-id="280e0-156">在典型操作期间，只要执行了必要的工作，以向外扩展前面的接收适配器中，消息传递负载分布于三个宿主实例对于每个主机。</span><span class="sxs-lookup"><span data-stu-id="280e0-156">During typical operations, as long as you have done the necessary work for scale-out in front of the receive adapters, the messaging load is distributed among the three host instances for each host.</span></span> <span data-ttu-id="280e0-157">如果一台计算机上的主机实例失败，则在其他两台计算机上运行的主机实例将提供冗余，以保持服务可用。</span><span class="sxs-lookup"><span data-stu-id="280e0-157">If a host instance on one computer fails, the host instances running on the other two computers provide redundancy and maintain service availability.</span></span>  
  
## <a name="scaling-out-isolated-receiving-hosts"></a><span data-ttu-id="280e0-158">缩放缩小隔离接收主机</span><span class="sxs-lookup"><span data-stu-id="280e0-158">Scaling Out Isolated Receiving Hosts</span></span>  
 <span data-ttu-id="280e0-159">除了主机实例，缩放和为接收主机提供高可用性的过程又依赖于在你部署中实施的特定适配器。</span><span class="sxs-lookup"><span data-stu-id="280e0-159">Besides host instances, the process of scaling and providing high availability for the receiving hosts also depends on the specific adapters that you implement in your deployment.</span></span> <span data-ttu-id="280e0-160">每个适配器都具有与协议有关的特性，所以在协议不同的情况下规划和部署也会有所不同。</span><span class="sxs-lookup"><span data-stu-id="280e0-160">Each adapter has protocol-specific characteristics that make planning and deployment different in each case.</span></span> <span data-ttu-id="280e0-161">但是，BizTalk Server 可让你将应用所有适配器的支持，主要通过其他计算机和主机实例相同的高可用性解决方案。</span><span class="sxs-lookup"><span data-stu-id="280e0-161">However, BizTalk Server lets you apply the same high-availability solution for all adapters, primarily through additional computers and host instances.</span></span>  
  
 <span data-ttu-id="280e0-162">根据所用的具体协议，某些接收适配器需要采用在多台主机计算机中分布传入消息的附加机制，才能确保高可用性。</span><span class="sxs-lookup"><span data-stu-id="280e0-162">Depending on the specific protocol being used, some receive adapters require an additional mechanism for distributing incoming messages among multiple host computers to provide high availability.</span></span> <span data-ttu-id="280e0-163">例如，使用 HTTP 或 SOAP 适配器 （也称为 Web 服务适配器） 的 BizTalk Server 解决方案需要负载平衡器如网络负载平衡 (NLB) 分配接收工作负荷下, 图中所示。</span><span class="sxs-lookup"><span data-stu-id="280e0-163">For example, BizTalk Server solutions that use the HTTP or SOAP adapter (otherwise known as the Web services adapter) require a load balancer such as Network Load Balancing (NLB) to distribute the receiving workload, as shown in the following figure.</span></span>  
  
 <span data-ttu-id="280e0-164">![向外扩展独立接收主机](../technical-guides/media/cb38ec25-bfb0-4a55-8464-b7918b6fc746.gif "cb38ec25-bfb0-4a55-8464-b7918b6fc746")</span><span class="sxs-lookup"><span data-stu-id="280e0-164">![Scaling out isolated receive host](../technical-guides/media/cb38ec25-bfb0-4a55-8464-b7918b6fc746.gif "cb38ec25-bfb0-4a55-8464-b7918b6fc746")</span></span>  
  
 <span data-ttu-id="280e0-165">有关中的最常见适配器的高可用性准则的详细信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，请参阅中的"缩放 BizTalk Server 接收适配器"部分[Scaled-Out 接收主机](http://go.microsoft.com/fwlink/?LinkId=151283)(http://go.microsoft.com/fwlink /？LinkId = 151283) 在 BizTalk Server 帮助中。</span><span class="sxs-lookup"><span data-stu-id="280e0-165">For more information about the high-availability guidelines for the most common adapters in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], see "Scaling the BizTalk Server Receive Adapters" section in [Scaled-Out Receiving Hosts](http://go.microsoft.com/fwlink/?LinkId=151283) (http://go.microsoft.com/fwlink/?LinkId=151283) in BizTalk Server Help.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="280e0-166">另请参阅</span><span class="sxs-lookup"><span data-stu-id="280e0-166">See Also</span></span>  
 <span data-ttu-id="280e0-167">[群集接收主机](../technical-guides/clustering-receiving-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="280e0-167">[Clustering Receiving Hosts](../technical-guides/clustering-receiving-hosts.md) </span></span>  
 <span data-ttu-id="280e0-168">[向外扩展处理主机](../technical-guides/scaling-out-processing-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="280e0-168">[Scaling Out Processing Hosts](../technical-guides/scaling-out-processing-hosts.md) </span></span>  
 [<span data-ttu-id="280e0-169">横向扩展发送主机</span><span class="sxs-lookup"><span data-stu-id="280e0-169">Scaling Out Sending Hosts</span></span>](../technical-guides/scaling-out-sending-hosts.md)