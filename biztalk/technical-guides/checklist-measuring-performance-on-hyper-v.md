---
title: "清单： HYPER-V 上测量性能 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f32c95f4-a4eb-412b-9fa7-140e80b85e5a
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 806f1efb67205771a1e202c8bafd77a493d584e4
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-measuring-performance-on-hyper-v"></a><span data-ttu-id="d790b-102">清单： HYPER-V 上测量性能</span><span class="sxs-lookup"><span data-stu-id="d790b-102">Checklist: Measuring Performance on Hyper-V</span></span>
<span data-ttu-id="d790b-103">虽然大部分分析性能的来宾操作系统安装在 HYPER-V 虚拟机性能的原则是与分析的物理计算机上安装操作系统的性能相同，许多集合方法都是不同的结果。</span><span class="sxs-lookup"><span data-stu-id="d790b-103">While most of the principles of analyzing performance of a guest operating system installed on a Hyper-V virtual machine performance are the same as analyzing the performance of an operating system installed on a physical machine, many of the collection methods are different.</span></span> <span data-ttu-id="d790b-104">计算的性能时，应作为快速参考使用以下章节你[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]HYPER-V 虚拟机上安装来宾操作系统上运行的解决方案。</span><span class="sxs-lookup"><span data-stu-id="d790b-104">The sections below should be used as a quick reference when evaluating performance of your [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] solution running on a guest operating system installed on a Hyper-V virtual machine.</span></span>  
  
## <a name="measuring-disk-io-performance"></a><span data-ttu-id="d790b-105">测量磁盘 I/O 性能</span><span class="sxs-lookup"><span data-stu-id="d790b-105">Measuring Disk I/O Performance</span></span>  
 <span data-ttu-id="d790b-106">使用以下性能监视器计数器测量 HYPER-V 虚拟机上安装来宾操作系统上的磁盘 I/O 性能：</span><span class="sxs-lookup"><span data-stu-id="d790b-106">Use the following performance monitor counters to measure disk I/O performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
|<span data-ttu-id="d790b-107">步骤</span><span class="sxs-lookup"><span data-stu-id="d790b-107">Step</span></span>|<span data-ttu-id="d790b-108">参考</span><span class="sxs-lookup"><span data-stu-id="d790b-108">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="d790b-109">**度量值在 HYPER-V 主机操作系统上的磁盘延迟**– 在 HYPER-V 主机操作系统上的磁盘性能的最佳初始指示器获取通过使用"\Logical \Avg 磁盘 （*）。Disk sec/Read"和"\Logical 磁盘 (\*) \Avg。Disk sec/Write"性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="d790b-109">**Measure disk latency on a Hyper-V host operating system** – The best initial indicator of disk performance on a Hyper-V host operating system is obtained by using the “\Logical Disk(*)\Avg. Disk sec/Read” and “\Logical Disk(\*)\Avg. Disk sec/Write” performance monitor counters.</span></span> <span data-ttu-id="d790b-110">这些性能监视器计数器测量读取和写入操作时间，以响应的操作系统的时间的量。</span><span class="sxs-lookup"><span data-stu-id="d790b-110">These performance monitor counters measure the amount of time that read and write operations take to respond to the operating system.</span></span> <span data-ttu-id="d790b-111">作为一个常规的经验法则，平均响应时间大于时间被视为非最优。</span><span class="sxs-lookup"><span data-stu-id="d790b-111">As a general rule of thumb, average response times greater than 15ms are considered sub-optimal.</span></span> <span data-ttu-id="d790b-112">作为一个常规的经验法则，平均响应时间大于时间被视为非最优。</span><span class="sxs-lookup"><span data-stu-id="d790b-112">As a general rule of thumb, average response times greater than 15ms are considered sub-optimal.</span></span> <span data-ttu-id="d790b-113">这依赖于典型查找单个 7200 RPM 磁盘驱动器，而无需缓存的时间。</span><span class="sxs-lookup"><span data-stu-id="d790b-113">This is based on the typical seek time of a single 7200 RPM disk drive without cache.</span></span> <span data-ttu-id="d790b-114">建议的物理磁盘性能监视器计数器与逻辑磁盘使用，因为 Windows 应用程序和服务利用表示为呈现给操作系统的物理磁盘 (LUN) 可以是其中的驱动器号的逻辑驱动器组成磁盘阵列中的多个物理磁盘驱动器。</span><span class="sxs-lookup"><span data-stu-id="d790b-114">The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array.</span></span> <span data-ttu-id="d790b-115">使用以下规则的经验法则，在衡量使用 \Logical 磁盘的 HYPER-V 主机操作系统上的磁盘延迟 (\*) \Avg。磁盘 sec/Read 或 \Logical 磁盘 (\*) \Avg。磁盘 sec/Write 性能监视器计数器：</span><span class="sxs-lookup"><span data-stu-id="d790b-115">Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:</span></span><br /><br /> <span data-ttu-id="d790b-116">这依赖于典型查找单个 7200 RPM 磁盘驱动器，而无需缓存的时间。</span><span class="sxs-lookup"><span data-stu-id="d790b-116">This is based on the typical seek time of a single 7200 RPM disk drive without cache.</span></span> <span data-ttu-id="d790b-117">建议的物理磁盘性能监视器计数器与逻辑磁盘使用，因为 Windows 应用程序和服务利用表示为呈现给操作系统的物理磁盘 (LUN) 可以是其中的驱动器号的逻辑驱动器组成磁盘阵列中的多个物理磁盘驱动器。</span><span class="sxs-lookup"><span data-stu-id="d790b-117">The use of logical disk versus physical disk performance monitor counters is recommended because Windows applications and services utilize logical drives represented as drive letters wherein the physical disk (LUN) presented to the operating system can be comprised of multiple physical disk drives in a disk array.</span></span> <span data-ttu-id="d790b-118">使用以下规则的经验法则，在衡量使用 \Logical 磁盘的 HYPER-V 主机操作系统上的磁盘延迟 (\*) \Avg。磁盘 sec/Read 或 \Logical 磁盘 (\*) \Avg。磁盘 sec/Write 性能监视器计数器：</span><span class="sxs-lookup"><span data-stu-id="d790b-118">Use the following rule of thumb when measuring disk latency on the Hyper-V host operating system using the \Logical Disk(\*)\Avg. Disk sec/Read or \Logical Disk(\*)\Avg. Disk sec/Write performance monitor counters:</span></span><br /><br /> <span data-ttu-id="d790b-119">-1 毫秒到时间 = 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-119">-   1ms to 15ms  = Healthy</span></span><br /><span data-ttu-id="d790b-120">-时间到毫秒 = 警告或监视器</span><span class="sxs-lookup"><span data-stu-id="d790b-120">-   15ms to 25ms = Warning or Monitor</span></span><br /><span data-ttu-id="d790b-121">-26ms年或更高版本 = 严重，性能将会受到不利影响**注意：**在非虚拟化环境中安装的物理磁盘提供更好的性能比访问通过 HYPER-V 主机操作系统的磁盘。</span><span class="sxs-lookup"><span data-stu-id="d790b-121">-   26ms or greater = Critical, performance will be adversely affected **Note:**  Physical disks installed on a non-virtualized environment offer better performance than disks accessed through a Hyper-V host operating system.</span></span> <span data-ttu-id="d790b-122">如果磁盘性能对你的应用程序的总体性能绝对至关重要，请考虑托管在仅物理硬件上的磁盘。</span><span class="sxs-lookup"><span data-stu-id="d790b-122">If disk performance is absolutely critical to the overall performance of your application, consider hosting disks on physical hardware only.</span></span> <span data-ttu-id="d790b-123">**注意：**评估磁盘 I/O 性能时，请确保配置防病毒软件扫描的任何磁盘分区的计算中排除。</span><span class="sxs-lookup"><span data-stu-id="d790b-123">**Note:**  When evaluating disk I/O performance, ensure that you configure antivirus software to exclude scanning of any disk partitions that are being evaluated.</span></span> <span data-ttu-id="d790b-124">防病毒扫描造成可能会产生负面影响性能和倾斜测试结果的开销。</span><span class="sxs-lookup"><span data-stu-id="d790b-124">Antivirus scanning introduces overhead that can negatively impact performance and skew test results.</span></span> <br /><br /> <span data-ttu-id="d790b-125">**度量值在来宾操作系统上的磁盘延迟**– 可以使用用于测量响应时间的 HYPER-V 主机操作系统所使用的磁盘相同的性能监视器计数器测量响应时间的来宾操作系统所使用的磁盘系统。</span><span class="sxs-lookup"><span data-stu-id="d790b-125">**Measure disk latency on guest operating systems** – Response times of the disks used by the guest operating systems can be measured using the same performance monitor counters used to measure response times of the disks used by the Hyper-V host operating system.</span></span>|<span data-ttu-id="d790b-126">有关磁盘性能分析的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="d790b-126">For more information about disk performance analysis, see the following resources:</span></span><br /><br /> <span data-ttu-id="d790b-127">-"的 HYPER-V 中运行 SQL Server 的性能开销"部分中的"运行 SQL Server 2008 in a HYPER-V 环境 – 最佳做法和性能注意事项"白皮书，网址[http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622)。</span><span class="sxs-lookup"><span data-stu-id="d790b-127">-   “Performance Overhead of Running SQL Server in Hyper-V” section of “Running SQL Server 2008 in a Hyper-V Environment – Best Practices and Performance Considerations” whitepaper at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span><br /><span data-ttu-id="d790b-128">-允许在磁盘密集型问题[http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947)。</span><span class="sxs-lookup"><span data-stu-id="d790b-128">-   Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?LinkId=120947](http://go.microsoft.com/fwlink/?LinkId=120947).</span></span><br /><span data-ttu-id="d790b-129">SQL 服务器预部署 I/O 最佳实践在[http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948)。</span><span class="sxs-lookup"><span data-stu-id="d790b-129">-   SQL Server Predeployment I/O Best Practices at [http://go.microsoft.com/fwlink/?LinkId=120948](http://go.microsoft.com/fwlink/?LinkId=120948).</span></span><br /><span data-ttu-id="d790b-130">-"I/O 瓶颈"部分"在 SQL Server 2008" 白皮书中的故障排除性能问题[http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135)。</span><span class="sxs-lookup"><span data-stu-id="d790b-130">-   “I/O Bottlenecks” section of the “Troubleshooting Performance Problems in SQL Server 2008” whitepaper available at [http://go.microsoft.com/fwlink/?LinkID=202135](http://go.microsoft.com/fwlink/?LinkID=202135).</span></span><br /><span data-ttu-id="d790b-131">-如何确定磁盘性能瓶颈使用在 Microsoft 服务器性能审查程序 (SPA) 工具[http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096)。</span><span class="sxs-lookup"><span data-stu-id="d790b-131">-   How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?LinkID=98096](http://go.microsoft.com/fwlink/?LinkID=98096).</span></span>|  
  
## <a name="measuring-memory-performance"></a><span data-ttu-id="d790b-132">内存性能测量</span><span class="sxs-lookup"><span data-stu-id="d790b-132">Measuring Memory Performance</span></span>  
 <span data-ttu-id="d790b-133">使用以下性能监视器计数器测量的可用内存的来宾操作系统的 HYPER-V 虚拟机上安装的性能的影响：</span><span class="sxs-lookup"><span data-stu-id="d790b-133">Use the following performance monitor counters to measure the impact of available memory on the performance of a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
|<span data-ttu-id="d790b-134">步骤</span><span class="sxs-lookup"><span data-stu-id="d790b-134">Step</span></span>|<span data-ttu-id="d790b-135">参考</span><span class="sxs-lookup"><span data-stu-id="d790b-135">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="d790b-136">**度量值在 HYPER-V 主机操作系统上的可用内存**– 可以在监视"\Memory\Available MBytes"性能监视器计数器来确定可用于 HYPER-V 主机操作系统的物理内存量物理计算机。</span><span class="sxs-lookup"><span data-stu-id="d790b-136">**Measure available memory on the Hyper-V host operating system** – The amount of physical memory available to the Hyper-V host operating system can be determined by monitoring the “\Memory\Available MBytes” performance monitor counter on the physical computer.</span></span> <span data-ttu-id="d790b-137">此计数器报告可用于主机操作系统的可用物理内存量。</span><span class="sxs-lookup"><span data-stu-id="d790b-137">This counter reports the amount of free physical memory available to the host operating system.</span></span> <span data-ttu-id="d790b-138">评估可用于主机操作系统的可用物理内存时，请使用以下规则的经验法则：</span><span class="sxs-lookup"><span data-stu-id="d790b-138">Use the following rules of thumb when evaluating available physical memory available to the host operating system:</span></span><br /><br /> <ul><li><span data-ttu-id="d790b-139">**\Memory\Available Mbytes** – Available MBytes 测量到的计算机上安装的物理内存百分比的计算机上，运行的进程可用的物理内存量。</span><span class="sxs-lookup"><span data-stu-id="d790b-139">**\Memory\Available Mbytes** – Available MBytes measures the amount of physical memory available to processes running on the computer, as a percentage of physical memory installed on the computer.</span></span> <span data-ttu-id="d790b-140">测量此性能监视器计数器的值时，将应用以下原则：</span><span class="sxs-lookup"><span data-stu-id="d790b-140">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="d790b-141">可用内存的 50%或更 = 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-141">50% of free memory available or more = Healthy</span></span></li><li><span data-ttu-id="d790b-142">25%的可用内存 = 监视器</span><span class="sxs-lookup"><span data-stu-id="d790b-142">25% of free memory available = Monitor</span></span></li><li><span data-ttu-id="d790b-143">可用内存的 10%= 警告</span><span class="sxs-lookup"><span data-stu-id="d790b-143">10% of free memory available = Warning</span></span></li><li><span data-ttu-id="d790b-144">小于 5%的可用内存 = 严重，性能将会受到不利影响</span><span class="sxs-lookup"><span data-stu-id="d790b-144">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span></li></ul></li><li><span data-ttu-id="d790b-145">**\Memory\Pages/sec** – 此性能监视器计数器测量从读取或写入磁盘为解决强制分页错误页的速率。</span><span class="sxs-lookup"><span data-stu-id="d790b-145">**\Memory\Pages/sec** – This performance monitor counter measures the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="d790b-146">若要解决强制分页错误，操作系统必须交换到磁盘，对性能造成负面影响的内存中的内容。</span><span class="sxs-lookup"><span data-stu-id="d790b-146">To resolve hard page faults, the operating system must swap the contents of memory to disk, which negatively impacts performance.</span></span> <span data-ttu-id="d790b-147">较高数量的可用物理内存不足的相关中每秒的页可能表示物理内存不足。</span><span class="sxs-lookup"><span data-stu-id="d790b-147">A high number of pages per second in correlation with low available physical memory may indicate a lack of physical memory.</span></span> <span data-ttu-id="d790b-148">测量此性能监视器计数器的值时，将应用以下原则：</span><span class="sxs-lookup"><span data-stu-id="d790b-148">The following guidelines apply when measuring the value of this performance monitor counter:</span></span><br /><br /> <ul><li><span data-ttu-id="d790b-149">少于 500 个 = 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-149">Less than 500 = Healthy</span></span></li><li><span data-ttu-id="d790b-150">500-1000年 = 监视器或警告</span><span class="sxs-lookup"><span data-stu-id="d790b-150">500 - 1000 = Monitor or Caution</span></span></li><li><span data-ttu-id="d790b-151">大于 1000年 = 严重，性能将会受到不利影响</span><span class="sxs-lookup"><span data-stu-id="d790b-151">Greater than 1000 = Critical, performance will be adversely affected</span></span></li></ul></li></ul><br /> <span data-ttu-id="d790b-152">**测量来宾操作系统上的可用内存**– 可以使用用来测量内存可用于 HYPER-V 主机操作系统相同的性能监视器计数器测量可供来宾操作系统的内存。</span><span class="sxs-lookup"><span data-stu-id="d790b-152">**Measure available memory on the guest operating system** – Memory that is available to the guest operating systems can be measured with the same performance monitor counters used to measure memory available to the Hyper-V host operating system.</span></span>|<span data-ttu-id="d790b-153">详细信息的影响的可用物理内存对应用程序服务器性能，请参阅 Exchange Server 2003 帮助主题"排除出内存密集型问题"在[http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056)。</span><span class="sxs-lookup"><span data-stu-id="d790b-153">For more information about the impact of available physical memory on application server performance, see the Exchange Server 2003 Help topic “Ruling Out Memory-Bound Problems” at [http://go.microsoft.com/fwlink/?LinkId=121056](http://go.microsoft.com/fwlink/?LinkId=121056).</span></span>|  
  
## <a name="measuring-network-performance"></a><span data-ttu-id="d790b-154">测量的网络性能</span><span class="sxs-lookup"><span data-stu-id="d790b-154">Measuring Network Performance</span></span>  
 <span data-ttu-id="d790b-155">HYPER-V 允许来宾计算机，以共享相同的物理网络适配器。</span><span class="sxs-lookup"><span data-stu-id="d790b-155">Hyper-V allows guest computers to share the same physical network adapter.</span></span> <span data-ttu-id="d790b-156">虽然这可帮助整合硬件，请注意不要 saturate 物理适配器。</span><span class="sxs-lookup"><span data-stu-id="d790b-156">While this helps to consolidate hardware, take care not to saturate the physical adapter.</span></span> <span data-ttu-id="d790b-157">使用以下方法来确保网络使用 HYPER-V 虚拟机的网络的运行状况：</span><span class="sxs-lookup"><span data-stu-id="d790b-157">Use the following methods to ensure the health of the network used by the Hyper-V virtual machines:</span></span>  
  
|<span data-ttu-id="d790b-158">步骤</span><span class="sxs-lookup"><span data-stu-id="d790b-158">Step</span></span>|<span data-ttu-id="d790b-159">参考</span><span class="sxs-lookup"><span data-stu-id="d790b-159">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="d790b-160">**测试网络延迟**</span><span class="sxs-lookup"><span data-stu-id="d790b-160">**Test network latency**</span></span>|<span data-ttu-id="d790b-161">每个虚拟机，以确保足够的网络延迟执行 ping 操作。</span><span class="sxs-lookup"><span data-stu-id="d790b-161">Ping each virtual machine to ensure adequate network latency.</span></span> <span data-ttu-id="d790b-162">本地区域在网络上，预计会收到小于 1ms 响应时间。</span><span class="sxs-lookup"><span data-stu-id="d790b-162">On local area networks, expect to receive less than 1ms response times.</span></span>|  
|<span data-ttu-id="d790b-163">**测试数据包丢失**</span><span class="sxs-lookup"><span data-stu-id="d790b-163">**Test for packet loss**</span></span>|<span data-ttu-id="d790b-164">使用 pathping.exe 实用工具测试虚拟机之间的数据包丢失。</span><span class="sxs-lookup"><span data-stu-id="d790b-164">Use the pathping.exe utility to test packet loss between virtual machines.</span></span> <span data-ttu-id="d790b-165">Pathping.exe 测量网络上的数据包丢失，并可与所有版本的[!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)]由于[!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d790b-165">Pathping.exe measures packet loss on the network and is available with all versions of [!INCLUDE[btsWinNoVersion](../includes/btswinnoversion-md.md)] since [!INCLUDE[btsWin2kSvr](../includes/btswin2ksvr-md.md)].</span></span> <span data-ttu-id="d790b-166">Pathping.exe 发出的每个网络节点的 100 个 ping 请求突然增加，并计算返回多少 ping。</span><span class="sxs-lookup"><span data-stu-id="d790b-166">Pathping.exe sends out a burst of 100 ping requests to each network node and calculates how many pings are returned.</span></span> <span data-ttu-id="d790b-167">在局域网上应从 pathping.exe 实用工具的 ping 请求不会丢失。</span><span class="sxs-lookup"><span data-stu-id="d790b-167">On local area networks there should be no loss of ping requests from the pathping.exe utility.</span></span>|  
|<span data-ttu-id="d790b-168">**测试网络文件传输**</span><span class="sxs-lookup"><span data-stu-id="d790b-168">**Test network file transfers**</span></span>|<span data-ttu-id="d790b-169">将复制的虚拟机之间有 100 MB 的文件和度量值的完成复制所需的时间长度。</span><span class="sxs-lookup"><span data-stu-id="d790b-169">Copy a 100MB file between virtual machines and measure the length of time required to complete the copy.</span></span> <span data-ttu-id="d790b-170">在正常 100m 位 （兆比特） 网络有 100 MB （兆字节） 的文件应复制在 10 到 20 秒。</span><span class="sxs-lookup"><span data-stu-id="d790b-170">On a healthy 100Mbit (megabit) network, a 100MB (megabyte) file should copy in 10 to 20 seconds.</span></span> <span data-ttu-id="d790b-171">在正常 1Gbit 网络上，有 100 MB 的文件应在大约 3 到 5 秒钟内将复制。</span><span class="sxs-lookup"><span data-stu-id="d790b-171">On a healthy 1Gbit network, a 100MB file should copy in about 3 to 5 seconds.</span></span> <span data-ttu-id="d790b-172">在这些参数之外的复制时间是网络问题的指示。</span><span class="sxs-lookup"><span data-stu-id="d790b-172">Copy times outside of these parameters are indicative of a network problem.</span></span> <span data-ttu-id="d790b-173">网络适配器具有"自动检测到"时发生较差网络传输的一个常见原因的 10 MB 半双工网络以防止网络适配器将充分利用可用带宽。</span><span class="sxs-lookup"><span data-stu-id="d790b-173">One common cause of poor network transfers occurs when the network adapter has “auto detected” a 10MB half-duplex network which prevents the network adapter from taking full advantage of available bandwidth.</span></span>|  
|<span data-ttu-id="d790b-174">**在 HYPER-V 主机操作系统上的度量值网络利用率**</span><span class="sxs-lookup"><span data-stu-id="d790b-174">**Measure network utilization on the Hyper-V host operating system**</span></span>|<span data-ttu-id="d790b-175">使用以下性能监视器计数器测量网络利用率对 HYPER-V 主机操作系统：</span><span class="sxs-lookup"><span data-stu-id="d790b-175">Use the following performance monitor counters to measure network utilization on the Hyper-V host operating system:</span></span><br /><br /> <span data-ttu-id="d790b-176">**\Network 接口 (\*) \Bytes Total/sec** – 的网络使用率百分比计算 8 以将其转换为 bits 乘以 Bytes Total/sec，将结果乘以 100，然后除以网络适配器的当前带宽。</span><span class="sxs-lookup"><span data-stu-id="d790b-176">**\Network Interface(\*)\Bytes Total/sec** – The percentage of network utilization is calculated by multiplying Bytes Total/sec by 8 to convert it to bits, multiply the result by 100, then divide by the network adapter’s current bandwidth.</span></span> <span data-ttu-id="d790b-177">使用以下阈值评估网络带宽利用率：</span><span class="sxs-lookup"><span data-stu-id="d790b-177">Use the following thresholds to evaluate network bandwidth utilization:</span></span><br /><br /> <span data-ttu-id="d790b-178">-少于 40%的使用的接口 = 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-178">-   Less than 40% of the interface consumed = Healthy</span></span><br /><span data-ttu-id="d790b-179">-41%-64%使用的接口的 = 监视器或警告</span><span class="sxs-lookup"><span data-stu-id="d790b-179">-   41%-64% of the interface consumed = Monitor or Caution</span></span><br /><span data-ttu-id="d790b-180">-65 100%的使用的接口 = 严重，性能将会受到不利影响</span><span class="sxs-lookup"><span data-stu-id="d790b-180">-   65-100% of the interface consumed = Critical, performance will be adversely affected</span></span><br /><br /> <span data-ttu-id="d790b-181">**\Network 接口 (\*) \Output 队列长度**– 输出队列长度测量的网络适配器上等待的线程数。</span><span class="sxs-lookup"><span data-stu-id="d790b-181">**\Network Interface(\*)\Output Queue Length** – The output queue length measures the number of threads waiting on the network adapter.</span></span> <span data-ttu-id="d790b-182">如果有 2 个以上线程在等待上的网络适配器，网络可能成为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d790b-182">If there are more than 2 threads waiting on the network adapter, then the network may be a bottleneck.</span></span> <span data-ttu-id="d790b-183">此常见原因是较差网络延迟和/或在网络上的高冲突率。</span><span class="sxs-lookup"><span data-stu-id="d790b-183">Common causes of this are poor network latency and/or high collision rates on the network.</span></span> <span data-ttu-id="d790b-184">使用以下阈值评估输出队列长度：</span><span class="sxs-lookup"><span data-stu-id="d790b-184">Use the following thresholds to evaluate output queue length:</span></span><br /><br /> <span data-ttu-id="d790b-185">-0 = 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-185">-   0 = Healthy</span></span><br /><span data-ttu-id="d790b-186">-1-2 = 监视器或警告</span><span class="sxs-lookup"><span data-stu-id="d790b-186">-   1-2 = Monitor or Caution</span></span><br /><span data-ttu-id="d790b-187">-Greater than 2 = 严重，性能将会受到不利影响。</span><span class="sxs-lookup"><span data-stu-id="d790b-187">-   Greater than 2 = Critical, performance will be adversely affected.</span></span><br /><br /> <span data-ttu-id="d790b-188">确保解决方案中的所有计算机 （物理和虚拟） 的网络适配器都配置为最大传输单位 (MTU) 使用相同的值。</span><span class="sxs-lookup"><span data-stu-id="d790b-188">Ensure that the network adapters for all computers (physical and virtual) in the solution are configured to use the same value for maximum transmission unit (MTU).</span></span> <span data-ttu-id="d790b-189">有关配置 MTU 值的详细信息，请参阅"附录 a: TCP/IP 配置参数"在[http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716)。</span><span class="sxs-lookup"><span data-stu-id="d790b-189">For more information about configuring the MTU value, see “Appendix A: TCP/IP Configuration Parameters” at [http://go.microsoft.com/fwlink/?LinkId=113716](http://go.microsoft.com/fwlink/?LinkId=113716).</span></span><br /><br /> <span data-ttu-id="d790b-190">如果为单位的 2 或更高输出队列长度，请考虑将一个或多个物理网络适配器添加到承载虚拟机的物理计算机并将绑定用到这些物理网络适配器的来宾操作系统的网络适配器。</span><span class="sxs-lookup"><span data-stu-id="d790b-190">If an output queue length of 2 or more is measured, consider adding one or more physical network adapters to the physical computer that hosts the virtual machines and bind the network adapters used by the guest operating systems to these physical network adapters.</span></span>|  
|<span data-ttu-id="d790b-191">**在来宾操作系统上的度量值网络利用率**</span><span class="sxs-lookup"><span data-stu-id="d790b-191">**Measure network utilization on the guest operating systems**</span></span>|<span data-ttu-id="d790b-192">如果 HYPER-V 根分区上的网络适配器正忙于由上面提到的性能监视器计数器，则可以考虑使用"\Hyper-V 虚拟网络适配器 （*） \Bytes/sec"性能监视器计数器以确定哪些虚拟网络适配器使用的大多数网络使用率。</span><span class="sxs-lookup"><span data-stu-id="d790b-192">If a network adapter on the Hyper-V root partition is busy as indicated by the performance monitor counters mentioned above, then consider using the "\Hyper-V Virtual Network Adapter(*)\Bytes/sec" performance monitor counter to identify which virtual network adapters are consuming the most network utilization.</span></span>|  
  
 <span data-ttu-id="d790b-193">有关网络性能分析的详细信息，请参阅"章 15-测量.NET 应用程序性能"在[http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073)。</span><span class="sxs-lookup"><span data-stu-id="d790b-193">For more information about network performance analysis, see “Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>  
  
## <a name="measuring-processor-performance"></a><span data-ttu-id="d790b-194">测量处理器性能</span><span class="sxs-lookup"><span data-stu-id="d790b-194">Measuring Processor Performance</span></span>  
 <span data-ttu-id="d790b-195">使用以下方法来评估在 HYPER-V 虚拟机上安装来宾操作系统上的处理器性能：</span><span class="sxs-lookup"><span data-stu-id="d790b-195">Use the following methods to evaluate processor performance on a guest operating system installed on a Hyper-V virtual machine:</span></span>  
  
-   <span data-ttu-id="d790b-196">**测量来宾操作系统处理器使用率-**传统上，处理器性能可以测量使用"\Processor(*)\\%Processor Time"性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="d790b-196">**Measure guest operating system processor utilization -** Traditionally, processor performance can be measured using the “\Processor(*)\\% Processor Time” performance monitor counter.</span></span> <span data-ttu-id="d790b-197">这不是通过评估的来宾操作系统的处理器使用率，因为 HYPER-V 测量并报告此值相对于分配给虚拟机的处理器数的准确计数器。</span><span class="sxs-lookup"><span data-stu-id="d790b-197">This is not an accurate counter for evaluating processor utilization of a guest operating system though because Hyper-V measures and reports this value relative to the number of processors allocated to the virtual machine.</span></span> <span data-ttu-id="d790b-198">如果多个处理器被分配给正在运行的虚拟机多于实际存在于物理计算机上，为每个来宾操作系统返回的值"\Processor (\*)\\%Processor Time"性能监视器计数器较低，即使处理器使用率实际上是瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d790b-198">If more processors are allocated to running virtual machines than are actually present on the physical computer, the value returned by each guest operating system for the “\Processor(\*)\\% Processor Time” performance monitor counter will be low, even if in fact processor utilization is a bottleneck.</span></span> <span data-ttu-id="d790b-199">这是因为虚拟处理器使用的物理处理器，在一种轮循机制的方式。</span><span class="sxs-lookup"><span data-stu-id="d790b-199">This occurs because the virtual processors utilize the physical processors in a round-robin fashion.</span></span> <span data-ttu-id="d790b-200">每个虚拟处理器将尝试并分配本身的共享总体系统资源，因此在 4 物理处理器系统中，每个虚拟处理器会按默认尝试利用 25%的系统资源。</span><span class="sxs-lookup"><span data-stu-id="d790b-200">Each virtual processor will try and allocate itself a share of overall system resources, so in a 4 physical processor system, each virtual processor will by default try to utilize 25% of the system resources.</span></span> <span data-ttu-id="d790b-201">如果 8 个虚拟处理器，以便共同创建这意味着虚拟处理器将尝试利用的服务器的 CPU 容量的 200%。</span><span class="sxs-lookup"><span data-stu-id="d790b-201">If 8 virtual processors are created this means that collectively the virtual processors will attempt to utilize 200% of the server CPU capacity.</span></span> <span data-ttu-id="d790b-202">在这种情况下，每个虚拟处理器将报告由低利用率"\Processor (\*)\\%Processor Time"（相对于期望的级别） 的性能监视器计数器和过多的上下文之间切换虚拟处理器将导致每个虚拟机的性能不佳。</span><span class="sxs-lookup"><span data-stu-id="d790b-202">In this case, each virtual processor will report a low utilization as measured by the “\Processor(\*)\\% Processor Time” performance monitor counter (relative to the level it expects) and the excessive context switching between the virtual processors will result in poor performance for each virtual machine.</span></span> <span data-ttu-id="d790b-203">在此方案中，请考虑减少分配给主机操作系统上的 HYPER-V 虚拟机的虚拟处理器数。HYPER-V 提供了虚拟机监控程序要监视的逻辑和虚拟处理器的性能的性能对象。</span><span class="sxs-lookup"><span data-stu-id="d790b-203">In this scenario, consider reducing the number of virtual processors allocated to Hyper-V virtual machines on the host operating system.Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="d790b-204">逻辑处理器与关联直接的处理器或物理计算机安装的内核数。</span><span class="sxs-lookup"><span data-stu-id="d790b-204">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="d790b-205">例如，在物理计算机上安装 2 个四核处理器将关联到 8 个逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-205">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="d790b-206">虚拟处理器是虚拟机实际使用的内容，并在虚拟处理器根和子分区中的所有执行都发生。</span><span class="sxs-lookup"><span data-stu-id="d790b-206">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  
  
     <span data-ttu-id="d790b-207">HYPER-V 提供了虚拟机监控程序要监视的逻辑和虚拟处理器的性能的性能对象。</span><span class="sxs-lookup"><span data-stu-id="d790b-207">Hyper-V provides hypervisor performance objects to monitor the performance of both logical and virtual processors.</span></span> <span data-ttu-id="d790b-208">逻辑处理器与关联直接的处理器或物理计算机安装的内核数。</span><span class="sxs-lookup"><span data-stu-id="d790b-208">A logical processor correlates directly to the number of processors or cores that are installed on the physical computer.</span></span> <span data-ttu-id="d790b-209">例如，在物理计算机上安装 2 个四核处理器将关联到 8 个逻辑处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-209">For example, 2 quad core processors installed on the physical computer would correlate to 8 logical processors.</span></span> <span data-ttu-id="d790b-210">虚拟处理器是虚拟机实际使用的内容，并在虚拟处理器根和子分区中的所有执行都发生。</span><span class="sxs-lookup"><span data-stu-id="d790b-210">Virtual processors are what the virtual machines actually use, and all execution in the root and child partitions occurs in virtual processors.</span></span>  
  
     <span data-ttu-id="d790b-211">若要准确测量来宾操作系统的处理器使用率，请使用"逻辑 processor （_total HYPER-V 虚拟机监控程序） %总运行时间"HYPER-V 主机操作系统上的性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="d790b-211">To accurately measure the processor utilization of a guest operating system, use the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter on the Hyper-V host operating system.</span></span> <span data-ttu-id="d790b-212">使用以下阈值来评估来宾操作系统系统处理器使用率使用"逻辑 processor （_total HYPER-V 虚拟机监控程序） %总运行时间"性能监视器计数器：</span><span class="sxs-lookup"><span data-stu-id="d790b-212">Use the following thresholds to evaluate guest operating system processor utilization using the “Hyper-V Hypervisor Logical Processor(_Total)% Total Run Time” performance monitor counter:</span></span>  
  
    -   <span data-ttu-id="d790b-213">使用小于 60%= 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-213">Less than 60% consumed = Healthy</span></span>  
  
    -   <span data-ttu-id="d790b-214">60%-89%使用 = 监视器或警告</span><span class="sxs-lookup"><span data-stu-id="d790b-214">60% - 89% consumed = Monitor or Caution</span></span>  
  
    -   <span data-ttu-id="d790b-215">90%-100%使用 = 严重，性能将会受到不利影响</span><span class="sxs-lookup"><span data-stu-id="d790b-215">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  
  
     <span data-ttu-id="d790b-216">若要解决处理器的 HYPER-V 环境上的来宾操作系统的性能，最好是为主机操作系统所报告的值之间的平衡努力"\Hyper-V 虚拟机监控程序逻辑 processor （_total)\\%total 运行时间"(LPTR) 和"虚拟 processor （_total \Hyper-V 虚拟机监控程序)\\%总运行时间"(VPTR)。</span><span class="sxs-lookup"><span data-stu-id="d790b-216">To troubleshoot processor performance of guest operating systems on a Hyper-V environment, it is best to strive for a balance between the values reported by the host operating system for “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” (LPTR) and “\Hyper-V Hypervisor Virtual Processor(_Total)\\% Total Run Time” (VPTR).</span></span> <span data-ttu-id="d790b-217">如果 LPTR 是高还是低 VPTR 然后验证是否不超过物理计算机上以物理方式可分配给虚拟机的多个处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-217">If LPTR is high and VPTR is low then verify that there are not more processors allocated to virtual machines than are physically available on the physical computer.</span></span> <span data-ttu-id="d790b-218">使用"虚拟机监控程序虚拟 Processor(*) \Hyper-V\\来宾运行时间百分比"计数器，来确定哪些虚拟处理器占用 CPU 和取消分配虚拟处理器的虚拟机作为适当配置的一对一映射到逻辑处理器的虚拟处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-218">Use the “\Hyper-V Hypervisor Virtual Processor(*)\\%Guest Run Time” counters to determine which virtual Processors are consuming CPU and de-allocate virtual processors from virtual machines as appropriate to configure a one to one mapping of virtual processors to logical processors.</span></span> <span data-ttu-id="d790b-219">有关配置虚拟处理器到逻辑处理器的一对一映射的详细信息，请参阅中的"优化处理器性能"部分[清单： HYPER-V 上优化性能](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md)。</span><span class="sxs-lookup"><span data-stu-id="d790b-219">For more information about configuring a one to one mapping of virtual processors to logical processors, see the “Optimizing Processor Performance” section in [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span> <span data-ttu-id="d790b-220">如果 VPTR 是高还是低 LPTR 请考虑分配到虚拟机的其他处理器，如果有可用的逻辑处理器和其他处理器支持的来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="d790b-220">If VPTR is high and LPTR is low then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="d790b-221">在其中 VPTR 是高的情况下，LPTR 较低，有可用的逻辑处理器分配，但其他处理器不支持来宾操作系统，请考虑通过将其他虚拟机添加到物理计算机向外扩展和分配到这些虚拟机可用的处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-221">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="d790b-222">VPTR 和 LPTR 都很高的情况下，配置推送限制的物理计算机并且应考虑通过将另一台物理计算机和其他 HYPER-V 虚拟机添加到环境向外扩展。</span><span class="sxs-lookup"><span data-stu-id="d790b-222">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="d790b-223">下面的流程图描述了在 HYPER-V 环境中的处理器性能进行故障排除时应使用的过程。</span><span class="sxs-lookup"><span data-stu-id="d790b-223">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  
  
     <span data-ttu-id="d790b-224">如果 VPTR 很高且 LPTR 较低，请考虑分配到虚拟机的其他处理器，如果有可用的逻辑处理器和其他处理器支持的来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="d790b-224">If VPTR is high and LPTR is low, then consider allocating additional processors to virtual machines if there are available logical processors and if additional processors are supported by the guest operating system.</span></span> <span data-ttu-id="d790b-225">在其中 VPTR 是高的情况下，LPTR 较低，有可用的逻辑处理器分配，但其他处理器不支持来宾操作系统，请考虑通过将其他虚拟机添加到物理计算机向外扩展和分配到这些虚拟机可用的处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-225">In the case where VPTR is high, LPTR is low, there are available logical processors to allocate, but additional processors are not supported by the guest operating system, consider scaling out by adding additional virtual machines to the physical computer and allocating available processors to these virtual machines.</span></span> <span data-ttu-id="d790b-226">VPTR 和 LPTR 都很高的情况下，配置推送限制的物理计算机并且应考虑通过将另一台物理计算机和其他 HYPER-V 虚拟机添加到环境向外扩展。</span><span class="sxs-lookup"><span data-stu-id="d790b-226">In the case where both VPTR and LPTR are high, the configuration is pushing the limits of the physical computer and should consider scaling out by adding another physical computer and additional Hyper-V virtual machines to the environment.</span></span> <span data-ttu-id="d790b-227">下面的流程图描述了在 HYPER-V 环境中的处理器性能进行故障排除时应使用的过程。</span><span class="sxs-lookup"><span data-stu-id="d790b-227">The flowchart below describes the process that should be used when troubleshooting processor performance in a Hyper-V environment.</span></span>  
  
     <span data-ttu-id="d790b-228">![故障排除超的 CPU 性能和 #45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span><span class="sxs-lookup"><span data-stu-id="d790b-228">![Troubleshooting CPU Performance on Hyper&#45;V](../technical-guides/media/623fdcd6-e80b-4ba9-bf46-5d9b92b6612b.gif "623fdcd6-e80b-4ba9-bf46-5d9b92b6612b")</span></span>  
<span data-ttu-id="d790b-229">在 HYPER-V 环境中的故障排除 CPU 性能</span><span class="sxs-lookup"><span data-stu-id="d790b-229">Troubleshooting CPU performance in a Hyper-V Environment</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="d790b-230">**来宾操作系统处理器没有物理处理器/内核数设置相关性**– 虚拟机监控程序确定如何物理资源使用。</span><span class="sxs-lookup"><span data-stu-id="d790b-230">**Guest operating system processors do not have a set affinity to physical processors/cores** – The hypervisor determines how physical resources are used.</span></span> <span data-ttu-id="d790b-231">在处理器使用率的情况下虚拟机监控程序会安排对的线程窗体中的物理处理器的来宾处理器时间。</span><span class="sxs-lookup"><span data-stu-id="d790b-231">In the case of processor utilization, the hypervisor schedules the guest processor time to physical processor in the form of threads.</span></span> <span data-ttu-id="d790b-232">这意味着在处理器负荷的虚拟机将分布在物理计算机的处理器。</span><span class="sxs-lookup"><span data-stu-id="d790b-232">This means the processor load of virtual machines will be spread across the processors of the physical computer.</span></span> <span data-ttu-id="d790b-233">此外，虚拟机不能超过配置的逻辑处理器，例如，如果单个虚拟机配置为在一台具有 8 处理器内核，物理计算机上运行带有 2 个逻辑处理器数的处理器使用率则虚拟机不能超过配置的逻辑处理器 （在本例中 2 处理器） 数的处理器容量。</span><span class="sxs-lookup"><span data-stu-id="d790b-233">Furthermore, virtual machines cannot exceed the processor utilization of the configured number of logical processors, for example if a single virtual machine is configured to run with 2 logical processors on a physical computer with 8 processors/cores, then the virtual machine cannot exceed the processor capacity of the number of configured logical processors (in this case 2 processors).</span></span>  
  
-   <span data-ttu-id="d790b-234">**测量总体的处理器使用率的 HYPER-V 环境中使用 HYPER-V 性能监视计数器-**对于测量处理器使用率，主机操作系统逻辑上查看作为另一个来宾操作系统.</span><span class="sxs-lookup"><span data-stu-id="d790b-234">**Measure overall processor utilization of the Hyper-V environment using Hyper-V performance monitor counters -** For purposes of measuring processor utilization, the host operating system is logically viewed as just another guest operating system.</span></span> <span data-ttu-id="d790b-235">因此，"\Processor(*)\\%Processor Time"监视器计数器可测量的主机操作系统仅处理器使用率。</span><span class="sxs-lookup"><span data-stu-id="d790b-235">Therefore, the “\Processor(*)\\% Processor Time” monitor counter measures the processor utilization of the host operating system only.</span></span> <span data-ttu-id="d790b-236">若要测量总的物理处理器使用率的主机操作系统和所有来宾操作系统，请使用"虚拟机监控程序逻辑 processor （_total) \Hyper-V\\%total 运行时间"性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="d790b-236">To measure total physical processor utilization of the host operating system and all guest operating systems, use the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter.</span></span> <span data-ttu-id="d790b-237">此计数器测量所用的运行这两个主机操作系统的处理器时间的总百分比和所有来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="d790b-237">This counter measures the total percentage of time spent by the processor running the both the host operating system and all guest operating systems.</span></span>  
  
     <span data-ttu-id="d790b-238">使用以下阈值来评估的 HYPER-V 环境使用的总体处理器利用率"\Hyper-V 虚拟机监控程序逻辑 processor （_total)\\%总运行时间"性能监视器计数器：</span><span class="sxs-lookup"><span data-stu-id="d790b-238">Use the following thresholds to evaluate overall processor utilization of the Hyper-V environment using the “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” performance monitor counter:</span></span>  
  
    -   <span data-ttu-id="d790b-239">使用小于 60%= 正常</span><span class="sxs-lookup"><span data-stu-id="d790b-239">Less than 60% consumed = Healthy</span></span>  
  
    -   <span data-ttu-id="d790b-240">60%-89%使用 = 监视器或警告</span><span class="sxs-lookup"><span data-stu-id="d790b-240">60% - 89% consumed = Monitor or Caution</span></span>  
  
    -   <span data-ttu-id="d790b-241">90%-100%使用 = 严重，性能将会受到不利影响</span><span class="sxs-lookup"><span data-stu-id="d790b-241">90% - 100% consumed = Critical, performance will be adversely affected</span></span>  
  
     <span data-ttu-id="d790b-242">有关处理器使用率详细信息中，查看以下资源：</span><span class="sxs-lookup"><span data-stu-id="d790b-242">For more information about processor utilization review the following resources:</span></span>  
  
    -   <span data-ttu-id="d790b-243">"如何： 标识导致高用户模式 CPU 瓶颈的出现针对服务器应用程序在生产环境中的函数"在[http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047)。</span><span class="sxs-lookup"><span data-stu-id="d790b-243">“How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” at [http://go.microsoft.com/fwlink/?LinkID=107047](http://go.microsoft.com/fwlink/?LinkID=107047).</span></span>  
  
    -   <span data-ttu-id="d790b-244">在的"章 15-测量.NET 应用程序性能" [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073)。</span><span class="sxs-lookup"><span data-stu-id="d790b-244">“Chapter 15 - Measuring .NET Application Performance” at [http://go.microsoft.com/fwlink/?LinkId=121073](http://go.microsoft.com/fwlink/?LinkId=121073).</span></span>