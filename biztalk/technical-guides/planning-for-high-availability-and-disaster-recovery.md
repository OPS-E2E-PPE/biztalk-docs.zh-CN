---
title: "规划高可用性和灾难恢复 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a7efba36-6d9c-4ae0-a4f5-893eb5d62a05
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 742073de6f0e992e5fd0155b1939f0680fa7b3bc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="planning-for-high-availability-and-disaster-recovery"></a><span data-ttu-id="0eda6-102">规划高可用性和灾难恢复</span><span class="sxs-lookup"><span data-stu-id="0eda6-102">Planning for High Availability and Disaster Recovery</span></span>
<span data-ttu-id="0eda6-103">使用开发的解决方案[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通常是执行关键任务的企业级应用程序需要最高的可用性。</span><span class="sxs-lookup"><span data-stu-id="0eda6-103">Solutions developed with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are often mission-critical enterprise-level applications that require maximum availability.</span></span> <span data-ttu-id="0eda6-104">这些解决方案都放到生产环境后，可以用每秒千美元估算停机时间与关联的成本。</span><span class="sxs-lookup"><span data-stu-id="0eda6-104">When these solutions are placed into production, costs associated with downtime can be measured in thousands of dollars per second.</span></span> <span data-ttu-id="0eda6-105">为此，你应采用的特定策略，以便最大化的高可用性和灾难恢复功能附带[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]依赖软件和支持所需的硬件[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]解决方案。</span><span class="sxs-lookup"><span data-stu-id="0eda6-105">For this reason, you should employ specific strategies to maximize the high availability and disaster recovery capabilities that are available with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and the dependency software and hardware required to support a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution.</span></span>  
  
## <a name="hardware-considerations"></a><span data-ttu-id="0eda6-106">硬件考虑事项</span><span class="sxs-lookup"><span data-stu-id="0eda6-106">Hardware Considerations</span></span>  
 <span data-ttu-id="0eda6-107">若要确保高可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境中，硬件规划时考虑以下方面：</span><span class="sxs-lookup"><span data-stu-id="0eda6-107">To ensure high availability for a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment, consider the following when planning for hardware:</span></span>  
  
-   <span data-ttu-id="0eda6-108">规划在 BizTalk 组，以容纳跨组中的 BizTalk 服务器运行多个 BizTalk 主机实例中运行多个 （至少两个） BizTalk 服务器。</span><span class="sxs-lookup"><span data-stu-id="0eda6-108">Plan on running multiple (at least two) BizTalk servers in a BizTalk group to accommodate running multiple instances of BizTalk Hosts across the BizTalk servers in the group.</span></span> <span data-ttu-id="0eda6-109">这将容纳主机实例中运行的进程的负载平衡和故障的容错。</span><span class="sxs-lookup"><span data-stu-id="0eda6-109">This will accommodate load balancing and fault tolerance of processes running in the host instances.</span></span>  
  
-   <span data-ttu-id="0eda6-110">请考虑实施存储区域网络 (SAN) 到内部[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="0eda6-110">Consider implementing a storage area network (SAN) to house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="0eda6-111">SAN 磁盘应配置使用 RAID 1 + 0 （带区的镜像集） 如有可能的拓扑最高的性能和高可用性。</span><span class="sxs-lookup"><span data-stu-id="0eda6-111">The SAN disks should be configured using RAID 1+0 (a stripe of mirror sets) topology if possible for maximum performance and high availability.</span></span> <span data-ttu-id="0eda6-112">有关发现家中使用 SAN 的详细信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库，请参阅[BizTalk Server 数据库优化白皮书](http://go.microsoft.com/fwlink/?LinkID=101578)(http://go.microsoft.com/fwlink/?LinkID=101578)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-112">For more information about using a SAN to house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, see the [BizTalk Server Database Optimization white paper](http://go.microsoft.com/fwlink/?LinkID=101578) (http://go.microsoft.com/fwlink/?LinkID=101578).</span></span>  
  
-   <span data-ttu-id="0eda6-113">计划安装多个 SQL server 以容纳[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="0eda6-113">Plan on installing multiple SQL servers to house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="0eda6-114">多个 SQL server 所需的[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]群集 （推荐） 和/或外壳某些[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上单独的物理数据库[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]（也建议使用） 的实例。</span><span class="sxs-lookup"><span data-stu-id="0eda6-114">Multiple SQL servers are required for [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] clustering (recommended) and/or housing certain [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases on separate physical [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances (also recommended).</span></span>  
  
-   <span data-ttu-id="0eda6-115">请考虑使用虚拟环境来控制硬件成本。</span><span class="sxs-lookup"><span data-stu-id="0eda6-115">Consider using a virtual environment to control the hardware costs.</span></span> <span data-ttu-id="0eda6-116">Microsoft 提供了一系列如 Microsoft Virtual Server 2005 R2、 Windows Server 2008 HYPER-V 和 Microsoft HYPER-V Server 2008 的虚拟化产品。</span><span class="sxs-lookup"><span data-stu-id="0eda6-116">Microsoft offers a range of virtualization products such as Microsoft Virtual Server 2005 R2, Windows Server 2008 Hyper-V, and Microsoft Hyper-V Server 2008.</span></span> <span data-ttu-id="0eda6-117">有关使用建议[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]在虚拟环境中，请参阅[BizTalk Server 2009 HYPER-V 指南](http://go.microsoft.com/fwlink/?LinkId=151834)(http://go.microsoft.com/fwlink/?LinkId=151834)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-117">For recommendations on using [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a virtual environment, see [BizTalk Server 2009 Hyper-V Guide](http://go.microsoft.com/fwlink/?LinkId=151834) (http://go.microsoft.com/fwlink/?LinkId=151834).</span></span>  
  
-   <span data-ttu-id="0eda6-118">规划在要提供与 Internet 相关服务为你的组织的外围网络域中安装一个或多个 Windows 服务器。</span><span class="sxs-lookup"><span data-stu-id="0eda6-118">Plan on installing one or more Windows servers in a perimeter network domain to provide Internet-related services for your organization.</span></span> <span data-ttu-id="0eda6-119">配置外围网络域使用的网络负载平衡 (NLB) 解决方案中的多个 Windows 服务器。</span><span class="sxs-lookup"><span data-stu-id="0eda6-119">Configure multiple Windows servers in the perimeter network domain using a network load balancing (NLB) solution.</span></span> <span data-ttu-id="0eda6-120">有关详细信息，请参阅[网络负载平衡部署指南](http://go.microsoft.com/fwlink/?LinkId=153139)(http://go.microsoft.com/fwlink/?LinkId=153139)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-120">For more information, see [Network Load Balancing Deployment Guide](http://go.microsoft.com/fwlink/?LinkId=153139) (http://go.microsoft.com/fwlink/?LinkId=153139).</span></span>  
  
     <span data-ttu-id="0eda6-121">在外围网络中安装服务器的详细信息，请参阅[配置你域时公开传输到 Internet](../technical-guides/planning-for-sending-and-receiving.md#BKMK_InternetTrans)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-121">For more information about installing servers in a perimeter network, see [Configuring Your Domain When Exposing Transports to the Internet](../technical-guides/planning-for-sending-and-receiving.md#BKMK_InternetTrans).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="0eda6-122">外围网络是也称为 DMZ、 外围安全区域和外围子网。</span><span class="sxs-lookup"><span data-stu-id="0eda6-122">A perimeter network is also known as a DMZ, demilitarized zone, and screened subnet.</span></span>  
  
## <a name="software-considerations"></a><span data-ttu-id="0eda6-123">软件注意事项</span><span class="sxs-lookup"><span data-stu-id="0eda6-123">Software Considerations</span></span>  
 <span data-ttu-id="0eda6-124">若要确保高可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境，请考虑以下规划软件时：</span><span class="sxs-lookup"><span data-stu-id="0eda6-124">To ensure high availability for a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment, consider the following when planning for software:</span></span>  
  
-   <span data-ttu-id="0eda6-125">请考虑在 Enterprise Edition 中的投资[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]以适应，会带来好处的 BizTalk 主机群集或从此运行多个 MessageBox 数据库受益的情况。</span><span class="sxs-lookup"><span data-stu-id="0eda6-125">Consider investing in the Enterprise Edition of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to accommodate scenarios that would benefit from clustering of BizTalk Hosts or that would benefit from running multiple MessageBox databases.</span></span> <span data-ttu-id="0eda6-126">通常情况下，你应群集 BizTalk 主机的唯一原因是某些 BizTalk 适配器提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="0eda6-126">Typically, the only reason that you should cluster a BizTalk Host would be to provide high availability for certain BizTalk adapters.</span></span> <span data-ttu-id="0eda6-127">有关为使用主机群集的 BizTalk 适配器提供高可用性的详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](http://go.microsoft.com/fwlink/?LinkID=151284)(http://go.microsoft.com/fwlink/?LinkID=151284)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-127">For more information about providing high availability for BizTalk adapters using host clustering, see [Considerations for Running Adapter Handlers within a Clustered Host](http://go.microsoft.com/fwlink/?LinkID=151284) (http://go.microsoft.com/fwlink/?LinkID=151284).</span></span>  
  
-   <span data-ttu-id="0eda6-128">实现 Windows Server 群集到内部计划[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库和企业单一登录的主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="0eda6-128">Plan on implementing a Windows Server cluster to house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and the Enterprise Single Sign-On master secret server.</span></span> <span data-ttu-id="0eda6-129">有关更多有关使用 Windows Server 群集的信息以提供高可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库和企业单一登录主密钥服务器，请参阅[数据库的高可用性](../technical-guides/high-availability-for-databases.md)和[主密钥服务器的高可用性](../technical-guides/high-availability-for-the-master-secret-server.md)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-129">For more information about using Windows Server cluster to provide high availability for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and the Enterprise Single Sign-On master secret server, see [High Availability for Databases](../technical-guides/high-availability-for-databases.md) and [High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md).</span></span>  
  
## <a name="high-availability-vs-disaster-recovery"></a><span data-ttu-id="0eda6-130">高可用性 vs。灾难恢复</span><span class="sxs-lookup"><span data-stu-id="0eda6-130">High Availability vs. Disaster Recovery</span></span>  
 <span data-ttu-id="0eda6-131">有两个规定的方法来提高可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境： 提供使用容错能力和/或负载平衡，或提供使用灾难恢复的提高的可用性的高可用性。</span><span class="sxs-lookup"><span data-stu-id="0eda6-131">There are two prescribed methods for increasing availability for a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment: providing high availability using fault tolerance and/or load balancing, or providing increased availability using disaster recovery.</span></span> <span data-ttu-id="0eda6-132">虽然每个方法会增加可用性，它们的主要区别是该容错能力，并且/或者负载平衡通常提供比灾难恢复速度快得多的恢复时间。</span><span class="sxs-lookup"><span data-stu-id="0eda6-132">While each method increases availability, a key difference between them is that fault tolerance and/or load balancing typically provide much faster recovery time than disaster recovery.</span></span> <span data-ttu-id="0eda6-133">容错能力和/或负载平衡提供**高可用性**而灾难恢复提供了**提高了可用性**。</span><span class="sxs-lookup"><span data-stu-id="0eda6-133">Fault tolerance and/or load balancing provide **high availability** whereas disaster recovery provides **increased availability**.</span></span> <span data-ttu-id="0eda6-134">有关实现灾难恢复的详细信息，请参阅[清单： 增加可用性与灾难恢复](../technical-guides/checklist-increasing-availability-with-disaster-recovery.md)和[灾难恢复](../technical-guides/disaster-recovery.md)。</span><span class="sxs-lookup"><span data-stu-id="0eda6-134">For more information about implementing disaster recovery, see [Checklist: Increasing Availability with Disaster Recovery](../technical-guides/checklist-increasing-availability-with-disaster-recovery.md) and [Disaster Recovery](../technical-guides/disaster-recovery.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0eda6-135">另请参阅</span><span class="sxs-lookup"><span data-stu-id="0eda6-135">See Also</span></span>  
 <span data-ttu-id="0eda6-136">[BizTalk Server 用于提高可用性](../technical-guides/increasing-availability-for-biztalk-server.md) </span><span class="sxs-lookup"><span data-stu-id="0eda6-136">[Increasing Availability for BizTalk Server](../technical-guides/increasing-availability-for-biztalk-server.md) </span></span>  
 [<span data-ttu-id="0eda6-137">清单： 会提供高可用性容错或负载平衡</span><span class="sxs-lookup"><span data-stu-id="0eda6-137">Checklist: Providing High Availability with Fault Tolerance or Load Balancing</span></span>](../technical-guides/checklist-providing-high-availability-with-fault-tolerance-or-load-balancing.md)