---
title: "清单： 配置 SQL Server |Microsoft 文档"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: edd20f24-8a72-40b7-abee-81fbd3ceefda
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce0eff1dab6afe81c55f4cffa08c4839762e82ea
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="checklist-configuring-sql-server"></a><span data-ttu-id="8f488-102">清单： 配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8f488-102">Checklist: Configuring SQL Server</span></span>
<span data-ttu-id="8f488-103">本主题列出时准备应遵循的步骤[!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]或[!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)]用于[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]生产环境。</span><span class="sxs-lookup"><span data-stu-id="8f488-103">This topic lists steps that you should follow when preparing [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] or [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)] for use in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environment.</span></span>  
  
-   [<span data-ttu-id="8f488-104">清单： 配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8f488-104">Checklist: Configuring SQL Server</span></span>](../technical-guides/checklist-configuring-sql-server.md)  
  
-   [<span data-ttu-id="8f488-105">执行 SQL Server 维护过程</span><span class="sxs-lookup"><span data-stu-id="8f488-105">Performing SQL Server Maintenance Procedures</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Maintain)  
  
-   [<span data-ttu-id="8f488-106">备份 BizTalk Server 数据库</span><span class="sxs-lookup"><span data-stu-id="8f488-106">Backing Up the BizTalk Server Databases</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Backup)  
  
-   [<span data-ttu-id="8f488-107">使用 SQL Server 日志传送以实现灾难恢复</span><span class="sxs-lookup"><span data-stu-id="8f488-107">Using SQL Server Log Shipping For Disaster Recovery</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Disaster)  
  
-   [<span data-ttu-id="8f488-108">监视 BizTalk Server SQL 代理作业</span><span class="sxs-lookup"><span data-stu-id="8f488-108">Monitoring BizTalk Server SQL Agent Jobs</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Jobs)  
  
-   [<span data-ttu-id="8f488-109">清除和存档跟踪数据</span><span class="sxs-lookup"><span data-stu-id="8f488-109">Purging and Archiving Tracking Data</span></span>](../technical-guides/checklist-configuring-sql-server.md#BKMK_Purge)  
  
<a name="BKMK_Config"></a>   
## <a name="configuring-sql-server"></a><span data-ttu-id="8f488-110">配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="8f488-110">Configuring SQL Server</span></span>  
  
|<span data-ttu-id="8f488-111">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-111">Steps</span></span>|<span data-ttu-id="8f488-112">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-112">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-113">监视和减少[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库文件磁盘 I/O 争用。</span><span class="sxs-lookup"><span data-stu-id="8f488-113">Monitor and reduce [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database files disk I/O contention.</span></span>|<span data-ttu-id="8f488-114">-我们建议你主动监视可存放的数据和事务日志文件的磁盘的磁盘 I/O 使用情况。</span><span class="sxs-lookup"><span data-stu-id="8f488-114">-   We recommend that you proactively monitor the disk I/O usage for the disks that house the data and transaction log files.</span></span><br /><span data-ttu-id="8f488-115">-我们建议，数据文件和事务日志文件的每个放置在专用的驱动器，以减少磁盘 I/O 争用成为问题的可能性。</span><span class="sxs-lookup"><span data-stu-id="8f488-115">-   We recommend that the data files and transaction log files for each of these be placed on dedicated drives to reduce the likelihood of disk I/O contention becoming a problem.</span></span><br /><span data-ttu-id="8f488-116">-你可以减少磁盘 I/O 争用，通过将分离的 MessageBox 和跟踪 (DTA) 的数据库，并且通过将数据库文件和事务日志文件在不同的物理磁盘上分离。</span><span class="sxs-lookup"><span data-stu-id="8f488-116">-   You can reduce disk I/O contention by separating the MessageBox and Tracking (DTA) databases, and by separating the database files and transaction log files on different physical disks.</span></span><br /><br /> <span data-ttu-id="8f488-117">有关详细信息，请参阅[监视和减少数据库 IO 争用](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-117">For more information, see [Monitoring and Reducing Database IO Contention](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)</span></span>|  
|<span data-ttu-id="8f488-118">确保[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]正确对齐的磁盘分区上配置</span><span class="sxs-lookup"><span data-stu-id="8f488-118">Ensure [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] is configured on properly-aligned disk partitions</span></span>|<span data-ttu-id="8f488-119">正确对齐的磁盘分区可能会导致显著降低延迟，从而提高[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]性能，这反过来提高[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能。</span><span class="sxs-lookup"><span data-stu-id="8f488-119">Properly aligned disk partitions could result in significant decrease in latency thereby improving the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] performance, which in turn enhances [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span> <span data-ttu-id="8f488-120">相反，非对齐的磁盘分区可能造成负面影响输入/输出性能，从而降低[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能。</span><span class="sxs-lookup"><span data-stu-id="8f488-120">On the contrary, nonaligned disk partitions can negatively affect I/O performance, thereby degrading the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span><br /><br /> <span data-ttu-id="8f488-121">有关如何正确对齐的磁盘分区的详细信息会产生积极影响性能，请参阅["磁盘分区对齐最佳实践 for SQL Server"](http://go.microsoft.com/fwlink/?LinkId=154073) (http://go.microsoft.com/fwlink/?LinkId=154073)。</span><span class="sxs-lookup"><span data-stu-id="8f488-121">For more information about how properly aligned disk partitions can positively affect performance, see ["Disk Partition Alignment Best Practices for SQL Server”](http://go.microsoft.com/fwlink/?LinkId=154073) (http://go.microsoft.com/fwlink/?LinkId=154073).</span></span>|  
|<span data-ttu-id="8f488-122">让您使用 SQL Server 事件探查器来监视事件</span><span class="sxs-lookup"><span data-stu-id="8f488-122">Keep the events you monitor with the SQL Server Profiler</span></span>|<span data-ttu-id="8f488-123">使用 SQL Server 事件探查器监视感兴趣的事件。</span><span class="sxs-lookup"><span data-stu-id="8f488-123">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="8f488-124">如果跟踪变得太大，你可以筛选基于所需的信息，以便收集事件数据的一个子集。</span><span class="sxs-lookup"><span data-stu-id="8f488-124">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="8f488-125">监视过多事件会增加服务器和监视进程的开销，并且可能导致跟踪文件或跟踪表变得很大，尤其是当监视进程持续很长时间时。</span><span class="sxs-lookup"><span data-stu-id="8f488-125">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>|  
|<span data-ttu-id="8f488-126">监视和减少 DTC 日志文件磁盘 I/O 争用。</span><span class="sxs-lookup"><span data-stu-id="8f488-126">Monitor and reduce DTC log file disk I/O contention.</span></span>|[<span data-ttu-id="8f488-127">监视和减少 DTC 日志文件磁盘 IO 争用</span><span class="sxs-lookup"><span data-stu-id="8f488-127">Monitoring and Reducing DTC Log File Disk IO Contention</span></span>](~/technical-guides/monitoring-and-reducing-dtc-log-file-disk-i-o-contention.md)|  
|<span data-ttu-id="8f488-128">提供的高可用性[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="8f488-128">Provide high availability for the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases.</span></span>|[<span data-ttu-id="8f488-129">数据库可用性规划</span><span class="sxs-lookup"><span data-stu-id="8f488-129">Planning for Database Availability</span></span>](~/technical-guides/planning-for-database-availability.md)|  
|<span data-ttu-id="8f488-130">查看故障转移方案的主动/主动 SQL Server 群集配置。</span><span class="sxs-lookup"><span data-stu-id="8f488-130">Review active/active SQL Server cluster configuration for failover scenarios.</span></span>|[<span data-ttu-id="8f488-131">查看和测试故障转移方案的 SQL Server 群集配置</span><span class="sxs-lookup"><span data-stu-id="8f488-131">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](~/technical-guides/reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)|  
|<span data-ttu-id="8f488-132">使用默认配置设置：</span><span class="sxs-lookup"><span data-stu-id="8f488-132">Use default configuration settings for:</span></span><br /><br /> <span data-ttu-id="8f488-133">-最大值 Degree of Parallelism (MDOP)。</span><span class="sxs-lookup"><span data-stu-id="8f488-133">-   Max Degree of Parallelism (MDOP).</span></span><br /><span data-ttu-id="8f488-134">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]上的统计信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="8f488-134">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] statistics on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database.</span></span><br /><span data-ttu-id="8f488-135">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]数据库索引重新生成和碎片整理。</span><span class="sxs-lookup"><span data-stu-id="8f488-135">-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database index rebuilds and defragmentation.</span></span>|[<span data-ttu-id="8f488-136">不应更改的 SQL Server 设置</span><span class="sxs-lookup"><span data-stu-id="8f488-136">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)|  
|<span data-ttu-id="8f488-137">启用跟踪标志 1118 (TF1118) 的所有实例的启动参数[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8f488-137">Enable trace flag 1118 (TF1118) as a startup parameter for all instances of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>|<span data-ttu-id="8f488-138">实现 TF1118 有助于减少争用跨[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]通过删除几乎所有单个页分配的实例。</span><span class="sxs-lookup"><span data-stu-id="8f488-138">Implementing TF1118 helps reduce contention across the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances by removing almost all single page allocations.</span></span> <span data-ttu-id="8f488-139">详细信息，请参阅 Microsoft 知识库文章 328551， ["并发增强功能的 tempdb 数据库"](http://go.microsoft.com/fwlink/?LinkId=153694) (http://go.microsoft.com/fwlink/?LinkId=153694)。</span><span class="sxs-lookup"><span data-stu-id="8f488-139">For more information see Microsoft Knowledge Base article 328551, ["Concurrency enhancements for the tempdb database"](http://go.microsoft.com/fwlink/?LinkId=153694) (http://go.microsoft.com/fwlink/?LinkId=153694).</span></span> <span data-ttu-id="8f488-140">**注意：** TF1118，请参阅有关详细信息["误解围绕 TF1118"](http://go.microsoft.com/fwlink/?LinkId=158271) (http://go.microsoft.com/fwlink/?LinkId=158271)。</span><span class="sxs-lookup"><span data-stu-id="8f488-140">**Note:**  For more information about TF1118 see [“Misconceptions around TF1118”](http://go.microsoft.com/fwlink/?LinkId=158271) (http://go.microsoft.com/fwlink/?LinkId=158271).</span></span> <span data-ttu-id="8f488-141">请注意，在以下链接的内容不由 Microsoft 拥有，Microsoft 不保证内容的准确性。</span><span class="sxs-lookup"><span data-stu-id="8f488-141">Note that the content at this link is not owned by Microsoft and Microsoft does not guarantee the accuracy of the content.</span></span>|  
|<span data-ttu-id="8f488-142">将 tempdb 数据库拆分为多个大小相等的每个上的数据文件[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]使用实例[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8f488-142">Split the tempdb database into multiple data files of equal size on each [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance used by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>|<span data-ttu-id="8f488-143">确保用于 tempdb 数据文件的大小相等。</span><span class="sxs-lookup"><span data-stu-id="8f488-143">Ensure that the data files used for the tempdb are of equal size.</span></span> <span data-ttu-id="8f488-144">这是关键的因为按比例填充算法由[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]取决于数据文件的大小。</span><span class="sxs-lookup"><span data-stu-id="8f488-144">This is critical because the proportional fill algorithm used by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] is based on the size of the data files.</span></span> <span data-ttu-id="8f488-145">如果数据文件创建不相等的大小，按比例填充算法将使用全局分配映射 (GAM) 分配，而无需分配所有的文件，从而与将创建多个的目的之间分配更多的最大文件数据文件。</span><span class="sxs-lookup"><span data-stu-id="8f488-145">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for Global Allocation Map (GAM) allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="8f488-146">作为一般原则是，为每个 CPU 的服务器上创建一个数据文件，然后调整根据需要向上或向下文件数。</span><span class="sxs-lookup"><span data-stu-id="8f488-146">As a general guideline, create one data file for each CPU on the server and then adjust the number of files up or down as necessary.</span></span> <span data-ttu-id="8f488-147">请注意，双核心 CPU 将被视为两个 CPU。</span><span class="sxs-lookup"><span data-stu-id="8f488-147">Note that a dual-core CPU is considered to be two CPUs.</span></span> <span data-ttu-id="8f488-148">在任何情况下，数据文件数必须大于 8 无关多少个内核，以便在计算机上可用。</span><span class="sxs-lookup"><span data-stu-id="8f488-148">In any event, the number of data files must not be greater than 8 no matter how many additional cores are available on the computer.</span></span> <span data-ttu-id="8f488-149">有关 tempdb 文件的详细信息，请参阅[优化 tempdb 性能](http://go.microsoft.com/fwlink/?LinkId=158272)(http://go.microsoft.com/fwlink/?LinkId=158272) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文档。</span><span class="sxs-lookup"><span data-stu-id="8f488-149">For more information about tempdb files, see [Optimizing tempdb Performance](http://go.microsoft.com/fwlink/?LinkId=158272) (http://go.microsoft.com/fwlink/?LinkId=158272) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span>|  
|<span data-ttu-id="8f488-150">如果你正在运行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]承载位于运行的计算机上的数据库和[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]具有足够的物理内存配置的实例[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]使用地址窗口扩展 (AWE) 内存。</span><span class="sxs-lookup"><span data-stu-id="8f488-150">If you are running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and hosting your databases on computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] with sufficient physical memory, configure the instances of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] to use Address Windowing Extensions (AWE) memory.</span></span>|<span data-ttu-id="8f488-151">X86 计算机，[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]应配置为使用超过 2 GB 的物理内存。</span><span class="sxs-lookup"><span data-stu-id="8f488-151">On an x86 computer, [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] should be configured to use more than 2 GB of physical memory.</span></span> [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="8f488-152">包括对使用的 Microsoft Windows 地址窗口扩展 (AWE) 来解决最多 32 GB 的内存支持。</span><span class="sxs-lookup"><span data-stu-id="8f488-152"> includes support for the use of Microsoft Windows Address Windowing Extensions (AWE) to address up to 32 GB of memory.</span></span> <span data-ttu-id="8f488-153">使用 AWE，[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]可以保留未被其他应用程序和操作系统使用的内存。</span><span class="sxs-lookup"><span data-stu-id="8f488-153">With AWE, [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] can reserve memory that is not in use for other applications and the operating system.</span></span> <span data-ttu-id="8f488-154">但是，使用此内存中，每个实例必须以静态方式分配所需的内存。</span><span class="sxs-lookup"><span data-stu-id="8f488-154">Each instance that uses this memory, however, must statically allocate the memory it needs.</span></span> [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="8f488-155">只能使用此 AWE 分配内存，为数据缓存而不是可执行文件、 驱动程序、 Dll、 和等。</span><span class="sxs-lookup"><span data-stu-id="8f488-155"> can only use this AWE allocated memory for the data cache and not for executables, drivers, DLLs, and so forth.</span></span> <span data-ttu-id="8f488-156">有关详细信息，请参阅：</span><span class="sxs-lookup"><span data-stu-id="8f488-156">For more information, see:</span></span><br /><br /> <span data-ttu-id="8f488-157">Microsoft 知识库文章 274750， ["如何配置 SQL Server 以使用多个 2 GB 的物理内存"](http://go.microsoft.com/fwlink/?LinkId=153718) (http://go.microsoft.com/fwlink/?LinkId=153718)。</span><span class="sxs-lookup"><span data-stu-id="8f488-157">-   Microsoft Knowledge Base article 274750, ["How to configure SQL Server to use more than 2 GB of physical memory"](http://go.microsoft.com/fwlink/?LinkId=153718) (http://go.microsoft.com/fwlink/?LinkId=153718).</span></span><br /><span data-ttu-id="8f488-158">-   [使用 AWE](http://go.microsoft.com/fwlink/?LinkId=153720) (http://go.microsoft.com/fwlink/?LinkId=153720) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文档。</span><span class="sxs-lookup"><span data-stu-id="8f488-158">-   [Using AWE](http://go.microsoft.com/fwlink/?LinkId=153720) (http://go.microsoft.com/fwlink/?LinkId=153720) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span><br /><span data-ttu-id="8f488-159">-   [为 SQL Server 启用 AWE 内存](http://go.microsoft.com/fwlink/?LinkId=158273)(http://go.microsoft.com/fwlink/?LinkId=158273) 中[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]文档。</span><span class="sxs-lookup"><span data-stu-id="8f488-159">-   [Enabling AWE Memory for SQL Server](http://go.microsoft.com/fwlink/?LinkId=158273) (http://go.microsoft.com/fwlink/?LinkId=158273) in the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] documentation.</span></span>|  
|<span data-ttu-id="8f488-160">在上设置的相同值的最小值和最大服务器内存[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]instance(s) 该主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="8f488-160">Set the Minimum and Maximum Server memory to the same values on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>|<span data-ttu-id="8f488-161">运行的计算机[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]该主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库应将专用于运行[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8f488-161">The computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases should be dedicated to running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="8f488-162">当运行的计算机[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]该主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库**是**专用于运行[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]，我们建议的 min server memory 和最大服务器内存选项卡上的每个[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]实例将设置为指定的内存分配给固定的量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8f488-162">When the computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases **are** dedicated to running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)], we recommend that the 'min server memory' and 'max server memory' options on each [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance be set to specify the fixed amount of memory to allocate to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="8f488-163">在这种情况下，应将设置为 min server memory 和最大服务器内存为相同的值 （等于最大的 SQL Server 将使用的物理内存量）。</span><span class="sxs-lookup"><span data-stu-id="8f488-163">In this case, you should set the 'min server memory' and 'max server memory' to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="8f488-164">这将减少开销，否则将由使用[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]动态管理这些值。</span><span class="sxs-lookup"><span data-stu-id="8f488-164">This will reduce overhead that would otherwise be used by [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] dynamically managing these values.</span></span> <span data-ttu-id="8f488-165">运行每台计算机上，执行以下 T-SQL 命令[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]指定的内存分配给固定的量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="8f488-165">Execute the following T-SQL commands on each computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] to specify the fixed amount of memory to allocate to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]:</span></span><br /><br /> <span data-ttu-id="8f488-166">sp_configure ' 最大服务器内存 (MB)，（以 mb 为单位的最大大小） sp_configure 最小服务器内存 (MB)，（以 mb 为单位的最小大小）</span><span class="sxs-lookup"><span data-stu-id="8f488-166">sp_configure ‘Max Server memory (MB)’,(max size in MB)sp_configure ‘Min Server memory (MB)’,(min size in MB)</span></span><br /><br /> <span data-ttu-id="8f488-167">设置的内存量之前[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]，减去所需的总物理内存从 Windows Server 的内存来确定适当的内存设置。</span><span class="sxs-lookup"><span data-stu-id="8f488-167">Before you set the amount of memory for [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)], determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="8f488-168">这是最大可以为分配的内存量[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8f488-168">This is the maximum amount of memory you can assign to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="8f488-169">**注意：**如果运行的计算机[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]该主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库也承载企业单一登录主密钥，如主题所述[群集主密钥服务器](~/technical-guides/clustering-the-master-secret-server.md)然后你可能需要调整此值，以确保有足够的内存可用于运行企业单一登录服务。</span><span class="sxs-lookup"><span data-stu-id="8f488-169">**Note:**  If the computer(s) running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases also host the Enterprise Single Sign-On master secret as described in the topic [Clustering the Master Secret Server](~/technical-guides/clustering-the-master-secret-server.md) then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span>|  
|<span data-ttu-id="8f488-170">BizTalk 跟踪数据库的大小</span><span class="sxs-lookup"><span data-stu-id="8f488-170">Account for the size of BizTalk Tracking database</span></span>|<span data-ttu-id="8f488-171">-当确定 BizTalk 跟踪 (DTA) 数据库中的消息的大小，将添加消息上下文的平均大小到的消息大小如果一点很重要，相比的消息大小。</span><span class="sxs-lookup"><span data-stu-id="8f488-171">-   When determining the size of messages in the BizTalk Tracking (DTA) database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span><br /><span data-ttu-id="8f488-172">-若要限制 BizTalk 跟踪数据库中的消息的大小，则将提升的属性数目的限制。</span><span class="sxs-lookup"><span data-stu-id="8f488-172">-   To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span><br /><span data-ttu-id="8f488-173">-如果启用业务流程调试器选项，考虑到每个形状中业务流程的状态保存到 BizTalk 跟踪数据库中。</span><span class="sxs-lookup"><span data-stu-id="8f488-173">-   If the orchestration debugger option is enabled, take into account that the status of each shape in the orchestration is saved in the BizTalk Tracking database.</span></span>|  
  
<a name="BKMK_Maintain"></a>   
## <a name="performing-sql-server-maintenance-procedures"></a><span data-ttu-id="8f488-174">执行 SQL Server 维护过程</span><span class="sxs-lookup"><span data-stu-id="8f488-174">Performing SQL Server Maintenance Procedures</span></span>  
  
|<span data-ttu-id="8f488-175">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-175">Steps</span></span>|<span data-ttu-id="8f488-176">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-176">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-177">定义自动增长设置[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="8f488-177">Define auto-growth settings for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>|<span data-ttu-id="8f488-178">特别是对于 MessageBox 和跟踪数据库，数据库自动增长应设置为固定数量的兆字节为单位，而不是百分比。</span><span class="sxs-lookup"><span data-stu-id="8f488-178">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking databases.</span></span> <span data-ttu-id="8f488-179">根据你的 BizTalk Server 应用程序和吞吐量，MessageBox 和跟踪数据库可能会非常大。</span><span class="sxs-lookup"><span data-stu-id="8f488-179">Depending on your BizTalk Server application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="8f488-180">如果自动增长设置为百分比，则自动增长可能是非常高。</span><span class="sxs-lookup"><span data-stu-id="8f488-180">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="8f488-181">-即时文件初始化可以极大地降低文件增长操作的性能影响。</span><span class="sxs-lookup"><span data-stu-id="8f488-181">-   Instant file initialization can greatly reduce the performance impact of a file growth operation.</span></span><br /><span data-ttu-id="8f488-182">-理想情况下，支持的文件组的文件的大小应预分配，并且如果可能，请设置为静态大小。</span><span class="sxs-lookup"><span data-stu-id="8f488-182">-   Ideally, the size of files supporting the file groups should be pre-allocated, and if possible, set to a static size.</span></span><br /><br /> <span data-ttu-id="8f488-183">有关详细信息，请参阅[定义数据库的自动增长设置](~/technical-guides/defining-auto-growth-settings-for-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="8f488-183">For more information, see [Defining Auto-Growth Settings for Databases](~/technical-guides/defining-auto-growth-settings-for-databases.md).</span></span>|  
|<span data-ttu-id="8f488-184">备份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库</span><span class="sxs-lookup"><span data-stu-id="8f488-184">Back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases</span></span>|<span data-ttu-id="8f488-185">-我们建议运行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]备份作业，以防止[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库增长方式不受限制的事务日志。</span><span class="sxs-lookup"><span data-stu-id="8f488-185">-   We recommend running the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] backup job to prevent the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database transaction logs from growing in an unbounded fashion.</span></span><br /><span data-ttu-id="8f488-186">-你应还原整个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上定期，并且你的环境应仔细记录的过程。</span><span class="sxs-lookup"><span data-stu-id="8f488-186">-   You should restore the entire [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment on a regular basis, and you should carefully document the process.</span></span><br /><span data-ttu-id="8f488-187">-我们建议你将旧的备份文件存档。</span><span class="sxs-lookup"><span data-stu-id="8f488-187">-   We recommend that you archive old backup files.</span></span><br /><br /> <span data-ttu-id="8f488-188">有关详细信息，请参阅[备份数据库](~/technical-guides/backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="8f488-188">For more information, see [Backing Up Databases](~/technical-guides/backing-up-databases.md).</span></span>|  
|<span data-ttu-id="8f488-189">监视器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL 代理作业。</span><span class="sxs-lookup"><span data-stu-id="8f488-189">Monitor the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent jobs.</span></span>|<span data-ttu-id="8f488-190">监视这些作业的运行状况，并确保它们正在运行且未发生错误。</span><span class="sxs-lookup"><span data-stu-id="8f488-190">Monitor the health of these jobs, and ensure that they are running without errors.</span></span> <span data-ttu-id="8f488-191">有关详细信息，请参阅[监视 SQL Server 代理作业](~/technical-guides/monitoring-sql-server-agent-jobs.md)。</span><span class="sxs-lookup"><span data-stu-id="8f488-191">For more information, see [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md).</span></span>|  
|<span data-ttu-id="8f488-192">启用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]跟踪和存档</span><span class="sxs-lookup"><span data-stu-id="8f488-192">Enable [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tracking and archiving</span></span>|<span data-ttu-id="8f488-193">"DTA 清除和存档"SQL 代理作业存档，并从 BizTalk 跟踪数据库，从而阻止增长出控件将其清除旧数据。</span><span class="sxs-lookup"><span data-stu-id="8f488-193">The “DTA Purge and Archive” SQL Agent job archives and purges old data from the BizTalk Tracking database, thus keeping it from growing out of control.</span></span> <span data-ttu-id="8f488-194">这是必需的正常[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="8f488-194">This is essential for a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="8f488-195">有关详细信息，请参阅[清除和存档跟踪数据](~/technical-guides/purging-and-archiving-tracking-data.md)。</span><span class="sxs-lookup"><span data-stu-id="8f488-195">For more information, see [Purging and Archiving Tracking Data](~/technical-guides/purging-and-archiving-tracking-data.md).</span></span>|  
  
<a name="BKMK_Backup"></a>   
## <a name="backing-up-the-biztalk-server-databases"></a><span data-ttu-id="8f488-196">备份 BizTalk Server 数据库</span><span class="sxs-lookup"><span data-stu-id="8f488-196">Backing Up the BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="8f488-197">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-197">Steps</span></span>|<span data-ttu-id="8f488-198">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-198">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-199">验证备份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]配置 SQL 代理作业。</span><span class="sxs-lookup"><span data-stu-id="8f488-199">Verify that the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job is configured.</span></span>|<span data-ttu-id="8f488-200">-请参阅["如何配置备份 BizTalk Server 作业"](http://go.microsoft.com/fwlink/?LinkId=153813) (http://go.microsoft.com/fwlink/?LinkId=153813)。</span><span class="sxs-lookup"><span data-stu-id="8f488-200">-   See ["How to Configure the Backup BizTalk Server Job"](http://go.microsoft.com/fwlink/?LinkId=153813) (http://go.microsoft.com/fwlink/?LinkId=153813).</span></span><br /><span data-ttu-id="8f488-201">-请参阅[备份数据库](~/technical-guides/backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="8f488-201">-   See [Backing Up Databases](~/technical-guides/backing-up-databases.md).</span></span>|  
|<span data-ttu-id="8f488-202">配置备份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL 代理作业以删除早于指定天数的备份文件@DaysToKeep变量。</span><span class="sxs-lookup"><span data-stu-id="8f488-202">Configure the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job to delete backup files that are older than the number of days specified by the @DaysToKeep variable.</span></span> <span data-ttu-id="8f488-203">如果备份文件不会删除它们可以不受限制随时间增长的可能填满磁盘，它包含备份文件，并且会导致与磁盘空间有限相关的问题。</span><span class="sxs-lookup"><span data-stu-id="8f488-203">If the backup files are not deleted they can grow unbounded over time which can fill up the disk(s) that contain the backup files and cause problems that relate to limited disk space.</span></span>|<span data-ttu-id="8f488-204">请参阅 Microsoft 知识库文章 982546， ["备份 BizTalk Server"作业失败时备份的文件会累积随着 Microsoft BizTalk Dababase Server 中的时间的推移](http://go.microsoft.com/fwlink/?LinkId=202858)(http://go.microsoft.com/fwlink/?LinkId=202858)。</span><span class="sxs-lookup"><span data-stu-id="8f488-204">See Microsoft Knowledge Base Article 982546, [The "Backup BizTalk Server" job fails when backup files accumulate over time in Microsoft BizTalk Dababase Server](http://go.microsoft.com/fwlink/?LinkId=202858) (http://go.microsoft.com/fwlink/?LinkId=202858).</span></span>|  
|<span data-ttu-id="8f488-205">验证备份[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]SQL 代理作业是否已启用且正在运行。</span><span class="sxs-lookup"><span data-stu-id="8f488-205">Verify that the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent job is enabled and running.</span></span>|[<span data-ttu-id="8f488-206">监视 SQL Server 代理作业</span><span class="sxs-lookup"><span data-stu-id="8f488-206">Monitoring SQL Server Agent Jobs</span></span>](~/technical-guides/monitoring-sql-server-agent-jobs.md)|  
  
<a name="BKMK_Disaster"></a>   
## <a name="using-sql-server-log-shipping-for-disaster-recovery"></a><span data-ttu-id="8f488-207">使用 SQL Server 日志传送以实现灾难恢复</span><span class="sxs-lookup"><span data-stu-id="8f488-207">Using SQL Server Log Shipping For Disaster Recovery</span></span>  
  
|<span data-ttu-id="8f488-208">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-208">Steps</span></span>|<span data-ttu-id="8f488-209">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-209">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-210">验证灾难恢复服务器具有处理生产负载的能力。</span><span class="sxs-lookup"><span data-stu-id="8f488-210">Verify that the disaster recovery servers have the capacity to handle production load.</span></span>|<span data-ttu-id="8f488-211">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-211">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="8f488-212">确保你的灾难恢复日常活动期间细节很好地进行了说明。</span><span class="sxs-lookup"><span data-stu-id="8f488-212">Ensure that the specifics of your disaster recovery routine are well documented.</span></span>|<span data-ttu-id="8f488-213">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-213">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="8f488-214">作为正则的测试，实际故障转移到灾难恢复站点的一部分，尤其是当新的 BizTalk 应用程序都将置于生产。</span><span class="sxs-lookup"><span data-stu-id="8f488-214">As part of regular testing, practice failover to the disaster recovery site, especially as new BizTalk applications are put in production.</span></span>|<span data-ttu-id="8f488-215">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-215">See [Using BizTalk Server Log Shipping for Disaster Recovery](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
  
<a name="BKMK_Jobs"></a>   
## <a name="monitoring-biztalk-server-sql-agent-jobs"></a><span data-ttu-id="8f488-216">监视 BizTalk Server SQL 代理作业</span><span class="sxs-lookup"><span data-stu-id="8f488-216">Monitoring BizTalk Server SQL Agent Jobs</span></span>  
  
|<span data-ttu-id="8f488-217">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-217">Steps</span></span>|<span data-ttu-id="8f488-218">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-218">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-219">验证 SQL Server 代理服务正在运行。</span><span class="sxs-lookup"><span data-stu-id="8f488-219">Verify that the SQL Server Agent service is running.</span></span>|<span data-ttu-id="8f488-220">请参阅[监视 SQL Server 代理作业](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-220">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="8f488-221">验证安装的 SQL Server 代理作业[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已启用并且成功运行。</span><span class="sxs-lookup"><span data-stu-id="8f488-221">Verify that the SQL Server Agent jobs installed by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are enabled and running successfully.</span></span>|<span data-ttu-id="8f488-222">请参阅[监视 SQL Server 代理作业](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-222">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="8f488-223">验证[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]及时完成 SQL 代理作业。</span><span class="sxs-lookup"><span data-stu-id="8f488-223">Verify that the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] SQL Agent jobs are completing in a timely manner.</span></span>|<span data-ttu-id="8f488-224">请参阅[监视 SQL Server 代理作业](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="8f488-224">See [Monitoring SQL Server Agent Jobs](~/technical-guides/monitoring-sql-server-agent-jobs.md)</span></span>|  
  
<a name="BKMK_Purge"></a>   
## <a name="purging-and-archiving-tracking-data"></a><span data-ttu-id="8f488-225">清除和存档跟踪数据</span><span class="sxs-lookup"><span data-stu-id="8f488-225">Purging and Archiving Tracking Data</span></span>  
  
|<span data-ttu-id="8f488-226">步骤</span><span class="sxs-lookup"><span data-stu-id="8f488-226">Steps</span></span>|<span data-ttu-id="8f488-227">参考</span><span class="sxs-lookup"><span data-stu-id="8f488-227">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="8f488-228">确保 SQL 代理作业"DTA 清除和存档"正确配置和启用，并且已成功完成。</span><span class="sxs-lookup"><span data-stu-id="8f488-228">Ensure that the SQL Agent job "DTA Purge and Archive" is properly configured, enabled, and successfully completing.</span></span>|<span data-ttu-id="8f488-229">请参阅["如何配置 DTA 清除和存档作业"](http://go.microsoft.com/fwlink/?LinkId=153814) (http://go.microsoft.com/fwlink/?LinkId=153814)。</span><span class="sxs-lookup"><span data-stu-id="8f488-229">See ["How to Configure the DTA Purge and Archive Job"](http://go.microsoft.com/fwlink/?LinkId=153814) (http://go.microsoft.com/fwlink/?LinkId=153814).</span></span>|  
|<span data-ttu-id="8f488-230">确保作业能够快速生成传入的跟踪数据清除的跟踪数据。</span><span class="sxs-lookup"><span data-stu-id="8f488-230">Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.</span></span>|<span data-ttu-id="8f488-231">请参阅["衡量最大可持续跟踪吞吐量"](http://go.microsoft.com/fwlink/?LinkId=153815) (http://go.microsoft.com/fwlink/?LinkId=153815)。</span><span class="sxs-lookup"><span data-stu-id="8f488-231">See ["Measuring Maximum Sustainable Tracking Throughput"](http://go.microsoft.com/fwlink/?LinkId=153815) (http://go.microsoft.com/fwlink/?LinkId=153815).</span></span>|  
|<span data-ttu-id="8f488-232">查看软清除和硬清除参数，以确保你保存数据的最佳总时间。</span><span class="sxs-lookup"><span data-stu-id="8f488-232">Review the soft purge and hard purge parameters to ensure you are keeping data for the optimal length of time.</span></span>|<span data-ttu-id="8f488-233">请参阅["存档和清除跟踪数据库 BizTalk"](http://go.microsoft.com/fwlink/?LinkId=153816) (http://go.microsoft.com/fwlink/?LinkId=153816)。</span><span class="sxs-lookup"><span data-stu-id="8f488-233">See ["Archiving and Purging the BizTalk Tracking Database"](http://go.microsoft.com/fwlink/?LinkId=153816) (http://go.microsoft.com/fwlink/?LinkId=153816).</span></span>|  
|<span data-ttu-id="8f488-234">如果你只需以清除旧数据并不需要对其进行存档第一次，更改 SQL 代理作业调用存储的过程"dtasp_PurgeTrackingDatabase。"</span><span class="sxs-lookup"><span data-stu-id="8f488-234">If you only need to purge the old data and do not need to archive it first, change the SQL Agent job to call the stored procedure "dtasp_PurgeTrackingDatabase."</span></span>|<span data-ttu-id="8f488-235">请参阅["如何从 BizTalk 跟踪数据库清除数据"](http://go.microsoft.com/fwlink/?LinkId=153817) (http://go.microsoft.com/fwlink/?LinkId=153817)。</span><span class="sxs-lookup"><span data-stu-id="8f488-235">See ["How to Purge Data from the BizTalk Tracking Database"](http://go.microsoft.com/fwlink/?LinkId=153817) (http://go.microsoft.com/fwlink/?LinkId=153817).</span></span>|  
  
## <a name="in-this-section"></a><span data-ttu-id="8f488-236">本节内容</span><span class="sxs-lookup"><span data-stu-id="8f488-236">In This Section</span></span>  
  
-   [<span data-ttu-id="8f488-237">不应更改的 SQL Server 设置</span><span class="sxs-lookup"><span data-stu-id="8f488-237">SQL Server Settings That Should Not Be Changed</span></span>](~/technical-guides/sql-server-settings-that-should-not-be-changed.md)  
  
-   [<span data-ttu-id="8f488-238">监视和减少数据库 IO 争用</span><span class="sxs-lookup"><span data-stu-id="8f488-238">Monitoring and Reducing Database IO Contention</span></span>](~/technical-guides/monitoring-and-reducing-database-i-o-contention.md)  
  
-   [<span data-ttu-id="8f488-239">查看和测试故障转移方案的 SQL Server 群集配置</span><span class="sxs-lookup"><span data-stu-id="8f488-239">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](~/technical-guides/reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)  
  
-   [<span data-ttu-id="8f488-240">定义数据库的自动增长设置</span><span class="sxs-lookup"><span data-stu-id="8f488-240">Defining Auto-Growth Settings for Databases</span></span>](~/technical-guides/defining-auto-growth-settings-for-databases.md)  
  
-   [<span data-ttu-id="8f488-241">备份数据库</span><span class="sxs-lookup"><span data-stu-id="8f488-241">Backing Up Databases</span></span>](~/technical-guides/backing-up-databases.md)  
  
-   [<span data-ttu-id="8f488-242">使用 BizTalk Server 日志传送以实现灾难恢复</span><span class="sxs-lookup"><span data-stu-id="8f488-242">Using BizTalk Server Log Shipping for Disaster Recovery</span></span>](~/technical-guides/using-biztalk-server-log-shipping-for-disaster-recovery.md)  
  
-   [<span data-ttu-id="8f488-243">监视 SQL Server 代理作业</span><span class="sxs-lookup"><span data-stu-id="8f488-243">Monitoring SQL Server Agent Jobs</span></span>](~/technical-guides/monitoring-sql-server-agent-jobs.md)  
  
-   [<span data-ttu-id="8f488-244">清除和存档跟踪数据</span><span class="sxs-lookup"><span data-stu-id="8f488-244">Purging and Archiving Tracking Data</span></span>](~/technical-guides/purging-and-archiving-tracking-data.md)