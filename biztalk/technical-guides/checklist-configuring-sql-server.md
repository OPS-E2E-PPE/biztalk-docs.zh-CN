---
title: "清单： 配置 SQL Server |Microsoft 文档"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: edd20f24-8a72-40b7-abee-81fbd3ceefda
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f6c67fcdee26afd6ec9bb1016e86a98b1cf26e8
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-configuring-sql-server"></a><span data-ttu-id="e33e8-102">清单： 配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="e33e8-102">Checklist: Configuring SQL Server</span></span>
<span data-ttu-id="e33e8-103">在 BizTalk Server 生产环境中使用在准备 SQL Server 时应遵循的步骤。</span><span class="sxs-lookup"><span data-stu-id="e33e8-103">Steps to follow when preparing SQL Server for use in a BizTalk Server production environment.</span></span>    
 
<a name="BKMK_Config"></a>   
## <a name="configuring-sql-server"></a><span data-ttu-id="e33e8-104">配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="e33e8-104">Configuring SQL Server</span></span>  
  
|<span data-ttu-id="e33e8-105">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-105">Steps</span></span>|<span data-ttu-id="e33e8-106">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-106">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-107">监视和减少 BizTalk Server 数据库文件磁盘 I/O 争用。</span><span class="sxs-lookup"><span data-stu-id="e33e8-107">Monitor and reduce BizTalk Server database files disk I/O contention.</span></span>|<span data-ttu-id="e33e8-108">-我们建议你主动监视可存放的数据和事务日志文件的磁盘的磁盘 I/O 使用情况。</span><span class="sxs-lookup"><span data-stu-id="e33e8-108">-   We recommend that you proactively monitor the disk I/O usage for the disks that house the data and transaction log files.</span></span><br /><span data-ttu-id="e33e8-109">-我们建议，数据文件和事务日志文件的每个放置在专用的驱动器，以减少磁盘 I/O 争用成为问题的可能性。</span><span class="sxs-lookup"><span data-stu-id="e33e8-109">-   We recommend that the data files and transaction log files for each of these be placed on dedicated drives to reduce the likelihood of disk I/O contention becoming a problem.</span></span><br /><span data-ttu-id="e33e8-110">-你可以减少磁盘 I/O 争用，通过将分离的 MessageBox 和跟踪 (DTA) 的数据库，并且通过将数据库文件和事务日志文件在不同的物理磁盘上分离。</span><span class="sxs-lookup"><span data-stu-id="e33e8-110">-   You can reduce disk I/O contention by separating the MessageBox and Tracking (DTA) databases, and by separating the database files and transaction log files on different physical disks.</span></span><br /><br /> <span data-ttu-id="e33e8-111">有关详细信息，请参阅[监视和减少数据库 IO 争用](monitoring-and-reducing-database-i-o-contention.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-111">For more information, see [Monitoring and Reducing Database IO Contention](monitoring-and-reducing-database-i-o-contention.md)</span></span>|  
|<span data-ttu-id="e33e8-112">确保在正确对齐的磁盘分区上配置 SQL Server</span><span class="sxs-lookup"><span data-stu-id="e33e8-112">Ensure SQL Server is configured on properly-aligned disk partitions</span></span>|<span data-ttu-id="e33e8-113">正确对齐分区可能会导致显著降低延迟，从而提高 SQL Server 的性能，这反过来增强了 BizTalk Server 性能的磁盘。</span><span class="sxs-lookup"><span data-stu-id="e33e8-113">Properly aligned disk partitions could result in significant decrease in latency thereby improving the SQL Server performance, which in turn enhances BizTalk Server performance.</span></span> <span data-ttu-id="e33e8-114">相反，非对齐的磁盘分区可以产生负面影响输入/输出性能，从而降低的 SQL Server 和 BizTalk Server 性能。</span><span class="sxs-lookup"><span data-stu-id="e33e8-114">On the contrary, nonaligned disk partitions can negatively affect I/O performance, thereby degrading the SQL Server and BizTalk Server performance.</span></span><br /><br /> <span data-ttu-id="e33e8-115">有关如何正确对齐的磁盘分区的详细信息会产生积极影响性能，请参阅[磁盘分区对齐的 SQL Server 的最佳实践](http://go.microsoft.com/fwlink/?LinkId=154073)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-115">For more information about how properly aligned disk partitions can positively affect performance, see [Disk Partition Alignment Best Practices for SQL Server](http://go.microsoft.com/fwlink/?LinkId=154073).</span></span>|  
|<span data-ttu-id="e33e8-116">让您使用 SQL Server 事件探查器来监视事件</span><span class="sxs-lookup"><span data-stu-id="e33e8-116">Keep the events you monitor with the SQL Server Profiler</span></span>|<span data-ttu-id="e33e8-117">使用 SQL Server 事件探查器监视感兴趣的事件。</span><span class="sxs-lookup"><span data-stu-id="e33e8-117">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="e33e8-118">如果跟踪变得太大，你可以筛选基于所需的信息，以便收集事件数据的一个子集。</span><span class="sxs-lookup"><span data-stu-id="e33e8-118">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="e33e8-119">监视过多事件会增加服务器和监视进程的开销，并且可能导致跟踪文件或跟踪表变得很大，尤其是当监视进程持续很长时间时。</span><span class="sxs-lookup"><span data-stu-id="e33e8-119">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>|  
|<span data-ttu-id="e33e8-120">监视和减少 DTC 日志文件磁盘 I/O 争用。</span><span class="sxs-lookup"><span data-stu-id="e33e8-120">Monitor and reduce DTC log file disk I/O contention.</span></span>|[<span data-ttu-id="e33e8-121">监视和减少 DTC 日志文件磁盘 IO 争用</span><span class="sxs-lookup"><span data-stu-id="e33e8-121">Monitoring and Reducing DTC Log File Disk IO Contention</span></span>](monitoring-and-reducing-dtc-log-file-disk-i-o-contention.md)|  
|<span data-ttu-id="e33e8-122">为 SQL Server 数据库提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="e33e8-122">Provide high availability for the SQL Server databases.</span></span>|[<span data-ttu-id="e33e8-123">规划数据库可用性</span><span class="sxs-lookup"><span data-stu-id="e33e8-123">Planning for Database Availability</span></span>](planning-for-database-availability.md)|  
|<span data-ttu-id="e33e8-124">查看故障转移方案的主动/主动 SQL Server 群集配置。</span><span class="sxs-lookup"><span data-stu-id="e33e8-124">Review active/active SQL Server cluster configuration for failover scenarios.</span></span>|[<span data-ttu-id="e33e8-125">查看和测试故障转移方案的 SQL Server 群集配置</span><span class="sxs-lookup"><span data-stu-id="e33e8-125">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)|  
|<span data-ttu-id="e33e8-126">使用默认配置设置：</span><span class="sxs-lookup"><span data-stu-id="e33e8-126">Use default configuration settings for:</span></span><br /><br /> <span data-ttu-id="e33e8-127">-最大值 Degree of Parallelism (MDOP)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-127">-   Max Degree of Parallelism (MDOP).</span></span><br /><span data-ttu-id="e33e8-128">的在 BizTalk Server MessageBox 数据库上 SQL Server 统计信息。</span><span class="sxs-lookup"><span data-stu-id="e33e8-128">-   SQL Server statistics on the BizTalk Server MessageBox database.</span></span><br /><span data-ttu-id="e33e8-129">SQL Server 数据库索引重新生成和碎片整理。</span><span class="sxs-lookup"><span data-stu-id="e33e8-129">-   SQL Server database index rebuilds and defragmentation.</span></span>|[<span data-ttu-id="e33e8-130">不可更改的 SQL Server 设置</span><span class="sxs-lookup"><span data-stu-id="e33e8-130">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)|  
|<span data-ttu-id="e33e8-131">启用跟踪标志 1118 (TF1118) 作为启动参数的 SQL Server 的所有实例。</span><span class="sxs-lookup"><span data-stu-id="e33e8-131">Enable trace flag 1118 (TF1118) as a startup parameter for all instances of SQL Server.</span></span>|<span data-ttu-id="e33e8-132">实现 TF1118 有助于减少争用跨 SQL Server 实例删除几乎所有的单页分配。</span><span class="sxs-lookup"><span data-stu-id="e33e8-132">Implementing TF1118 helps reduce contention across the SQL Server instances by removing almost all single page allocations.</span></span> <span data-ttu-id="e33e8-133">有关详细信息，请参阅 Microsoft 知识库文章[并发增强功能的 tempdb 数据库](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-133">For more information see Microsoft Knowledge Base article [Concurrency enhancements for the tempdb database](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database).</span></span> <br/><br/><span data-ttu-id="e33e8-134">**注意：** TF1118，请参阅有关详细信息[围绕 TF1118 误解](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-134">**Note:**  For more information about TF1118 see [Misconceptions around TF1118](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/).</span></span> <span data-ttu-id="e33e8-135">请注意，在以下链接的内容不由 Microsoft 拥有，Microsoft 不保证内容的准确性。</span><span class="sxs-lookup"><span data-stu-id="e33e8-135">Note that the content at this link is not owned by Microsoft and Microsoft does not guarantee the accuracy of the content.</span></span>|  
|<span data-ttu-id="e33e8-136">将 tempdb 数据库拆分为多个大小相等的 BizTalk Server 使用的每个 SQL Server 实例上的数据文件。</span><span class="sxs-lookup"><span data-stu-id="e33e8-136">Split the tempdb database into multiple data files of equal size on each SQL Server instance used by BizTalk Server.</span></span>|<span data-ttu-id="e33e8-137">确保用于 tempdb 数据文件的大小相等。</span><span class="sxs-lookup"><span data-stu-id="e33e8-137">Ensure that the data files used for the tempdb are of equal size.</span></span> <span data-ttu-id="e33e8-138">这是关键的因为 SQL Server 使用的按比例填充算法根据数据文件的大小。</span><span class="sxs-lookup"><span data-stu-id="e33e8-138">This is critical because the proportional fill algorithm used by SQL Server is based on the size of the data files.</span></span> <span data-ttu-id="e33e8-139">如果数据文件创建不相等的大小，按比例填充算法将使用全局分配映射 (GAM) 分配，而无需分配所有的文件，从而与将创建多个的目的之间分配更多的最大文件数据文件。</span><span class="sxs-lookup"><span data-stu-id="e33e8-139">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for Global Allocation Map (GAM) allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="e33e8-140">作为一般原则是，为每个 CPU 的服务器上创建一个数据文件，然后调整根据需要向上或向下文件数。</span><span class="sxs-lookup"><span data-stu-id="e33e8-140">As a general guideline, create one data file for each CPU on the server and then adjust the number of files up or down as necessary.</span></span> <span data-ttu-id="e33e8-141">请注意，双核心 CPU 将被视为两个 CPU。</span><span class="sxs-lookup"><span data-stu-id="e33e8-141">Note that a dual-core CPU is considered to be two CPUs.</span></span> <span data-ttu-id="e33e8-142">在任何情况下，数据文件数必须大于 8 无关多少个内核，以便在计算机上可用。</span><span class="sxs-lookup"><span data-stu-id="e33e8-142">In any event, the number of data files must not be greater than 8 no matter how many additional cores are available on the computer.</span></span> <span data-ttu-id="e33e8-143">有关 tempdb 文件的详细信息，请参阅[优化 tempdb 性能](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-143">For more information about tempdb files, see [Optimizing tempdb Performance](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database).</span></span>|  
|<span data-ttu-id="e33e8-144">设置最小值和 SQL Server 上的相同值的最大服务器内存 instance(s) 该主机的 BizTalk Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="e33e8-144">Set the Minimum and Maximum Server memory to the same values on the SQL Server instance(s) that host the BizTalk Server databases.</span></span>|<span data-ttu-id="e33e8-145">运行该主机的 SQL Server 的计算机的 BizTalk Server 数据库应将专用于运行 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="e33e8-145">The computers running SQL Server that host the BizTalk Server databases should be dedicated to running SQL Server.</span></span> <span data-ttu-id="e33e8-146">运行该主机的 SQL Server 的计算机 BizTalk Server 数据库时**是**专用于运行 SQL Server，我们建议的 min server memory 和最大服务器内存选项卡上的每个 SQL Server 实例设置为指定固定分配给 SQL Server 的内存量。</span><span class="sxs-lookup"><span data-stu-id="e33e8-146">When the computers running SQL Server that host the BizTalk Server databases **are** dedicated to running SQL Server, we recommend that the 'min server memory' and 'max server memory' options on each SQL Server instance be set to specify the fixed amount of memory to allocate to SQL Server.</span></span> <span data-ttu-id="e33e8-147">在这种情况下，应将设置为 min server memory 和最大服务器内存为相同的值 （等于最大的 SQL Server 将使用的物理内存量）。</span><span class="sxs-lookup"><span data-stu-id="e33e8-147">In this case, you should set the 'min server memory' and 'max server memory' to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="e33e8-148">这将减少开销，否则将使用 SQL server 动态地管理这些值。</span><span class="sxs-lookup"><span data-stu-id="e33e8-148">This will reduce overhead that would otherwise be used by SQL Server dynamically managing these values.</span></span> <span data-ttu-id="e33e8-149">在运行 SQL Server 以指定要分配给 SQL Server 的内存固定的量每台计算机上执行以下 T-SQL 命令：</span><span class="sxs-lookup"><span data-stu-id="e33e8-149">Execute the following T-SQL commands on each computer running SQL Server to specify the fixed amount of memory to allocate to SQL Server:</span></span><br /><br /> <span data-ttu-id="e33e8-150">sp_configure ' 最大服务器内存 (MB)，（以 mb 为单位的最大大小） sp_configure 最小服务器内存 (MB)，（以 mb 为单位的最小大小）</span><span class="sxs-lookup"><span data-stu-id="e33e8-150">sp_configure ‘Max Server memory (MB)’,(max size in MB)sp_configure ‘Min Server memory (MB)’,(min size in MB)</span></span><br /><br /> <span data-ttu-id="e33e8-151">为 SQL Server 设置的内存量之前，请通过减去所需的总物理内存从 Windows Server 的内存确定适当的内存设置。</span><span class="sxs-lookup"><span data-stu-id="e33e8-151">Before you set the amount of memory for SQL Server, determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="e33e8-152">这是内存的最大可以为 SQL Server 分配量。</span><span class="sxs-lookup"><span data-stu-id="e33e8-152">This is the maximum amount of memory you can assign to SQL Server.</span></span> <span data-ttu-id="e33e8-153">**注意：**如果运行 BizTalk Server 数据库也该主机的 SQL Server 的计算机承载企业单一登录主密钥，如主题所述[群集主密钥服务器](clustering-the-master-secret-server.md)然后，你可能需要若要调整此值，以确保有足够的内存可用于运行企业单一登录服务。</span><span class="sxs-lookup"><span data-stu-id="e33e8-153">**Note:**  If the computer(s) running SQL Server that host the BizTalk Server databases also host the Enterprise Single Sign-On master secret as described in the topic [Clustering the Master Secret Server](clustering-the-master-secret-server.md) then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span>|  
|<span data-ttu-id="e33e8-154">BizTalk 跟踪数据库的大小</span><span class="sxs-lookup"><span data-stu-id="e33e8-154">Account for the size of BizTalk Tracking database</span></span>|<span data-ttu-id="e33e8-155">-当确定 BizTalk 跟踪 (DTA) 数据库中的消息的大小，将添加消息上下文的平均大小到的消息大小如果一点很重要，相比的消息大小。</span><span class="sxs-lookup"><span data-stu-id="e33e8-155">-   When determining the size of messages in the BizTalk Tracking (DTA) database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span><br /><span data-ttu-id="e33e8-156">-若要限制 BizTalk 跟踪数据库中的消息的大小，则将提升的属性数目的限制。</span><span class="sxs-lookup"><span data-stu-id="e33e8-156">-   To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span><br /><span data-ttu-id="e33e8-157">-如果启用业务流程调试器选项，考虑到每个形状中业务流程的状态保存到 BizTalk 跟踪数据库中。</span><span class="sxs-lookup"><span data-stu-id="e33e8-157">-   If the orchestration debugger option is enabled, take into account that the status of each shape in the orchestration is saved in the BizTalk Tracking database.</span></span>|  
  
<a name="BKMK_Maintain"></a>   
## <a name="performing-sql-server-maintenance-procedures"></a><span data-ttu-id="e33e8-158">执行 SQL Server 维护过程</span><span class="sxs-lookup"><span data-stu-id="e33e8-158">Performing SQL Server Maintenance Procedures</span></span>  
  
|<span data-ttu-id="e33e8-159">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-159">Steps</span></span>|<span data-ttu-id="e33e8-160">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-160">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-161">定义 BizTalk Server 数据库的自动增长设置。</span><span class="sxs-lookup"><span data-stu-id="e33e8-161">Define auto-growth settings for the BizTalk Server databases.</span></span>|<span data-ttu-id="e33e8-162">特别是对于 MessageBox 和跟踪数据库，数据库自动增长应设置为固定数量的兆字节为单位，而不是百分比。</span><span class="sxs-lookup"><span data-stu-id="e33e8-162">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking databases.</span></span> <span data-ttu-id="e33e8-163">根据你的 BizTalk Server 应用程序和吞吐量，MessageBox 和跟踪数据库可能会非常大。</span><span class="sxs-lookup"><span data-stu-id="e33e8-163">Depending on your BizTalk Server application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="e33e8-164">如果自动增长设置为百分比，则自动增长可能是非常高。</span><span class="sxs-lookup"><span data-stu-id="e33e8-164">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="e33e8-165">-即时文件初始化可以极大地降低文件增长操作的性能影响。</span><span class="sxs-lookup"><span data-stu-id="e33e8-165">-   Instant file initialization can greatly reduce the performance impact of a file growth operation.</span></span><br /><span data-ttu-id="e33e8-166">-理想情况下，支持的文件组的文件的大小应预分配，并且如果可能，请设置为静态大小。</span><span class="sxs-lookup"><span data-stu-id="e33e8-166">-   Ideally, the size of files supporting the file groups should be pre-allocated, and if possible, set to a static size.</span></span><br /><br /> <span data-ttu-id="e33e8-167">有关详细信息，请参阅[定义数据库的自动增长设置](defining-auto-growth-settings-for-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-167">For more information, see [Defining Auto-Growth Settings for Databases](defining-auto-growth-settings-for-databases.md).</span></span>|  
|<span data-ttu-id="e33e8-168">将 BizTalk Server 数据库备份</span><span class="sxs-lookup"><span data-stu-id="e33e8-168">Back up the BizTalk Server databases</span></span>|<span data-ttu-id="e33e8-169">-我们建议运行 BizTalk Server 备份作业，以防止 BizTalk Server 数据库事务日志增长不受限制的方式。</span><span class="sxs-lookup"><span data-stu-id="e33e8-169">-   We recommend running the BizTalk Server backup job to prevent the BizTalk Server database transaction logs from growing in an unbounded fashion.</span></span><br /><span data-ttu-id="e33e8-170">-你应还原定期，整个 BizTalk Server 环境，你应仔细记录的过程。</span><span class="sxs-lookup"><span data-stu-id="e33e8-170">-   You should restore the entire BizTalk Server environment on a regular basis, and you should carefully document the process.</span></span><br /><span data-ttu-id="e33e8-171">-我们建议你将旧的备份文件存档。</span><span class="sxs-lookup"><span data-stu-id="e33e8-171">-   We recommend that you archive old backup files.</span></span><br /><br /> <span data-ttu-id="e33e8-172">有关详细信息，请参阅[备份数据库](backing-up-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-172">For more information, see [Backing Up Databases](backing-up-databases.md).</span></span>|  
|<span data-ttu-id="e33e8-173">监视 BizTalk Server SQL 代理作业。</span><span class="sxs-lookup"><span data-stu-id="e33e8-173">Monitor the BizTalk Server SQL Agent jobs.</span></span>|<span data-ttu-id="e33e8-174">监视这些作业的运行状况，并确保它们正在运行且未发生错误。</span><span class="sxs-lookup"><span data-stu-id="e33e8-174">Monitor the health of these jobs, and ensure that they are running without errors.</span></span> <span data-ttu-id="e33e8-175">有关详细信息，请参阅[监视 SQL Server 代理作业](monitoring-sql-server-agent-jobs.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-175">For more information, see [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md).</span></span>|  
|<span data-ttu-id="e33e8-176">启用 BizTalk Server 跟踪和存档</span><span class="sxs-lookup"><span data-stu-id="e33e8-176">Enable BizTalk Server tracking and archiving</span></span>|<span data-ttu-id="e33e8-177">"DTA 清除和存档"SQL 代理作业存档，并从 BizTalk 跟踪数据库，从而阻止增长出控件将其清除旧数据。</span><span class="sxs-lookup"><span data-stu-id="e33e8-177">The “DTA Purge and Archive” SQL Agent job archives and purges old data from the BizTalk Tracking database, thus keeping it from growing out of control.</span></span> <span data-ttu-id="e33e8-178">这是正常的 BizTalk Server 系统的基础。</span><span class="sxs-lookup"><span data-stu-id="e33e8-178">This is essential for a healthy BizTalk Server system.</span></span> <span data-ttu-id="e33e8-179">有关详细信息，请参阅[清除和存档跟踪数据](purging-and-archiving-tracking-data.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-179">For more information, see [Purging and Archiving Tracking Data](purging-and-archiving-tracking-data.md).</span></span>|  
  
<a name="BKMK_Backup"></a>   
## <a name="backing-up-the-biztalk-server-databases"></a><span data-ttu-id="e33e8-180">备份 BizTalk Server 数据库</span><span class="sxs-lookup"><span data-stu-id="e33e8-180">Backing Up the BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="e33e8-181">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-181">Steps</span></span>|<span data-ttu-id="e33e8-182">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-182">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-183">验证已配置的备份 BizTalk Server SQL 代理作业。</span><span class="sxs-lookup"><span data-stu-id="e33e8-183">Verify that the Backup BizTalk Server SQL Agent job is configured.</span></span>|<span data-ttu-id="e33e8-184">请参阅[配置备份 BizTalk Server 作业](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-184">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="e33e8-185">配置备份 BizTalk Server SQL 代理作业以删除早于指定天数的备份文件@DaysToKeep变量。</span><span class="sxs-lookup"><span data-stu-id="e33e8-185">Configure the Backup BizTalk Server SQL Agent job to delete backup files that are older than the number of days specified by the @DaysToKeep variable.</span></span> <span data-ttu-id="e33e8-186">如果备份文件不会删除它们可以不受限制随时间增长的可能填满磁盘，它包含备份文件，并且会导致与磁盘空间有限相关的问题。</span><span class="sxs-lookup"><span data-stu-id="e33e8-186">If the backup files are not deleted they can grow unbounded over time which can fill up the disk(s) that contain the backup files and cause problems that relate to limited disk space.</span></span>|<span data-ttu-id="e33e8-187">请参阅[配置备份 BizTalk Server 作业](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-187">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="e33e8-188">验证备份 BizTalk Server SQL 代理作业已启用且正在运行。</span><span class="sxs-lookup"><span data-stu-id="e33e8-188">Verify that the Backup BizTalk Server SQL Agent job is enabled and running.</span></span>|[<span data-ttu-id="e33e8-189">监视 SQL Server 代理作业</span><span class="sxs-lookup"><span data-stu-id="e33e8-189">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)|  
  
<a name="BKMK_Disaster"></a>   
## <a name="using-sql-server-log-shipping-for-disaster-recovery"></a><span data-ttu-id="e33e8-190">使用 SQL Server 日志传送以实现灾难恢复</span><span class="sxs-lookup"><span data-stu-id="e33e8-190">Using SQL Server Log Shipping For Disaster Recovery</span></span>  
  
|<span data-ttu-id="e33e8-191">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-191">Steps</span></span>|<span data-ttu-id="e33e8-192">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-192">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-193">验证灾难恢复服务器具有处理生产负载的能力。</span><span class="sxs-lookup"><span data-stu-id="e33e8-193">Verify that the disaster recovery servers have the capacity to handle production load.</span></span>|<span data-ttu-id="e33e8-194">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-194">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="e33e8-195">确保你的灾难恢复日常活动期间细节很好地进行了说明。</span><span class="sxs-lookup"><span data-stu-id="e33e8-195">Ensure that the specifics of your disaster recovery routine are well documented.</span></span>|<span data-ttu-id="e33e8-196">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-196">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="e33e8-197">作为正则的测试，实际故障转移到灾难恢复站点的一部分，尤其是当新的 BizTalk 应用程序都将置于生产。</span><span class="sxs-lookup"><span data-stu-id="e33e8-197">As part of regular testing, practice failover to the disaster recovery site, especially as new BizTalk applications are put in production.</span></span>|<span data-ttu-id="e33e8-198">请参阅[使用 BizTalk Server 日志传送以实现灾难恢复](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-198">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
  
<a name="BKMK_Jobs"></a>   
## <a name="monitoring-biztalk-server-sql-agent-jobs"></a><span data-ttu-id="e33e8-199">监视 BizTalk Server SQL 代理作业</span><span class="sxs-lookup"><span data-stu-id="e33e8-199">Monitoring BizTalk Server SQL Agent Jobs</span></span>  
  
|<span data-ttu-id="e33e8-200">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-200">Steps</span></span>|<span data-ttu-id="e33e8-201">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-201">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-202">验证 SQL Server 代理服务正在运行。</span><span class="sxs-lookup"><span data-stu-id="e33e8-202">Verify that the SQL Server Agent service is running.</span></span>|<span data-ttu-id="e33e8-203">请参阅[监视 SQL Server 代理作业](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-203">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="e33e8-204">验证由 BizTalk 服务器安装的 SQL Server 代理作业已启用并正在运行成功。</span><span class="sxs-lookup"><span data-stu-id="e33e8-204">Verify that the SQL Server Agent jobs installed by BizTalk Server are enabled and running successfully.</span></span>|<span data-ttu-id="e33e8-205">请参阅[监视 SQL Server 代理作业](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-205">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="e33e8-206">验证的 BizTalk Server SQL 代理作业及时完成。</span><span class="sxs-lookup"><span data-stu-id="e33e8-206">Verify that the BizTalk Server SQL Agent jobs are completing in a timely manner.</span></span>|<span data-ttu-id="e33e8-207">请参阅[监视 SQL Server 代理作业](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-207">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
  
<a name="BKMK_Purge"></a>   
## <a name="purging-and-archiving-tracking-data"></a><span data-ttu-id="e33e8-208">清除和存档跟踪数据</span><span class="sxs-lookup"><span data-stu-id="e33e8-208">Purging and Archiving Tracking Data</span></span>  
  
|<span data-ttu-id="e33e8-209">步骤</span><span class="sxs-lookup"><span data-stu-id="e33e8-209">Steps</span></span>|<span data-ttu-id="e33e8-210">参考</span><span class="sxs-lookup"><span data-stu-id="e33e8-210">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="e33e8-211">确保 SQL 代理作业"DTA 清除和存档"正确配置和启用，并且已成功完成。</span><span class="sxs-lookup"><span data-stu-id="e33e8-211">Ensure that the SQL Agent job "DTA Purge and Archive" is properly configured, enabled, and successfully completing.</span></span>|<span data-ttu-id="e33e8-212">请参阅[配置 DTA 清除和存档作业](../core/how-to-configure-the-dta-purge-and-archive-job.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-212">See [Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span></span>|  
|<span data-ttu-id="e33e8-213">确保作业能够快速生成传入的跟踪数据清除的跟踪数据。</span><span class="sxs-lookup"><span data-stu-id="e33e8-213">Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.</span></span>|<span data-ttu-id="e33e8-214">请参阅[衡量最大可持续跟踪吞吐量](../core/measuring-maximum-sustainable-tracking-throughput.md)</span><span class="sxs-lookup"><span data-stu-id="e33e8-214">See [Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md)</span></span>|  
|<span data-ttu-id="e33e8-215">查看软清除和硬清除参数，以确保你保存数据的最佳总时间。</span><span class="sxs-lookup"><span data-stu-id="e33e8-215">Review the soft purge and hard purge parameters to ensure you are keeping data for the optimal length of time.</span></span>|<span data-ttu-id="e33e8-216">请参阅[存档和清除跟踪数据库 BizTalk](../core/archiving-and-purging-the-biztalk-tracking-database.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-216">See [Archiving and Purging the BizTalk Tracking Database](../core/archiving-and-purging-the-biztalk-tracking-database.md).</span></span>|  
|<span data-ttu-id="e33e8-217">如果你只需以清除旧数据并不需要对其进行存档第一次，更改 SQL 代理作业调用存储的过程"dtasp_PurgeTrackingDatabase。"</span><span class="sxs-lookup"><span data-stu-id="e33e8-217">If you only need to purge the old data and do not need to archive it first, change the SQL Agent job to call the stored procedure "dtasp_PurgeTrackingDatabase."</span></span>|<span data-ttu-id="e33e8-218">请参阅[从 BizTalk 跟踪数据库清除数据](../core/how-to-purge-data-from-the-biztalk-tracking-database.md)。</span><span class="sxs-lookup"><span data-stu-id="e33e8-218">See [Purge Data from the BizTalk Tracking Database](../core/how-to-purge-data-from-the-biztalk-tracking-database.md).</span></span>|  
  
## <a name="next"></a><span data-ttu-id="e33e8-219">Next</span><span class="sxs-lookup"><span data-stu-id="e33e8-219">Next</span></span>
  
-   [<span data-ttu-id="e33e8-220">不可更改的 SQL Server 设置</span><span class="sxs-lookup"><span data-stu-id="e33e8-220">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)  
  
-   [<span data-ttu-id="e33e8-221">监视和减少数据库 IO 争用</span><span class="sxs-lookup"><span data-stu-id="e33e8-221">Monitoring and Reducing Database IO Contention</span></span>](monitoring-and-reducing-database-i-o-contention.md)  
  
-   [<span data-ttu-id="e33e8-222">查看和测试故障转移方案的 SQL Server 群集配置</span><span class="sxs-lookup"><span data-stu-id="e33e8-222">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)  
  
-   [<span data-ttu-id="e33e8-223">定义数据库的自动增长设置</span><span class="sxs-lookup"><span data-stu-id="e33e8-223">Defining Auto-Growth Settings for Databases</span></span>](defining-auto-growth-settings-for-databases.md)  
  
-   [<span data-ttu-id="e33e8-224">备份数据库</span><span class="sxs-lookup"><span data-stu-id="e33e8-224">Backing Up Databases</span></span>](backing-up-databases.md)  
  
-   [<span data-ttu-id="e33e8-225">为灾难恢复使用 BizTalk Server 日志传送</span><span class="sxs-lookup"><span data-stu-id="e33e8-225">Using BizTalk Server Log Shipping for Disaster Recovery</span></span>](using-biztalk-server-log-shipping-for-disaster-recovery.md)  
  
-   [<span data-ttu-id="e33e8-226">监视 SQL Server 代理作业</span><span class="sxs-lookup"><span data-stu-id="e33e8-226">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)  
  
-   [<span data-ttu-id="e33e8-227">清除和存档跟踪数据</span><span class="sxs-lookup"><span data-stu-id="e33e8-227">Purging and Archiving Tracking Data</span></span>](purging-and-archiving-tracking-data.md)