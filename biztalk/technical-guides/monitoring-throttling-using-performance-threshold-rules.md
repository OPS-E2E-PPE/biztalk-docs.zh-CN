---
title: 监视限制使用性能阈值规则 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc2c3024-a54b-4485-8110-c2ec9ec52721
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2aedf8040b821230b6541785426731f1cef32099
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22299077"
---
# <a name="monitoring-throttling-using-performance-threshold-rules"></a><span data-ttu-id="4de0e-102">监视限制使用性能阈值规则</span><span class="sxs-lookup"><span data-stu-id="4de0e-102">Monitoring Throttling Using Performance Threshold Rules</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="4de0e-103">将初始化限制，以防止系统达到不可恢复的状态。</span><span class="sxs-lookup"><span data-stu-id="4de0e-103"> will initialize throttling to protect the system from reaching an unrecoverable state.</span></span> <span data-ttu-id="4de0e-104">限制可以表示存在问题，帮助您识别其源。</span><span class="sxs-lookup"><span data-stu-id="4de0e-104">Throttling can indicate a problem and assist you in identifying its source.</span></span> <span data-ttu-id="4de0e-105">确定基于限制的状态的瓶颈的原因后，分析其他性能计数器，以缩小问题的根源。</span><span class="sxs-lookup"><span data-stu-id="4de0e-105">After you have identified the cause of the bottleneck based on the throttling state, analyze the other performance counters to narrow down the source of the problem.</span></span>  
  
 <span data-ttu-id="4de0e-106">例如，在 MessageBox 数据库上的大量争用可能由于 CPU 使用率过高，这可能由过度分页到磁盘，反过来可能引起内存不足的情况。</span><span class="sxs-lookup"><span data-stu-id="4de0e-106">For example, high contention on the MessageBox database could be due to high CPU usage, which could be caused by excessively paging to disk, which in turn could be caused by low memory conditions.</span></span> <span data-ttu-id="4de0e-107">在消息框上的大量争用还可能引起高锁争用情况，这可能是因为饱和磁盘驱动器。</span><span class="sxs-lookup"><span data-stu-id="4de0e-107">High contention on the MessageBox could also be caused by high lock contention, which could be due to saturated disk drives.</span></span>  
  
 <span data-ttu-id="4de0e-108">监视消息传递限制状态和每个主机实例将消息发布限制状态通常是开始进行故障排除限制时的好时机。</span><span class="sxs-lookup"><span data-stu-id="4de0e-108">Monitoring the Message Delivery Throttling State and the Message Publishing Throttling State for each host instance is usually a good place to start when troubleshooting throttling.</span></span> <span data-ttu-id="4de0e-109">如果这些计数器的值不为零，则指示，BizTalk 服务器系统中出现了限制，并且可能要进一步分析瓶颈的原因。</span><span class="sxs-lookup"><span data-stu-id="4de0e-109">If the value of these counters is not zero, it is indicative that throttling is happening within the BizTalk Server system and it is possible to further analyze the cause of the bottleneck.</span></span> <span data-ttu-id="4de0e-110">有关的其他性能计数器的说明，请参阅[标识数据库层中的瓶颈](http://go.microsoft.com/fwlink/?LinkID=154678)(http://go.microsoft.com/fwlink/?LinkID=154678) 中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]帮助。</span><span class="sxs-lookup"><span data-stu-id="4de0e-110">For descriptions on the other performance counters, see [Identifying Bottlenecks in the Database Tier](http://go.microsoft.com/fwlink/?LinkID=154678) (http://go.microsoft.com/fwlink/?LinkID=154678) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
## <a name="biztalk-server-system-performance-counters"></a><span data-ttu-id="4de0e-111">BizTalk Server 系统性能计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-111">BizTalk Server System Performance Counters</span></span>  
  
|<span data-ttu-id="4de0e-112">对象</span><span class="sxs-lookup"><span data-stu-id="4de0e-112">Object</span></span>|<span data-ttu-id="4de0e-113">实例</span><span class="sxs-lookup"><span data-stu-id="4de0e-113">Instance</span></span>|<span data-ttu-id="4de0e-114">计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-114">Counter</span></span>|<span data-ttu-id="4de0e-115">监视目的</span><span class="sxs-lookup"><span data-stu-id="4de0e-115">Monitoring Purpose</span></span>|  
|------------|--------------|-------------|------------------------|  
|<span data-ttu-id="4de0e-116">处理器</span><span class="sxs-lookup"><span data-stu-id="4de0e-116">Processor</span></span>|<span data-ttu-id="4de0e-117">_Total</span><span class="sxs-lookup"><span data-stu-id="4de0e-117">_Total</span></span>|<span data-ttu-id="4de0e-118">% Processor Time</span><span class="sxs-lookup"><span data-stu-id="4de0e-118">% Processor Time</span></span>|<span data-ttu-id="4de0e-119">资源争用</span><span class="sxs-lookup"><span data-stu-id="4de0e-119">Resource Contention</span></span>|  
|<span data-ttu-id="4de0e-120">处理</span><span class="sxs-lookup"><span data-stu-id="4de0e-120">Process</span></span>|<span data-ttu-id="4de0e-121">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="4de0e-121">BTSNTSvc</span></span>|<span data-ttu-id="4de0e-122">Virtual Bytes</span><span class="sxs-lookup"><span data-stu-id="4de0e-122">Virtual Bytes</span></span>|<span data-ttu-id="4de0e-123">内存泄漏/膨胀</span><span class="sxs-lookup"><span data-stu-id="4de0e-123">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="4de0e-124">处理</span><span class="sxs-lookup"><span data-stu-id="4de0e-124">Process</span></span>|<span data-ttu-id="4de0e-125">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="4de0e-125">BTSNTSvc</span></span>|<span data-ttu-id="4de0e-126">Private Bytes</span><span class="sxs-lookup"><span data-stu-id="4de0e-126">Private Bytes</span></span>|<span data-ttu-id="4de0e-127">内存泄漏/膨胀</span><span class="sxs-lookup"><span data-stu-id="4de0e-127">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="4de0e-128">处理</span><span class="sxs-lookup"><span data-stu-id="4de0e-128">Process</span></span>|<span data-ttu-id="4de0e-129">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="4de0e-129">BTSNTSvc</span></span>|<span data-ttu-id="4de0e-130">Handle Count</span><span class="sxs-lookup"><span data-stu-id="4de0e-130">Handle Count</span></span>|<span data-ttu-id="4de0e-131">资源争用</span><span class="sxs-lookup"><span data-stu-id="4de0e-131">Resource Contention</span></span>|  
|<span data-ttu-id="4de0e-132">处理</span><span class="sxs-lookup"><span data-stu-id="4de0e-132">Process</span></span>|<span data-ttu-id="4de0e-133">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="4de0e-133">BTSNTSvc</span></span>|<span data-ttu-id="4de0e-134">线程计数</span><span class="sxs-lookup"><span data-stu-id="4de0e-134">Thread Count</span></span>|<span data-ttu-id="4de0e-135">资源争用</span><span class="sxs-lookup"><span data-stu-id="4de0e-135">Resource Contention</span></span>|  
|<span data-ttu-id="4de0e-136">物理磁盘</span><span class="sxs-lookup"><span data-stu-id="4de0e-136">Physical Disk</span></span>|<span data-ttu-id="4de0e-137">_Total</span><span class="sxs-lookup"><span data-stu-id="4de0e-137">_Total</span></span>|<span data-ttu-id="4de0e-138">% Idle Time</span><span class="sxs-lookup"><span data-stu-id="4de0e-138">% Idle Time</span></span>|<span data-ttu-id="4de0e-139">资源争用</span><span class="sxs-lookup"><span data-stu-id="4de0e-139">Resource Contention</span></span>|  
|<span data-ttu-id="4de0e-140">物理磁盘</span><span class="sxs-lookup"><span data-stu-id="4de0e-140">Physical Disk</span></span>|<span data-ttu-id="4de0e-141">_Total</span><span class="sxs-lookup"><span data-stu-id="4de0e-141">_Total</span></span>|<span data-ttu-id="4de0e-142">Current Disk Queue Length</span><span class="sxs-lookup"><span data-stu-id="4de0e-142">Current Disk Queue Length</span></span>|<span data-ttu-id="4de0e-143">资源争用</span><span class="sxs-lookup"><span data-stu-id="4de0e-143">Resource Contention</span></span>|  
  
## <a name="biztalk-application-counters"></a><span data-ttu-id="4de0e-144">BizTalk 应用程序计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-144">BizTalk Application Counters</span></span>  
  
|<span data-ttu-id="4de0e-145">对象</span><span class="sxs-lookup"><span data-stu-id="4de0e-145">Object</span></span>|<span data-ttu-id="4de0e-146">实例</span><span class="sxs-lookup"><span data-stu-id="4de0e-146">Instance</span></span>|<span data-ttu-id="4de0e-147">计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-147">Counter</span></span>|<span data-ttu-id="4de0e-148">Description</span><span class="sxs-lookup"><span data-stu-id="4de0e-148">Description</span></span>|  
|------------|--------------|-------------|-----------------|  
|<span data-ttu-id="4de0e-149">BizTalk 消息传送</span><span class="sxs-lookup"><span data-stu-id="4de0e-149">BizTalk Messaging</span></span>|<span data-ttu-id="4de0e-150">RxHost</span><span class="sxs-lookup"><span data-stu-id="4de0e-150">RxHost</span></span>|<span data-ttu-id="4de0e-151">Documents received/sec</span><span class="sxs-lookup"><span data-stu-id="4de0e-151">Documents Received/Sec</span></span>|<span data-ttu-id="4de0e-152">传入速率</span><span class="sxs-lookup"><span data-stu-id="4de0e-152">Incoming Rate</span></span>|  
|<span data-ttu-id="4de0e-153">BizTalk 消息传送</span><span class="sxs-lookup"><span data-stu-id="4de0e-153">BizTalk Messaging</span></span>|<span data-ttu-id="4de0e-154">TxHost</span><span class="sxs-lookup"><span data-stu-id="4de0e-154">TxHost</span></span>|<span data-ttu-id="4de0e-155">Documents processed/Sec</span><span class="sxs-lookup"><span data-stu-id="4de0e-155">Documents Processed/Sec</span></span>|<span data-ttu-id="4de0e-156">传出速率</span><span class="sxs-lookup"><span data-stu-id="4de0e-156">Outgoing Rate</span></span>|  
|<span data-ttu-id="4de0e-157">XLANGs/业务流程</span><span class="sxs-lookup"><span data-stu-id="4de0e-157">XLANGs/Orchestrations</span></span>|<span data-ttu-id="4de0e-158">PxHost</span><span class="sxs-lookup"><span data-stu-id="4de0e-158">PxHost</span></span>|<span data-ttu-id="4de0e-159">每秒完成业务流程</span><span class="sxs-lookup"><span data-stu-id="4de0e-159">Orchestrations Completed/Sec</span></span>|<span data-ttu-id="4de0e-160">处理速率</span><span class="sxs-lookup"><span data-stu-id="4de0e-160">Processing Rate</span></span>|  
|<span data-ttu-id="4de0e-161">BizTalk: MessageBox： 常规计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-161">BizTalk: MessageBox: General Counters</span></span>|<span data-ttu-id="4de0e-162">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="4de0e-162">MsgBoxName</span></span>|<span data-ttu-id="4de0e-163">假脱机大小</span><span class="sxs-lookup"><span data-stu-id="4de0e-163">Spool Size</span></span>|<span data-ttu-id="4de0e-164">所有主机队列的累积大小</span><span class="sxs-lookup"><span data-stu-id="4de0e-164">Cumulative size of all Host Queues</span></span>|  
|<span data-ttu-id="4de0e-165">BizTalk: MessageBox： 常规计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-165">BizTalk: MessageBox: General Counters</span></span>|<span data-ttu-id="4de0e-166">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="4de0e-166">MsgBoxName</span></span>|<span data-ttu-id="4de0e-167">Tracking Data Size</span><span class="sxs-lookup"><span data-stu-id="4de0e-167">Tracking Data Size</span></span>|<span data-ttu-id="4de0e-168">MessageBox 上 TrackingData 表的大小</span><span class="sxs-lookup"><span data-stu-id="4de0e-168">Size of TrackingData table on the MessageBox</span></span>|  
|<span data-ttu-id="4de0e-169">BizTalk: MessageBox： 承载计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-169">BizTalk: MessageBox: Host Counters</span></span>|<span data-ttu-id="4de0e-170">PxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="4de0e-170">PxHost:MsgBoxName</span></span>|<span data-ttu-id="4de0e-171">Host Queue - Length</span><span class="sxs-lookup"><span data-stu-id="4de0e-171">Host Queue - Length</span></span>|<span data-ttu-id="4de0e-172">特定主机队列中的消息数</span><span class="sxs-lookup"><span data-stu-id="4de0e-172">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="4de0e-173">BizTalk: MessageBox： 承载计数器</span><span class="sxs-lookup"><span data-stu-id="4de0e-173">BizTalk: MessageBox: Host Counters</span></span>|<span data-ttu-id="4de0e-174">TxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="4de0e-174">TxHost:MsgBoxName</span></span>|<span data-ttu-id="4de0e-175">Host Queue - Length</span><span class="sxs-lookup"><span data-stu-id="4de0e-175">Host Queue - Length</span></span>|<span data-ttu-id="4de0e-176">特定主机队列中的消息数</span><span class="sxs-lookup"><span data-stu-id="4de0e-176">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="4de0e-177">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="4de0e-177">BizTalk: Message Agent</span></span>|<span data-ttu-id="4de0e-178">RxHost</span><span class="sxs-lookup"><span data-stu-id="4de0e-178">RxHost</span></span>|<span data-ttu-id="4de0e-179">Database Size</span><span class="sxs-lookup"><span data-stu-id="4de0e-179">Database Size</span></span>|<span data-ttu-id="4de0e-180">发布 (PxHost) 队列的大小</span><span class="sxs-lookup"><span data-stu-id="4de0e-180">Size of publishing (PxHost) Queue</span></span>|  
|<span data-ttu-id="4de0e-181">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="4de0e-181">BizTalk: Message Agent</span></span>|<span data-ttu-id="4de0e-182">PxHost</span><span class="sxs-lookup"><span data-stu-id="4de0e-182">PxHost</span></span>|<span data-ttu-id="4de0e-183">Database Size</span><span class="sxs-lookup"><span data-stu-id="4de0e-183">Database Size</span></span>|<span data-ttu-id="4de0e-184">发布 (TxHost) 队列的大小</span><span class="sxs-lookup"><span data-stu-id="4de0e-184">Size of publishing (TxHost) Queue</span></span>|  
|<span data-ttu-id="4de0e-185">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="4de0e-185">BizTalk: Message Agent</span></span>|<span data-ttu-id="4de0e-186">HostName</span><span class="sxs-lookup"><span data-stu-id="4de0e-186">HostName</span></span>|<span data-ttu-id="4de0e-187">Message delivery throttling state</span><span class="sxs-lookup"><span data-stu-id="4de0e-187">Message Delivery Throttling State</span></span>|<span data-ttu-id="4de0e-188">影响 XLANG 和出站传输</span><span class="sxs-lookup"><span data-stu-id="4de0e-188">Affects XLANG and Outbound transports</span></span>|  
|<span data-ttu-id="4de0e-189">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="4de0e-189">BizTalk: Message Agent</span></span>|<span data-ttu-id="4de0e-190">HostName</span><span class="sxs-lookup"><span data-stu-id="4de0e-190">HostName</span></span>|<span data-ttu-id="4de0e-191">限制状态消息发布</span><span class="sxs-lookup"><span data-stu-id="4de0e-191">Message Publishing Throttling State</span></span>|<span data-ttu-id="4de0e-192">影响 XLANG 和入站传输</span><span class="sxs-lookup"><span data-stu-id="4de0e-192">Affects XLANG and Inbound transports</span></span>|  
  
## <a name="in-this-section"></a><span data-ttu-id="4de0e-193">本节内容</span><span class="sxs-lookup"><span data-stu-id="4de0e-193">In This Section</span></span>  
  
-   [<span data-ttu-id="4de0e-194">监视的限制</span><span class="sxs-lookup"><span data-stu-id="4de0e-194">Monitoring for Throttling</span></span>](../technical-guides/monitoring-for-throttling.md)