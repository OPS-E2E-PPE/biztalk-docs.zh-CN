---
title: 监视带宽限制使用性能阈值规则 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc2c3024-a54b-4485-8110-c2ec9ec52721
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4d5bf8f327cbdb12ebe0723941afd6e37b5d2409
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36968046"
---
# <a name="monitoring-throttling-using-performance-threshold-rules"></a><span data-ttu-id="eb3e0-102">监视带宽限制使用性能阈值规则</span><span class="sxs-lookup"><span data-stu-id="eb3e0-102">Monitoring Throttling Using Performance Threshold Rules</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="eb3e0-103"> 将初始化限制，以防止系统达到不可恢复的状态。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-103"> will initialize throttling to protect the system from reaching an unrecoverable state.</span></span> <span data-ttu-id="eb3e0-104">限制可以表示存在问题，并协助您找出其源。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-104">Throttling can indicate a problem and assist you in identifying its source.</span></span> <span data-ttu-id="eb3e0-105">确定基于阻止状态瓶颈的原因后，分析其他性能计数器以缩小问题来源。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-105">After you have identified the cause of the bottleneck based on the throttling state, analyze the other performance counters to narrow down the source of the problem.</span></span>  
  
 <span data-ttu-id="eb3e0-106">例如，MessageBox 数据库上的大量争用可能是由于 CPU 使用率过高，这可能引起过度分页到磁盘，进而可能因内存不足的情况。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-106">For example, high contention on the MessageBox database could be due to high CPU usage, which could be caused by excessively paging to disk, which in turn could be caused by low memory conditions.</span></span> <span data-ttu-id="eb3e0-107">MessageBox 上的大量争用也可能造成高锁争用情况，这可能是由于磁盘设备趋于饱和。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-107">High contention on the MessageBox could also be caused by high lock contention, which could be due to saturated disk drives.</span></span>  
  
 <span data-ttu-id="eb3e0-108">监视 Message Delivery Throttling State 和 Message Publishing Throttling State 每个主机实例通常是开始进行故障排除限制时的好时机。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-108">Monitoring the Message Delivery Throttling State and the Message Publishing Throttling State for each host instance is usually a good place to start when troubleshooting throttling.</span></span> <span data-ttu-id="eb3e0-109">如果这些计数器的值不为零，则指示 BizTalk Server 系统内正发生限流，并可以进一步分析瓶颈的原因。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-109">If the value of these counters is not zero, it is indicative that throttling is happening within the BizTalk Server system and it is possible to further analyze the cause of the bottleneck.</span></span> <span data-ttu-id="eb3e0-110">有关其他性能计数器的说明，请参阅[标识数据库层的瓶颈](http://go.microsoft.com/fwlink/?LinkID=154678)(<http://go.microsoft.com/fwlink/?LinkID=154678>) 中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]帮助。</span><span class="sxs-lookup"><span data-stu-id="eb3e0-110">For descriptions on the other performance counters, see [Identifying Bottlenecks in the Database Tier](http://go.microsoft.com/fwlink/?LinkID=154678) (<http://go.microsoft.com/fwlink/?LinkID=154678>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
## <a name="biztalk-server-system-performance-counters"></a><span data-ttu-id="eb3e0-111">BizTalk Server 系统性能计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-111">BizTalk Server System Performance Counters</span></span>  
  
|<span data-ttu-id="eb3e0-112">Object</span><span class="sxs-lookup"><span data-stu-id="eb3e0-112">Object</span></span>|<span data-ttu-id="eb3e0-113">实例</span><span class="sxs-lookup"><span data-stu-id="eb3e0-113">Instance</span></span>|<span data-ttu-id="eb3e0-114">计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-114">Counter</span></span>|<span data-ttu-id="eb3e0-115">监视目的</span><span class="sxs-lookup"><span data-stu-id="eb3e0-115">Monitoring Purpose</span></span>|  
|------------|--------------|-------------|------------------------|  
|<span data-ttu-id="eb3e0-116">处理器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-116">Processor</span></span>|<span data-ttu-id="eb3e0-117">_Total</span><span class="sxs-lookup"><span data-stu-id="eb3e0-117">_Total</span></span>|<span data-ttu-id="eb3e0-118">% Processor Time</span><span class="sxs-lookup"><span data-stu-id="eb3e0-118">% Processor Time</span></span>|<span data-ttu-id="eb3e0-119">资源争用</span><span class="sxs-lookup"><span data-stu-id="eb3e0-119">Resource Contention</span></span>|  
|<span data-ttu-id="eb3e0-120">处理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-120">Process</span></span>|<span data-ttu-id="eb3e0-121">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="eb3e0-121">BTSNTSvc</span></span>|<span data-ttu-id="eb3e0-122">Virtual Bytes</span><span class="sxs-lookup"><span data-stu-id="eb3e0-122">Virtual Bytes</span></span>|<span data-ttu-id="eb3e0-123">内存泄漏/膨胀</span><span class="sxs-lookup"><span data-stu-id="eb3e0-123">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="eb3e0-124">处理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-124">Process</span></span>|<span data-ttu-id="eb3e0-125">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="eb3e0-125">BTSNTSvc</span></span>|<span data-ttu-id="eb3e0-126">Private Bytes</span><span class="sxs-lookup"><span data-stu-id="eb3e0-126">Private Bytes</span></span>|<span data-ttu-id="eb3e0-127">内存泄漏/膨胀</span><span class="sxs-lookup"><span data-stu-id="eb3e0-127">Memory Leak/Bloat</span></span>|  
|<span data-ttu-id="eb3e0-128">处理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-128">Process</span></span>|<span data-ttu-id="eb3e0-129">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="eb3e0-129">BTSNTSvc</span></span>|<span data-ttu-id="eb3e0-130">Handle Count</span><span class="sxs-lookup"><span data-stu-id="eb3e0-130">Handle Count</span></span>|<span data-ttu-id="eb3e0-131">资源争用</span><span class="sxs-lookup"><span data-stu-id="eb3e0-131">Resource Contention</span></span>|  
|<span data-ttu-id="eb3e0-132">处理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-132">Process</span></span>|<span data-ttu-id="eb3e0-133">BTSNTSvc</span><span class="sxs-lookup"><span data-stu-id="eb3e0-133">BTSNTSvc</span></span>|<span data-ttu-id="eb3e0-134">线程计数</span><span class="sxs-lookup"><span data-stu-id="eb3e0-134">Thread Count</span></span>|<span data-ttu-id="eb3e0-135">资源争用</span><span class="sxs-lookup"><span data-stu-id="eb3e0-135">Resource Contention</span></span>|  
|<span data-ttu-id="eb3e0-136">物理磁盘</span><span class="sxs-lookup"><span data-stu-id="eb3e0-136">Physical Disk</span></span>|<span data-ttu-id="eb3e0-137">_Total</span><span class="sxs-lookup"><span data-stu-id="eb3e0-137">_Total</span></span>|<span data-ttu-id="eb3e0-138">% Idle Time</span><span class="sxs-lookup"><span data-stu-id="eb3e0-138">% Idle Time</span></span>|<span data-ttu-id="eb3e0-139">资源争用</span><span class="sxs-lookup"><span data-stu-id="eb3e0-139">Resource Contention</span></span>|  
|<span data-ttu-id="eb3e0-140">物理磁盘</span><span class="sxs-lookup"><span data-stu-id="eb3e0-140">Physical Disk</span></span>|<span data-ttu-id="eb3e0-141">_Total</span><span class="sxs-lookup"><span data-stu-id="eb3e0-141">_Total</span></span>|<span data-ttu-id="eb3e0-142">Current Disk Queue Length</span><span class="sxs-lookup"><span data-stu-id="eb3e0-142">Current Disk Queue Length</span></span>|<span data-ttu-id="eb3e0-143">资源争用</span><span class="sxs-lookup"><span data-stu-id="eb3e0-143">Resource Contention</span></span>|  
  
## <a name="biztalk-application-counters"></a><span data-ttu-id="eb3e0-144">BizTalk 应用程序计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-144">BizTalk Application Counters</span></span>  
  
|<span data-ttu-id="eb3e0-145">Object</span><span class="sxs-lookup"><span data-stu-id="eb3e0-145">Object</span></span>|<span data-ttu-id="eb3e0-146">实例</span><span class="sxs-lookup"><span data-stu-id="eb3e0-146">Instance</span></span>|<span data-ttu-id="eb3e0-147">计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-147">Counter</span></span>|<span data-ttu-id="eb3e0-148">Description</span><span class="sxs-lookup"><span data-stu-id="eb3e0-148">Description</span></span>|  
|------------|--------------|-------------|-----------------|  
|<span data-ttu-id="eb3e0-149">BizTalk 消息传送</span><span class="sxs-lookup"><span data-stu-id="eb3e0-149">BizTalk Messaging</span></span>|<span data-ttu-id="eb3e0-150">RxHost</span><span class="sxs-lookup"><span data-stu-id="eb3e0-150">RxHost</span></span>|<span data-ttu-id="eb3e0-151">Documents received/sec</span><span class="sxs-lookup"><span data-stu-id="eb3e0-151">Documents Received/Sec</span></span>|<span data-ttu-id="eb3e0-152">传入速率</span><span class="sxs-lookup"><span data-stu-id="eb3e0-152">Incoming Rate</span></span>|  
|<span data-ttu-id="eb3e0-153">BizTalk 消息传送</span><span class="sxs-lookup"><span data-stu-id="eb3e0-153">BizTalk Messaging</span></span>|<span data-ttu-id="eb3e0-154">TxHost</span><span class="sxs-lookup"><span data-stu-id="eb3e0-154">TxHost</span></span>|<span data-ttu-id="eb3e0-155">Documents processed/Sec</span><span class="sxs-lookup"><span data-stu-id="eb3e0-155">Documents Processed/Sec</span></span>|<span data-ttu-id="eb3e0-156">传出速率</span><span class="sxs-lookup"><span data-stu-id="eb3e0-156">Outgoing Rate</span></span>|  
|<span data-ttu-id="eb3e0-157">XLANGs/业务流程</span><span class="sxs-lookup"><span data-stu-id="eb3e0-157">XLANGs/Orchestrations</span></span>|<span data-ttu-id="eb3e0-158">PxHost</span><span class="sxs-lookup"><span data-stu-id="eb3e0-158">PxHost</span></span>|<span data-ttu-id="eb3e0-159">已完成的业务流程数/秒</span><span class="sxs-lookup"><span data-stu-id="eb3e0-159">Orchestrations Completed/Sec</span></span>|<span data-ttu-id="eb3e0-160">处理速率</span><span class="sxs-lookup"><span data-stu-id="eb3e0-160">Processing Rate</span></span>|  
|<span data-ttu-id="eb3e0-161">BizTalk: MessageBox： 常规计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-161">BizTalk: MessageBox: General Counters</span></span>|<span data-ttu-id="eb3e0-162">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-162">MsgBoxName</span></span>|<span data-ttu-id="eb3e0-163">后台处理大小</span><span class="sxs-lookup"><span data-stu-id="eb3e0-163">Spool Size</span></span>|<span data-ttu-id="eb3e0-164">所有主机队列的累积大小</span><span class="sxs-lookup"><span data-stu-id="eb3e0-164">Cumulative size of all Host Queues</span></span>|  
|<span data-ttu-id="eb3e0-165">BizTalk: MessageBox： 常规计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-165">BizTalk: MessageBox: General Counters</span></span>|<span data-ttu-id="eb3e0-166">MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-166">MsgBoxName</span></span>|<span data-ttu-id="eb3e0-167">Tracking Data Size</span><span class="sxs-lookup"><span data-stu-id="eb3e0-167">Tracking Data Size</span></span>|<span data-ttu-id="eb3e0-168">MessageBox 上 TrackingData 表的大小</span><span class="sxs-lookup"><span data-stu-id="eb3e0-168">Size of TrackingData table on the MessageBox</span></span>|  
|<span data-ttu-id="eb3e0-169">BizTalk: MessageBox： 主机计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-169">BizTalk: MessageBox: Host Counters</span></span>|<span data-ttu-id="eb3e0-170">PxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-170">PxHost:MsgBoxName</span></span>|<span data-ttu-id="eb3e0-171">Host Queue - Length</span><span class="sxs-lookup"><span data-stu-id="eb3e0-171">Host Queue - Length</span></span>|<span data-ttu-id="eb3e0-172">特定主机队列中的消息数</span><span class="sxs-lookup"><span data-stu-id="eb3e0-172">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="eb3e0-173">BizTalk: MessageBox： 主机计数器</span><span class="sxs-lookup"><span data-stu-id="eb3e0-173">BizTalk: MessageBox: Host Counters</span></span>|<span data-ttu-id="eb3e0-174">TxHost:MsgBoxName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-174">TxHost:MsgBoxName</span></span>|<span data-ttu-id="eb3e0-175">Host Queue - Length</span><span class="sxs-lookup"><span data-stu-id="eb3e0-175">Host Queue - Length</span></span>|<span data-ttu-id="eb3e0-176">特定主机队列中的消息数</span><span class="sxs-lookup"><span data-stu-id="eb3e0-176">Number of messages in the specific Host Queue</span></span>|  
|<span data-ttu-id="eb3e0-177">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-177">BizTalk: Message Agent</span></span>|<span data-ttu-id="eb3e0-178">RxHost</span><span class="sxs-lookup"><span data-stu-id="eb3e0-178">RxHost</span></span>|<span data-ttu-id="eb3e0-179">Database Size</span><span class="sxs-lookup"><span data-stu-id="eb3e0-179">Database Size</span></span>|<span data-ttu-id="eb3e0-180">发布 (PxHost) 队列的大小</span><span class="sxs-lookup"><span data-stu-id="eb3e0-180">Size of publishing (PxHost) Queue</span></span>|  
|<span data-ttu-id="eb3e0-181">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-181">BizTalk: Message Agent</span></span>|<span data-ttu-id="eb3e0-182">PxHost</span><span class="sxs-lookup"><span data-stu-id="eb3e0-182">PxHost</span></span>|<span data-ttu-id="eb3e0-183">Database Size</span><span class="sxs-lookup"><span data-stu-id="eb3e0-183">Database Size</span></span>|<span data-ttu-id="eb3e0-184">发布 (TxHost) 队列的大小</span><span class="sxs-lookup"><span data-stu-id="eb3e0-184">Size of publishing (TxHost) Queue</span></span>|  
|<span data-ttu-id="eb3e0-185">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-185">BizTalk: Message Agent</span></span>|<span data-ttu-id="eb3e0-186">HostName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-186">HostName</span></span>|<span data-ttu-id="eb3e0-187">Message delivery throttling state</span><span class="sxs-lookup"><span data-stu-id="eb3e0-187">Message Delivery Throttling State</span></span>|<span data-ttu-id="eb3e0-188">影响 XLANG 和出站传输</span><span class="sxs-lookup"><span data-stu-id="eb3e0-188">Affects XLANG and Outbound transports</span></span>|  
|<span data-ttu-id="eb3e0-189">BizTalk： 消息代理</span><span class="sxs-lookup"><span data-stu-id="eb3e0-189">BizTalk: Message Agent</span></span>|<span data-ttu-id="eb3e0-190">HostName</span><span class="sxs-lookup"><span data-stu-id="eb3e0-190">HostName</span></span>|<span data-ttu-id="eb3e0-191">消息发布阻止状态</span><span class="sxs-lookup"><span data-stu-id="eb3e0-191">Message Publishing Throttling State</span></span>|<span data-ttu-id="eb3e0-192">影响 XLANG 和入站传输</span><span class="sxs-lookup"><span data-stu-id="eb3e0-192">Affects XLANG and Inbound transports</span></span>|  
  
## <a name="in-this-section"></a><span data-ttu-id="eb3e0-193">本节内容</span><span class="sxs-lookup"><span data-stu-id="eb3e0-193">In This Section</span></span>  
  
-   [<span data-ttu-id="eb3e0-194">监视带宽限制</span><span class="sxs-lookup"><span data-stu-id="eb3e0-194">Monitoring for Throttling</span></span>](../technical-guides/monitoring-for-throttling.md)