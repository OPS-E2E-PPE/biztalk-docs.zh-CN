---
title: "阶段 1： 范围评估 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 667c3669-7314-4562-84bc-fbb1be1f0314
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3d0d3cc9d02f9e68c171f950e7681e5f2ca2d787
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/28/2017
---
# <a name="phase-1-scoping-the-assessment"></a><span data-ttu-id="94957-102">阶段 1： 范围评估</span><span class="sxs-lookup"><span data-stu-id="94957-102">Phase 1: Scoping the Assessment</span></span>
<span data-ttu-id="94957-103">本主题介绍 BizTalk Server 性能评估作用域阶段的方面。</span><span class="sxs-lookup"><span data-stu-id="94957-103">This topic describes the aspects of the scope phase of a BizTalk Server performance assessment.</span></span>  
  
 <span data-ttu-id="94957-104">在参与性能评估即将低估性能评估的作用域时，一个常见的错误。</span><span class="sxs-lookup"><span data-stu-id="94957-104">A common mistake when engaging in a performance assessment is to underestimate the scope of the performance assessment.</span></span> <span data-ttu-id="94957-105">如果不事先分配足够的资源和时间，然后负责性能评估的团队将无法完成所有构建和测试复杂的生产类似环境所需的任务。</span><span class="sxs-lookup"><span data-stu-id="94957-105">If sufficient resources and time are not allocated beforehand, then the team responsible for the performance assessment will be unable to complete all of the tasks required to build out and test a complex production-like environment.</span></span> <span data-ttu-id="94957-106">处理性能评估团队应仔细选择其战役。</span><span class="sxs-lookup"><span data-stu-id="94957-106">The team working on the performance assessment should choose their battles carefully.</span></span> <span data-ttu-id="94957-107">在非常有限的时间范围内执行大多数性能评估并因此团队应确定，并重点放在一个或两个，maybe 三个在大多数关键性能目标。</span><span class="sxs-lookup"><span data-stu-id="94957-107">Most performance assessments are performed within a very limited timeframe and so the team should identify and focus on one or two, maybe three at most, key performance objectives.</span></span> <span data-ttu-id="94957-108">要测试应用程序应专门开发能够专注于标识的性能目标，并且应抽取所有尽可能多地其他技术变量。</span><span class="sxs-lookup"><span data-stu-id="94957-108">The application to be tested should be specifically developed to focus on the identified performance objectives and should factor out all other technology variables as much as possible.</span></span> <span data-ttu-id="94957-109">本主题介绍 BizTalk Server 性能评估作用域阶段的方面。</span><span class="sxs-lookup"><span data-stu-id="94957-109">This topic describes the aspects of the scope phase of a BizTalk Server performance assessment.</span></span>  
  
## <a name="considerations-before-beginning-the-performance-assessment"></a><span data-ttu-id="94957-110">在开始性能评估之前的注意事项</span><span class="sxs-lookup"><span data-stu-id="94957-110">Considerations before beginning the performance assessment</span></span>  
 <span data-ttu-id="94957-111">任何其他工作出于性能评估之前，应考虑以下因素。</span><span class="sxs-lookup"><span data-stu-id="94957-111">The following factors should be considered before any other work is done for a performance assessment.</span></span> <span data-ttu-id="94957-112">这些因素将帮助决定审视阶段的常规方向，并且是性能评估的良好起点。</span><span class="sxs-lookup"><span data-stu-id="94957-112">These factors will help decide the general direction of the scope phase and are a good starting point for a performance assessment.</span></span>  
  
### <a name="message-load"></a><span data-ttu-id="94957-113">消息负载</span><span class="sxs-lookup"><span data-stu-id="94957-113">Message load</span></span>  
 <span data-ttu-id="94957-114">请务必考虑直接从一开始就你要复制的消息负载，实际上将经过生产系统的方式。</span><span class="sxs-lookup"><span data-stu-id="94957-114">It’s important to consider right from the outset how you are going to replicate the message load that will actually be going through the production system.</span></span> <span data-ttu-id="94957-115">例如，如果将在生产环境中的消息的 20%< 大小的 20 KB，50%将 < 100 KB 大小和剩余 30%可能是最大为 1 MB 大小，在很重要，这在实验室中复制。</span><span class="sxs-lookup"><span data-stu-id="94957-115">For instance, if in production 20 percent of the messages will be <20KB in size, 50 percent will be <100KB in size and the remaining 30 percent could be up to 1 MB in size, it is important that this be replicated in the lab.</span></span>  
  
### <a name="develop-a-brief-detail-of-the-scenarios-to-be-tested"></a><span data-ttu-id="94957-116">开发要测试的方案的简要详细信息</span><span class="sxs-lookup"><span data-stu-id="94957-116">Develop a brief detail of the scenarios to be tested</span></span>  
 <span data-ttu-id="94957-117">确定要测试的测试用例后，务必标识它们所涉及的主要组件。</span><span class="sxs-lookup"><span data-stu-id="94957-117">After you have identified the test cases that will be tested, it is important to identify the major components that are involved in them.</span></span> <span data-ttu-id="94957-118">这包括 BizTalk Server 组件 （如消息传递和业务流程） 和其他组件，包括 MQSeries、 SAP 等第三方技术。</span><span class="sxs-lookup"><span data-stu-id="94957-118">This includes both BizTalk Server components (such as messaging and orchestrations) and other components, including third-party technologies such as MQSeries or SAP.</span></span> <span data-ttu-id="94957-119">它是非常重要，必须注意的所有这些从一开始将有助于仪表实验室的复杂性，并且将使你可以规划在服务过程中所需的技术技能。</span><span class="sxs-lookup"><span data-stu-id="94957-119">It is very important that you be aware of all of these from the outset as it will help you gauge the complexity of the lab and will enable you to plan for the technical skills required during the engagement.</span></span>  
  
### <a name="identify-which-adapters-will-be-used"></a><span data-ttu-id="94957-120">确定将使用的适配器</span><span class="sxs-lookup"><span data-stu-id="94957-120">Identify which adapters will be used</span></span>  
 <span data-ttu-id="94957-121">它是性能评估实验室使用将在生产环境中使用的实际适配器的非常重要。</span><span class="sxs-lookup"><span data-stu-id="94957-121">It is of vital importance the performance assessment lab use the actual adapters that will be used in the production environment.</span></span> <span data-ttu-id="94957-122">未能使用生产中使用的实际适配器会导致问题，因为不同的适配器的性能变化较大。</span><span class="sxs-lookup"><span data-stu-id="94957-122">Failure to use the actual adapters used in production causes problems because the performance of different adapters varies significantly.</span></span> <span data-ttu-id="94957-123">例如，文件适配器是最快的 BizTalk Server 适配器之一，但它缺少某些所需的某些系统; 的功能特别是文件适配器不提供事务支持。</span><span class="sxs-lookup"><span data-stu-id="94957-123">For instance, the File adapter is one of the fastest BizTalk Server adapters but it lacks some of the features required of some systems; in particular the File adapter does not provide support for transactions.</span></span> <span data-ttu-id="94957-124">事务支持提供了能够读取消息并将它们写入到 MessageBox 数据库，所有在 MSDTC 事务的上下文中。</span><span class="sxs-lookup"><span data-stu-id="94957-124">Transaction support provides the ability to read messages and write them to the MessageBox database, all within the context of an MSDTC transaction.</span></span> <span data-ttu-id="94957-125">事务支持可能会产生开销。</span><span class="sxs-lookup"><span data-stu-id="94957-125">Transaction support incurs overhead.</span></span> <span data-ttu-id="94957-126">因此，使用文件适配器来模拟生产方案，对于需要事务支持将不是可行的比较。</span><span class="sxs-lookup"><span data-stu-id="94957-126">Therefore, using the File adapter to simulate a production scenario that requires transaction support would not be a viable comparison.</span></span> <span data-ttu-id="94957-127">在此方案中，性能结果是实质上是无效的这是因为它们是不太可能以反映生产系统的实际性能。</span><span class="sxs-lookup"><span data-stu-id="94957-127">In this scenario, the performance results are essentially invalid because they are very unlikely to reflect the actual performance of the production system.</span></span>  
  
### <a name="estimate-time-required-for-the-performance-assessment"></a><span data-ttu-id="94957-128">为性能评估所需的估计时间</span><span class="sxs-lookup"><span data-stu-id="94957-128">Estimate time required for the performance assessment</span></span>  
 <span data-ttu-id="94957-129">使用以下准则来估计性能评估所需的时间：</span><span class="sxs-lookup"><span data-stu-id="94957-129">Use the following guidelines to estimate the time required for the performance assessment:</span></span>  
  
-   <span data-ttu-id="94957-130">为设置测试环境中分配的准备时间的两周。</span><span class="sxs-lookup"><span data-stu-id="94957-130">Allocate two weeks of preparation time for setting up the testing environment.</span></span> <span data-ttu-id="94957-131">一周将用于构建出所需的基础结构软件组件和应用软件更新。</span><span class="sxs-lookup"><span data-stu-id="94957-131">One week will be used to build out the required infrastructure, software components, and apply software updates.</span></span> <span data-ttu-id="94957-132">第二周将专用于设置重复 BizTalk Server 生产环境的特定环境中。</span><span class="sxs-lookup"><span data-stu-id="94957-132">The second week will be dedicated to setting up the specific environment that duplicates the BizTalk Server production environment.</span></span>  
  
-   <span data-ttu-id="94957-133">为将性能评估过程中分析每个测试用例分配额外一周。</span><span class="sxs-lookup"><span data-stu-id="94957-133">Allocate an additional week for each test case that will be analyzed during the performance assessment.</span></span>  
  
-   <span data-ttu-id="94957-134">分配末尾的记录的性能评估发现的实际性能评估一周。</span><span class="sxs-lookup"><span data-stu-id="94957-134">Allocate a week at the end of the actual performance assessment to document the findings of the performance assessment.</span></span>  
  
 <span data-ttu-id="94957-135">因此典型性能评估与两个测试用例时，将是完成评估的估计的时间：</span><span class="sxs-lookup"><span data-stu-id="94957-135">So for a typical performance assessment with two test cases, the estimated time to complete the assessment would be:</span></span>  
  
 <span data-ttu-id="94957-136">（准备的两周时间） + （两周为实际性能评估） + （将结果记录到的一周） = 总五周。</span><span class="sxs-lookup"><span data-stu-id="94957-136">(two weeks of preparation time) + (two weeks for the actual performance assessment) + (one week to document findings) = five weeks total.</span></span>  
  
## <a name="documenting-the-performance-assessment"></a><span data-ttu-id="94957-137">记录性能评估</span><span class="sxs-lookup"><span data-stu-id="94957-137">Documenting the performance assessment</span></span>  
 <span data-ttu-id="94957-138">作为作用域性能评估的一部分，应在摘要合作记录评估的详细信息。</span><span class="sxs-lookup"><span data-stu-id="94957-138">As part of scoping the performance assessment, the details of the assessment should be documented in an engagement summary.</span></span> <span data-ttu-id="94957-139">目标、 利益干系人，以及为性能评估的里程碑，应清楚地定义本文档。</span><span class="sxs-lookup"><span data-stu-id="94957-139">This document should clearly define goals and objectives, stakeholders, and milestones for the performance assessment.</span></span> <span data-ttu-id="94957-140">本文档将用作性能评估的路线图，帮助确保所有利益干系人同意 engagement 详细信息，并提供以确保性能评估不偏离正轨。本文档应更新整个性能评估，并且包括结束性能评估时的结果的摘要。</span><span class="sxs-lookup"><span data-stu-id="94957-140">This document will serve as a roadmap for the performance assessment, help ensure all stakeholders agree on the engagement details and serve to ensure the performance assessment stays on track. This document should be updated throughout the performance assessment and include a summary of results upon the conclusion of the performance assessment.</span></span>  
  
### <a name="goals-and-objectives"></a><span data-ttu-id="94957-141">目标和目标</span><span class="sxs-lookup"><span data-stu-id="94957-141">Goals and objectives</span></span>  
 <span data-ttu-id="94957-142">**应仔细定义吞吐量和延迟目标**-性能条件是什么你尝试最大程度提高？</span><span class="sxs-lookup"><span data-stu-id="94957-142">**Carefully define throughput and latency goals** - What performance criteria are you trying to maximize?</span></span> <span data-ttu-id="94957-143">通常的一个或多个以下的性能度量值将 BizTalk Server 性能评估的焦点。</span><span class="sxs-lookup"><span data-stu-id="94957-143">Typically one or more of the following performance measures are the focus of a BizTalk Server performance assessment.</span></span>  
  
-   <span data-ttu-id="94957-144">**吞吐量**– 通常衡量每时间单位，可以在指定的时间间隔内处理的消息数。</span><span class="sxs-lookup"><span data-stu-id="94957-144">**Throughput** – Typically measured as the number of messages per time unit that can be processed over a specified time interval.</span></span> <span data-ttu-id="94957-145">例如，吞吐量目标可能定义为处理每秒的 3 小时时间段内的 100 个消息的能力。</span><span class="sxs-lookup"><span data-stu-id="94957-145">For example, a throughput goal might be defined as the ability to process 100 messages per second for a period of 3 hours.</span></span>  
  
-   <span data-ttu-id="94957-146">**延迟**– 通常定义的所有消息，可以是百分比处理端到端在给定的时间间隔内，例如：</span><span class="sxs-lookup"><span data-stu-id="94957-146">**Latency** – Usually defined as percentage of all messages that can be processed end-to-end within a given time interval, for example:</span></span>  
  
    -   <span data-ttu-id="94957-147">95%的所有消息应为两秒内处理的端到端。</span><span class="sxs-lookup"><span data-stu-id="94957-147">95 percent of all messages should be processed end-to-end within two seconds.</span></span>  
  
    -   <span data-ttu-id="94957-148">100%的所有消息应在四个秒内可处理的端到端。</span><span class="sxs-lookup"><span data-stu-id="94957-148">100 percent of all messages should be processed end-to-end within four seconds.</span></span>  
  
-   <span data-ttu-id="94957-149">**峰值负载**</span><span class="sxs-lookup"><span data-stu-id="94957-149">**Peak loads**</span></span>  
  
-   <span data-ttu-id="94957-150">**时间才能完成一批***X* </span><span class="sxs-lookup"><span data-stu-id="94957-150">**Time to complete a batch of**  *X*</span></span>  
  
-   <span data-ttu-id="94957-151">**Floodgate 恢复方案**</span><span class="sxs-lookup"><span data-stu-id="94957-151">**Floodgate recovery scenarios**</span></span>  
  
-   <span data-ttu-id="94957-152">**包括硬件和软件的高级体系结构**</span><span class="sxs-lookup"><span data-stu-id="94957-152">**High-level architecture including hardware and software**</span></span>  
  
 <span data-ttu-id="94957-153">应按照的衡量性能目标"实现最大可能*X*有硬件和软件的约束。"</span><span class="sxs-lookup"><span data-stu-id="94957-153">Performance goals should be measured in terms of “achieve highest possible *X* given hardware and software constraints.”</span></span> <span data-ttu-id="94957-154">确定如何将提前度量目标。</span><span class="sxs-lookup"><span data-stu-id="94957-154">Determine how the goal will be measured in advance.</span></span> <span data-ttu-id="94957-155">例如，"最大可持续吞吐量*X*端到端测量计数器 XLang/s\orchestrations 已完成 / 秒"。</span><span class="sxs-lookup"><span data-stu-id="94957-155">For example, “Maximum Sustainable Throughput of *X* end-to-end as measured by the counter ’XLang/s\orchestrations completed / second’”.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="94957-156">在上面的示例*X*是性能评估的焦点的单元的占位符。</span><span class="sxs-lookup"><span data-stu-id="94957-156">In the examples above, *X* is placeholder for the unit that is the focus of the performance assessment.</span></span> <span data-ttu-id="94957-157">*X*可表示业务流程、 消息或其他与 BizTalk 解决方案相关的性能指标。</span><span class="sxs-lookup"><span data-stu-id="94957-157">*X* could represent orchestrations, messages, or other performance metrics that are relevant to the BizTalk solution.</span></span>  
  
### <a name="is-the-desired-performance-attainable"></a><span data-ttu-id="94957-158">是所需的性能可达成？</span><span class="sxs-lookup"><span data-stu-id="94957-158">Is the desired performance attainable?</span></span>  
 <span data-ttu-id="94957-159">当评估性能注意事项，首先应确定是否可用的硬件资源将不足以满足性能目标。</span><span class="sxs-lookup"><span data-stu-id="94957-159">When evaluating performance considerations, you should first determine if the available hardware resources will be sufficient for meeting your performance goals.</span></span> <span data-ttu-id="94957-160">在某些情况下，所需的性能不只是可能无需其他硬件中的投资。</span><span class="sxs-lookup"><span data-stu-id="94957-160">In some cases, the desired performance is simply not possible without additional investment in hardware.</span></span> <span data-ttu-id="94957-161">没有神奇的公式可以用于确定哪些性能也不可能特别特定硬件配置，因为许多因素影响性能的解决方案，包括业务流程，使用的自定义代码的复杂性消息将保存到 MessageBox 数据库与外部系统的限制的次数。</span><span class="sxs-lookup"><span data-stu-id="94957-161">There is no magic formula that can be used to determine what performance is or is not possible given a specific hardware configuration as many factors influence the performance of the solution, including the complexity of orchestrations, custom code that is used, number of times that messages are persisted to the MessageBox database, and limitations of external systems.</span></span> <span data-ttu-id="94957-162">下表提供用于实现特定方案的具体的性能目标的硬件的摘要。</span><span class="sxs-lookup"><span data-stu-id="94957-162">The table below provides a summary of hardware used to achieve specific performance goals for certain scenarios.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="94957-163">下面的信息被提供仅作为指导。</span><span class="sxs-lookup"><span data-stu-id="94957-163">The information below is provided for guidance only.</span></span> <span data-ttu-id="94957-164">不同的 BizTalk Server 解决方案的要求大不相同，因此估计所需的硬件资源时，此表中的值将用作粗"规则的经验法则"。</span><span class="sxs-lookup"><span data-stu-id="94957-164">The requirements of different BizTalk Server solution vary greatly so the values in this table should be used as a rough “rule of thumb” when estimating required hardware resources.</span></span>  
  
### <a name="sample-hardware-scenarios"></a><span data-ttu-id="94957-165">硬件的示例方案</span><span class="sxs-lookup"><span data-stu-id="94957-165">Sample hardware scenarios</span></span>  
  
|<span data-ttu-id="94957-166">处理类型</span><span class="sxs-lookup"><span data-stu-id="94957-166">Type of Processing</span></span>|<span data-ttu-id="94957-167">BizTalk Server 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-167">BizTalk Server computers</span></span>|<span data-ttu-id="94957-168">SQL Server 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-168">SQL Server computers</span></span>|<span data-ttu-id="94957-169">获得的吞吐量</span><span class="sxs-lookup"><span data-stu-id="94957-169">Throughput attained</span></span>|<span data-ttu-id="94957-170">说明</span><span class="sxs-lookup"><span data-stu-id="94957-170">Notes</span></span>|  
|------------------------|------------------------------|--------------------------|-------------------------|-----------|  
|<span data-ttu-id="94957-171">作为 Web 服务，MQSeries 适配器公开的业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-171">Orchestration exposed as a Web service, MQSeries adapter</span></span>|<span data-ttu-id="94957-172">-6 BizTalk Server 2010 的计算机</span><span class="sxs-lookup"><span data-stu-id="94957-172">-   6 BizTalk Server 2010 computers</span></span><br /><span data-ttu-id="94957-173">-运行两个 3 GHZ 双核处理器每台服务器</span><span class="sxs-lookup"><span data-stu-id="94957-173">-   Each server running two 3-GHZ dual core processors</span></span><br /><span data-ttu-id="94957-174">Windows Server 2008 R2，8 GB 内存</span><span class="sxs-lookup"><span data-stu-id="94957-174">-   Windows Server 2008 R2, 8GB memory</span></span>|<span data-ttu-id="94957-175">-3 的 SQL Server 2008 R2 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-175">-   3 SQL Server 2008 R2 computers</span></span><br /><span data-ttu-id="94957-176">-运行四个 3 GHZ 双核处理器每台服务器</span><span class="sxs-lookup"><span data-stu-id="94957-176">-   Each server running four 3-GHZ dual core processors</span></span><br /><span data-ttu-id="94957-177">-64 位、 16 GB 内存</span><span class="sxs-lookup"><span data-stu-id="94957-177">-   64-bit, 16 GB memory</span></span><br /><span data-ttu-id="94957-178">-单个 MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="94957-178">-   Single MessageBox database</span></span>|<span data-ttu-id="94957-179">每秒的 95 业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-179">95 orchestrations per second</span></span>|<span data-ttu-id="94957-180">-平均延迟 1.11s</span><span class="sxs-lookup"><span data-stu-id="94957-180">-   Average latency 1.11s</span></span><br /><span data-ttu-id="94957-181">-使用 99%消息处理 < 2 秒延迟</span><span class="sxs-lookup"><span data-stu-id="94957-181">-   99% messages processed with <2 seconds latency</span></span>|  
|<span data-ttu-id="94957-182">消息传送</span><span class="sxs-lookup"><span data-stu-id="94957-182">Messaging</span></span>|<span data-ttu-id="94957-183">6 BizTalk Server 2010 的计算机</span><span class="sxs-lookup"><span data-stu-id="94957-183">6 BizTalk Server 2010 computers</span></span>|<span data-ttu-id="94957-184">3 的 SQL Server 2008 R2 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-184">3 SQL Server 2008 R2 computers</span></span>|<span data-ttu-id="94957-185">获得 2 小时内的峰值吞吐量已 277 消息数 / 秒</span><span class="sxs-lookup"><span data-stu-id="94957-185">Peak throughput attained over a 2 hour period was 277 messages per second</span></span>|<span data-ttu-id="94957-186">在优化解决方案之前, 的峰值吞吐量是每秒 125 消息</span><span class="sxs-lookup"><span data-stu-id="94957-186">Before optimizing solution, peak throughput was 125 messages per second</span></span>|  
|<span data-ttu-id="94957-187">使用业务流程和 Web 服务的低延迟方案</span><span class="sxs-lookup"><span data-stu-id="94957-187">Low-latency scenario using orchestrations and Web services</span></span>|<span data-ttu-id="94957-188">一个双处理器 BizTalk Server 2010 的计算机</span><span class="sxs-lookup"><span data-stu-id="94957-188">One dual processor BizTalk Server 2010 computer</span></span>|<span data-ttu-id="94957-189">一个四核处理器 SQL Server 2008 R2 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-189">One quad processor SQL Server 2008 R2 computer</span></span>|<span data-ttu-id="94957-190">每秒 60 业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-190">60 orchestrations per second</span></span>|<span data-ttu-id="94957-191">实现 < 350 毫秒延迟</span><span class="sxs-lookup"><span data-stu-id="94957-191">< 350 millisecond latency achieved</span></span>|  
|<span data-ttu-id="94957-192">使用业务流程的低延迟方案</span><span class="sxs-lookup"><span data-stu-id="94957-192">Low-latency scenario using orchestrations</span></span>|<span data-ttu-id="94957-193">23 四核处理器 BizTalk Server 2010 的计算机</span><span class="sxs-lookup"><span data-stu-id="94957-193">23 Quad processor BizTalk Server 2010 computers</span></span>|<span data-ttu-id="94957-194">-3 的 SQL Server 2008 R2 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-194">-   3 SQL Server 2008 R2 computers</span></span><br /><span data-ttu-id="94957-195">-一个 16 个 CPU master MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="94957-195">-   One 16-CPU master MessageBox database</span></span><br /><span data-ttu-id="94957-196">的两个 8 个 CPU 辅助 MessageBox 数据库计算机</span><span class="sxs-lookup"><span data-stu-id="94957-196">-   Two 8-CPU secondary MessageBox database computers</span></span>|<span data-ttu-id="94957-197">每秒的 1156年业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-197">1156 orchestrations per second</span></span>|<span data-ttu-id="94957-198">自 2010 年 1 月起已 BizTalk Server 运行记录的业务流程的最高可持续性能</span><span class="sxs-lookup"><span data-stu-id="94957-198">As of January 2010 was the highest sustainable performance of BizTalk Server running orchestrations recorded</span></span>|  
  
 <span data-ttu-id="94957-199">后可用的硬件基础结构会被确认不足以实现所需的性能和作用域的 BizTalk Server 性能评估时考虑以下方面：</span><span class="sxs-lookup"><span data-stu-id="94957-199">After the available hardware infrastructure is deemed sufficient to achieve the desired performance, consider the following when scoping a BizTalk Server performance assessment:</span></span>  
  
-   <span data-ttu-id="94957-200">需要哪些适配器和/或快捷键？</span><span class="sxs-lookup"><span data-stu-id="94957-200">Which adapters and/or accelerators are required?</span></span>  
  
-   <span data-ttu-id="94957-201">在解决方案中实现业务流程的要求有哪些？</span><span class="sxs-lookup"><span data-stu-id="94957-201">What are the requirements for implementing orchestrations in the solution?</span></span>  
  
-   <span data-ttu-id="94957-202">文档吞吐量要求： 解决方案的最大可持续吞吐量要求是什么？</span><span class="sxs-lookup"><span data-stu-id="94957-202">Document throughput requirements: What are the maximum sustainable throughput requirements for the solution?</span></span>  
  
-   <span data-ttu-id="94957-203">延迟要求： 如何响应解决方案需要请求作出响应和请求-响应方案？</span><span class="sxs-lookup"><span data-stu-id="94957-203">Latency requirements: How responsive does the solution need to be for solicit-response and request-response scenarios?</span></span>  
  
-   <span data-ttu-id="94957-204">从文档负载高峰期的时间段未程度恢复解决方案？</span><span class="sxs-lookup"><span data-stu-id="94957-204">How well does the solution recover from periods of peak document load?</span></span>  
  
-   <span data-ttu-id="94957-205">解决方案的高可用性要求是什么？</span><span class="sxs-lookup"><span data-stu-id="94957-205">What are the high availability requirements of the solution?</span></span>  
  
-   <span data-ttu-id="94957-206">文档跟踪要求的解决方案有哪些？</span><span class="sxs-lookup"><span data-stu-id="94957-206">What are the document tracking requirements of the solution?</span></span>  
  
-   <span data-ttu-id="94957-207">任何依赖的应用程序，如远程 Web 服务或其他系统的性能特征有哪些？</span><span class="sxs-lookup"><span data-stu-id="94957-207">What are the performance characteristics of any dependent applications such as a remote Web service or other system?</span></span> <span data-ttu-id="94957-208">如果依赖的应用程序不会保留与所需的负载中，将相应地降级总体系统性能。</span><span class="sxs-lookup"><span data-stu-id="94957-208">If dependent applications do not keep up with the required load, the overall system performance will be degraded accordingly.</span></span>  
  
### <a name="hardware-information-to-consider-during-scope-phase"></a><span data-ttu-id="94957-209">审视阶段过程中要考虑的硬件信息</span><span class="sxs-lookup"><span data-stu-id="94957-209">Hardware information to consider during scope phase</span></span>  
 <span data-ttu-id="94957-210">当范围之外解决方案，创建包括以下高级硬件图示：</span><span class="sxs-lookup"><span data-stu-id="94957-210">When scoping the solution, create a high-level hardware diagram that includes the following:</span></span>  
  
-   <span data-ttu-id="94957-211">计算机体系结构 （如 x86、 x64 和 IA64）</span><span class="sxs-lookup"><span data-stu-id="94957-211">Computer architecture (such as x86, x64, and IA64)</span></span>  
  
-   <span data-ttu-id="94957-212">（如类型、 速度、 数、 核心和使用超线程） 的 CPU 要求</span><span class="sxs-lookup"><span data-stu-id="94957-212">CPU requirements (such as type, speed, number, cores, and use of hyperthreading)</span></span>  
  
-   <span data-ttu-id="94957-213">每台计算机的 RAM 要求</span><span class="sxs-lookup"><span data-stu-id="94957-213">RAM requirements for each computer</span></span>  
  
-   <span data-ttu-id="94957-214">本地磁盘存储 （类型、 大小、 速度）</span><span class="sxs-lookup"><span data-stu-id="94957-214">Local disk storage (type, size, speed)</span></span>  
  
-   <span data-ttu-id="94957-215">SAN (存储要求： 数 LUN;SAN 卡类型）</span><span class="sxs-lookup"><span data-stu-id="94957-215">SAN (storage requirements: number of LUNS; SAN card type)</span></span>  
  
-   <span data-ttu-id="94957-216">网卡 （100 兆位 / 秒 (Mbps) 与 1 千兆比特 / 秒 (1 Gbps) 的每台计算机中的数字）。</span><span class="sxs-lookup"><span data-stu-id="94957-216">Network cards (number in each computer, 100 megabits per second (Mbps) versus 1 gigabit per second (1 Gbps).)</span></span>  
  
-   <span data-ttu-id="94957-217">如何将防火墙部署解决方案中？</span><span class="sxs-lookup"><span data-stu-id="94957-217">How will firewalls be deployed in the solution?</span></span>  
  
-   <span data-ttu-id="94957-218">将使用网络负载平衡的硬件？</span><span class="sxs-lookup"><span data-stu-id="94957-218">Will Network Load Balancing hardware be used?</span></span>  
  
-   <span data-ttu-id="94957-219">是特定计算机其可以加入群集？</span><span class="sxs-lookup"><span data-stu-id="94957-219">Are specific computers to be clustered?</span></span>  
  
### <a name="software-information-to-consider-during-the-scope-phase"></a><span data-ttu-id="94957-220">要考虑的作用域阶段的软件信息</span><span class="sxs-lookup"><span data-stu-id="94957-220">Software information to consider during the scope phase</span></span>  
 <span data-ttu-id="94957-221">同样重要的硬件信息是在性能评估期间将使用的软件堆栈。</span><span class="sxs-lookup"><span data-stu-id="94957-221">Equally important as the hardware information is the software stack that will be used during the performance assessment.</span></span>  <span data-ttu-id="94957-222">你应确保文档的以下信息：</span><span class="sxs-lookup"><span data-stu-id="94957-222">You should ensure you document the following information:</span></span>  
  
-   <span data-ttu-id="94957-223">每台计算机 （32 或 64 位，群集） 的操作系统。</span><span class="sxs-lookup"><span data-stu-id="94957-223">Operating system for each computer ( 32 or 64 bit, clustered or not).</span></span>  
  
-   <span data-ttu-id="94957-224">在每台计算机上安装的服务器软件。</span><span class="sxs-lookup"><span data-stu-id="94957-224">Server software to be installed on each computer.</span></span>  
  
-   <span data-ttu-id="94957-225">使用虚拟化软件。</span><span class="sxs-lookup"><span data-stu-id="94957-225">Virtualization software used.</span></span>  
  
-   <span data-ttu-id="94957-226">所需的特定软件功能通常不安装如 COM + 汇总修补或 SQL Server 主机修复。</span><span class="sxs-lookup"><span data-stu-id="94957-226">Specific software features not typically installed such as COM+ rollup fixes or SQL Server host fixes that are required.</span></span>  
  
### <a name="determine-if-code-changes-are-within-the-scope-of-the-performance-assessment"></a><span data-ttu-id="94957-227">确定性能评估作用域内是否有代码更改</span><span class="sxs-lookup"><span data-stu-id="94957-227">Determine if code changes are within the scope of the performance assessment</span></span>  
 <span data-ttu-id="94957-228">这是最重要的事项，以确定在作用域的过程之一。</span><span class="sxs-lookup"><span data-stu-id="94957-228">This is one of the most important things to determine during the scoping process.</span></span>  <span data-ttu-id="94957-229">BizTalk Server 和它所使用 （SQL Server、 Windows、 IIS 和多） 的基础组件可使用的优化技术和本指南中讨论的配置更改优化。</span><span class="sxs-lookup"><span data-stu-id="94957-229">BizTalk Server and the underlying components it uses (SQL Server, Windows, IIS and many more) can be optimized using the tuning techniques and configuration changes discussed in this guide.</span></span> <span data-ttu-id="94957-230">但是，如果应用程序不在已开发以获得最佳性能，它会妨碍这些性能提升。</span><span class="sxs-lookup"><span data-stu-id="94957-230">However, if an application has not been developed for optimal performance, it can hamper these performance gains.</span></span> <span data-ttu-id="94957-231">因此，代码更改应仅从作用域如果你有应用程序进入实验室之前，已完成全面的代码评审的置信度。</span><span class="sxs-lookup"><span data-stu-id="94957-231">Therefore, code changes should only be removed from the scope if you have confidence a thorough code review has been completed before the application enters the lab.</span></span> <span data-ttu-id="94957-232">如有必要，您可能同意会允许仅某些更改，例如，业务流程内的持久性点删除。</span><span class="sxs-lookup"><span data-stu-id="94957-232">If necessary, you may agree that only certain changes be allowed, for example, the removal of persistence points within orchestrations.</span></span>  
  
## <a name="roles-and-responsibilities"></a><span data-ttu-id="94957-233">角色和职责</span><span class="sxs-lookup"><span data-stu-id="94957-233">Roles and responsibilities</span></span>  
 <span data-ttu-id="94957-234">正在运行的性能评估的最重要的方面之一是确保角色和职责被明确分配。</span><span class="sxs-lookup"><span data-stu-id="94957-234">One of the most important areas of running a performance assessment is to ensure the roles and responsibilities are clearly assigned.</span></span> <span data-ttu-id="94957-235">应在开始性能评估分配以下密钥角色：</span><span class="sxs-lookup"><span data-stu-id="94957-235">The following key roles should be assigned at the onset of the performance assessment:</span></span>  
  
-   <span data-ttu-id="94957-236">**参与主管**-engagement 主管负责拥有总体 engagement 端到端。</span><span class="sxs-lookup"><span data-stu-id="94957-236">**Engagement lead** - The engagement lead is responsible for owning the overall engagement end-to-end.</span></span>  <span data-ttu-id="94957-237">此角色通常将由高级顾问或架构师执行。</span><span class="sxs-lookup"><span data-stu-id="94957-237">This role will typically be performed by a Senior Consultant or Architect.</span></span>  <span data-ttu-id="94957-238">理想情况下此人应具有优化 BizTalk Server 基于系统中的体验。</span><span class="sxs-lookup"><span data-stu-id="94957-238">Ideally this person should have experience in tuning BizTalk Server based systems.</span></span>  <span data-ttu-id="94957-239">SQL Server 和包括第三方的任何其他技术的知识是需要的。</span><span class="sxs-lookup"><span data-stu-id="94957-239">Knowledge of SQL Server and any other technologies including third party ones is desirable.</span></span>  <span data-ttu-id="94957-240">请注意不需要向主管方面的专家，所有区域，但它们需要拥有该技术的至少一个工作知识，以便它们可以与这些方面专家合作，并了解它们要将应用的优化。</span><span class="sxs-lookup"><span data-stu-id="94957-240">Please note it is not necessary that the lead is an expert in all areas, but they need to have at least a working knowledge of the technology in order that they can work with the specialists in those areas and understand the optimizations that they are applying.</span></span>  
  
-   <span data-ttu-id="94957-241">**测试设计器**-需要具有专用于设计和实现在实验室期间将执行的测试的人员。</span><span class="sxs-lookup"><span data-stu-id="94957-241">**Test designer** - It is necessary to have someone who is dedicated to designing and implementing the tests that will be executed during the lab.</span></span>  <span data-ttu-id="94957-242">这将涉及确定将用于创建测试，测试每个测试，以确保它将完成该实验室的要求，并确保负责为运行测试，必须知道如何使用客户端的测试框架。</span><span class="sxs-lookup"><span data-stu-id="94957-242">This will involve deciding on the test framework that will be used to create tests, testing each of the tests to ensure that it will fulfill the requirements of the lab and ensuring that those responsible for running the tests are aware of how to use the client.</span></span>  
  
-   <span data-ttu-id="94957-243">**环境所有者**-具有准确地反映生产 BizTalk Server 实验室中的代表性环境环境至关重要。</span><span class="sxs-lookup"><span data-stu-id="94957-243">**Environment owner** - Having a representative environment within the lab that accurately reflects the production BizTalk Server environment is critical.</span></span>  <span data-ttu-id="94957-244">执行此角色的人员将负责检查使用的软件和硬件堆栈的每个项，并验证存在很不大的差异。</span><span class="sxs-lookup"><span data-stu-id="94957-244">The person performing this role will be responsible for checking each item of the software and hardware stack used and validating that there are no significant differences.</span></span> <span data-ttu-id="94957-245">例如 SQL Server 2008 R2 在 32 位平台上运行时仅可以地址 4 GB 的物理内存，而不使用物理地址扩展 (PAE) 或地址窗口扩展 (AWE)。</span><span class="sxs-lookup"><span data-stu-id="94957-245">For example SQL Server 2008 R2 when running on the 32-bit platform can only address 4GB of physical memory without using either Physical Address Extensions (PAE) or Address Windowing Extensions (AWE).</span></span> <span data-ttu-id="94957-246">在 SQL Server 2008 R2 中，最大为 1 的 64 位内存 terabyte 可以进行寻址 （这是支持的 Windows Server 2008 R2 的当前最大物理内存）。</span><span class="sxs-lookup"><span data-stu-id="94957-246">In SQL Server 2008 R2, 64-bit up to 1 terabyte of memory can be addressed (this is the current maximum physical memory supported by Windows Server 2008 R2).</span></span> <span data-ttu-id="94957-247">因此显著区别客户和实验室环境可能由 BizTalk Server 和 SQL Server 使用的 CPU 的体系结构。</span><span class="sxs-lookup"><span data-stu-id="94957-247">Therefore a significant difference between the customer and the lab environment would be the architecture of CPU used by BizTalk Server and SQL Server.</span></span> <span data-ttu-id="94957-248">除了这些明显的因素，其他不太明显的因素，如 service pack 级别和修补程序安装，可能会影响环境的性能。</span><span class="sxs-lookup"><span data-stu-id="94957-248">In addition to these obvious factors, other less obvious factors, such as service pack levels and hotfixes installed, can impact performance of the environment.</span></span>  
  
-   <span data-ttu-id="94957-249">**生成环境主管**-在绘制详细的规范之后注册性能评估中，有人应分配生成环境的责任。</span><span class="sxs-lookup"><span data-stu-id="94957-249">**Build environment lead** - After a detailed specification has been drawn up for the performance assessment, someone should be assigned the responsibility of building the environment.</span></span> <span data-ttu-id="94957-250">这将包括硬件和软件堆栈。</span><span class="sxs-lookup"><span data-stu-id="94957-250">This will include the hardware and software stack.</span></span> <span data-ttu-id="94957-251">在许多情况下，一个人将负责这 （这通常是环境所有者）。</span><span class="sxs-lookup"><span data-stu-id="94957-251">In many cases one individual will be responsible for this (this is often the environment owner).</span></span> <span data-ttu-id="94957-252">但是在大型企业环境所有者可能需要不同的团队，可能每个需要负责各种解决方案组件之间的连接。</span><span class="sxs-lookup"><span data-stu-id="94957-252">However in a large enterprise the environment owner may need to be the liaison between different teams, who may each be responsible for various components of the solution.</span></span> <span data-ttu-id="94957-253">例如，负责 Windows 版本，另一个用于 SQL Server，可能由一个团队和另一个团队下的为 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="94957-253">For example, one team may be responsible for the Windows build, another for SQL Server, and yet another team for BizTalk Server.</span></span>  
  
-   <span data-ttu-id="94957-254">**部署主管**-必须以让某个人员负责确保应用程序正确部署到 BizTalk Server、 是否配置了正确的绑定并应用任何自定义配置。</span><span class="sxs-lookup"><span data-stu-id="94957-254">**Deployment lead** - It is necessary to have someone responsible for ensuring that the application is deployed correctly to BizTalk Server, that the correct bindings are configured and that any custom configuration is applied.</span></span> <span data-ttu-id="94957-255">此角色将需要的解决方案的全面知识和将需要了解打包应用程序和部署应用程序，然后验证它是在实验室环境中正常运行状态。</span><span class="sxs-lookup"><span data-stu-id="94957-255">This role will require a thorough knowledge of the solution and will require the knowledge to package an application and deploy an application and then validate that it is in a functioning state within the lab environment.</span></span>  
  
-   <span data-ttu-id="94957-256">**产品专家**– 务必识别哪些产品专家所需的性能评估。</span><span class="sxs-lookup"><span data-stu-id="94957-256">**Product specialists** – It is important to identify what product specialists are required for the performance assessment.</span></span> <span data-ttu-id="94957-257">所需的确切技能取决于的设计和 BizTalk Server 应用程序的用途。</span><span class="sxs-lookup"><span data-stu-id="94957-257">The exact skills required depend upon the design and purpose of the BizTalk Server application.</span></span>  
  
     <span data-ttu-id="94957-258">所需的最常见产品专家技能之一是性能优化 SQL Server 的额外知识。</span><span class="sxs-lookup"><span data-stu-id="94957-258">One of the most common product specialist skills required is extensive knowledge of performance tuning SQL Server.</span></span> <span data-ttu-id="94957-259">这些技巧是必需的有两个用途： 首先，它通常是执行 SQL Server 优化，以优化性能 BizTalk 数据库，第二个所需，许多 BizTalk 解决方案进行的自定义数据库使用。</span><span class="sxs-lookup"><span data-stu-id="94957-259">These skills are required for two purposes: first, it is often necessary to perform SQL Server optimizations to optimize performance of the BizTalk databases and second, many BizTalk solutions make use of custom databases.</span></span> <span data-ttu-id="94957-260">如果正确优化不会应用到 SQL Server 环境，使用自定义数据库可能成为瓶颈解决方案中。</span><span class="sxs-lookup"><span data-stu-id="94957-260">The use of custom databases can become a bottleneck in the solution if the correct optimizations are not applied to the SQL Server environment.</span></span> <span data-ttu-id="94957-261">为了确定并应用相应的数据库优化，通常必须有以下几个 SQL Server 方面：</span><span class="sxs-lookup"><span data-stu-id="94957-261">In order to identify and apply the appropriate database optimizations, the following SQL Server skills are typically required:</span></span>  
  
    -   <span data-ttu-id="94957-262">SQL Server 的全面了解存储过程代码，包括的功能优化现有存储的过程。</span><span class="sxs-lookup"><span data-stu-id="94957-262">Thorough understanding of SQL Server stored procedure code, including the ability to optimize existing stored procedures.</span></span>  
  
    -   <span data-ttu-id="94957-263">可以识别并生成缺少数据库索引。</span><span class="sxs-lookup"><span data-stu-id="94957-263">Ability to identify and build missing database indexes.</span></span>  
  
    -   <span data-ttu-id="94957-264">用于编写脚本将数据库拆分为多个文件的功能。</span><span class="sxs-lookup"><span data-stu-id="94957-264">Ability to write scripts to split databases into multiple files.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="94957-265">应用此优化的详细信息，请参阅[Databases2 优化文件组](../technical-guides/optimizing-filegroups-for-the-databases2.md)。</span><span class="sxs-lookup"><span data-stu-id="94957-265">For more information on applying this optimization, see [Optimizing Filegroups for the Databases2](../technical-guides/optimizing-filegroups-for-the-databases2.md).</span></span>  
  
    -   <span data-ttu-id="94957-266">能够确定在使用 SQL Server 2008 R2 性能仪表板报表的性能问题。</span><span class="sxs-lookup"><span data-stu-id="94957-266">Ability to identify performance problems using SQL Server 2008 R2 Performance Dashboard Reports.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="94957-267">SQL Server 2008 R2 性能面板报告是可在下载[http://go.microsoft.com/fwlink/?LinkId=118673](http://go.microsoft.com/fwlink/?LinkId=118673)。</span><span class="sxs-lookup"><span data-stu-id="94957-267">SQL Server 2008 R2 Performance Dashboard Reports is available for download at [http://go.microsoft.com/fwlink/?LinkId=118673](http://go.microsoft.com/fwlink/?LinkId=118673).</span></span>  
  
     <span data-ttu-id="94957-268">对于每个性能评估中涉及的专家技术，SQL Server 上述做法，应定义要求的列表。</span><span class="sxs-lookup"><span data-stu-id="94957-268">For each specialist technology involved in the performance assessment, a list of requirements should be defined as is done above for SQL Server.</span></span> <span data-ttu-id="94957-269">这可确保获取的资源具有清晰的新增功能将要求他们的期望。</span><span class="sxs-lookup"><span data-stu-id="94957-269">This ensures the resource obtained has clear expectations of what will be required of them.</span></span> <span data-ttu-id="94957-270">在性能评估期间经常需要专门的知识的另一种技术是 IBM Websphere MQ。</span><span class="sxs-lookup"><span data-stu-id="94957-270">Another technology that frequently requires specialized knowledge during the performance assessment is IBM Websphere MQ.</span></span> <span data-ttu-id="94957-271">下面的列表说明了 IBM WebSphere MQ 产品专家的要求规范：</span><span class="sxs-lookup"><span data-stu-id="94957-271">The list below illustrates the requirements specification for an IBM WebSphere MQ product specialist:</span></span>  
  
    -   <span data-ttu-id="94957-272">在中监视、 维护和自定义项的 MQSeries 体验。</span><span class="sxs-lookup"><span data-stu-id="94957-272">Experience in the monitoring, maintenance, and customization of MQSeries.</span></span>  
  
    -   <span data-ttu-id="94957-273">安装和迁移 MQSeries 的新版本的体验。</span><span class="sxs-lookup"><span data-stu-id="94957-273">Experience with installation and migration of new versions of MQSeries.</span></span>  
  
    -   <span data-ttu-id="94957-274">能够分析和优化 MQSeries 性能。</span><span class="sxs-lookup"><span data-stu-id="94957-274">Ability to analyze and tune MQSeries performance.</span></span>  
  
    -   <span data-ttu-id="94957-275">执行 MQSeries 问题分析。</span><span class="sxs-lookup"><span data-stu-id="94957-275">Perform MQSeries problem analysis.</span></span>  
  
    -   <span data-ttu-id="94957-276">进程和过程与 MQSeries 安全性、 管理、 恢复和自动化相关的知识。</span><span class="sxs-lookup"><span data-stu-id="94957-276">Knowledge of the processes and procedures related to MQSeries security, administration, recovery and automation.</span></span>  
  
-   <span data-ttu-id="94957-277">**文档主管**-是至关重要的不断更新实验室文档端到端整个性能评估。</span><span class="sxs-lookup"><span data-stu-id="94957-277">**Documentation lead** - Continuously updating the lab documentation end-to-end throughout the performance assessment is vitally important.</span></span> <span data-ttu-id="94957-278">直到系统已获取所需的级别的性能和优化已成功在生产环境中应用，则不应视为实验室 engagement 总体 successfulness。</span><span class="sxs-lookup"><span data-stu-id="94957-278">The overall successfulness of a lab engagement should not be judged until the optimizations have successfully been applied in the production environment and the system has obtained the desired level of performance.</span></span> <span data-ttu-id="94957-279">为了执行此操作，这至关重要保留以下信息的详细的记录：</span><span class="sxs-lookup"><span data-stu-id="94957-279">In order to do this, it is essential that a detailed record of the following information is kept:</span></span>  
  
    -   <span data-ttu-id="94957-280">实验室的高级结果摘要</span><span class="sxs-lookup"><span data-stu-id="94957-280">High-level results summary of the lab</span></span>  
  
    -   <span data-ttu-id="94957-281">未解决的问题</span><span class="sxs-lookup"><span data-stu-id="94957-281">Unresolved issues</span></span>  
  
    -   <span data-ttu-id="94957-282">已解决的问题</span><span class="sxs-lookup"><span data-stu-id="94957-282">Resolved issues</span></span>  
  
    -   <span data-ttu-id="94957-283">实验室的时间线</span><span class="sxs-lookup"><span data-stu-id="94957-283">Timeline for the lab</span></span>  
  
    -   <span data-ttu-id="94957-284">实验室进度</span><span class="sxs-lookup"><span data-stu-id="94957-284">Lab progress</span></span>  
  
    -   <span data-ttu-id="94957-285">按类别实现的优化</span><span class="sxs-lookup"><span data-stu-id="94957-285">Implemented optimizations by category</span></span>  
  
    -   <span data-ttu-id="94957-286">按时间顺序 （以确保它们可以应用相同的顺序在生产系统中） 的实现的优化</span><span class="sxs-lookup"><span data-stu-id="94957-286">Implemented optimizations in chronological order (to ensure that they can be applied in the same order in the production system)</span></span>  
  
    -   <span data-ttu-id="94957-287">高级体系结构图示</span><span class="sxs-lookup"><span data-stu-id="94957-287">High-level architectural diagram</span></span>  
  
    -   <span data-ttu-id="94957-288">要测试的方案的详细信息</span><span class="sxs-lookup"><span data-stu-id="94957-288">Detail of the scenarios to be tested</span></span>  
  
    -   <span data-ttu-id="94957-289">所涉及的第三方技术</span><span class="sxs-lookup"><span data-stu-id="94957-289">Third party technologies involved</span></span>  
  
    -   <span data-ttu-id="94957-290">实验室硬件图</span><span class="sxs-lookup"><span data-stu-id="94957-290">Lab hardware diagram</span></span>  
  
    -   <span data-ttu-id="94957-291">联系人列表</span><span class="sxs-lookup"><span data-stu-id="94957-291">Contact list</span></span>  
  
    -   <span data-ttu-id="94957-292">详细的硬件清单</span><span class="sxs-lookup"><span data-stu-id="94957-292">Detailed hardware inventory</span></span>  
  
    -   <span data-ttu-id="94957-293">使用完整的详细结果的附录</span><span class="sxs-lookup"><span data-stu-id="94957-293">Appendix with full detailed results</span></span>  
  
-   <span data-ttu-id="94957-294">**开发人员**-开发人员是否需要很大程度上取决于此服务的范围。</span><span class="sxs-lookup"><span data-stu-id="94957-294">**Developer** - Whether a developer is required depends very much on the scope of the engagement.</span></span> <span data-ttu-id="94957-295">如果基本代码已被锁定并且实验室有测试基础结构和平台优化仅然后开发人员的服务应该不需要。</span><span class="sxs-lookup"><span data-stu-id="94957-295">If the code base has been locked down and the lab is there to test infrastructure and platform optimizations only then the services of a developer should not be required.</span></span> <span data-ttu-id="94957-296">恰好在生产服务器的"转到生存"日期之前执行性能测试时，可能发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="94957-296">This type of scenario can occur when performance testing is performed just before the “go-live” date of the production server.</span></span> <span data-ttu-id="94957-297">通过这一次，代码应已被锁定，完整的回归测试应完成或正在进行。</span><span class="sxs-lookup"><span data-stu-id="94957-297">By this time, the code should have been locked down and full regression testing should be complete or in progress.</span></span> <span data-ttu-id="94957-298">对在实验室中引入的代码的任何更改都可能引入回归测试，并且因此，对生产系统中引入风险。</span><span class="sxs-lookup"><span data-stu-id="94957-298">Any changes to the code introduced in the lab could introduce a regression and, therefore, introduce risk to the production system.</span></span> <span data-ttu-id="94957-299">如果允许使用代码更改，然后通常开发人员都会要求提供。</span><span class="sxs-lookup"><span data-stu-id="94957-299">If code changes are permitted, then typically a developer will be required.</span></span> <span data-ttu-id="94957-300">下面的列表表示通常由开发人员参与 BizTalk Server 性能评估所需的技能：</span><span class="sxs-lookup"><span data-stu-id="94957-300">The list below represents the skills typically required by a developer that is engaged in a BizTalk Server performance assessment:</span></span>  
  
    -   <span data-ttu-id="94957-301">可以识别并修复性能问题与业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-301">Ability to identify and fix performance issues with orchestrations</span></span>  
  
    -   <span data-ttu-id="94957-302">可以识别并修复性能问题管道</span><span class="sxs-lookup"><span data-stu-id="94957-302">Ability to identify and fix performance issues with pipelines</span></span>  
  
    -   <span data-ttu-id="94957-303">熟悉.NET 包括：</span><span class="sxs-lookup"><span data-stu-id="94957-303">Familiarity with .NET including:</span></span>  
  
        -   <span data-ttu-id="94957-304">企业库</span><span class="sxs-lookup"><span data-stu-id="94957-304">Enterprise library</span></span>  
  
        -   <span data-ttu-id="94957-305">Visual Studio F1 探查器专业知识</span><span class="sxs-lookup"><span data-stu-id="94957-305">Visual Studio F1 profiler expertise</span></span>  
  
        -   <span data-ttu-id="94957-306">Microsoft Visual Studio 2010 Ultimate 或 Visual Studio 测试工具版 2010 Professional</span><span class="sxs-lookup"><span data-stu-id="94957-306">Microsoft Visual Studio 2010 Ultimate or Visual Studio Test Professional 2010</span></span>  
  
-   <span data-ttu-id="94957-307">**测试主管**-确保获得准确、 完整和全面的结果集至关重要。</span><span class="sxs-lookup"><span data-stu-id="94957-307">**Test lead** - Ensuring an accurate, complete and thorough set of results is obtained is critical.</span></span> <span data-ttu-id="94957-308">测试领导负责确保捕获、 适当地分析以及相应地分发每个测试运行完成后所需的信息。</span><span class="sxs-lookup"><span data-stu-id="94957-308">The test lead is responsible for ensuring the required information is captured, analyzed appropriately, and distributed appropriately after every test run.</span></span> <span data-ttu-id="94957-309">务必要考虑如何捕获数据，通常情况下测试数据是适用于使用 Excel 电子表格的演示文稿。</span><span class="sxs-lookup"><span data-stu-id="94957-309">It is important to consider how to capture the data, typically the test data is suitable for presentation using an Excel spreadsheet.</span></span> <span data-ttu-id="94957-310">以下列表说明了应捕获每个测试的运行在本实验中的数据：</span><span class="sxs-lookup"><span data-stu-id="94957-310">The following list illustrates the data that should be captured for each test that is run during the lab:</span></span>  
  
    -   <span data-ttu-id="94957-311">测试运行数</span><span class="sxs-lookup"><span data-stu-id="94957-311">Test run number</span></span>  
  
    -   <span data-ttu-id="94957-312">日期</span><span class="sxs-lookup"><span data-stu-id="94957-312">Date</span></span>  
  
    -   <span data-ttu-id="94957-313">处理的消息总数</span><span class="sxs-lookup"><span data-stu-id="94957-313">Total messages processed</span></span>  
  
    -   <span data-ttu-id="94957-314">每秒处理的消息</span><span class="sxs-lookup"><span data-stu-id="94957-314">Messages processed per second</span></span>  
  
    -   <span data-ttu-id="94957-315">开始时间</span><span class="sxs-lookup"><span data-stu-id="94957-315">Time started</span></span>  
  
    -   <span data-ttu-id="94957-316">停止的时间</span><span class="sxs-lookup"><span data-stu-id="94957-316">Time stopped</span></span>  
  
    -   <span data-ttu-id="94957-317">以分钟为单位的测试持续时间</span><span class="sxs-lookup"><span data-stu-id="94957-317">Test duration in minutes</span></span>  
  
    -   <span data-ttu-id="94957-318">挂起消息 / 处理的消息总数从 BizTalk 管理控制台或通过测量使用性能监视器的 BizTalk Server 性能计数器可以捕获此。</span><span class="sxs-lookup"><span data-stu-id="94957-318">Suspended messages / Total messages processed – This can be captured either from the BizTalk Administration console or by measuring the BizTalk Server performance counters using Performance Monitor.</span></span>  
  
    -   <span data-ttu-id="94957-319">\#失败处理的消息</span><span class="sxs-lookup"><span data-stu-id="94957-319">\# of messages that have failed processing</span></span>  
  
    -   <span data-ttu-id="94957-320">\#或已成功处理的消息</span><span class="sxs-lookup"><span data-stu-id="94957-320">\# or message that have been successfully processed</span></span>  
  
    -   <span data-ttu-id="94957-321">测试客户端响应</span><span class="sxs-lookup"><span data-stu-id="94957-321">Test client responses</span></span>  
  
    -   <span data-ttu-id="94957-322">客户端进程持续时间平均值，以秒为单位的度量通常情况下实现与 BizTalk Server 同步消息传递解决方案时，此值进行测量，在这种情况下很重要知道客户端平均持续时间内的值，因为这通常是代表多长时间最终用户的正在等待从解决方案的响应。</span><span class="sxs-lookup"><span data-stu-id="94957-322">Client process duration average, measured in seconds - Typically this value is measured when implementing a synchronous messaging solution with BizTalk Server, in this case it is important to know the value for average client duration as this is typically representative of how long an end user is waiting for a response from the solution.</span></span>  
  
    -   <span data-ttu-id="94957-323">客户端进程持续时间最大值，以秒为单位</span><span class="sxs-lookup"><span data-stu-id="94957-323">Client process duration maximum value, measured in seconds</span></span>  
  
    -   <span data-ttu-id="94957-324">客户端进程持续时间最小值，以秒为单位</span><span class="sxs-lookup"><span data-stu-id="94957-324">Client process duration minimum value, measured in seconds</span></span>  
  
    -   <span data-ttu-id="94957-325">BizTalk Server 请求/响应延迟，以秒为单位</span><span class="sxs-lookup"><span data-stu-id="94957-325">BizTalk Server request/response latency, measured in seconds</span></span>  
  
    -   <span data-ttu-id="94957-326">每秒完成的业务流程</span><span class="sxs-lookup"><span data-stu-id="94957-326">Orchestrations completed per second</span></span>  
  
    -   <span data-ttu-id="94957-327">%的时间处理的消息</span><span class="sxs-lookup"><span data-stu-id="94957-327">% of messages processed on time</span></span>  
  
    -   <span data-ttu-id="94957-328">值**TestResultsLocation**由 Visual Studio Team System 测试工具的变量。</span><span class="sxs-lookup"><span data-stu-id="94957-328">Value of **TestResultsLocation** variable used by Visual Studio Team System testing tools.</span></span>  
  
    -   <span data-ttu-id="94957-329">值**TestResultsLocation** BizUnit 所使用的变量。</span><span class="sxs-lookup"><span data-stu-id="94957-329">Value of **TestResultsLocation** variable used by BizUnit.</span></span>  
  
    -   <span data-ttu-id="94957-330">任何注释或建议</span><span class="sxs-lookup"><span data-stu-id="94957-330">Any comments or recommendations</span></span>  
  
     <span data-ttu-id="94957-331">收集结果，以及测试主管应确保它们监视每个测试运行以查看是否存在的趋势。</span><span class="sxs-lookup"><span data-stu-id="94957-331">As well as collecting the results, the test lead should ensure that they monitor each test run to see if there are any trends.</span></span> <span data-ttu-id="94957-332">性能改进应传达给团队的其余部分，并应指示多少性能已提高，以及哪些优化已应用以提高。</span><span class="sxs-lookup"><span data-stu-id="94957-332">Performance improvements should be communicated to the rest of the team and should indicate how much performance was improved and which optimization was applied to achieve the improvement.</span></span> <span data-ttu-id="94957-333">在一天结束值很重要，测试主管提供了已在实验室中执行的测试的摘要。</span><span class="sxs-lookup"><span data-stu-id="94957-333">At the end of day it is important that the test lead provides a summary of the tests that have been performed in the lab.</span></span> <span data-ttu-id="94957-334">这允许利益干系人要保留了解实验室继续进度。</span><span class="sxs-lookup"><span data-stu-id="94957-334">This allows the stakeholders to be kept informed of the continued progress of the lab.</span></span> <span data-ttu-id="94957-335">下表说明了如何此信息可能会将在组合示例更新电子邮件：</span><span class="sxs-lookup"><span data-stu-id="94957-335">The table below illustrates how this information might be put together in a sample update e-mail:</span></span>  
  
    ### <a name="test-results-summary"></a><span data-ttu-id="94957-336">测试结果摘要</span><span class="sxs-lookup"><span data-stu-id="94957-336">Test results summary</span></span>  
  
    |<span data-ttu-id="94957-337">状态</span><span class="sxs-lookup"><span data-stu-id="94957-337">Status</span></span>|<span data-ttu-id="94957-338">吞吐量</span><span class="sxs-lookup"><span data-stu-id="94957-338">Throughput</span></span>|<span data-ttu-id="94957-339">平均延迟</span><span class="sxs-lookup"><span data-stu-id="94957-339">Average Latency</span></span>|<span data-ttu-id="94957-340">%< 2 秒</span><span class="sxs-lookup"><span data-stu-id="94957-340">%< 2 seconds</span></span>|<span data-ttu-id="94957-341"># of 测试运行</span><span class="sxs-lookup"><span data-stu-id="94957-341"># of Test runs</span></span>|<span data-ttu-id="94957-342"># of BizTalk Server 计算机</span><span class="sxs-lookup"><span data-stu-id="94957-342"># of BizTalk Server Computers</span></span>|<span data-ttu-id="94957-343"># of 消息</span><span class="sxs-lookup"><span data-stu-id="94957-343"># of Messages</span></span>|<span data-ttu-id="94957-344">平均消息大小</span><span class="sxs-lookup"><span data-stu-id="94957-344">Average Message Size</span></span>|<span data-ttu-id="94957-345">Duration</span><span class="sxs-lookup"><span data-stu-id="94957-345">Duration</span></span>|  
    |------------|----------------|---------------------|-------------------|---------------------|------------------------------------|--------------------|--------------------------|--------------|  
    |<span data-ttu-id="94957-346">扩大</span><span class="sxs-lookup"><span data-stu-id="94957-346">Scale out</span></span>|<span data-ttu-id="94957-347">140 消息/秒</span><span class="sxs-lookup"><span data-stu-id="94957-347">140 messages/second</span></span>|<span data-ttu-id="94957-348">0.777 秒</span><span class="sxs-lookup"><span data-stu-id="94957-348">0.777 seconds</span></span>|<span data-ttu-id="94957-349">99.3%</span><span class="sxs-lookup"><span data-stu-id="94957-349">99.3%</span></span>|<span data-ttu-id="94957-350">2</span><span class="sxs-lookup"><span data-stu-id="94957-350">2</span></span>|<span data-ttu-id="94957-351">6</span><span class="sxs-lookup"><span data-stu-id="94957-351">6</span></span>|<span data-ttu-id="94957-352">270,000</span><span class="sxs-lookup"><span data-stu-id="94957-352">270,000</span></span>|<span data-ttu-id="94957-353">609 字节</span><span class="sxs-lookup"><span data-stu-id="94957-353">609 bytes</span></span>|<span data-ttu-id="94957-354">30 分钟</span><span class="sxs-lookup"><span data-stu-id="94957-354">30 minutes</span></span>|  
    |<span data-ttu-id="94957-355">最佳</span><span class="sxs-lookup"><span data-stu-id="94957-355">Best</span></span>|<span data-ttu-id="94957-356">50 消息/秒</span><span class="sxs-lookup"><span data-stu-id="94957-356">50 messages/second</span></span>|<span data-ttu-id="94957-357">1.12 秒</span><span class="sxs-lookup"><span data-stu-id="94957-357">1.12 seconds</span></span>|<span data-ttu-id="94957-358">99.12%</span><span class="sxs-lookup"><span data-stu-id="94957-358">99.12%</span></span>|<span data-ttu-id="94957-359">17</span><span class="sxs-lookup"><span data-stu-id="94957-359">17</span></span>|<span data-ttu-id="94957-360">2</span><span class="sxs-lookup"><span data-stu-id="94957-360">2</span></span>|<span data-ttu-id="94957-361">360,000</span><span class="sxs-lookup"><span data-stu-id="94957-361">360,000</span></span>|<span data-ttu-id="94957-362">609 字节</span><span class="sxs-lookup"><span data-stu-id="94957-362">609 bytes</span></span>|<span data-ttu-id="94957-363">2 小时</span><span class="sxs-lookup"><span data-stu-id="94957-363">2 hours</span></span>|  
    |<span data-ttu-id="94957-364">基线</span><span class="sxs-lookup"><span data-stu-id="94957-364">Baseline</span></span>|<span data-ttu-id="94957-365">30 消息/秒</span><span class="sxs-lookup"><span data-stu-id="94957-365">30 messages/second</span></span>|<span data-ttu-id="94957-366">1.52 秒</span><span class="sxs-lookup"><span data-stu-id="94957-366">1.52 seconds</span></span>|<span data-ttu-id="94957-367">92.9 %</span><span class="sxs-lookup"><span data-stu-id="94957-367">92.9 %</span></span>|<span data-ttu-id="94957-368">4</span><span class="sxs-lookup"><span data-stu-id="94957-368">4</span></span>|<span data-ttu-id="94957-369">2</span><span class="sxs-lookup"><span data-stu-id="94957-369">2</span></span>|<span data-ttu-id="94957-370">36,000</span><span class="sxs-lookup"><span data-stu-id="94957-370">36,000</span></span>|<span data-ttu-id="94957-371">609 字节</span><span class="sxs-lookup"><span data-stu-id="94957-371">609 bytes</span></span>|<span data-ttu-id="94957-372">20 分钟</span><span class="sxs-lookup"><span data-stu-id="94957-372">20 minutes</span></span>|  
    |<span data-ttu-id="94957-373">目标</span><span class="sxs-lookup"><span data-stu-id="94957-373">Goals</span></span>|<span data-ttu-id="94957-374">5 消息/秒</span><span class="sxs-lookup"><span data-stu-id="94957-374">5 messages/second</span></span>|<span data-ttu-id="94957-375">< 2 秒</span><span class="sxs-lookup"><span data-stu-id="94957-375">< 2 seconds</span></span>|<span data-ttu-id="94957-376">90%</span><span class="sxs-lookup"><span data-stu-id="94957-376">90%</span></span>|-|<span data-ttu-id="94957-377">2</span><span class="sxs-lookup"><span data-stu-id="94957-377">2</span></span>|-|-|-|  
  
## <a name="define-all-deliverables-that-are-required-at-the-onset-of-the-performance-assessment"></a><span data-ttu-id="94957-378">定义所有所需的性能评估用于开始处的可交付结果</span><span class="sxs-lookup"><span data-stu-id="94957-378">Define all deliverables that are required at the onset of the performance assessment</span></span>  
 <span data-ttu-id="94957-379">请务必达成必须启动 BizTalk Server 性能评估之前已存在的可交付结果。</span><span class="sxs-lookup"><span data-stu-id="94957-379">It is important to agree upon deliverables that must be in place before embarking on a BizTalk Server performance assessment.</span></span> <span data-ttu-id="94957-380">以下部分描述应当在性能评估开始建立的可交付结果。</span><span class="sxs-lookup"><span data-stu-id="94957-380">The section below describes the deliverables that should be in place at the onset of the performance assessment.</span></span>  
  
-   <span data-ttu-id="94957-381">**要测试的应用程序**– 在性能评估期间将使用完整的应用程序必须可用。</span><span class="sxs-lookup"><span data-stu-id="94957-381">**Application to be tested** – The complete application that will be used during the performance assessment must be available.</span></span> <span data-ttu-id="94957-382">很重要，应用程序在开始性能评估之前处于完全正常运行状态，否则将丢失有价值实验室测试时间的风险。</span><span class="sxs-lookup"><span data-stu-id="94957-382">It is important that the application is in a fully functioning state before beginning the performance assessment, otherwise there is risk of losing valuable lab testing time.</span></span>  
  
-   <span data-ttu-id="94957-383">**自动的生成和部署规划**-之前参与性能评估，应为 BizTalk Server 解决方案要测试开发一个自动化的生成和部署过程。</span><span class="sxs-lookup"><span data-stu-id="94957-383">**Planning for automated build and deployment** - Before engaging in the performance assessment, an automated build and deployment process should be developed for the BizTalk Server solution to be tested.</span></span> <span data-ttu-id="94957-384">自动化应用程序的生成过程可以让您进行连续的每日生成过程，其中然后伴随的生成验证测试 (Bvt) 测试通过系统流的功能集。</span><span class="sxs-lookup"><span data-stu-id="94957-384">Automating the build process for an application enables you to do a continuous daily build process, which can then be accompanied by a set of build validation tests (BVTs) which test the functional flows through the system.</span></span> <span data-ttu-id="94957-385">这使您能够检测编译和更快更轻松在整个开发生命周期的功能问题。</span><span class="sxs-lookup"><span data-stu-id="94957-385">This enables you to detect compilation and functional problems quicker and easier throughout the development lifecycle.</span></span> <span data-ttu-id="94957-386">在本实验中，这意味着，如果不需要更改任何代码可以快速会验证不出现任何问题，适用更新后的解决方案。</span><span class="sxs-lookup"><span data-stu-id="94957-386">Within the lab, this means that if any code changes are required you can quickly verify that the updated solution works without problems.</span></span> <span data-ttu-id="94957-387">手动构建、 部署和配置性能实验室的应用程序可以是单调乏味并且错误的容易任务。</span><span class="sxs-lookup"><span data-stu-id="94957-387">Manually building, deploying and configuring an application for a performance lab can be a tedious and error prone task.</span></span> <span data-ttu-id="94957-388">因此建议自动化技术可用于完成以下的生成和部署活动：</span><span class="sxs-lookup"><span data-stu-id="94957-388">Therefore it is recommended that an automation technique be used to accomplish the following build and deployment activities:</span></span>  
  
    -   <span data-ttu-id="94957-389">从源代码管理中获取最新的代码。</span><span class="sxs-lookup"><span data-stu-id="94957-389">Get latest code from source control.</span></span>  
  
    -   <span data-ttu-id="94957-390">生成完整的解决方案。</span><span class="sxs-lookup"><span data-stu-id="94957-390">Build the complete solution.</span></span>  
  
    -   <span data-ttu-id="94957-391">将解决方案部署到环境。</span><span class="sxs-lookup"><span data-stu-id="94957-391">Deploy the solution to the environment.</span></span>  
  
    -   <span data-ttu-id="94957-392">创建 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="94957-392">Create BizTalk applications.</span></span>  
  
    -   <span data-ttu-id="94957-393">将.dll 文件和绑定等的 BizTalk Server 资源添加到 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="94957-393">Add BizTalk Server resources such as .dll files and bindings to BizTalk applications.</span></span>  
  
    -   <span data-ttu-id="94957-394">导入绑定文件以创建端口和绑定到业务流程。</span><span class="sxs-lookup"><span data-stu-id="94957-394">Import binding file to create ports and bind to orchestrations.</span></span>  
  
    -   <span data-ttu-id="94957-395">将 BizTalk 应用程序导出为 Microsoft® Windows® Installer 包，以便其可以在测试或生产环境中部署。</span><span class="sxs-lookup"><span data-stu-id="94957-395">Export BizTalk applications as a Microsoft® Windows® Installer package so that it can be deployed in the testing or production environment.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="94957-396">有关实现自动的生成过程的详细信息，请参阅[自动执行生成过程](../technical-guides/automating-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="94957-396">For more information about implementing an automated build process, see[Automating the Build Process](../technical-guides/automating-the-build-process.md)</span></span>  
  
     <span data-ttu-id="94957-397">MSBuild 中引入了.NET framework 2.0，以使开发人员能够自动执行任务，例如所描述的那些更早版本。</span><span class="sxs-lookup"><span data-stu-id="94957-397">MSBuild was introduced with the .NET framework 2.0 to enable developers to automate tasks such as those described earlier.</span></span> <span data-ttu-id="94957-398">多个 BizTalk Server 特定 MSBuild 任务中所含的 SDC 任务库，它可以从下载[http://go.microsoft.com/fwlink/?LinkId=119288](http://go.microsoft.com/fwlink/?LinkId=119288)。</span><span class="sxs-lookup"><span data-stu-id="94957-398">Several BizTalk Server–specific MSBuild tasks are included with the SDC Tasks library, which is available for download from  [http://go.microsoft.com/fwlink/?LinkId=119288](http://go.microsoft.com/fwlink/?LinkId=119288).</span></span>  
  
-   <span data-ttu-id="94957-399">**测试数据，供在性能评估期间**– 使用的测试数据含有的整体效率和性能评估成功显著的影响。</span><span class="sxs-lookup"><span data-stu-id="94957-399">**Test data to be used during the performance assessment** – The test data that is used has a considerable influence on the overall effectiveness and success of a performance assessment.</span></span>  <span data-ttu-id="94957-400">请考虑其中 BizTalk 服务器应用程序使用消息传送、 业务流程和规则引擎的情况。</span><span class="sxs-lookup"><span data-stu-id="94957-400">Consider the scenario where a BizTalk Server application utilizes messaging, orchestration and the Rules Engine.</span></span> <span data-ttu-id="94957-401">规则引擎是从内部调用管道组件在接收端，来确定哪些业务流程将用于处理该消息;和也称为从中各个点，以确定流在业务流程。</span><span class="sxs-lookup"><span data-stu-id="94957-401">The Rules Engine is called from within a pipeline component on the receive side to determine which orchestration will be used to process the message; and it is also called from within the orchestration at various points to determine flow.</span></span> <span data-ttu-id="94957-402">规则引擎实现缓存，以便优化规则策略执行。</span><span class="sxs-lookup"><span data-stu-id="94957-402">The Rules Engine implements caching so that rules policy execution is optimized.</span></span> <span data-ttu-id="94957-403">因此，如果性能评估过程中，一条消息用作测试数据，测试结果可能会扭曲 （由于缓存原因而），并且可能会收到不能在生产中复制的结果。</span><span class="sxs-lookup"><span data-stu-id="94957-403">Therefore, if a single message is used as test data during the performance assessment, test results may be skewed (due to caching) and you may obtain results that can’t be replicated in production.</span></span>  
  
     <span data-ttu-id="94957-404">理想情况下在性能评估期间使用的测试数据应为实际生产数据或生产数据的子集。</span><span class="sxs-lookup"><span data-stu-id="94957-404">Ideally the test data used during the performance assessment should be actual production data or a subset of production data.</span></span> <span data-ttu-id="94957-405">负载测试和模式的流量将流经生产系统，还应模拟测试数据。</span><span class="sxs-lookup"><span data-stu-id="94957-405">The test data should also simulate the load and pattern of traffic that will be flowing through the production system.</span></span> <span data-ttu-id="94957-406">定义要求测试数据时，请考虑以下因素：</span><span class="sxs-lookup"><span data-stu-id="94957-406">Consider the following factors when defining requirements for test data:</span></span>  
  
    -   <span data-ttu-id="94957-407">**一段给定时间将通过系统流的消息数**-这通常表示为消息数 / 秒或每小时的消息。</span><span class="sxs-lookup"><span data-stu-id="94957-407">**Number of messages that will be flowing through the system in a given period** - This is normally expressed as messages per second or messages per hour.</span></span>  
  
    -   <span data-ttu-id="94957-408">**类型的消息**– 是消息平面文件、 XML 或二进制文件？</span><span class="sxs-lookup"><span data-stu-id="94957-408">**Types of messages** – Are the messages flat file, XML, or binary?</span></span>  
  
    -   <span data-ttu-id="94957-409">**分发的消息**– 占多少百分比将平面文件，将使用的每个 XML 消息类型占多少百分比？</span><span class="sxs-lookup"><span data-stu-id="94957-409">**Distribution of messages** – What percentage will be flat file, what percentage of each XML message type will be used?</span></span>  
  
    -   <span data-ttu-id="94957-410">**处理要求的峰值负载**-在许多情况下，可能在非高峰时间处理大型交换。</span><span class="sxs-lookup"><span data-stu-id="94957-410">**Peak load processing requirements** - In many scenarios a large interchange may be processed during non-peak hours.</span></span> <span data-ttu-id="94957-411">例如一大批付款可能在午夜发送到银行的系统中。</span><span class="sxs-lookup"><span data-stu-id="94957-411">For example a large batch of payments may be posted to a bank’s systems at midnight.</span></span> <span data-ttu-id="94957-412">如果出现这种情况，请确保你将能够在测试期间复制此。</span><span class="sxs-lookup"><span data-stu-id="94957-412">If this is the case, ensure you are able to replicate this during testing.</span></span>  
  
    -   <span data-ttu-id="94957-413">**用于接收/发送消息的终结点**-在许多环境中单独接收位置配置为接收不同类型的消息。</span><span class="sxs-lookup"><span data-stu-id="94957-413">**Endpoints used to receive/send messages** - In many environments separate receive locations are configured to receive different types of messages.</span></span> <span data-ttu-id="94957-414">例如，可能使用文件适配器接收平面文件消息或 MQSeries 适配器可用于接收 XML 消息。</span><span class="sxs-lookup"><span data-stu-id="94957-414">For example flat file messages may be received using the File adapter or the MQSeries adapter may be used to receive XML messages.</span></span> <span data-ttu-id="94957-415">虽然消息可能所有处理通过相同的业务流程它们将有到系统的不同入口点。</span><span class="sxs-lookup"><span data-stu-id="94957-415">While messages may all be processed by the same orchestration(s) they will have different entry points into the system.</span></span> <span data-ttu-id="94957-416">每个这些不同接收位置可以承载于单独的主机;确实执行此操作将通常会提高系统的整体性能。</span><span class="sxs-lookup"><span data-stu-id="94957-416">Each of these different receive locations can be hosted in a separate host; in fact doing this will often improve the overall performance of the system.</span></span>  
  
     <span data-ttu-id="94957-417">下表提供了确定测试数据规范时应该捕获的信息的示例：</span><span class="sxs-lookup"><span data-stu-id="94957-417">The table below provides an example of the information that should be captured when determining test data specifications:</span></span>  
  
    ### <a name="sample-test-data-specification"></a><span data-ttu-id="94957-418">示例测试数据规范</span><span class="sxs-lookup"><span data-stu-id="94957-418">Sample test data specification</span></span>  
  
    |||  
    |-|-|  
    |<span data-ttu-id="94957-419">**消息数 / 秒**</span><span class="sxs-lookup"><span data-stu-id="94957-419">**Messages per second**</span></span>|<span data-ttu-id="94957-420">的在此方案中至关重要最大吞吐量</span><span class="sxs-lookup"><span data-stu-id="94957-420">-   Maximum throughput is key in this scenario</span></span><br /><span data-ttu-id="94957-421">-50 每秒的消息的目标</span><span class="sxs-lookup"><span data-stu-id="94957-421">-   Goal of 50 messages per second</span></span><br /><span data-ttu-id="94957-422">-低延迟不是目标</span><span class="sxs-lookup"><span data-stu-id="94957-422">-   Low-latency is not a goal</span></span>|  
    |<span data-ttu-id="94957-423">**消息类型**</span><span class="sxs-lookup"><span data-stu-id="94957-423">**Type of messages**</span></span>|<span data-ttu-id="94957-424">-小的 XML 消息，符合 XML 架构大约 25 的 KB *X*</span><span class="sxs-lookup"><span data-stu-id="94957-424">-   Small XML messages, approximately 25 KB that conform to XML schema *X*</span></span><br /><span data-ttu-id="94957-425">-中等规模的 XML 消息，大约符合 XML 架构的 512 KB *Y*</span><span class="sxs-lookup"><span data-stu-id="94957-425">-   Medium XML messages, approximately 512 KB that conform to XML schema *Y*</span></span>|  
    |<span data-ttu-id="94957-426">**邮件分发**</span><span class="sxs-lookup"><span data-stu-id="94957-426">**Distribution of messages**</span></span>|<span data-ttu-id="94957-427">-58 %25 KB （小 XML 消息）</span><span class="sxs-lookup"><span data-stu-id="94957-427">-   58% 25 KB (small XML messages)</span></span><br /><span data-ttu-id="94957-428">-25 %512 KB （中等规模 XML 消息）</span><span class="sxs-lookup"><span data-stu-id="94957-428">-   25% 512 KB (medium XML messages)</span></span><br /><span data-ttu-id="94957-429">-11 %3 MB （中等规模二进制数据 – PDF）-非可压缩</span><span class="sxs-lookup"><span data-stu-id="94957-429">-   11% 3 MB (medium binary data – PDF) – non compressible</span></span><br /><span data-ttu-id="94957-430">-4 %7.5 MB （大型二进制数据 – PDF）-非可压缩)</span><span class="sxs-lookup"><span data-stu-id="94957-430">-   4% 7.5 MB (large binary data – PDF) – non compressible)</span></span><br /><span data-ttu-id="94957-431">-2 %20 MB （大型二进制数据 – PDF）-非可压缩</span><span class="sxs-lookup"><span data-stu-id="94957-431">-   2% 20 MB (large binary data – PDF) – non compressible</span></span>|  
    |<span data-ttu-id="94957-432">**峰值负载处理要求**</span><span class="sxs-lookup"><span data-stu-id="94957-432">**Peak load processing requirements**</span></span>|<span data-ttu-id="94957-433">大型二进制数据 (20 MB) 将表示大约 2%的数据 （如同上面所指定） 这处理时间是不可预知。</span><span class="sxs-lookup"><span data-stu-id="94957-433">Large binary data (20MB) will represent approximately 2% of data (as specified above) the time at which this is processed is non-predictable.</span></span> <span data-ttu-id="94957-434">系统必须能够在任何给定时间适应这些大型消息。</span><span class="sxs-lookup"><span data-stu-id="94957-434">The system must be able to accommodate these large messages at any given time.</span></span>|  
    |<span data-ttu-id="94957-435">**用于接收/发送消息的终结点**</span><span class="sxs-lookup"><span data-stu-id="94957-435">**Endpoints used to receive/send messages**</span></span>|<span data-ttu-id="94957-436">**小的 XML 消息 (25 KB)**</span><span class="sxs-lookup"><span data-stu-id="94957-436">**Small XML messages (25 KB)**</span></span><br /><br /> <span data-ttu-id="94957-437">-接收位置： PaymentXMLDocIn</span><span class="sxs-lookup"><span data-stu-id="94957-437">-   Receive location: PaymentXMLDocIn</span></span><br /><span data-ttu-id="94957-438">-主机： ReceiveHost</span><span class="sxs-lookup"><span data-stu-id="94957-438">-   Host: ReceiveHost</span></span><br /><span data-ttu-id="94957-439">-使用管道： XMLReceive</span><span class="sxs-lookup"><span data-stu-id="94957-439">-   Pipeline used: XMLReceive</span></span><br /><br /> <span data-ttu-id="94957-440">**中等规模的 XML 消息 (512 KB)**</span><span class="sxs-lookup"><span data-stu-id="94957-440">**Medium XML messages (512 KB)**</span></span><br /><br /> <span data-ttu-id="94957-441">-接收位置： PaymentXMLDocIn</span><span class="sxs-lookup"><span data-stu-id="94957-441">-   Receive location: PaymentXMLDocIn</span></span><br /><span data-ttu-id="94957-442">-主机： ReceiveHost</span><span class="sxs-lookup"><span data-stu-id="94957-442">-   Host: ReceiveHost</span></span><br /><span data-ttu-id="94957-443">-使用管道： XMLReceive</span><span class="sxs-lookup"><span data-stu-id="94957-443">-   Pipeline used: XMLReceive</span></span><br /><br /> <span data-ttu-id="94957-444">**中等规模二进制数据 (3 MB) – PDF-非可压缩**</span><span class="sxs-lookup"><span data-stu-id="94957-444">**Medium binary data (3 MB) – PDF – non compressible**</span></span><br /><br /> <span data-ttu-id="94957-445">-接收位置： BinaryDataIn</span><span class="sxs-lookup"><span data-stu-id="94957-445">-   Receive location: BinaryDataIn</span></span><br /><span data-ttu-id="94957-446">-主机： ReceiveHost</span><span class="sxs-lookup"><span data-stu-id="94957-446">-   Host: ReceiveHost</span></span><br /><span data-ttu-id="94957-447">-使用管道： PassThruReceive</span><span class="sxs-lookup"><span data-stu-id="94957-447">-   Pipeline used: PassThruReceive</span></span><br /><br /> <span data-ttu-id="94957-448">**大型二进制数据 (7.5 MB – 20 MB) – PDF-非可压缩**</span><span class="sxs-lookup"><span data-stu-id="94957-448">**Large binary data (7.5 MB – 20 MB) – PDF – non compressible**</span></span><br /><br /> <span data-ttu-id="94957-449">-接收位置： BinaryDataIn</span><span class="sxs-lookup"><span data-stu-id="94957-449">-   Receive location: BinaryDataIn</span></span><br /><span data-ttu-id="94957-450">-主机： ReceiveHost</span><span class="sxs-lookup"><span data-stu-id="94957-450">-   Host: ReceiveHost</span></span><br /><span data-ttu-id="94957-451">-使用管道： PassThruReceive</span><span class="sxs-lookup"><span data-stu-id="94957-451">-   Pipeline used: PassThruReceive</span></span>|  
    |<span data-ttu-id="94957-452">**测试数据的位置**</span><span class="sxs-lookup"><span data-stu-id="94957-452">**Location of test data**</span></span>|<span data-ttu-id="94957-453">本地访问测试数据文件共享，例如： \\\PerformanceLabs\July\Test Data\\</span><span class="sxs-lookup"><span data-stu-id="94957-453">Locally accessible test data file share, for example: \\\PerformanceLabs\July\Test Data\\</span></span>|  
  
     <span data-ttu-id="94957-454">将信息放入一个表可实现多个目的。</span><span class="sxs-lookup"><span data-stu-id="94957-454">Putting the information into a table accomplishes several things.</span></span> <span data-ttu-id="94957-455">第一次关闭，可轻松用于利益干系人以达成一致的测试数据所做的假设。</span><span class="sxs-lookup"><span data-stu-id="94957-455">First off, it makes it easier for stakeholders to agree on assumptions made about the test data.</span></span> <span data-ttu-id="94957-456">其次，它你提供可用于确定为性能评估潜在优化的信息。</span><span class="sxs-lookup"><span data-stu-id="94957-456">Second, it provides you with information that can be used to decide on potential optimizations for the performance assessment.</span></span> <span data-ttu-id="94957-457">例如上面表中可以查看用于处理所有不同的数据类型的所有接收位置都位于 ReceiveHost BizTalk 主机中。</span><span class="sxs-lookup"><span data-stu-id="94957-457">For example in the table above you can see that all the receive locations used to process all different data types are hosted within the ReceiveHost BizTalk host.</span></span> <span data-ttu-id="94957-458">这意味着此主机的每个实例将负责处理不同类型和大小的数据 （例如 XML 和二进制非可压缩 PDF 数据）。</span><span class="sxs-lookup"><span data-stu-id="94957-458">This means that each instance of this host will be responsible for processing different types and sizes of data (e.g. XML and binary non-compressible PDF data).</span></span> <span data-ttu-id="94957-459">假设每个主机实例是 BizTalk 服务器进程 (BTSNTSVC 具有单个实例。EXE)，这可能会变得是处理瓶颈。</span><span class="sxs-lookup"><span data-stu-id="94957-459">Given that each host instance is a single instance of the BizTalk Server process (BTSNTSVC.EXE), this could become a processing bottleneck.</span></span> <span data-ttu-id="94957-460">因此在此方案中显而易见优化环境将测试的分隔每个性能改进一个接收到其自己的各个主机的位置。</span><span class="sxs-lookup"><span data-stu-id="94957-460">Therefore in this scenario one immediately obvious optimization for the environment would be to test the performance improvement of separating each receive location into its own individual host.</span></span> <span data-ttu-id="94957-461">在摘要的表格格式有权访问的测试数据信息便于仪表这样的简单优化。</span><span class="sxs-lookup"><span data-stu-id="94957-461">Having access to the test data information in a summary tabular format makes it easier to gauge simple optimizations such as this.</span></span>  
  
-   <span data-ttu-id="94957-462">**规划进行自动负载测试和负载生成**-建立性能评估的测试数据配置文件后，务必考虑如何执行负载测试环境中。</span><span class="sxs-lookup"><span data-stu-id="94957-462">**Planning for automated load tests and load generation** - After the test data profile for the performance assessment is established, it is important to consider how to perform load testing within the environment.</span></span> <span data-ttu-id="94957-463">对于 BizTalk Server 2010 负载测试，我们将使用 Visual Studio 2010 负载测试。</span><span class="sxs-lookup"><span data-stu-id="94957-463">For BizTalk Server 2010 load test, we used Visual Studio 2010 load test.</span></span> <span data-ttu-id="94957-464">有关如何以便于负载测试使用 Visual Studio 2010 的详细信息，请参阅[促进自动测试使用 Visual Studio](../technical-guides/using-visual-studio-to-facilitate-automated-testing.md)。</span><span class="sxs-lookup"><span data-stu-id="94957-464">For more information about how to facilitate load testing using Visual Studio 2010, see [Using Visual Studio to Facilitate Automated Testing](../technical-guides/using-visual-studio-to-facilitate-automated-testing.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="94957-465">另请参阅</span><span class="sxs-lookup"><span data-stu-id="94957-465">See Also</span></span>  
 [<span data-ttu-id="94957-466">性能评估阶段</span><span class="sxs-lookup"><span data-stu-id="94957-466">Phases of a Performance Assessment</span></span>](../technical-guides/phases-of-a-performance-assessment.md)