---
title: "实现版本控制策略 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0a3c7af6-6277-4667-8f14-e6d1cb9e99d4
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 03bab9863107b26df615af1b51398ca4c314ee3b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="implementing-a-versioning-strategy"></a><span data-ttu-id="58484-102">实现版本控制策略</span><span class="sxs-lookup"><span data-stu-id="58484-102">Implementing a Versioning Strategy</span></span>
<span data-ttu-id="58484-103">版本控制是项目的更新的实现以及其版本号递增的操作。</span><span class="sxs-lookup"><span data-stu-id="58484-103">Versioning is the act of updating the implementation of an artifact and incrementing its version number.</span></span>  
  
## <a name="general-versioning-issues"></a><span data-ttu-id="58484-104">一般版本控制问题</span><span class="sxs-lookup"><span data-stu-id="58484-104">General Versioning Issues</span></span>  
 <span data-ttu-id="58484-105">BizTalk 应用程序版本控制可以成为一个问题，当您需要同时运行两个版本的 BizTalk 解决方案由并行，或者如果您无法计划 BizTalk 应用程序停机时间从而部署的新版本。</span><span class="sxs-lookup"><span data-stu-id="58484-105">BizTalk application versioning can become an issue when you need to run two versions of a BizTalk solution side-by-side, or if you cannot schedule BizTalk application downtime to deploy a new version.</span></span> <span data-ttu-id="58484-106">如果不需要运行两个版本的同时 （例如，如果你不有任何长时间运行业务流程） 解决方案，它是完全可以接受取消部署的旧版本和版本控制策略 （没有程序集版本控制） 作为部署的新版本。</span><span class="sxs-lookup"><span data-stu-id="58484-106">If you do not need to run two versions of the solution simultaneously (for example, if you have no long-running orchestrations), then it is perfectly acceptable to undeploy the old version and deploy the new version as a versioning strategy (no assembly versioning).</span></span> <span data-ttu-id="58484-107">这是可能的版本控制策略，但我们仍建议使用 （若要让你知道哪个版本部署在 BizTalk server 上） 的文件版本号递增。</span><span class="sxs-lookup"><span data-stu-id="58484-107">This is a possible versioning strategy, although we still recommend incrementing the file version number (to let you know which version is deployed on the BizTalk servers).</span></span> <span data-ttu-id="58484-108">有关更新部署的应用程序的详细信息，请参阅[清单： 更新程序集](../technical-guides/checklist-updating-an-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="58484-108">For more information about updating an application that is deployed, see [Checklist: Updating an Assembly](../technical-guides/checklist-updating-an-assembly.md).</span></span>  
  
 <span data-ttu-id="58484-109">如果你需要支持长时间运行业务流程和/或你需要执行 BizTalk 应用程序部署，且无 BizTalk 应用程序停机时间，然后可靠的 BizTalk 版本控制策略需要进行实现，并且练习用于不同的端到端版本控制方案。</span><span class="sxs-lookup"><span data-stu-id="58484-109">If you need to support long-running orchestrations, and/or you need to perform BizTalk application deployments with no BizTalk application downtime, then a solid BizTalk versioning strategy needs to be implemented and practiced end-to-end for the different versioning scenarios.</span></span> <span data-ttu-id="58484-110">这包括.NET 程序集版本控制和版本控制的所有 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="58484-110">This includes .NET assembly versioning and versioning of all BizTalk artifacts.</span></span> <span data-ttu-id="58484-111">这包括架构、 地图、 管道、 管道组件、 业务流程、 自定义适配器、 自定义类中被调用的业务流程和图、 业务规则和 BAM。</span><span class="sxs-lookup"><span data-stu-id="58484-111">This includes schemas, maps, pipelines, pipeline components, orchestrations, custom adapters, custom classes called in orchestrations and maps, business rules, and BAM.</span></span> <span data-ttu-id="58484-112">有关的并行版本控制的详细信息，请参阅[更新使用的并行版本控制](../technical-guides/updating-using-side-by-side-versioning.md)。</span><span class="sxs-lookup"><span data-stu-id="58484-112">For more information about side-by-side versioning, see [Updating Using Side-by-Side Versioning](../technical-guides/updating-using-side-by-side-versioning.md).</span></span>  
  
## <a name="versioning-an-assembly"></a><span data-ttu-id="58484-113">程序集版本控制</span><span class="sxs-lookup"><span data-stu-id="58484-113">Versioning an Assembly</span></span>  
 <span data-ttu-id="58484-114">在更新程序集时，你可以在以下选择：</span><span class="sxs-lookup"><span data-stu-id="58484-114">When you update an assembly, you have a choice between the following:</span></span>  
  
-   <span data-ttu-id="58484-115">选择是固定的程序集的版本提供可交付结果和的文件版本号递增。</span><span class="sxs-lookup"><span data-stu-id="58484-115">Choosing a fixed assembly version for a given deliverable and incrementing only the file version number.</span></span>  
  
-   <span data-ttu-id="58484-116">在开发过程增加程序集版本和文件版本。</span><span class="sxs-lookup"><span data-stu-id="58484-116">Incrementing both the assembly version and the file version during the course of development.</span></span>  
  
 <span data-ttu-id="58484-117">下表中，这些方法进行比较：</span><span class="sxs-lookup"><span data-stu-id="58484-117">These approaches are compared in the following table:</span></span>  
  
|<span data-ttu-id="58484-118">**固定的程序集版本，动态文件版本**</span><span class="sxs-lookup"><span data-stu-id="58484-118">**Fixed assembly version, dynamic file version**</span></span>|<span data-ttu-id="58484-119">**动态程序集版本，固定或动态文件版本**</span><span class="sxs-lookup"><span data-stu-id="58484-119">**Dynamic assembly version, fixed or dynamic file version**</span></span>|  
|------------------------------------------------------|-----------------------------------------------------------------|  
|<span data-ttu-id="58484-120">程序集版本号 = 固定版本号</span><span class="sxs-lookup"><span data-stu-id="58484-120">Assembly version number = Fixed number</span></span><br /><br /> <span data-ttu-id="58484-121">文件版本号 = 内部版本号</span><span class="sxs-lookup"><span data-stu-id="58484-121">File version number = Build number</span></span>|<span data-ttu-id="58484-122">程序集版本号 = 内部版本号</span><span class="sxs-lookup"><span data-stu-id="58484-122">Assembly version number = Build number</span></span><br /><br /> <span data-ttu-id="58484-123">文件版本号 = 内部版本号</span><span class="sxs-lookup"><span data-stu-id="58484-123">File version number = Build number</span></span>|  
|<span data-ttu-id="58484-124">如果多个程序集安装 BizTalk Server 运行时可能会选择错误版本的程序集。</span><span class="sxs-lookup"><span data-stu-id="58484-124">BizTalk Server runtime may pick up the wrong version of the assembly if multiple assemblies are installed.</span></span>|<span data-ttu-id="58484-125">BizTalk Server 始终运行最新版本的程序集，即使安装多个程序集。</span><span class="sxs-lookup"><span data-stu-id="58484-125">BizTalk Server always runs the latest version of the assembly, even if multiple assemblies are installed.</span></span>|  
|<span data-ttu-id="58484-126">在任何时候只能部署解决方案的一个版本。</span><span class="sxs-lookup"><span data-stu-id="58484-126">Only one version of the solution can be deployed at any time.</span></span>|<span data-ttu-id="58484-127">（尽管解决方案，例如架构定义的其他方面，可能会发生冲突），可以并排部署的解决方案的不同版本。</span><span class="sxs-lookup"><span data-stu-id="58484-127">Different versions of the solution can be deployed side by side (although other aspects of the solution, such as schema definitions, may conflict).</span></span>|  
|<span data-ttu-id="58484-128">需要重新启动 BizTalk 主机以强制加载已更新的程序集。</span><span class="sxs-lookup"><span data-stu-id="58484-128">BizTalk Host needs to be restarted to force the loading of updated assemblies.</span></span>|<span data-ttu-id="58484-129">强制 BizTalk Server，以加载新的程序集。</span><span class="sxs-lookup"><span data-stu-id="58484-129">Forces BizTalk Server to load new assemblies.</span></span>|  
|<span data-ttu-id="58484-130">由于无需编辑引用程序集版本号的文件（例如绑定文件和跟踪配置文件），因此进行新部署的工作量较轻。</span><span class="sxs-lookup"><span data-stu-id="58484-130">Requires less work to create a new deployment because files that reference the assembly version number (for example, binding files and tracking profiles) do not need to be edited.</span></span>|<span data-ttu-id="58484-131">由于需要不断地使用新版本来更新引用程序集版本号的文件，因此部署的工作量较重。</span><span class="sxs-lookup"><span data-stu-id="58484-131">Requires more work for deployment because files that reference the assembly version number need to be kept updated with the new version.</span></span>|  
  
 <span data-ttu-id="58484-132">你可以选择使用的固定的程序集版本和动态文件版本方法，如果你是原型制作系统或开发任何其他类型的项目不会释放。</span><span class="sxs-lookup"><span data-stu-id="58484-132">You may choose to use the fixed assembly version and dynamic file version approach if you are prototyping a system or developing any other type of project that will not be released.</span></span> <span data-ttu-id="58484-133">如果不打算将应用程序交付给最终用户，则可以通过固定程序集版本和以增量形式更改文件版本号的方法来简化部署并减少中断的依存关系。</span><span class="sxs-lookup"><span data-stu-id="58484-133">If you do not intend to deliver the application to an end user, you can streamline deployment tasks and reduce broken dependencies by fixing the assembly version and incrementing the file version number.</span></span> <span data-ttu-id="58484-134">对于版本跟踪，必须记住为每个内部版本以增量形式更改文件版本号。</span><span class="sxs-lookup"><span data-stu-id="58484-134">For version tracking, you must remember to increment the file version number for each build.</span></span>  
  
 <span data-ttu-id="58484-135">如果要生成交付给最终用户的项目，则应考虑以增量方式更改程序集版本号，也可以存储一个有意义的文件版本号。</span><span class="sxs-lookup"><span data-stu-id="58484-135">If you are building a project that will be delivered to an end user, you should consider incrementing the assembly version number and, optionally, storing a meaningful file version number.</span></span> <span data-ttu-id="58484-136">虽然此方法需要进行更多的工作来修改内部版本号和相关联的依存关系，但它可以确保使用最新的程序集。</span><span class="sxs-lookup"><span data-stu-id="58484-136">While this approach incurs the added effort of modifying build numbers and associated dependencies, it ensures that the latest versions of your assemblies are used.</span></span> <span data-ttu-id="58484-137">通过使用自动部署脚本，可以减少版本控制的影响。</span><span class="sxs-lookup"><span data-stu-id="58484-137">By using automated deployment scripts, you can lessen the impact of versioning.</span></span> <span data-ttu-id="58484-138">若要查看部署示例，请参阅[应用程序部署 （BizTalk Server 示例文件夹中）](http://go.microsoft.com/fwlink/?LinkId=155134) (http://go.microsoft.com/fwlink/?LinkId=155134) 中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]帮助。</span><span class="sxs-lookup"><span data-stu-id="58484-138">To view deployment samples, see [Application Deployment (BizTalk Server Samples Folder)](http://go.microsoft.com/fwlink/?LinkId=155134) (http://go.microsoft.com/fwlink/?LinkId=155134) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="58484-139">你应选择的版本控制机制，它可确保正确文件被传递，并且它可用于简化维护和增强功能。</span><span class="sxs-lookup"><span data-stu-id="58484-139">You should choose the versioning mechanism that ensures that the proper files are delivered and that simplifies maintenance and enhancement.</span></span>  
  
 <span data-ttu-id="58484-140">有关版本控制问题的详细信息，请参阅[BizTalk 服务器项目版本控制](http://go.microsoft.com/fwlink/?LinkID=154209)(http://go.microsoft.com/fwlink/?LinkID=154209) 中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]帮助。</span><span class="sxs-lookup"><span data-stu-id="58484-140">For more information about versioning issues, see [BizTalk Server Project Versioning](http://go.microsoft.com/fwlink/?LinkID=154209) (http://go.microsoft.com/fwlink/?LinkID=154209) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>