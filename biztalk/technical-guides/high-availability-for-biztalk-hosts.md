---
title: "BizTalk 主机的高可用性 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 3153f7f7-7e82-4b0c-9b48-e9f871de285d
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f500deb38df3f8145a2cba582164f14c87ac33d6
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="high-availability-for-biztalk-hosts"></a><span data-ttu-id="239da-102">BizTalk 主机的高可用性</span><span class="sxs-lookup"><span data-stu-id="239da-102">High Availability for BizTalk Hosts</span></span>
[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]<span data-ttu-id="239da-103">提供极其灵活地寻址高可用性，因为你可以将多个巧妙布局专用逻辑主机运行的功能，如接收和发送消息或处理业务流程，可以以物理方式部署到特定区域多个服务器。</span><span class="sxs-lookup"><span data-stu-id="239da-103"> provides great flexibility in addressing high availability because you can strategically dedicate logical hosts to run specific areas of functionality, such as receiving and sending messages or processing orchestrations, that can be physically deployed to multiple servers.</span></span>  
  
 <span data-ttu-id="239da-104">BizTalk 主机是中的逻辑容器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组可以存放[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]项如适配器发送处理程序 （包括管道）、 接收位置和业务流程。</span><span class="sxs-lookup"><span data-stu-id="239da-104">A BizTalk Host is a logical container within a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group that can house [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] items such as adapter send handlers (including pipelines), receive locations, and orchestrations.</span></span> <span data-ttu-id="239da-105">通常，您可将具有类似扩展属性的项分到特定的主机中。</span><span class="sxs-lookup"><span data-stu-id="239da-105">You typically group items that have similar scale properties into a particular host.</span></span>  
  
 <span data-ttu-id="239da-106">创建主机后，可以将其部署到物理[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]作为主机实例的计算机。</span><span class="sxs-lookup"><span data-stu-id="239da-106">After you create a host, you can deploy it to a physical [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer as a host instance.</span></span> <span data-ttu-id="239da-107">作为 Windows 服务，BTSNTSvc.exe （或 64 位主机实例的 BTSNTSvc64.exe） 上指定的主机实例运行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="239da-107">A host instance runs as a Windows service, BTSNTSvc.exe (or BTSNTSvc64.exe for 64-bit host instance), on the designated [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer.</span></span> <span data-ttu-id="239da-108">对于每个主机，你可以仅一个实例对特定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="239da-108">For each host, you can have only one instance on a particular [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer.</span></span> <span data-ttu-id="239da-109">但是，你可以在一个或多个特定主机的实例[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机，可以具有不同的主机的实例对特定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="239da-109">However, you can have instances of a particular host on one or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers, and you can have instances of different hosts on a particular [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer.</span></span>  
  
 <span data-ttu-id="239da-110">BizTalk 主机中包含的项可以执行以下功能：</span><span class="sxs-lookup"><span data-stu-id="239da-110">Items that are contained in BizTalk Hosts can perform the following functions:</span></span>  
  
-   <span data-ttu-id="239da-111">**接收**。</span><span class="sxs-lookup"><span data-stu-id="239da-111">**Receiving**.</span></span> <span data-ttu-id="239da-112">在接收位置中提取消息后，这些项对其进行初始处理。</span><span class="sxs-lookup"><span data-stu-id="239da-112">These items do the initial processing of messages after they are picked up in a receive location.</span></span> <span data-ttu-id="239da-113">当主机包含接收的项，如接收位置 （带有管道），在对主机中管道中会出现解码和解密该消息。</span><span class="sxs-lookup"><span data-stu-id="239da-113">When a host contains a receiving item, such as a receive location (with a pipeline), the message decoding and decrypting occurs in a pipeline within the host.</span></span>  
  
-   <span data-ttu-id="239da-114">**发送**。</span><span class="sxs-lookup"><span data-stu-id="239da-114">**Sending**.</span></span> <span data-ttu-id="239da-115">在将消息发送给发送端口前，这些项对其进行最终处理。</span><span class="sxs-lookup"><span data-stu-id="239da-115">These items do the final processing of messages before they are sent out to the send port.</span></span> <span data-ttu-id="239da-116">当主机包含发送的项，例如发送端口，消息签名和加密将出现在对主机中的管道。</span><span class="sxs-lookup"><span data-stu-id="239da-116">When a host contains a sending item, such as a send port, the message signing and encryption occurs in a pipeline within the host.</span></span>  
  
-   <span data-ttu-id="239da-117">**处理**。</span><span class="sxs-lookup"><span data-stu-id="239da-117">**Processing**.</span></span> <span data-ttu-id="239da-118">这些项来处理基于在业务流程中的说明进行操作的消息。</span><span class="sxs-lookup"><span data-stu-id="239da-118">These items process messages based on the instructions in orchestrations.</span></span>  
  
 <span data-ttu-id="239da-119">一个 BizTalk 主机可以包含接收、发送和处理消息的项。</span><span class="sxs-lookup"><span data-stu-id="239da-119">One BizTalk Host can contain items that receive, send, and process messages.</span></span> <span data-ttu-id="239da-120">更易于管理和可伸缩性，我们建议你创建不同的主机指定为每个函数。</span><span class="sxs-lookup"><span data-stu-id="239da-120">For easier management and scalability, we recommend that you create different hosts designated for each function.</span></span> <span data-ttu-id="239da-121">具体而言，我们建议你使用不同的主机，用于处理和接收/发送操作。</span><span class="sxs-lookup"><span data-stu-id="239da-121">In particular, we recommend that you use different hosts for processing and for receive/send operations.</span></span>  
  
 <span data-ttu-id="239da-122">例如，如果您接收一条消息，运行业务流程，然后发送十条消息，则需要将接收功能和发送功能分隔到两个单独的主机中，因为发送项的流量将是接收项的十倍。</span><span class="sxs-lookup"><span data-stu-id="239da-122">For example, if you receive one message, run an orchestration, and send ten messages, you want to separate the receive and send functionality into two separate hosts because the send items will have ten times more traffic than the receive items.</span></span> <span data-ttu-id="239da-123">如果您接收一条消息，运行业务流程，然后发送一条消息，则可以将这些项视为一个工作单位，并将它们分到单个主机中。</span><span class="sxs-lookup"><span data-stu-id="239da-123">If you receive one message, run an orchestration, and send one message, you can think of these items as a unit of work and group them into one single host.</span></span> <span data-ttu-id="239da-124">或者，您可以将它们分到三个不同的主机中，以提高性能和灵活性，尽管这同时也增加了管理成本。</span><span class="sxs-lookup"><span data-stu-id="239da-124">Alternatively, you can separate them into three different hosts to increase performance and flexibility, although this also increases the management cost.</span></span>  
  
 <span data-ttu-id="239da-125">BizTalk 主机是两种类型之一*进程内*或*Isolated*。</span><span class="sxs-lookup"><span data-stu-id="239da-125">BizTalk Hosts are one of two types, *In-process* or *Isolated*.</span></span> <span data-ttu-id="239da-126">进程内主机运行的内部[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运行时进程 （BTSNTSvc.exe 或 BTSNTSvc64.exe） 和独立的主机在不运行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运行时进程。</span><span class="sxs-lookup"><span data-stu-id="239da-126">In-process hosts run inside of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime process (BTSNTSvc.exe  or BTSNTSvc64.exe) and Isolated hosts do not run in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] runtime process.</span></span> <span data-ttu-id="239da-127">用于隔离接收适配器，才会在接收端上使用独立的主机。</span><span class="sxs-lookup"><span data-stu-id="239da-127">Isolated hosts are only used on the receiving side for the isolated receive adapters.</span></span> <span data-ttu-id="239da-128">下表分别列出了这两种主机类型可能包含的项：</span><span class="sxs-lookup"><span data-stu-id="239da-128">The following table lists the items that each of these host types may contain.</span></span>  
  
|<span data-ttu-id="239da-129">主机类型</span><span class="sxs-lookup"><span data-stu-id="239da-129">Host type</span></span>|<span data-ttu-id="239da-130">逻辑容器包含</span><span class="sxs-lookup"><span data-stu-id="239da-130">Logical container for</span></span>|  
|---------------|---------------------------|  
|<span data-ttu-id="239da-131">进程内</span><span class="sxs-lookup"><span data-stu-id="239da-131">In-process</span></span>|<span data-ttu-id="239da-132">-业务流程</span><span class="sxs-lookup"><span data-stu-id="239da-132">-   Orchestrations</span></span><br /><span data-ttu-id="239da-133">-适配器发送处理程序</span><span class="sxs-lookup"><span data-stu-id="239da-133">-   Adapter send handlers</span></span><br /><span data-ttu-id="239da-134">中的进程适配器接收处理程序</span><span class="sxs-lookup"><span data-stu-id="239da-134">-   In-process adapter receive handlers</span></span>|  
|<span data-ttu-id="239da-135">隔离</span><span class="sxs-lookup"><span data-stu-id="239da-135">Isolated</span></span>|<span data-ttu-id="239da-136">-HTTP、 SOAP 接收处理程序</span><span class="sxs-lookup"><span data-stu-id="239da-136">-   HTTP, SOAP receive handlers</span></span><br /><span data-ttu-id="239da-137">-任何其他独立的适配器接收处理程序</span><span class="sxs-lookup"><span data-stu-id="239da-137">-   Any other isolated adapter receive handlers</span></span>|  
  
 <span data-ttu-id="239da-138">有关管理 BizTalk 主机和主机实例的详细信息，请参阅[管理 BizTalk 主机和主机实例](http://go.microsoft.com/fwlink/?LinkID=154191)(http://go.microsoft.com/fwlink/?LinkID=154191) 中[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]帮助。</span><span class="sxs-lookup"><span data-stu-id="239da-138">For more information about managing BizTalk Hosts and host instances, see [Managing BizTalk Hosts and Host Instances](http://go.microsoft.com/fwlink/?LinkID=154191) (http://go.microsoft.com/fwlink/?LinkID=154191) in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help.</span></span>  
  
 <span data-ttu-id="239da-139">若要为 BizTalk 主机提供高可用性，你必须拥有两个或多个主机实例 （在两个或多个计算机） 上的每个主机你的环境。</span><span class="sxs-lookup"><span data-stu-id="239da-139">To provide high availability for BizTalk Hosts, you must have two or more host instances for each host (on two or more computers) in your environment.</span></span> <span data-ttu-id="239da-140">通过为你确保，如果一个主机实例变为不可用，主机实例正在运行的同一主机的实例的其他计算机上每个主机可以恢复的函数有问题或失败的主机实例中，让多个主机实例和总体系统可以继续使用很少发生中断执行。</span><span class="sxs-lookup"><span data-stu-id="239da-140">By having more than one host instance for each host you make sure that if one host instance becomes unavailable, the host instances on other computers that are running instances of the same host can resume the functions of the problematic or failed host instance, and that the overall system can continue performing with minimal disruption.</span></span>  
  
## <a name="disadvantages-of-additional-hosts"></a><span data-ttu-id="239da-141">其他主机的缺点</span><span class="sxs-lookup"><span data-stu-id="239da-141">Disadvantages of Additional Hosts</span></span>  
 <span data-ttu-id="239da-142">尽管有创建额外的主机实例的好处，还有潜在缺点如果创建过多的主机实例。</span><span class="sxs-lookup"><span data-stu-id="239da-142">While there are benefits of creating additional host instances, there are also potential drawbacks if too many host instances are created.</span></span> <span data-ttu-id="239da-143">每个主机实例是一个 Windows 服务 （BTSNTSvc.exe 或 BTSNTSvc64.exe），它生成额外的负载，针对 MessageBox 数据库，并会占用计算机资源，例如 CPU、 内存和线程。</span><span class="sxs-lookup"><span data-stu-id="239da-143">Each host instance is a Windows service (BTSNTSvc.exe or BTSNTSvc64.exe), which generates additional load against the MessageBox database and consumes computer resources, such as CPU, memory, and threads.</span></span> <span data-ttu-id="239da-144">除此之外，您有不配置太多额外的主机实例的以下原因：</span><span class="sxs-lookup"><span data-stu-id="239da-144">Other than these, you have the following reasons for not configuring too many additional host instances:</span></span>  
  
-   <span data-ttu-id="239da-145">几个性能计数器报告每个主机具有太多粒度。</span><span class="sxs-lookup"><span data-stu-id="239da-145">Several performance counters are reported per host with too much granularity.</span></span> <span data-ttu-id="239da-146">这将影响的管理员将需要遍历大量数据的可用性。</span><span class="sxs-lookup"><span data-stu-id="239da-146">This affects the usability for the administrator who would need to traverse through a lot of data.</span></span> <span data-ttu-id="239da-147">这对管理员的总体视图有负面影响。</span><span class="sxs-lookup"><span data-stu-id="239da-147">This has a negative impact on the overall view the administrator has.</span></span>  
  
-   <span data-ttu-id="239da-148">每个主机会占用相当多的内存，可能会导致的限制的情况和性能降低。</span><span class="sxs-lookup"><span data-stu-id="239da-148">Each host consumes considerable amount of memory that might lead to a situation of throttling and reduced performance.</span></span>  
  
-   <span data-ttu-id="239da-149">如果主机已收到连续执行轮询的适配器，每个主机将轮询数据库在短时间内，从而导致性能下降。</span><span class="sxs-lookup"><span data-stu-id="239da-149">If the hosts have receive adapters that continuously perform polling, each host will poll the database at short intervals, thereby resulting in degraded performance.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="239da-150">本节内容</span><span class="sxs-lookup"><span data-stu-id="239da-150">In This Section</span></span>  
  
-   [<span data-ttu-id="239da-151">向外扩展接收主机</span><span class="sxs-lookup"><span data-stu-id="239da-151">Scaling Out Receiving Hosts</span></span>](../technical-guides/scaling-out-receiving-hosts.md)  
  
-   [<span data-ttu-id="239da-152">群集接收主机</span><span class="sxs-lookup"><span data-stu-id="239da-152">Clustering Receiving Hosts</span></span>](../technical-guides/clustering-receiving-hosts.md)  
  
-   [<span data-ttu-id="239da-153">向外扩展处理主机</span><span class="sxs-lookup"><span data-stu-id="239da-153">Scaling Out Processing Hosts</span></span>](../technical-guides/scaling-out-processing-hosts.md)  
  
-   [<span data-ttu-id="239da-154">向外扩展发送主机</span><span class="sxs-lookup"><span data-stu-id="239da-154">Scaling Out Sending Hosts</span></span>](../technical-guides/scaling-out-sending-hosts.md)  
  
## <a name="see-also"></a><span data-ttu-id="239da-155">另请参阅</span><span class="sxs-lookup"><span data-stu-id="239da-155">See Also</span></span>  
 <span data-ttu-id="239da-156">[配置主机和主机实例](../technical-guides/configuring-hosts-and-host-instances.md) </span><span class="sxs-lookup"><span data-stu-id="239da-156">[Configuring Hosts and Host Instances](../technical-guides/configuring-hosts-and-host-instances.md) </span></span>  
 <span data-ttu-id="239da-157">[配置专用的跟踪主机](../technical-guides/configuring-a-dedicated-tracking-host.md) </span><span class="sxs-lookup"><span data-stu-id="239da-157">[Configuring a Dedicated Tracking Host](../technical-guides/configuring-a-dedicated-tracking-host.md) </span></span>  
 <span data-ttu-id="239da-158">[规划高 Availability2](../technical-guides/planning-for-high-availability2.md) </span><span class="sxs-lookup"><span data-stu-id="239da-158">[Planning for High Availability2](../technical-guides/planning-for-high-availability2.md) </span></span>  
 <span data-ttu-id="239da-159">[数据库的高可用性](../technical-guides/high-availability-for-databases.md) </span><span class="sxs-lookup"><span data-stu-id="239da-159">[High Availability for Databases](../technical-guides/high-availability-for-databases.md) </span></span>  
 [<span data-ttu-id="239da-160">主密钥服务器的高可用性</span><span class="sxs-lookup"><span data-stu-id="239da-160">High Availability for the Master Secret Server</span></span>](../technical-guides/high-availability-for-the-master-secret-server.md)