---
title: 清单：提供高可用性容错或负载均衡 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3c93cfc3-05b2-43ad-b0a9-b7f0d2596113
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bc0e50aaecf9b66b24edc9ad0974b1dfc50e4718
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65242591"
---
# <a name="checklist-providing-high-availability-with-fault-tolerance-or-load-balancing"></a><span data-ttu-id="cb449-102">清单：提供高可用性容错或负载平衡</span><span class="sxs-lookup"><span data-stu-id="cb449-102">Checklist: Providing High Availability with Fault Tolerance or Load Balancing</span></span>
<span data-ttu-id="cb449-103">本主题列出了应完成配置的容错能力和/或负载均衡的生产型的组件的步骤[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境，以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="cb449-103">This topic lists steps that you should complete to configure fault tolerance and/or load balancing for the components of a production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment to provide high availability.</span></span> <span data-ttu-id="cb449-104">这些组件的容错能力的配置将允许系统在以特定的组件失败时继续操作。</span><span class="sxs-lookup"><span data-stu-id="cb449-104">Configuration of fault tolerance for these components will allow the system to continue operating if a particular component fails.</span></span>  


|                                                                                                                                               <span data-ttu-id="cb449-105">步骤</span><span class="sxs-lookup"><span data-stu-id="cb449-105">Steps</span></span>                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="cb449-106">参考</span><span class="sxs-lookup"><span data-stu-id="cb449-106">Reference</span></span>                                                                                                                                                                                                                                                                                                                                               |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                          <span data-ttu-id="cb449-107">创建多个 BizTalk 主机实例，并实现主机群集需要这些适配器的支持。</span><span class="sxs-lookup"><span data-stu-id="cb449-107">Create multiple BizTalk host instances and implement host clustering support for those adapters that require it.</span></span>                                                                                          |                                                                                                                                                                                                                                                                                                   [<span data-ttu-id="cb449-108">BizTalk 主机的高可用性</span><span class="sxs-lookup"><span data-stu-id="cb449-108">High Availability for BizTalk Hosts</span></span>](../technical-guides/high-availability-for-biztalk-hosts.md)                                                                                                                                                                                                                                                                                                   |
|                                                                                                                          <span data-ttu-id="cb449-109">将跟踪主机以实现高可用性配置。</span><span class="sxs-lookup"><span data-stu-id="cb449-109">Configure tracking hosts for high availability.</span></span>                                                                                                                           |                                                                                                                                                                                                                                                                                                   [<span data-ttu-id="cb449-110">BizTalk 主机的高可用性</span><span class="sxs-lookup"><span data-stu-id="cb449-110">High Availability for BizTalk Hosts</span></span>](../technical-guides/high-availability-for-biztalk-hosts.md)                                                                                                                                                                                                                                                                                                   |
|                             <span data-ttu-id="cb449-111">配置[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上的群集数据库[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]Windows server 群集实例上的。</span><span class="sxs-lookup"><span data-stu-id="cb449-111">Configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases on a clustered [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance on a Windows server cluster.</span></span>                             |                                                                                                                                                                                                                                                                                                       [<span data-ttu-id="cb449-112">数据库的高可用性</span><span class="sxs-lookup"><span data-stu-id="cb449-112">High Availability for Databases</span></span>](../technical-guides/high-availability-for-databases.md)                                                                                                                                                                                                                                                                                                       |
|                                                    <span data-ttu-id="cb449-113">将跟踪主机以实现高可用性配置。</span><span class="sxs-lookup"><span data-stu-id="cb449-113">Configure tracking hosts for high availability.</span></span> <span data-ttu-id="cb449-114">验证具有跟踪启用其中 N 是 BizTalk 组中的 MessageBox 数据库的数目至少 N + 1 个主机实例。</span><span class="sxs-lookup"><span data-stu-id="cb449-114">Verify that there are at least N+1 host instances with tracking enabled where N is the number of MessageBox databases in the BizTalk group.</span></span>                                                     |                                                                                                                          <span data-ttu-id="cb449-115">若要启用主机跟踪，请选择选项**允许主机跟踪**上**主机属性**对话框中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="cb449-115">To enable tracking for a host, select the option to **Allow Host Tracking** on the **Host Properties** dialog box available from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="cb449-116">有关设置主机属性的详细信息，请参阅主题[如何修改主机属性](http://go.microsoft.com/fwlink/?LinkId=154359)(<http://go.microsoft.com/fwlink/?LinkId=154359>)。</span><span class="sxs-lookup"><span data-stu-id="cb449-116">For more information about setting host properties, see the topic [How to Modify Host Properties](http://go.microsoft.com/fwlink/?LinkId=154359) (<http://go.microsoft.com/fwlink/?LinkId=154359>).</span></span>                                                                                                                          |
|                                                                                                               <span data-ttu-id="cb449-117">练习映象以确保故障转移功能的数据库故障转移。</span><span class="sxs-lookup"><span data-stu-id="cb449-117">Practice database failover regularly to ensure failover functionality.</span></span>                                                                                                               |                                                                                                                                                                                                                                                                                                  <span data-ttu-id="cb449-118">应直接分配此职责，以确保这针对以一致的方式执行。</span><span class="sxs-lookup"><span data-stu-id="cb449-118">This responsibility should be directly assigned to ensure that this is done on a consistent basis.</span></span>                                                                                                                                                                                                                                                                                                   |
|                                <span data-ttu-id="cb449-119">验证有足够的处理能力和被动群集节点上的内存允许将多个[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]实例在故障转移方案下同时运行。</span><span class="sxs-lookup"><span data-stu-id="cb449-119">Verify there is enough processing power and memory on the passive cluster nodes to enable multiple [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances to run simultaneously in failover scenarios.</span></span>                                |                                                                                <span data-ttu-id="cb449-120">如果两个 SQL 实例定期使用超过 50%的各个群集节点上的资源，然后当这两个实例故障转移到单个节点，每个实例会产生性能下降。</span><span class="sxs-lookup"><span data-stu-id="cb449-120">If two SQL instances regularly consume over 50 percent of the resources on individual cluster nodes, then when both instances fail over to a single node, each instance will incur degraded performance.</span></span> <span data-ttu-id="cb449-121">因此，应执行测试以确保单个群集节点能够处理负载，直到发生故障的节点重新联机。</span><span class="sxs-lookup"><span data-stu-id="cb449-121">Therefore, testing should be performed to ensure that a single cluster node will be able to handle the load until the failed node is brought back online.</span></span> <span data-ttu-id="cb449-122">如果单个节点不能处理的这两个 SQL 实例的负载然后请考虑添加其他群集节点，以实现主动/主动/被动群集拓扑。</span><span class="sxs-lookup"><span data-stu-id="cb449-122">If a single node cannot handle the load of both SQL instances then consider adding additional cluster nodes to implement an Active/Active/Passive cluster topology.</span></span>                                                                                 |
| <span data-ttu-id="cb449-123">实现存储区域网络 (SAN) 以容纳[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="cb449-123">Implement a storage area network (SAN) to house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="cb449-124">**注意：** 如果可能，请配置 SAN 磁盘使用 RAID 1 + 0 （带区的镜像集） 的最大性能和高可用性拓扑。</span><span class="sxs-lookup"><span data-stu-id="cb449-124">**Note:**  If possible, configure the SAN disks using RAID 1+0 (a stripe of mirror sets) topology for maximum performance and high availability.</span></span> |                                                                                                                                                                                                                                    <span data-ttu-id="cb449-125">在中["BizTalk Server 数据库优化白皮书"](http://go.microsoft.com/fwlink/?linkid=104427) (<http://go.microsoft.com/fwlink/?linkid=104427>)，请参阅"优化性能"下的"磁盘基础结构"部分。</span><span class="sxs-lookup"><span data-stu-id="cb449-125">In the [“BizTalk Server Database Optimization white paper”](http://go.microsoft.com/fwlink/?linkid=104427) (<http://go.microsoft.com/fwlink/?linkid=104427>), see the "Disk Infrastructure" section under "Performance Tuning".</span></span>                                                                                                                                                                                                                                    |
|                                                                                                    <span data-ttu-id="cb449-126">使用 Windows 群集来群集企业单一登录 (SSO) 主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="cb449-126">Use Windows Clustering to cluster the Enterprise Single Sign-On (SSO) master secret server.</span></span>                                                                                                     | <span data-ttu-id="cb449-127">[主密钥服务器的高可用性](../technical-guides/high-availability-for-the-master-secret-server.md)**注意：** 未运行的计算机上群集 SSO 服务[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]除非群集 SSO 和 BizTalk 主机在同一群集组中的。</span><span class="sxs-lookup"><span data-stu-id="cb449-127">[High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md) **Note:**  Do not cluster the SSO service on a computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] unless you cluster SSO and a BizTalk host in the same cluster group.</span></span> <span data-ttu-id="cb449-128">有关群集 SSO 服务的详细信息和一个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]看到同一群集组中的主机[群集 SSO 和 BizTalk 主机在同一群集组中如何](http://go.microsoft.com/fwlink/?LinkId=154367)(<http://go.microsoft.com/fwlink/?LinkId=154367>)。</span><span class="sxs-lookup"><span data-stu-id="cb449-128">For more information about clustering the SSO service and a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host in the same cluster group see [How to Cluster SSO and a BizTalk Host in the Same Cluster Group](http://go.microsoft.com/fwlink/?LinkId=154367) (<http://go.microsoft.com/fwlink/?LinkId=154367>).</span></span> |
|                                                                                                                     <span data-ttu-id="cb449-129">备份企业单一登录 (SSO) 主密钥。</span><span class="sxs-lookup"><span data-stu-id="cb449-129">Back up the Enterprise Single Sign-On (SSO) Master Secret.</span></span>                                                                                                                     |                                                                                                                                                                                                                                                                               <span data-ttu-id="cb449-130">请参阅[如何备份主密钥](http://go.microsoft.com/fwlink/?LinkID=151395)(<http://go.microsoft.com/fwlink/?LinkID=151395>)。</span><span class="sxs-lookup"><span data-stu-id="cb449-130">See [How to Back Up the Master Secret](http://go.microsoft.com/fwlink/?LinkID=151395) (<http://go.microsoft.com/fwlink/?LinkID=151395>).</span></span>                                                                                                                                                                                                                                                                                |
|                                           <span data-ttu-id="cb449-131">配置独立的主机实例和 BAM 门户网页上使用网络负载平衡 (NLB) 或其他负载平衡设备高度可用的 Internet 信息服务 (IIS) Web 服务器。</span><span class="sxs-lookup"><span data-stu-id="cb449-131">Configure the Internet Information Services (IIS) Web server for isolated host instances and the BAM Portal Web page to be highly available using Network Load Balancing (NLB) or other load balancing device.</span></span>                                           |                                                                                                                                                                                                                                                             <span data-ttu-id="cb449-132">**适用于 Windows Server 2008**:请参阅[网络负载平衡部署指南](http://go.microsoft.com/fwlink/?LinkId=153139)(<http://go.microsoft.com/fwlink/?LinkId=153139>)。</span><span class="sxs-lookup"><span data-stu-id="cb449-132">**For Windows Server 2008**: See [Network Load Balancing Deployment Guide](http://go.microsoft.com/fwlink/?LinkId=153139) (<http://go.microsoft.com/fwlink/?LinkId=153139>).</span></span>                                                                                                                                                                                                                                                              |

## <a name="see-also"></a><span data-ttu-id="cb449-133">请参阅</span><span class="sxs-lookup"><span data-stu-id="cb449-133">See Also</span></span>  
 [<span data-ttu-id="cb449-134">提供高可用性</span><span class="sxs-lookup"><span data-stu-id="cb449-134">Providing High Availability</span></span>](../technical-guides/providing-high-availability.md)