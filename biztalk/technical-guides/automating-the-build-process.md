---
title: 自动执行生成过程 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 995dac20-82a1-46ed-b8a3-0aa6182cb821
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 22752c413446c0964b8af11b76a2e262fdc40a2d
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36997726"
---
# <a name="automating-the-build-process"></a>自动执行生成过程
自动的构建过程编译、 部署并按常规、 预先确定的时间间隔对项目的最新源代码然后运行生成验证测试 (Bvt)。 然后"生成报告，"详细信息是成功还是失败的生成过程，这被至项目利益关系人。 在生成报告分析以确定项目的方面需要注意，如果该项目应将其回滚到以前的版本/生成。  
  
 自动的生成过程的强大功能是可以为计划要运行在"关闭时间。" 这样一来，它可以帮助确保项目的稳定性，无需采用直接从开发时间周期。   
 本主题提供的生成过程概述，介绍如何生成验证测试适用于生成过程，介绍生成验证测试期间使用的功能测试并提供信息的重要性自动执行生成过程。  
  
## <a name="overview-of-the-build-process"></a>生成过程概述  
 在之前查看的测试细节，务必要考虑测试如何适合整个生成过程的上下文。 所有 Microsoft 的产品组从理念操作，生成过程是任何软件项目的检测信号。 此方法还使用由许多咨询公司生成关键任务解决方案位于 Microsoft 软件堆栈顶部的世界上最顶部。 如果不稳定的检测信号和常规检查，就无法了解项目的运行状况。 若要确保产品组具有项目的总体运行状况持续见解，生成过程是每天运行，通常在午夜。 以下步骤总结了典型的自动的生成过程：  
  
1.  从源代码存储库获取最新版本的源代码。  
  
2.  编译的源代码。  
  
3.  打包部署 – 应用通常使用脚本或 Microsoft Windows Installer 文件的二进制文件。  
  
4.  将项目部署到测试服务器。  
  
5.  自动运行一套完整的生成验证测试 (Bvt)。  
  
6.  将详细的生成报表发布到项目团队的成员。  
  
> [!NOTE]  
>  Bvt 是解决方案的功能测试，执行要测试其质量的主要功能。  您必须确保你 Bvt 的全面，可以测量生成质量，但都比较大，已分配的每日生成时间内执行 ！  
  
> [!NOTE]  
>  您应将视为出于测试目的软件项目的一部分的任何部署、 取消部署、 配置和安装脚本或进程。 应测试的项目，以及部署和配置它，这两种操作。  
  
 按早期早上大约 6 上午，使要开始在新的一天生成的工作的第一个团队成员通常完成此过程。 如果一个或多个来自前一天夜间 Bvt 失败，则团队的职责，若要尽可能快地解决。  
  
 每日生成过程会有很多优点的项目。 首先，它提供了正则检测信号 （每日生成以及自动化的 Bvt 组成）。 其次，使用 Bvt 强制与系统的集成，这是比较棘手的任务，并进行此早期本身减少项目风险。 由于完成所需的时间，压力和性能测试通常执行的每日生成进程之外。 压力和性能测试通常计划要执行项目中的里程碑内部版本。  
  
 每日生成过程的准备，并已被使用非常有效地对 BizTalk 解决方案。 但是，您需要确保从一开始会以迭代方式完成通常保留为在项目中的任务。 例如，在 BizTalk Server 中的部署是当然不常用。 请务必提前开发自动的部署脚本。 如果不这样做，您就会手动部署和取消部署很多时候整个项目中，成本更多时间最终解决方案。 有一些工具可用来驱动每日生成过程;Visual Studio Team System 和 Team Foundation Server 是许多人的主选择。 MSBuild 脚本可能用于生成过程中驱动器的步骤。 另一种方法是开放源代码[CruiseControl.NET 工具](http://go.microsoft.com/fwlink/?LinkId=116093)(http://go.microsoft.com/fwlink/?LinkId=116093)。  
  
> [!NOTE]  
>  使用此工具不受 Microsoft，因此 Microsoft 不保证此程序的适用性。 使用此程序风险自负。  
  
 有关自动执行测试使用 Microsoft 测试管理器的详细信息，请参阅主题[运行自动测试](http://go.microsoft.com/fwlink/?LinkID=208368)(http://go.microsoft.com/fwlink/?LinkID=208368) Visual Studio 2010 联机文档中  
  
 有关自动执行生成过程使用的 Visual Studio 2010 的详细信息，请参阅[生成应用程序](http://go.microsoft.com/fwlink/?LinkID=208369)(超链接"<http://go.microsoft.com/fwlink/?LinkID=208369>" <http://go.microsoft.com/fwlink/?LinkID=208369>) Visual Studio 2010 文档中。  
  
## <a name="build-verification-testing"></a>生成验证测试  
 生成验证测试通常包含下列元素：  
  
- **单元测试**-因为单元测试通常是要开发的第一个测试，理想情况下应之前创建它们实际编写代码，如果您真正使用的测试驱动的开发方法。 通过将其添加到 bvt 的形式在项目的早期阶段，你提供至少某些代码覆盖率立即。 功能测试的数，因此测试覆盖率的增长，你可以选择从 Bvt 删除单元测试。  
  
- **冒烟测试**-测试你的解决方案的基本功能的端到端功能测试。 这些失败，有严重问题。 这些通常运行时能相对快。  
  
- **功能测试**-这些还针对端到端方案，但在这种情况下它们在项目中测试所有方案。 对于大型项目可能有意义进行分类进一步的功能测试 (例如，若要启用快速、 可靠以及隔离要测试的特定组件)。 在你的解决方案为功能上正确注销后，应锁定这些功能测试。  
  
- **回归验证测试**-每次找到和修复，应添加测试用例来验证 bug 固定的它不引入项目生命周期中更高版本的回归验证解决方案 bug。  这些测试通常是功能测试用例中未覆盖的情况。 可以预见，即使解决方案已实时，如果新 bug 将发现并修复回归验证测试会增加数量。  
  
  在非常大的项目，可能需要使你 Bvt （由于执行它们所花的时间长度） 的完整功能的测试套件的子集。 对于较小项目，Bvt 将构成整个集。 显然，如果要将 Bvt 作为每日生成的一部分进行集成，需要自动执行整个过程。 在本主题的其余部分，我们将重点介绍如何使用 BizUnit 和其他工具来实现此目的。  
  
## <a name="functional-testing"></a>功能测试  
 在 BizTalk 应用程序的上下文中的功能测试，测试特定的端到端方案。 在执行此类型的测试时，它可用于为功能上测试从外部的角度来看一个黑色框 imagine BizTalk Server。 例如，测试可能涉及将 （与已知值） 的输入的消息馈送到接收位置终结点 (示例中，URL，FTP 位置，无论是你选择的传输)。 然后，测试会监视正确的发送端生成的正确输出的消息数。 这可能听起来相对比较简单。 但是，当您考虑到一些情况下，需要输入以特定顺序并在某个时间，并与其他解决方案要求对此进行复合时 (例如，在 BAM 中记录跟踪数据时)，它就变得显而易见的工具和框架可用于这可以协调。  
  
 很重要的功能测试的设计目的在于通过解决方案的所有可能路径。 这应包括这些方案不只希望在生产中，但还故障路径和异常处理路径中用过但永远不会希望使用 – 通常用于描述这一短语正在测试的"他们失意的时候方案"。 您应确保所有业务流程、 所有允许的消息类型和所有代码分支都执行的功能测试套件。 以下部分介绍开发正值和负值功能测试用例以涵盖所有代码路径。  
  
 有关 BizTalk Server 解决方案投入生产之前, 应实现的其他测试的类别和功能测试详细信息，请参阅主题[清单： 测试操作准备情况](http://go.microsoft.com/fwlink/?LinkId=160138)中在 BizTalk Server 2010 操作指南[ http://go.microsoft.com/fwlink/?LinkId=160138 ](http://go.microsoft.com/fwlink/?LinkId=160138)。  
  
### <a name="positive-tests"></a>正向测试  
  
-   执行正向测试以确保所有的消息、 管道、 业务流程，组合时，它很重要，终结点传递解决方案，以便执行所有消息流。 若要确保测试所有代码路径将可能需要处理不同的内容不同的消息。  
  
-   在测试时，使用将在生产环境中使用的传输类型。 遗憾的是，经常，功能测试执行只能通过使用文件适配器时将在生产环境中使用某些其他传输。 采用这种方法设置你和整体项目失败进行更高版本上。  
  
-   验证从系统发送的所有消息的有效负载。 如果消息是 XML，则应验证其架构和消息使用 XPath 表达式中的键字段。  
  
-   验证 BAM （如果使用）; 中存储的任何跟踪数据留在外部数据存储库中的任何其他数据应该考虑的。  
  
-   如果您的解决方案使用 BRE，则测试所有业务规则引擎 (BRE) 策略和规则的执行。  
  
### <a name="negative-tests"></a>反向测试  
  
-   请确保您的系统通过测试的无效消息的处理。 您应验证在所选的策略 （若要拒绝它们之前，它们进入 BizTalk Server 中，或挂起） 具有正常运行。  
  
-   在测试时无效的消息的处理，请确保测试已实现的任何接收方错误处理业务流程来处理挂起的消息。  
  
-   请确保故障方案，介绍您的业务流程中的所有异常块。  无法充分地测试这是常见的问题。  
  
-   如果使用长时间运行的事务与补偿行为，请非常仔细地测试这些方案。 这是另一个区域，其中不充分的测试将会产生在生产环境中导致严重的后果。  
  
-   请确保故障正确记录在相应的错误日志。  
  
## <a name="automation-is-key"></a>自动化是密钥  
 若要有效地执行所有这些操作，花些时间提前自动执行测试。 手动测试是较长时间，且容易出错，消耗 （大量的时间和成本）。 每次执行手动测试通过，您添加项目资源 （在团队中的人） 需要处理的任务的另一个的批处理。 通过自动执行这最多前，您还能获得开发测试，每次运行时所需的初始投资回报。 很好的功能测试应快速高效地执行和可重复;每个测试也应是自治 （它应是独立于任何其他; 采用此方法可让你按顺序运行多个测试作为测试套件。）功能测试应始终生成相同的结果。 编写不佳的功能测试或编写不佳的代码将导致不同的测试结果之间测试运行，从而导致产生混淆和浪费的时间来调查失败的根本原因。  
  
 请务必最大程度减少写入每个功能测试所需的开发工作量。 通常更昂贵它是生成内容 （从开发时间），你很可能会得到更少的测试用例。 这意味着会将在代码上具有较低级别的测试覆盖率。 通过使用测试框架，您可以开发更快、 更轻松的测试用例和，因此，使其更轻松地获得完整的代码覆盖率。 大多数良好测试框架使用声明性方法进行定义的测试。 （即，为测试配置存储在配置文件中，这通常是一个 XML 文件。）使用有效测试框架可以开发完整功能敏捷且可靠的方式测试套件和避免了必须"彻底改造"，然后反复众人皆知了。  
  
## <a name="msbuild-support-for-biztalk-server-projects"></a>对 BizTalk Server 项目的 MSBUILD 支持  
 BizTalk Server 的 Microsoft 生成引擎 (MSBUILD) 平台，其中可容纳在未安装 Visual Studio 的生成实验室环境中托管项目的生成提供支持。 MSBUILD 适合于从命令行和高级的功能包括日志记录和批处理的 MSBUILD 生成项目。 有关 MSBUILD 的详细信息，请参阅[MSBuild 概述](http://go.microsoft.com/fwlink/?LinkId=131739)(http://go.microsoft.com/fwlink/?LinkId=131739)。  
  
## <a name="see-also"></a>请参阅  
 [实现自动测试](../technical-guides/implementing-automated-testing.md)