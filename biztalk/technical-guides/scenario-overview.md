---
title: 方案概述 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ac14328d-c373-49da-a899-4b3ca7d6dc0a
caps.latest.revision: 22
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 31a5294c8bd7e5340b0fa66499055138e10984a5
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65313313"
---
# <a name="scenario-overview"></a><span data-ttu-id="7d46a-102">方案概述</span><span class="sxs-lookup"><span data-stu-id="7d46a-102">Scenario Overview</span></span>
<span data-ttu-id="7d46a-103">本主题概述的负载测试由 BizTalk Server 已完成产品组，以在现代企业级别的硬件上运行时评估 BizTalk Server 的可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="7d46a-103">This topic provides an overview of load testing completed by the BizTalk Server product group to assess scalability of BizTalk Server when running on modern enterprise class hardware.</span></span>  

 <span data-ttu-id="7d46a-104">使用专用的硬件隔离环境中执行所有测试。</span><span class="sxs-lookup"><span data-stu-id="7d46a-104">All testing was performed in an isolated environment using dedicated hardware.</span></span> <span data-ttu-id="7d46a-105">执行了超过 200 个测试运行并由 BizTalk Server 产品组已验证的所有结果。</span><span class="sxs-lookup"><span data-stu-id="7d46a-105">Over 200 test runs were performed and all results were validated by the BizTalk Server product group.</span></span>  

 <span data-ttu-id="7d46a-106">使用消息传送方案和业务流程方案; 执行测试这两种方案利用 BizTalk WCF NetTcp 适配器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-106">Tests were performed using a Messaging  scenario and an Orchestration scenario; both scenarios utilized the BizTalk WCF-NetTcp adapter.</span></span>  

 <span data-ttu-id="7d46a-107">若要评估的 BizTalk Server 引擎可能的最大性能，不使用任何自定义管道组件;仅在单一、 非常简单的业务流程用于业务流程方案。</span><span class="sxs-lookup"><span data-stu-id="7d46a-107">To evaluate the maximum possible performance of the BizTalk Server engine, no custom pipeline components were used; and only a single, very simple orchestration was used for the Orchestration scenario.</span></span> <span data-ttu-id="7d46a-108">性能优化中所述[优化性能](../technical-guides/optimizing-performance.md)已应用到环境，并完全记录在[观测和建议](../technical-guides/observations-and-recommendations.md)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-108">Performance optimizations described in [Optimizing Performance](../technical-guides/optimizing-performance.md) were applied to the environment, and are fully documented in [Observations and Recommendations](../technical-guides/observations-and-recommendations.md).</span></span>  

## <a name="test-goals"></a><span data-ttu-id="7d46a-109">测试目标</span><span class="sxs-lookup"><span data-stu-id="7d46a-109">Test Goals</span></span>  
 <span data-ttu-id="7d46a-110">负载测试执行的目标包括以下方面：</span><span class="sxs-lookup"><span data-stu-id="7d46a-110">The goals of the load testing performed included the following:</span></span>  

1.  <span data-ttu-id="7d46a-111">提供常规大小和规模的 BizTalk Server 的指南：</span><span class="sxs-lookup"><span data-stu-id="7d46a-111">Provide general sizing and scaling guidance for BizTalk Server:</span></span>  

    1.  <span data-ttu-id="7d46a-112">量化向 BizTalk Server 组添加其他计算机的影响。</span><span class="sxs-lookup"><span data-stu-id="7d46a-112">Quantify the impact of adding additional computers to the BizTalk Server group.</span></span> <span data-ttu-id="7d46a-113">对于此测试，BizTalk Server 解决方案的性能进行测量的 BizTalk Server 组运行时，运行 BizTalk Server 的两个、 三个和四个计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-113">For this testing, the performance of a BizTalk Server solution was measured when the BizTalk Server group was running one, two, three, and four computers running BizTalk Server.</span></span>  

    2.  <span data-ttu-id="7d46a-114">量化向 BizTalk Server 组添加其他 BizTalk MessageBox 数据库的影响。</span><span class="sxs-lookup"><span data-stu-id="7d46a-114">Quantify the impact of adding additional BizTalk MessageBox databases to a BizTalk Server group.</span></span> <span data-ttu-id="7d46a-115">对于此测试，BizTalk Server 解决方案的性能进行测量组已配置为使用单个 MessageBox 数据库或四个 MessageBox 数据库时。</span><span class="sxs-lookup"><span data-stu-id="7d46a-115">For this testing, the performance of a BizTalk Server solution was measured when the group was configured to use either a single MessageBox database or four MessageBox databases.</span></span>  

        > [!NOTE]  
        >  <span data-ttu-id="7d46a-116">因此没有什么，如果有，性能好处一到两个 MessageBox 数据库进行扩展时不进行测试了两个 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="7d46a-116">Testing with two MessageBox databases was not done because there is little, if any, performance advantage when scaling from one to two MessageBox databases.</span></span> <span data-ttu-id="7d46a-117">事实上，一到两个 MessageBox 数据库缩放可能会影响性能。</span><span class="sxs-lookup"><span data-stu-id="7d46a-117">In fact, scaling from one to two MessageBox databases can adversely affect performance.</span></span> <span data-ttu-id="7d46a-118">有关向外扩展 MessageBox 的详细信息，请参阅[缩放出 SQL Server 层](../core/scaling-up-the-sql-server-tier.md)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-118">For more information about scaling out the MessageBox, see [Scaling Out the SQL Server Tier](../core/scaling-up-the-sql-server-tier.md).</span></span>

2.  <span data-ttu-id="7d46a-119">提供了以下方案的大小调整和缩放指南：</span><span class="sxs-lookup"><span data-stu-id="7d46a-119">Provide sizing and scaling guidance for the following scenarios:</span></span>  

    1.  <span data-ttu-id="7d46a-120">WCF NetTcp 单向消息传送方案</span><span class="sxs-lookup"><span data-stu-id="7d46a-120">WCF-NetTcp one-way Messaging  scenario</span></span>  

    2.  <span data-ttu-id="7d46a-121">WCF NetTcp 单向业务流程方案</span><span class="sxs-lookup"><span data-stu-id="7d46a-121">WCF-NetTcp one-way Orchestration scenario</span></span>  

## <a name="test-measurements-used"></a><span data-ttu-id="7d46a-122">使用的测试度量值</span><span class="sxs-lookup"><span data-stu-id="7d46a-122">Test Measurements Used</span></span>  
<span data-ttu-id="7d46a-123">BizTalk Server 性能进行测量使用以下条件：</span><span class="sxs-lookup"><span data-stu-id="7d46a-123">BizTalk Server performance was measured using the following criteria:</span></span>  

1.  <span data-ttu-id="7d46a-124">**总体吞吐量**– 使用测量**BizTalk： 消息传送 (*主机名*) 每秒接收 \Documents**并**BizTalk： 消息传送 (*主机名*)每秒处理 \Documents**接收的 BizTalk Server 性能计数器和处理主机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-124">**Overall throughput** –Measured with the **BizTalk:Messaging(*hostname*)\Documents received/Sec** and **BizTalk:Messaging(*hostname*)\Documents processed/Sec** performance counters for the BizTalk Server receive and processing hosts.</span></span>  

2.  <span data-ttu-id="7d46a-125">**CPU 使用率**– 使用测量**\Processor(_Total)\\%Processor Time** BizTalk Server 上的性能计数器] 和 SQL Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-125">**CPU utilization** – measured with the **\Processor(_Total)\\%Processor Time** performance counters on the BizTalk Server] and SQL Server computers.</span></span> <span data-ttu-id="7d46a-126">全面了解所有测试结果和中所述的任何性能瓶颈[观测和建议](../technical-guides/observations-and-recommendations.md)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-126">All test results were comprehensively reviewed and any performance bottlenecks are described in [Observations and Recommendations](../technical-guides/observations-and-recommendations.md).</span></span>  

## <a name="scaling-out-the-processing-tier-and-the-database-tier"></a><span data-ttu-id="7d46a-127">向外扩展的处理层和数据库层</span><span class="sxs-lookup"><span data-stu-id="7d46a-127">Scaling out the processing tier and the database tier</span></span>  
<span data-ttu-id="7d46a-128">BizTalk Server 能够轻松地通过将一个或多个 BizTalk Server 计算机添加到现有 BizTalk Server 组容纳更强的处理层功能。</span><span class="sxs-lookup"><span data-stu-id="7d46a-128">BizTalk Server easily accommodates increased processing tier capabilities by adding one or more BizTalk Server computers to an existing BizTalk Server group.</span></span> <span data-ttu-id="7d46a-129">BizTalk Server 适合于通过 MessageBox 数据库添加更高的数据库层功能。</span><span class="sxs-lookup"><span data-stu-id="7d46a-129">BizTalk Server accommodates increased database tier capabilities through the addition of MessageBox databases.</span></span>  

<span data-ttu-id="7d46a-130">若要为 BizTalk Server 提供横向扩展指标，一个、 两个、 三种类型，与 fourBizTalk 服务器计算机执行测试。</span><span class="sxs-lookup"><span data-stu-id="7d46a-130">To provide scale out metrics for BizTalk Server, tests were performed with one, two, three, and fourBizTalk Server computers.</span></span> <span data-ttu-id="7d46a-131">若要演示的向外扩展数据库层的影响，针对单个和多 MessageBox 系统执行这些测试。</span><span class="sxs-lookup"><span data-stu-id="7d46a-131">To demonstrate the impact of scaling out the database tier, these tests were performed against both single and multi-MessageBox systems.</span></span>  

## <a name="testing-scenarios"></a><span data-ttu-id="7d46a-132">测试方案</span><span class="sxs-lookup"><span data-stu-id="7d46a-132">Testing scenarios</span></span>  
 <span data-ttu-id="7d46a-133">下面将详细介绍了消息通过 BizTalk Server 环境对于这些方案的流。</span><span class="sxs-lookup"><span data-stu-id="7d46a-133">The flow of messages through the BizTalk Server environment for these scenarios is described in detail below.</span></span>  

### <a name="messaging-test-scenario"></a><span data-ttu-id="7d46a-134">消息传送的测试方案</span><span class="sxs-lookup"><span data-stu-id="7d46a-134">Messaging test scenario</span></span>  
 <span data-ttu-id="7d46a-135">![消息传递方案](../technical-guides/media/messagingscenario.gif "MessagingScenario")</span><span class="sxs-lookup"><span data-stu-id="7d46a-135">![Messaging Scenario](../technical-guides/media/messagingscenario.gif "MessagingScenario")</span></span>  

1.  <span data-ttu-id="7d46a-136">Visual Studio 2010 Ultimate edition 负载测试功能生成的 XML 消息，并将其发送到使用 NetTcp 传输运行 BizTalk Server 的计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-136">The Visual Studio 2010 Ultimate edition load testing functionality generates an XML message and sends it to the computer running BizTalk Server with the NetTcp transport.</span></span>  

    > [!NOTE]  
    >  <span data-ttu-id="7d46a-137">有关 Visual Studio 2010 Ultimate edition 负载测试的详细信息，请参阅 HYPERLINK""[测试应用程序](http://go.microsoft.com/fwlink/?LinkID=208247)(http://go.microsoft.com/fwlink/?LinkID=208247)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-137">For more information about Visual Studio 2010 Ultimate edition load testing, see  HYPERLINK ""  [Testing the Application](http://go.microsoft.com/fwlink/?LinkID=208247) (http://go.microsoft.com/fwlink/?LinkID=208247).</span></span>  
    >   
    >  <span data-ttu-id="7d46a-138">有关我们如何使用 Visual Studio 2010 Ultimate edition 中的负载测试功能我们的测试环境的详细信息，请参阅[促进自动测试使用 Visual Studio](../technical-guides/using-visual-studio-to-facilitate-automated-testing.md)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-138">For more information about how we used the Visual Studio 2010 Ultimate edition load testing functionality in our test environment, see [Using Visual Studio to Facilitate Automated Testing](../technical-guides/using-visual-studio-to-facilitate-automated-testing.md).</span></span>  

2.  <span data-ttu-id="7d46a-139">由 BizTalk Server 接收 XML 消息接收位置使用的 Wcf-nettcp 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-139">The XML message is received by a BizTalk Server receive location that uses the WCF-NetTcp receive adapter.</span></span> <span data-ttu-id="7d46a-140">接收位置配置为使用 PassThruReceive 管道，用于执行不处理消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-140">The receive location is configured to use the PassThruReceive pipeline, which performs no processing of the message.</span></span>  

3.  <span data-ttu-id="7d46a-141">BizTalk 服务器终结点管理器 (EPM) 将消息发布到 BizTalk MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="7d46a-141">The BizTalk Server end point manager (EPM) publishes the message to the BizTalk MessageBox database.</span></span>  

4.  <span data-ttu-id="7d46a-142">使用 Wcf-nettcp 发送适配器的 BizTalk Server 发送端口订阅由接收位置发布的消息和从 BizTalk MessageBox 中检索消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-142">A BizTalk Server send port that uses the WCF-NetTcp send adapter subscribes to messages published by the receive location and retrieves the message from the BizTalk MessageBox.</span></span> <span data-ttu-id="7d46a-143">发送端口使用 PassThruTransmit 管道，用于执行不处理消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-143">The send port uses the PassThruTransmit pipeline, which performs no processing of the message.</span></span>  

5.  <span data-ttu-id="7d46a-144">消息传递到后端 WCF 服务由 WCF NetTcp 发送适配器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-144">The message is delivered to the back end WCF service by the WCF-NetTcp send adapter.</span></span>  

### <a name="orchestration-test-scenario"></a><span data-ttu-id="7d46a-145">业务流程测试方案</span><span class="sxs-lookup"><span data-stu-id="7d46a-145">Orchestration test scenario</span></span>  
 <span data-ttu-id="7d46a-146">![业务流程的流程方案](../technical-guides/media/orchestrationscenarioflow.gif "OrchestrationScenarioFlow")</span><span class="sxs-lookup"><span data-stu-id="7d46a-146">![Orchestration Scenario Flow](../technical-guides/media/orchestrationscenarioflow.gif "OrchestrationScenarioFlow")</span></span>  

1.  <span data-ttu-id="7d46a-147">Visual Studio 2010 Ultimate edition 负载测试功能生成的 XML 消息，并将其发送到运行 BizTalk Server 使用 NetTcp 传输的计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-147">The Visual Studio 2010 Ultimate edition load testing functionality generates an XML message and sends it to the computer running BizTalk Server using the NetTcp transport.</span></span>  

2.  <span data-ttu-id="7d46a-148">由 BizTalk Server 接收 XML 消息接收端口将使用 Wcf-nettcp 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-148">The XML message is received by a BizTalk Server receive port that uses the WCF-NetTcp receive adapter.</span></span> <span data-ttu-id="7d46a-149">接收端口配置为使用 PassThruReceive，管道的执行不会对消息处理。</span><span class="sxs-lookup"><span data-stu-id="7d46a-149">The receive port is configured to use the PassThruReceive, pipeline which performs no processing of the message.</span></span>  

3.  <span data-ttu-id="7d46a-150">消息传递到简单的业务流程，其中仅包含 （步骤 2 中绑定到 WCF 接收端口） 的接收端口和发送端口 （步骤 4 中绑定到 WCF 发送端口）。</span><span class="sxs-lookup"><span data-stu-id="7d46a-150">The message is delivered to a simple Orchestration, which consists only of a receive port (bound to the WCF receive port from step 2) and a send port (bound to the WCF send port from step 4).</span></span> <span data-ttu-id="7d46a-151">消息变量是"非类型化"，这意味着的"System.XML.XmlDocument"的它们使用的"消息类型"。</span><span class="sxs-lookup"><span data-stu-id="7d46a-151">Message variables are “un-typed”, meaning that they use a “Message Type” of “System.XML.XmlDocument”.</span></span> <span data-ttu-id="7d46a-152">业务流程只收到的消息通过其接收端口，并通过其发送端口发送消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-152">The orchestration just receives the message through its receive port and sends the message through its send port.</span></span> <span data-ttu-id="7d46a-153">不执行处理任何消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-153">No message processing is performed.</span></span>  

4.  <span data-ttu-id="7d46a-154">使用 Wcf-nettcp 发送适配器的单向 BizTalk Server 发送端口订阅由业务流程发布消息，并从 BizTalk MessageBox 中检索消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-154">A one-way BizTalk Server send port that uses the WCF-NetTcp send adapter subscribes to messages published by the orchestration and retrieves the message from the BizTalk MessageBox.</span></span> <span data-ttu-id="7d46a-155">发送端口使用 PassThruTransmit 管道，用于执行不处理消息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-155">The send port uses the PassThruTransmit pipeline, which performs no processing of the message.</span></span>  

5.  <span data-ttu-id="7d46a-156">消息传递到后端 WCF 服务由 WCF NetTcp 发送适配器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-156">The message is delivered to the back end WCF service by the WCF-NetTcp send adapter.</span></span>  

## <a name="hardware-configuration"></a><span data-ttu-id="7d46a-157">硬件配置</span><span class="sxs-lookup"><span data-stu-id="7d46a-157">Hardware configuration</span></span>  

### <a name="lab-hardware-diagram-and-specifications"></a><span data-ttu-id="7d46a-158">实验室瓜和规范</span><span class="sxs-lookup"><span data-stu-id="7d46a-158">Lab hardware diagram and specifications</span></span>  
 <span data-ttu-id="7d46a-159">使用实验室的硬件配置如下图所示。</span><span class="sxs-lookup"><span data-stu-id="7d46a-159">The hardware configuration used for the lab is illustrated below.</span></span> <span data-ttu-id="7d46a-160">若要轻松地适应个处理和数据库层横向扩展，已使用以下实验室硬件：</span><span class="sxs-lookup"><span data-stu-id="7d46a-160">To easily accommodate scale out of the processing and database tiers, the following lab hardware was used:</span></span>  

- <span data-ttu-id="7d46a-161">两个企业类 Hewlett Packard DL 380 计算机和 BizTalk Server 处理层的两个企业 Dell R710 类计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-161">Two Enterprise class Hewlett Packard DL-380 computers and two Enterprise class Dell R710 computers for the BizTalk Server processing tier.</span></span>  

- <span data-ttu-id="7d46a-162">要提供多 MessageBox 功能的数据库层的四个 Enterprise 类 Dell R900 计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-162">Four Enterprise class Dell R900 computers for the database tier, to provide multi-MessageBox capability.</span></span>  

  <span data-ttu-id="7d46a-163">下面提供了在实验室中使用的硬件的关系图：</span><span class="sxs-lookup"><span data-stu-id="7d46a-163">A diagram of the hardware used in the lab is provided below:</span></span>  

  <span data-ttu-id="7d46a-164">![性能辅助基础结构](../technical-guides/media/performanceguideinfrastructure.gif "PerformanceGuideInfrastructure")</span><span class="sxs-lookup"><span data-stu-id="7d46a-164">![Performance Guide Infrastructure](../technical-guides/media/performanceguideinfrastructure.gif "PerformanceGuideInfrastructure")</span></span>  

  <span data-ttu-id="7d46a-165">下表提供了有关在实验室中使用的硬件的更具体信息。</span><span class="sxs-lookup"><span data-stu-id="7d46a-165">The following table provides more specific information about the hardware used in the lab.</span></span>  

|<span data-ttu-id="7d46a-166">“属性”</span><span class="sxs-lookup"><span data-stu-id="7d46a-166">Name</span></span>|<span data-ttu-id="7d46a-167">“模型”</span><span class="sxs-lookup"><span data-stu-id="7d46a-167">Model</span></span>|<span data-ttu-id="7d46a-168">CPU 类型</span><span class="sxs-lookup"><span data-stu-id="7d46a-168">CPU type</span></span>|<span data-ttu-id="7d46a-169">CPU 数</span><span class="sxs-lookup"><span data-stu-id="7d46a-169">Number of CPUs</span></span>|<span data-ttu-id="7d46a-170">核心/CPU 数</span><span class="sxs-lookup"><span data-stu-id="7d46a-170">Number of cores/CPU</span></span>|<span data-ttu-id="7d46a-171">CPU 体系结构</span><span class="sxs-lookup"><span data-stu-id="7d46a-171">CPU architecture</span></span>|<span data-ttu-id="7d46a-172">内存</span><span class="sxs-lookup"><span data-stu-id="7d46a-172">Memory</span></span>|<span data-ttu-id="7d46a-173">操作系统</span><span class="sxs-lookup"><span data-stu-id="7d46a-173">Operating System</span></span>|<span data-ttu-id="7d46a-174">软件</span><span class="sxs-lookup"><span data-stu-id="7d46a-174">Software</span></span>|  
|----------|-----------|--------------|--------------------|--------------------------|----------------------|------------|----------------------|--------------|  
|<span data-ttu-id="7d46a-175">R710-01</span><span class="sxs-lookup"><span data-stu-id="7d46a-175">R710-01</span></span>|<span data-ttu-id="7d46a-176">Dell PowerEdge R710</span><span class="sxs-lookup"><span data-stu-id="7d46a-176">Dell PowerEdge R710</span></span>|<span data-ttu-id="7d46a-177">Intel Xeon X5570</span><span class="sxs-lookup"><span data-stu-id="7d46a-177">Intel Xeon X5570</span></span>|<span data-ttu-id="7d46a-178">2 x 2.93 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-178">2 x 2.93 GHz</span></span>|<span data-ttu-id="7d46a-179">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-179">4</span></span>|<span data-ttu-id="7d46a-180">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-180">x64</span></span>|<span data-ttu-id="7d46a-181">72 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-181">72 GB</span></span>|<span data-ttu-id="7d46a-182">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-182">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-183">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="7d46a-183">BizTalk Server</span></span>|  
|<span data-ttu-id="7d46a-184">R710-02</span><span class="sxs-lookup"><span data-stu-id="7d46a-184">R710-02</span></span>|<span data-ttu-id="7d46a-185">Dell PowerEdge R710</span><span class="sxs-lookup"><span data-stu-id="7d46a-185">Dell PowerEdge R710</span></span>|<span data-ttu-id="7d46a-186">Intel Xeon X5570</span><span class="sxs-lookup"><span data-stu-id="7d46a-186">Intel Xeon X5570</span></span>|<span data-ttu-id="7d46a-187">2 x 2.93 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-187">2 x 2.93 GHz</span></span>|<span data-ttu-id="7d46a-188">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-188">4</span></span>|<span data-ttu-id="7d46a-189">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-189">x64</span></span>|<span data-ttu-id="7d46a-190">72 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-190">72 GB</span></span>|<span data-ttu-id="7d46a-191">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-191">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-192">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="7d46a-192">BizTalk Server</span></span>|  
|<span data-ttu-id="7d46a-193">DL380G7-01</span><span class="sxs-lookup"><span data-stu-id="7d46a-193">DL380G7-01</span></span>|<span data-ttu-id="7d46a-194">Hewlett Packard DL380 G7</span><span class="sxs-lookup"><span data-stu-id="7d46a-194">Hewlett Packard DL380 G7</span></span>|<span data-ttu-id="7d46a-195">Intel Xeon X5670</span><span class="sxs-lookup"><span data-stu-id="7d46a-195">Intel Xeon X5670</span></span>|<span data-ttu-id="7d46a-196">2 x 2.93 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-196">2 x 2.93 GHz</span></span>|<span data-ttu-id="7d46a-197">6</span><span class="sxs-lookup"><span data-stu-id="7d46a-197">6</span></span>|<span data-ttu-id="7d46a-198">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-198">x64</span></span>|<span data-ttu-id="7d46a-199">192 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-199">192 GB</span></span>|<span data-ttu-id="7d46a-200">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-200">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-201">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="7d46a-201">BizTalk Server</span></span>|  
|<span data-ttu-id="7d46a-202">DL380G7-02</span><span class="sxs-lookup"><span data-stu-id="7d46a-202">DL380G7-02</span></span>|<span data-ttu-id="7d46a-203">Hewlett Packard DL380 G7</span><span class="sxs-lookup"><span data-stu-id="7d46a-203">Hewlett Packard DL380 G7</span></span>|<span data-ttu-id="7d46a-204">Intel Xeon X5670</span><span class="sxs-lookup"><span data-stu-id="7d46a-204">Intel Xeon X5670</span></span>|<span data-ttu-id="7d46a-205">2 x 2.93 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-205">2 x 2.93 GHz</span></span>|<span data-ttu-id="7d46a-206">6</span><span class="sxs-lookup"><span data-stu-id="7d46a-206">6</span></span>|<span data-ttu-id="7d46a-207">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-207">x64</span></span>|<span data-ttu-id="7d46a-208">192 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-208">192 GB</span></span>|<span data-ttu-id="7d46a-209">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-209">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-210">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="7d46a-210">BizTalk Server</span></span>|  
|<span data-ttu-id="7d46a-211">DL380-01</span><span class="sxs-lookup"><span data-stu-id="7d46a-211">DL380-01</span></span>|<span data-ttu-id="7d46a-212">Hewlett Packard DL380</span><span class="sxs-lookup"><span data-stu-id="7d46a-212">Hewlett Packard DL380</span></span>|<span data-ttu-id="7d46a-213">Intel Xeon 5150</span><span class="sxs-lookup"><span data-stu-id="7d46a-213">Intel Xeon 5150</span></span>|<span data-ttu-id="7d46a-214">2 x 2.66 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-214">2 x 2.66 GHz</span></span>|<span data-ttu-id="7d46a-215">2</span><span class="sxs-lookup"><span data-stu-id="7d46a-215">2</span></span>|<span data-ttu-id="7d46a-216">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-216">x64</span></span>|<span data-ttu-id="7d46a-217">8 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-217">8 GB</span></span>|<span data-ttu-id="7d46a-218">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-218">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-219">SQL Server 2008 R2 负载测试数据库</span><span class="sxs-lookup"><span data-stu-id="7d46a-219">SQL Server 2008 R2 Load Test DB</span></span><br /><br /> <span data-ttu-id="7d46a-220">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="7d46a-220">Visual Studio 2010</span></span><br /><br /> <span data-ttu-id="7d46a-221">WCF 后端服务</span><span class="sxs-lookup"><span data-stu-id="7d46a-221">WCF back-end service</span></span>|  
|<span data-ttu-id="7d46a-222">DL380-02</span><span class="sxs-lookup"><span data-stu-id="7d46a-222">DL380-02</span></span>|<span data-ttu-id="7d46a-223">Hewlett Packard DL380</span><span class="sxs-lookup"><span data-stu-id="7d46a-223">Hewlett Packard DL380</span></span>|<span data-ttu-id="7d46a-224">Intel Xeon E5335</span><span class="sxs-lookup"><span data-stu-id="7d46a-224">Intel Xeon E5335</span></span>|<span data-ttu-id="7d46a-225">2 x 2.00 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-225">2 x 2.00 GHz</span></span>|<span data-ttu-id="7d46a-226">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-226">4</span></span>|<span data-ttu-id="7d46a-227">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-227">x64</span></span>|<span data-ttu-id="7d46a-228">8 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-228">8 GB</span></span>|<span data-ttu-id="7d46a-229">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-229">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-230">Visual Studio 2010 负载测试控制器</span><span class="sxs-lookup"><span data-stu-id="7d46a-230">Visual Studio 2010 Load Test Controller</span></span>|  
|<span data-ttu-id="7d46a-231">DL380-03</span><span class="sxs-lookup"><span data-stu-id="7d46a-231">DL380-03</span></span>|<span data-ttu-id="7d46a-232">Hewlett Packard DL380</span><span class="sxs-lookup"><span data-stu-id="7d46a-232">Hewlett Packard DL380</span></span>|<span data-ttu-id="7d46a-233">Intel Xeon E5335</span><span class="sxs-lookup"><span data-stu-id="7d46a-233">Intel Xeon E5335</span></span>|<span data-ttu-id="7d46a-234">2 x 2.00 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-234">2 x 2.00 GHz</span></span>|<span data-ttu-id="7d46a-235">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-235">4</span></span>|<span data-ttu-id="7d46a-236">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-236">x64</span></span>|<span data-ttu-id="7d46a-237">8 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-237">8 GB</span></span>|<span data-ttu-id="7d46a-238">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-238">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-239">Visual Studio 2010 负载测试代理</span><span class="sxs-lookup"><span data-stu-id="7d46a-239">Visual Studio 2010 Load Test Agent</span></span>|  
|<span data-ttu-id="7d46a-240">DL380-04</span><span class="sxs-lookup"><span data-stu-id="7d46a-240">DL380-04</span></span>|<span data-ttu-id="7d46a-241">Hewlett Packard DL380</span><span class="sxs-lookup"><span data-stu-id="7d46a-241">Hewlett Packard DL380</span></span>|<span data-ttu-id="7d46a-242">Intel Xeon E5335</span><span class="sxs-lookup"><span data-stu-id="7d46a-242">Intel Xeon E5335</span></span>|<span data-ttu-id="7d46a-243">2 x 2.00 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-243">2 x 2.00 GHz</span></span>|<span data-ttu-id="7d46a-244">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-244">4</span></span>|<span data-ttu-id="7d46a-245">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-245">x64</span></span>|<span data-ttu-id="7d46a-246">8 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-246">8 GB</span></span>|<span data-ttu-id="7d46a-247">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-247">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-248">Visual Studio 2010 负载测试代理。</span><span class="sxs-lookup"><span data-stu-id="7d46a-248">Visual Studio 2010 Load Test Agent.</span></span><br /><br /> <span data-ttu-id="7d46a-249">Perfmon 命令行</span><span class="sxs-lookup"><span data-stu-id="7d46a-249">Perfmon Command-line</span></span>|  
|<span data-ttu-id="7d46a-250">R805-06</span><span class="sxs-lookup"><span data-stu-id="7d46a-250">R805-06</span></span>|<span data-ttu-id="7d46a-251">Dell PowerEdge R805</span><span class="sxs-lookup"><span data-stu-id="7d46a-251">Dell PowerEdge R805</span></span>|<span data-ttu-id="7d46a-252">AMD 四核 Opteron 2354</span><span class="sxs-lookup"><span data-stu-id="7d46a-252">AMD Quad-Core Opteron 2354</span></span>|<span data-ttu-id="7d46a-253">2 x 2.2 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-253">2 x 2.2 GHz</span></span>|<span data-ttu-id="7d46a-254">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-254">4</span></span>|<span data-ttu-id="7d46a-255">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-255">x64</span></span>|<span data-ttu-id="7d46a-256">32 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-256">32 GB</span></span>|<span data-ttu-id="7d46a-257">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-257">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-258">Visual Studio 2010 负载测试代理</span><span class="sxs-lookup"><span data-stu-id="7d46a-258">Visual Studio 2010 Load Test Agent</span></span>|  
|<span data-ttu-id="7d46a-259">R805-07</span><span class="sxs-lookup"><span data-stu-id="7d46a-259">R805-07</span></span>|<span data-ttu-id="7d46a-260">Dell PowerEdge R805</span><span class="sxs-lookup"><span data-stu-id="7d46a-260">Dell PowerEdge R805</span></span>|<span data-ttu-id="7d46a-261">AMD 四核 Opteron 2354</span><span class="sxs-lookup"><span data-stu-id="7d46a-261">AMD Quad-Core Opteron 2354</span></span>|<span data-ttu-id="7d46a-262">2 x 2.2 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-262">2 x 2.2 GHz</span></span>|<span data-ttu-id="7d46a-263">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-263">4</span></span>|<span data-ttu-id="7d46a-264">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-264">x64</span></span>|<span data-ttu-id="7d46a-265">32 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-265">32 GB</span></span>|<span data-ttu-id="7d46a-266">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-266">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-267">Visual Studio 2010 负载测试代理</span><span class="sxs-lookup"><span data-stu-id="7d46a-267">Visual Studio 2010 Load Test Agent</span></span>|  
|<span data-ttu-id="7d46a-268">R900-03</span><span class="sxs-lookup"><span data-stu-id="7d46a-268">R900-03</span></span>|<span data-ttu-id="7d46a-269">Dell PowerEdge R900</span><span class="sxs-lookup"><span data-stu-id="7d46a-269">Dell PowerEdge R900</span></span>|<span data-ttu-id="7d46a-270">Intel Xeon E7330</span><span class="sxs-lookup"><span data-stu-id="7d46a-270">Intel Xeon E7330</span></span>|<span data-ttu-id="7d46a-271">4 x 2.4 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-271">4 x 2.4 GHz</span></span>|<span data-ttu-id="7d46a-272">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-272">4</span></span>|<span data-ttu-id="7d46a-273">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-273">x64</span></span>|<span data-ttu-id="7d46a-274">64 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-274">64 GB</span></span>|<span data-ttu-id="7d46a-275">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-275">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-276">SQL Server 2008 R2 累积更新 4</span><span class="sxs-lookup"><span data-stu-id="7d46a-276">SQL Server 2008 R2 with Cumulative Update 4</span></span>|  
|<span data-ttu-id="7d46a-277">R900-04</span><span class="sxs-lookup"><span data-stu-id="7d46a-277">R900-04</span></span>|<span data-ttu-id="7d46a-278">Dell PowerEdge R900</span><span class="sxs-lookup"><span data-stu-id="7d46a-278">Dell PowerEdge R900</span></span>|<span data-ttu-id="7d46a-279">Intel Xeon E7330</span><span class="sxs-lookup"><span data-stu-id="7d46a-279">Intel Xeon E7330</span></span>|<span data-ttu-id="7d46a-280">4 x 2.4 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-280">4 x 2.4 GHz</span></span>|<span data-ttu-id="7d46a-281">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-281">4</span></span>|<span data-ttu-id="7d46a-282">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-282">x64</span></span>|<span data-ttu-id="7d46a-283">64 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-283">64 GB</span></span>|<span data-ttu-id="7d46a-284">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-284">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-285">SQL Server 2008 R2 累积更新 4</span><span class="sxs-lookup"><span data-stu-id="7d46a-285">SQL Server 2008 R2 with Cumulative Update 4</span></span>|  
|<span data-ttu-id="7d46a-286">R900-05</span><span class="sxs-lookup"><span data-stu-id="7d46a-286">R900-05</span></span>|<span data-ttu-id="7d46a-287">Dell PowerEdge R900</span><span class="sxs-lookup"><span data-stu-id="7d46a-287">Dell PowerEdge R900</span></span>|<span data-ttu-id="7d46a-288">Intel Xeon E7330</span><span class="sxs-lookup"><span data-stu-id="7d46a-288">Intel Xeon E7330</span></span>|<span data-ttu-id="7d46a-289">4 x 2.4 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-289">4 x 2.4 GHz</span></span>|<span data-ttu-id="7d46a-290">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-290">4</span></span>|<span data-ttu-id="7d46a-291">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-291">x64</span></span>|<span data-ttu-id="7d46a-292">64 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-292">64 GB</span></span>|<span data-ttu-id="7d46a-293">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-293">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-294">SQL Server 2008 R2 累积更新 4</span><span class="sxs-lookup"><span data-stu-id="7d46a-294">SQL Server 2008 R2 with Cumulative Update 4</span></span>|  
|<span data-ttu-id="7d46a-295">R900-06</span><span class="sxs-lookup"><span data-stu-id="7d46a-295">R900-06</span></span>|<span data-ttu-id="7d46a-296">Dell PowerEdge R900</span><span class="sxs-lookup"><span data-stu-id="7d46a-296">Dell PowerEdge R900</span></span>|<span data-ttu-id="7d46a-297">Intel Xeon E7330</span><span class="sxs-lookup"><span data-stu-id="7d46a-297">Intel Xeon E7330</span></span>|<span data-ttu-id="7d46a-298">4 x 2.4 GHz</span><span class="sxs-lookup"><span data-stu-id="7d46a-298">4 x 2.4 GHz</span></span>|<span data-ttu-id="7d46a-299">4</span><span class="sxs-lookup"><span data-stu-id="7d46a-299">4</span></span>|<span data-ttu-id="7d46a-300">x64</span><span class="sxs-lookup"><span data-stu-id="7d46a-300">x64</span></span>|<span data-ttu-id="7d46a-301">64 GB</span><span class="sxs-lookup"><span data-stu-id="7d46a-301">64 GB</span></span>|<span data-ttu-id="7d46a-302">Windows Server 2008 R2 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="7d46a-302">Windows Server 2008 R2 Enterprise Edition</span></span>|<span data-ttu-id="7d46a-303">SQL Server 2008 R2 累积更新 4</span><span class="sxs-lookup"><span data-stu-id="7d46a-303">SQL Server 2008 R2 with Cumulative Update 4</span></span>|  

### <a name="storage-area-network-configuration"></a><span data-ttu-id="7d46a-304">存储区域网络配置</span><span class="sxs-lookup"><span data-stu-id="7d46a-304">Storage area network configuration</span></span>  
 <span data-ttu-id="7d46a-305">下图描绘了存储区域网络 (SAN) 配置用于实验室环境。</span><span class="sxs-lookup"><span data-stu-id="7d46a-305">The following diagram depicts the storage area network (SAN) configuration used for the lab environment.</span></span>  

 <span data-ttu-id="7d46a-306">![SAN 信息](../technical-guides/media/saninformation.gif "SANinformation")</span><span class="sxs-lookup"><span data-stu-id="7d46a-306">![SAN information](../technical-guides/media/saninformation.gif "SANinformation")</span></span>  

### <a name="emc-clariion-cx4-960-san-configuration"></a><span data-ttu-id="7d46a-307">EMC CLARiiON CX4 960 SAN 配置</span><span class="sxs-lookup"><span data-stu-id="7d46a-307">EMC CLARiiON CX4-960 SAN configuration</span></span>  

|<span data-ttu-id="7d46a-308">服务处理器和高速缓存信息</span><span class="sxs-lookup"><span data-stu-id="7d46a-308">Service processor and Cache information</span></span>|<span data-ttu-id="7d46a-309">LUN 配置</span><span class="sxs-lookup"><span data-stu-id="7d46a-309">LUN configuration</span></span>|  
|---------------------------------------------|-----------------------|  
|<span data-ttu-id="7d46a-310">两个服务处理器，每个都有：</span><span class="sxs-lookup"><span data-stu-id="7d46a-310">Two Service Processors, each with:</span></span><br /><br /> <span data-ttu-id="7d46a-311">-读取缓存大小：2000 MB。</span><span class="sxs-lookup"><span data-stu-id="7d46a-311">-   Read cache size: 2000 MB.</span></span><br /><span data-ttu-id="7d46a-312">-写入缓存大小：8000 MB。</span><span class="sxs-lookup"><span data-stu-id="7d46a-312">-   Write cache size: 8000 MB.</span></span><br /><span data-ttu-id="7d46a-313">的连接到光纤交换机两个前端端口。</span><span class="sxs-lookup"><span data-stu-id="7d46a-313">-   Two front-end ports attached to the fiber switch.</span></span> <span data-ttu-id="7d46a-314">每个端口中 4 Gbps。</span><span class="sxs-lookup"><span data-stu-id="7d46a-314">4 Gbps per port.</span></span>|<span data-ttu-id="7d46a-315">-64 个磁盘 (268 GB，15 k RPM，光纤通道 Seagate。</span><span class="sxs-lookup"><span data-stu-id="7d46a-315">-   64 disks (268 GB, 15k RPM, Fiber Channel, Seagate.</span></span><br /><span data-ttu-id="7d46a-316">-八个 8 磁盘 RAID 1 + 0 从这些 64 个磁盘划分的组。</span><span class="sxs-lookup"><span data-stu-id="7d46a-316">-   Eight 8-disk RAID 1+0 Groups carved from these 64 disks.</span></span><br /><span data-ttu-id="7d46a-317">-每个 DB 服务器分配 5 个 Metalun 均匀地从这些 RAID 组配置。</span><span class="sxs-lookup"><span data-stu-id="7d46a-317">-   Each DB server was assigned 5 MetaLUNs configured evenly from these RAID Groups.</span></span>|  

 <span data-ttu-id="7d46a-318">务必确定 SAN 的最大可以利用它来吞吐量，并将此值设置为针对在生产环境中 SAN 的预期负载进行比较。</span><span class="sxs-lookup"><span data-stu-id="7d46a-318">It is important to determine the maximum attainable throughput of a SAN and compare this value to the expected load against the SAN in production.</span></span> <span data-ttu-id="7d46a-319">这将有助于防止你的应用程序从测试/质量保证 (QA) 环境移动到生产环境时未预料到会产生与 SAN 相关硬件支出。</span><span class="sxs-lookup"><span data-stu-id="7d46a-319">This will help prevent unanticipated expenditures for SAN-related hardware when moving your application from a test/quality assurance (QA) environment into a production environment.</span></span> <span data-ttu-id="7d46a-320">例如，SAN 的最大可用吞吐量可能多个足以满足您的沙盒测试环境中的应用程序。</span><span class="sxs-lookup"><span data-stu-id="7d46a-320">For example, the maximum available throughput for the SAN may be more than sufficient for your application in a sandboxed test environment.</span></span> <span data-ttu-id="7d46a-321">但是，如果其他服务器应用程序将在生产环境中使用 SAN，可用 SAN 吞吐量可能不符合要求，并且可能会成为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="7d46a-321">However, if other server applications will use the SAN in production, available SAN throughput may be insufficient and could become a bottleneck.</span></span>  

 <span data-ttu-id="7d46a-322">评估您的 SAN 的性能时，考虑以下方面：</span><span class="sxs-lookup"><span data-stu-id="7d46a-322">When evaluating performance of your SAN, consider the following:</span></span>  

1. <span data-ttu-id="7d46a-323">**什么是 SAN 的最大可以利用它来吞吐量？**</span><span class="sxs-lookup"><span data-stu-id="7d46a-323">**What is the maximum attainable throughput of the SAN?**</span></span> <span data-ttu-id="7d46a-324">– 这是使用最低通用标准，在吞吐量、 主机总线适配器 (HBA) 中的服务器、 开关 SAN 吞吐量和 SAN 控制器卡的速度方面进行测量。</span><span class="sxs-lookup"><span data-stu-id="7d46a-324">– This is measured using the lowest common denominator, in terms of throughput, of the host bus adapter (HBA) in the server, the Switch-SAN throughput, and the speed of the SAN controller cards.</span></span>  

2. <span data-ttu-id="7d46a-325">**哪些应用程序将在生产环境中使用 SAN？**</span><span class="sxs-lookup"><span data-stu-id="7d46a-325">**What other applications will use the SAN in production?**</span></span> <span data-ttu-id="7d46a-326">– 考虑什么其他应用程序将使用 SAN 在生产环境中。</span><span class="sxs-lookup"><span data-stu-id="7d46a-326">– Consider what other applications will make use of the SAN in the production environment.</span></span> <span data-ttu-id="7d46a-327">如果其他数据库或否则为 I/O 密集型应用程序如 Exchange Server 将使用 SAN 在生产环境中，将相应地减少的 SAN 的吞吐量可用于运行 BizTalk Server 的计算机。</span><span class="sxs-lookup"><span data-stu-id="7d46a-327">If other database or otherwise I/O intensive applications such as Exchange Server will use the SAN in production, the amount of SAN throughput available for your computer running BizTalk Server will be reduced accordingly.</span></span>  

   <span data-ttu-id="7d46a-328">对于实验室环境中，使用了专用的 SAN。</span><span class="sxs-lookup"><span data-stu-id="7d46a-328">For the lab environment, a dedicated SAN was used.</span></span> <span data-ttu-id="7d46a-329">每四个 SQL Server 计算机已连接到 SAN 交换机具有两个 4 Gbps 主机总线适配器 (Hba) 提供 8 Gbps 每个服务器的总潜在吞吐量。</span><span class="sxs-lookup"><span data-stu-id="7d46a-329">Each of the four SQL Server computers was connected to the SAN switch with two 4-Gbps host bus adapters (HBAs), providing a total potential throughput of 8-Gbps per server.</span></span> <span data-ttu-id="7d46a-330">SAN 有两个服务处理器，并且每个服务处理器有两个前端端口连接到光纤交换机，提供 16 Gbps SAN 和交换机之间的总潜在吞吐量。</span><span class="sxs-lookup"><span data-stu-id="7d46a-330">The SAN had two service processors, and each service processor had two front-end ports attached to the fiber switch, providing a total potential throughput of 16-Gbps between the SAN and the switch.</span></span>  

   <span data-ttu-id="7d46a-331">下面的 LUN 配置为每个测试环境中运行 SQL Server 的四个计算机使用。</span><span class="sxs-lookup"><span data-stu-id="7d46a-331">The following LUN configuration was used for each of the four computers running SQL Server in the test environment.</span></span>  

|<span data-ttu-id="7d46a-332">驱动器号</span><span class="sxs-lookup"><span data-stu-id="7d46a-332">Drive letter</span></span>|<span data-ttu-id="7d46a-333">卷名</span><span class="sxs-lookup"><span data-stu-id="7d46a-333">Volume name</span></span>|<span data-ttu-id="7d46a-334">文件</span><span class="sxs-lookup"><span data-stu-id="7d46a-334">Files</span></span>|<span data-ttu-id="7d46a-335">LUN 的大小 (GB)</span><span class="sxs-lookup"><span data-stu-id="7d46a-335">LUN size (GB)</span></span>|  
|------------------|-----------------|-----------|---------------------|  
|<span data-ttu-id="7d46a-336">C</span><span class="sxs-lookup"><span data-stu-id="7d46a-336">C</span></span>|<span data-ttu-id="7d46a-337">本地 C 驱动器</span><span class="sxs-lookup"><span data-stu-id="7d46a-337">Local C drive</span></span>|<span data-ttu-id="7d46a-338">MASTER、 MSDB 和 MODEL</span><span class="sxs-lookup"><span data-stu-id="7d46a-338">MASTER,MSDB, and MODEL</span></span>|<span data-ttu-id="7d46a-339">136</span><span class="sxs-lookup"><span data-stu-id="7d46a-339">136</span></span>|  
|<span data-ttu-id="7d46a-340">H</span><span class="sxs-lookup"><span data-stu-id="7d46a-340">H</span></span>|<span data-ttu-id="7d46a-341">Data_Tempdb</span><span class="sxs-lookup"><span data-stu-id="7d46a-341">Data_Tempdb</span></span>|<span data-ttu-id="7d46a-342">TempDB 数据文件</span><span class="sxs-lookup"><span data-stu-id="7d46a-342">TempDB data files</span></span>|<span data-ttu-id="7d46a-343">50</span><span class="sxs-lookup"><span data-stu-id="7d46a-343">50</span></span>|  
|<span data-ttu-id="7d46a-344">I</span><span class="sxs-lookup"><span data-stu-id="7d46a-344">I</span></span>|<span data-ttu-id="7d46a-345">Logs_Tempdb</span><span class="sxs-lookup"><span data-stu-id="7d46a-345">Logs_Tempdb</span></span>|<span data-ttu-id="7d46a-346">TempDB 日志文件</span><span class="sxs-lookup"><span data-stu-id="7d46a-346">TempDB log files</span></span>|<span data-ttu-id="7d46a-347">50</span><span class="sxs-lookup"><span data-stu-id="7d46a-347">50</span></span>|  
|<span data-ttu-id="7d46a-348">J</span><span class="sxs-lookup"><span data-stu-id="7d46a-348">J</span></span>|<span data-ttu-id="7d46a-349">Data_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="7d46a-349">Data_BtsMsgBox</span></span>|<span data-ttu-id="7d46a-350">BizTalk MsgBoxDB 数据文件 + （在 Master MsgBox) Mgmt 数据库 DTA 数据库数据文件在 SSO 数据库</span><span class="sxs-lookup"><span data-stu-id="7d46a-350">BizTalk MsgBoxDB data files + (on the Master MsgBox) Mgmt DB, SSO DB, DTA DB data files</span></span>|<span data-ttu-id="7d46a-351">120</span><span class="sxs-lookup"><span data-stu-id="7d46a-351">120</span></span>|  
|<span data-ttu-id="7d46a-352">K</span><span class="sxs-lookup"><span data-stu-id="7d46a-352">K</span></span>|<span data-ttu-id="7d46a-353">Logs_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="7d46a-353">Logs_BtsMsgBox</span></span>|<span data-ttu-id="7d46a-354">BizTalk MsgBoxDB 日志文件 + （在 Master MsgBox) Mgmt 数据库、 DTA DB SSO 数据库日志文件</span><span class="sxs-lookup"><span data-stu-id="7d46a-354">BizTalk MsgBoxDB log files + (on the Master MsgBox) Mgmt DB, SSO DB, DTA DB log files</span></span>|<span data-ttu-id="7d46a-355">120</span><span class="sxs-lookup"><span data-stu-id="7d46a-355">120</span></span>|  
|<span data-ttu-id="7d46a-356">O</span><span class="sxs-lookup"><span data-stu-id="7d46a-356">O</span></span>|<span data-ttu-id="7d46a-357">Logs_Spare</span><span class="sxs-lookup"><span data-stu-id="7d46a-357">Logs_Spare</span></span>|<span data-ttu-id="7d46a-358">不使用的 SQL 文件。</span><span class="sxs-lookup"><span data-stu-id="7d46a-358">Not used for SQL files.</span></span> <span data-ttu-id="7d46a-359">用来存储 DTCLog 文件，作为 MSDTC 会导致频繁的磁盘 I/O，尤其是在多 MessageBox 环境中。</span><span class="sxs-lookup"><span data-stu-id="7d46a-359">Used to store DTCLog file, as MSDTC cause frequent disk I/O, especially in a multi-MessageBox environment.</span></span>|<span data-ttu-id="7d46a-360">20</span><span class="sxs-lookup"><span data-stu-id="7d46a-360">20</span></span>|  

### <a name="sqlio-test-results"></a><span data-ttu-id="7d46a-361">SQLIO 测试结果</span><span class="sxs-lookup"><span data-stu-id="7d46a-361">SQLIO test results</span></span>  
 <span data-ttu-id="7d46a-362">我们使用的 SQLIO 工具来制定基准和度量值在我们的实验室环境中使用的存储区域网络 (SAN) 配置的输入/输出容量。</span><span class="sxs-lookup"><span data-stu-id="7d46a-362">We used the SQLIO tool to benchmark and measure the Input/Output capacity of the storage area network (SAN) configuration used in our lab environment.</span></span> <span data-ttu-id="7d46a-363">该工具的名称可以看出，SQLIO 是一个重要的工具，用于测量上的 SQL Server 性能的文件系统 I/O 的影响。</span><span class="sxs-lookup"><span data-stu-id="7d46a-363">As the name of the tool implies, SQLIO is a valuable tool for measuring the impact of file system I/O on SQL Server performance.</span></span> 

<span data-ttu-id="7d46a-364">若要度量值的存储区域网络 (SAN) 配置的 SQL Server 数据库应用程序的输入/输出容量，请参阅[分析 I/O 特性和用于 SQL Server 数据库应用程序的大小调整存储系统](https://msdn.microsoft.com/library/ee410782(SQL.100).aspx)。</span><span class="sxs-lookup"><span data-stu-id="7d46a-364">To measure Input/Output capacity of the storage area network (SAN) configuration for SQL Server database applications, see [Analyzing I/O Characteristics and Sizing Storage Systems for SQL Server Database Applications](https://msdn.microsoft.com/library/ee410782(SQL.100).aspx).</span></span>  

 <span data-ttu-id="7d46a-365">对于我们 SQLIO 测试，sqlio.exe 实用工具问题 8 K 从 8 个线程读取请求和维护 8 个 I/O 队列深度。</span><span class="sxs-lookup"><span data-stu-id="7d46a-365">For our SQLIO test, the sqlio.exe utility issues 8K read requests from 8 threads and maintain an I/O queue depth of 8.</span></span> <span data-ttu-id="7d46a-366">我们使用以下参数：</span><span class="sxs-lookup"><span data-stu-id="7d46a-366">We used the following parameters:</span></span>  

- <span data-ttu-id="7d46a-367">所有测试都使用 8 个处理线程，每个运行 60 秒。</span><span class="sxs-lookup"><span data-stu-id="7d46a-367">All tests used 8 processing threads, each running for 60 seconds.</span></span>  

- <span data-ttu-id="7d46a-368">8 kb 的随机写入的数据文件。</span><span class="sxs-lookup"><span data-stu-id="7d46a-368">8kb random writes to the data files.</span></span>  

- <span data-ttu-id="7d46a-369">8 kb 的随机读取的数据文件。</span><span class="sxs-lookup"><span data-stu-id="7d46a-369">8kb random reads to the data files.</span></span>  

- <span data-ttu-id="7d46a-370">所有文件大小将都调整为 25 GB。</span><span class="sxs-lookup"><span data-stu-id="7d46a-370">All files are sized at 25 GB.</span></span>  

- <span data-ttu-id="7d46a-371">若要进行基准检查的磁盘驱动器是 h:、 i:、 j:，和 K 驱动器。</span><span class="sxs-lookup"><span data-stu-id="7d46a-371">The disk drives to be benchmarked are H:, I:, J:, and  K drive.</span></span>  

  <span data-ttu-id="7d46a-372">使用 SQLIO 命令行中包含如下所示：</span><span class="sxs-lookup"><span data-stu-id="7d46a-372">The SQLIO command lines used are follows:</span></span>  

- <span data-ttu-id="7d46a-373">**对于读取**: sqlio 韩国-s60 frandom-o8-t8-b8 LS-FParam.txt</span><span class="sxs-lookup"><span data-stu-id="7d46a-373">**For reads**: sqlio -kR -s60 -frandom -o8 -t8 -b8 -LS -FParam.txt</span></span>  

- <span data-ttu-id="7d46a-374">**对于写入**: sqlio-kW-s60 frandom-o8-t8-b8 LS-FParam.txt</span><span class="sxs-lookup"><span data-stu-id="7d46a-374">**For writes**: sqlio -kW -s60 -frandom -o8 -t8 -b8 -LS -FParam.txt</span></span>  

  <span data-ttu-id="7d46a-375">Param.txt 文件包含以下信息：</span><span class="sxs-lookup"><span data-stu-id="7d46a-375">The Param.txt file contains the following:</span></span>  

- <span data-ttu-id="7d46a-376">**驱动器数量：** H:、 i:、 j:，和 K</span><span class="sxs-lookup"><span data-stu-id="7d46a-376">**Number of drives:** H:,I:,J:, and K</span></span>  

- <span data-ttu-id="7d46a-377">**测试文件的物理位置**:</span><span class="sxs-lookup"><span data-stu-id="7d46a-377">**Physical location of the testing files**:</span></span>  

  -   <span data-ttu-id="7d46a-378">H:\testfile.dat 2 0x0 25000</span><span class="sxs-lookup"><span data-stu-id="7d46a-378">H:\testfile.dat 2 0x0 25000</span></span>  

  -   <span data-ttu-id="7d46a-379">I:\testfile.dat 2 0x0 25000</span><span class="sxs-lookup"><span data-stu-id="7d46a-379">I:\testfile.dat 2 0x0 25000</span></span>  

  -   <span data-ttu-id="7d46a-380">J:\testfile.dat 2 0x0 25000</span><span class="sxs-lookup"><span data-stu-id="7d46a-380">J:\testfile.dat 2 0x0 25000</span></span>  

  -   <span data-ttu-id="7d46a-381">K:\testfile.dat 2 0x0 25000</span><span class="sxs-lookup"><span data-stu-id="7d46a-381">K:\testfile.dat 2 0x0 25000</span></span>  

  <span data-ttu-id="7d46a-382">下表列出了测试结果：</span><span class="sxs-lookup"><span data-stu-id="7d46a-382">The following table lists the test results:</span></span>  

- <span data-ttu-id="7d46a-383">从在 Lun h:，i:，j:，k: (用于我们的数据库文件的所有 Lun) 上同时 25 GB 测试文件中读取 8 KB 随机</span><span class="sxs-lookup"><span data-stu-id="7d46a-383">8 KB random reads from 25 GB test files simultaneously on LUNs H:, I:, J:, K: (the LUNs used for all of our database files)</span></span>  

  ###  

  | <span data-ttu-id="7d46a-384">每秒 （Io 数/秒） 的输入/输出操作</span><span class="sxs-lookup"><span data-stu-id="7d46a-384">Input/Output operations per second (IOs/sec)</span></span> | <span data-ttu-id="7d46a-385">兆字节为单位每秒 （Mb/秒）</span><span class="sxs-lookup"><span data-stu-id="7d46a-385">Megabytes per second (MBs/Sec)</span></span> | <span data-ttu-id="7d46a-386">平均延迟</span><span class="sxs-lookup"><span data-stu-id="7d46a-386">Average Latency</span></span> |
  |----------------------------------------------|--------------------------------|-----------------|
  |                   <span data-ttu-id="7d46a-387">10662.67</span><span class="sxs-lookup"><span data-stu-id="7d46a-387">10662.67</span></span>                   |             <span data-ttu-id="7d46a-388">83.30</span><span class="sxs-lookup"><span data-stu-id="7d46a-388">83.30</span></span>              |      <span data-ttu-id="7d46a-389">5 毫秒</span><span class="sxs-lookup"><span data-stu-id="7d46a-389">5 ms</span></span>       |


- <span data-ttu-id="7d46a-390">8 KB 的随机写入同时在 Lun h:，i:，j:，k: (用于我们的数据库文件的所有 Lun) 上的 25 GB 测试文件</span><span class="sxs-lookup"><span data-stu-id="7d46a-390">8 KB random writes to 25 GB test files simultaneously on LUNs H:, I:, J:, K: (the LUNs used for all of our database files)</span></span>  

  ###  

  |<span data-ttu-id="7d46a-391">每秒 （Io 数/秒） 的输入/输出操作</span><span class="sxs-lookup"><span data-stu-id="7d46a-391">Input/Output operations per second (IOs/sec)</span></span>|<span data-ttu-id="7d46a-392">兆字节为单位每秒 （Mb/秒）</span><span class="sxs-lookup"><span data-stu-id="7d46a-392">Megabytes per second (MBs/Sec)</span></span>|<span data-ttu-id="7d46a-393">平均延迟</span><span class="sxs-lookup"><span data-stu-id="7d46a-393">Average Latency</span></span>|  
  |------------------------------------------------------|---------------------------------------|---------------------|  
  |<span data-ttu-id="7d46a-394">31527.95</span><span class="sxs-lookup"><span data-stu-id="7d46a-394">31527.95</span></span>|<span data-ttu-id="7d46a-395">246.31</span><span class="sxs-lookup"><span data-stu-id="7d46a-395">246.31</span></span>|<span data-ttu-id="7d46a-396">1 ms</span><span class="sxs-lookup"><span data-stu-id="7d46a-396">1 ms</span></span>|  

## <a name="see-also"></a><span data-ttu-id="7d46a-397">请参阅</span><span class="sxs-lookup"><span data-stu-id="7d46a-397">See Also</span></span>  
 [<span data-ttu-id="7d46a-398">缩放 BizTalk Server 生产环境</span><span class="sxs-lookup"><span data-stu-id="7d46a-398">Scaling a Production BizTalk Server Environment</span></span>](../technical-guides/scaling-a-production-biztalk-server-environment.md)