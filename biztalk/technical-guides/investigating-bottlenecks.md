---
title: 调查瓶颈 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2ab8e485-ffe5-4f71-9ce2-f72c0c939e5d
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e34d01bbfafd1a05f87fff5cda2b21764d43f42b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22298837"
---
# <a name="investigating-bottlenecks"></a><span data-ttu-id="d61dd-102">调查瓶颈</span><span class="sxs-lookup"><span data-stu-id="d61dd-102">Investigating Bottlenecks</span></span>
<span data-ttu-id="d61dd-103">本主题介绍用于调查瓶颈的建议的过程。</span><span class="sxs-lookup"><span data-stu-id="d61dd-103">This topic describes a recommended process for investigating bottlenecks.</span></span>  
  
## <a name="what-is-the-source-of-the-problem"></a><span data-ttu-id="d61dd-104">问题的源是什么？</span><span class="sxs-lookup"><span data-stu-id="d61dd-104">What is the source of the problem?</span></span>  
 <span data-ttu-id="d61dd-105">瓶颈的根源可能是硬件或软件相关。</span><span class="sxs-lookup"><span data-stu-id="d61dd-105">The source of the bottleneck could be hardware or software related.</span></span> <span data-ttu-id="d61dd-106">当资源得到充分利用时，它通常是瓶颈的相对值。</span><span class="sxs-lookup"><span data-stu-id="d61dd-106">When resources are underused, it is usually an indication of a bottleneck.</span></span> <span data-ttu-id="d61dd-107">通过硬件限制、 低效软件配置，或两个，则可能导致瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-107">Bottlenecks can be caused by hardware limitations, by inefficient software configurations, or by both.</span></span>  
  
 <span data-ttu-id="d61dd-108">确定瓶颈是一个渐进式的过程，因此缓解一个问题可能导致发现下一个过程。</span><span class="sxs-lookup"><span data-stu-id="d61dd-108">Identifying bottlenecks is an incremental process whereby alleviating one bottleneck can lead to the discovery of the next one.</span></span> <span data-ttu-id="d61dd-109">本主题的目标就是帮助您科学地确定和缓解这些瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-109">The science of identifying and alleviating these bottlenecks is the objective of this topic.</span></span> <span data-ttu-id="d61dd-110">系统有可能在短期内以峰值执行。</span><span class="sxs-lookup"><span data-stu-id="d61dd-110">It is possible for a system to perform at peaks for short periods of time.</span></span> <span data-ttu-id="d61dd-111">但为了可承受吞吐量，系统只能按其执行速度最慢的组件的最快速度进行处理。</span><span class="sxs-lookup"><span data-stu-id="d61dd-111">However, for sustainable throughput a system can only process as fast as its slowest performing component.</span></span>  
  
## <a name="using-an-iterative-approach-to-testing"></a><span data-ttu-id="d61dd-112">使用测试迭代方法</span><span class="sxs-lookup"><span data-stu-id="d61dd-112">Using an iterative approach to testing</span></span>  
 <span data-ttu-id="d61dd-113">瓶颈可以出现在终结点 （输入/退出） 的系统或中间 （orchestration/数据库）。</span><span class="sxs-lookup"><span data-stu-id="d61dd-113">Bottlenecks can occur at the endpoints (entry/exit) of the system or in the middle (orchestration/database).</span></span> <span data-ttu-id="d61dd-114">独立瓶颈后，使用结构化的方法来标识源。</span><span class="sxs-lookup"><span data-stu-id="d61dd-114">After the bottleneck has been isolated, use a structured approach to identify the source.</span></span> <span data-ttu-id="d61dd-115">可以简化瓶颈后，务必来测量其性能以确保，新瓶颈不引入了其他位置在系统中。</span><span class="sxs-lookup"><span data-stu-id="d61dd-115">After the bottleneck is eased, it is important to measure performance again to ensure that a new bottleneck has not been introduced elsewhere in the system.</span></span>  
  
 <span data-ttu-id="d61dd-116">以迭代方式应进行确定并修复瓶颈的过程。</span><span class="sxs-lookup"><span data-stu-id="d61dd-116">The process of identifying and fixing bottlenecks should be done in an iterative manner.</span></span> <span data-ttu-id="d61dd-117">改变一次只有一个参数，在每个测试运行，期间重复相同的步骤，然后度量性能，以验证单个修改的影响。</span><span class="sxs-lookup"><span data-stu-id="d61dd-117">Vary only one parameter at a time, repeat exactly the same steps during each test run, and then measure performance to verify the impact of the single modification.</span></span> <span data-ttu-id="d61dd-118">一次变化多个参数可能会掩盖更改结果。</span><span class="sxs-lookup"><span data-stu-id="d61dd-118">Varying more than one parameter at a time could conceal the effect of the change.</span></span>  
  
 <span data-ttu-id="d61dd-119">例如，更改参数 1 可能会提高性能。</span><span class="sxs-lookup"><span data-stu-id="d61dd-119">For example, changing parameter 1 could improve performance.</span></span> <span data-ttu-id="d61dd-120">但是，与更改参数 1 更改参数 2 结合无法造成不利影响并且 negate 更改参数 1 的好处。</span><span class="sxs-lookup"><span data-stu-id="d61dd-120">However, changing parameter 2 in conjunction with changing parameter 1 could have a detrimental effect and negate the benefits of changing parameter 1.</span></span> <span data-ttu-id="d61dd-121">这指向 net 零效果并导致中在不同的参数 1 的效果假负和假阳性上不同参数 2 的效果。</span><span class="sxs-lookup"><span data-stu-id="d61dd-121">This leads to a net zero effect and results in a false negative on the effect of varying parameter 1 and a false positive on the effect of varying parameter 2.</span></span>  
  
## <a name="testing-consistency"></a><span data-ttu-id="d61dd-122">测试的一致性</span><span class="sxs-lookup"><span data-stu-id="d61dd-122">Testing consistency</span></span>  
 <span data-ttu-id="d61dd-123">应进行更改设置后测量性能特征来验证更改的效果。</span><span class="sxs-lookup"><span data-stu-id="d61dd-123">Measuring performance characteristics after changing settings should be done to validate the effect of the change.</span></span>  
  
-   <span data-ttu-id="d61dd-124">**硬件-** 使用一致的硬件，因为不同的硬件可以导致不一致的行为，并且生成误导性结果。</span><span class="sxs-lookup"><span data-stu-id="d61dd-124">**Hardware -** Use consistent hardware because varying the hardware can cause inconsistent behavior and produce misleading results.</span></span> <span data-ttu-id="d61dd-125">例如，不会使用便携式计算机来测试 BizTalk 解决方案的性能。</span><span class="sxs-lookup"><span data-stu-id="d61dd-125">For example, you would not use a laptop to test performance of a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="d61dd-126">**测试运行持续时间-** 测量固定的最短期限以确保结果的可持续的性能。</span><span class="sxs-lookup"><span data-stu-id="d61dd-126">**Test Run Duration -** Measure performance for a fixed minimum period to ensure that the results are sustainable.</span></span> <span data-ttu-id="d61dd-127">运行更长时间测试还确保系统已通过段，其中的所有缓存进行都填充，数据库表已达到预期的计数和限制给定足够的时间，可以一次调节吞吐量，以预定义的初始热/提升阈值，则命中。</span><span class="sxs-lookup"><span data-stu-id="d61dd-127">Running tests for longer periods also ensures the system has gone through the initial warm/ramp up period where all caches are populated, database tables have reached expected counts, and throttling is given sufficient time to regulate throughput once predefined thresholds are hit.</span></span> <span data-ttu-id="d61dd-128">此方法将有助于发现最佳可承受吞吐量。</span><span class="sxs-lookup"><span data-stu-id="d61dd-128">This approach will help discover optimal sustainable throughput.</span></span>  
  
-   <span data-ttu-id="d61dd-129">**测试参数 –** 不发生更改从测试运行将测试运行的测试参数。</span><span class="sxs-lookup"><span data-stu-id="d61dd-129">**Test Parameters –** Do not vary test parameters from test run to test run.</span></span> <span data-ttu-id="d61dd-130">例如，改变映射复杂性和/或文档大小可能产生不同的吞吐量和延迟结果。</span><span class="sxs-lookup"><span data-stu-id="d61dd-130">For example, varying map complexity and/or document sizes can produce different throughput and latency results.</span></span>  
  
-   <span data-ttu-id="d61dd-131">**清除状态-** 测试已完成后，请确保在运行下一步的测试之前已清理测试环境的状态。</span><span class="sxs-lookup"><span data-stu-id="d61dd-131">**Clean State -** After a test is complete, ensure that the state of the test environment is clean before running the next test.</span></span> <span data-ttu-id="d61dd-132">例如，影响运行时吞吐量数据库中的生成可以历史数据。</span><span class="sxs-lookup"><span data-stu-id="d61dd-132">For example, historical data can build up in the database affecting run-time throughput.</span></span> <span data-ttu-id="d61dd-133">回收服务实例有助于释放内存、 数据库连接等线程缓存的资源。</span><span class="sxs-lookup"><span data-stu-id="d61dd-133">Recycling the service instances helps to release cached resources like memory, database connections, and threads.</span></span> <span data-ttu-id="d61dd-134">在测试环境中，你可能想要创建和执行 bts_CleanupMsgbox 存储过程中所述[如何手动清除数据从测试环境中的 MessageBox 数据库](http://go.microsoft.com/fwlink/?LinkId=158064)(http://go.microsoft.com/fwlink/?LinkId=158064)。</span><span class="sxs-lookup"><span data-stu-id="d61dd-134">In your test environment, you may want to create and execute the bts_CleanupMsgbox stored procedure as described in [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkId=158064) (http://go.microsoft.com/fwlink/?LinkId=158064).</span></span> <span data-ttu-id="d61dd-135">此脚本旨在运行之间返回到消息框方面的新状态的 BizTalk Server 测试环境。</span><span class="sxs-lookup"><span data-stu-id="d61dd-135">This script is intended to return your BizTalk Server test environment to a fresh state with regards to the Message Box between runs.</span></span> <span data-ttu-id="d61dd-136">该脚本删除所有正在运行的实例以及所有信息包括状态、 消息以及订阅，这些实例，但保留所有激活订阅，因此不需要重新登记你业务流程或发送端口。</span><span class="sxs-lookup"><span data-stu-id="d61dd-136">The script deletes all running instances and all information about those instances including state, messages, and subscriptions, but leaves all activation subscriptions so you do not have to re-enlist your orchestrations or send ports.</span></span> <span data-ttu-id="d61dd-137">请注意，此工具不支持在生产系统上。</span><span class="sxs-lookup"><span data-stu-id="d61dd-137">Note that this tool is not supported on production systems.</span></span>  
  
-   <span data-ttu-id="d61dd-138">**性能测试和优化-** 此测试类别的目标是能够最大程度提高性能和吞吐量的你的应用程序，并查找你的系统的最大可持续吞吐量 (MST)。</span><span class="sxs-lookup"><span data-stu-id="d61dd-138">**Performance Testing and Tuning -** The goal of this test category is to maximize performance and throughput of your application and find the Maximum Sustainable Throughput (MST) of your system.</span></span>  <span data-ttu-id="d61dd-139">有关规划和最大可持续性能测量的详细信息请参阅[持续性能规划](http://go.microsoft.com/fwlink/?LinkId=158065)(http://go.microsoft.com/fwlink/?LinkId=158065) 和[什么是可持续的性能？](http://go.microsoft.com/fwlink/?LinkId=132304)</span><span class="sxs-lookup"><span data-stu-id="d61dd-139">For more information about planning and measuring Maximum Sustainable Performance see [Planning for Sustained Performance](http://go.microsoft.com/fwlink/?LinkId=158065) (http://go.microsoft.com/fwlink/?LinkId=158065) and [What Is Sustainable Performance?](http://go.microsoft.com/fwlink/?LinkId=132304)</span></span> <span data-ttu-id="d61dd-140">(http://go.microsoft.com/fwlink/?LinkId=132304)。</span><span class="sxs-lookup"><span data-stu-id="d61dd-140">(http://go.microsoft.com/fwlink/?LinkId=132304).</span></span>  
  
     <span data-ttu-id="d61dd-141">MST 是一个系统可以无限期地处理在生产环境中的消息流量的最高负载。</span><span class="sxs-lookup"><span data-stu-id="d61dd-141">The MST is the highest load of message traffic that a system can handle indefinitely in a production environment.</span></span> <span data-ttu-id="d61dd-142">在投入生产之前，所有的 BizTalk 应用程序应进行测试的性能和吞吐量。</span><span class="sxs-lookup"><span data-stu-id="d61dd-142">All BizTalk applications should be tested for performance and throughput before going into production.</span></span> <span data-ttu-id="d61dd-143">至少，你应运行一组代表表示最常见的使用方案的测试用例。</span><span class="sxs-lookup"><span data-stu-id="d61dd-143">At a minimum, you should run a representative set of test cases that represent the most common usage scenarios.</span></span> <span data-ttu-id="d61dd-144">我们建议对预期的负载测试和峰值负载在匹配的生产环境的特征的单独环境中。</span><span class="sxs-lookup"><span data-stu-id="d61dd-144">We recommend that you test against expected loads and peak loads in a separate environment that matches characteristics of the production environment.</span></span> <span data-ttu-id="d61dd-145">此环境应具有的所有公司的标准服务安装和运行，如监视代理和防病毒软件。</span><span class="sxs-lookup"><span data-stu-id="d61dd-145">This environment should have all of the corporate standard services installed and running, such as monitoring agents, and antivirus software.</span></span>  
  
-   <span data-ttu-id="d61dd-146">我们还建议在生产环境旁边运行其他 BizTalk 应用程序中测试新的 BizTalk 应用程序相同的硬件上。</span><span class="sxs-lookup"><span data-stu-id="d61dd-146">We also recommend that you test new BizTalk applications on the same hardware in production alongside the other BizTalk applications that are running.</span></span> <span data-ttu-id="d61dd-147">这些其他 BizTalk 应用程序放在 BizTalk Server、 SQL Server、 网络 I/O 和磁盘 I/O 上的额外的负载。</span><span class="sxs-lookup"><span data-stu-id="d61dd-147">These other BizTalk applications put additional load on the BizTalk Server, SQL Server, network I/O, and disk I/O.</span></span> <span data-ttu-id="d61dd-148">此外，一个 BizTalk 应用程序可能会导致另一个用来限制 （当假脱机深度获取太大，例如）。</span><span class="sxs-lookup"><span data-stu-id="d61dd-148">In addition, one BizTalk application could cause another to throttle (when the spool depth gets too large, for example).</span></span> <span data-ttu-id="d61dd-149">所有的 BizTalk 应用程序应性能 / 压力之前测试到生产环境。</span><span class="sxs-lookup"><span data-stu-id="d61dd-149">All BizTalk applications should be performance / stress tested before going into production.</span></span> <span data-ttu-id="d61dd-150">此外，你应该确定时间系统来恢复从峰值负载。</span><span class="sxs-lookup"><span data-stu-id="d61dd-150">In addition, you should determine how long it takes the system to recover from peak loads.</span></span> <span data-ttu-id="d61dd-151">如果系统未完全恢复从峰值负载下, 一步的峰值负载发生之前，你已遇到了问题。</span><span class="sxs-lookup"><span data-stu-id="d61dd-151">If the system does not fully recover from a peak load before the next peak load occurs, then you've got a problem.</span></span> <span data-ttu-id="d61dd-152">系统将获取更多和进一步隐藏，并将永远无法完全恢复。</span><span class="sxs-lookup"><span data-stu-id="d61dd-152">The system will get further and further behind and will never be able to fully recover.</span></span>  
  
## <a name="expectations-throughput-vs-latency"></a><span data-ttu-id="d61dd-153">预期： 吞吐量与延迟</span><span class="sxs-lookup"><span data-stu-id="d61dd-153">Expectations: throughput vs. latency</span></span>  
 <span data-ttu-id="d61dd-154">你可以期望了一定数量的吞吐量和/或从已部署的系统的延迟。</span><span class="sxs-lookup"><span data-stu-id="d61dd-154">You can expect a certain amount of throughput and/or latency from the deployed system.</span></span> <span data-ttu-id="d61dd-155">尝试同时实现高吞吐量和低延迟在系统上放置对立的需求。</span><span class="sxs-lookup"><span data-stu-id="d61dd-155">Attempting to achieve high throughput and low latency simultaneously places opposing demands on the system.</span></span> <span data-ttu-id="d61dd-156">使用合理的滞后时间，则可能会获得最佳吞吐量。</span><span class="sxs-lookup"><span data-stu-id="d61dd-156">You can expect optimal throughput with reasonable latency.</span></span> <span data-ttu-id="d61dd-157">提高了吞吐量，压力 （例如，更高的 CPU 占用率、 更高的磁盘-/ O 争用、 内存压力和更高版本的锁争用） 系统增大。</span><span class="sxs-lookup"><span data-stu-id="d61dd-157">As throughput improves, stress (such as, higher CPU consumption, higher disk-I/O contention, memory pressure, and greater lock contention) on the system increases.</span></span> <span data-ttu-id="d61dd-158">这种情况下可以减少延迟产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="d61dd-158">This situation can have a negative impact on latency.</span></span> <span data-ttu-id="d61dd-159">若要发现的系统的最佳容量，我们建议你确定并最大程度减少任何瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-159">To discover optimal capacity of a system, we recommend that you identify and minimize any bottlenecks.</span></span>  
  
 <span data-ttu-id="d61dd-160">已完成的实例驻留在数据库中可能会导致瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-160">Completed instances residing in the database can cause bottlenecks.</span></span> <span data-ttu-id="d61dd-161">出现瓶颈时，可能会降低性能。</span><span class="sxs-lookup"><span data-stu-id="d61dd-161">When bottlenecks occur, performance can degrade.</span></span> <span data-ttu-id="d61dd-162">提供系统足够时间来排出可以帮助解决此问题。</span><span class="sxs-lookup"><span data-stu-id="d61dd-162">Giving the system sufficient time to drain can help fix the problem.</span></span> <span data-ttu-id="d61dd-163">发现的积压工作构建的原因并帮助解决此问题很重要。</span><span class="sxs-lookup"><span data-stu-id="d61dd-163">Discovering the cause of the backlog buildup and helping fix the issue is important.</span></span>  
  
 <span data-ttu-id="d61dd-164">若要发现的积压工作的原因，你可以分析的历史数据和监视性能计数器 （以发现使用模式并诊断积压工作的源）。</span><span class="sxs-lookup"><span data-stu-id="d61dd-164">To discover the cause of the backlog, you can analyze historical data and monitor performance counters (to discover usage patterns, and diagnose the source of the backlog).</span></span> <span data-ttu-id="d61dd-165">通常情况下，当以批处理方式夜处理大量数据，则会发生积压工作。</span><span class="sxs-lookup"><span data-stu-id="d61dd-165">Commonly, backlogs can occur when large volumes of data are processed in a batched manner on a nightly basis.</span></span> <span data-ttu-id="d61dd-166">你可能发现可以发现的系统，并且能够从积压工作中恢复的容量。</span><span class="sxs-lookup"><span data-stu-id="d61dd-166">You may find it useful to discover the capacity of the system and its ability to recover from a backlog.</span></span> <span data-ttu-id="d61dd-167">此信息可以帮助你可用于估计用于处理 overdrive 方案和的缓冲区空间量的硬件要求以适应系统以应对出现未预见的峰值吞吐量中。</span><span class="sxs-lookup"><span data-stu-id="d61dd-167">This information can help you to estimate hardware requirements for handling overdrive scenarios and the amount of buffer room to accommodate within a system to handle unforeseen spikes in throughput.</span></span>  
  
 <span data-ttu-id="d61dd-168">监视性能计数器可以帮助区分在运行时也可能会发生的潜在瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-168">Monitoring performance counters can help individuate potential bottlenecks that could arise at runtime.</span></span> <span data-ttu-id="d61dd-169">但是，当我们怀疑 CPU 或内存瓶颈的原因可能是一个自定义组件构成解决方案，我们强烈建议你使用分析工具此类的 Visual Studio 探查器或蚂蚁性能探查器性能测试期间若要缩小范围，并区分明确地生成问题的类。</span><span class="sxs-lookup"><span data-stu-id="d61dd-169">However, when we suspect that the culprit of CPU or memory bottleneck may be one of the custom components that compose the solution, we strongly recommend that you use profiling tools such Visual Studio Profiler or ANTS Performance Profiler during a performance test to narrow and individuate with certainty the class that generates the problem.</span></span> <span data-ttu-id="d61dd-170">显然，分析应用程序会影响性能。</span><span class="sxs-lookup"><span data-stu-id="d61dd-170">Obviously, profiling an application interferes with performance.</span></span> <span data-ttu-id="d61dd-171">因此，这些测试应致力于 individuating 这些组件，从而导致内存消耗、 CPU 使用率或延迟，并且应丢弃这些测试期间收集的数字。</span><span class="sxs-lookup"><span data-stu-id="d61dd-171">Therefore, these tests should be focused on individuating those components that cause memory consumption, CPU utilization or latency and figures collected during these tests should be discarded.</span></span>  
  
 <span data-ttu-id="d61dd-172">要获得最佳可持续吞吐量需要丰富的优化系统了解部署的应用程序、 优点和缺点，系统，以及使用方式的特定方案。</span><span class="sxs-lookup"><span data-stu-id="d61dd-172">Tuning the system for optimal sustainable throughput requires an in depth understanding of the deployed application, the strengths and weaknesses of the system, and usage patterns of the specific scenario.</span></span> <span data-ttu-id="d61dd-173">发现瓶颈和准确预测最佳可承受吞吐量的唯一方式就是通过对非常契合生产中使用情况的拓扑结构进行全面测试。</span><span class="sxs-lookup"><span data-stu-id="d61dd-173">The only way to discover bottlenecks and predict optimal sustainable throughput with certainty is through thorough testing on a topology that closely matches what will be used in production.</span></span> <span data-ttu-id="d61dd-174">当针对特定用例中运行负载测试和压力测试，隔离到单独的主机实例 （接收位置，发送端口业务流程） 的单个项目和设置在性能监视器工具中的右计数器至关重要缩小瓶颈的原因。</span><span class="sxs-lookup"><span data-stu-id="d61dd-174">When running load and stress tests against a certain use case, isolating single artifacts (receive locations, send ports, orchestrations) into separate host instances and setting the right counters inside the performance monitor tool is crucial to narrow down the cause of a bottleneck.</span></span>  
  
 <span data-ttu-id="d61dd-175">本部分中的其他主题指导你完成定义该拓扑的过程，并提供指导如何降低和避免瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-175">Other topics in this section guide you through the process of defining that topology, and provide guidance on how to lessen and avoid bottlenecks.</span></span>  
  
## <a name="scaling"></a><span data-ttu-id="d61dd-176">缩放</span><span class="sxs-lookup"><span data-stu-id="d61dd-176">Scaling</span></span>  
 <span data-ttu-id="d61dd-177">瓶颈可以出现在各个阶段的部署拓扑。</span><span class="sxs-lookup"><span data-stu-id="d61dd-177">Bottlenecks can occur at various stages of a deployed topology.</span></span> <span data-ttu-id="d61dd-178">可以通过向上缩放或横向扩展环境寻址某些瓶颈。</span><span class="sxs-lookup"><span data-stu-id="d61dd-178">Some bottlenecks can be addressed by either scaling up or scaling out the environment.</span></span> <span data-ttu-id="d61dd-179">向上扩展是升级现有的计算机的过程。</span><span class="sxs-lookup"><span data-stu-id="d61dd-179">Scaling up is the process of upgrading the existing computer.</span></span> <span data-ttu-id="d61dd-180">例如，可以升级从四处理器计算机 BizTalk Server 计算机到八个处理器的计算机，以及替换现有的 Cpu 和添加更多的 RAM。</span><span class="sxs-lookup"><span data-stu-id="d61dd-180">For example, you can upgrade a BizTalk Server computer from a four-processor computer to an eight-processor computer, as well as substituting the existing CPUs and adding more RAM.</span></span> <span data-ttu-id="d61dd-181">这种方式，可以加快占用大量资源的任务，例如文档分析和映射。</span><span class="sxs-lookup"><span data-stu-id="d61dd-181">In this way, you can accelerate resource-intensive tasks such as document parsing and mapping.</span></span> <span data-ttu-id="d61dd-182">向外扩展是将服务器添加到你的部署的过程。</span><span class="sxs-lookup"><span data-stu-id="d61dd-182">Scaling out is the process of adding servers to your deployment.</span></span> <span data-ttu-id="d61dd-183">若要向上或向外缩放的决策取决于瓶颈和正在配置的应用程序的类型。</span><span class="sxs-lookup"><span data-stu-id="d61dd-183">The decision to scale up or out depends on the type of bottleneck and the application being configured.</span></span> <span data-ttu-id="d61dd-184">应用程序需要构建从头，才能利用的增加或扩大。以下指南说明如何更改基于遇到瓶颈的硬件部署拓扑。</span><span class="sxs-lookup"><span data-stu-id="d61dd-184">An application needs to be built from the ground up to be capable of taking advantage of scaling up or out. The following guidance explains how to change hardware deployment topologies based on bottlenecks encountered.</span></span>  
  
 <span data-ttu-id="d61dd-185">**向上缩放**上运行 BizTalk 解决方案的方式升级的硬件 （例如，添加 CPU 和内存）。</span><span class="sxs-lookup"><span data-stu-id="d61dd-185">**Scaling up** means running a BizTalk solution on upgraded hardware (for example, adding CPU’s and memory).</span></span> <span data-ttu-id="d61dd-186">你应查看 1） 向外扩展是过于昂贵或 2） 向外扩展将不会帮助解决瓶颈时向上扩展。</span><span class="sxs-lookup"><span data-stu-id="d61dd-186">You should look at scaling up when 1) scaling out is too expensive or 2) scaling out will not help solve a bottleneck.</span></span> <span data-ttu-id="d61dd-187">例如，你可以显著减少所用的时间转换和处理大消息，如果你更快的计算机上运行任务。</span><span class="sxs-lookup"><span data-stu-id="d61dd-187">For example, you can significantly reduce the time spent transforming and processing a large message if you run the task on a faster machine.</span></span>  
  
 <span data-ttu-id="d61dd-188">**向外扩展**将 BizTalk 节点添加到 BizTalk Server 组和使用它们来运行的解决方案的一个或多个部分的应用程序平台组成。</span><span class="sxs-lookup"><span data-stu-id="d61dd-188">**Scaling out** the application platform consists of adding BizTalk nodes to the BizTalk Server Group and using them to run one or more parts of the solution.</span></span> <span data-ttu-id="d61dd-189">你应该查看向外扩展，当 1） 你需要以隔离发送、 接收，处理、 跟踪主机或者 2） 当内存，I/O 或网络 I/O 资源将达到最大值出对单台服务器。</span><span class="sxs-lookup"><span data-stu-id="d61dd-189">You should look at scaling out when 1) you need to isolate send, receive, processing, tracking hosts or 2) when memory, I/O or Network I/O resources are maxed out for a single server.</span></span> <span data-ttu-id="d61dd-190">负载可以跨多个服务器;但是，将新节点添加到 BizTalk Server 组可以增加 MessageBox 数据库上的锁争用。</span><span class="sxs-lookup"><span data-stu-id="d61dd-190">The load can be spread across multiple servers; however, adding new nodes to the BizTalk Server Group can increase the lock contention on the MessageBox database.</span></span>  
  
 <span data-ttu-id="d61dd-191">因此应向上扩展或向外扩展？</span><span class="sxs-lookup"><span data-stu-id="d61dd-191">So should you scale up or scale out?</span></span> <span data-ttu-id="d61dd-192">按比例增加你的平台可以减少 BizTalk 解决方案的延迟，因为它使单个任务 （例如，消息映射） 运行得更快。</span><span class="sxs-lookup"><span data-stu-id="d61dd-192">Scaling up your platform can reduce the latency of a BizTalk solution because it makes single tasks (for example, message mapping) run faster.</span></span> <span data-ttu-id="d61dd-193">向外扩展可以提高最大可持续吞吐量和 BizTalk 解决方案的可伸缩性因为它可让你能够将工作负荷散布到多台计算机。</span><span class="sxs-lookup"><span data-stu-id="d61dd-193">Scaling out can improve the maximum sustainable throughtput and the scalability of your BizTalk solution because it allows you to spread the workload across multiple machines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d61dd-194">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d61dd-194">See Also</span></span>  
 [<span data-ttu-id="d61dd-195">查找并消除瓶颈</span><span class="sxs-lookup"><span data-stu-id="d61dd-195">Finding and Eliminating Bottlenecks</span></span>](../technical-guides/finding-and-eliminating-bottlenecks.md)