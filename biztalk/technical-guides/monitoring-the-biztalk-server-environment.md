---
title: 监视 BizTalk Server 环境 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: baae51cf-0284-429b-8335-bc1ac3e63f4c
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9137558a4b452138745615e3aeba96c88f8162f5
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65397051"
---
# <a name="monitoring-the-biztalk-server-environment"></a>监视 BizTalk Server 环境
你可以监视[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]基础结构和应用程序与手动或自动过程中或使用的工具下, 表中所示的两种方法的组合。  


| 手动或自动监视 |                                                                                                       工具                                                                                                        |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      自动监视      |                                                                        Microsoft System Center Operations Manager (Operations Manager)                                                                         |
|       手动监视        | -**组中心**页中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台<br />日志 (PAL) 工具的性能分析<br />-事件查看器 |

 是否实现监视的应用程序，应使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中监视的运行状况在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序并执行根本原因分析，以确定任何问题的根本原因。  

 监视时[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，请记住以下几点：  

-   你的基础结构可能处于正常状态，但可能不是您的应用程序 （例如，它们正在接收无效消息和无法处理它们）。  

-   你的基础结构可能并不正常，但您的应用程序可能正在正常运行 （例如，如果服务器已关闭，但有足够的服务器分配给主机来接管负载）。  

-   基础结构问题可能表现为应用程序问题 （例如，不处理消息速度不够快因为服务器已关闭）。  

## <a name="monitoring-types"></a>监视类型  
 监视你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和应用程序划分为四个主要类别：  

-   可用性监视  

-   运行状况监视  

-   性能监视  

-   阈值监视  

### <a name="availability-monitoring"></a>可用性监视  
 可用性监视回答的问题"是指系统或应用程序资源阻止不可用在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]以最佳方式运行的应用程序？" 这些问题是几乎专用系统级别，如服务和连接的可用性。 例如，如果适配器失败，因为企业单一登录服务已停止，这是一个可用性问题。 如果其中一个分配给主机的服务器出现故障，并且你的应用程序落后在处理消息，您遇到了可用性问题。 同样，如果应用程序已停止，且无法处理消息，则您遇到了可用性问题。 下表列出了监视工具的可用性。  


|                                                   Tool                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             任务                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台 |                                                                                                                                                                                                                                                                                                                                                                                                 检查**组中心**页中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台才能查看应用程序或其组件 （端口/业务流程） 都已停止。                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                          Operations Manager 2007                                          | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理包和 Operations Manager 操作控制台显示警报，如果关键的低级别服务，例如适配器都不可用。 若要有效地监控[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，您必须监视非[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]依赖的资源应用程序，如数据库和服务器。 此外，您还必须安装并使用 SQL Server、 Internet Information Services 和 Windows 基本操作系统管理包。 Operations Manager 合并从事件日志、 WMI 和其他事件提供程序感兴趣的事件。 有关安装所有相关的管理包的详细信息，请参阅[核对清单：监视 BizTalk Server 使用 Operations Manager 2007](../technical-guides/checklist-monitoring-biztalk-server-with-operations-manager-2007.md)。 |
|                                               事件查看器                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               查找适配器连接问题、 已停止的服务，等等。                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

### <a name="health-monitoring"></a>运行状况监视  
 运行状况监视有助于回答问题，"在我的应用程序或资源的任何错误运行状况中？" 例如，是我的应用程序或其构成项目的任何当前遇到异常条件？ 或者，由于消息负载中的数据无效而挂起的消息？ 下表显示了运行状况监视工具。  


|                                                   Tool                                                    |                                                                                                                                                                                                                                                                     任务                                                                                                                                                                                                                                                                     |
|-----------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台 |                                                                                                                                                     您使用**组中心**页和查询页中的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台来确定应用程序运行状况问题和分析问题原因。                                                                                                                                                      |
|                                            Operations Manager                                             | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理包是以通知你，你已挂起的消息和/或服务实例中的在第一个防线你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序。 从 Operations Manager 中收到通知之后, 你可以过渡到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台，以解决该问题。 |
|                                               事件查看器                                                |                                                                                                                                                                                                                               检测到的消息和业务流程处理过程中出现的问题。                                                                                                                                                                                                                               |

### <a name="performance-monitoring"></a>性能监视  
 性能监视回答的问题，"如何有效地为系统执行其工作的？" 这种监视主要关注物理资源上的负载，如数据库和磁盘。 例如，如果 CPU 使用率一致地为 90 到 100%且造成消息积压，这是在计算机级别的性能问题。 下表显示了性能监视工具。  


|                                                   Tool                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    任务                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                            SQL 查询分析器                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       监视数据库大小和内容，以诊断系统问题。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|                                            Operations Manager                                             | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]配置管理包和 Operations Manager 操作控制台显示警报，如果关键[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能计数器，例如消息框 Q 大小或主机 Q 大小超过定义的阈值。 若要监视的非性能[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]您的应用程序依赖的资源如数据库和服务器，必须还会安装和使用 SQL Server、 Internet Information Services 和 Windows 基本操作系统管理包。 有关安装所有相关的管理包的详细信息，请参阅[核对清单：监视 BizTalk Server 使用 Operations Manager 2007](../technical-guides/checklist-monitoring-biztalk-server-with-operations-manager-2007.md)。<br /><br /> 此外可以使用性能分析的日志 (PAL) 工具来捕获从测试中的阈值规则中使用的吞吐量阈值[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理包。 有关 PAL 工具的详细信息，请参阅[使用性能分析的日志 (PAL) 工具](../technical-guides/using-the-performance-analysis-of-logs-pal-tool.md)。 |
| [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                **组中心**页显示关键性能指标，如服务实例数当前处于活动状态，在冻结，准备好运行，计划，挂起，等您[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                    业务活动监视 (BAM)                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     你想要跟踪与业务应用程序无关的关键性能指标在业务流程中，可以指定特定阶段。 使用 BAM，可以监视业务指标，以及 IT 指标 （例如，SLA 和执行时间）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

### <a name="threshold-monitoring"></a>阈值监视  
 自定义的阈值规则是一个成熟的操作环境中的基本元素。 您可以在 Operations Manager 中创建许多这些阈值规则。 这些阈值规则通常基于 BizTalk 应用程序的要求。 性能分析日志 (PAL) 的工具可以简化确定这些阈值为您的环境的正确值的过程。 PAL 工具附带了一些基本的阈值，可用作 Microsoft System Center Operations manager 使用的数据的核心。 在 Operations Manager 中实现这些阈值规则，用于自动监视。 此外，管理员可以设置通知规则，并且可以执行基于阈值规则 （例如运行一个脚本，调用.NET 代码，发送电子邮件，等等。） 的触发操作。 下表显示了阈值监视工具。  


|                  Tool                   |                                                                                                                                                                                                                               任务                                                                                                                                                                                                                                |
|-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 性能日志分析 (PAL) 工具 | 性能计数器将超出阈值时，PAL 工具将自动报告。 阈值动态更改为适用于服务器的环境。 例如，阈值更改的内核内存池基于用户提供有关 32 位/64 位体系结构，物理内存量和 /3GB 开关的答案。 PAL 工具可以免费下载： [ http://www.codeplex.com/PAL ](http://www.codeplex.com/PAL)。 |
|           Operations Manager            |                                                                                                      可以配置 BizTalk Server 管理包和 Operation Manager 操作控制台为显示警报，如果关键[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计数器超过定义的阈值。                                                                                                       |

## <a name="troubleshooting"></a>疑难解答  
 一旦您发现的运行状况问题您[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序，可以使用**组中心**页并**查询**页[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台来分析此问题。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台提供了集成的配置、 部署和疑难解答体验，并可以修复配置和部署后当您在查明它们相关的管理控制台中的问题。 通常情况下，大多数应用程序问题由于消息未获得按预期方式 (这可能表现为挂起的服务实例，或重试端口或尚未重新激活的已冻结的实例，等等。)  

 可以使用**组中心**页并**查询**页服务实例进行分组 (它们处于任何状态： 运行、 挂起、 已冻结等) 应用程序错误类型，由服务类型、 主机等。，若要隔离不同的错误，调查逐个进行，并修复它们。