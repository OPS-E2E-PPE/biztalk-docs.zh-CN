---
title: 一般 BizTalk Server Optimizations2 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 41b452e9-d94c-4bcb-8ef6-e9cea28fc0ab
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2451661db0e4da8dd801a3e4296b4c4f712ff503
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65392041"
---
# <a name="general-biztalk-server-optimizations"></a><span data-ttu-id="a039f-102">一般 BizTalk Server 优化</span><span class="sxs-lookup"><span data-stu-id="a039f-102">General BizTalk Server Optimizations</span></span>
<span data-ttu-id="a039f-103">以下建议可用于增加[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能。</span><span class="sxs-lookup"><span data-stu-id="a039f-103">The following recommendations can be used to increase [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span> <span data-ttu-id="a039f-104">本主题中列出的优化应用后[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已安装并配置。</span><span class="sxs-lookup"><span data-stu-id="a039f-104">The optimizations listed in this topic are applied after [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has been installed and configured.</span></span>  
  
## <a name="create-multiple-biztalk-server-hosts-and-separate-host-instances-by-functionality"></a><span data-ttu-id="a039f-105">创建多个 BizTalk Server 主机和单独的主机实例的功能</span><span class="sxs-lookup"><span data-stu-id="a039f-105">Create multiple BizTalk Server hosts and separate host instances by functionality</span></span>  
 <span data-ttu-id="a039f-106">为发送、 接收、 处理和跟踪功能，应创建单独的主机。</span><span class="sxs-lookup"><span data-stu-id="a039f-106">Separate hosts should be created for sending, receiving, processing, and tracking functionality.</span></span> <span data-ttu-id="a039f-107">创建多个 BizTalk 主机在 BizTalk 组中配置工作负荷时提供灵活性和是 BizTalk 组中的 BizTalk 服务器之间分发处理的主要方式。</span><span class="sxs-lookup"><span data-stu-id="a039f-107">Creating multiple BizTalk hosts provides flexibility when configuring the workload in your BizTalk group and is the primary means of distributing processing across the BizTalk Servers in a BizTalk group.</span></span> <span data-ttu-id="a039f-108">多个主机还允许您停止一个主机，而不会影响其他主机。</span><span class="sxs-lookup"><span data-stu-id="a039f-108">Multiple hosts also allow you to stop one host without affecting other hosts.</span></span> <span data-ttu-id="a039f-109">例如，可能想要停止发送消息，以让他们队列在 Messagebox 数据库中，同时仍允许入站的接收的消息出现。</span><span class="sxs-lookup"><span data-stu-id="a039f-109">For example, you may want to stop sending messages to let them queue up in the Messagebox database, while still allowing the inbound receiving of messages to occur.</span></span> <span data-ttu-id="a039f-110">主机实例分隔功能还提供以下优势：</span><span class="sxs-lookup"><span data-stu-id="a039f-110">Separating host instances by functionality also provides the following benefits:</span></span>  
  
-   <span data-ttu-id="a039f-111">每个主机实例中的.NET 线程池具有其自己的内存、 句柄和线程等资源集。</span><span class="sxs-lookup"><span data-stu-id="a039f-111">Each host instance has its own set of resources such as memory, handles, and threads in the .NET thread pool.</span></span>  
  
-   <span data-ttu-id="a039f-112">多个 BizTalk 主机还会减少 Messagebox 数据库主机队列表上的争用，因为每个主机分配 Messagebox 数据库中其自己的工作队列表。</span><span class="sxs-lookup"><span data-stu-id="a039f-112">Multiple BizTalk hosts will also reduce contention on the Messagebox database host queue tables because each host is assigned its own work queue tables in the Messagebox database.</span></span>  
  
-   <span data-ttu-id="a039f-113">限制是 BizTalk Server 中实现在主机级别。</span><span class="sxs-lookup"><span data-stu-id="a039f-113">Throttling is implemented in BizTalk Server at the host-level.</span></span> <span data-ttu-id="a039f-114">这允许您设置的每个主机的不同限制的特征。</span><span class="sxs-lookup"><span data-stu-id="a039f-114">This allows you to set different throttling characteristics for each host.</span></span>  
  
-   <span data-ttu-id="a039f-115">安全性是通过实现在主机级别;每个主机在离散的 Windows 标识下运行。</span><span class="sxs-lookup"><span data-stu-id="a039f-115">Security is implemented at the host-level; each host runs under a discrete Windows identity.</span></span> <span data-ttu-id="a039f-116">这样，您，例如，为 Host_A 访问赋予 FileShare_B，同时不允许任何其他主机访问文件共享。</span><span class="sxs-lookup"><span data-stu-id="a039f-116">This would allow you, for example, to give Host_A access to FileShare_B, while not allowing any of the other hosts to access the file share.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-117">虽然有与创建其他主机实例的优点，也有潜在的缺点如果创建了太多主机实例。</span><span class="sxs-lookup"><span data-stu-id="a039f-117">While there are benefits to creating additional host instances, there are also potential drawbacks if too many host instances are created.</span></span> <span data-ttu-id="a039f-118">每个主机实例是一个 Windows 服务 (BTSNTSvc.exe)，它可以生成针对 MessageBox 数据库的更多负载，并会占用计算机资源 （如 CPU、 内存、 线程）。</span><span class="sxs-lookup"><span data-stu-id="a039f-118">Each host instance is a Windows service (BTSNTSvc.exe), which generates additional load against the MessageBox database and consumes computer resources (such as CPU, memory, threads).</span></span>  
  
 <span data-ttu-id="a039f-119">有关修改 BizTalk Server 主机属性的详细信息，请参阅"如何为修改主机属性"中的 BizTalk Server 帮助在[ http://go.microsoft.com/fwlink/?LinkId=101588 ](http://go.microsoft.com/fwlink/?LinkId=101588)。</span><span class="sxs-lookup"><span data-stu-id="a039f-119">For more information about modifying BizTalk Server Host properties, see "How to Modify Host Properties" in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkId=101588](http://go.microsoft.com/fwlink/?LinkId=101588).</span></span>  
  
## <a name="configure-a-dedicated-tracking-host"></a><span data-ttu-id="a039f-120">配置专用的跟踪主机</span><span class="sxs-lookup"><span data-stu-id="a039f-120">Configure a dedicated tracking host</span></span>  
 <span data-ttu-id="a039f-121">BizTalk Server 适用于吞吐量，因此主业务流程和消息传递引擎执行不实际消息直接移至 BizTalk 跟踪数据库或 BAM 数据库，因为这会将转移这些引擎从其主作业的执行业务流程。</span><span class="sxs-lookup"><span data-stu-id="a039f-121">BizTalk Server is optimized for throughput, so the main orchestration and messaging engines do not actually move messages directly to the BizTalk Tracking or BAM databases, as this would divert these engines from their primary job of executing business processes.</span></span> <span data-ttu-id="a039f-122">相反，BizTalk Server 使消息留在 MessageBox 数据库，并将其标记为需要迁移到 BizTalk 跟踪数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-122">Instead, BizTalk Server leaves the messages in the MessageBox database and marks them as requiring a move to the BizTalk Tracking database.</span></span> <span data-ttu-id="a039f-123">后台进程 （跟踪主机），然后将消息移动到 BizTalk 跟踪和 BAM 数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-123">A background process (the tracking host) then moves the messages to the BizTalk Tracking and BAM databases.</span></span> <span data-ttu-id="a039f-124">跟踪是资源密集型操作，因为单独的主机应创建专用于跟踪，因此可尽量减少跟踪具有与消息处理专用的主机上的影响。</span><span class="sxs-lookup"><span data-stu-id="a039f-124">Because tracking is a resource intensive operation, a separate host should be created that is dedicated to tracking, thereby minimizing the impact that tracking has on hosts dedicated to message processing.</span></span>  
  
 <span data-ttu-id="a039f-125">使用专用的跟踪主机还允许您停止其他 BizTalk 主机而不会影响与 BizTalk Server 跟踪。</span><span class="sxs-lookup"><span data-stu-id="a039f-125">Using a dedicated tracking host also allows you to stop other BizTalk hosts without interfering with BizTalk Server tracking.</span></span> <span data-ttu-id="a039f-126">跟踪数据从 Messagebox 数据库的移动的 BizTalk Server 系统正常运行至关重要。</span><span class="sxs-lookup"><span data-stu-id="a039f-126">The movement of tracking data out of the Messagebox database is critical for a healthy BizTalk Server system.</span></span> <span data-ttu-id="a039f-127">如果停止 BizTalk 主机负责将跟踪数据移 BizTalk 组中，将不运行的跟踪数据解码服务。</span><span class="sxs-lookup"><span data-stu-id="a039f-127">If the BizTalk Host responsible for moving tracking data in the BizTalk group is stopped, the Tracking Data Decode service will not run.</span></span> <span data-ttu-id="a039f-128">这种影响是，如下所示：</span><span class="sxs-lookup"><span data-stu-id="a039f-128">The impact of this is as follows:</span></span>  
  
- <span data-ttu-id="a039f-129">HAT 跟踪数据不会从 Messagebox 数据库移至 BizTalk 跟踪数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-129">HAT tracking data will not be moved from the Messagebox database to the BizTalk Tracking database.</span></span>  
  
- <span data-ttu-id="a039f-130">BAM 跟踪数据不会从 Messagebox 数据库移至 BAM 主导入数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-130">BAM tracking data will not be moved from the Messagebox database to the BAM Primary Import database.</span></span>  
  
- <span data-ttu-id="a039f-131">不移动数据，因为它不能从 Messagebox 数据库中删除。</span><span class="sxs-lookup"><span data-stu-id="a039f-131">Because data is not moved, it cannot be deleted from the Messagebox database.</span></span>  
  
- <span data-ttu-id="a039f-132">跟踪数据解码服务停止时，跟踪侦听器仍将触发并将跟踪数据写入到 Messagebox 数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-132">When the Tracking Data Decode service is stopped, tracking interceptors will still fire and write tracking data to the Messagebox database.</span></span> <span data-ttu-id="a039f-133">如果不移动数据时，这将导致 Messagebox 数据库变得臃肿，这会影响性能随时间变化。</span><span class="sxs-lookup"><span data-stu-id="a039f-133">If the data is not moved, this will cause the Messagebox database to become bloated, which will impact performance over time.</span></span> <span data-ttu-id="a039f-134">即使不会跟踪自定义属性或 BAM 配置文件未设置，默认情况下的某些数据被跟踪 （如管道接收 / 发送事件和业务流程事件）。</span><span class="sxs-lookup"><span data-stu-id="a039f-134">Even if custom properties are not tracked or BAM profiles are not set up, by default some data is tracked (such as pipeline receive / send events and orchestration events).</span></span> <span data-ttu-id="a039f-135">如果您不想要运行的跟踪数据解码服务，请关闭所有跟踪，以便没有侦听器将数据保存到数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-135">If you do not want to run the Tracking Data Decode service, turn off all tracking so that no interceptors save data to the database.</span></span> <span data-ttu-id="a039f-136">若要禁用全局跟踪，请参阅"如何为禁用全局跟踪"在 BizTalk Server 帮助[ http://go.microsoft.com/fwlink/?LinkId=101589 ](http://go.microsoft.com/fwlink/?LinkId=101589)。</span><span class="sxs-lookup"><span data-stu-id="a039f-136">To disable global tracking, see "How to Turn Off Global Tracking" in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkId=101589](http://go.microsoft.com/fwlink/?LinkId=101589).</span></span> <span data-ttu-id="a039f-137">使用 BizTalk Server 管理控制台来有选择性地禁用跟踪事件。</span><span class="sxs-lookup"><span data-stu-id="a039f-137">Use the BizTalk Server Administration console to selectively disable tracking events.</span></span>  
  
  <span data-ttu-id="a039f-138">跟踪主机应运行 BizTalk Server （适用于在其中一个出现故障的情况下的冗余） 的至少两台计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="a039f-138">The tracking host should be run on at least two computers running BizTalk Server (for redundancy in case one fails).</span></span> <span data-ttu-id="a039f-139">为了获得最佳性能，应具有至少一个跟踪主机实例，每个 Messagebox 数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-139">For optimal performance, you should have at least one tracking host instance per Messagebox database.</span></span> <span data-ttu-id="a039f-140">跟踪主机实例的实际数目应 （N + 1），其中 N = Messagebox 数据库的数量。</span><span class="sxs-lookup"><span data-stu-id="a039f-140">The actual number of tracking host instances should be (N + 1), where N = the number of Messagebox databases.</span></span> <span data-ttu-id="a039f-141">"+ 1"是为实现冗余，一台计算机承载跟踪失败的情况下。</span><span class="sxs-lookup"><span data-stu-id="a039f-141">The "+ 1" is for redundancy, in case one of the computers hosting tracking fails.</span></span>  
  
  <span data-ttu-id="a039f-142">一个跟踪主机实例将跟踪数据的特定 Messagebox 数据库，但永远不会有多个跟踪主机实例特定的 Messagebox 数据库移动数据。</span><span class="sxs-lookup"><span data-stu-id="a039f-142">A tracking host instance moves tracking data for specific Messagebox databases, but there will never be more than one tracking host instance moving data for a specific Messagebox database.</span></span> <span data-ttu-id="a039f-143">例如，如果您有三个 Messagebox 数据库，并且只有两个跟踪主机实例，然后其中一个主机实例需要将数据移动 Messagebox 数据库中的两个。</span><span class="sxs-lookup"><span data-stu-id="a039f-143">For example, if you have three Messagebox databases, and only two tracking host instances, then one of the host instances needs to move data for two of the Messagebox databases.</span></span> <span data-ttu-id="a039f-144">添加第三个跟踪主机实例分配跟踪主机到另一台计算机运行 BizTalk Server 的工作。</span><span class="sxs-lookup"><span data-stu-id="a039f-144">Adding a third tracking host instance distributes the tracking host work to another computer running BizTalk Server.</span></span> <span data-ttu-id="a039f-145">在此方案中，添加第四个跟踪主机实例将不分发任何详细的跟踪主机，但会提供一个额外跟踪主机实例的容错能力。</span><span class="sxs-lookup"><span data-stu-id="a039f-145">In this scenario, adding a fourth tracking host instance would not distribute any more tracking host work, but would provide an extra tracking host instance for fault tolerance.</span></span>  
  
  <span data-ttu-id="a039f-146">有关 BAM 事件总线服务的详细信息，请参阅 BizTalk Server 帮助中的以下主题：</span><span class="sxs-lookup"><span data-stu-id="a039f-146">For more information about the BAM Event Bus service, see the following topics in the BizTalk Server help:</span></span>  
  
- <span data-ttu-id="a039f-147">"管理 BAM 事件总线服务"，在[ http://go.microsoft.com/fwlink/?LinkId=101590 ](http://go.microsoft.com/fwlink/?LinkId=101590)。</span><span class="sxs-lookup"><span data-stu-id="a039f-147">"Managing the BAM Event Bus Service" at [http://go.microsoft.com/fwlink/?LinkId=101590](http://go.microsoft.com/fwlink/?LinkId=101590).</span></span>  
  
- <span data-ttu-id="a039f-148">"创建的 BAM 事件总线服务实例"，在[ http://go.microsoft.com/fwlink/?LinkId=101591 ](http://go.microsoft.com/fwlink/?LinkId=101591)。</span><span class="sxs-lookup"><span data-stu-id="a039f-148">"Creating Instances of the BAM Event Bus Service" at [http://go.microsoft.com/fwlink/?LinkId=101591](http://go.microsoft.com/fwlink/?LinkId=101591).</span></span>  
  
## <a name="manage-aspnet-thread-usage-or-concurrently-executing-requests-for-web-applications-that-host-orchestrations-published-as-a-web-or-wcf-service"></a><span data-ttu-id="a039f-149">管理 ASP.NET 线程使用情况或并发执行的请求的 Web 应用程序主机的业务流程发布为 Web 或 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="a039f-149">Manage ASP.NET thread usage or concurrently executing requests for Web applications that host orchestrations published as a Web or WCF Service</span></span>  
 <span data-ttu-id="a039f-150">工作线程和 I/O 线程 （IIS 6.0 和 IIS 7.0 在经典模式下） 或同时执行托管业务流程的 ASP.NET Web 应用程序的请求 （IIS 7.0 集成模式） 的数的大量发布为 Web 服务应在已修改以下条件：</span><span class="sxs-lookup"><span data-stu-id="a039f-150">The number of worker and I/O threads (IIS 6.0 and IIS 7.0 in classic mode) or the number of concurrently executing requests (IIS 7.0 integrated mode) for an ASP.NET Web application that hosts an orchestration published as a Web service should be modified under the following conditions:</span></span>  
  
-   <span data-ttu-id="a039f-151">CPU 使用率不是托管的 Web 服务器上的瓶颈。</span><span class="sxs-lookup"><span data-stu-id="a039f-151">CPU utilization is not a bottleneck on the hosting Web server.</span></span>  
  
-   <span data-ttu-id="a039f-152">值**ASP.NET 应用 v2.0.50727\Request Wait Time**或**ASP.NET 应用 v2.0.50727\Request 执行时间**性能计数器是非常大。</span><span class="sxs-lookup"><span data-stu-id="a039f-152">The value of the **ASP.NET Apps v2.0.50727\Request Wait Time** or **ASP.NET Apps v2.0.50727\Request Execution Time** performance counters is unusually high.</span></span>  
  
-   <span data-ttu-id="a039f-153">类似于承载 Web 应用程序的计算机的应用程序日志中生成以下错误：</span><span class="sxs-lookup"><span data-stu-id="a039f-153">An error similar to the following generated in the Application log of the computer that hosts the Web application:</span></span>  
  
    ```  
    Event Type: Warning  
    Event Source: W3SVC Event Category: None  
    Event ID: 1013  
    Date: 6/4/2009  
    Time: 1:03:47 PM  
    User: N/A  
    Computer: <ComputerName>  
    Description: A process serving application pool 'DefaultAppPool' exceeded time limits during shut down. The process id was '<xxxx>'  
    ```  
  
### <a name="manage-aspnet-thread-usage-for-web-applications-that-host-orchestrations-on-iis-60-and-on-iis-70-running-in-classic-mode"></a><span data-ttu-id="a039f-154">管理 ASP.NET 线程使用情况的 Web 应用程序承载在 IIS 6.0 上和在经典模式下运行的 IIS 7.0 上的业务流程</span><span class="sxs-lookup"><span data-stu-id="a039f-154">Manage ASP.NET thread usage for Web applications that host orchestrations on IIS 6.0 and on IIS 7.0 running in Classic mode</span></span>  
 <span data-ttu-id="a039f-155">当**autoConfig** IIS 6.0 服务器或在经典模式下运行的 IIS 7.0 服务器的 machine.config 文件中的值设置为**true**、 ASP.NET 2.0 管理的工作线程数和 I/O 线程是分配给任何关联的 IIS 工作进程：</span><span class="sxs-lookup"><span data-stu-id="a039f-155">When the **autoConfig** value in the machine.config file of an IIS 6.0 server or IIS 7.0 server running in Classic mode is set to **true**, ASP.NET 2.0 manages the number of worker threads and I/O threads that are allocated to any associated IIS worker processes:</span></span>  
  
```  
<processModel autoConfig="true" />  
```  
  
 <span data-ttu-id="a039f-156">若要手动修改的工作线程和 ASP.NET 2.0 Web 应用程序的 I/O 线程数，打开关联的 machine.config 文件中，并输入新值**maxWorkerThreads**和**maxIoThreads**参数：</span><span class="sxs-lookup"><span data-stu-id="a039f-156">To manually modify the number of worker and I/O threads for an ASP.NET 2.0 Web application, open the associated machine.config file, and then enter new values for the **maxWorkerThreads** and **maxIoThreads** parameters:</span></span>  
  
```  
<!-- <processModel autoConfig="true" /> -->  
    <processModel maxWorkerThreads="200" maxIoThreads="200" />  
```  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-157">这些值是仅; 作为指导请确保测试对这些参数的更改。</span><span class="sxs-lookup"><span data-stu-id="a039f-157">These values are for guidance only; ensure you test changes to these parameters.</span></span>  
  
 <span data-ttu-id="a039f-158">有关优化的 ASP.NET 2.0 Web 应用程序的 machine.config 文件中的参数的详细信息，请参阅 Microsoft 知识库文章[821268"争用、 性能不佳和死锁时从 ASP.NET 发出 Web 服务请求应用程序"](http://go.microsoft.com/fwlink/?LinkID=66483) (http://go.microsoft.com/fwlink/?LinkID=66483)。</span><span class="sxs-lookup"><span data-stu-id="a039f-158">For more information about tuning parameters in the machine.config file for an ASP.NET 2.0 Web application, see Microsoft Knowledge Base article  [821268 “Contention, poor performance, and deadlocks when you make Web service requests from ASP.NET applications”](http://go.microsoft.com/fwlink/?LinkID=66483) (http://go.microsoft.com/fwlink/?LinkID=66483).</span></span>  
  
### <a name="manage-the-number-of-concurrently-executing-requests-for-web-applications-that-host-orchestrations-on-iis-70-running-in-integrated-mode"></a><span data-ttu-id="a039f-159">管理并发执行的 Web 应用程序托管在集成模式下运行的 IIS 7.0 上的业务流程的请求数</span><span class="sxs-lookup"><span data-stu-id="a039f-159">Manage the number of concurrently executing requests for Web applications that host orchestrations on IIS 7.0 running in Integrated mode</span></span>  
 <span data-ttu-id="a039f-160">ASP.NET 2.0 承载于 IIS 7.0 中集成模式下，当使用线程处理方式不同于 IIS 6.0 或 IIS 7.0 上在经典模式下。</span><span class="sxs-lookup"><span data-stu-id="a039f-160">When ASP.NET 2.0 is hosted on IIS 7.0 in integrated mode, the use of threads is handled differently than on IIS 6.0 or on IIS 7.0 in classic mode.</span></span> <span data-ttu-id="a039f-161">当 ASP.NET 2.0 承载于 IIS 7.0 中集成模式下时，ASP.NET 2.0 限制的并发执行数**请求**而不是数**线程**并发执行的请求。</span><span class="sxs-lookup"><span data-stu-id="a039f-161">When ASP.NET 2.0 is hosted on IIS 7.0 in integrated mode, ASP.NET 2.0 restricts the number of concurrently executing **requests** rather than the number of **threads** concurrently executing requests.</span></span> <span data-ttu-id="a039f-162">同步方案这将间接限制线程数，但异步方案的请求和线程数可能会大不相同。</span><span class="sxs-lookup"><span data-stu-id="a039f-162">For synchronous scenarios this will indirectly limit the number of threads but for asynchronous scenarios the number of requests and threads will likely be very different.</span></span> <span data-ttu-id="a039f-163">当在集成模式下，IIS 7.0 上运行 ASP.NET 2.0 **maxWorkerThreads**并**maxIoThreads** machine.config 文件中的参数不用于管理的正在运行的线程数。</span><span class="sxs-lookup"><span data-stu-id="a039f-163">When running ASP.NET 2.0 on IIS 7.0 in integrated mode, the **maxWorkerThreads** and **maxIoThreads** parameters in the machine.config file are not used to govern the number of running threads.</span></span> <span data-ttu-id="a039f-164">相反，并发执行的请求的更改号从默认值为每个 CPU 的 12 通过修改为指定的值**maxConcurrentThreadsPerCPU**。</span><span class="sxs-lookup"><span data-stu-id="a039f-164">Instead, the number of concurrently executing requests can be changed from the default value of 12 per CPU by modifying the value specified for **maxConcurrentThreadsPerCPU**.</span></span> <span data-ttu-id="a039f-165">**MaxConcurrentThreadsPerCPU** reqistry 中或在 aspnet.config 文件的配置部分中，可以指定值。</span><span class="sxs-lookup"><span data-stu-id="a039f-165">The **maxConcurrentThreadsPerCPU** value can be specified either in the reqistry or in the config section of an aspnet.config file.</span></span> <span data-ttu-id="a039f-166">请执行以下步骤，若要更改的默认值为**maxConcurrentThreadsPerCPU**来控制的同时执行的请求数：</span><span class="sxs-lookup"><span data-stu-id="a039f-166">Follow these steps to change the default value for **maxConcurrentThreadsPerCPU** to govern the number of concurrently executing requests:</span></span>  
  
 <span data-ttu-id="a039f-167">**若要在注册表中设置 maxConcurrentThreadsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="a039f-167">**To set the maxConcurrentThreadsPerCPU value in the registry**</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="a039f-168">对注册表编辑器的不当使用可能会引起问题，而必须重新安装操作系统。</span><span class="sxs-lookup"><span data-stu-id="a039f-168">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="a039f-169">请慎用注册表编辑器，风险自负。</span><span class="sxs-lookup"><span data-stu-id="a039f-169">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="a039f-170">有关如何备份、 还原和修改注册表的详细信息，请参阅 Microsoft 知识库文章"Microsoft Windows 注册表说明"处[ http://go.microsoft.com/fwlink/?LinkId=62729 ](http://go.microsoft.com/fwlink/?LinkId=62729)。</span><span class="sxs-lookup"><span data-stu-id="a039f-170">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-171">此设置是全局的并且不能更改为单个应用程序池或应用程序。</span><span class="sxs-lookup"><span data-stu-id="a039f-171">This setting is global and cannot be changed for individual application pools or applications.</span></span>  
  
1. <span data-ttu-id="a039f-172">依次单击 **启动”** 和 **运行”**，键入 **regedit.exe**，然后单击 **确定”** 以启动注册表编辑器。</span><span class="sxs-lookup"><span data-stu-id="a039f-172">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
  
2. <span data-ttu-id="a039f-173">导航到**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span><span class="sxs-lookup"><span data-stu-id="a039f-173">Navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span></span>  
  
3. <span data-ttu-id="a039f-174">通过执行以下步骤创建项：</span><span class="sxs-lookup"><span data-stu-id="a039f-174">Create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="a039f-175">上**编辑**菜单上，单击**新建**，然后单击**密钥**。</span><span class="sxs-lookup"><span data-stu-id="a039f-175">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="a039f-176">类型**maxConcurrentThreadsPerCPU**，然后按**ENTER**。</span><span class="sxs-lookup"><span data-stu-id="a039f-176">Type **maxConcurrentThreadsPerCPU**, and then press **ENTER**.</span></span>  
  
   3.  <span data-ttu-id="a039f-177">下**maxConcurrentThreadsPerCPU**密钥，请创建 DWORD 项具有 maxConcurrentThreadsPerCPU 的新值。</span><span class="sxs-lookup"><span data-stu-id="a039f-177">Under the **maxConcurrentThreadsPerCPU** key, create a DWORD entry with the new value for maxConcurrentThreadsPerCPU.</span></span>  
  
   4.  <span data-ttu-id="a039f-178">关闭“注册表编辑器”。</span><span class="sxs-lookup"><span data-stu-id="a039f-178">Close Registry Editor.</span></span>  
  
   <span data-ttu-id="a039f-179">**若要在 aspnet.config 文件的配置节中设置应用程序池的 maxConcurrentThreadsPerCPU 值**</span><span class="sxs-lookup"><span data-stu-id="a039f-179">**To set the maxConcurrentThreadsPerCPU value for an application pool in the config section of an aspnet.config file**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-180">必须安装 Microsoft.NET Framework 3.5 Service Pack 1，以容纳通过配置文件设置以下值。</span><span class="sxs-lookup"><span data-stu-id="a039f-180">Microsoft .NET Framework 3.5 Service Pack 1 must be installed to accommodate setting the values below via configuration file.</span></span> <span data-ttu-id="a039f-181">您可以下载 Microsoft.NET Framework 3.5 Service Pack 1 从[ http://go.microsoft.com/fwlink/?LinkID=136345 ](http://go.microsoft.com/fwlink/?LinkID=136345)。</span><span class="sxs-lookup"><span data-stu-id="a039f-181">You can download Microsoft .NET Framework 3.5 Service Pack 1 from [http://go.microsoft.com/fwlink/?LinkID=136345](http://go.microsoft.com/fwlink/?LinkID=136345).</span></span>  
  
-   <span data-ttu-id="a039f-182">打开应用程序池的 aspnet.config 文件并输入新值**maxconcurrentrequestspercpu 配置**并**requestQueueLimit**参数：</span><span class="sxs-lookup"><span data-stu-id="a039f-182">Open the aspnet.config file for the application pool, and then enter new values for the **maxConcurrentRequestsPerCPU** and **requestQueueLimit** parameters:</span></span>  
  
```  
<system.web>  
    <applicationPool maxConcurrentRequestsPerCPU="12" requestQueueLimit="5000"/>  
</system.web>  
```  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-183">此值将覆盖为指定的值**maxConcurrentThreadsPerCPU**注册表中。</span><span class="sxs-lookup"><span data-stu-id="a039f-183">This value overrides the value specified for **maxConcurrentThreadsPerCPU** in the registry.</span></span> <span data-ttu-id="a039f-184">RequestQueueLimit 设置等同于 processModel/requestQueueLimit，不同之处在于 aspnet.config 文件中的设置将覆盖在 machine.config 文件中的设置。</span><span class="sxs-lookup"><span data-stu-id="a039f-184">The requestQueueLimit setting is the same as processModel/requestQueueLimit, except that the setting in the aspnet.config file will override the setting in the machine.config file.</span></span>  
  
## <a name="define-clr-hosting-thread-values-for-biztalk-host-instances"></a><span data-ttu-id="a039f-185">定义的 CLR 承载 BizTalk 主机实例的线程值</span><span class="sxs-lookup"><span data-stu-id="a039f-185">Define CLR hosting thread values for BizTalk host instances</span></span>  
 <span data-ttu-id="a039f-186">因为 Windows 线程是最基本的可执行单元可用于 Windows 进程，务必分配足够的线程以防止线程不足的 BizTalk 主机实例相关联的.NET 线程池。</span><span class="sxs-lookup"><span data-stu-id="a039f-186">Because a Windows thread is the most basic executable unit available to a Windows process, it is important to allocate enough threads to the .NET thread pool associated with an instance of a BizTalk host to prevent thread starvation.</span></span> <span data-ttu-id="a039f-187">线程不足时，是不足够的线程用于执行请求的作业的性能有负面影响。</span><span class="sxs-lookup"><span data-stu-id="a039f-187">When thread starvation occurs, there are not enough threads available to perform the requested work that negatively impacts performance.</span></span> <span data-ttu-id="a039f-188">在同一时间，应格外小心以防止分配更多不必要的主机与相关联的.net 线程池线程。</span><span class="sxs-lookup"><span data-stu-id="a039f-188">At the same time, care should be taken to prevent allocating more threads to the.NET thread pool associated with a host than is necessary.</span></span> <span data-ttu-id="a039f-189">与主机相关联的.NET 线程池线程过多的分配可能会增加上下文切换。</span><span class="sxs-lookup"><span data-stu-id="a039f-189">The allocation of too many threads to the .NET thread pool associated with a host may increase context switching.</span></span> <span data-ttu-id="a039f-190">Windows 内核从运行一个线程为不同的线程，这会导致性能开销切换时，会发生上下文切换。</span><span class="sxs-lookup"><span data-stu-id="a039f-190">Context switching occurs when the Windows kernel switches from running one thread to a different thread, which incurs a performance cost.</span></span> <span data-ttu-id="a039f-191">过多的线程分配可能会导致过多的上下文切换，这将产生负面影响整体性能。</span><span class="sxs-lookup"><span data-stu-id="a039f-191">Excessive thread allocation can cause excessive context switching, which will negatively impact overall performance.</span></span>  
  
 <span data-ttu-id="a039f-192">修改中通过在 BizTalk Server 的注册表中创建相应的 CLR Hosting 值与 BizTalk 主机的实例相关联的.NET 线程池可用的 Windows 线程数。</span><span class="sxs-lookup"><span data-stu-id="a039f-192">Modify the number of Windows threads available in the .NET thread pool associated with an instance of a BizTalk host by creating the appropriate CLR Hosting values in the registry of the BizTalk Server.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="a039f-193">对注册表编辑器的不当使用可能会引起问题，而必须重新安装操作系统。</span><span class="sxs-lookup"><span data-stu-id="a039f-193">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="a039f-194">请慎用注册表编辑器，风险自负。</span><span class="sxs-lookup"><span data-stu-id="a039f-194">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="a039f-195">有关如何备份、 还原和修改注册表的详细信息，请参阅 Microsoft 知识库文章"Microsoft Windows 注册表说明"处[ http://go.microsoft.com/fwlink/?LinkId=62729 ](http://go.microsoft.com/fwlink/?LinkId=62729)。</span><span class="sxs-lookup"><span data-stu-id="a039f-195">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a039f-196">**工作线程**用于处理排队的工作项并**I/O 线程**是与 I/O 完成端口来处理已完成的异步 I/O 请求相关联的回调线程。</span><span class="sxs-lookup"><span data-stu-id="a039f-196">**Worker threads** are used to handle queued work items and **I/O threads** are dedicated callback threads associated with an I/O completion port to handle a completed asynchronous I/O request.</span></span>  
  
 <span data-ttu-id="a039f-197">**若要修改与每个 BizTalk 主机实例相关联的.NET 线程池可用线程数，请按照下列步骤：**</span><span class="sxs-lookup"><span data-stu-id="a039f-197">**To modify the number of threads available in the .NET thread pool associated with each instance of a BizTalk host, follow these steps:**</span></span>  
  
1. <span data-ttu-id="a039f-198">停止 BizTalk 主机实例。</span><span class="sxs-lookup"><span data-stu-id="a039f-198">Stop the BizTalk host instance.</span></span>  
  
2. <span data-ttu-id="a039f-199">依次单击 **启动”** 和 **运行”**，键入 **regedit.exe**，然后单击 **确定”** 以启动注册表编辑器。</span><span class="sxs-lookup"><span data-stu-id="a039f-199">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
   <span data-ttu-id="a039f-200">导航到**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc$**<em>主机名</em>] 其中*主机名*是与主机相关联的主机名称实例。</span><span class="sxs-lookup"><span data-stu-id="a039f-200">Navigate to **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc$**<em>hostname</em>] where *hostname* is the name of the host associated with the host instance.</span></span>  
  
   > [!NOTE]  
   >  <span data-ttu-id="a039f-201">如果有从 BizTalk Server 2004 升级到 BizTalk Server 2006 安装，此注册表项可能表示为 \**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc \* \* \* guid*] 其中*guid*是唯一的 BizTalk Server 主机的每个实例的 GUID。</span><span class="sxs-lookup"><span data-stu-id="a039f-201">If you have upgraded your BizTalk Server 2006 installation from BizTalk Server 2004, this registry key may be represented as \**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc\*\*\*guid*] where *guid* is a GUID unique to each instance of a BizTalk Server host.</span></span>  
  
3. <span data-ttu-id="a039f-202">找到**CLR Hosting**密钥。</span><span class="sxs-lookup"><span data-stu-id="a039f-202">Locate the **CLR Hosting** key.</span></span> <span data-ttu-id="a039f-203">如果该键不存在，然后通过执行以下步骤创建项：</span><span class="sxs-lookup"><span data-stu-id="a039f-203">If this key does not exist, then create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="a039f-204">上**编辑**菜单上，单击**新建**，然后单击**密钥**。</span><span class="sxs-lookup"><span data-stu-id="a039f-204">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="a039f-205">类型**CLR Hosting**，然后按**ENTER**。</span><span class="sxs-lookup"><span data-stu-id="a039f-205">Type **CLR Hosting**, and then press **ENTER**.</span></span>  
  
4. <span data-ttu-id="a039f-206">下**CLR Hosting**密钥，请创建具有所示值的以下 DWORD 项。</span><span class="sxs-lookup"><span data-stu-id="a039f-206">Under the **CLR Hosting** key, create the following DWORD entries with the indicated values.</span></span>  
  
   |<span data-ttu-id="a039f-207">DWORD 项</span><span class="sxs-lookup"><span data-stu-id="a039f-207">DWORD entry</span></span>|<span data-ttu-id="a039f-208">默认值</span><span class="sxs-lookup"><span data-stu-id="a039f-208">Default value</span></span>|<span data-ttu-id="a039f-209">推荐值</span><span class="sxs-lookup"><span data-stu-id="a039f-209">Recommended value</span></span>|  
   |-----------------|-------------------|-----------------------|  
   |<span data-ttu-id="a039f-210">MaxIOThreads</span><span class="sxs-lookup"><span data-stu-id="a039f-210">MaxIOThreads</span></span>|<span data-ttu-id="a039f-211">20</span><span class="sxs-lookup"><span data-stu-id="a039f-211">20</span></span>|<span data-ttu-id="a039f-212">100</span><span class="sxs-lookup"><span data-stu-id="a039f-212">100</span></span>|  
   |<span data-ttu-id="a039f-213">MaxWorkerThreads</span><span class="sxs-lookup"><span data-stu-id="a039f-213">MaxWorkerThreads</span></span>|<span data-ttu-id="a039f-214">25</span><span class="sxs-lookup"><span data-stu-id="a039f-214">25</span></span>|<span data-ttu-id="a039f-215">100**重要：** 该值增加到 100 可以对承载 BizTalk Server MessageBox 数据库的 SQL Server 计算机的性能产生负面影响。</span><span class="sxs-lookup"><span data-stu-id="a039f-215">100 **Important:**  Increasing this value beyond 100 can have an adverse effect on the performance of the SQL Server computer hosting the BizTalk Server MessageBox database.</span></span> <span data-ttu-id="a039f-216">发生此问题时，SQL Server 可能会遇到死锁情况。</span><span class="sxs-lookup"><span data-stu-id="a039f-216">When this problem occurs, SQL Server may encounter a deadlock condition.</span></span> <span data-ttu-id="a039f-217">建议此参数不超过 100 的值。</span><span class="sxs-lookup"><span data-stu-id="a039f-217">It is recommended this parameter is not increased beyond a value of 100.</span></span>|  
   |<span data-ttu-id="a039f-218">MinIOThreads</span><span class="sxs-lookup"><span data-stu-id="a039f-218">MinIOThreads</span></span>|<span data-ttu-id="a039f-219">1</span><span class="sxs-lookup"><span data-stu-id="a039f-219">1</span></span>|<span data-ttu-id="a039f-220">25</span><span class="sxs-lookup"><span data-stu-id="a039f-220">25</span></span>|  
   |<span data-ttu-id="a039f-221">MinWorkerThreads</span><span class="sxs-lookup"><span data-stu-id="a039f-221">MinWorkerThreads</span></span>|<span data-ttu-id="a039f-222">1</span><span class="sxs-lookup"><span data-stu-id="a039f-222">1</span></span>|<span data-ttu-id="a039f-223">25</span><span class="sxs-lookup"><span data-stu-id="a039f-223">25</span></span>|  
  
   > [!NOTE]  
   >  <span data-ttu-id="a039f-224">这些建议值足够在大多数情况下，但可能需要根据每个主机实例中运行适配器处理程序或业务流程的数量增加。</span><span class="sxs-lookup"><span data-stu-id="a039f-224">These recommended values will be sufficient for most scenarios but may need to be increased depending on how many adapter handlers or orchestrations are running in each host instance.</span></span>  
  
   > [!NOTE]  
   >  <span data-ttu-id="a039f-225">这些值隐式乘以服务器上的处理器数。</span><span class="sxs-lookup"><span data-stu-id="a039f-225">These values are implicitly multiplied by the number of processors on the server.</span></span> <span data-ttu-id="a039f-226">例如，MaxWorkerThreads 项设置为 100 的值将有效地设置值 400 4 个 CPU 的服务器上。</span><span class="sxs-lookup"><span data-stu-id="a039f-226">For example, setting the MaxWorkerThreads entry to a value of 100 would effectively set a value of 400 on a 4 CPU server.</span></span>  
  
5. <span data-ttu-id="a039f-227">关闭“注册表编辑器”。</span><span class="sxs-lookup"><span data-stu-id="a039f-227">Close Registry Editor.</span></span>  
  
6. <span data-ttu-id="a039f-228">重新启动 BizTalk 主机实例。</span><span class="sxs-lookup"><span data-stu-id="a039f-228">Restart the BizTalk host instance.</span></span>  
  
## <a name="disable-tracking-for-orchestrations-send-ports-receive-ports-and-pipelines-when-tracking-is-not-required"></a><span data-ttu-id="a039f-229">禁用跟踪的业务流程、 发送端口、 接收端口和管道，不需要跟踪时</span><span class="sxs-lookup"><span data-stu-id="a039f-229">Disable tracking for orchestrations, send ports, receive ports, and pipelines when tracking is not required</span></span>  
 <span data-ttu-id="a039f-230">跟踪可能会产生系统开销在 BizTalk Server 的性能，因为数据已写入到 MessageBox 数据库并以异步方式移至 BizTalk 跟踪数据库。</span><span class="sxs-lookup"><span data-stu-id="a039f-230">Tracking incurs performance overhead within BizTalk Server as data has to be written to the MessageBox database and then asynchronously moved to the BizTalk Tracking database.</span></span> <span data-ttu-id="a039f-231">如果跟踪不是一项业务要求，请禁用跟踪，以减少开销并提高性能。</span><span class="sxs-lookup"><span data-stu-id="a039f-231">If tracking is not a business requirement, then disable tracking to reduce overhead and increase performance.</span></span> <span data-ttu-id="a039f-232">有关配置跟踪的详细信息，请参阅"配置跟踪使用 BizTalk Server 管理控制台"中 BizTalk Server 帮助[ http://go.microsoft.com/fwlink/?LinkID=106742 ](http://go.microsoft.com/fwlink/?LinkID=106742)。</span><span class="sxs-lookup"><span data-stu-id="a039f-232">For more information about configuring tracking, see “Configuring Tracking Using the BizTalk Server Administration Console” in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkID=106742](http://go.microsoft.com/fwlink/?LinkID=106742).</span></span>  
  
## <a name="decrease-the-purging-period-for-the-dta-purge-and-archive-job-from-7-days-to-2-days-in-high-throughput-scenarios"></a><span data-ttu-id="a039f-233">清除周期越短 DTA 清除和存档作业从 7 天在高吞吐量方案中的 2 天</span><span class="sxs-lookup"><span data-stu-id="a039f-233">Decrease the purging period for the DTA Purge and Archive job from 7 days to 2 days in high throughput scenarios</span></span>  
 <span data-ttu-id="a039f-234">默认情况下，用于跟踪 BizTalk Server 中的数据的清除间隔设置为 7 天。</span><span class="sxs-lookup"><span data-stu-id="a039f-234">By default, the purging interval for tracking data in BizTalk Server is set to 7 days.</span></span> <span data-ttu-id="a039f-235">在高吞吐量方案中，这可以导致在跟踪数据库中，最终影响 MessageBox 和又产生负面影响的消息处理吞吐量的性能数据过多逐渐累积。</span><span class="sxs-lookup"><span data-stu-id="a039f-235">In a high throughput scenario, this can result in an excessive build up of data in the Tracking database, which will eventually impact the performance of the MessageBox and in turn negatively impact message processing throughput.</span></span>  
  
 <span data-ttu-id="a039f-236">在高吞吐量方案中，降低硬件和软件为 2 天，可从默认值为 7 天内清除时间间隔。</span><span class="sxs-lookup"><span data-stu-id="a039f-236">In high throughput scenarios, reduce the hard and soft purging interval from the default of 7 days to 2 days.</span></span> <span data-ttu-id="a039f-237">有关配置清除间隔的详细信息，请参阅"如何为配置 DTA 清除和存档作业"在 BizTalk Server 帮助[ http://go.microsoft.com/fwlink/?LinkID=104908 ](http://go.microsoft.com/fwlink/?LinkID=104908)。</span><span class="sxs-lookup"><span data-stu-id="a039f-237">For more information about configuring the purging interval, see “How to Configure the DTA Purge and Archive Job” in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkID=104908](http://go.microsoft.com/fwlink/?LinkID=104908).</span></span>  
  
## <a name="install-the-latest-service-packs"></a><span data-ttu-id="a039f-238">安装最新 service pack</span><span class="sxs-lookup"><span data-stu-id="a039f-238">Install the latest service packs</span></span>  
 <span data-ttu-id="a039f-239">应安装 BizTalk Server 和.NET Framework 的最新 service pack，因为它们包含可以更正可能会遇到性能问题的修补程序。</span><span class="sxs-lookup"><span data-stu-id="a039f-239">The latest service packs for both BizTalk Server and the .NET Framework should be installed, as these contain fixes that can correct performance issues you may encounter.</span></span>  
  
## <a name="do-not-cluster-biztalk-hosts-unless-absolutely-necessary"></a><span data-ttu-id="a039f-240">未群集 BizTalk 主机除非绝对必要</span><span class="sxs-lookup"><span data-stu-id="a039f-240">Do not cluster BizTalk hosts unless absolutely necessary</span></span>  
 <span data-ttu-id="a039f-241">虽然[!INCLUDE[btsBizTalkServer2006](../includes/btsbiztalkserver2006-md.md)]和后续版本的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，可以将 BizTalk 主机配置为群集资源，您应只考虑执行此操作，如果您需要向不能跨多个 BizTalk 托管的资源提供高可用性计算机。</span><span class="sxs-lookup"><span data-stu-id="a039f-241">While [!INCLUDE[btsBizTalkServer2006](../includes/btsbiztalkserver2006-md.md)] and subsequent versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] allow you to configure a BizTalk host as a cluster resource, you should only consider doing this if you need to provide high availability to a resource that cannot be hosted across multiple BizTalk computers.</span></span> <span data-ttu-id="a039f-242">如示例中，使用 FTP 适配器的端口应只位于一个主机实例，如 FTP 协议不提供文件锁定，但是，它引入了单点故障，它会从聚类分析中受益。</span><span class="sxs-lookup"><span data-stu-id="a039f-242">As an example, ports using the FTP adapter should only reside on one host instance, as the FTP protocol does not provide file locking, however, this introduces a single point of failure which would benefit from clustering.</span></span> <span data-ttu-id="a039f-243">包含适配器，如文件、 SQL、 HTTP 或处理仅限主机，主机可以在内部负载平衡跨计算机的并且不会得益于聚类分析。</span><span class="sxs-lookup"><span data-stu-id="a039f-243">Hosts that contain adapters, such as file, SQL, HTTP or processing only hosts, can be internally load balanced across machines and do not benefit from clustering.</span></span>  
  
## <a name="performance-optimizations-in-the-biztalk-server-documentation"></a><span data-ttu-id="a039f-244">BizTalk Server 文档中的性能优化</span><span class="sxs-lookup"><span data-stu-id="a039f-244">Performance optimizations in the BizTalk Server documentation</span></span>  
 <span data-ttu-id="a039f-245">将应用从 BizTalk Server 文档中的以下建议：</span><span class="sxs-lookup"><span data-stu-id="a039f-245">Apply the following recommendations from the BizTalk Server documentation as appropriate:</span></span>  
  
-   <span data-ttu-id="a039f-246">"解决 MessageBox 延迟问题"网址 [http://go.microsoft.com/fwlink/?LinkId=114747](http://go.microsoft.com/fwlink/?LinkId=114747)</span><span class="sxs-lookup"><span data-stu-id="a039f-246">“Troubleshooting MessageBox Latency Issues” at [http://go.microsoft.com/fwlink/?LinkId=114747](http://go.microsoft.com/fwlink/?LinkId=114747)</span></span>  
  
-   <span data-ttu-id="a039f-247">在的"确定性能瓶颈" [http://go.microsoft.com/fwlink/?LinkID=104418](http://go.microsoft.com/fwlink/?LinkID=104418)</span><span class="sxs-lookup"><span data-stu-id="a039f-247">“Identifying Performance Bottlenecks” at [http://go.microsoft.com/fwlink/?LinkID=104418](http://go.microsoft.com/fwlink/?LinkID=104418)</span></span>  
  
-   <span data-ttu-id="a039f-248">在的"避免出现 DBNETLIB 异常" [http://go.microsoft.com/fwlink/?LinkID=108787](http://go.microsoft.com/fwlink/?LinkID=108787)</span><span class="sxs-lookup"><span data-stu-id="a039f-248">“Avoiding DBNETLIB Exceptions” at [http://go.microsoft.com/fwlink/?LinkID=108787](http://go.microsoft.com/fwlink/?LinkID=108787)</span></span>  
  
-   <span data-ttu-id="a039f-249">在的"避免 TCP/IP 端口耗尽的情况" [http://go.microsoft.com/fwlink/?LinkID=101610](http://go.microsoft.com/fwlink/?LinkID=101610)</span><span class="sxs-lookup"><span data-stu-id="a039f-249">“Avoiding TCP/IP Port Exhaustion” at [http://go.microsoft.com/fwlink/?LinkID=101610](http://go.microsoft.com/fwlink/?LinkID=101610)</span></span>  
  
-   <span data-ttu-id="a039f-250">在的"设置 EPM 线程池大小" [http://go.microsoft.com/fwlink/?LinkId=114748](http://go.microsoft.com/fwlink/?LinkId=114748)</span><span class="sxs-lookup"><span data-stu-id="a039f-250">“Setting the EPM Threadpool Size” at [http://go.microsoft.com/fwlink/?LinkId=114748](http://go.microsoft.com/fwlink/?LinkId=114748)</span></span>