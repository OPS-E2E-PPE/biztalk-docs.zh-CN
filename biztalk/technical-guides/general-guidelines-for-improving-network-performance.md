---
title: 一般性的指导原则，用于提高网络性能 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 286c10d2-9262-4e3c-adde-f7b5780c2736
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b8cc4c27ef977a4bd8789adc569f9d8d78aa11ce
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36996998"
---
# <a name="general-guidelines-for-improving-network-performance"></a>优化网络性能的通用指南
具有已调整为最佳值的网络设置显示可以有效地解决网络瓶颈并提高网络中 BizTalk Server 解决方案的总体性能。 这应在解决方案中，包括 BizTalk Server 计算机、 SQL Server 计算机和任何其他服务器计算机所涉及的所有计算机上。  
  
> [!NOTE]  
>  网络 IO 是 BizTalk Server 环境中的瓶颈的最常见指示器是计数器"SQL Server： 等待 Statistics\Network IO 等待"。 时的值**平均等待时间**在此计数器是大于零上的一个或多个 SQL Server 计算机，则网络 IO 是瓶颈。  
  
 以下建议可用于提高网络性能：  
  
## <a name="add-additional-network-cards-to-computers-in-the-biztalk-server-environment"></a>将附加网络接口卡添加到 BizTalk Server 环境中的计算机  
 只需添加额外的硬盘可以提高磁盘性能、 添加附加网络接口卡可以提高网络性能。 如果在 BizTalk Server 环境中的计算机上的网络卡趋于饱和，卡是一个瓶颈，请考虑添加一个或多个附加网络接口卡来提高性能。  
  
## <a name="implement-network-segmentation"></a>实现网络分段  
 请按照中的建议**子网**一部分["BizTalk Server 数据库优化"白皮书](http://go.microsoft.com/fwlink/?LinkID=101578)(http://go.microsoft.com/fwlink/?LinkID=101578)。  
  
## <a name="where-possible-replace-hubs-with-switches"></a>在可能的情况下，替换开关为中心  
 交换机包含用于直接路由的源和目标之间的通信，而中心使用广播的模型将流量路由逻辑。 因此开关的效率更高，并提供改进的性能。  
  
## <a name="remove-unnecessary-network-protocols"></a>删除不必要的网络协议  
 Windows Server 计算机有时了多个网络服务和安装不是实际需要的协议。 每个额外的网络客户端、 服务或协议将放置其他开销系统资源。  
此外，每个已安装的协议生成网络流量。 通过删除不必要的网络客户端、 服务和协议，系统资源都可供其他进程、 避免过多的网络流量和必须协商的网络绑定数减少到最少。  
若要查看当前安装的网络客户端，协议和服务，请按照下列步骤：  
  
1. 单击**启动**，然后单击**控制面板**。  
  
2. 在控制面板中，执行以下项之一  
  
   1.  在**调整您的计算机的设置**，请设置**通过查看**到**类别**，单击**网络和 Internet**，然后单击**网络和共享中心**。  
  
   2.  中**调整您的计算机的设置**，将**通过查看**至任一**大图标**或**小图标**，然后单击**网络和共享中心**。  
  
3. 在任务窗格中单击**更改适配器设置**。  
  
4. 右键单击**本地连接**（或你的网络连接的条目），然后单击**属性**以显示网络连接属性对话框。  
  
5. 若要删除不必要的项目，请选择它，然后单击**卸载**。 若要禁用某项，只需清除与项关联的复选框。  
  
   如果您不确定有关卸载连接的项的效果，请禁用项，而不是无需卸载它。 禁用项，可确定哪些服务、 协议和客户端实际需要的系统上。 时确定，禁用某项的服务器上有没有负面影响，然后可以卸载该项目。  
   在许多情况下，只有以下三个组件是标准的基于 TCP/IP 网络上的操作所必需的：  
  
-   Microsoft 网络客户端  
  
-   文件和打印机共享 Microsoft 网络的  
  
-   Internet 协议 (TCP/IP)  
  
## <a name="network-adapter-drivers-on-all-computers-in-the-biztalk-server-environment-should-be-tuned-for-performance"></a>在 BizTalk Server 环境中的所有计算机上的网络适配器驱动程序应该优化性能  
  
> [!IMPORTANT]  
>  应用到网络适配器驱动程序始终优化之前在环境中安装网络卡的最新网络适配器设备驱动的程序。  
  
 调整网络适配器设备驱动程序，以最大限度地传入和传出数据包缓冲，可用的内存量。 此外最大化缓冲区计数，尤其是传输缓冲区并合并缓冲区。 默认值为这些参数，并是否甚至提供，制造商和驱动程序版本之间的不同。 目标是以最大程度提高通过网络适配器硬件，完成的工作并允许以减少网络流量喷发，并关联的拥塞的网络操作的最大可能的缓冲区空间。  
  
> [!NOTE]  
>  要优化网络适配器驱动程序的步骤因制造商而异。  
  
 请执行以下步骤，若要访问的网络适配器的设置：  
  
1. 单击**启动**，然后单击**控制面板**。  
  
2. 在控制面板中，执行以下操作：  
  
   1.  在**调整您的计算机的设置**，请设置**通过查看**到**类别**，单击**网络和 Internet**，然后单击**网络和共享中心**。  
  
   2.  中**调整您的计算机的设置**，将**通过查看**至任一**大图标**或**小图标**，然后单击**网络和共享中心**。  
  
3. 在任务窗格中单击**更改适配器设置**。  
  
4. 右键单击**本地连接**（或你的网络连接的名称），然后单击**属性**。  
  
5. 上**联网**选项卡上，单击**配置**。  
  
6. 单击**高级**选项卡可以为该网络适配器配置的访问属性。  
  
   应为 BizTalk Server 环境中每个网络适配器配置以下属性：  
  
> [!NOTE]  
>  您应用这些设置包括单个网络适配器成组网络适配器配置的聚合、 负载平衡或容错能力的集内每个物理网络适配器。 某些组合软件，可能需要将这些设置也应用于团队。 请注意，某些网络适配器自我调整，可能无法提供该选项来手动配置参数。  
  
- **电源选项**– 配置网络适配器驱动程序，以防止电源管理功能关闭网络适配器以节约电源。 此功能对于客户端计算机可能很有用，但应很少，如果曾经，在 BizTalk Server 或 SQL Server 计算机上使用。  
  
- **固定速度/双工 （不要使用 AUTO）** -它是非常重要的网络速度、 双工、 和流控制参数设置为对应于交换机上的设置它们所连接到。 这将缓解定期"自动同步"这可能暂时需要连接离线的匹配项。  
  
- **最大 Coalesce 缓冲区**-映射寄存器是用于将物理地址转换为适用于支持总线掌握的网络适配器的虚拟地址的系统资源。 Coalesce 缓冲区可供网络驱动程序如果驱动程序用尽了映射寄存器。 设置此尽可能最大性能的大值。 在服务器上物理内存有限，这可能会产生负面影响，因为合并缓冲区使用的系统内存。 在大多数系统上但是，最大值设置可以应用而不会显著降低可用内存。  
  
- **最大传输/发送描述符和发送缓冲区**-此设置指定多少传输控制缓冲区以供网络接口分配驱动程序。 这直接反映驱动程序可以在其"发送"队列中的未完成数据包数。 设置此尽可能最大性能的大值。 在服务器上物理内存有限，这可能会产生负面影响，作为发送缓冲区使用的系统内存。 在大多数系统上但是，最大值设置可以应用而不会显著降低可用内存。  
  
- **最大接收缓冲区**-此设置指定的网络接口驱动程序将数据复制到的协议内存时所使用的内存缓冲区量。 它通常默认情况下，为相对较低的值设置。 设置此尽可能最大性能的大值。 在服务器上物理内存有限，这可能会产生负面影响，如接收缓冲区使用的系统内存。 在大多数系统上但是，最大值设置可以应用而不会显著降低可用内存。  
  
- **所有上卸载选项**-在几乎所有情况下启用网络接口卸载功能时的性能得到改进。 某些网络适配器提供单独的参数来启用或禁用卸载用于发送和接收流量。 卸载任务从 CPU 卸载到网络适配器可以帮助降低 CPU 使用率将提高系统整体性能的服务器上。 Microsoft TCP/IP 传输可以卸载一个或多个到具有相应功能的网络适配器的以下任务：  
  
  -   **校验和任务**;-TCP/IP 传输可以卸载计算并验证 IP 和 TCP 校验和的发送和接收到的网络适配器启用此选项，如果网络适配器驱动程序提供了此功能。  
  
  -   **IP 安全任务**-计算和的身份验证标头 (AH) 和封装安全有效负载 (ESP) 到网络适配器的加密校验和验证，可以将卸载 TCP/IP 传输。 加密和解密到网络适配器的 ESP 有效负载，还可以将卸载 TCP/IP 传输。 如果网络适配器驱动程序提供了此功能，请启用这些选项。  
  
  -   **大型 TCP 数据包分段**-TCP/IP 传输支持大量发送卸载 (LSO)。 此外，使用 TCP/IP 传输可以将卸载大型 TCP 数据包的分段。  
  
  -   **堆栈卸载**– 整个网络堆栈卸载到具有相应功能的网络适配器。 如果网络适配器驱动程序提供了此功能，请启用此选项。  
  
- **LAN 唤醒 （除非使用时） 禁用**– 配置网络适配器驱动程序，以禁用唤醒 on lan 功能。 此功能对于客户端计算机可能很有用，但应很少如果曾经使用 BizTalk Server 或 SQL Server 计算机上。  
  
  有关优化性能的网络适配器的详细信息，请参阅**网络设备设置**一部分["BizTalk Server 数据库优化"白皮书](http://go.microsoft.com/fwlink/?LinkID=101578)(http://go.microsoft.com/fwlink/?LinkID=101578)。  
  
## <a name="see-also"></a>请参阅  
 [优化网络性能的可修改设置](../technical-guides/settings-that-can-be-modified-to-improve-network-performance.md)