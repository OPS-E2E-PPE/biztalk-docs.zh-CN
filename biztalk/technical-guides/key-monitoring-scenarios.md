---
title: "主要监视方案 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: fee90fd2-fb85-409f-827e-6ee3c8e13b4c
caps.latest.revision: "8"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 99f8f1427f5f5535b6c446dae3057b4d80754a7f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="key-monitoring-scenarios"></a><span data-ttu-id="10592-102">主要监视方案</span><span class="sxs-lookup"><span data-stu-id="10592-102">Key Monitoring Scenarios</span></span>
<span data-ttu-id="10592-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]用于 Operations Manager 2007 R2/2012年管理包包括多种主要监视方案中后面的表中所述。</span><span class="sxs-lookup"><span data-stu-id="10592-103">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management Pack for Operations Manager 2007 R2/2012 includes a number of key monitoring scenarios described in the table that follows.</span></span>  
  
### <a name="biztalk-server-monitoring-scenarios"></a><span data-ttu-id="10592-104">BizTalk Server 监视方案</span><span class="sxs-lookup"><span data-stu-id="10592-104">BizTalk Server Monitoring Scenarios</span></span>  
  
|<span data-ttu-id="10592-105">应用场景</span><span class="sxs-lookup"><span data-stu-id="10592-105">Scenario</span></span>|<span data-ttu-id="10592-106">Description</span><span class="sxs-lookup"><span data-stu-id="10592-106">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="10592-107">挂起的消息警报</span><span class="sxs-lookup"><span data-stu-id="10592-107">Suspended Message Alerts</span></span>|<span data-ttu-id="10592-108">监视和解决与挂起的消息相关的问题是常见的操作任务，BizTalk 服务器环境中。</span><span class="sxs-lookup"><span data-stu-id="10592-108">Monitoring and resolving issues related to suspended messages are common operational tasks in a BizTalk Server environment.</span></span> <span data-ttu-id="10592-109">BizTalk Server 管理包可以监视和优化的方式排查挂起的消息事件。</span><span class="sxs-lookup"><span data-stu-id="10592-109">The BizTalk Server Management Pack enables you to monitor and troubleshoot suspended message events in a streamlined way.</span></span> <span data-ttu-id="10592-110">处理消息时，BizTalk Server 中出现两种类型的消息挂起： 入站消息挂起和出站消息挂起。</span><span class="sxs-lookup"><span data-stu-id="10592-110">Two kinds of message suspension occur in BizTalk Server when you process messages: Inbound Message Suspension and Outbound Message Suspension.</span></span><br /><br /> <span data-ttu-id="10592-111">对于入站消息，各种类型的处理失败或缺乏订阅可能会导致要挂起的消息。</span><span class="sxs-lookup"><span data-stu-id="10592-111">For inbound messages, various kinds of processing failures or lack of subscription may cause a message to be suspended.</span></span> <span data-ttu-id="10592-112">某些传输方式可以配置为将消息挂起，也可以配置为不挂起消息。</span><span class="sxs-lookup"><span data-stu-id="10592-112">Some transports can be configured to suspend the message or not suspend the message.</span></span> <span data-ttu-id="10592-113">对于出站消息，所有处理失败都将始终导致消息挂起。</span><span class="sxs-lookup"><span data-stu-id="10592-113">For outbound messages, all processing failures will always lead to message suspension.</span></span><br /><br /> <span data-ttu-id="10592-114">对于入站消息，挂起的警报规则是每适配器编写的。</span><span class="sxs-lookup"><span data-stu-id="10592-114">For inbound messages, alert rules for suspension are written per adapter.</span></span> <span data-ttu-id="10592-115">此方法提供了更灵活地处理入站端的消息挂起。</span><span class="sxs-lookup"><span data-stu-id="10592-115">This approach provides more flexibility in handling message suspensions on the inbound side.</span></span> <span data-ttu-id="10592-116">你可以添加基于的适配器，如通知的不同响应操作。</span><span class="sxs-lookup"><span data-stu-id="10592-116">You can add different response actions based on the adapter, such as notification.</span></span> <span data-ttu-id="10592-117">此外，您可以通过创建自定义规则定制 BizTalk Server 管理包。</span><span class="sxs-lookup"><span data-stu-id="10592-117">You can additionally customize the BizTalk Server Management Pack by creating custom rules.</span></span> <span data-ttu-id="10592-118">对于出站消息，所有消息始终将被都挂起的任何类型的传输时间失败。</span><span class="sxs-lookup"><span data-stu-id="10592-118">For outbound messages, all messages are always suspended on transmission time failure of any kind.</span></span>|  
|<span data-ttu-id="10592-119">警报取消策略</span><span class="sxs-lookup"><span data-stu-id="10592-119">Alert Suppression Policy</span></span>|<span data-ttu-id="10592-120">挂起的消息的规则采用不同的抑制策略不是通常应用于其他规则。</span><span class="sxs-lookup"><span data-stu-id="10592-120">Rules for suspended messages employ a different suppression policy than are generally applied for other rules.</span></span> <span data-ttu-id="10592-121">警报可基于警报名称、警报源、计算机和域来取消。</span><span class="sxs-lookup"><span data-stu-id="10592-121">Alerts are suppressed based the Alert Name, Alert Source, and Computer and Domain.</span></span><br /><br /> <span data-ttu-id="10592-122">对于基于警报源的禁止显示，每个挂起的消息规则的警报源还包含从挂起的消息事件中提取的参数。</span><span class="sxs-lookup"><span data-stu-id="10592-122">For suppression based on Alert Source, the alert source for each suspended message rule also contains a parameter extracted from the suspended message event.</span></span> <span data-ttu-id="10592-123">此参数是消息接收或传输所使用的 URI。</span><span class="sxs-lookup"><span data-stu-id="10592-123">This parameter is the URI on which the message was received or transmitted.</span></span><br /><br /> <span data-ttu-id="10592-124">在相同的 URI 发生的错误通常是由于相同的原因。</span><span class="sxs-lookup"><span data-stu-id="10592-124">Errors that occur on the same URI are usually because of the same reason.</span></span> <span data-ttu-id="10592-125">因此，我们建议你创建相同的根本原因的一个警报，即使存在多个关联的故障事件。</span><span class="sxs-lookup"><span data-stu-id="10592-125">Therefore, we recommend that you create a single alert for the same root cause even though multiple associated failure events exist.</span></span> <span data-ttu-id="10592-126">这使你能够一个警报和一个根本原因，这样可以更轻松地在出现时，更正问题。</span><span class="sxs-lookup"><span data-stu-id="10592-126">This enables you to have one alert and one root cause that makes it easier for you to correct problems when they occur.</span></span> <span data-ttu-id="10592-127">简化的警报，基于 Uri，减少不必要的警报和促进有效地跟踪打开的问题。</span><span class="sxs-lookup"><span data-stu-id="10592-127">Streamlined alerts, based on URIs, reduce unnecessary alerts and facilitate efficient tracking of open issues.</span></span> <span data-ttu-id="10592-128">在某个 URI 处，如果以前没有挂起警报，则将为消息挂起创建一个新警报。</span><span class="sxs-lookup"><span data-stu-id="10592-128">A new alert is created for a message suspension at a URI with no previous suspension alerts.</span></span>|  
|<span data-ttu-id="10592-129">BAM 获得技术协助警报</span><span class="sxs-lookup"><span data-stu-id="10592-129">BAM Technical Assistance Alerts</span></span>|<span data-ttu-id="10592-130">业务活动监视 (BAM) 门户用户，称为业务用户通常了解业务级别指标和业务活动。</span><span class="sxs-lookup"><span data-stu-id="10592-130">Business Activity Monitoring (BAM) Portal users, known as business users, usually understand the business level indicators and business activities.</span></span> <span data-ttu-id="10592-131">它们使用 BAM 门户监视器聚合指示器、 完整的过程中业务事务或搜索具有特定属性的事务进行进一步调查。</span><span class="sxs-lookup"><span data-stu-id="10592-131">They use BAM Portal to monitor aggregate indicators, complete in-process business transactions, or search for transactions with particular properties to investigate further.</span></span> <span data-ttu-id="10592-132">但是，业务用户通常不了解 IT 基础结构级别是问题的方面。</span><span class="sxs-lookup"><span data-stu-id="10592-132">However, business users often do not understand the aspects of an issue at an IT infrastructure level.</span></span> <span data-ttu-id="10592-133">给定的事务的调查，过程 BAM 门户使业务用户能够从 IT 操作人员来调查在 IT 基础结构级别的事务请求获得技术协助。</span><span class="sxs-lookup"><span data-stu-id="10592-133">During investigation of a given transaction, the BAM Portal enables business users to request technical assistance from the IT Operations staff to investigate transactions at the IT infrastructure level.</span></span><br /><br /> <span data-ttu-id="10592-134">使用 BAM 门户，业务用户则可以通过技术协助请求来获得帮助。</span><span class="sxs-lookup"><span data-stu-id="10592-134">The BAM Portal enables this hand-off from the business user through a Technical Assistance request.</span></span> <span data-ttu-id="10592-135">请求获得技术协助 BAM 门户的托管位置的计算机的事件查看器中的应用程序日志中创建的项。</span><span class="sxs-lookup"><span data-stu-id="10592-135">Requesting technical assistance creates an entry in the Application log in Event Viewer of the computer where the BAM Portal is hosted.</span></span> <span data-ttu-id="10592-136">此事件包含有关在其获得技术协助请求的用户和其他重要信息，例如消息实例标识符、 服务实例标识符和 BizTalk Server 组信息的活动的详细信息。</span><span class="sxs-lookup"><span data-stu-id="10592-136">This event contains details about the activity on which technical assistance is requested by the user and other important information, such as the Message Instance Identifier, Service Instance Identifier, and BizTalk Server group information.</span></span><br /><br /> <span data-ttu-id="10592-137">BizTalk Server 管理包包含触发上检测到 BAM 获得技术协助事件警报的规则。</span><span class="sxs-lookup"><span data-stu-id="10592-137">The BizTalk Server Management Pack contains a rule to trigger an alert on detection of a BAM Technical Assistance event.</span></span> <span data-ttu-id="10592-138">创建此警报的规则为“错误：请求 BAM 技术协助”。</span><span class="sxs-lookup"><span data-stu-id="10592-138">The rule that creates this alert is “Error: BAM Technical Assistance Required.”</span></span> <span data-ttu-id="10592-139">为每个请求提交从 BAM 门户创建新警报。</span><span class="sxs-lookup"><span data-stu-id="10592-139">A new alert is created for each request submitted from the BAM Portal.</span></span>|  
|<span data-ttu-id="10592-140">BizTalk 消息框和主机</span><span class="sxs-lookup"><span data-stu-id="10592-140">BizTalk Message Boxes and Hosts</span></span>|<span data-ttu-id="10592-141">BizTalk Server 管理包包含数据库和队列提供 BizTalk MessageBox 的运行状况的综合视图的性能阈值规则。</span><span class="sxs-lookup"><span data-stu-id="10592-141">BizTalk Server Management Pack incorporates performance threshold rules that provide a comprehensive view of the health of the BizTalk MessageBox databases and queues.</span></span> <span data-ttu-id="10592-142">提供两种类型的阈值规则：</span><span class="sxs-lookup"><span data-stu-id="10592-142">Two kinds of threshold rules are provided:</span></span><br /><br /> <span data-ttu-id="10592-143">-将应用一般情况下，即，于所有 BizTalk 主机，所有 BizTalk MessageBox 数据库的规则。</span><span class="sxs-lookup"><span data-stu-id="10592-143">-   Rules that apply generically, that is, to all BizTalk Hosts, all BizTalk MessageBox databases.</span></span><br /><span data-ttu-id="10592-144">-特定于特定的 BizTalk 主机或消息框的规则。</span><span class="sxs-lookup"><span data-stu-id="10592-144">-   Rules that are specific to a particular BizTalk Host or a MessageBox.</span></span><br /><br /> <span data-ttu-id="10592-145">泛型规则监视所有的 BizTalk Server 主机或 MessageBox 数据库基于常见的阈值。</span><span class="sxs-lookup"><span data-stu-id="10592-145">Generic rules monitor all the BizTalk Server Hosts or MessageBox databases based on a common threshold.</span></span> <span data-ttu-id="10592-146">例如，规则“Monitor HostQ Size”将基于通用阈值来监视所有 BizTalk Server 主机的工作队列。</span><span class="sxs-lookup"><span data-stu-id="10592-146">For example, the rule “Monitor HostQ Size,” monitors the work queues of all BizTalk Server Hosts based on a common threshold.</span></span> <span data-ttu-id="10592-147">如果三个主机存在，其所有工作队列都监视由相同规则，并在任何主机工作队列跨常见阈值时发生警报。</span><span class="sxs-lookup"><span data-stu-id="10592-147">If three hosts exist, all their work queues are monitored by the same rule and alerts occur when any of the host work queues cross the common threshold.</span></span><br /><br /> <span data-ttu-id="10592-148">BizTalk Server 特定于宿主的规则可让你配置的不同主机和 MessageBox 数据库的不同的阈值。</span><span class="sxs-lookup"><span data-stu-id="10592-148">BizTalk Server host-specific rules enable you to configure different thresholds for different hosts and MessageBox databases.</span></span> <span data-ttu-id="10592-149">例如，规则“Monitor HostQ Size – BizTalkServerApplication”是特定于主机的规则，它监视 BizTalkServerApplication 主机的工作队列。</span><span class="sxs-lookup"><span data-stu-id="10592-149">For example, the rule "Monitor HostQ Size – BizTalkServerApplication" is a host-specific rule that monitors the work queue of the BizTalkServerApplication host.</span></span> <span data-ttu-id="10592-150">通过定义的特定的 Operations Manager 提供程序特定的性能计数器实例和阈值规则中使用该提供程序执行此操作。</span><span class="sxs-lookup"><span data-stu-id="10592-150">You do this by defining a specific Operations Manager provider for the particular performance counter instance and using that provider in the threshold rule.</span></span><br /><br /> <span data-ttu-id="10592-151">特定于主机\MessageBox 的规则是作为模板规则来提供的，该模板规则用于指导创建适用于您环境的规则。</span><span class="sxs-lookup"><span data-stu-id="10592-151">Host\MessageBox-specific rules are provided as template rules to be used as a guide for creating rules that are applicable in your environment.</span></span> <span data-ttu-id="10592-152">通用规则需要配置特定于您环境的阈值。</span><span class="sxs-lookup"><span data-stu-id="10592-152">Generic rules need to be configured with threshold values specific to your environment.</span></span> <span data-ttu-id="10592-153">特定于 BizTalk 主机/MessageBox 的规则需要基于模板规则和相应的阈值来创建。</span><span class="sxs-lookup"><span data-stu-id="10592-153">BizTalk Host/MessageBox-specific rules need to be created based on the template rules and appropriate thresholds.</span></span><br /><br /> <span data-ttu-id="10592-154">BizTalk Server 包含自限制，这有助于防止重载基于各种参数。</span><span class="sxs-lookup"><span data-stu-id="10592-154">BizTalk Server incorporates self-throttling, which helps to prevent overloading based on various parameters.</span></span> <span data-ttu-id="10592-155">从操作方面而言，由临时重载引发的阻止并不是严重问题。</span><span class="sxs-lookup"><span data-stu-id="10592-155">A temporary overload that causes throttling to occur is not an operationally significant event.</span></span> <span data-ttu-id="10592-156">不过，在稳定的环境中不应发生持久性阻止，它说明在基础结构级可能出现问题。</span><span class="sxs-lookup"><span data-stu-id="10592-156">Persistent throttling, however, is not expected in a stable environment and could indicate underlying problems at the infrastructure level.</span></span> <span data-ttu-id="10592-157">BizTalk Server 管理包提供了基于以下条件的性能阈值监视器使用主动监视这种持续的限制条件：</span><span class="sxs-lookup"><span data-stu-id="10592-157">The BizTalk Server Management Pack provides proactive monitoring of such persistent throttling conditions with performance threshold monitors based on the following conditions:</span></span><br /><br /> <span data-ttu-id="10592-158">-BizTalk Server 服务进程内存</span><span class="sxs-lookup"><span data-stu-id="10592-158">-   BizTalk Server service process memory</span></span><br /><span data-ttu-id="10592-159">-正在处理的消息数</span><span class="sxs-lookup"><span data-stu-id="10592-159">-   Number of messages being processed</span></span><br /><span data-ttu-id="10592-160">-BizTalk Server 进程中的线程数</span><span class="sxs-lookup"><span data-stu-id="10592-160">-   Number of threads in a BizTalk Server process</span></span><br /><span data-ttu-id="10592-161">BizTalk 数据库队列的大小</span><span class="sxs-lookup"><span data-stu-id="10592-161">-   Size of the BizTalk database queues</span></span>|  
|<span data-ttu-id="10592-162">业务流程故障</span><span class="sxs-lookup"><span data-stu-id="10592-162">Orchestration Failures</span></span>|<span data-ttu-id="10592-163">对挂起的业务流程的监视是另一个常用方案。</span><span class="sxs-lookup"><span data-stu-id="10592-163">Monitoring for suspended orchestrations is another common scenario.</span></span> <span data-ttu-id="10592-164">包括业务流程引擎问题、.NET 组件故障以及程序逻辑的原因有很多情况下，业务流程可能会失败。</span><span class="sxs-lookup"><span data-stu-id="10592-164">Orchestrations can fail for many reasons that include orchestration engine problems, .NET Component failures, and program logic.</span></span> <span data-ttu-id="10592-165">请务必启用运算符以快速确定问题根源并继续固定时挂起的业务流程。</span><span class="sxs-lookup"><span data-stu-id="10592-165">It is important to enable an operator to determine the source of the problem quickly and to resume suspended orchestrations when fixed.</span></span>|  
|<span data-ttu-id="10592-166">服务监视</span><span class="sxs-lookup"><span data-stu-id="10592-166">Service Monitoring</span></span>|<span data-ttu-id="10592-167">BizTalk Server 需要多个服务正在正确运行。</span><span class="sxs-lookup"><span data-stu-id="10592-167">BizTalk Server requires that a number of services are running to operate correctly.</span></span> <span data-ttu-id="10592-168">这些服务的状态将映射到表示不同的 BizTalk 服务的类的监视器。</span><span class="sxs-lookup"><span data-stu-id="10592-168">The status of these services will be mapped to monitors for the classes representing the different BizTalk Services.</span></span>|  
|<span data-ttu-id="10592-169">应用程序监视</span><span class="sxs-lookup"><span data-stu-id="10592-169">Application Monitoring</span></span>|<span data-ttu-id="10592-170">BizTalk Server 引入了用于分组解决方案项目关联的应用程序的概念。</span><span class="sxs-lookup"><span data-stu-id="10592-170">BizTalk Server introduced the concept of an application for grouping solution artifacts.</span></span> <span data-ttu-id="10592-171">应用程序监视功能将检测应用程序级别失败的影响。</span><span class="sxs-lookup"><span data-stu-id="10592-171">Application monitoring detects effects of a failure at the application level.</span></span>|