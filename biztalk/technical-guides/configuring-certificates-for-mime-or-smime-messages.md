---
title: 为 MIME 或 SMIME 消息配置证书 |Microsoft Docs
ms.custom: ''
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ea6e5481-fc2e-4b17-b6c8-1ec5d2bfa2c3
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d771429ffc22f3791971ff09f89e2b725245639d
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "37021684"
---
# <a name="configuring-certificates-for-mime-or-smime-messages"></a>为 MIME 或 SMIME 消息配置证书
若要帮助保护数据传输上[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，必须将相应的 BizTalk 项目使用的证书存储中安装证书相关联。 这适用于 MIME/SMIME 编码的消息。 它还适用于 AS2 传输，将 MIME/SMIME 消息传输。  

 使用下表作为参考的证书使用方案和配置选项中提供的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。 在本主题末尾的"在此部分"标题中列出的主题中提供了详细的过程。  


|       **证书使用情况**        |                           **用户上下文**                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           **证书存储位置**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |        **证书类型**        |                                                                                                                                                                                                                                                                                                                                         **在 BizTalk 管理控制台中的配置参数**                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------|-----------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|        加密（发送）        |  与发送处理程序相关联的主机实例使用的帐户   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 编码器管道的宿主，并将加密证书导入**本地计算机 \ 其他人**存储。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 贸易合作伙伴公共证书 |                                                                                                                                                   -为指定值的加密证书**公用名**并**指纹**上**证书**页**发送端口属性**对话框。<br />-指定管道**编码**中的选项**配置管道**对话框。 **配置管道**通过单击下一步按钮将显示对话框**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。                                                                                                                                                   |
|       解密（接收）       | 与接收处理程序关联的主机实例使用的帐户 | 登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 解码器管道的宿主为每个主机实例服务帐户，并将解密证书导入**当前用户 \ 个人**存储。 **注意：** 管道解密在运行 IIS 6.0 的计算机上成功或更高版本，确保为 IIS 应用程序池帐户和与接收处理程序关联的主机实例使用的帐户是相同的则此帐户成员\< *machineName*\>\IIS_WPG 组。 有关设置 IIS 进程标识有关 IIS，请参阅[解决 IIS 权限疑难问题的指导原则](http://go.microsoft.com/fwlink/?LinkId=155161)(<http://go.microsoft.com/fwlink/?LinkId=155161>) 中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]帮助。 这些进程必须以相同的帐户运行，以便确保加载的帐户配置文件还加载了在管道中执行解密所需的注册表项。 出于性能原因，IIS 不加载帐户配置文件启动关联的 w3wp.exe 进程时，因此[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]必须使用相同的帐户配置主机实例，以便[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将一起加载帐户配置文件和注册表项。 |      私人证书       |                                                                                                                                               -指定的解密证书值**公用名**并**指纹**上**证书**的每个页**主机属性**对话框。<br />-指定管道**解码**中的选项**配置管道**对话框。 **配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。                                                                                                                                                |
|        签名（发送）         |  与发送处理程序相关联的主机实例使用的帐户   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 编码器管道的宿主为每个主机实例服务帐户，并为签名证书导入**当前用户 \ 个人**存储。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |      私人证书       |                                                                                                  -指定值的签名证书**公用名**并**指纹**上**证书**页**BizTalk 组属性**对话框。 **注意：** 在每个 BizTalk Server 组可以指定只有一个签名证书。<br />-指定管道**编码**中的选项**配置管道**对话框。 **配置管道**通过单击下一步按钮将显示对话框**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。                                                                                                   |
| 签名验证（接收） | 与接收处理程序关联的主机实例使用的帐户 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 解码器管道的宿主并导入到的签名证书**本地计算机 \ 其他人**存储。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 贸易合作伙伴公共证书 | -指定用于验证证书的值**公用名**并**指纹**上**证书**的每个页**参与方属性**对话框。<br />-指定管道**解码**中的选项**配置管道**对话框。 **配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。 **注意：** 用于参与方必须是唯一的证书用于验证其他参与方签名的证书验证签名的证书。 **注意：** 的配置**解码**选项要求部署具有 MIME/SMIME 解码器组件的管道。 |
|    参与方解析（接收）    | 与接收处理程序关联的主机实例使用的帐户 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       登录到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]哪个参与方解析为其配置和将证书导入计算机**本地计算机 \ 其他人**存储。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 贸易合作伙伴公共证书 |                                                   -指定证书的值**公用名**并**指纹**上**证书**的每个页**主机属性**对话框.<br />-指定**解析参与方**中的选项**配置管道**对话框。 **配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。 **注意：** 此选项的配置需要使用包含的管道**参与方解析**组件。 **XMLReceive**管道包含**参与方解析**组件。                                                    |
|          HTTPS（发送）           |  与发送处理程序相关联的主机实例使用的帐户   |     SSL 通信无需客户端证书。 是否要求客户端证书由目标 Web 服务器管理员决定。 如果目标 Web 服务器要求客户端证书，则执行以下步骤：<br /><br /> -从贸易合作伙伴获取公共证书。<br />-登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]作为与发送处理程序关联的主机实例使用的帐户。<br />-将证书导入**当前用户 \ 个人**存储。<br /><br /> 有关配置 IIS 以使用 SSL 的信息，请参阅知识库文章[如何： 在 Windows Server 2003 的 Web 服务器上安装导入证书](http://go.microsoft.com/fwlink/?LinkId=155162)(<http://go.microsoft.com/fwlink/?LinkId=155162>)。<br /><br /> 有关如何使用 Windows Server 2003 证书服务网页获取证书的信息，请参阅[使用 Windows Server 2003 证书服务网页](http://go.microsoft.com/fwlink/?LinkID=69975)(<http://go.microsoft.com/fwlink/?LinkID=69975>)。 **注意：** 若要使用证书服务网页获取从 Windows Server 2008 计算机的证书，请参阅 Microsoft 知识库文章 922706 网址[ http://go.microsoft.com/fwlink/?LinkId=155317 ](http://go.microsoft.com/fwlink/?LinkId=155317) (<http://go.microsoft.com/fwlink/?LinkId=155317>)。     | 贸易合作伙伴公共证书 |                                             -   **HTTP 传输**-设置**SSL 客户端证书指纹**选项卡上**身份验证**选项卡**HTTP 传输属性**对话框。 **HTTP 传输属性**通过单击显示对话框**配置**按钮**常规**页**发送端口属性**对话框。<br />-   **SOAP 传输**-设置**客户端证书指纹**选项卡上**常规**选项卡**SOAP 传输属性**对话框。 **SOAP 传输属性**通过单击显示对话框**配置**按钮**常规**页**发送端口属性**对话框。                                              |

## <a name="in-this-section"></a>本节内容  

-   [如何配置 BizTalk Server 以便接收加密的 MIME 或 SMIME 消息](../technical-guides/how-to-configure-biztalk-server-to-receive-encrypted-mime-or-smime-messages.md)  

-   [如何配置 BizTalk Server 以便发送加密的 MIME 或 SMIME 消息](~/technical-guides/how-to-configure-biztalk-server-to-send-encrypted-mime-smime-messages.md)  

-   [如何配置 BizTalk Server 以便接收签名的 MIME 或 SMIME 消息](../technical-guides/how-to-configure-biztalk-server-to-receive-signed-mime-or-smime-messages.md)  

-   [如何配置 BizTalk Server 以便发送签名的 MIME 或 SMIME 消息](../technical-guides/how-to-configure-biztalk-server-to-send-signed-mime-or-smime-messages.md)