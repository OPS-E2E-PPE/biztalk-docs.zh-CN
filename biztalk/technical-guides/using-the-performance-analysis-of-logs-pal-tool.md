---
title: 使用性能分析的日志 (PAL) 工具 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7f289cdf157100dc69feb468f789a9ebb76764a1
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2018
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a><span data-ttu-id="2ec4f-102">使用日志 (PAL) 工具的性能分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-102">Using the Performance Analysis of Logs (PAL) Tool</span></span>
<span data-ttu-id="2ec4f-103">PAL （性能分析的日志） 工具读取性能监视器计数器日志 （任何已知格式） 中，并使用复杂，但已知阈值 （提供） 进行分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-103">The PAL (Performance Analysis of Logs) tool reads in a performance monitor counter log (any known format) and analyzes it using complex, but known thresholds (provided).</span></span> <span data-ttu-id="2ec4f-104">该工具生成基于 HTML 报告，以图形方式图表重要的性能计数器，并引发警报时超出阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-104">The tool generates an HTML based report that graphically charts important performance counters and throws alerts when thresholds are exceeded.</span></span> <span data-ttu-id="2ec4f-105">阈值最初根据阈值定义的 Microsoft 产品团队包括[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，和成员的 Microsoft 支持。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-105">The thresholds are originally based on thresholds defined by the Microsoft product teams, including [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and members of Microsoft support.</span></span> <span data-ttu-id="2ec4f-106">此工具不是传统的性能分析的替代，但它可自动执行的性能计数器日志足够来帮助您节省大量时间的分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-106">This tool is not a replacement of traditional performance analysis, but it automates the analysis of performance counter logs enough to help save you time.</span></span> <span data-ttu-id="2ec4f-107">PAL 工具中：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-107">The PAL tool:</span></span>  
  
-   <span data-ttu-id="2ec4f-108">分析阈值的性能计数器日志</span><span class="sxs-lookup"><span data-stu-id="2ec4f-108">Analyzes performance counter logs for thresholds</span></span>  
  
-   <span data-ttu-id="2ec4f-109">适用于下列大型 Perfmon 日志</span><span class="sxs-lookup"><span data-stu-id="2ec4f-109">Is helpful for large Perfmon logs</span></span>  
  
-   <span data-ttu-id="2ec4f-110">标识[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和通过分析阈值的操作系统性能计数器瓶颈</span><span class="sxs-lookup"><span data-stu-id="2ec4f-110">Identifies [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and operating system performance counter bottlenecks by analyzing for thresholds</span></span>  
  
-   <span data-ttu-id="2ec4f-111">可以扩展以对任何性能计数器进行分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-111">Is extensible to do analysis on any performance counters</span></span>  
  
-   <span data-ttu-id="2ec4f-112">可以用于帮助编写你自己的计数器</span><span class="sxs-lookup"><span data-stu-id="2ec4f-112">Can be used to help write your own counter</span></span>  
  
 <span data-ttu-id="2ec4f-113">PAL 是可用作在免费下载[ http://go.microsoft.com/fwlink/?linkid=98098 ](http://go.microsoft.com/fwlink/?linkid=98098)。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-113">PAL is available as a free download at [http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098).</span></span> <span data-ttu-id="2ec4f-114">它需要 Microsoft Log Parser。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-114">It requires Microsoft Log Parser.</span></span> <span data-ttu-id="2ec4f-115">Log Parser 是一个功能强大、 通用的工具，如事件日志、 注册表、 文件系统和活动 Windows 操作系统上提供对基于文本的数据，例如日志文件、 XML 文件，CSV 文件，以及密钥的数据源的通用查询访问权限Directory® 目录服务。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-115">Log Parser is a powerful, versatile tool that provides universal query access to text-based data such as log files, XML files, and CSV files, as well as key data sources on the Windows operating system such as the event log, the registry, the file system, and Active Directory® directory service.</span></span> <span data-ttu-id="2ec4f-116">你可能想要使用此工具来查询占用大量的日志记录信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-116">You may want to use this tool to query a significant amount of logging information.</span></span> <span data-ttu-id="2ec4f-117">你可以下载的 Log Parser 工具在[ http://go.microsoft.com/fwlink/?linkid=85574 ](http://go.microsoft.com/fwlink/?linkid=85574)。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-117">You can download the Log Parser tool at [http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574).</span></span>  
  
## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a><span data-ttu-id="2ec4f-118">在不同语言中与性能计数器一起使用 PAL 日志</span><span class="sxs-lookup"><span data-stu-id="2ec4f-118">Using PAL with Performance Counter Logs in Different Languages</span></span>  
 <span data-ttu-id="2ec4f-119">PAL 工具将分析仅在英语语言中的性能计数器日志。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-119">The PAL tool analyzes performance counter logs only in English language.</span></span> <span data-ttu-id="2ec4f-120">若要使用其他语言中的性能计数器日志 PAL 工具，必须首先将日志传输到英语语言的转换。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-120">To use the PAL tool with performance counter logs in other languages, you must first translate the logs to English language.</span></span> <span data-ttu-id="2ec4f-121">你可以使用**Perfmon 日志转换器**工具，可在[ http://go.microsoft.com/fwlink/?LinkId=158802 ](http://go.microsoft.com/fwlink/?LinkId=158802)翻译为英语原始性能计数器日志文件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-121">You can use the **Perfmon Log Translator** tool available at [http://go.microsoft.com/fwlink/?LinkId=158802](http://go.microsoft.com/fwlink/?LinkId=158802) to translate the original performance counter log files to English.</span></span>  
  
## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a><span data-ttu-id="2ec4f-122">了解 Microsoft BizTalk Server 2010 PAL 工具报告</span><span class="sxs-lookup"><span data-stu-id="2ec4f-122">Understanding the PAL Tool Report for Microsoft BizTalk Server 2010</span></span>  
 <span data-ttu-id="2ec4f-123">PAL 工具为 Windows 操作系统的 Microsoft SQL Server 提供 Perfmon 日志分析的阈值和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-123">The PAL tool provides Perfmon log analysis of thresholds for the Windows operating system, Microsoft SQL Server, and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="2ec4f-124">本部分介绍大部分 BizTalk Server 阈值报表中 PAL 工具分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-124">This section describes most of the analyses in the BizTalk Server threshold report in the PAL tool.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ec4f-125">本主题是长，以便可以在一个位置以方便参考包含有关 PAL 工具的完整信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-125">This topic is long so that comprehensive information about the PAL tool can be contained in one place for easy reference.</span></span>  
  
 <span data-ttu-id="2ec4f-126">以下的分析和阈值由 PAL 工具进行报告。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-126">The following analysis and thresholds are reported by the PAL tool.</span></span>  
  
|<span data-ttu-id="2ec4f-127">分析类型和名称</span><span class="sxs-lookup"><span data-stu-id="2ec4f-127">Analysis Type and Name</span></span>|<span data-ttu-id="2ec4f-128">分析说明</span><span class="sxs-lookup"><span data-stu-id="2ec4f-128">Analysis Description</span></span>|  
|----------------------------|--------------------------|  
|<span data-ttu-id="2ec4f-129">核心转储的磁盘： 磁盘可用空间</span><span class="sxs-lookup"><span data-stu-id="2ec4f-129">Disk: Disk Free Space for a Kernel Dump</span></span>|<span data-ttu-id="2ec4f-130">此分析将检查以确保要转储到磁盘的所有内存的操作系统的可用磁盘空间不足。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-130">This analysis checks to make sure there is enough free disk space for the operating system to dump all memory to disk.</span></span> <span data-ttu-id="2ec4f-131">如果可用磁盘空间不足，然后系统将无法创建 memory.dmp，即分析内核转储的根本原因所需的文件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-131">If insufficient disk space is available, then the operating system will fail to create a memory.dmp, file which is necessary to analyze the root cause of a kernel dump.</span></span>|  
|<span data-ttu-id="2ec4f-132">磁盘： 逻辑/物理磁盘接口分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-132">Disk: Logical/Physical Disk Interface Analysis</span></span>|<span data-ttu-id="2ec4f-133">此分析中查找的每个物理磁盘的空闲时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-133">This analysis looks at the idle time of each of the physical disks.</span></span> <span data-ttu-id="2ec4f-134">越空闲磁盘已，越低从中使用该磁盘。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-134">The more idle the disk is, the less the disk is being used.</span></span> <span data-ttu-id="2ec4f-135">在逻辑磁盘中使用一个磁盘时，最好使用此计数器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-135">This counter is best used when one disk is used in the logical disk.</span></span> <span data-ttu-id="2ec4f-136">"%空闲时间"报告的示例间隔期间磁盘空闲时间百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-136">“% Idle Time” reports the percentage of time during the sample interval that the disk was idle.</span></span><br /><br /> <span data-ttu-id="2ec4f-137">参考： 排除了在磁盘密集型问题 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-137">Reference:  Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>|  
|<span data-ttu-id="2ec4f-138">磁盘： 逻辑/物理磁盘读取/写入延迟分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-138">Disk: Logical/Physical Disk Read/Write Latency Analysis</span></span>|<span data-ttu-id="2ec4f-139">Windows 检测磁盘性能瓶颈的最可靠方法是通过测量其响应时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-139">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="2ec4f-140">如果响应时间大于.025 （25 毫秒为单位），就是一个保守的阈值，然后可能发生明显减慢速度和影响用户的性能问题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-140">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span> <span data-ttu-id="2ec4f-141">详细信息，请参阅本主题中的逻辑/物理磁盘读取/写入延迟分析到。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-141">For more information, refer to Logical/Physical Disk Read/Write Latency Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-142">磁盘： 逻辑磁盘传输次数/秒</span><span class="sxs-lookup"><span data-stu-id="2ec4f-142">Disk: Logical Disk Transfers/sec</span></span>|<span data-ttu-id="2ec4f-143">"Disk Transfers/sec"是读取的速率和写入磁盘上的操作。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-143">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="2ec4f-144">此分析检查以查看是否有任何逻辑磁盘的阈值展示较差的响应时间 （大于 25 秒 I/O 操作的响应时间）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-144">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="2ec4f-145">如果是这样，每秒磁盘传输应在或更高版本 80。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-145">If this is true, then the disk transfers per second should be at or above 80.</span></span> <span data-ttu-id="2ec4f-146">如果没有，则磁盘体系结构需要进行调查。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-146">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="2ec4f-147">不佳的磁盘 I/O 的最常见原因是重载 SAN 上的 LUN。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-147">The most common cause of poor disk I/O is LUN overloading on the SAN.</span></span> <span data-ttu-id="2ec4f-148">有关详细信息，请参阅本主题中的逻辑 Disk Transfers/sec。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-148">For more information, refer to Logical Disk Transfers/sec in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-149">磁盘： 逻辑磁盘可用空间百分比</span><span class="sxs-lookup"><span data-stu-id="2ec4f-149">Disk: LogicalDisk % Free Space</span></span>|<span data-ttu-id="2ec4f-150">"%可用空间"是已在所选逻辑磁盘驱动器上可用的总可用空间的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-150">“% Free Space” is the percentage of total usable space that was free on the selected logical disk drive.</span></span> <span data-ttu-id="2ec4f-151">小于 30%的可用磁盘驱动器空间之前，应不会影响性能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-151">Performance should not be affected until the available disk drive space is less than 30 percent.</span></span> <span data-ttu-id="2ec4f-152">当使用磁盘驱动器的 70%时，剩余的可用空间位于更靠近到磁盘的主轴，在磁盘驱动器，在较低的性能级别运行的中心。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-152">When 70 percent of the disk drive is used, the remaining free space is located closer to the disk's spindle at the center of the disk drive, which operates at a lower performance level.</span></span> <span data-ttu-id="2ec4f-153">可用磁盘空间不足可能导致严重磁盘性能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-153">Lack of free disk space can cause severe disk performance.</span></span><br /><br /> <span data-ttu-id="2ec4f-154">参考： NT 服务器和在磁盘子系统性能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-154">Reference:  NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>|  
|<span data-ttu-id="2ec4f-155">磁盘： 处理 IO Data Operations/sec 和处理 IO 其他操作数/秒分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-155">Disk: Process IO Data Operations/sec and Process IO Other Operations/sec Analysis</span></span>|<span data-ttu-id="2ec4f-156">这些计数器计数生成的包括文件、 网络和设备 I/o 的过程的所有 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-156">These counters count all I/O activity generated by the process to include file, network and device I/Os.</span></span> <span data-ttu-id="2ec4f-157">进程正在 1,000 多个我 / O 每秒的并将其标记为警告时，将检查这些分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-157">These analyses check when processes are doing more than 1,000 I/O’s per second and flag it as a warning.</span></span> <span data-ttu-id="2ec4f-158">这些分析最与其他分析 （如磁盘分析） 相关联时用于确定哪些进程可能会涉及到的 I/O 活动中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-158">These analyses are best used in correlation with other analyses such as disk analysis to determine which processes might be involved in the I/O activity.</span></span>|  
|<span data-ttu-id="2ec4f-159">内存： 可用内存</span><span class="sxs-lookup"><span data-stu-id="2ec4f-159">Memory: Available Memory</span></span>|<span data-ttu-id="2ec4f-160">此分析检查的总的可用内存是否不足 – 10%可用处出现警告和在 5%可用的关键。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-160">This analysis checks whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="2ec4f-161">下降趋势的 10 MB 的每小时检测到时，并可表示潜在的即将到来的内存不足情况，警告也会得到通知。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-161">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, which can indicate a potential upcoming memory condition.</span></span> <span data-ttu-id="2ec4f-162">物理内存不足可能导致增加特权模式下 CPU 和系统延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-162">Low physical memory can cause increased privileged mode CPU and system delays.</span></span> <span data-ttu-id="2ec4f-163">详细信息，请参阅本主题中的可用 MemoryAnalysis 到。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-163">For more information, refer to Available MemoryAnalysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-164">内存： 可用系统页表项</span><span class="sxs-lookup"><span data-stu-id="2ec4f-164">Memory: Free System Page Table Entries</span></span>|<span data-ttu-id="2ec4f-165">可用系统页表项 (PTE) 是当前未使用的系统页表条目数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-165">Free System Page Table Entries (PTE’s) are the number of page table entries not currently used by the system.</span></span> <span data-ttu-id="2ec4f-166">此分析将决定是否系统用完 PTE 的通过检查是否有少于 5000 免费 PTE 的伴有警告是否少于 10,000 免费 PTE 的。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-166">This analysis determines whether the system is running out of PTE’s by checking whether there are fewer than 5,000 free PTE’s with a Warning if there are fewer than 10,000 free PTE’s.</span></span> <span data-ttu-id="2ec4f-167">缺乏足够 PTE 可能会导致系统范围内挂起。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-167">Lack of enough PTE’s can result in systemwide hangs.</span></span> <span data-ttu-id="2ec4f-168">此外请注意，3 GB 切换将大幅降低免费 PTE 的量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-168">Also note that the /3GB switch will lower the amount of free PTE’s significantly.</span></span> <span data-ttu-id="2ec4f-169">详细信息，请参阅本主题中的可用系统页表条目分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-169">For more information, refer to Free System Page Table Entries Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-170">内存： 内存泄漏检测</span><span class="sxs-lookup"><span data-stu-id="2ec4f-170">Memory: Memory Leak Detection</span></span>|<span data-ttu-id="2ec4f-171">此分析将决定是否任何进程正在消耗大量的系统的内存，且是否在内存消耗，随着时间的推移增加过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-171">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-172">使用大量的内存的进程没什么，只要该过程将返回到系统内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-172">A process consuming large portions of memory is fine as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="2ec4f-173">查找增加图表的趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-173">Look for increasing trends in the chart.</span></span> <span data-ttu-id="2ec4f-174">上升趋势长的一段时间内无法指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-174">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="2ec4f-175">"Private Bytes"是内存的当前大小 （字节），此进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-175">“Private Bytes” is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="2ec4f-176">此分析检查 10 MB 的每小时和 5 MB 的每小时增加趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-176">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="2ec4f-177">与 PAL 中的可用内存分析相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-177">Use this analysis in correlation with the Available Memory analysis in PAL.</span></span> <span data-ttu-id="2ec4f-178">详细信息，请参阅本主题中的内存泄漏检测分析到。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-178">For more information, refer to Memory Leak Detection Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-179">内存： 句柄泄漏检测</span><span class="sxs-lookup"><span data-stu-id="2ec4f-179">Memory: Handle Leak Detection</span></span>|<span data-ttu-id="2ec4f-180">此分析检查的所有进程以确定多少处理每个已打开，以确定是否可以句柄泄漏怀疑不当。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-180">This analysis checks all of the processes to determine how many handles each has open and to determine whether a handle leak is suspected.</span></span> <span data-ttu-id="2ec4f-181">具有大量的句柄和/或主动上升趋势的进程可能表示句柄泄漏，这通常会导致内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-181">A process with a large number of handles and/or an aggressive upward trend could indicate a handle leak, which typically results in a memory leak.</span></span> <span data-ttu-id="2ec4f-182">此进程当前打开的句柄的总数等于此进程中的每个线程当前打开的句柄总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-182">The total number of handles currently open by this process is equal to the sum of the handles currently open by each thread in this process.</span></span><br /><br /> <span data-ttu-id="2ec4f-183">参考： 调试诊断工具在的 1.1 版 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-183">Reference:  Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>|  
|<span data-ttu-id="2ec4f-184">内存： 内存 Pages Input/sec</span><span class="sxs-lookup"><span data-stu-id="2ec4f-184">Memory: Memory Pages Input/sec</span></span>|<span data-ttu-id="2ec4f-185">"页 Input/sec"是从磁盘为解决强制分页错误读取页的速率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-185">“Pages Input/sec” is the rate at which pages are read from disk to resolve hard page faults.</span></span> <span data-ttu-id="2ec4f-186">如果进程引用不在其工作集或其他位置在物理内存中，并且必须从磁盘检索的虚拟内存中的页，将发生硬页面错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-186">Hard page faults occur when a process refers to a page in virtual memory that is not in its working set or elsewhere in physical memory, and must be retrieved from disk.</span></span> <span data-ttu-id="2ec4f-187">此分析将检查是否有 10 个以上页文件的读取次数 / 秒。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-187">This analysis checks whether there are more than 10 page file reads per second.</span></span>|  
|<span data-ttu-id="2ec4f-188">Memory: Memory Pages/sec</span><span class="sxs-lookup"><span data-stu-id="2ec4f-188">Memory: Memory Pages/sec</span></span>|<span data-ttu-id="2ec4f-189">此分析检查"页/秒"是否为高 （超过 1,000 个）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-189">This analysis checks to see whether the “Pages/sec” is high (above 1,000).</span></span> <span data-ttu-id="2ec4f-190">如果高，然后系统可能内存不足尝试进行分页到磁盘的内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-190">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="2ec4f-191">"页/秒"是从读取或写入磁盘为解决强制分页错误页的速率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-191">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="2ec4f-192">此计数器是导致系统范围延迟的错误种类的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-192">This counter is a primary indicator of the kinds of faults that cause systemwide delays.</span></span>  <span data-ttu-id="2ec4f-193">可用内存分析和 PAL 中的内存泄漏检测分析与相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-193">Use this analysis in correlation with Available Memory analysis and Memory Leak Detection analysis in PAL.</span></span> <span data-ttu-id="2ec4f-194">如果所有这些分析在同一时间引发警报，，这可能表示系统内存不足和可疑的进程涉及和执行分析 PAL 中的内存泄漏检测分析中所述的步骤。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-194">If all of these analyses are throwing alerts at the same time, then this may indicate the system is running out of memory and the suspected processes involved and follow analysis steps mentioned in the Memory Leak Detection analysis in PAL.</span></span><br /><br /> <span data-ttu-id="2ec4f-195">有关详细信息，请参阅本主题中的内存页/秒分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-195">For more information, refer to Memory Pages/sec Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-196">内存： 内存系统缓存驻留字节数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-196">Memory: Memory System Cache Resident Bytes</span></span>|<span data-ttu-id="2ec4f-197">"系统缓存驻留字节数"是的大小，以字节为单位，在文件系统缓存中的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-197">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="2ec4f-198">此值只包括当前物理页面，并且不包括任何当前未驻留的虚拟内存页面。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-198">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="2ec4f-199">此值是一个组件的"内存\\\System 代码驻留字节数"表示所有当前正在物理内存的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-199">This value is a component of “Memory\\\System Code Resident Bytes” which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="2ec4f-200">此计数器显示上次观测的值仅;它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-200">This counter displays the last observed value only; it is not an average.</span></span> <span data-ttu-id="2ec4f-201">此分析检查上升趋势的 10 MB 的每小时。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-201">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="2ec4f-202">承受负载时，服务器可能使用的系统缓存，以便缓存如磁盘 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-202">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="2ec4f-203">将相关联时使用与过程 IO Data Operations/sec 和进程 IO 其他操作数/秒 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-203">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses in PAL.</span></span><br /><br /> <span data-ttu-id="2ec4f-204">参考： 文件缓存性能和优化在 [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-204">Reference: File Cache Performance and Tuning at [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span></span>|  
|<span data-ttu-id="2ec4f-205">内存： 池非分页字节数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-205">Memory: Pool Non Paged Bytes</span></span>|<span data-ttu-id="2ec4f-206">"池非分页字节数"是的大小，以字节为单位，无法写入到的对象的系统内存区域的非分页池的磁盘、 但一旦分配就必须保留在物理内存中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-206">“Pool Nonpaged Bytes” is the size, in bytes, of the non-paged pool, an area of system memory for objects that cannot be written to disk, but must remain in physical memory as long as they are allocated.</span></span> <span data-ttu-id="2ec4f-207">此分析将检查以查看是否系统即将接近最大池非分页内存大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-207">This analysis checks to see whether the system is coming close to the maximum pool non paged memory size.</span></span> <span data-ttu-id="2ec4f-208">这是通过估计考虑到的池大小/3 GB、 物理内存大小和 32 位/64 位，然后确定的值是否高于 60%的估计的池大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-208">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="2ec4f-209">如果系统变得接近最大大小时，然后系统可能会遇到系统宽挂起。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-209">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="2ec4f-210">Boot.ini 文件中的 3 GB 交换机选项大大降低了此内存池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-210">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="2ec4f-211">详细信息，请参阅本主题中的 Pool Non-Paged 字节分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-211">For more information, refer to Pool Non-Paged Bytes Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-212">内存： 池分页字节数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-212">Memory: Pool Paged Bytes</span></span>|<span data-ttu-id="2ec4f-213">此分析将检查以查看是否系统即将接近最大池分页内存大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-213">This analysis checks to see whether the system is coming close to the maximum pool paged memory size.</span></span> <span data-ttu-id="2ec4f-214">这是通过估计考虑到的池大小/3 GB、 物理内存大小和 32 位/64 位，然后确定的值是否高于 60%的估计的池大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-214">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="2ec4f-215">如果系统变得接近最大大小时，然后系统可能会遇到系统宽挂起。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-215">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="2ec4f-216">Boot.ini 文件中的 3 GB 交换机选项大大降低了此内存池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-216">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="2ec4f-217">详细信息，请参阅本主题中的池分页字节分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-217">For more information, refer to Pool Paged Bytes Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-218">内存： 进程线程计数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-218">Memory: Process Thread Count</span></span>|<span data-ttu-id="2ec4f-219">此分析检查的所有进程来确定进程是否具有 500 多个线程，且由每小时 50 线程如果增加线程数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-219">This analysis checks all of the processes to determine whether a process has more than 500 threads and if the number of threads is increasing by 50 threads per hour.</span></span> <span data-ttu-id="2ec4f-220">具有大量的线程和/或主动上升趋势的进程无法指示线程泄漏这通常会导致内存泄漏或高上下文切换。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-220">A process with a large number of threads and/or an aggressive upward trend could indicate a thread leak which typically results in either a memory leak or high context switching.</span></span> <span data-ttu-id="2ec4f-221">高上下文切换将导致高特权模式下 CPU。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-221">High context switching will result in high privileged mode CPU.</span></span>|  
|<span data-ttu-id="2ec4f-222">内存： 进程工作集</span><span class="sxs-lookup"><span data-stu-id="2ec4f-222">Memory: Process Working Set</span></span>|<span data-ttu-id="2ec4f-223">"工作集"是当前大小 （字节），此过程的工作集。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-223">“Working Set” is the current size, in bytes, of the working set of this process.</span></span> <span data-ttu-id="2ec4f-224">工作集是的进程中的线程最近使用过的内存页的集合。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-224">The working set is the set of memory pages touched recently by the threads in the process.</span></span> <span data-ttu-id="2ec4f-225">如果计算机中的可用内存高于阈值，页会保留在某一进程工作集，即使它们未被使用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-225">If free memory in the computer is above a threshold, pages are left in the working set of a process even if they are not in use.</span></span> <span data-ttu-id="2ec4f-226">如果可用内存降到阈值以下，将从工作集中削减页。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-226">When free memory falls below a threshold, pages are trimmed from working sets.</span></span> <span data-ttu-id="2ec4f-227">如果需要它们将会软恢复到的工作集在离开主内存之前。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-227">If they are needed they will then be soft-faulted back into the working set before leaving main memory.</span></span> <span data-ttu-id="2ec4f-228">此分析检查的 10 MB 上升趋势达到或超过每个进程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-228">This analysis checks for an increasing trend of 10 MB’s or more in each of the processes.</span></span> <span data-ttu-id="2ec4f-229">PAL 中的可用内存分析的使用相关联时使用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-229">Use in correlation with Available Memory analysis in PAL.</span></span><br /><br /> <span data-ttu-id="2ec4f-230">参考： 检测在内存瓶颈 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-230">Reference:  Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>|  
|<span data-ttu-id="2ec4f-231">网络： 网络输出队列长度分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-231">Network: Network Output Queue Length Analysis</span></span>|<span data-ttu-id="2ec4f-232">此分析检查多少线程在等待网络适配器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-232">This analysis checks to see how many threads are waiting on the network adapter.</span></span> <span data-ttu-id="2ec4f-233">如果多个线程在等待上的网络适配器，然后系统可能占满网络 I/O 由于网络滞后或网络带宽。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-233">If a lot of threads are waiting on the network adapter, then the system is probably saturating the network I/O due to network latency or network bandwidth.</span></span> <span data-ttu-id="2ec4f-234">"Output Queue Length"是 （以数据包） 的输出数据包队列的长度。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-234">“Output Queue Length” is the length of the output packet queue (in packets).</span></span> <span data-ttu-id="2ec4f-235">指示延迟如果这是长度大于 2，和瓶颈应找出并消除，如有可能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-235">Delays are indicated if this is longer than two, and the bottleneck should be found and eliminated, if possible.</span></span> <span data-ttu-id="2ec4f-236">网络输出队列的典型原因包括大量的小型网络请求和网络延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-236">Typical causes of network output queuing include high numbers of small network requests and network latency.</span></span>|  
|<span data-ttu-id="2ec4f-237">网络： 网络使用率分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-237">Network: Network Utilization Analysis</span></span>|<span data-ttu-id="2ec4f-238">"Bytes Total/sec"是发送和接收每个网络适配器，包括组帧字符字节的速率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-238">“Bytes Total/sec” is the rate at which bytes are sent and received over each network adapter, including framing characters.</span></span> <span data-ttu-id="2ec4f-239">"Network Interface\Bytes Received/sec"是"Network Interface\Bytes Received/sec"和"Network Interface\Bytes Sent/sec"的和。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-239">“Network Interface\Bytes Received/sec” is a sum of “Network Interface\Bytes Received/sec” and “Network Interface\Bytes Sent/sec”.</span></span> <span data-ttu-id="2ec4f-240">此计数器可帮助你知道在你的网络适配器的流量是否已饱和以及是否需要添加另一个网络适配器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-240">This counter helps you know whether the traffic at your network adapter is saturated and whether you need to add another network adapter.</span></span> <span data-ttu-id="2ec4f-241">可以确定问题的速度取决于类型的网络必须以及是否与其他应用程序共享带宽。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-241">How quickly you can identify a problem depends on the type of network you have as well as whether you share bandwidth with other applications.</span></span> <span data-ttu-id="2ec4f-242">此分析将"Bytes Total/sec"转换为位，并将它与计算网络利用率的网络适配器的当前带宽进行比较。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-242">This analysis converts “Bytes Total/sec” to bits and compares it to the current bandwidth of the network adapter to calculate network utilization.</span></span> <span data-ttu-id="2ec4f-243">接下来，它会检查 50%以上的使用率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-243">Next, it checks for utilization above 50 percent.</span></span><br /><br /> <span data-ttu-id="2ec4f-244">参考： 测量在.NET 应用程序性能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-244">Reference:  Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>|  
|<span data-ttu-id="2ec4f-245">分页文件： 分页文件使用率 %和 %使用高峰</span><span class="sxs-lookup"><span data-stu-id="2ec4f-245">Paging File: Paging File % Usage and % Usage Peak</span></span>|<span data-ttu-id="2ec4f-246">在 %中使用的页文件实例的量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-246">The amount of the page file instance in use in percent.</span></span> <span data-ttu-id="2ec4f-247">另请参阅"过程\\\Page 文件字节数"。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-247">See also “Process\\\Page File Bytes”.</span></span> <span data-ttu-id="2ec4f-248">此分析检查是否大于 70%的使用率的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-248">This analysis checks whether the percentage of usage is greater than 70 percent.</span></span>|  
|<span data-ttu-id="2ec4f-249">处理器： 处理器使用率分析和进程的过多的处理器使用率</span><span class="sxs-lookup"><span data-stu-id="2ec4f-249">Processor: Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>|<span data-ttu-id="2ec4f-250">此计数器是处理器活动的主要指示器，并显示在采样间隔期间观察到的忙碌时间的平均百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-250">This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="2ec4f-251">它被通过监视服务处于非活动状态的时间，然后从 100%减去该值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-251">It is calculated by monitoring the time that the service is inactive and subtracting that value from 100 percent.</span></span> <span data-ttu-id="2ec4f-252">此分析检查大于每个处理器上的 60%的利用率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-252">This analysis checks for utilization greater than 60 percent on each processor.</span></span> <span data-ttu-id="2ec4f-253">如果是这样，确定它是否是高用户模式 CPU 或高特权模式。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-253">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="2ec4f-254">如果高特权模式下 CPU 怀疑有问题，请参阅 PAL 中的特权模式 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-254">If high privileged mode CPU is suspected, then see the Privileged Mode CPU analysis in PAL.</span></span> <span data-ttu-id="2ec4f-255">如果怀疑用户模式下处理器瓶颈，则可以考虑使用进程探查器分析导致高 CPU 使用的函数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-255">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span>|  
|<span data-ttu-id="2ec4f-256">处理器： 处理器队列长度</span><span class="sxs-lookup"><span data-stu-id="2ec4f-256">Processor: Processor Queue Length</span></span>|<span data-ttu-id="2ec4f-257">此分析将决定是否平均处理器队列长度超过处理器的数目。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-257">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="2ec4f-258">如果是这样，则这可能表示处理器瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-258">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="2ec4f-259">通过 PAL 中的过程分析特权模式 CPU 分析和过多的处理器使用的相关中使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-259">Use this analysis in correlation with Privileged Mode CPU analysis and Excessive Processor Use by Process analysis in PAL.</span></span> <span data-ttu-id="2ec4f-260">详细信息，请参阅本主题中的处理器队列长度分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-260">For detailed information, refer to Processor Queue Length Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-261">处理器： 特权模式下 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-261">Processor:  Privileged Mode CPU Analysis</span></span>|<span data-ttu-id="2ec4f-262">此计数器指示在特权模式下运行的线程的时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-262">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="2ec4f-263">当你的应用程序调用时 （例如，可执行文件或网络 I/O 或分配内存） 的操作系统功能时，这些操作系统功能在特权模式下执行。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-263">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span> <span data-ttu-id="2ec4f-264">此分析将检查以查看特权模式下 CPU 是否占用了超过 30%的总 CPU。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-264">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="2ec4f-265">如果这样，则可能的 CPU 消耗是才导致的网络、 内存或磁盘 I/O 等处理器以外的另一个瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-265">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="2ec4f-266">与处理器相关联时使用: %Interrupt Time 和处理器： PAL 中的高上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-266">Use in correlation with Processor:  % Interrupt Time and Processor:  High Context Switching analyses in PAL.</span></span> <span data-ttu-id="2ec4f-267">详细信息，请参阅本主题中的特权模式 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-267">For more information, refer to Privileged Mode CPU Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-268">处理器： 中断时间</span><span class="sxs-lookup"><span data-stu-id="2ec4f-268">Processor: Interrupt Time</span></span>|<span data-ttu-id="2ec4f-269">"%中断时间"是处理器用于接收和服务硬件中断采样间隔期间的时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-269">“% Interrupt Time” is the time the processor spends receiving and servicing hardware interrupts during sample intervals.</span></span> <span data-ttu-id="2ec4f-270">此值是活动的生成中断，例如系统时钟、 鼠标、 磁盘驱动程序、 数据通讯线路、 网络接口卡和其他外围设备的设备的间接指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-270">This value is an indirect indicator of the activity of devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication lines, network interface cards and other peripheral devices.</span></span> <span data-ttu-id="2ec4f-271">这些设备通常会中断处理器，在已经完成了任务或需要关注时。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-271">These devices normally interrupt the processor when they have completed a task or require attention.</span></span> <span data-ttu-id="2ec4f-272">中断期间是暂挂正常线程执行。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-272">Normal thread execution is suspended during interrupts.</span></span> <span data-ttu-id="2ec4f-273">大多数系统时钟每隔 10 毫秒，创建中断活动的背景就会中断处理器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-273">Most system clocks interrupt the processor every 10 milliseconds, creating a background of interrupt activity.</span></span> <span data-ttu-id="2ec4f-274">大幅度提高此计数器指示潜在硬件问题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-274">A dramatic increase in this counter indicates potential hardware problems.</span></span> <span data-ttu-id="2ec4f-275">此分析检查"%中断时间"大于 30%。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-275">This analysis checks for “% Interrupt Time” greater than 30 percent.</span></span> <span data-ttu-id="2ec4f-276">如果发生这种情况，请考虑更新与此警报关联的硬件的设备驱动程序。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-276">If this occurs, then consider updating devices drivers for hardware that correlates to this alert.</span></span><br /><br /> <span data-ttu-id="2ec4f-277">参考： 测量在.NET 应用程序性能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-277">Reference: Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>|  
|<span data-ttu-id="2ec4f-278">处理器： 高上下文切换</span><span class="sxs-lookup"><span data-stu-id="2ec4f-278">Processor:  High Context Switching</span></span>|<span data-ttu-id="2ec4f-279">较高优先级的线程会抢占较低的优先级线程当前正在运行或高优先级的线程块时，会发生情况的上下文切换。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-279">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="2ec4f-280">当多个线程共享相同的优先级级别，则会发生的上下文切换的高级别。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-280">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="2ec4f-281">这通常指示线程过多在争夺系统上的处理器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-281">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="2ec4f-282">一般情况下，上下文切换速率小于每个处理器每秒 5,000 的不是值得担心。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-282">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="2ec4f-283">如果上下文切换率超过每个处理器每秒的 15000，则一个约束。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-283">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span> <span data-ttu-id="2ec4f-284">详细信息，请参阅本主题中的高上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-284">For more information, refer to High Context Switching Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-285">冻结过程中业务流程的 Microsof BizTalk Server: BizTalk</span><span class="sxs-lookup"><span data-stu-id="2ec4f-285">Microsof BizTalk Server: BizTalk Dehydrating Orchestrations</span></span>|<span data-ttu-id="2ec4f-286">当同时运行多长时间运行的业务流程时，可能会出现内存和性能问题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-286">When many long-running business processes are running at the same time, memory and performance issues are possible.</span></span> <span data-ttu-id="2ec4f-287">业务流程引擎通过“冻结”和“解除冻结”业务流程实例来解决这些问题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-287">The orchestration engine addresses these issues by "dehydrating" and "rehydrating" orchestration instances.</span></span> <span data-ttu-id="2ec4f-288">冻结是将业务流程的状态序列化到 SQL Server 数据库中的过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-288">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="2ec4f-289">Rehydration 是此过程的反向︰ 反序列化从数据库的业务流程的上次运行状态。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-289">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="2ec4f-290">冻结用于通过减少必须在内存中同时实例化的业务流程数来最大程度地降低系统资源的使用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-290">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="2ec4f-291">因此，dehyrations 节省内存消耗，但代价相对较大要执行的操作。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-291">Therefore, dehyrations save memory consumption, but are relatively expensive operations to perform.</span></span> <span data-ttu-id="2ec4f-292">此分析检查 dehydrations 10 或更多。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-292">This analysis checks for dehydrations of 10 or more.</span></span> <span data-ttu-id="2ec4f-293">如果是这样，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能内存不足 （虚拟或物理），较高的业务流程数在等待消息，或未正确设置冻结设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-293">If so, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may be running out of memory (either virtual or physical), a high number of orchestrations are waiting on messages, or the dehydration settings are not set properly.</span></span><br /><br /> <span data-ttu-id="2ec4f-294">参考： Orchestration 冻结和在 Rehydration  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-294">Reference:  Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>|  
|<span data-ttu-id="2ec4f-295">Microsoft BizTalk Server: BizTalk 高数据库会话</span><span class="sxs-lookup"><span data-stu-id="2ec4f-295">Microsoft BizTalk Server:  BizTalk High Database Sessions</span></span>|<span data-ttu-id="2ec4f-296">此计数器都有两个可能值： 正常 (0) 或超出了阈值 (1)。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-296">This counter has two possible values: normal (0) or exceeded (1).</span></span> <span data-ttu-id="2ec4f-297">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-297">This analysis checks for a value of 1.</span></span> <span data-ttu-id="2ec4f-298">如果是这样，BizTalk 超过了允许的数据库会话数的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-298">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="2ec4f-299">此值由 BizTalk 主机限制设置中的"每个 CPU 的数据库连接"值控制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-299">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span> <span data-ttu-id="2ec4f-300">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-300">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-301">通过使用 BizTalk:Message Agent 性能对象类别下的 Database session 性能计数器，可以监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-301">You can monitor the number of active Database connections by using the Database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-302">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-302">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-303">有关详细信息，请参考 BizTalk 高数据库会话分析中本主题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-303">For more information, refer to BizTalk High Database Sessions Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-304">Microsoft BizTalk Server: BizTalk 高数据库大小</span><span class="sxs-lookup"><span data-stu-id="2ec4f-304">Microsoft BizTalk Server: BizTalk High Database Size</span></span>|<span data-ttu-id="2ec4f-305">为数据库阈值中的消息计数列出的条件之一时，此计数器将设置为值为 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-305">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="2ec4f-306">默认情况下，主机消息限制阈值的数据库中的计数设置为值为 50000，就会触发在下列情况下的限制条件：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-306">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span><br /><br /> <span data-ttu-id="2ec4f-307">的发布到工作、 状态和挂起的队列的订阅的主机的主机实例的消息总数超过了 50000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-307">-   The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span><br /><span data-ttu-id="2ec4f-308">-假脱机表或跟踪表中的消息的数量超过 500,000 消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-308">-   The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span><br /><br /> <span data-ttu-id="2ec4f-309">如果发生这种情况，请考虑将减少在数据库中的消息数的操作过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-309">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="2ec4f-310">例如，确保中的 SQL Server 作业[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正在正常运行并使用中的组中心数据库页面[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台，以确定是否将消息生成向上引起的大量的挂起的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-310">For example, ensure the SQL Server jobs in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are running without error and use the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span> <span data-ttu-id="2ec4f-311">有关详细信息，请参考 BizTalk 高数据库大小分析中本主题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-311">For more information, refer to BizTalk High Database Size Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-312">Microsoft BizTalk Server: BizTalk 高进程内消息计数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-312">Microsoft BizTalk Server:  BizTalk High In-Process Message Count</span></span>|<span data-ttu-id="2ec4f-313">此分析检查的进程内消息计数高计数器以确定是否发生这种类型的限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-313">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="2ec4f-314">如果是这样，请考虑调整"每 CPU 邮件进程内"设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-314">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="2ec4f-315">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-315">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-316">在禁用限制基于每个 CPU 进程内消息数"进程内消息每个 CPU"设置中输入的值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-316">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="2ec4f-317">"进程内消息每个 CPU"设置的默认值为 1000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-317">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="2ec4f-318">请注意，修改此值还可以影响在低延迟的消息和/或 BizTalk 资源的效率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-318">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span> <span data-ttu-id="2ec4f-319">详细信息，请参阅本主题中的 BizTalk 高进程内消息计数分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-319">For more information, refer to BizTalk High In-Process Message Count Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-320">Microsoft BizTalk Server: BizTalk 高消息传送速率</span><span class="sxs-lookup"><span data-stu-id="2ec4f-320">Microsoft BizTalk Server:  BizTalk High Message Delivery Rate</span></span>|<span data-ttu-id="2ec4f-321">此分析检查的值为 1 中的高的消息传送速率计数器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-321">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="2ec4f-322">高的消息传送速率可能引起高处理复杂性、 慢速的出站适配器或暂时的系统资源不足。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-322">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span> <span data-ttu-id="2ec4f-323">详细信息，请参阅本主题中的 BizTalk 高消息传送速率分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-323">For more information, refer to BizTalk High Message Delivery Rate Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-324">Microsoft BizTalk Server: BizTalk 高消息发布速率</span><span class="sxs-lookup"><span data-stu-id="2ec4f-324">Microsoft BizTalk Server:  BizTalk High Message Publishing Rate</span></span>|<span data-ttu-id="2ec4f-325">限制，也称为消息发布限制中的入站的主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，应用于包含的主机实例接收适配器或将消息发布到 MessageBox 数据库的业务流程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-325">Inbound host throttling, also known as message publishing throttling in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], is applied to host instances that contain receive adapters or orchestrations that publish messages to the MessageBox database.</span></span> <span data-ttu-id="2ec4f-326">此分析检查的值为 1 中发布的高消息速率计数器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-326">This analysis checks for a value of 1 in the High Message Publishing Rate counter.</span></span> <span data-ttu-id="2ec4f-327">如果发生这种情况，然后数据库无法跟上的消息的发布速率到 BizTalk MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-327">If this occurs, then the database cannot keep up with the publishing rate of messages to the BizTalk MessageBox database.</span></span><br /><br /> <span data-ttu-id="2ec4f-328">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-328">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-329">-主机限制的性能计数器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-329">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="2ec4f-330">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-330">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="2ec4f-331">消息发布限制在的设置对话框 [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-331">-   Message Publishing Throttling Settings Dialog Box at [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span></span><br /><span data-ttu-id="2ec4f-332">-什么是主机限制？在 [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-332">-   What is Host Throttling? at [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span></span>|  
|<span data-ttu-id="2ec4f-333">Microsoft BizTalk Server: BizTalk 高进程内存</span><span class="sxs-lookup"><span data-stu-id="2ec4f-333">Microsoft BizTalk Server:  BizTalk High Process Memory</span></span>|<span data-ttu-id="2ec4f-334">限制阈值设置的 BizTalk 进程内存使用量是内存的相比工作集大小和进程的总可用虚拟内存的总和，如果输入从 1 到 100 之间的值所使用百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-334">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="2ec4f-335">在指定百分比值时，将按固定的时间间隔来重新计算进程内存阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-335">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="2ec4f-336">此分析检查 1 中的高进程内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-336">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="2ec4f-337">详细信息，请参阅本主题中的到 BizTalk 高进程内存分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-337">For more information, refer to BizTalk High Process Memory Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-338">Microsoft BizTalk Server: BizTalk 高系统内存</span><span class="sxs-lookup"><span data-stu-id="2ec4f-338">Microsoft BizTalk Server:  BizTalk High System Memory</span></span>|<span data-ttu-id="2ec4f-339">BizTalk 物理内存使用情况限制阈值设置为输入相比从 1 到 100 之间的可用物理内存的值如果总量的内存消耗的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-339">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="2ec4f-340">如果输入大于 100 的值，此设置也可以在兆字节为单位的可用物理内存的总量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-340">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="2ec4f-341">输入值 0 可以禁用基于物理内存使用率的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-341">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="2ec4f-342">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-342">The default value is 0.</span></span> <span data-ttu-id="2ec4f-343">详细信息，请参阅本主题中的到 BizTalk 高的系统内存分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-343">For more information, refer to BizTalk High System Memory Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-344">Microsoft BizTalk Server: BizTalk 高线程计数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-344">Microsoft BizTalk Server:  BizTalk High Thread Count</span></span>|<span data-ttu-id="2ec4f-345">"每个 CPU 线程数"是宿主进程包括由适配器使用的线程中的线程总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-345">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="2ec4f-346">如果超出此阈值，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-346">If this threshold is exceeded, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="2ec4f-347">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-347">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="2ec4f-348">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-348">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="2ec4f-349">默认情况下，禁用基于线程限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-349">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="2ec4f-350">详细信息，请参阅本主题中的 BizTalk 高线程计数分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-350">For more information, refer to BizTalk High Thread Count Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-351">Microsoft BizTalk Server: BizTalk 主机队列长度</span><span class="sxs-lookup"><span data-stu-id="2ec4f-351">Microsoft BizTalk Server:  BizTalk Host Queue Length</span></span>|<span data-ttu-id="2ec4f-352">BizTalk 主机队列长度跟踪特定主机队列中的邮件总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-352">The BizTalk Host Queue Length tracks the total number of messages in the particular host queue.</span></span> <span data-ttu-id="2ec4f-353">可以使用长度大小 （即，BizTalk:MessageBox:HostCounters:Host 队列 – 长度） 来提供更详细的视图的正在排队内部通过显示各个主机的队列深度的消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-353">You can use length size (i.e., ‘BizTalk:MessageBox:HostCounters:Host Queue – Length’) to give a more detailed view of the number of messages being queued up internally by showing the queue depth for an individual host.</span></span> <span data-ttu-id="2ec4f-354">此计数器可确定是否遇到瓶颈特定主机。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-354">This counter can be useful in determining if a specific host is bottlenecked.</span></span> <span data-ttu-id="2ec4f-355">假定唯一主机使用的每个传输协议，这可以帮助确定潜在传输瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-355">Assuming unique hosts are used for each transport, this can be helpful in determining potential transport bottlenecks.</span></span> <span data-ttu-id="2ec4f-356">此分析检查平均队列长度大于 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-356">This analysis checks for average queue lengths greater than 1.</span></span> <span data-ttu-id="2ec4f-357">目标主机上的情况下，主机队列长度是通过聚合所有队列 (工作 Q，状态 Q 挂起 Q) 的记录计数的加权的队列长度。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-357">The Host Queue Length is a weighted Queue length by aggregating the record count of all the Queues (Work Q, State Q, Suspended Q) of the target host.</span></span><br /><br /> <span data-ttu-id="2ec4f-358">参考： BizTalk Server 2006： 管理在一个成功性能实验室[ http://go.microsoft.com/fwlink/?linkid=104152 ](http://go.microsoft.com/fwlink/?linkid=104152) **注意：**这份白皮书也是适用于 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-358">Reference: BizTalk Server 2006: Managing a Successful Performance Lab at [http://go.microsoft.com/fwlink/?linkid=104152](http://go.microsoft.com/fwlink/?linkid=104152) **Note:**  This white paper is also applicable to BizTalk Server.</span></span>|  
|<span data-ttu-id="2ec4f-359">Microsoft BizTalk Server: BizTalk 主机挂起消息队列长度</span><span class="sxs-lookup"><span data-stu-id="2ec4f-359">Microsoft BizTalk Server: BizTalk Host Suspended Messages Queue Length</span></span>|<span data-ttu-id="2ec4f-360">此计数器跟踪特定主机的挂起的消息总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-360">This counter tracks the total number of suspended messages for the particular host.</span></span> <span data-ttu-id="2ec4f-361">将挂起的消息是消息或业务流程的一个实例，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止处理因出错而系统或消息中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-361">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="2ec4f-362">通常，根据系统问题的解决办法，由系统错误导致的挂起实例是可恢复的。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-362">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="2ec4f-363">通常情况下，由于消息问题而挂起的实例不是可恢复，并且必须修复和重新提交到消息本身[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-363">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span><br /><br /> <span data-ttu-id="2ec4f-364">挂起的消息队列是一个包含工作项，为其错误或失败期间遇到处理的队列。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-364">The suspended message queue is a queue that contains work items for which an error or failure was encountered during processing.</span></span> <span data-ttu-id="2ec4f-365">挂起队列将一直存储这些消息，直到它们被纠正、重新处理或被删除。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-365">A suspended queue stores the messages until they can be corrected and reprocessed, or deleted.</span></span> <span data-ttu-id="2ec4f-366">此分析检查挂起的任何的消息匹配项。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-366">This analysis checks for any occurrence of suspended messages.</span></span> <span data-ttu-id="2ec4f-367">上升趋势可能表示严重处理错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-367">An increasing trend could indicate severe processing errors.</span></span><br /><br /> <span data-ttu-id="2ec4f-368">参考： BizTalk Server 2004： 监视和在故障排除 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-368">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>|  
|<span data-ttu-id="2ec4f-369">BizTalk Server: BizTalk 空闲业务流程</span><span class="sxs-lookup"><span data-stu-id="2ec4f-369">BizTalk Server:  BizTalk Idle Orchestrations</span></span>|<span data-ttu-id="2ec4f-370">当前以主机实例为宿主的空闲业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-370">Number of idle orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="2ec4f-371">此计数器是指业务流程，不需要进度但不是可冻结。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-371">This counter refers to orchestrations that are not making progress but are not dehydratable.</span></span> <span data-ttu-id="2ec4f-372">业务流程被阻止时，发生这种情况，可以等待接收，侦听或原子事务的延迟时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-372">This situation can occur when the orchestration is blocked, waiting for a receive, listen, or delay in an atomic transaction.</span></span> <span data-ttu-id="2ec4f-373">如果大量的非可冻结业务流程会累积，BizTalk 可能用尽内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-373">If a large number of non-dehydratable orchestrations accumulate, then BizTalk may run out of memory.</span></span><br /><br /> <span data-ttu-id="2ec4f-374">冻结是将业务流程的状态序列化到 SQL Server 数据库中的过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-374">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="2ec4f-375">Rehydration 是此过程的反向︰ 反序列化从数据库的业务流程的上次运行状态。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-375">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="2ec4f-376">冻结用于通过减少必须在内存中同时实例化的业务流程数来最大程度地降低系统资源的使用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-376">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="2ec4f-377">引擎 dehydrates 实例的保存状态，并释放的实例所需的内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-377">The engine dehydrates the instance by saving the state, and frees up the memory required by the instance.</span></span> <span data-ttu-id="2ec4f-378">通过冻结休眠业务流程实例过程中，引擎使大量的长时间运行业务流程，以同时在同一台计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-378">By dehydrating dormant orchestration instances, the engine makes it possible for a large number of long-running business processes to run concurrently on the same computer.</span></span> <span data-ttu-id="2ec4f-379">此分析检查每小时一个空闲的业务流程的上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-379">This analysis checks for an increasing trend of one idle orchestration per hour.</span></span><br /><br /> <span data-ttu-id="2ec4f-380">参考： Orchestration 冻结和在 Rehydration  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-380">Reference: Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>|  
|<span data-ttu-id="2ec4f-381">BizTalk Server： 入站 BizTalk 延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-381">BizTalk Server:  BizTalk Inbound Latency</span></span>|<span data-ttu-id="2ec4f-382">平均延迟消息引擎文档从接收适配器之前发布到 MessageBox 的时间 （毫秒）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-382">Average latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the MessageBox.</span></span> <span data-ttu-id="2ec4f-383">减少延迟是重要的 BizTalk，某些用户因此跟踪时间文档在入站适配器中的花费多少是很重要。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-383">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span> <span data-ttu-id="2ec4f-384">详细信息，请参阅本主题中的 BizTalk 入站延迟分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-384">For more information, refer to BizTalk Inbound Latency Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-385">BizTalk Server: BizTalk 消息传递延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-385">BizTalk Server:  BizTalk Message Delivery Delay</span></span>|<span data-ttu-id="2ec4f-386">这是对每个消息传递批处理 （如果要中止消息传递时适用） 的当前延迟以毫秒 (ms) 为单位。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-386">This is the current delay in milliseconds (ms) imposed on each message delivery batch (applicable if the message delivery is being throttled).</span></span> <span data-ttu-id="2ec4f-387">有关限制，延迟应用中发布或处理消息，具体取决于消息是入站或出站。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-387">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="2ec4f-388">延迟期成正比的重要程度限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-388">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="2ec4f-389">限制条件的更高严重性将启动比限制条件的低严重性再限制期。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-389">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="2ec4f-390">随着阻止条件的变化，将根据阻止机制在特定范围内延长和缩短此延迟时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-390">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="2ec4f-391">通过消息传递的延迟 (ms) 和消息发布与 BizTalk:Message 代理性能对象类别关联的延迟 (ms) 性能计数器公开当前延迟期。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-391">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-392">此分析检查消息传递延迟大于 5 秒。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-392">This analysis checks for a message delivery delay of greater than 5 seconds.</span></span> <span data-ttu-id="2ec4f-393">长消息传递延迟可能表示由于高负载而进行大量控制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-393">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="2ec4f-394">参考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-394">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>|  
|<span data-ttu-id="2ec4f-395">BizTalk Server: BizTalk 消息传递限制状态</span><span class="sxs-lookup"><span data-stu-id="2ec4f-395">BizTalk Server:  BizTalk Message Delivery Throttling State</span></span>|<span data-ttu-id="2ec4f-396">BizTalk 消息传递限制状态是之一的限制的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-396">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="2ec4f-397">它是一个标志，指示系统是否限制 （影响 XLANG 消息处理和出站传输协议） 的消息传递。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-397">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="2ec4f-398">由计数器的数值表示限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-398">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="2ec4f-399">有关详细信息，请参阅本主题中的 BizTalk 消息传递限制状态分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-399">For more information, see BizTalk Message Delivery Throttling State Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-400">BizTalk Server: BizTalk 消息发布延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-400">BizTalk Server:  BizTalk Message Publishing Delay</span></span>|<span data-ttu-id="2ec4f-401">有关限制的消息发布每个符合条件批次中插入的延迟时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-401">The delay injected in each qualifying batch for throttling the publishing of messages.</span></span> <span data-ttu-id="2ec4f-402">有关限制，延迟应用中发布或处理消息，具体取决于消息是入站或出站。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-402">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="2ec4f-403">延迟期成正比的重要程度限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-403">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="2ec4f-404">限制条件的更高严重性将启动比限制条件的低严重性再限制期。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-404">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="2ec4f-405">随着阻止条件的变化，将根据阻止机制在特定范围内延长和缩短此延迟时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-405">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="2ec4f-406">通过消息传递的延迟 (ms) 和消息发布与 BizTalk:Message 代理性能对象类别关联的延迟 (ms) 性能计数器公开当前延迟期。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-406">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-407">此分析将检查发布的大于 5 秒的延迟的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-407">This analysis checks for a message publishing delay of greater than 5 seconds.</span></span> <span data-ttu-id="2ec4f-408">长消息传递延迟可能表示由于高负载而进行大量控制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-408">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="2ec4f-409">参考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-409">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>|  
|<span data-ttu-id="2ec4f-410">BizTalk Server: BizTalk MessageBox 数据库连接失败</span><span class="sxs-lookup"><span data-stu-id="2ec4f-410">BizTalk Server:  BizTalk MessageBox Database Connection Failures</span></span>|<span data-ttu-id="2ec4f-411">此性能计数器是自主机实例启动以来失败的尝试的数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-411">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="2ec4f-412">如果出于任何原因，SQL Server 服务承载 BizTalk 数据库将变得不可用，数据库群集会将资源从活动的计算机传输到被动的计算机。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-412">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="2ec4f-413">在此故障转移过程中，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]服务实例遇到数据库连接失败，并自动重新启动以重新连接到数据库。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-413">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="2ec4f-414">采用故障转移期间传输的资源后，正在运行的数据库计算机（即前面提到的被动计算机）将开始处理数据库连接。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-414">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span> <span data-ttu-id="2ec4f-415">详细信息，请参阅本主题中的到 BizTalk MessageBox 数据库连接故障分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-415">For more information, refer to BizTalk MessageBox Database Connection Failures Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-416">BizTalk Server: BizTalk 延迟消息传送： 请求响应延迟时间</span><span class="sxs-lookup"><span data-stu-id="2ec4f-416">BizTalk Server:  BizTalk Messaging Latency:  Request Response Latency</span></span>|<span data-ttu-id="2ec4f-417">自消息引擎从适配器接收到请求文档到将响应文档返回到适配器的平均延迟时间（以毫秒计）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-417">Average latency in milliseconds from when the Messaging Engine receives a request document from the adapter until the time a response document is given back to the adapter.</span></span> <span data-ttu-id="2ec4f-418">请参阅显示延迟本主题中的测量 BizTalk 入站延迟分析图表。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-418">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="2ec4f-419">此分析假设低延迟环境，检查请求响应延迟大于 5 秒。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-419">Assuming a low latency environment, this analysis checks for a Request-Response Latency greater than 5 seconds.</span></span> <span data-ttu-id="2ec4f-420">这可能表示入站的适配器和出站适配器之间的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-420">This may indicate a processing delay between the inbound adapter and the outbound adapter.</span></span><br /><br /> <span data-ttu-id="2ec4f-421">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-421">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-422">-请求/响应消息传递在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-422">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="2ec4f-423">-BizTalk Server 2006： 在 BizTalk Server 2006 在中使用的 SOAP 适配器的可伸缩性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-423">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span>|  
|<span data-ttu-id="2ec4f-424">BizTalk Server: BizTalk 消息传送发布限制状态</span><span class="sxs-lookup"><span data-stu-id="2ec4f-424">BizTalk Server:  BizTalk Messaging Publishing Throttling State</span></span>|<span data-ttu-id="2ec4f-425">发布限制状态 BizTalk 消息是一个限制的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-425">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="2ec4f-426">它是一个标志，指示系统是否限制 （影响 XLANG 消息处理和入站传输协议） 的消息发布。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-426">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).</span></span> <span data-ttu-id="2ec4f-427">详细信息，请参阅本主题中的 BizTalk 消息传送发布限制状态分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-427">For more information, refer to BizTalk Messaging Publishing Throttling State Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-428">BizTalk Server: BizTalk 业务流程已挂起/秒</span><span class="sxs-lookup"><span data-stu-id="2ec4f-428">BizTalk Server:  BizTalk Orchestration Suspended/second</span></span>|<span data-ttu-id="2ec4f-429">将挂起的消息是消息或业务流程的一个实例，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止处理因出错而系统或消息中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-429">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="2ec4f-430">通常，根据系统问题的解决办法，由系统错误导致的挂起实例是可恢复的。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-430">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="2ec4f-431">通常情况下，由于消息问题而挂起的实例不是可恢复，并且必须修复和重新提交到消息本身[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-431">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="2ec4f-432">此分析检查任何挂起消息/业务流程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-432">This analysis checks for any suspended messages/orchestrations.</span></span><br /><br /> <span data-ttu-id="2ec4f-433">参考： BizTalk Server 2004： 监视和在故障排除 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-433">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>|  
|<span data-ttu-id="2ec4f-434">BizTalk Server: BizTalk 业务流程已完成/秒</span><span class="sxs-lookup"><span data-stu-id="2ec4f-434">BizTalk Server:  BizTalk Orchestrations Completed/second</span></span>|<span data-ttu-id="2ec4f-435">这是已完成的 BizTalk 业务流程数每秒。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-435">This is the number of BizTalk orchestrations that have completed per second.</span></span> <span data-ttu-id="2ec4f-436">这是处理 BizTalk 多少吞吐量很好的指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-436">This is a good indicator as to how much throughput BizTalk is processing.</span></span> <span data-ttu-id="2ec4f-437">此分析提供仅限统计信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-437">This analysis provides statistics only.</span></span><br /><br /> <span data-ttu-id="2ec4f-438">参考： BizTalk Server 2006： 在 BizTalk Server 2006 中使用的 SOAP 适配器的可伸缩性案例研究</span><span class="sxs-lookup"><span data-stu-id="2ec4f-438">Reference:  BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006</span></span> <br />[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)|  
|<span data-ttu-id="2ec4f-439">BizTalk Server: BizTalk 业务流程丢弃</span><span class="sxs-lookup"><span data-stu-id="2ec4f-439">BizTalk Server:  BizTalk Orchestrations Discarded</span></span>|<span data-ttu-id="2ec4f-440">自从主机实例启动以来，内存中被丢弃的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-440">Number of orchestration instances discarded from memory since the host instance started.</span></span> <span data-ttu-id="2ec4f-441">如果引擎未能持久化某个业务流程的状态，则会将其丢弃。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-441">An orchestration can be discarded if the engine fails to persist its state.</span></span> <span data-ttu-id="2ec4f-442">此分析将检查有任何丢弃消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-442">This analysis checks for any discarded messages.</span></span><br /><br /> <span data-ttu-id="2ec4f-443">参考： BizTalk 核心引擎博客</span><span class="sxs-lookup"><span data-stu-id="2ec4f-443">Reference:  BizTalk Core Engine's WebLog</span></span><br />[http://go.microsoft.com/fwlink/?linkid=108775](http://go.microsoft.com/fwlink/?linkid=108775)|  
|<span data-ttu-id="2ec4f-444">BizTalk Server: BizTalk 业务流程驻留在内存中</span><span class="sxs-lookup"><span data-stu-id="2ec4f-444">BizTalk Server:  BizTalk Orchestrations Resident in Memory</span></span>|<span data-ttu-id="2ec4f-445">当前以主机实例为宿主的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-445">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="2ec4f-446">此分析检查在驻留在内存和是否超过 50%的驻留在内存中的业务流程不是可冻结业务流程中上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-446">This analysis checks for an increasing trend in orchestrations resident in memory and whether more than 50 percent of the orchestrations resident in memory are not dehydratable.</span></span> <span data-ttu-id="2ec4f-447">有关详细信息，请参阅 BizTalk 业务流程驻留在内存分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-447">For more information, refer to BizTalk Orchestrations Resident in Memory Analysis.</span></span>|  
|<span data-ttu-id="2ec4f-448">BizTalk Server: BizTalk 出站适配器延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-448">BizTalk Server:  BizTalk Outbound Adapter Latency</span></span>|<span data-ttu-id="2ec4f-449">这是从当适配器文档从获取消息的引擎适配器发送的时间之前的秒数的平均延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-449">This is the average latency in seconds from when the adapter gets a document from the messaging engine until the time it is sent by the adapter.</span></span> <span data-ttu-id="2ec4f-450">请参阅显示延迟本主题中的测量 BizTalk 入站延迟分析图表。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-450">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="2ec4f-451">假设低延迟环境，这种分析检查延迟大于 5 秒的出站适配器中的平均值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-451">Assuming a low latency environment, this analysis checks for latency in the outbound adapter of greater than 5 seconds on average.</span></span> <span data-ttu-id="2ec4f-452">这可能表示通过此主机实例中的出站适配器的消息传输的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-452">This may indicate a processing delay in the transport of messages through outbound adapters in this host instance.</span></span> <span data-ttu-id="2ec4f-453">如果此主机实例中存在多个出站适配器，请考虑将它们分散到其自己的主机，以确定哪个出站的适配器的高延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-453">If multiple outbound adapters exist in this host instance, then consider separating them into their own hosts to determine which outbound adapter has high latency.</span></span><br /><br /> <span data-ttu-id="2ec4f-454">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-454">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-455">-请求/响应消息传递在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-455">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="2ec4f-456">-BizTalk Server 2006： 在 BizTalk Server 2006 在中使用的 SOAP 适配器的可伸缩性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-456">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span><br /><span data-ttu-id="2ec4f-457">的在 BizTalk 层中发现瓶颈 [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-457">-   Identifying Bottlenecks in the BizTalk Tier at [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span></span><br /><span data-ttu-id="2ec4f-458">-BizTalk Server 2004： 性能优化的低延迟的消息传送在 [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-458">-   BizTalk Server 2004: Performance Tuning for Low Latency Messaging at [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span></span>|  
|<span data-ttu-id="2ec4f-459">BizTalk Server: BizTalk 挂起消息</span><span class="sxs-lookup"><span data-stu-id="2ec4f-459">BizTalk Server:  BizTalk Pending Messages</span></span>|<span data-ttu-id="2ec4f-460">接收到 MessageBox 接收到未被确认的消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-460">The number of received messages that have not been acknowledged as received to the MessageBox.</span></span> <span data-ttu-id="2ec4f-461">挂起的消息的消息，已拉入内存传递到 XLANG 业务流程，但尚未被处理。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-461">Pending messages are messages that have been pulled into memory and delivered to the XLANG orchestration, but have not yet been processed.</span></span> <span data-ttu-id="2ec4f-462">没有任何这种情况下如何处理数据丢失。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-462">This circumstance has nothing to do with data loss.</span></span>  <span data-ttu-id="2ec4f-463">将一条消息传送到业务流程是一个多步骤过程，只需驻留在数据库中的假脱机表中的消息的实例。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-463">Delivering a message to an orchestration is a multi-step process and is simply an instance of the message residing in the spool table in the database.</span></span> <span data-ttu-id="2ec4f-464">这些挂起消息计数为处理这些消息;因此，具有大量它们在内存中，这种情况可能会导致内存限制系统上。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-464">These pending messages count as in-process messages; therefore, having a large number of them in memory could cause memory throttling on the system.</span></span> <span data-ttu-id="2ec4f-465">调整的内部消息队列大小设置无法帮助控制的挂起消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-465">Adjusting the Internal Message Queue Size setting could help with controlling the number of pending messages.</span></span> <span data-ttu-id="2ec4f-466">每个 CPU 进程内消息设置产生影响限制将时调用了大量的挂起消息发生时。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-466">The In-Process Messages Per CPU setting has an impact on when throttling will invoke when a high number of pending messages occurs.</span></span> <span data-ttu-id="2ec4f-467">这些设置位于 BizTalk 管理控制台中的主机属性。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-467">These setting are found in the Host properties in the BizTalk Administration Console.</span></span> <span data-ttu-id="2ec4f-468">此分析检查此计数器仅显示统计。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-468">This analysis checks only shows statistics for this counter.</span></span><br /><br /> <span data-ttu-id="2ec4f-469">在参考： 业务流程引擎性能计数器 [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-469">Reference: Orchestration Engine Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span></span>|  
|<span data-ttu-id="2ec4f-470">BizTalk Server: BizTalk 持久性点/秒</span><span class="sxs-lookup"><span data-stu-id="2ec4f-470">BizTalk Server:  BizTalk Persistence Points/second</span></span>|<span data-ttu-id="2ec4f-471">平均每秒持久化业务流程实例的次数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-471">Average number of orchestration instances persisted per second.</span></span> <span data-ttu-id="2ec4f-472">业务流程引擎保存在不同的时间点正在运行的业务流程实例的状态。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-472">The orchestration engine saves the state of a running orchestration instance at various points.</span></span> <span data-ttu-id="2ec4f-473">如果它需要 rehydrate 业务流程实例、 从受控关机，启动或从意外关闭恢复，它将从最后一个持久点运行业务流程实例。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-473">If it needs to rehydrate the orchestration instance, start up from a controlled shutdown, or recover from an unexpected shutdown, it will run the orchestration instance from the last persistence point.</span></span> <span data-ttu-id="2ec4f-474">才能持久地保存业务流程实例，所有对象直接或间接指您的业务流程的实例 （通过其他对象一样） 必须是可序列化。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-474">In order to persist an orchestration instance, all object instances that your orchestration refers to directly or indirectly (as through other objects) must be serializable.</span></span> <span data-ttu-id="2ec4f-475">随着消息持久性频率 （需要持久保留数据的时间数） 将增加，总体性能下降。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-475">As message-persistence frequency (the number of times that data needs to be persisted) increases, overall performance decreases.</span></span> <span data-ttu-id="2ec4f-476">实际上，每个持久性点是到数据库的往返行程，因此只要有可能减少通过避免或整合持久性点的持久性点的频率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-476">In effect, each persistence point is a round trip to the database, so whenever possible reduce the frequency of persistence points by avoiding or consolidating persistence points.</span></span> <span data-ttu-id="2ec4f-477">请参阅下面有关持久性点发生时的详细信息的引用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-477">See the references below for more information regarding when persistence points occur.</span></span> <span data-ttu-id="2ec4f-478">此分析检查以 10 个以上持久性点每秒平均。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-478">This analysis checks for more than 10 persistence points per second on average.</span></span> <span data-ttu-id="2ec4f-479">这是一个常规的起始点。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-479">This is a general starting point.</span></span><br /><br /> <span data-ttu-id="2ec4f-480">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-480">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-481">的在业务流程中持久性 [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-481">-   Persistence in Orchestrations at [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span></span><br /><span data-ttu-id="2ec4f-482">-持久性和在业务流程引擎 [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-482">-   Persistence and the Orchestration Engine at [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span></span>|  
|<span data-ttu-id="2ec4f-483">BizTalk Server: BizTalk 专用字节数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-483">BizTalk Server:  BizTalk Private Bytes</span></span>|<span data-ttu-id="2ec4f-484">这是分配的专用内存的主机实例和类似于"\Process （\*） \Private 字节数"性能计数器的兆字节。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-484">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="2ec4f-485">此分析将决定是否任何主机实例消耗的系统内存的大小，并在主机实例是否在内存消耗，随着时间的推移增加。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-485">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-486">有关详细信息的本主题中，请参阅 BizTalk 专用字节分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-486">Refer to BizTalk Private Bytes Analysis in this topic for more information.</span></span>|  
|<span data-ttu-id="2ec4f-487">BizTalk Server: BizTalk 假脱机表大小</span><span class="sxs-lookup"><span data-stu-id="2ec4f-487">BizTalk Server:  BizTalk Spool Table Size</span></span>|<span data-ttu-id="2ec4f-488">MessageBox 假脱机表包含在系统中的每个消息的记录 (活动或者正等着进行"垃圾回收")。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-488">The MessageBox spool table contains a record for each message in the system (active or waiting to be "garbage collected").</span></span> <span data-ttu-id="2ec4f-489">监视此表中的行数和系统负载增加可以轻松地查找最大可持续吞吐量时，每秒接收的消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-489">Monitoring the number of rows in this table and the number of messages received per second while increasing system load provides an easy way to find the maximum sustainable throughput.</span></span> <span data-ttu-id="2ec4f-490">只需增加输入的负载，直至任一 1） 假脱机表开始无限增加或 2） 的每个第二个 plateaus、 准，并且该父级是最大可持续吞吐量接收的消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-490">Simply increase the input load until either 1) the spool table starts to grow indefinitely or 2) the number of messages received per second plateaus, whichever comes first, and that is your maximum sustainable throughput.</span></span> <span data-ttu-id="2ec4f-491">总起来说，而不考虑其他指示符，此度量值将为你提供快速轻松地以评估是否或不在输出过度你的系统。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-491">In summary, regardless of other indicators, this measure will give you a quick and easy way to assess whether your system is being overdriven or not.</span></span> <span data-ttu-id="2ec4f-492">如果 BizTalk 假脱机表大小为 on 上升趋势，然后限制由于失衡的消息传送速率 （输入的率超过输出率） 或者由于数据库大小限制可能会发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-492">When the BizTalk spool tables size is on an increasing trend, then throttling due to imbalanced message delivery rate (input rate exceeds output rate) or throttling due to Database size may occur.</span></span> <span data-ttu-id="2ec4f-493">此分析检查上升趋势 BizTalk 假脱机表大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-493">This analysis checks for an increasing trend in the BizTalk Spool Table Size.</span></span><br /><br /> <span data-ttu-id="2ec4f-494">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-494">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-495">-了解 BizTalk Server 2004 SP1 吞吐量和容量 [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-495">-   Understanding BizTalk Server 2004 SP1 Throughput and Capacity at [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span></span><br /><span data-ttu-id="2ec4f-496">-在可持续的负载测试 [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-496">-   Sustainable Load Test at [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span></span><br /><span data-ttu-id="2ec4f-497">-建议在测试时引擎的性能 [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-497">-   Recommendations When Testing Engine Performance at [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span></span>|  
|<span data-ttu-id="2ec4f-498">BizTalk Server: BizTalk 跟踪数据的大小</span><span class="sxs-lookup"><span data-stu-id="2ec4f-498">BizTalk Server:  BizTalk Tracking Data Size</span></span>|<span data-ttu-id="2ec4f-499">BizTalk Server 处理越来越多的数据，你的系统上，BizTalk 跟踪数据库 (BizTalkDTADb) 就会继续增大。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-499">As BizTalk Server processes more and more data on your system, the BizTalk Tracking database (BizTalkDTADb) continues to grow in size.</span></span> <span data-ttu-id="2ec4f-500">不受控制的增长将会降低系统性能，并可能导致跟踪数据传送服务 (TDDS) 出错。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-500">Unchecked growth decreases system performance and may generate errors in the Tracking Data Delivery Service (TDDS).</span></span> <span data-ttu-id="2ec4f-501">除了一般的跟踪数据之外，跟踪的消息也会在 MessageBox 数据库中累积，导致磁盘性能下降。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-501">In addition to general tracking data, tracked messages can also accumulate in the MessageBox database, causing poor disk performance.</span></span> <span data-ttu-id="2ec4f-502">此分析检查上升趋势超过 5 MB 的每小时跟踪中的数据大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-502">This analysis checks for an increasing trend of more than 5 MB’s per hour in the tracking data size.</span></span><br /><br /> <span data-ttu-id="2ec4f-503">参考：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-503">Reference:</span></span><br /><br /> <span data-ttu-id="2ec4f-504">存档和清除跟踪数据库在 BizTalk  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-504">Archiving and Purging the BizTalk Tracking Database at  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span></span>|  
|<span data-ttu-id="2ec4f-505">BizTalk Server: BizTalk 事务作用域已中止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-505">BizTalk Server:  BizTalk Transactional Scopes Aborted</span></span>|<span data-ttu-id="2ec4f-506">这是自主机实例启动后已中止的长时间运行或原子作用域数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-506">This is the number of long-running or atomic scopes that have been aborted since the host instance started.</span></span> <span data-ttu-id="2ec4f-507">事务范围中止是发生在事务范围内业务流程失败。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-507">A transactional scope abort is a failure that occurs in a transaction scope within an orchestration.</span></span> <span data-ttu-id="2ec4f-508">请务必了解，都会调用作用域的补偿处理程序，仅当作用域已成功完成，但然后必须是撤消，因为确定周边范围 （由于更高版本中的过程可能会发生的故障） 而中止。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-508">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="2ec4f-509">此外，如果事务中止发生的状态没有"自动"回滚。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-509">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="2ec4f-510">你可以实现这一目的以编程方式通过异常和补偿处理程序。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-510">You can achieve this outcome programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="2ec4f-511">事务范围中止不应该通常发生在生产环境中;因此，此分析将检查任何中止的事务作用域的匹配项。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-511">Transactional scope aborts should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="2ec4f-512">参考：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-512">Reference:</span></span><br /><br /> <span data-ttu-id="2ec4f-513">在 BizTalk Server 2004 跨事务 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-513">Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>|  
|<span data-ttu-id="2ec4f-514">BizTalk Server: BizTalk 事务作用域补偿</span><span class="sxs-lookup"><span data-stu-id="2ec4f-514">BizTalk Server:  BizTalk Transactional Scopes Compensated</span></span>|<span data-ttu-id="2ec4f-515">补偿可视为已成功提交到的某些错误条件的响应中的工作的逻辑撤消。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-515">Compensation can be thought of as a logical undo of the work that has been successfully committed in response to some error condition.</span></span> <span data-ttu-id="2ec4f-516">请务必了解，都会调用作用域的补偿处理程序，仅当作用域已成功完成，但然后必须是撤消，因为确定周边范围 （由于更高版本中的过程可能会发生的故障） 而中止。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-516">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="2ec4f-517">此外，如果事务中止发生的状态没有"自动"回滚。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-517">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="2ec4f-518">这种回滚可以通过编写异常处理程序和补偿处理程序来实现。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-518">You can achieve this programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="2ec4f-519">事务范围补偿不应该通常发生在生产环境中;因此，此分析将检查任何中止的事务作用域的匹配项。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-519">Transactional scope compensations should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="2ec4f-520">在 BizTalk Server 2004 跨的引用： 事务 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-520">Reference: Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>|  
|<span data-ttu-id="2ec4f-521">BizTalk Server: BizTalk 虚拟字节</span><span class="sxs-lookup"><span data-stu-id="2ec4f-521">BizTalk Server:  BizTalk Virtual Bytes</span></span>|<span data-ttu-id="2ec4f-522">这是适用于主机实例的虚拟内存保留的兆字节。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-522">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="2ec4f-523">此分析将决定是否任何主机实例正在消耗大量的系统内存，且是否随时间推移的内存消耗中增加的主机实例。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-523">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-524">详细信息，请参阅本主题中的 BizTalk 虚拟字节分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-524">For more information, refer to BizTalk Virtual Bytes Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-525">BizTalk Server: BizTalk 消息代理数据库会话限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-525">BizTalk Server:  BizTalk Message Agent Database Session Throttling</span></span>|<span data-ttu-id="2ec4f-526">这是到 MessageBox 相比限制设置其各自 BizTalk 打开数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-526">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="2ec4f-527">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-527">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-528">详细信息，请参阅本主题中的为 BizTalk 消息代理数据库会话限制分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-528">For more information, refer to BizTalk Message Agent Database Session Throttling Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-529">BizTalk Server: BizTalk 消息代理数据库会话限制阈值</span><span class="sxs-lookup"><span data-stu-id="2ec4f-529">BizTalk Server:  BizTalk Message Agent Database Session Throttling Threshold</span></span>|<span data-ttu-id="2ec4f-530">这是到 MessageBox 的打开的数据库连接数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-530">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="2ec4f-531">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-531">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-532">详细信息，请参阅本主题中的为 BizTalk 消息代理数据库会话限制阈值分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-532">For more information, refer to BizTalk Message Agent Database Session Throttling Threshold Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-533">BizTalk Server: BizTalk 消息代理进程内消息计数限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-533">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling</span></span>|<span data-ttu-id="2ec4f-534">这是处理服务类的并发消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-534">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="2ec4f-535">在主机限制设置的"进程内消息每个 CPU"设置是最大的未处理的消息传递到的终结点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-535">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="2ec4f-536">有关详细信息，请参阅本主题中的 BizTalk 消息代理进程内消息计数限制分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-536">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-537">BizTalk Server: BizTalk 消息代理进程内消息计数限制阈值</span><span class="sxs-lookup"><span data-stu-id="2ec4f-537">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling Threshold</span></span>|<span data-ttu-id="2ec4f-538">这是处理服务类的并发消息数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-538">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="2ec4f-539">在主机限制设置的"进程内消息每个 CPU"设置是最大的未处理的消息传递到的终结点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-539">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="2ec4f-540">有关详细信息，请参阅 BizTalk 消息代理进程内消息计数限制阈值分析本主题中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-540">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Threshold Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-541">BizTalk Server: BizTalk 消息代理进程内存使用率 (MB) 限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-541">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling</span></span>|<span data-ttu-id="2ec4f-542">这是当前进程 (MB) 的内存使用率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-542">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="2ec4f-543">BizTalk 进程内存限制可能要发布的批有陡峭的内存需求，或如果线程过多所处理的消息时发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-543">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="2ec4f-544">有关详细信息，请参阅本主题中的 BizTalk 消息代理进程内存使用率 (MB) 限制分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-544">For more information, refer to BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-545">限制阈值的 BizTalk Server: BizTalk 消息代理进程内存使用率 (MB)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-545">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling Threshold</span></span>|<span data-ttu-id="2ec4f-546">这是当前进程 (MB) 的内存使用量的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-546">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="2ec4f-547">可能根据实际的此过程，并且其内存消耗模式的可用内存量动态调整阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-547">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="2ec4f-548">BizTalk 进程内存限制可能要发布的批有陡峭的内存需求，或如果线程过多所处理的消息时发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-548">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="2ec4f-549">有关详细信息，请参阅 BizTalk 消息代理进程内存使用率 (MB) 限制阈值分析本主题中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-549">For more information, refer to BizTalk Message Agent Process memory usage (MB) Throttling Threshold Analysis in this topic.</span></span>|  
|<span data-ttu-id="2ec4f-550">BizTalk Server: BizTalk 消息代理线程计数限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-550">BizTalk Server:  BizTalk Message Agent Thread Count Throttling</span></span>|<span data-ttu-id="2ec4f-551">BizTalk 进程中线程的总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-551">The total number of threads in the BizTalk process.</span></span> <span data-ttu-id="2ec4f-552">"每个 CPU 线程数"是宿主进程包括由适配器使用的线程中的线程总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-552">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="2ec4f-553">如果超过此阈值，则 BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-553">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="2ec4f-554">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-554">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="2ec4f-555">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-555">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="2ec4f-556">默认情况下，禁用基于线程限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-556">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="2ec4f-557">此分析将检查是否 BizTalk 线程计数大于 80%的限制阈值的值，该值指示可能的限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-557">This analysis checks whether the BizTalk Thread count is greater than 80 percent of the throttling threshold value indicating a throttling condition is likely.</span></span><br /><br /> <span data-ttu-id="2ec4f-558">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-558">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-559">-主机限制的性能计数器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-559">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="2ec4f-560">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-560">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="2ec4f-561">-如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-561">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="2ec4f-562">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-562">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="2ec4f-563">-线程，数据库会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-563">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>|  
|<span data-ttu-id="2ec4f-564">BizTalk Server: BizTalk 消息代理线程计数限制阈值</span><span class="sxs-lookup"><span data-stu-id="2ec4f-564">BizTalk Server:  BizTalk Message Agent Thread Count Throttling Threshold</span></span>|<span data-ttu-id="2ec4f-565">这是当前进程中的线程的总数的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-565">This is the current threshold for the total number of threads in the process.</span></span> <span data-ttu-id="2ec4f-566">"每个 CPU 线程数"是宿主进程包括由适配器使用的线程中的线程总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-566">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="2ec4f-567">如果超过此阈值，则 BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-567">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="2ec4f-568">在高负载可能导致大量的线程创建的情况下，应启用基于线程的限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-568">Thread-based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="2ec4f-569">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-569">This parameter affects both inbound and outbound throttling.</span></span><br /><br /> <span data-ttu-id="2ec4f-570">此分析检查是否将此限制设置设置为非默认值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-570">This analysis checks whether this throttling setting is set to a non-default value.</span></span> <span data-ttu-id="2ec4f-571">默认情况下，禁用基于线程限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-571">Thread based throttling is disabled by default.</span></span><br /><br /> <span data-ttu-id="2ec4f-572">引用：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-572">References:</span></span><br /><br /> <span data-ttu-id="2ec4f-573">-主机限制的性能计数器，在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-573">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="2ec4f-574">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-574">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="2ec4f-575">-如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-575">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="2ec4f-576">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-576">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="2ec4f-577">-线程，数据库会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-577">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>|  
  
## <a name="logicalphysical-disk-readwrite-latency-analysis"></a><span data-ttu-id="2ec4f-578">逻辑/物理磁盘读取/写入延迟分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-578">Logical/Physical Disk Read/Write Latency Analysis</span></span>  
 <span data-ttu-id="2ec4f-579">Windows 检测磁盘性能瓶颈的最可靠方法是通过测量其响应时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-579">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="2ec4f-580">如果响应时间大于.025 （25 毫秒为单位），就是一个保守的阈值，然后可能发生明显减慢速度和影响用户的性能问题。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-580">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span>  
  
 <span data-ttu-id="2ec4f-581">不佳的磁盘延迟的常见原因是磁盘碎片，性能缓存，在饱和 SAN，和太多的磁盘上的负载。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-581">Common causes of poor disk latency are disk fragmentation, performance cache, an over saturated SAN, and too much load on the disk.</span></span> <span data-ttu-id="2ec4f-582">使用 SPA 工具来帮助确定前的文件和使用的磁盘的进程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-582">Use the SPA tool to help identify the top files and processes using the disk.</span></span> <span data-ttu-id="2ec4f-583">也检查"过程 IO Data Operations/sec"和"过程 IO 其他 Operations/sec"以查看哪些进程消耗最多磁盘我 / O 的</span><span class="sxs-lookup"><span data-stu-id="2ec4f-583">Also check the “Process IO Data Operations/sec” and “Process IO Other Operations/sec” to see which processes are consuming the most disk I/O’s.</span></span> <span data-ttu-id="2ec4f-584">请记住，性能监视器计数器不能指定涉及哪些文件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-584">Keep in mind that performance monitor counters are unable to specify which files are involved.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-585">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-585">References</span></span>  
  
-   <span data-ttu-id="2ec4f-586">排除了在磁盘密集型问题 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-586">Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>  
  
-   <span data-ttu-id="2ec4f-587">如何识别磁盘性能瓶颈使用在 Microsoft 服务器性能审查程序 (SPA) 工具 [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-587">How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span></span>  
  
-   <span data-ttu-id="2ec4f-588">下载 Microsoft 服务性能审查程序 (SPA) 在详细信息： [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-588">Download Details for Microsoft Service Performance Advisor (SPA) at: [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span></span>  
  
## <a name="logical-disk-transferssec"></a><span data-ttu-id="2ec4f-589">逻辑磁盘传输/次数/秒</span><span class="sxs-lookup"><span data-stu-id="2ec4f-589">Logical Disk Transfers/sec</span></span>  
 <span data-ttu-id="2ec4f-590">"Disk Transfers/sec"是读取的速率和写入磁盘上的操作。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-590">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="2ec4f-591">虽然磁盘传输并不是直接关联磁盘我 / O，它们请告知我们正在执行多少磁盘操作。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-591">While disk transfers are not a direct correlation to disk I/O's, they do tell us how many disk operations are occurring.</span></span> <span data-ttu-id="2ec4f-592">如果你的平均顺序我 / O 的和随机我 / O，则你最终会得到约为 80 个我 / O 每秒作为常规的经验法则。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-592">If you average out sequential I/O’s and random I/O's, then you end up with about 80 I/O's per second as a general rule of thumb.</span></span> <span data-ttu-id="2ec4f-593">因此，我们应该期望 SAN 驱动器来执行多个 80 我/O 每下的第二个时加载。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-593">Therefore, we should expect a SAN drive to perform more than 80 I/O's per second when under load.</span></span> <span data-ttu-id="2ec4f-594">此分析检查以查看是否有任何逻辑磁盘的阈值展示较差的响应时间 （大于 25 秒 I/O 操作的响应时间）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-594">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="2ec4f-595">如果是这样，我们应该知道每秒的时间来将达到或超过 80 个磁盘传输。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-595">If this is true, then we should expect the disk transfers per second to be at or above 80.</span></span> <span data-ttu-id="2ec4f-596">如果没有，则磁盘体系结构需要进行调查。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-596">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="2ec4f-597">不佳的磁盘 I/O 的最常见原因是重载 SAN – 这意味着多个 LUN 正在使用小的物理磁盘阵列的位置的条件上的逻辑单元号 (LUN)。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-597">The most common cause of poor disk I/O is logical unit number (LUN) overloading on the SAN – meaning the condition where more than one LUN is using the small physical disk array.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="2ec4f-598">參考</span><span class="sxs-lookup"><span data-stu-id="2ec4f-598">Reference</span></span>  
 <span data-ttu-id="2ec4f-599">NT 服务器和磁盘子系统性能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-599">NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>  
  
## <a name="available-memory-analysis"></a><span data-ttu-id="2ec4f-600">可用内存分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-600">Available Memory Analysis</span></span>  
 <span data-ttu-id="2ec4f-601">"Available Mbytes"是可用兆字节为单位的计算机上运行的进程的物理内存量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-601">“Available Mbytes” is the amount of physical memory available to processes running on the computer, in megabytes.</span></span> <span data-ttu-id="2ec4f-602">虚拟内存管理器不断调整用在物理内存和磁盘上维护最小为操作系统和进程的可用字节数的空间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-602">The Virtual Memory Manager continually adjusts the space used in physical memory and on disk to maintain a minimum number of available bytes for the operating system and processes.</span></span> <span data-ttu-id="2ec4f-603">当可用字节数不多、 虚拟内存管理器会让进程工作集的增长或使它们通过删除每个新页面添加一个旧页稳定。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-603">When available bytes are plentiful, the Virtual Memory Manager lets the working sets of processes grow, or keeps them stable by removing an old page for each new page added.</span></span> <span data-ttu-id="2ec4f-604">几个可用字节时，虚拟内存管理器必须 trim 要维护的最低要求的进程的工作集。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-604">When available bytes are few, the Virtual Memory Manager must trim the working sets of processes to maintain the minimum required.</span></span>  
  
 <span data-ttu-id="2ec4f-605">此分析将检查以确定总可用内存是否不足 – 10%可用处出现警告和在 5%可用的关键。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-605">This analysis checks to see whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="2ec4f-606">下降趋势的 10 MB 的每小时检测到，指示潜在的即将到来的内存不足情况时，警告也会得到通知。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-606">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, indicating a potential upcoming memory condition.</span></span> <span data-ttu-id="2ec4f-607">物理内存不足可能导致增加特权模式下 CPU 和系统延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-607">Low physical memory can cause increased privileged mode CPU and system delays.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-608">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-608">References</span></span>  
  
-   <span data-ttu-id="2ec4f-609">在检测内存瓶颈 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-609">Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>  
  
-   <span data-ttu-id="2ec4f-610">排除了在内存密集型问题 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-610">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  
  
## <a name="memory-leak-detection-analysis"></a><span data-ttu-id="2ec4f-611">内存泄漏检测分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-611">Memory Leak Detection Analysis</span></span>  
 <span data-ttu-id="2ec4f-612">此分析将决定是否任何进程正在消耗大量的系统的内存，且是否在内存消耗，随着时间的推移增加过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-612">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-613">使用大量的内存的进程没什么关系，只要该过程将返回到系统内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-613">A process consuming large portions of memory is okay as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="2ec4f-614">查找增加图表的趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-614">Look for increasing trends in the chart.</span></span> <span data-ttu-id="2ec4f-615">上升趋势长的一段时间内无法指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-615">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="2ec4f-616">专用字节数是内存的当前大小 （字节），此进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-616">Private Bytes is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="2ec4f-617">此分析检查 10 MB 的每小时和 5 MB 的每小时增加趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-617">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="2ec4f-618">可用内存分析与相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-618">Use this analysis in correlation with the Available Memory analysis.</span></span>  
  
 <span data-ttu-id="2ec4f-619">此外，请注意，新启动的进程将最初显示为内存泄漏时只需正常启动行为。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-619">Also, keep in mind that newly started processes will initially appear as a memory leak when it is simply normal startup behavior.</span></span> <span data-ttu-id="2ec4f-620">进程继续占用内存并长的一段时间，不会释放内存时发生内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-620">A memory leak occurs when a process continues to consume memory and does not release memory over a long period of time.</span></span>  
  
 <span data-ttu-id="2ec4f-621">如果您怀疑存在内存泄漏条件，然后安装并使用调试诊断工具。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-621">If you suspect a memory leak condition, then install and use the Debug Diag tool.</span></span> <span data-ttu-id="2ec4f-622">调试诊断工具的详细信息，请参阅引用部分。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-622">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="2ec4f-623">參考</span><span class="sxs-lookup"><span data-stu-id="2ec4f-623">Reference</span></span>  
 <span data-ttu-id="2ec4f-624">调试诊断工具在的 1.1 版 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-624">Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>  
  
## <a name="memory-pagessec-analysis"></a><span data-ttu-id="2ec4f-625">内存 Pages/sec 分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-625">Memory Pages/sec Analysis</span></span>  
 <span data-ttu-id="2ec4f-626">此分析检查"页/秒"是否为高。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-626">This analysis checks to see whether the “Pages/sec” is high.</span></span> <span data-ttu-id="2ec4f-627">如果高，然后系统可能内存不足尝试进行分页到磁盘的内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-627">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="2ec4f-628">"页/秒"是从读取或写入磁盘为解决强制分页错误页的速率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-628">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="2ec4f-629">此计数器是导致系统范围延迟的错误种类的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-629">This counter is a primary indicator of the kinds of faults that cause system-wide delays.</span></span>  <span data-ttu-id="2ec4f-630">它是"Memory\Pages Input/sec"和"Memory\Pages Output/sec"的总和。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-630">It is the sum of “Memory\Pages Input/sec” and “Memory\Pages Output/sec”.</span></span> <span data-ttu-id="2ec4f-631">则将计页数，因此它可以与其他页面，例如"Memory\Page Faults/sec"的计数进行比较。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-631">It is counted in numbers of pages, so it can be compared to other counts of pages, such as “Memory\Page Faults/sec”.</span></span>  
  
 <span data-ttu-id="2ec4f-632">此计数器始终应低于 1,000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-632">This counter should always be below 1,000.</span></span> <span data-ttu-id="2ec4f-633">此分析检查超过 1,000 个的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-633">This analysis checks for values above 1,000.</span></span> <span data-ttu-id="2ec4f-634">可用内存分析和内存泄漏检测分析与相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-634">Use this analysis in correlation with Available Memory Analysis and Memory Leak Detection analysis.</span></span> <span data-ttu-id="2ec4f-635">如果所有分析在同一时间都引发警报，这可能表示系统内存不足。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-635">If all analyses are throwing alerts at the same time, then this may indicate the system is running out of memory.</span></span> <span data-ttu-id="2ec4f-636">请按照本主题中的其他信息有关内存泄漏检测分析中所述的分析步骤。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-636">Follow analysis steps mentioned in Additional Information Regarding Memory Leak Detection analysis in this topic.</span></span>  
  
### <a name="reference"></a><span data-ttu-id="2ec4f-637">參考</span><span class="sxs-lookup"><span data-stu-id="2ec4f-637">Reference</span></span>  
 <span data-ttu-id="2ec4f-638">排除了在内存密集型问题 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-638">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  
  
## <a name="memory-system-cache-resident-bytes-analysis"></a><span data-ttu-id="2ec4f-639">内存系统缓存驻留字节数分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-639">Memory System Cache Resident Bytes Analysis</span></span>  
 <span data-ttu-id="2ec4f-640">"系统缓存驻留字节数"是的大小，以字节为单位，在文件系统缓存中的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-640">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="2ec4f-641">此值只包括当前物理页面，并且不包括任何当前未驻留的虚拟内存页面。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-641">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="2ec4f-642">它就是显示在任务管理器中的系统缓存值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-642">It does equal the System Cache value shown in Task Manager.</span></span> <span data-ttu-id="2ec4f-643">因此，此值可能小于的实际使用的文件系统缓存中的虚拟内存量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-643">As a result, this value may be smaller than the actual amount of virtual memory in use by the file system cache.</span></span> <span data-ttu-id="2ec4f-644">此值是一个组件的"内存\\\System 代码驻留字节数"，它表示所有当前正在物理内存的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-644">This value is a component of “Memory\\\System Code Resident Bytes”, which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="2ec4f-645">此计数器显示上次观测的值仅;它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-645">This counter displays the last observed value only; it is not an average.</span></span>  
  
 <span data-ttu-id="2ec4f-646">此分析检查上升趋势的 10 MB 的每小时。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-646">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="2ec4f-647">承受负载时，服务器可能使用的系统缓存，以便缓存如磁盘 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-647">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="2ec4f-648">将相关联时使用与过程 IO Data Operations/sec 和进程 IO 其他操作数/秒分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-648">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses.</span></span>  
  
## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a><span data-ttu-id="2ec4f-649">处理器利用率分析和进程过多的处理器使用</span><span class="sxs-lookup"><span data-stu-id="2ec4f-649">Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>  
 <span data-ttu-id="2ec4f-650">"%Processor Time"是处理器执行非闲置线程所花的运行时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-650">“% Processor Time” is the percentage of elapsed time that the processor spends to execute a non-idle thread.</span></span> <span data-ttu-id="2ec4f-651">它是通过测量采样间隔期间，空闲线程处于活动状态的持续时间然后时间然后减去间隔持续时间计算的。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-651">It is calculated by measuring the duration the idle thread is active in the sample interval, and then subtracting that time from the interval duration.</span></span> <span data-ttu-id="2ec4f-652">（每个处理器有占用时钟周期当没有其他线程准备好运行的空闲线程）。此计数器是处理器活动的主要指示器，并显示在采样间隔期间观察到的忙碌时间的平均百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-652">(Each processor has an idle thread that consumes cycles when no other threads are ready to run.) This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="2ec4f-653">它被通过监视服务处于非活动状态的时间，然后从 100%减去该值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-653">It is calculated by monitoring the time that the service is inactive, and subtracting that value from 100 percent.</span></span>  
  
 <span data-ttu-id="2ec4f-654">此分析检查大于每个单个处理器上的 60%的利用率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-654">This analysis checks for utilization greater than 60 percent on each individual processor.</span></span> <span data-ttu-id="2ec4f-655">如果是这样，确定它是否是高用户模式 CPU 或高特权模式。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-655">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="2ec4f-656">如果高特权模式下 CPU 怀疑有问题，请参阅"特权模式 CPU 分析"。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-656">If high privileged mode CPU is suspected, then see the “Privileged Mode CPU Analysis”.</span></span> <span data-ttu-id="2ec4f-657">如果怀疑用户模式下处理器瓶颈，则可以考虑使用进程探查器分析导致高 CPU 使用的函数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-657">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="2ec4f-658">请参阅"如何为： 标识导致高用户模式 CPU 瓶颈的出现针对服务器应用程序在生产环境中的函数"的详细信息的参考部分中的文章。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-658">See “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  
  
## <a name="processor-queue-length-analysis"></a><span data-ttu-id="2ec4f-659">处理器队列长度分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-659">Processor Queue Length Analysis</span></span>  
 <span data-ttu-id="2ec4f-660">"处理器队列长度"是处理器队列中的线程数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-660">“Processor Queue Length” is the number of threads in the processor queue.</span></span> <span data-ttu-id="2ec4f-661">与磁盘计数器，此计数器只显示就绪线程，不正在运行的线程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-661">Unlike the disk counters, this counter shows ready threads only, not threads that are running.</span></span>  <span data-ttu-id="2ec4f-662">没有单个队列的处理器时间百分比甚至具有多个处理器的计算机上。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-662">There is a single queue for processor time even on computers with multiple processors.</span></span> <span data-ttu-id="2ec4f-663">因此，如果计算机具有多个处理器，需要此值除以处理工作负载的处理器数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-663">Therefore, if a computer has multiple processors, you need to divide this value by the number of processors servicing the workload.</span></span> <span data-ttu-id="2ec4f-664">每个处理器少于 10 个线程的持续的处理器队列是通常可接受，取决于工作负荷。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-664">A sustained processor queue of less than 10 threads per processor is normally acceptable, dependent of the workload.</span></span>  
  
 <span data-ttu-id="2ec4f-665">此分析将决定是否平均处理器队列长度超过处理器的数目。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-665">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="2ec4f-666">如果是这样，则这可能表示处理器瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-666">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="2ec4f-667">与特权模式 CPU 分析和由进程过多的处理器使用相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-667">Use this analysis in correlation with Privileged Mode CPU Analysis and Excessive Processor Use by Process.</span></span> <span data-ttu-id="2ec4f-668">处理器队列为是准备好，但不是能够执行的处理器，因为当前正在执行另一个活动线程的线程的集合。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-668">The processor queue is the collection of threads that are ready but not able to be executed by the processor because another active thread is currently executing.</span></span> <span data-ttu-id="2ec4f-669">持续或重复的更多的处理器数目是处理器瓶颈更好地指示线程的队列。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-669">A sustained or recurring queue of more threads than number of processors is a good indication of a processor bottleneck.</span></span>  
  
 <span data-ttu-id="2ec4f-670">你可以结合使用此计数器"处理器\\%Processor Time"计数器以确定你的应用程序是否可以受益于更多的 Cpu。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-670">You can use this counter in conjunction with the “Processor\\% Processor Time” counter to determine whether your application can benefit from more CPUs.</span></span> <span data-ttu-id="2ec4f-671">没有单个队列的处理器时间，即使是在多处理器计算机上。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-671">There is a single queue for processor time, even on multiprocessor computers.</span></span> <span data-ttu-id="2ec4f-672">因此，在多处理器计算机中，将"处理器队列长度"(PQL) 值除以处理工作负载的处理器数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-672">Therefore, in a multiprocessor computer, divide the “Processor Queue Length” (PQL) value by the number of processors servicing the workload</span></span>  
  
 <span data-ttu-id="2ec4f-673">如果 CPU 非常繁忙 （90%和更高的利用率） 和 PQL 平均值高于一致的处理器数，则可能存在处理器瓶颈，无法受益于更多的 Cpu。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-673">If the CPU is very busy (90 percent and higher utilization) and the PQL average is consistently higher than the number of processors, then you may have a processor bottleneck that could benefit from additional CPUs.</span></span> <span data-ttu-id="2ec4f-674">或者，你可能会减少的线程和应用程序级别的队列数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-674">Or, you could reduce the number of threads and queue at the application level.</span></span> <span data-ttu-id="2ec4f-675">这将导致减少上下文切换，这很好的降低 CPU 负载。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-675">This will cause less context switching, which is good for reducing CPU load.</span></span> <span data-ttu-id="2ec4f-676">低 CPU 使用率高 PQL 的常见原因是时间的处理器时间的请求到达随机，和线程要求异常长从处理器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-676">The common reason for a high PQL with low CPU utilization is that requests for processor time arrive randomly, and threads demand irregular amounts of time from the processor.</span></span> <span data-ttu-id="2ec4f-677">这意味着处理器不成为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-677">This means that the processor is not a bottleneck.</span></span> <span data-ttu-id="2ec4f-678">相反，工作线程处理逻辑，需要能够改进。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-678">Instead, your threading logic that needs to be improved.</span></span>  
  
 <span data-ttu-id="2ec4f-679">如果怀疑用户模式下处理器瓶颈，则可以考虑使用进程探查器分析导致高 CPU 使用的函数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-679">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="2ec4f-680">请参阅"如何为： 标识导致高用户模式 CPU 瓶颈的出现针对服务器应用程序在生产环境中的函数"的详细信息的参考部分中的文章。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-680">See the “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  
  
## <a name="privileged-mode-cpu-analysis"></a><span data-ttu-id="2ec4f-681">特权模式下 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-681">Privileged Mode CPU Analysis</span></span>  
 <span data-ttu-id="2ec4f-682">此计数器指示在特权模式下运行的线程的时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-682">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="2ec4f-683">当你的应用程序调用时 （例如，可执行文件或网络 I/O 或分配内存） 的操作系统功能时，这些操作系统功能在特权模式下执行。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-683">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span>  
  
 <span data-ttu-id="2ec4f-684">高特权模式下 CPU 指示计算机花费在与实际 （用户模式） 的系统 I/O 工作中太多时间。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-684">High privileged mode CPU indicates that the computer is spending too much time in system I/O versus real (user mode) work.</span></span> <span data-ttu-id="2ec4f-685">"%Privileged Time"是进程线程在特权模式下执行代码所用的运行时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-685">“% Privileged Time” is the percentage of elapsed time that the process threads spent executing code in privileged mode.</span></span>  <span data-ttu-id="2ec4f-686">当调用 Windows 系统服务时，服务将通常运行在特权模式下，若要获取对系统专有数据的访问权限。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-686">When a Windows system service is called, the service will often run in privileged mode to gain access to system-private data.</span></span> <span data-ttu-id="2ec4f-687">此类数据不会发生访问由在用户模式下执行的线程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-687">Such data is protected from access by threads executing in user mode.</span></span> <span data-ttu-id="2ec4f-688">对系统的调用可以显式或隐式的如页错误或中断。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-688">Calls to the system can be explicit or implicit, such as page faults or interrupts.</span></span> <span data-ttu-id="2ec4f-689">不像某些早期的操作系统，Windows 使用进程边界对于除了传统的保护的用户和特权的模式的子系统保护。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-689">Unlike some early operating systems, Windows uses process boundaries for subsystem protection in addition to the traditional protection of user and privileged modes.</span></span> <span data-ttu-id="2ec4f-690">代表应用程序通过 Windows 某些工作可能会出现在过程中的特权时间除了其他子系统进程中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-690">Some work done by Windows on behalf of the application might appear in other subsystem processes in addition to the privileged time in the process.</span></span>  
  
 <span data-ttu-id="2ec4f-691">此分析将检查以查看特权模式下 CPU 是否占用了超过 30%的总 CPU。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-691">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="2ec4f-692">如果这样，则可能的 CPU 消耗是才导致的网络、 内存或磁盘 I/O 等处理器以外的另一个瓶颈。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-692">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="2ec4f-693">使用相关联时使用 %Interrupt Time 和高上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-693">Use in correlation with % Interrupt Time and High Context Switching analyses.</span></span>  
  
## <a name="high-context-switching-analysis"></a><span data-ttu-id="2ec4f-694">高上下文切换分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-694">High Context Switching Analysis</span></span>  
 <span data-ttu-id="2ec4f-695">较高优先级的线程会抢占较低的优先级线程当前正在运行或高优先级的线程块时，会发生情况的上下文切换。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-695">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="2ec4f-696">当多个线程共享相同的优先级级别，则会发生的上下文切换的高级别。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-696">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="2ec4f-697">这通常指示线程过多在争夺系统上的处理器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-697">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="2ec4f-698">如果你看不到更处理器利用率，请参阅非常低级别的上下文切换，则可能表示线程被阻止。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-698">If you do not see much processor utilization and you see very low levels of context switching, it could indicate that threads are blocked.</span></span>  
  
 <span data-ttu-id="2ec4f-699">高特权模式下，CPU 和总体 CPU 时应仅调查高上下文切换。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-699">High context switching should only be investigated when privileged mode CPU and overall CPU is high.</span></span> <span data-ttu-id="2ec4f-700">一般情况下，上下文切换速率小于每个处理器每秒 5,000 的不是值得担心。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-700">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="2ec4f-701">如果上下文切换率超过每个处理器每秒的 15000，则一个约束。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-701">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span>  
  
 <span data-ttu-id="2ec4f-702">此分析检查高 CPU、 高特权模式下 CPU 和高 （大于为每个处理器的 5,000） 系统上下文切换每秒在同一时间发生的所有。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-702">This analysis checks for high CPU, high privileged mode CPU, and high (greater than 5,000 per processor) system context switches per second all occurring at the same time.</span></span> <span data-ttu-id="2ec4f-703">如果出现高上下文切换，然后减少线程和系统上运行的进程的数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-703">If high context switching is occurring, then reduce the number of threads and processes running on the system.</span></span>  
  
## <a name="biztalk-high-database-sessions-analysis"></a><span data-ttu-id="2ec4f-704">BizTalk 高数据库会话分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-704">BizTalk High Database Sessions Analysis</span></span>  
 <span data-ttu-id="2ec4f-705">此计数器有两个可能的值即正常 (0)，或超出了 (1)。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-705">This counter has two possible values namely normal (0) or exceeded (1).</span></span> <span data-ttu-id="2ec4f-706">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-706">This analysis checks for a value of 1.</span></span> <span data-ttu-id="2ec4f-707">如果是这样，BizTalk 超过了允许的数据库会话数的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-707">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="2ec4f-708">此值由 BizTalk 主机限制设置中的"每个 CPU 的数据库连接"值控制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-708">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span>  
  
 <span data-ttu-id="2ec4f-709">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-709">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-710">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-710">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="2ec4f-711">默认情况下; 禁用此选项通常情况下，此设置应仅启用如果数据库服务器是瓶颈或低端的数据库服务器在 BizTalk Server 系统中。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-711">This option is disabled by default; typically, this setting should only be enabled if the database server is a bottleneck or for low-end database servers in the BizTalk Server system.</span></span> <span data-ttu-id="2ec4f-712">可以通过使用 BizTalk:Message 代理性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-712">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-713">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-713">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-714">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-714">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="2ec4f-715">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-715">The default value is 0.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ec4f-716">"MaxWorkerThreads"注册表项会影响到 BizTalk 可用线程的数目，并且有助于如果 BizTalk 线程中的大部分均忙于数据库连接。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-716">The “MaxWorkerThreads” registry key influences the number threads available to BizTalk and may help if most of the BizTalk threads are busy with database connections.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-717">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-717">References</span></span>  
  
-   <span data-ttu-id="2ec4f-718">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-718">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-719">线程、 DB 会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-719">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
-   <span data-ttu-id="2ec4f-720">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-720">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="2ec4f-721">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-721">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-high-database-size-analysis"></a><span data-ttu-id="2ec4f-722">BizTalk 高数据库大小分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-722">BizTalk High Database Size Analysis</span></span>  
 <span data-ttu-id="2ec4f-723">此计数器是指此进程已发布的数据库队列中的消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-723">This counter refers to the number of messages in the database queues that this process has published.</span></span> <span data-ttu-id="2ec4f-724">此值按所有主机队列表中的项数以及后台处理表和跟踪表中的项数来衡量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-724">This value is measured by the number of items in the queue tables for all hosts and the number of items in the spool and tracking tables.</span></span> <span data-ttu-id="2ec4f-725">队列包括工作队列、 状态队列和挂起的队列。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-725">Queue includes the work queue, the state queue and the suspended queue.</span></span> <span data-ttu-id="2ec4f-726">如果要将某一进程发布到多个队列，则此计数器将反映所有队列的加权平均值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-726">If a process is publishing to multiple queues, this counter reflects the weighted average of all the queues.</span></span>  
  
 <span data-ttu-id="2ec4f-727">如果重新启动该主机，则内存中保留的统计信息将丢失。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-727">If the host is restarted, statistics held in memory are lost.</span></span> <span data-ttu-id="2ec4f-728">由于涉及一些开销，请将恢复 BizTalk Server，仅当有至少 100 发布，5%的总发布重新启动的主机进程内收集统计信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-728">Since some overhead is involved, BizTalk Server will resume gathering statistics only when there are at least 100 publishes, with 5 percent of the total publishes within the restarted host process.</span></span>  
  
 <span data-ttu-id="2ec4f-729">为数据库阈值中的消息计数列出的条件之一时，此计数器将设置为值为 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-729">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="2ec4f-730">此阈值记录在该主题如何修改默认主机限制设置下面引用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-730">This threshold is documented in the topic How to Modify the Default Host Throttling Settings referenced below.</span></span> <span data-ttu-id="2ec4f-731">默认情况下，主机消息限制阈值的数据库中的计数设置为值为 50000，就会触发在下列情况下的限制条件：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-731">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span>  
  
-   <span data-ttu-id="2ec4f-732">主机实例发布到订阅主机的工作、状态和已挂起队列的消息总数超过 50,000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-732">The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span>  
  
-   <span data-ttu-id="2ec4f-733">后台处理表或跟踪表中的消息数超过 500,000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-733">The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span>  
  
 <span data-ttu-id="2ec4f-734">在计算中使用数据库邮件计数中包括挂起的消息，因为限制的消息发布即使 BizTalk server 遇到低或没有负载会发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-734">Since suspended messages are included in the message count in database calculation, throttling of message publishing can occur even if the BizTalk server is experiencing low or no load.</span></span>  
  
 <span data-ttu-id="2ec4f-735">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-735">This analysis checks for a value of 1.</span></span> <span data-ttu-id="2ec4f-736">如果发生这种情况，请考虑将减少在数据库中的消息数的操作过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-736">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="2ec4f-737">例如，确保 BizTalk SQL Server 作业运行正常并使用 BizTalk 管理控制台中的组中心数据库来确定是否将消息生成向上引起的大量的挂起的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-737">For example, ensure the BizTalk SQL Server jobs are running without error and use the Group Hub in the BizTalk Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-738">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-738">References</span></span>  
  
-   <span data-ttu-id="2ec4f-739">挂起的消息都包含在数据库限制阈值中的消息计数 [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-739">Suspended Messages are Included in the Message Count in Database Throttling Threshold at [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span></span>  
  
-   <span data-ttu-id="2ec4f-740">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-740">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-741">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-741">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
## <a name="biztalk-high-in-process-message-count-analysis"></a><span data-ttu-id="2ec4f-742">BizTalk 高进程内消息计数分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-742">BizTalk High In-Process Message Count Analysis</span></span>  
 <span data-ttu-id="2ec4f-743">在主机限制设置的"进程内消息每个 CPU"设置是最大的未处理的消息传递到的终结点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-743">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="2ec4f-744">此数字不包括从但仍等待中内存中队列的传递的数据库中检索的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-744">This number does not include the messages retrieved from database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="2ec4f-745">可以通过使用 BizTalk:Message 代理性能对象类别下的进程内消息计数性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-745">You can monitor the number of in-Process Messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-746">在考虑限制条件时，此参数提供的限制机制提示。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-746">This parameter provides a hint to the throttling mechanism when considering throttling conditions.</span></span> <span data-ttu-id="2ec4f-747">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-747">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="2ec4f-748">你可以通过监视的进程内消息计数性能计数器来验证实际阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-748">You can verify the actual threshold by monitoring the in-process message count performance counter.</span></span>  
  
 <span data-ttu-id="2ec4f-749">此参数可以设置为较小的值对于大型消息方案，其中的平均消息大小较高，或消息的处理可能需要大量的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-749">This parameter can be set to a smaller value for large message scenarios, where either the average message size is high, or the processing of messages may require a large number of messages.</span></span> <span data-ttu-id="2ec4f-750">这将是很明显，如果一个方案遇到过于频繁基于内存的限制和内存阈值获取自动调整为大体上低的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-750">This would be evident if a scenario experiences memory-based throttling too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="2ec4f-751">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-751">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="2ec4f-752">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-752">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span>  
  
 <span data-ttu-id="2ec4f-753">此分析检查的进程内消息计数高计数器以确定是否发生这种类型的限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-753">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="2ec4f-754">如果是这样，请考虑调整"每 CPU 邮件进程内"设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-754">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="2ec4f-755">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-755">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-756">在禁用限制基于每个 CPU 进程内消息数"进程内消息每个 CPU"设置中输入的值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-756">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="2ec4f-757">"进程内消息每个 CPU"设置的默认值为 1000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-757">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="2ec4f-758">请注意，修改此值还可以影响在低延迟的消息和/或 BizTalk 资源的效率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-758">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-759">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-759">References</span></span>  
  
-   <span data-ttu-id="2ec4f-760">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-760">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-761">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-761">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
## <a name="biztalk-high-message-delivery-rate-analysis"></a><span data-ttu-id="2ec4f-762">BizTalk 高邮件传递速率分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-762">BizTalk High Message Delivery Rate Analysis</span></span>  
 <span data-ttu-id="2ec4f-763">对于出站 （发送） 的消息，BizTalk Server 限制的消息传送，如果主机实例的消息传递传入速率超过传出速率消息传递 \* 指定的速率 overdrive 因子 （%） 的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-763">For outbound (delivered) messages, BizTalk Server throttles delivery of messages if the message delivery incoming rate for the host instance exceeds the message delivery outgoing rate \* the specified rate overdrive factor (percent) value.</span></span> <span data-ttu-id="2ec4f-764">在消息处理限制设置对话框上，速率 overdrive 因素 （百分比） 参数是可配置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-764">The rate overdrive factor (percent) parameter is configurable on the Message Processing Throttling Settings dialog box.</span></span> <span data-ttu-id="2ec4f-765">基于速率限制的出站消息是主要通过将从内存中队列中删除消息，并将消息传递到的终结点管理器 (EPM) 或业务流程引擎会为处理前的延迟实现的。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-765">Rate-based throttling for outbound messages is accomplished primarily by inducing a delay before removing the messages from the in-memory queue and delivering the messages to the End Point Manager (EPM) or orchestration engine for processing.</span></span> <span data-ttu-id="2ec4f-766">不执行任何其他操作来完成基于速率限制的出站消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-766">No other action is taken to accomplish rate-based throttling for outbound messages.</span></span>  
  
 <span data-ttu-id="2ec4f-767">出站阻止可能导致消息送达延迟，消息可能会在内存中队列中堆积，并可能导致出列线程被阻止，直到阻止条件得以缓解。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-767">Outbound throttling can cause delayed message delivery and messages may build up in the in-memory queue and cause de-queue threads to be blocked until the throttling condition is mitigated.</span></span> <span data-ttu-id="2ec4f-768">当取消排队线程被阻止，从消息框中放入内存中队列进行出站传递提取任何额外的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-768">When de-queue threads are blocked, no additional messages are pulled from the MessageBox into the in-memory queue for outbound delivery.</span></span>  
  
 <span data-ttu-id="2ec4f-769">此分析检查的值为 1 中的高的消息传送速率计数器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-769">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="2ec4f-770">高的消息传送速率可能引起高处理复杂性、 慢速的出站适配器或暂时的系统资源不足。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-770">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-771">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-771">References</span></span>  
  
-   <span data-ttu-id="2ec4f-772">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-772">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-773">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-773">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="2ec4f-774">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-774">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-high-process-memory-analysis"></a><span data-ttu-id="2ec4f-775">BizTalk 高进程内存分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-775">BizTalk High Process Memory Analysis</span></span>  
 <span data-ttu-id="2ec4f-776">限制阈值设置的 BizTalk 进程内存使用量是内存的相比工作集大小和进程的总可用虚拟内存的总和，如果输入从 1 到 100 之间的值所使用百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-776">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="2ec4f-777">默认情况下，BizTalk 进程内存使用情况限制设置为 25。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-777">By default, the BizTalk Process Memory Usage throttling setting is 25.</span></span> <span data-ttu-id="2ec4f-778">在指定百分比值时，将按固定的时间间隔来重新计算进程内存阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-778">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="2ec4f-779">如果用户指定一个百分比值，它是根据计算为提交和当前的进程内存使用量的可用内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-779">If the user specifies a percentage value, it is computed based on the available memory to commit and the current Process Memory usage.</span></span>  
  
 <span data-ttu-id="2ec4f-780">此分析检查 1 中的高进程内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-780">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="2ec4f-781">如果发生这种情况，然后尝试通过使用调试诊断确定内存增加的原因 （请参阅在内存泄漏检测分析中的引用）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-781">If this occurs, then try to determine the cause of the memory increase by using Debug Diag (see references in Memory Leak Detection analysis).</span></span> <span data-ttu-id="2ec4f-782">请注意，是正常的进程在启动和这期间使用的内存很大一部分它可能最初显示为内存泄漏，但进程无法释放它不再需要从而减少的可用我的内存，则会发生了真正的内存泄漏随着时间的推移 mory。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-782">Note that is it normal for processes to consume a large portion of memory during startup and this may initially appear as a memory leak, but a true memory leak occurs when a process fails to release memory that it no longer needs, thereby reducing the amount of available memory over time.</span></span> <span data-ttu-id="2ec4f-783">有关如何以一般方式分析 BizTalk 中的进程内存泄漏，请参阅下面的"如何为捕获内存转储的进程，是泄露内存"引用和/或"内存泄漏检测"分析 PAL 中的有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-783">See the “How to Capture a Memory Dump of a Process that is Leaking Memory” reference below and/or the “Memory Leak Detection” analysis in PAL for more information on how to generically analyze process memory leaks in BizTalk.</span></span>  
  
 <span data-ttu-id="2ec4f-784">如果要发布的批具有陡峭的内存要求高的进程内存限制可能发生或线程过多所处理的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-784">High process memory throttling can occur if the batch to be published has steep memory requirements, or too many threads are processing messages.</span></span>  <span data-ttu-id="2ec4f-785">如果系统看起来过度限制，请考虑增加主机进程内存使用情况阈值与关联的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-785">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="2ec4f-786">如果通过增加进程内存使用情况阈值引发"内存不足"错误，请考虑减少内部消息队列大小的值，并且进程内每个 CPU 阈值的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-786">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and In-process messages per CPU thresholds.</span></span> <span data-ttu-id="2ec4f-787">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-787">This strategy is particularly relevant in large message processing scenarios.</span></span> <span data-ttu-id="2ec4f-788">此外，此值应设置为具有较大内存要求每个消息的方案的低值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-788">In addition, this value should be set to a low value for scenarios having large memory requirement per message.</span></span> <span data-ttu-id="2ec4f-789">设置较低的值将在早期限制开始运作，并使进程内的内存分解。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-789">Setting a low value will kick in throttling early on and prevent a memory explosion within the process.</span></span>  
  
 <span data-ttu-id="2ec4f-790">如果你的 BizTalk server 定期运行虚拟内存不足时，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-790">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="2ec4f-791">在 64 位服务器上的每个进程可以解决最高支持 4 TB 的虚拟内存与在 32 位 2 GB。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-791">Each process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="2ec4f-792">一般情况下，强烈建议 BizTalk 64 位和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-792">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="2ec4f-793">请参阅有关详细信息"BizTalk Server 64 位支持"参考。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-793">See the “BizTalk Server 64-bit Support” reference for more information.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-794">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-794">References</span></span>  
  
-   <span data-ttu-id="2ec4f-795">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-795">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="2ec4f-796">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-796">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-797">如何捕获在泄漏内存的进程内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-797">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="2ec4f-798">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-798">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  
  
## <a name="biztalk-high-system-memory-analysis"></a><span data-ttu-id="2ec4f-799">BizTalk 高系统内存分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-799">BizTalk High System Memory Analysis</span></span>  
 <span data-ttu-id="2ec4f-800">BizTalk 物理内存使用情况限制阈值设置为输入相比从 1 到 100 之间的可用物理内存的值如果总量的内存消耗的百分比。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-800">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="2ec4f-801">如果输入大于 100 的值，此设置也可以在兆字节为单位的可用物理内存的总量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-801">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="2ec4f-802">输入值 0 可以禁用基于物理内存使用率的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-802">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="2ec4f-803">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-803">The default value is 0.</span></span>  
  
 <span data-ttu-id="2ec4f-804">此分析检查 1 中的较高的系统内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-804">This analysis checks for a value of 1 in the High System Memory counter.</span></span> <span data-ttu-id="2ec4f-805">由于这样将度量系统内存总量，因此如果非 BizTalk Server 进程占用过多的系统内存，则可能会触发阻止条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-805">Since this measures total system memory, a throttling condition may be triggered if non-BizTalk Server processes are consuming an extensive amount of system memory.</span></span> <span data-ttu-id="2ec4f-806">因此如果发生这种情况，最好的方法是确定哪些进程使用在大多数物理内存和/或向服务器添加额外的物理内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-806">Therefore if this occurs, the best approach is to identify which processes are consuming the most physical memory and/or add additional physical memory to the server.</span></span> <span data-ttu-id="2ec4f-807">此外，请考虑减少 EPM 线程池的默认大小和/或适配器批的大小，从而减少负载。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-807">Also, consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span> <span data-ttu-id="2ec4f-808">有关详细信息，请参阅 PAL 中的内存泄漏检测分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-808">For more information, see the Memory Leak Detection analysis in PAL.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-809">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-809">References</span></span>  
  
-   <span data-ttu-id="2ec4f-810">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-810">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-811">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-811">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-812">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-812">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-high-thread-count-analysis"></a><span data-ttu-id="2ec4f-813">BizTalk 高线程计数分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-813">BizTalk High Thread Count Analysis</span></span>  
 <span data-ttu-id="2ec4f-814">"每个 CPU 线程数"是宿主进程包括由适配器使用的线程中的线程总数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-814">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="2ec4f-815">如果超出此阈值，BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-815">If this threshold is exceeded, BizTalk Server will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="2ec4f-816">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-816">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="2ec4f-817">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-817">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="2ec4f-818">默认情况下，禁用基于线程限制。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-818">Thread based throttling is disabled by default.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2ec4f-819">用户指定的值用作一项准则，并且主机动态自行调整此阈值基于内存使用模式和线程要求的过程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-819">The user-specified value is used as a guideline, and the host may dynamically self-tune this threshold value based on the memory usage patterns and thread requirements of the process.</span></span>  
  
 <span data-ttu-id="2ec4f-820">此分析检查值为高线程计数计数器中的 1。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-820">This analysis checks for a value of 1 in the High Thread Count counter.</span></span> <span data-ttu-id="2ec4f-821">考虑调整不同线程池的大小，以确保系统不会创建大量线程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-821">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span> <span data-ttu-id="2ec4f-822">每第二个分析，以确定是否操作系统已经饱和与线程过多，但在大多数情况下，高线程计数原因比的后端数据库上的 BizTalk server 的详细争用，可以使用上下文切换关联此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-822">This analysis can be correlated with Context Switches per Second analysis to determine whether the operating system is saturated with too many threads, but in most cases high thread counts cause more contention on the backend database than on the BizTalk server.</span></span> <span data-ttu-id="2ec4f-823">有关修改线程池大小的详细信息请参阅如何修改默认主机限制中的设置的引用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-823">For more information about modifying the thread pool sizes see How to Modify the Default Host Throttling Settings in references.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-824">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-824">References</span></span>  
  
-   <span data-ttu-id="2ec4f-825">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-825">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-826">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-826">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="2ec4f-827">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-827">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-828">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-828">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="2ec4f-829">线程、 DB 会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-829">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
 <span data-ttu-id="2ec4f-830">BizTalk 入站延迟 AnalysisAverage 延迟消息引擎文档从接收适配器之前发布到消息框的时间 （毫秒）。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-830">BizTalk Inbound Latency AnalysisAverage latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the message box.</span></span> <span data-ttu-id="2ec4f-831">减少延迟是重要的 BizTalk，某些用户因此跟踪时间文档在入站适配器中的花费多少是很重要。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-831">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span>  
  
 <span data-ttu-id="2ec4f-832">下面是一个图，显示延迟的衡量标准。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-832">Here is a chart showing how latency is measured.</span></span>  
  
|<span data-ttu-id="2ec4f-833">1</span><span class="sxs-lookup"><span data-stu-id="2ec4f-833">1</span></span>|<span data-ttu-id="2ec4f-834">2</span><span class="sxs-lookup"><span data-stu-id="2ec4f-834">2</span></span>|<span data-ttu-id="2ec4f-835">3</span><span class="sxs-lookup"><span data-stu-id="2ec4f-835">3</span></span>|<span data-ttu-id="2ec4f-836">4</span><span class="sxs-lookup"><span data-stu-id="2ec4f-836">4</span></span>|<span data-ttu-id="2ec4f-837">5</span><span class="sxs-lookup"><span data-stu-id="2ec4f-837">5</span></span>|<span data-ttu-id="2ec4f-838">6</span><span class="sxs-lookup"><span data-stu-id="2ec4f-838">6</span></span>|  
|-------|-------|-------|-------|-------|-------|  
|<span data-ttu-id="2ec4f-839">适配器接收消息，并提交在这些性能计数器中捕获它与引擎之前消息提供不引擎适配器中完成的工作</span><span class="sxs-lookup"><span data-stu-id="2ec4f-839">Adapter receives message and submits it to the engine, work done in adapter before message is given to engine not captured in these perf counters</span></span>|<span data-ttu-id="2ec4f-840">引擎从适配器接收消息，执行接收管道、 映射、 订阅计算，保留在数据库中的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-840">Engine receives message from adapter, executes receive pipeline, map, subscription evaluation, persist message in DB.</span></span>|<span data-ttu-id="2ec4f-841">业务流程或请求-响应端口将运行并生成响应消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-841">Orchestration or Solicit-Response port runs and generates a response message.</span></span>|<span data-ttu-id="2ec4f-842">响应消息取消排队消息引擎中，执行发送管道，映射。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-842">Response message is dequeued in messaging engine, execute the send pipeline, map.</span></span>|<span data-ttu-id="2ec4f-843">消息传递引擎赋予适配器的响应消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-843">Messaging engine gives response message to adapter.</span></span>|<span data-ttu-id="2ec4f-844">适配器通知引擎消息就可全部完成。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-844">Adapter informs engine message is all done.</span></span>|  
||<span data-ttu-id="2ec4f-845">I</span><span class="sxs-lookup"><span data-stu-id="2ec4f-845">I</span></span>|||||  
||<span data-ttu-id="2ec4f-846">RR</span><span class="sxs-lookup"><span data-stu-id="2ec4f-846">RR</span></span>|<span data-ttu-id="2ec4f-847">RR</span><span class="sxs-lookup"><span data-stu-id="2ec4f-847">RR</span></span>|<span data-ttu-id="2ec4f-848">RR</span><span class="sxs-lookup"><span data-stu-id="2ec4f-848">RR</span></span>|||  
||||<span data-ttu-id="2ec4f-849">O</span><span class="sxs-lookup"><span data-stu-id="2ec4f-849">O</span></span>|<span data-ttu-id="2ec4f-850">O</span><span class="sxs-lookup"><span data-stu-id="2ec4f-850">O</span></span>|<span data-ttu-id="2ec4f-851">O</span><span class="sxs-lookup"><span data-stu-id="2ec4f-851">O</span></span>|  
|||||<span data-ttu-id="2ec4f-852">OA</span><span class="sxs-lookup"><span data-stu-id="2ec4f-852">OA</span></span>|<span data-ttu-id="2ec4f-853">OA</span><span class="sxs-lookup"><span data-stu-id="2ec4f-853">OA</span></span>|  
  
 <span data-ttu-id="2ec4f-854">我 = 入站的延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-854">I = Inbound Latency</span></span>  
  
 <span data-ttu-id="2ec4f-855">RR = 请求的响应延迟时间</span><span class="sxs-lookup"><span data-stu-id="2ec4f-855">RR = Request Response Latency</span></span>  
  
 <span data-ttu-id="2ec4f-856">O = 出站延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-856">O = Outbound Latency</span></span>  
  
 <span data-ttu-id="2ec4f-857">OA = 出站适配器延迟</span><span class="sxs-lookup"><span data-stu-id="2ec4f-857">OA = Outbound Adapter Latency</span></span>  
  
 <span data-ttu-id="2ec4f-858">假设低延迟环境，这种分析检查是否文档所用的入站适配器中的时间超过 5 秒。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-858">Assuming a low latency environment, this analysis checks whether the document spent more than 5 seconds in the inbound adapter.</span></span> <span data-ttu-id="2ec4f-859">这可能表示通过此主机实例中的入站适配器的消息传输的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-859">This may indicate a processing delay in the transport of messages through inbound adapters in this host instance.</span></span> <span data-ttu-id="2ec4f-860">如果此主机实例中存在多个入站的适配器，请考虑将它们分散到其自己的主机，以确定哪个入站的适配器的高延迟。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-860">If multiple inbound adapters exist in this host instance, then consider separating them into their own hosts to determine which inbound adapter has high latency.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-861">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-861">References</span></span>  
  
-   <span data-ttu-id="2ec4f-862">BizTalk Server 数据库优化</span><span class="sxs-lookup"><span data-stu-id="2ec4f-862">BizTalk Server Database Optimization</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=104427](http://go.microsoft.com/fwlink/?linkid=104427)  
  
-   <span data-ttu-id="2ec4f-863">请求/响应消息传送</span><span class="sxs-lookup"><span data-stu-id="2ec4f-863">Request/Response Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155288](http://go.microsoft.com/fwlink/?LinkID=155288)  
  
-   <span data-ttu-id="2ec4f-864">识别瓶颈 BizTalk 层中</span><span class="sxs-lookup"><span data-stu-id="2ec4f-864">Identifying Bottlenecks in the BizTalk Tier</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155289](http://go.microsoft.com/fwlink/?LinkID=155289)  
  
## <a name="biztalk-message-delivery-throttling-state-analysis"></a><span data-ttu-id="2ec4f-865">BizTalk 消息传递限制状态分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-865">BizTalk Message Delivery Throttling State Analysis</span></span>  
 <span data-ttu-id="2ec4f-866">BizTalk 消息传递限制状态是之一的限制的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-866">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="2ec4f-867">它是一个标志，指示系统是否限制 （影响 XLANG 消息处理和出站传输协议） 的消息传递。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-867">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="2ec4f-868">由计数器的数值表示限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-868">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="2ec4f-869">下面是值和及其各自的含义的列表：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-869">Here is a list of the values and their respective meaning:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2ec4f-870">0</span><span class="sxs-lookup"><span data-stu-id="2ec4f-870">0</span></span>|<span data-ttu-id="2ec4f-871">不限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-871">Not throttling</span></span>|  
|<span data-ttu-id="2ec4f-872">1</span><span class="sxs-lookup"><span data-stu-id="2ec4f-872">1</span></span>|<span data-ttu-id="2ec4f-873">由于消息送达速率不匹配（输入速率超出输出速率）而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-873">Throttling due to imbalanced message delivery rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="2ec4f-874">3</span><span class="sxs-lookup"><span data-stu-id="2ec4f-874">3</span></span>|<span data-ttu-id="2ec4f-875">由于进程内消息数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-875">Throttling due to high in-process message count</span></span>|  
|<span data-ttu-id="2ec4f-876">4</span><span class="sxs-lookup"><span data-stu-id="2ec4f-876">4</span></span>|<span data-ttu-id="2ec4f-877">由于进程内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-877">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="2ec4f-878">5</span><span class="sxs-lookup"><span data-stu-id="2ec4f-878">5</span></span>|<span data-ttu-id="2ec4f-879">由于系统内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-879">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="2ec4f-880">9</span><span class="sxs-lookup"><span data-stu-id="2ec4f-880">9</span></span>|<span data-ttu-id="2ec4f-881">由于线程数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-881">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="2ec4f-882">10</span><span class="sxs-lookup"><span data-stu-id="2ec4f-882">10</span></span>|<span data-ttu-id="2ec4f-883">由于送达时的用户替代而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-883">Throttling due to user override on delivery</span></span>|  
  
 <span data-ttu-id="2ec4f-884">此分析检查其中每个值，并为每个具有特定的警报。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-884">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-885">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-885">References</span></span>  
  
-   <span data-ttu-id="2ec4f-886">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-886">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-887">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-887">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-messagebox-database-connection-failures-analysis"></a><span data-ttu-id="2ec4f-888">BizTalk MessageBox 数据库连接故障分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-888">BizTalk MessageBox Database Connection Failures Analysis</span></span>  
 <span data-ttu-id="2ec4f-889">此性能计数器是自主机实例启动以来失败的尝试的数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-889">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="2ec4f-890">如果出于任何原因，SQL Server 服务承载 BizTalk 数据库将变得不可用，数据库群集会将资源从活动的计算机传输到被动的计算机。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-890">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="2ec4f-891">在此故障转移过程中，BizTalk Server 服务实例会遇到数据库连接失败，这些实例将自动重新启动以重新连接到数据库。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-891">During this failover process, the BizTalk Server service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="2ec4f-892">采用故障转移期间传输的资源后，正在运行的数据库计算机（即前面提到的被动计算机）将开始处理数据库连接。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-892">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  
  
 <span data-ttu-id="2ec4f-893">当 BizTalk Server 运行时不能与 MessageBox 或管理数据库进行通信时，将发生 DBNetLib （数据库网络库） 错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-893">DBNetLib (Database Network Library) errors occur when the BizTalk Server runtime is unable to communicate with either the MessageBox or management databases.</span></span> <span data-ttu-id="2ec4f-894">当发生这种情况时，捕获异常的 BizTalk Server 运行时实例关闭，然后循环每隔一分钟来检查数据库是否可用。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-894">When this occurs, the BizTalk Server runtime instance that catches the exception shuts down and then cycles every minute to check to see whether the database is available.</span></span> <span data-ttu-id="2ec4f-895">有关此主题，请参阅引用部分以了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-895">See the references section for more information on this topic.</span></span>  
  
 <span data-ttu-id="2ec4f-896">当客户端启动到服务器的 TCP/IP 套接字连接时，客户端通常连接到服务器上的特定端口，并请求服务器通过临时（或暂时）TCP 或 UDP 端口进行响应。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-896">When a client initiates a TCP/IP socket connection to a server, the client typically connects to a specific port on the server and requests that the server respond to the client over an ephemeral, or short lived, TCP or UDP port.</span></span> <span data-ttu-id="2ec4f-897">在 Windows Server 2003 和 Windows XP，由客户端应用程序使用的临时端口的默认范围是从 1025 到 5000。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-897">On Windows Server 2003 and Windows XP, the default range of ephemeral ports used by client applications is from 1025 through 5000.</span></span> <span data-ttu-id="2ec4f-898">在某些情况下，很可能将耗尽默认范围内的可用端口。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-898">Under certain conditions it is possible that the available ports in the default range will be exhausted.</span></span> <span data-ttu-id="2ec4f-899">有关此主题，请参阅引用部分以了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-899">See the references section for more information on this topic.</span></span>  
  
 <span data-ttu-id="2ec4f-900">此分析检查数据库连接失败的任何匹配项。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-900">This analysis checks for any occurrence of database connection failures.</span></span> <span data-ttu-id="2ec4f-901">数据库连接故障十分重要，因为 BizTalk 无法函数没有数据库。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-901">Database connection failures are critical because BizTalk cannot function without the database.</span></span> <span data-ttu-id="2ec4f-902">如果数据库连接失败的原因是未知的然后请考虑下面列出的引用和/或联系 Microsoft 支持部门确定连接故障的性质。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-902">If the cause of the database connection failure is unknown, then consider the references listed below and/or contact Microsoft Support to determine the nature of the connectivity failure.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-903">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-903">References</span></span>  
  
-   <span data-ttu-id="2ec4f-904">向外扩展的数据库</span><span class="sxs-lookup"><span data-stu-id="2ec4f-904">Scaled-Out Databases</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155307](http://go.microsoft.com/fwlink/?LinkId=155307)  
  
-   <span data-ttu-id="2ec4f-905">避免出现 DBNETLIB 异常</span><span class="sxs-lookup"><span data-stu-id="2ec4f-905">Avoiding DBNETLIB Exceptions</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155308](http://go.microsoft.com/fwlink/?LinkId=155308)  
  
-   <span data-ttu-id="2ec4f-906">避免 TCP/IP 端口耗尽</span><span class="sxs-lookup"><span data-stu-id="2ec4f-906">Avoiding TCP/IP Port Exhaustion</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155309](http://go.microsoft.com/fwlink/?LinkId=155309)  
  
## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a><span data-ttu-id="2ec4f-907">BizTalk 消息传送发布限制状态分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-907">BizTalk Messaging Publishing Throttling State Analysis</span></span>  
 <span data-ttu-id="2ec4f-908">发布限制状态 BizTalk 消息是一个限制的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-908">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="2ec4f-909">它是一个标志，指示系统是否限制 （影响 XLANG 消息处理和入站传输协议） 的消息发布。由计数器的数值表示限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-909">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="2ec4f-910">下面是值和及其各自的含义的列表：</span><span class="sxs-lookup"><span data-stu-id="2ec4f-910">Here is a list of the values and their respective meaning:</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="2ec4f-911">0</span><span class="sxs-lookup"><span data-stu-id="2ec4f-911">0</span></span>|<span data-ttu-id="2ec4f-912">不限制</span><span class="sxs-lookup"><span data-stu-id="2ec4f-912">Not throttling</span></span>|  
|<span data-ttu-id="2ec4f-913">2</span><span class="sxs-lookup"><span data-stu-id="2ec4f-913">2</span></span>|<span data-ttu-id="2ec4f-914">由于消息发布速率不匹配（输入速率超出输出速率）而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-914">Throttling due to imbalanced message publishing rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="2ec4f-915">4</span><span class="sxs-lookup"><span data-stu-id="2ec4f-915">4</span></span>|<span data-ttu-id="2ec4f-916">由于进程内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-916">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="2ec4f-917">5</span><span class="sxs-lookup"><span data-stu-id="2ec4f-917">5</span></span>|<span data-ttu-id="2ec4f-918">由于系统内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-918">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="2ec4f-919">6</span><span class="sxs-lookup"><span data-stu-id="2ec4f-919">6</span></span>|<span data-ttu-id="2ec4f-920">由于数据库增长而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-920">Throttling due to database growth</span></span>|  
|<span data-ttu-id="2ec4f-921">8</span><span class="sxs-lookup"><span data-stu-id="2ec4f-921">8</span></span>|<span data-ttu-id="2ec4f-922">由于会话数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-922">Throttling due to high session count</span></span>|  
|<span data-ttu-id="2ec4f-923">9</span><span class="sxs-lookup"><span data-stu-id="2ec4f-923">9</span></span>|<span data-ttu-id="2ec4f-924">由于线程数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-924">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="2ec4f-925">11</span><span class="sxs-lookup"><span data-stu-id="2ec4f-925">11</span></span>|<span data-ttu-id="2ec4f-926">由于发布时的用户替代而阻止</span><span class="sxs-lookup"><span data-stu-id="2ec4f-926">Throttling due to user override on publishing</span></span>|  
  
 <span data-ttu-id="2ec4f-927">此分析检查其中每个值，并为每个具有特定的警报。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-927">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-928">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-928">References</span></span>  
  
-   <span data-ttu-id="2ec4f-929">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-929">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-930">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-930">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
## <a name="biztalk-orchestrations-resident-in-memory"></a><span data-ttu-id="2ec4f-931">BizTalk 业务流程驻留在内存中</span><span class="sxs-lookup"><span data-stu-id="2ec4f-931">BizTalk Orchestrations Resident in Memory</span></span>  
 <span data-ttu-id="2ec4f-932">当前以主机实例为宿主的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-932">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="2ec4f-933">峰值或爆发的业务流程驻留在内存中可能被视为正常，而上升趋势可能表示"积累"在内存中的业务流程。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-933">While spikes or bursts of orchestrations resident in memory may be considered normal, an increasing trend could indicate a “pile up” of orchestrations in memory.</span></span> <span data-ttu-id="2ec4f-934">当 BizTalk 无法冻结消息/业务流程实例时，可能会出现随着时间的推移上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-934">An increasing trend over time may occur when BizTalk is unable to dehydrate messages/orchestration instances.</span></span> <span data-ttu-id="2ec4f-935">尝试将此计数器与"XLANG/s Orchestrations(?) 相关联\Dehydratable 业务流程"问号 （？） 所在相同作为此计数器的计数器实例。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-935">Try to correlate this counter with “XLANG/s Orchestrations(?)\Dehydratable orchestrations” where the question mark (?) is the same counter instance as this counter.</span></span>  
  
 <span data-ttu-id="2ec4f-936">如果大量的业务流程都驻留在内存中的，并且如果业务流程的数量较少是否可冻结，然后你的业务流程很可能在内存中处于空闲状态，并可能导致内存泄漏情况。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-936">If a high number of orchestrations are resident in memory and if a low number of orchestrations are dehydratable, then your orchestrations are likely idle in memory and may cause a memory leak condition.</span></span> <span data-ttu-id="2ec4f-937">如果存在，请选择与"\XLANG/s 业务流程 （\*） \Idle 业务流程"相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-937">Use this analysis in correlation with “\XLANG/s Orchestrations(\*)\Idle orchestrations” if present.</span></span> <span data-ttu-id="2ec4f-938">在 BizTalk 空闲业务流程中的上升趋势是更好由于冻结业务流程实例的内存泄漏的指标。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-938">An increasing trend in BizTalk Idle Orchestrations is a better indicator of memory leaks due to the inability to dehydrate orchestration instances.</span></span>  
  
 <span data-ttu-id="2ec4f-939">此分析检查在驻留在内存和如果超过 50%的驻留在内存中的业务流程不可冻结业务流程中上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-939">This analysis checks for an increasing trend in orchestrations resident in memory and if more than 50% of the orchestrations resident in memory are not dehydratable.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-940">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-940">References</span></span>  
  
-   <span data-ttu-id="2ec4f-941">业务流程引擎性能计数器</span><span class="sxs-lookup"><span data-stu-id="2ec4f-941">Orchestration Engine Performance Counters</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155290](http://go.microsoft.com/fwlink/?LinkID=155290)  
  
-   <span data-ttu-id="2ec4f-942">业务流程冻结和 Rehydration</span><span class="sxs-lookup"><span data-stu-id="2ec4f-942">Orchestration Dehydration and Rehydration</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155284](http://go.microsoft.com/fwlink/?LinkID=155284)  
  
## <a name="biztalk-private-bytes-analysis"></a><span data-ttu-id="2ec4f-943">BizTalk 专用字节分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-943">BizTalk Private Bytes Analysis</span></span>  
 <span data-ttu-id="2ec4f-944">这是分配的专用内存的主机实例和类似于"\Process （\*） \Private 字节数"性能计数器的兆字节。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-944">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="2ec4f-945">专用字节数是内存的当前的大小，以字节为单位的进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-945">Private Bytes is the current size, in bytes, of memory that a process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="2ec4f-946">此分析将决定是否任何主机实例消耗的系统内存的大小，并在主机实例是否在内存消耗，随着时间的推移增加。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-946">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-947">使用大量的内存的主机实例没什么，只要它返回到系统内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-947">A host instance consuming large portions of memory is fine as long as the it returns the memory to the system.</span></span> <span data-ttu-id="2ec4f-948">查找增加图表的趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-948">Look for increasing trends in the chart.</span></span> <span data-ttu-id="2ec4f-949">上升趋势长的一段时间内无法指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-949">An increasing trend over a long period of time could indicate a memory leak.</span></span>  
  
 <span data-ttu-id="2ec4f-950">此分析检查 10 MB 每小时上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-950">This analysis checks for a 10 MB-per-hour increasing trend.</span></span> <span data-ttu-id="2ec4f-951">可用内存分析和内存泄漏分析与相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-951">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="2ec4f-952">此外，请记住，新启动实例将最初显示为内存泄漏时只需正常启动行为的主机。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-952">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="2ec4f-953">当进程继续使用内存，以及长的一段时间没有释放内存，内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-953">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="2ec4f-954">如果你怀疑存在内存泄漏条件，请阅读下面引用"BizTalk 消息的内存增长"中的文章。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-954">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article referenced below.</span></span> <span data-ttu-id="2ec4f-955">否则为安装并使用调试诊断工具。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-955">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="2ec4f-956">调试诊断工具的详细信息，请参阅引用部分。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-956">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-957">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-957">References</span></span>  
  
-   <span data-ttu-id="2ec4f-958">调试诊断工具 1.1 版</span><span class="sxs-lookup"><span data-stu-id="2ec4f-958">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   <span data-ttu-id="2ec4f-959">BizTalk 消息传送中的内存增长</span><span class="sxs-lookup"><span data-stu-id="2ec4f-959">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-virtual-bytes-analysis"></a><span data-ttu-id="2ec4f-960">BizTalk 虚拟字节分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-960">BizTalk Virtual Bytes Analysis</span></span>  
 <span data-ttu-id="2ec4f-961">这是适用于主机实例的虚拟内存保留的兆字节。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-961">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="2ec4f-962">此分析将决定是否任何主机实例正在消耗大量的系统内存，且是否随时间推移的内存消耗中增加的主机实例。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-962">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="2ec4f-963">使用大量的内存的主机实例没什么，只要它返回到系统内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-963">A host instance consuming large portions of memory is fine as long as it returns the memory to the system.</span></span> <span data-ttu-id="2ec4f-964">查找增加图表的趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-964">Look for increasing trends in the chart.</span></span> <span data-ttu-id="2ec4f-965">上升趋势长的一段时间内无法指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-965">An increasing trend over a long period of time could indicate a memory leak.</span></span>  
  
 <span data-ttu-id="2ec4f-966">此分析检查以虚拟字节为单位按小时 10 MB 的上升趋势。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-966">This analysis checks for a 10 MB-per-hour increasing trend in virtual bytes.</span></span> <span data-ttu-id="2ec4f-967">可用内存分析和内存泄漏分析与相关联时使用此分析。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-967">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="2ec4f-968">此外，请记住，新启动实例将最初显示为内存泄漏时只需正常启动行为的主机。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-968">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="2ec4f-969">当进程继续使用内存，以及长的一段时间没有释放内存，内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-969">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="2ec4f-970">如果您怀疑存在内存泄漏条件，然后阅读下面"BizTalk 消息的内存增长"中的文章。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-970">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article below.</span></span> <span data-ttu-id="2ec4f-971">否则为安装并使用调试诊断工具。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-971">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="2ec4f-972">调试诊断工具的详细信息，请参阅引用部分。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-972">For more information on the Debug Diag Tool, see the references section.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-973">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-973">References</span></span>  
  
-   <span data-ttu-id="2ec4f-974">调试诊断工具 1.1 版</span><span class="sxs-lookup"><span data-stu-id="2ec4f-974">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   <span data-ttu-id="2ec4f-975">BizTalk 消息传送中的内存增长</span><span class="sxs-lookup"><span data-stu-id="2ec4f-975">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-message-agent-database-session-throttling-analysis"></a><span data-ttu-id="2ec4f-976">BizTalk 消息代理数据库会话限制分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-976">BizTalk Message Agent Database Session Throttling Analysis</span></span>  
 <span data-ttu-id="2ec4f-977">这是到 MessageBox 相比限制设置其各自 BizTalk 打开数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-977">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="2ec4f-978">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-978">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-979">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-979">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="2ec4f-980">默认情况下，此选项为禁用状态；通常，只有当数据库服务器成为 BizTalk Server 系统的瓶颈时才应启用此设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-980">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="2ec4f-981">可以通过使用 BizTalk:Message 代理性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-981">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-982">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-982">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-983">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-983">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="2ec4f-984">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-984">The default value is 0.</span></span>  
  
 <span data-ttu-id="2ec4f-985">MaxWorkerThreads 注册表项已影响到 BizTalk 可用线程的数目，并可帮助在大部分 BizTalk 的线程都是忙于处理数据库连接的情况下。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-985">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="2ec4f-986">此分析检查到 MessageBox 的打开的数据库连接数是否大于 80%的数据库会话限制，设置，这表明可能限制条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-986">This analysis checks whether the number of open database connections to the MessageBox are greater than 80 percent of the Database Session Throttling setting, indicating a throttling condition is likely.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-987">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-987">References</span></span>  
  
-   <span data-ttu-id="2ec4f-988">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-988">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-989">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-989">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="2ec4f-990">线程、 DB 会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-990">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a><span data-ttu-id="2ec4f-991">BizTalk 消息代理数据库会话限制阈值分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-991">BizTalk Message Agent Database Session Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="2ec4f-992">这是到 MessageBox 的打开的数据库连接数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-992">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="2ec4f-993">"数据库连接每个 CPU"是最大并发数据库会话数 （每个 CPU) 限制开始之前允许。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-993">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="2ec4f-994">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-994">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="2ec4f-995">默认情况下，此选项为禁用状态；通常，只有当数据库服务器成为 BizTalk Server 系统的瓶颈时才应启用此设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-995">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="2ec4f-996">可以通过使用 BizTalk:Message 代理性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-996">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-997">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-997">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="2ec4f-998">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-998">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="2ec4f-999">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-999">The default value is 0.</span></span>  
  
 <span data-ttu-id="2ec4f-1000">MaxWorkerThreads 注册表项已影响到 BizTalk 可用线程的数目，并可帮助在大部分 BizTalk 的线程都是忙于处理数据库连接的情况下。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1000">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="2ec4f-1001">此分析检查此值，以确定是否它进行修改得到了其默认设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1001">This analysis checks this value to see whether it has been modified from its default setting.</span></span> <span data-ttu-id="2ec4f-1002">默认情况下，此设置是 0，表示针对数据库会话限制处于禁用状态。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1002">By default, this setting is 0, which means throttling on database sessions is disabled.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-1003">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1003">References</span></span>  
  
-   <span data-ttu-id="2ec4f-1004">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1004">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-1005">会影响适配器的性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1005">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  
  
-   <span data-ttu-id="2ec4f-1006">线程、 DB 会话和限制在 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1006">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  
  
## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a><span data-ttu-id="2ec4f-1007">BizTalk 消息代理进程内消息计数限制分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1007">BizTalk Message Agent In-process Message Count Throttling Analysis</span></span>  
 <span data-ttu-id="2ec4f-1008">这是处理服务类的并发消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1008">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="2ec4f-1009">在主机限制设置的"进程内消息每个 CPU"设置是最大的未处理的消息传递到的终结点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1009">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="2ec4f-1010">这不包括从数据库中检索，但仍在等待中内存中队列的传递的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1010">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="2ec4f-1011">可以通过使用 BizTalk:Message 代理性能对象类别下的进程内消息计数性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1011">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-1012">此参数提供了阻止机制提示以便您考虑阻止条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1012">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="2ec4f-1013">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1013">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="2ec4f-1014">通过监视 In-process message count 性能计数器，可以验证实际的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1014">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  
  
 <span data-ttu-id="2ec4f-1015">对于大型消息方案 （其中的平均消息大小较高，或消息的处理可能需要大量的消息），此参数可以设置为较小的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1015">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="2ec4f-1016">如果基于内存的限制过于频繁发生，并且内存阈值获取自动调整为大体上低的值，指示大型消息方案。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1016">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="2ec4f-1017">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1017">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="2ec4f-1018">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1018">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="2ec4f-1019">此分析将检查以确定它是否大于 80%的同一名称的其限制设置，它指示限制条件已可能的高的进程内消息 Count 计数器。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1019">This analysis checks the High In-Process Message Count counter to determine whether it is greater than 80 percent of its throttling setting under the same name, which indicates a throttling condition is likely.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-1020">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1020">References</span></span>  
  
-   <span data-ttu-id="2ec4f-1021">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1021">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-1022">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1022">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a><span data-ttu-id="2ec4f-1023">限制阈值分析 BizTalk:Message 代理进程内消息计数</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1023">BizTalk:Message Agent In-process Message Count Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="2ec4f-1024">这是处理服务类的并发消息数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1024">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="2ec4f-1025">在主机限制设置的"进程内消息每个 CPU"设置是最大的未处理的消息传递到的终结点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1025">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="2ec4f-1026">这不包括从数据库中检索，但仍在等待中内存中队列的传递的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1026">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="2ec4f-1027">可以通过使用 BizTalk:Message 代理性能对象类别下的进程内消息计数性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1027">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="2ec4f-1028">此参数提供了阻止机制提示以便您考虑阻止条件。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1028">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="2ec4f-1029">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1029">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="2ec4f-1030">通过监视 In-process message count 性能计数器，可以验证实际的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1030">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  
  
 <span data-ttu-id="2ec4f-1031">对于大型消息方案 （其中的平均消息大小较高，或消息的处理可能需要大量的消息），此参数可以设置为较小的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1031">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="2ec4f-1032">如果基于内存的限制过于频繁发生，并且内存阈值获取自动调整为大体上低的值，指示大型消息方案。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1032">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="2ec4f-1033">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1033">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="2ec4f-1034">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1034">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="2ec4f-1035">此分析检查高进程内消息计数限制为非默认值的阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1035">This analysis checks the High In-Process Message Count throttling threshold for a non-default value.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-1036">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1036">References</span></span>  
  
-   <span data-ttu-id="2ec4f-1037">限制在性能计数器的主机 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1037">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  
  
-   <span data-ttu-id="2ec4f-1038">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1038">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a><span data-ttu-id="2ec4f-1039">BizTalk 消息代理进程内存使用率 (MB) 限制分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1039">BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis</span></span>  
 <span data-ttu-id="2ec4f-1040">这是当前进程 (MB) 的内存使用率。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1040">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="2ec4f-1041">BizTalk 进程内存限制可能要发布的批有陡峭的内存需求，或如果线程过多所处理的消息时发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1041">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span>  <span data-ttu-id="2ec4f-1042">如果系统看起来过度限制，请考虑增加主机进程内存使用情况阈值与关联的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1042">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="2ec4f-1043">如果通过增加进程内存使用情况阈值引发"内存不足"错误，请考虑减少内部消息队列大小的值，并且进程内每个 CPU 阈值的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1043">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="2ec4f-1044">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1044">This strategy is particularly relevant in large message processing scenarios.</span></span>  
  
 <span data-ttu-id="2ec4f-1045">如果你的 BizTalk server 定期运行虚拟内存不足时，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1045">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="2ec4f-1046">在 64 位服务器上的每个进程可以解决最高支持 4 TB 的虚拟内存与在 32 位 2 GB。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1046">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="2ec4f-1047">一般情况下，强烈建议 BizTalk 64 位和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1047">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="2ec4f-1048">请参阅有关详细信息"BizTalk Server 64 位支持"参考。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1048">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="2ec4f-1049">此分析检查的进程内存使用量是否大于 80%的具有相同名称的其各自限制阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1049">This analysis checks whether the process memory usage is greater than 80 percent of its respective throttling threshold of the same name.</span></span> <span data-ttu-id="2ec4f-1050">默认情况下，BizTalk 进程内存使用情况限制设置是可用于进程的虚拟内存的 25%。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1050">By default, the BizTalk Process Memory Usage throttling setting is 25 percent of the virtual memory available to the process.</span></span> <span data-ttu-id="2ec4f-1051">/3GB 开关不起对此设置。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1051">The /3GB switch has no effect on this setting.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-1052">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1052">References</span></span>  
  
-   <span data-ttu-id="2ec4f-1053">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1053">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="2ec4f-1054">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1054">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-1055">如何捕获在泄漏内存的进程内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1055">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="2ec4f-1056">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1056">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  
  
## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a><span data-ttu-id="2ec4f-1057">BizTalk:Message 代理进程内存使用率 (MB) 限制阈值分析</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1057">BizTalk:Message Agent Process Memory Usage (MB) Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="2ec4f-1058">这是当前进程 (MB) 的内存使用量的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1058">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="2ec4f-1059">可能根据实际的此过程，并且其内存消耗模式的可用内存量动态调整阈值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1059">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="2ec4f-1060">BizTalk 进程内存限制可能要发布的批有陡峭的内存需求，或如果线程过多所处理的消息时发生。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1060">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="2ec4f-1061">如果系统看起来过度限制，请考虑增加主机进程内存使用情况阈值与关联的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1061">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="2ec4f-1062">如果通过增加进程内存使用情况阈值引发"内存不足"错误，请考虑减少内部消息队列大小的值，并且进程内每个 CPU 阈值的消息。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1062">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="2ec4f-1063">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1063">This strategy is particularly relevant in large message processing scenarios.</span></span>  
  
 <span data-ttu-id="2ec4f-1064">如果你的 BizTalk server 定期运行虚拟内存不足时，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1064">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="2ec4f-1065">在 64 位服务器上的每个进程可以解决最高支持 4 TB 的虚拟内存与在 32 位 2 GB。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1065">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="2ec4f-1066">一般情况下，强烈建议 BizTalk 64 位和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1066">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="2ec4f-1067">请参阅有关详细信息"BizTalk Server 64 位支持"参考。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1067">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="2ec4f-1068">此分析检查是否将进程内存限制设置为非默认值。</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1068">This analysis checks whether the Process memory throttling is set to a non-default value.</span></span>  
  
### <a name="references"></a><span data-ttu-id="2ec4f-1069">References</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1069">References</span></span>  
  
-   <span data-ttu-id="2ec4f-1070">BizTalk Server 如何实现在限制的主机 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1070">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  
  
-   <span data-ttu-id="2ec4f-1071">如何修改限制在设置的默认主机 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1071">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  
  
-   <span data-ttu-id="2ec4f-1072">如何捕获在泄漏内存的进程内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1072">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  
  
-   <span data-ttu-id="2ec4f-1073">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="2ec4f-1073">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>