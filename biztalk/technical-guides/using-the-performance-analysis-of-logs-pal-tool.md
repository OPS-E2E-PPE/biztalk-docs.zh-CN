---
title: 使用性能分析的日志 (PAL) 工具 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 889cbe2a88859eec82f76d0eec309865bf727bfe
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "37024563"
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a><span data-ttu-id="8d972-102">使用日志 (PAL) 工具的性能分析</span><span class="sxs-lookup"><span data-stu-id="8d972-102">Using the Performance Analysis of Logs (PAL) Tool</span></span>
<span data-ttu-id="8d972-103">PAL （性能分析的日志） 工具读取性能监视器计数器日志 （任何已知格式） 中，并使用复杂，但已知阈值 （提供） 进行分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-103">The PAL (Performance Analysis of Logs) tool reads in a performance monitor counter log (any known format) and analyzes it using complex, but known thresholds (provided).</span></span> <span data-ttu-id="8d972-104">该工具生成基于 HTML 报表，以图形方式图表重要的性能计数器和超出阈值时引发警报。</span><span class="sxs-lookup"><span data-stu-id="8d972-104">The tool generates an HTML based report that graphically charts important performance counters and throws alerts when thresholds are exceeded.</span></span> <span data-ttu-id="8d972-105">阈值最初基于由 Microsoft 产品团队，包括定义的阈值[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，和成员的 Microsoft 支持。</span><span class="sxs-lookup"><span data-stu-id="8d972-105">The thresholds are originally based on thresholds defined by the Microsoft product teams, including [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and members of Microsoft support.</span></span> <span data-ttu-id="8d972-106">此工具不能替代的传统的性能分析，但它可自动执行分析的性能计数器日志足够来帮助您节省大量时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-106">This tool is not a replacement of traditional performance analysis, but it automates the analysis of performance counter logs enough to help save you time.</span></span> <span data-ttu-id="8d972-107">PAL 工具中：</span><span class="sxs-lookup"><span data-stu-id="8d972-107">The PAL tool:</span></span>  

- <span data-ttu-id="8d972-108">分析阈值的性能计数器日志</span><span class="sxs-lookup"><span data-stu-id="8d972-108">Analyzes performance counter logs for thresholds</span></span>  

- <span data-ttu-id="8d972-109">对于较大的 Perfmon 日志很有帮助</span><span class="sxs-lookup"><span data-stu-id="8d972-109">Is helpful for large Perfmon logs</span></span>  

- <span data-ttu-id="8d972-110">标识[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和通过分析阈值的操作系统性能计数器瓶颈</span><span class="sxs-lookup"><span data-stu-id="8d972-110">Identifies [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and operating system performance counter bottlenecks by analyzing for thresholds</span></span>  

- <span data-ttu-id="8d972-111">可以扩展以对任何性能计数器进行分析</span><span class="sxs-lookup"><span data-stu-id="8d972-111">Is extensible to do analysis on any performance counters</span></span>  

- <span data-ttu-id="8d972-112">可用于帮助编写你自己的计数器</span><span class="sxs-lookup"><span data-stu-id="8d972-112">Can be used to help write your own counter</span></span>  

  <span data-ttu-id="8d972-113">PAL 是可作为免费下载[ http://go.microsoft.com/fwlink/?linkid=98098 ](http://go.microsoft.com/fwlink/?linkid=98098)。</span><span class="sxs-lookup"><span data-stu-id="8d972-113">PAL is available as a free download at [http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098).</span></span> <span data-ttu-id="8d972-114">它需要 Microsoft Log Parser。</span><span class="sxs-lookup"><span data-stu-id="8d972-114">It requires Microsoft Log Parser.</span></span> <span data-ttu-id="8d972-115">日志分析程序是一个功能全面的强大工具，如事件日志、 注册表、 文件系统和活动在 Windows 操作系统上提供对基于文本的数据，例如日志文件、 XML 文件、 CSV 文件，以及关键的数据源的通用查询访问Directory® 目录服务。</span><span class="sxs-lookup"><span data-stu-id="8d972-115">Log Parser is a powerful, versatile tool that provides universal query access to text-based data such as log files, XML files, and CSV files, as well as key data sources on the Windows operating system such as the event log, the registry, the file system, and Active Directory® directory service.</span></span> <span data-ttu-id="8d972-116">您可能想要使用此工具来查询大量的日志记录信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-116">You may want to use this tool to query a significant amount of logging information.</span></span> <span data-ttu-id="8d972-117">您可以下载在 Log Parser 工具[ http://go.microsoft.com/fwlink/?linkid=85574 ](http://go.microsoft.com/fwlink/?linkid=85574)。</span><span class="sxs-lookup"><span data-stu-id="8d972-117">You can download the Log Parser tool at [http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574).</span></span>  

## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a><span data-ttu-id="8d972-118">使用性能计数器的 PAL 中不同的语言的日志</span><span class="sxs-lookup"><span data-stu-id="8d972-118">Using PAL with Performance Counter Logs in Different Languages</span></span>  
 <span data-ttu-id="8d972-119">PAL 工具将分析性能计数器日志仅以英语语言。</span><span class="sxs-lookup"><span data-stu-id="8d972-119">The PAL tool analyzes performance counter logs only in English language.</span></span> <span data-ttu-id="8d972-120">若要使用其他语言中的性能计数器日志 PAL 工具，必须首先将日志传输到英语的语言。</span><span class="sxs-lookup"><span data-stu-id="8d972-120">To use the PAL tool with performance counter logs in other languages, you must first translate the logs to English language.</span></span> <span data-ttu-id="8d972-121">可以使用**Perfmon 日志转换器**工具，网址[ http://go.microsoft.com/fwlink/?LinkId=158802 ](http://go.microsoft.com/fwlink/?LinkId=158802)翻译为英语的原始性能计数器日志文件。</span><span class="sxs-lookup"><span data-stu-id="8d972-121">You can use the **Perfmon Log Translator** tool available at [http://go.microsoft.com/fwlink/?LinkId=158802](http://go.microsoft.com/fwlink/?LinkId=158802) to translate the original performance counter log files to English.</span></span>  

## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a><span data-ttu-id="8d972-122">了解 Microsoft BizTalk Server 2010 的 PAL 工具报告</span><span class="sxs-lookup"><span data-stu-id="8d972-122">Understanding the PAL Tool Report for Microsoft BizTalk Server 2010</span></span>  
 <span data-ttu-id="8d972-123">PAL 工具为 Windows 操作系统的 Microsoft SQL Server 提供的阈值 Perfmon 日志分析和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="8d972-123">The PAL tool provides Perfmon log analysis of thresholds for the Windows operating system, Microsoft SQL Server, and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="8d972-124">本部分介绍在 BizTalk Server 阈值报表在 PAL 工具分析的大多数。</span><span class="sxs-lookup"><span data-stu-id="8d972-124">This section describes most of the analyses in the BizTalk Server threshold report in the PAL tool.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="8d972-125">本主题是长，以便可以在同一位置以方便引用包含有关 PAL 工具的全面信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-125">This topic is long so that comprehensive information about the PAL tool can be contained in one place for easy reference.</span></span>  

 <span data-ttu-id="8d972-126">PAL 工具报告的以下分析和阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-126">The following analysis and thresholds are reported by the PAL tool.</span></span>  


|                                <span data-ttu-id="8d972-127">分析类型和名称</span><span class="sxs-lookup"><span data-stu-id="8d972-127">Analysis Type and Name</span></span>                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="8d972-128">分析说明</span><span class="sxs-lookup"><span data-stu-id="8d972-128">Analysis Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                        <span data-ttu-id="8d972-129">核心转储的磁盘： 磁盘可用空间</span><span class="sxs-lookup"><span data-stu-id="8d972-129">Disk: Disk Free Space for a Kernel Dump</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="8d972-130">此分析会检查以确保足够的可用磁盘空间来转储所有内存到磁盘的操作系统。</span><span class="sxs-lookup"><span data-stu-id="8d972-130">This analysis checks to make sure there is enough free disk space for the operating system to dump all memory to disk.</span></span> <span data-ttu-id="8d972-131">如果没有足够的磁盘空间可用，则操作系统将无法创建 memory.dmp，这是内核转储的根本原因分析所需的文件。</span><span class="sxs-lookup"><span data-stu-id="8d972-131">If insufficient disk space is available, then the operating system will fail to create a memory.dmp, file which is necessary to analyze the root cause of a kernel dump.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                    <span data-ttu-id="8d972-132">磁盘： 逻辑/物理磁盘接口分析</span><span class="sxs-lookup"><span data-stu-id="8d972-132">Disk: Logical/Physical Disk Interface Analysis</span></span>                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="8d972-133">此分析会查看每个物理磁盘的空闲时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-133">This analysis looks at the idle time of each of the physical disks.</span></span> <span data-ttu-id="8d972-134">磁盘空闲越多，越少正在使用该磁盘。</span><span class="sxs-lookup"><span data-stu-id="8d972-134">The more idle the disk is, the less the disk is being used.</span></span> <span data-ttu-id="8d972-135">在逻辑磁盘中使用一个磁盘时，最好使用此计数器。</span><span class="sxs-lookup"><span data-stu-id="8d972-135">This counter is best used when one disk is used in the logical disk.</span></span> <span data-ttu-id="8d972-136">"%空闲时间"报告的磁盘处于空闲状态的示例间隔期间的时间百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-136">“% Idle Time” reports the percentage of time during the sample interval that the disk was idle.</span></span><br /><br /> <span data-ttu-id="8d972-137">参考： 排除磁盘密集型的问题 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="8d972-137">Reference:  Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                <span data-ttu-id="8d972-138">磁盘： 逻辑/物理磁盘读/写延迟分析</span><span class="sxs-lookup"><span data-stu-id="8d972-138">Disk: Logical/Physical Disk Read/Write Latency Analysis</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="8d972-139">Windows 检测磁盘性能瓶颈的最可靠方法是通过测量其响应时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-139">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="8d972-140">如果响应时间大于.025 （25 毫秒为单位），这是一个保守的阈值，则可能会发生明显减慢速度和性能问题影响用户。</span><span class="sxs-lookup"><span data-stu-id="8d972-140">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span> <span data-ttu-id="8d972-141">详细信息，请参阅本主题中的逻辑/物理磁盘读/写延迟分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-141">For more information, refer to Logical/Physical Disk Read/Write Latency Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                           <span data-ttu-id="8d972-142">磁盘： 逻辑磁盘传输次数/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-142">Disk: Logical Disk Transfers/sec</span></span>                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="8d972-143">"磁盘传输次数/秒"是的速率的读取和写入磁盘上的操作。</span><span class="sxs-lookup"><span data-stu-id="8d972-143">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="8d972-144">此分析检查以查看是否有任何逻辑磁盘的阈值会显示不佳响应时间 （大于 25 毫秒的 I/O 操作的响应时间）。</span><span class="sxs-lookup"><span data-stu-id="8d972-144">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="8d972-145">如果为 true，则磁盘每秒传输数应处于或高于 80。</span><span class="sxs-lookup"><span data-stu-id="8d972-145">If this is true, then the disk transfers per second should be at or above 80.</span></span> <span data-ttu-id="8d972-146">如果没有，则磁盘体系结构需要进行调查。</span><span class="sxs-lookup"><span data-stu-id="8d972-146">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="8d972-147">不佳的磁盘 I/O 的最常见原因是重载在 SAN 上的 LUN。</span><span class="sxs-lookup"><span data-stu-id="8d972-147">The most common cause of poor disk I/O is LUN overloading on the SAN.</span></span> <span data-ttu-id="8d972-148">有关详细信息，请参阅本主题中的逻辑 Disk Transfers/sec。</span><span class="sxs-lookup"><span data-stu-id="8d972-148">For more information, refer to Logical Disk Transfers/sec in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                            <span data-ttu-id="8d972-149">磁盘： 逻辑磁盘可用空间百分比</span><span class="sxs-lookup"><span data-stu-id="8d972-149">Disk: LogicalDisk % Free Space</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="8d972-150">"%可用空间"是所选逻辑磁盘驱动器的总可用空间的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-150">“% Free Space” is the percentage of total usable space that was free on the selected logical disk drive.</span></span> <span data-ttu-id="8d972-151">小于 30%的可用磁盘驱动器空间之前，应该不会影响性能。</span><span class="sxs-lookup"><span data-stu-id="8d972-151">Performance should not be affected until the available disk drive space is less than 30 percent.</span></span> <span data-ttu-id="8d972-152">使用磁盘驱动器的 70%时，剩余的可用空间位于更靠近到磁盘的磁盘驱动器，在较低的性能级别进行操作的中心的主轴。</span><span class="sxs-lookup"><span data-stu-id="8d972-152">When 70 percent of the disk drive is used, the remaining free space is located closer to the disk's spindle at the center of the disk drive, which operates at a lower performance level.</span></span> <span data-ttu-id="8d972-153">可用磁盘空间不足可能会导致严重的磁盘性能。</span><span class="sxs-lookup"><span data-stu-id="8d972-153">Lack of free disk space can cause severe disk performance.</span></span><br /><br /> <span data-ttu-id="8d972-154">参考： NT 服务器和磁盘子系统性能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="8d972-154">Reference:  NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|   <span data-ttu-id="8d972-155">磁盘： 处理 IO Data Operations/sec 和处理 IO 其他操作每秒分析</span><span class="sxs-lookup"><span data-stu-id="8d972-155">Disk: Process IO Data Operations/sec and Process IO Other Operations/sec Analysis</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="8d972-156">这些计数器计数，包括文件、 网络和设备 I/o 进程生成的所有 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="8d972-156">These counters count all I/O activity generated by the process to include file, network and device I/Os.</span></span> <span data-ttu-id="8d972-157">进程正在执行超过 1,000 个我 / O 的每秒并将其标记为警告时，请检查这些分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-157">These analyses check when processes are doing more than 1,000 I/O’s per second and flag it as a warning.</span></span> <span data-ttu-id="8d972-158">这些分析最适用于在其他分析，如磁盘分析以确定哪些进程可能涉及的 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="8d972-158">These analyses are best used in correlation with other analyses such as disk analysis to determine which processes might be involved in the I/O activity.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                               <span data-ttu-id="8d972-159">内存： 可用内存</span><span class="sxs-lookup"><span data-stu-id="8d972-159">Memory: Available Memory</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="8d972-160">此分析检查总可用内存是否不足 – 10%可用发出警告和在可用的 5%的关键。</span><span class="sxs-lookup"><span data-stu-id="8d972-160">This analysis checks whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="8d972-161">每小时 10 MB 的下降趋势检测到，这可能表示潜在的即将推出的内存情况时，警告也会发出警报。</span><span class="sxs-lookup"><span data-stu-id="8d972-161">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, which can indicate a potential upcoming memory condition.</span></span> <span data-ttu-id="8d972-162">物理内存不足可能导致更高的特权模式下 CPU 和系统的延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-162">Low physical memory can cause increased privileged mode CPU and system delays.</span></span> <span data-ttu-id="8d972-163">有关详细信息，请参阅可用 MemoryAnalysis 本主题中。</span><span class="sxs-lookup"><span data-stu-id="8d972-163">For more information, refer to Available MemoryAnalysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                        <span data-ttu-id="8d972-164">内存： 可用系统页表项</span><span class="sxs-lookup"><span data-stu-id="8d972-164">Memory: Free System Page Table Entries</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="8d972-165">可用系统页表项 (PTE) 是当前未使用的系统页表条目数。</span><span class="sxs-lookup"><span data-stu-id="8d972-165">Free System Page Table Entries (PTE’s) are the number of page table entries not currently used by the system.</span></span> <span data-ttu-id="8d972-166">此分析确定是否在系统运行带 PTE 的通过检查是否有少于 5000 免费 PTE 的警告是否少于 10,000 位免费 PTE 的。</span><span class="sxs-lookup"><span data-stu-id="8d972-166">This analysis determines whether the system is running out of PTE’s by checking whether there are fewer than 5,000 free PTE’s with a Warning if there are fewer than 10,000 free PTE’s.</span></span> <span data-ttu-id="8d972-167">缺乏足够 PTE 可能会导致整个系统挂起。</span><span class="sxs-lookup"><span data-stu-id="8d972-167">Lack of enough PTE’s can result in systemwide hangs.</span></span> <span data-ttu-id="8d972-168">此外请注意，3 GB 开关将显著降低免费 PTE 量。</span><span class="sxs-lookup"><span data-stu-id="8d972-168">Also note that the /3GB switch will lower the amount of free PTE’s significantly.</span></span> <span data-ttu-id="8d972-169">详细信息，请参阅本主题中的可用系统页表条目分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-169">For more information, refer to Free System Page Table Entries Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                             <span data-ttu-id="8d972-170">内存： 内存泄漏检测</span><span class="sxs-lookup"><span data-stu-id="8d972-170">Memory: Memory Leak Detection</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="8d972-171">此分析确定的任何过程是否消耗大量系统的内存，并在进程是否在内存使用量随时间增加。</span><span class="sxs-lookup"><span data-stu-id="8d972-171">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-172">只要进程的内存返回到系统，占用大量内存的进程是没问题。</span><span class="sxs-lookup"><span data-stu-id="8d972-172">A process consuming large portions of memory is fine as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="8d972-173">查找增加图表中的趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-173">Look for increasing trends in the chart.</span></span> <span data-ttu-id="8d972-174">长的一段时间内为增长趋势可能指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-174">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="8d972-175">"专用字节数"是内存的当前大小 （字节），此进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="8d972-175">“Private Bytes” is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="8d972-176">此分析检查 10 MB 的每小时和 5 MB 的每小时增加趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-176">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="8d972-177">使用此分析在 PAL 中的可用内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-177">Use this analysis in correlation with the Available Memory analysis in PAL.</span></span> <span data-ttu-id="8d972-178">详细信息，请参阅本主题中的内存泄漏检测分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-178">For more information, refer to Memory Leak Detection Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                              |
|                             <span data-ttu-id="8d972-179">内存： 句柄泄漏检测</span><span class="sxs-lookup"><span data-stu-id="8d972-179">Memory: Handle Leak Detection</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="8d972-180">此分析检查的所有进程以确定多少处理每个已打开并以确定是否有句柄泄漏怀疑。</span><span class="sxs-lookup"><span data-stu-id="8d972-180">This analysis checks all of the processes to determine how many handles each has open and to determine whether a handle leak is suspected.</span></span> <span data-ttu-id="8d972-181">一个过程，配合大量的句柄和/或积极向上的趋势可能指示句柄泄漏，这通常会导致内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-181">A process with a large number of handles and/or an aggressive upward trend could indicate a handle leak, which typically results in a memory leak.</span></span> <span data-ttu-id="8d972-182">此进程当前打开的句柄的总数等于在此过程中每个线程当前打开的句柄总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-182">The total number of handles currently open by this process is equal to the sum of the handles currently open by each thread in this process.</span></span><br /><br /> <span data-ttu-id="8d972-183">参考： 调试诊断工具在 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="8d972-183">Reference:  Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                            <span data-ttu-id="8d972-184">内存： 内存 Pages Input/sec</span><span class="sxs-lookup"><span data-stu-id="8d972-184">Memory: Memory Pages Input/sec</span></span>                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="8d972-185">"Pages Input/sec"是从为解决强制分页错误的磁盘读取页的速率。</span><span class="sxs-lookup"><span data-stu-id="8d972-185">“Pages Input/sec” is the rate at which pages are read from disk to resolve hard page faults.</span></span> <span data-ttu-id="8d972-186">进程引用是不在其工作集或其他位置的物理内存，并且必须从磁盘中检索的虚拟内存中的页面时，将发生硬页面错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-186">Hard page faults occur when a process refers to a page in virtual memory that is not in its working set or elsewhere in physical memory, and must be retrieved from disk.</span></span> <span data-ttu-id="8d972-187">此分析会检查是否有超过 10 页文件的读取次数 / 秒。</span><span class="sxs-lookup"><span data-stu-id="8d972-187">This analysis checks whether there are more than 10 page file reads per second.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                               <span data-ttu-id="8d972-188">内存： 内存页/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-188">Memory: Memory Pages/sec</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="8d972-189">此分析检查"页/秒"是高 （如上所示为 1000)。</span><span class="sxs-lookup"><span data-stu-id="8d972-189">This analysis checks to see whether the “Pages/sec” is high (above 1,000).</span></span> <span data-ttu-id="8d972-190">如果高，然后在系统可能内存不足通过尝试进行分页到磁盘的内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-190">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="8d972-191">"页/秒"是从读取或写入磁盘为解决强制分页错误页的速率。</span><span class="sxs-lookup"><span data-stu-id="8d972-191">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="8d972-192">此计数器是导致系统范围延迟的错误种类的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="8d972-192">This counter is a primary indicator of the kinds of faults that cause systemwide delays.</span></span>  <span data-ttu-id="8d972-193">使用此分析在可用内存分析和 PAL 中的内存泄漏检测分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-193">Use this analysis in correlation with Available Memory analysis and Memory Leak Detection analysis in PAL.</span></span> <span data-ttu-id="8d972-194">如果在同一时间中引发警报，所有这些分析，这可能表示系统内存不足和可疑的进程涉及并按照 analysis PAL 中的内存泄漏检测分析中所述的步骤。</span><span class="sxs-lookup"><span data-stu-id="8d972-194">If all of these analyses are throwing alerts at the same time, then this may indicate the system is running out of memory and the suspected processes involved and follow analysis steps mentioned in the Memory Leak Detection analysis in PAL.</span></span><br /><br /> <span data-ttu-id="8d972-195">有关详细信息，请参阅本主题中的内存页/秒分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-195">For more information, refer to Memory Pages/sec Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                 |
|                      <span data-ttu-id="8d972-196">内存： 内存系统缓存驻留字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-196">Memory: Memory System Cache Resident Bytes</span></span>                       |                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="8d972-197">"系统缓存驻留字节数"是大小 （字节） 文件系统缓存中的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="8d972-197">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="8d972-198">此值仅包含当前物理页面，不包括任何当前未驻留的虚拟内存页面。</span><span class="sxs-lookup"><span data-stu-id="8d972-198">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="8d972-199">此值是一个组件的"内存\\\System 代码驻留字节数"表示所有当前正在物理内存的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="8d972-199">This value is a component of “Memory\\\System Code Resident Bytes” which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="8d972-200">此计数器显示上次观测的值; 仅它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="8d972-200">This counter displays the last observed value only; it is not an average.</span></span> <span data-ttu-id="8d972-201">此分析检查每小时 10 MB 的增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-201">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="8d972-202">承受负载时，服务器可能使用系统缓存，以便缓存如磁盘 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="8d972-202">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="8d972-203">在中使用相关进程 IO Data Operations/sec 和其他进程 IO 操作数/秒 PAL 中的分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-203">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses in PAL.</span></span><br /><br /> <span data-ttu-id="8d972-204">参考： 文件缓存性能和优化在 [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span><span class="sxs-lookup"><span data-stu-id="8d972-204">Reference: File Cache Performance and Tuning at [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)</span></span>                                                                                                                                                                                                                                                                                                                                      |
|                             <span data-ttu-id="8d972-205">内存： 池非分页字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-205">Memory: Pool Non Paged Bytes</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="8d972-206">"池非分页字节数"是的大小，以字节为单位，无法写入到的对象的系统内存区域的非分页池的磁盘、 但一旦分配就必须保留在物理内存中。</span><span class="sxs-lookup"><span data-stu-id="8d972-206">“Pool Nonpaged Bytes” is the size, in bytes, of the non-paged pool, an area of system memory for objects that cannot be written to disk, but must remain in physical memory as long as they are allocated.</span></span> <span data-ttu-id="8d972-207">此分析会检查以查看是否在系统即将接近最大的池非分页内存大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-207">This analysis checks to see whether the system is coming close to the maximum pool non paged memory size.</span></span> <span data-ttu-id="8d972-208">这是通过估计考虑到的池大小/3 GB、 物理内存大小和 32 位/64 位，然后确定值是否高于 60%的估计的池大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-208">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="8d972-209">如果系统变得接近最大大小时，然后在系统可能会遇到系统宽挂起。</span><span class="sxs-lookup"><span data-stu-id="8d972-209">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="8d972-210">Boot.ini 文件中的 3 GB 开关选项大大减少了此内存池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-210">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="8d972-211">详细信息，请参阅本主题中的 Pool Non-Paged 字节分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-211">For more information, refer to Pool Non-Paged Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                             |
|                               <span data-ttu-id="8d972-212">内存： 池分页字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-212">Memory: Pool Paged Bytes</span></span>                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="8d972-213">此分析会检查以查看是否在系统即将接近最大池分页内存大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-213">This analysis checks to see whether the system is coming close to the maximum pool paged memory size.</span></span> <span data-ttu-id="8d972-214">这是通过估计考虑到的池大小/3 GB、 物理内存大小和 32 位/64 位，然后确定值是否高于 60%的估计的池大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-214">It does this by estimating the pool sizes taking into consideration /3GB, physical memory size, and 32-bit/64-bit, then determining whether the value is higher than 60 percent of the estimated pool size.</span></span> <span data-ttu-id="8d972-215">如果系统变得接近最大大小时，然后在系统可能会遇到系统宽挂起。</span><span class="sxs-lookup"><span data-stu-id="8d972-215">If the system becomes close to the maximum size, then the system could experience system wide hangs.</span></span><br /><br /> <span data-ttu-id="8d972-216">Boot.ini 文件中的 3 GB 开关选项大大减少了此内存池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-216">The /3GB switch option in the boot.ini file significantly reduces the size of this memory pool.</span></span><br /><br /> <span data-ttu-id="8d972-217">详细信息，请参阅本主题中的池分页字节分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-217">For more information, refer to Pool Paged Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                             <span data-ttu-id="8d972-218">内存： 进程线程计数</span><span class="sxs-lookup"><span data-stu-id="8d972-218">Memory: Process Thread Count</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="8d972-219">此分析会检查所有进程来确定某个进程是否拥有 500 多个线程和线程数已增加每小时 50 线程。</span><span class="sxs-lookup"><span data-stu-id="8d972-219">This analysis checks all of the processes to determine whether a process has more than 500 threads and if the number of threads is increasing by 50 threads per hour.</span></span> <span data-ttu-id="8d972-220">一个过程，配合大量的线程和/或积极向上的趋势可能指示存在线程泄漏，这通常会导致内存泄漏或高上下文切换。</span><span class="sxs-lookup"><span data-stu-id="8d972-220">A process with a large number of threads and/or an aggressive upward trend could indicate a thread leak which typically results in either a memory leak or high context switching.</span></span> <span data-ttu-id="8d972-221">高上下文切换会导致高特权模式下 CPU。</span><span class="sxs-lookup"><span data-stu-id="8d972-221">High context switching will result in high privileged mode CPU.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                              <span data-ttu-id="8d972-222">内存： 进程工作集</span><span class="sxs-lookup"><span data-stu-id="8d972-222">Memory: Process Working Set</span></span>                              |                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="8d972-223">"工作集"是当前大小 （字节），此过程的工作集。</span><span class="sxs-lookup"><span data-stu-id="8d972-223">“Working Set” is the current size, in bytes, of the working set of this process.</span></span> <span data-ttu-id="8d972-224">工作集是进程中的线程最近使用过的内存页的集合。</span><span class="sxs-lookup"><span data-stu-id="8d972-224">The working set is the set of memory pages touched recently by the threads in the process.</span></span> <span data-ttu-id="8d972-225">如果计算机中的可用内存高于阈值，页面会保留在进程的工作集，即使未使用。</span><span class="sxs-lookup"><span data-stu-id="8d972-225">If free memory in the computer is above a threshold, pages are left in the working set of a process even if they are not in use.</span></span> <span data-ttu-id="8d972-226">如果可用内存降到阈值以下，将从工作集中削减页。</span><span class="sxs-lookup"><span data-stu-id="8d972-226">When free memory falls below a threshold, pages are trimmed from working sets.</span></span> <span data-ttu-id="8d972-227">如果需要它们随后将软恢复到的工作集在离开主内存之前。</span><span class="sxs-lookup"><span data-stu-id="8d972-227">If they are needed they will then be soft-faulted back into the working set before leaving main memory.</span></span> <span data-ttu-id="8d972-228">此分析检查 10 MB 的增长趋势或在每个进程的详细信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-228">This analysis checks for an increasing trend of 10 MB’s or more in each of the processes.</span></span> <span data-ttu-id="8d972-229">在使用 PAL 中的可用内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-229">Use in correlation with Available Memory analysis in PAL.</span></span><br /><br /> <span data-ttu-id="8d972-230">参考： 检测在内存瓶颈 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="8d972-230">Reference:  Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>                                                                                                                                                                                                                                                                                                                                                                                           |
|                     <span data-ttu-id="8d972-231">网络： 网络输出队列长度分析</span><span class="sxs-lookup"><span data-stu-id="8d972-231">Network: Network Output Queue Length Analysis</span></span>                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="8d972-232">此分析进行检查以查看多少线程正在等待网络适配器。</span><span class="sxs-lookup"><span data-stu-id="8d972-232">This analysis checks to see how many threads are waiting on the network adapter.</span></span> <span data-ttu-id="8d972-233">如果多个线程在等待上的网络适配器，然后在系统可能占满网络 I/O 由于网络延迟或网络带宽。</span><span class="sxs-lookup"><span data-stu-id="8d972-233">If a lot of threads are waiting on the network adapter, then the system is probably saturating the network I/O due to network latency or network bandwidth.</span></span> <span data-ttu-id="8d972-234">"Output Queue Length"是输出包列队 （数据包） 的长度。</span><span class="sxs-lookup"><span data-stu-id="8d972-234">“Output Queue Length” is the length of the output packet queue (in packets).</span></span> <span data-ttu-id="8d972-235">延迟来指示这是长度大于 2，和瓶颈应找出并消除了在可能的情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-235">Delays are indicated if this is longer than two, and the bottleneck should be found and eliminated, if possible.</span></span> <span data-ttu-id="8d972-236">网络输出队列的典型原因包括大量的小型网络请求和网络延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-236">Typical causes of network output queuing include high numbers of small network requests and network latency.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                         <span data-ttu-id="8d972-237">网络： 网络使用率分析</span><span class="sxs-lookup"><span data-stu-id="8d972-237">Network: Network Utilization Analysis</span></span>                         |                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="8d972-238">"Bytes Total/sec"是发送和每个网络适配器，包括组帧字符上接收字节的速率。</span><span class="sxs-lookup"><span data-stu-id="8d972-238">“Bytes Total/sec” is the rate at which bytes are sent and received over each network adapter, including framing characters.</span></span> <span data-ttu-id="8d972-239">"Network Interface\Bytes Received/sec"是"Network Interface\Bytes Received/sec"和"Network Interface\Bytes Sent/sec"的总和。</span><span class="sxs-lookup"><span data-stu-id="8d972-239">“Network Interface\Bytes Received/sec” is a sum of “Network Interface\Bytes Received/sec” and “Network Interface\Bytes Sent/sec”.</span></span> <span data-ttu-id="8d972-240">此计数器可帮助你了解在您的网络适配器的流量是否已饱和以及您是否需要添加另一个网络适配器。</span><span class="sxs-lookup"><span data-stu-id="8d972-240">This counter helps you know whether the traffic at your network adapter is saturated and whether you need to add another network adapter.</span></span> <span data-ttu-id="8d972-241">可以确定问题的速度取决于类型以及是否与其他应用程序共享带宽有的网络。</span><span class="sxs-lookup"><span data-stu-id="8d972-241">How quickly you can identify a problem depends on the type of network you have as well as whether you share bandwidth with other applications.</span></span> <span data-ttu-id="8d972-242">此分析将"Bytes Total/sec"转换为位并将它与计算网络利用率的网络适配器的当前带宽进行比较。</span><span class="sxs-lookup"><span data-stu-id="8d972-242">This analysis converts “Bytes Total/sec” to bits and compares it to the current bandwidth of the network adapter to calculate network utilization.</span></span> <span data-ttu-id="8d972-243">接下来，它检查利用率高于 50%。</span><span class="sxs-lookup"><span data-stu-id="8d972-243">Next, it checks for utilization above 50 percent.</span></span><br /><br /> <span data-ttu-id="8d972-244">参考： 测量在.NET 应用程序性能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="8d972-244">Reference:  Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>                                                                                                                                                                                                                                                                                                                                    |
|                   <span data-ttu-id="8d972-245">分页文件： 分页文件使用率 %和 %使用情况峰值</span><span class="sxs-lookup"><span data-stu-id="8d972-245">Paging File: Paging File % Usage and % Usage Peak</span></span>                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="8d972-246">分页文件实例的使用以百分比表示的量。</span><span class="sxs-lookup"><span data-stu-id="8d972-246">The amount of the page file instance in use in percent.</span></span> <span data-ttu-id="8d972-247">另请参阅"过程\\\Page 文件字节数"。</span><span class="sxs-lookup"><span data-stu-id="8d972-247">See also “Process\\\Page File Bytes”.</span></span> <span data-ttu-id="8d972-248">此分析会检查是否大于 70%的使用率的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-248">This analysis checks whether the percentage of usage is greater than 70 percent.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|  <span data-ttu-id="8d972-249">处理器： 处理器使用率分析和进程过多的处理器使用率</span><span class="sxs-lookup"><span data-stu-id="8d972-249">Processor: Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="8d972-250">此计数器是处理器活动的主要指示器，并显示在采样间隔期间观察到的忙时间的平均百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-250">This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="8d972-251">通过监视服务处于非活动状态的时间然后减去该值从 100%，即可计算出它。</span><span class="sxs-lookup"><span data-stu-id="8d972-251">It is calculated by monitoring the time that the service is inactive and subtracting that value from 100 percent.</span></span> <span data-ttu-id="8d972-252">此分析检查使用率大于 60%的每个处理器。</span><span class="sxs-lookup"><span data-stu-id="8d972-252">This analysis checks for utilization greater than 60 percent on each processor.</span></span> <span data-ttu-id="8d972-253">如果是这样，确定它是否高用户模式 CPU 或高特权模式。</span><span class="sxs-lookup"><span data-stu-id="8d972-253">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="8d972-254">如果高特权模式下 CPU 怀疑有问题，请参阅 PAL 中的特权模式下 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-254">If high privileged mode CPU is suspected, then see the Privileged Mode CPU analysis in PAL.</span></span> <span data-ttu-id="8d972-255">如果怀疑用户模式下处理器瓶颈，请考虑使用进程探查器分析导致高 CPU 占用率的函数。</span><span class="sxs-lookup"><span data-stu-id="8d972-255">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                           <span data-ttu-id="8d972-256">处理器： 处理器队列长度</span><span class="sxs-lookup"><span data-stu-id="8d972-256">Processor: Processor Queue Length</span></span>                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="8d972-257">此分析确定平均处理器队列长度是否超过处理器的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-257">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="8d972-258">如果是这样，这可能表示处理器瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-258">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="8d972-259">使用此分析在特权模式下 CPU 分析和过多的处理器使用 PAL 中的进程分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-259">Use this analysis in correlation with Privileged Mode CPU analysis and Excessive Processor Use by Process analysis in PAL.</span></span> <span data-ttu-id="8d972-260">详细信息，请参阅本主题中的处理器队列长度分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-260">For detailed information, refer to Processor Queue Length Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                       <span data-ttu-id="8d972-261">处理器： 特权模式下 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="8d972-261">Processor:  Privileged Mode CPU Analysis</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="8d972-262">此计数器指示线程在特权模式下运行的时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-262">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="8d972-263">当你的应用程序调用时 （例如，可执行文件或网络 I/O 或分配内存） 的操作系统功能时，这些操作系统函数在特权模式下执行。</span><span class="sxs-lookup"><span data-stu-id="8d972-263">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span> <span data-ttu-id="8d972-264">此分析进行检查以查看特权模式下 CPU 是否占用了超过 30%的总 CPU。</span><span class="sxs-lookup"><span data-stu-id="8d972-264">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="8d972-265">如果这样，然后的 CPU 使用率可能会引起如网络、 内存或磁盘 I/O 处理器之外的另一个瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-265">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="8d972-266">在与处理器相关中的使用： 将 %Interrupt Time 和处理器： PAL 中的大量的上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-266">Use in correlation with Processor:  % Interrupt Time and Processor:  High Context Switching analyses in PAL.</span></span> <span data-ttu-id="8d972-267">详细信息，请参阅本主题中的特权模式下 CPU 分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-267">For more information, refer to Privileged Mode CPU Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                               <span data-ttu-id="8d972-268">处理器： 中断时间百分比</span><span class="sxs-lookup"><span data-stu-id="8d972-268">Processor: Interrupt Time</span></span>                               |                                                                                                                                                                                                                                                                        <span data-ttu-id="8d972-269">"%中断时间"是处理器用于接收和服务硬件中断采样间隔期间的时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-269">“% Interrupt Time” is the time the processor spends receiving and servicing hardware interrupts during sample intervals.</span></span> <span data-ttu-id="8d972-270">此值是活动的生成中断，例如系统时钟、 鼠标、 磁盘驱动程序、 数据通讯线路、 网络接口卡和其他外围设备的设备的间接指示器。</span><span class="sxs-lookup"><span data-stu-id="8d972-270">This value is an indirect indicator of the activity of devices that generate interrupts, such as the system clock, the mouse, disk drivers, data communication lines, network interface cards and other peripheral devices.</span></span> <span data-ttu-id="8d972-271">完成某项任务或需要注意时，这些设备通常会中断处理器。</span><span class="sxs-lookup"><span data-stu-id="8d972-271">These devices normally interrupt the processor when they have completed a task or require attention.</span></span> <span data-ttu-id="8d972-272">中断期间暂挂正常线程执行。</span><span class="sxs-lookup"><span data-stu-id="8d972-272">Normal thread execution is suspended during interrupts.</span></span> <span data-ttu-id="8d972-273">大多数系统时钟每隔 10 毫秒，创建中断活动的背景会中断处理器。</span><span class="sxs-lookup"><span data-stu-id="8d972-273">Most system clocks interrupt the processor every 10 milliseconds, creating a background of interrupt activity.</span></span> <span data-ttu-id="8d972-274">显著提高此计数器指示潜在硬件问题。</span><span class="sxs-lookup"><span data-stu-id="8d972-274">A dramatic increase in this counter indicates potential hardware problems.</span></span> <span data-ttu-id="8d972-275">此分析检查"%中断时间百分比"大于 30%。</span><span class="sxs-lookup"><span data-stu-id="8d972-275">This analysis checks for “% Interrupt Time” greater than 30 percent.</span></span> <span data-ttu-id="8d972-276">如果发生这种情况，请考虑更新与此警报相关联的硬件的设备驱动程序。</span><span class="sxs-lookup"><span data-stu-id="8d972-276">If this occurs, then consider updating devices drivers for hardware that correlates to this alert.</span></span><br /><br /> <span data-ttu-id="8d972-277">参考： 测量在.NET 应用程序性能 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span><span class="sxs-lookup"><span data-stu-id="8d972-277">Reference: Measuring .NET Application Performance at [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)</span></span>                                                                                                                                                                                                                                                                        |
|                          <span data-ttu-id="8d972-278">处理器： 高上下文切换</span><span class="sxs-lookup"><span data-stu-id="8d972-278">Processor:  High Context Switching</span></span>                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="8d972-279">较高优先级线程抢先于当前正在运行的较低优先级线程或高优先级线程阻止时，会发生上下文切换。</span><span class="sxs-lookup"><span data-stu-id="8d972-279">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="8d972-280">当多个线程共享相同的优先级别，会发生上下文切换的高级别。</span><span class="sxs-lookup"><span data-stu-id="8d972-280">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="8d972-281">这通常表明过多的线程将在系统上处理器的争用。</span><span class="sxs-lookup"><span data-stu-id="8d972-281">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="8d972-282">作为一般规则，每个处理器每秒 5,000 个较低的上下文切换费率不值得担心。</span><span class="sxs-lookup"><span data-stu-id="8d972-282">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="8d972-283">如果上下文切换的速率超过 15,000 每秒每个处理器，则一个约束。</span><span class="sxs-lookup"><span data-stu-id="8d972-283">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span> <span data-ttu-id="8d972-284">详细信息，请参阅本主题中的高上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-284">For more information, refer to High Context Switching Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|              <span data-ttu-id="8d972-285">冻结业务流程的 Microsof BizTalk Server: BizTalk</span><span class="sxs-lookup"><span data-stu-id="8d972-285">Microsof BizTalk Server: BizTalk Dehydrating Orchestrations</span></span>              |                                                                                                                                                                                        <span data-ttu-id="8d972-286">在同时运行多长时间运行的业务流程，内存和性能问题时，可能。</span><span class="sxs-lookup"><span data-stu-id="8d972-286">When many long-running business processes are running at the same time, memory and performance issues are possible.</span></span> <span data-ttu-id="8d972-287">业务流程引擎通过“冻结”和“解除冻结”业务流程实例来解决这些问题。</span><span class="sxs-lookup"><span data-stu-id="8d972-287">The orchestration engine addresses these issues by "dehydrating" and "rehydrating" orchestration instances.</span></span> <span data-ttu-id="8d972-288">冻结是将业务流程的状态序列化到 SQL Server 数据库中的过程。</span><span class="sxs-lookup"><span data-stu-id="8d972-288">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="8d972-289">解除冻结是此过程的相反： 反序列化数据库从业务流程的最后运行状态。</span><span class="sxs-lookup"><span data-stu-id="8d972-289">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="8d972-290">冻结用于通过减少必须在内存中同时实例化的业务流程数来最大程度地降低系统资源的使用。</span><span class="sxs-lookup"><span data-stu-id="8d972-290">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="8d972-291">因此，dehyrations 节省内存消耗，但若要执行的操作相对开销很大。</span><span class="sxs-lookup"><span data-stu-id="8d972-291">Therefore, dehyrations save memory consumption, but are relatively expensive operations to perform.</span></span> <span data-ttu-id="8d972-292">此分析会 dehydrations 10 或更多的检查。</span><span class="sxs-lookup"><span data-stu-id="8d972-292">This analysis checks for dehydrations of 10 or more.</span></span> <span data-ttu-id="8d972-293">如果是这样，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能内存不足 （虚拟或物理），较高的业务流程数都在等待消息，或未正确设置冻结设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-293">If so, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may be running out of memory (either virtual or physical), a high number of orchestrations are waiting on messages, or the dehydration settings are not set properly.</span></span><br /><br /> <span data-ttu-id="8d972-294">参考： 业务流程冻结和解除冻结在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="8d972-294">Reference:  Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>                                                                                                                                                                                         |
|               <span data-ttu-id="8d972-295">Microsoft BizTalk Server: BizTalk 高数据库会话</span><span class="sxs-lookup"><span data-stu-id="8d972-295">Microsoft BizTalk Server:  BizTalk High Database Sessions</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="8d972-296">此计数器有两个可能值： 正常 (0) 或超出了阈值 (1)。</span><span class="sxs-lookup"><span data-stu-id="8d972-296">This counter has two possible values: normal (0) or exceeded (1).</span></span> <span data-ttu-id="8d972-297">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="8d972-297">This analysis checks for a value of 1.</span></span> <span data-ttu-id="8d972-298">如果是这样，BizTalk 超出允许的数据库会话数的阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-298">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="8d972-299">此值控制 BizTalk 主机阻止设置中的"每 CPU 的数据库连接"值。</span><span class="sxs-lookup"><span data-stu-id="8d972-299">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span> <span data-ttu-id="8d972-300">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-300">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-301">通过使用 BizTalk:Message Agent 性能对象类别下的 Database session 性能计数器，可以监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-301">You can monitor the number of active Database connections by using the Database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-302">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-302">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-303">详细信息，请参阅本主题中的 BizTalk 高数据库会话分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-303">For more information, refer to BizTalk High Database Sessions Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                               |
|                 <span data-ttu-id="8d972-304">Microsoft BizTalk Server: BizTalk 高数据库大小</span><span class="sxs-lookup"><span data-stu-id="8d972-304">Microsoft BizTalk Server: BizTalk High Database Size</span></span>                  |                                                                                                                                                                                                         <span data-ttu-id="8d972-305">此计数器将设置为值 1，如果任何一个条件为数据库阈值中的消息计数列出发生。</span><span class="sxs-lookup"><span data-stu-id="8d972-305">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="8d972-306">默认情况下主机消息阻止阈值的数据库中的计数设置为 50000，会触发在下列情况下的在触发阻止条件的值：</span><span class="sxs-lookup"><span data-stu-id="8d972-306">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span><br /><br /> <span data-ttu-id="8d972-307">的发布到工作、 状态和已挂起的队列的订阅主机的主机实例消息总数超过 50,000。</span><span class="sxs-lookup"><span data-stu-id="8d972-307">-   The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span><br /><span data-ttu-id="8d972-308">-在后台处理表或跟踪表中的消息数超过 500,000 条消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-308">-   The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span><br /><br /> <span data-ttu-id="8d972-309">如果发生这种情况，请考虑将减少数据库中的消息的数目的操作过程。</span><span class="sxs-lookup"><span data-stu-id="8d972-309">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="8d972-310">例如，请确保在 SQL Server 作业[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]正常运行，并使用中的组中心页[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台来确定消息逐渐累积引起大量挂起消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-310">For example, ensure the SQL Server jobs in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are running without error and use the Group Hub page in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span> <span data-ttu-id="8d972-311">有关详细信息，请参阅 BizTalk 高数据库大小分析此主题中。</span><span class="sxs-lookup"><span data-stu-id="8d972-311">For more information, refer to BizTalk High Database Size Analysis in this topic.</span></span>                                                                                                                                                                                                         |
|           <span data-ttu-id="8d972-312">Microsoft BizTalk Server: BizTalk 高进程内消息计数</span><span class="sxs-lookup"><span data-stu-id="8d972-312">Microsoft BizTalk Server:  BizTalk High In-Process Message Count</span></span>            |                                                                                                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="8d972-313">此分析检查高进程内消息计数计数器来确定是否发生这种类型的限制。</span><span class="sxs-lookup"><span data-stu-id="8d972-313">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="8d972-314">如果是这样，请考虑调整"每 CPU 消息进程内"设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-314">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="8d972-315">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-315">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-316">在"进程内消息数 CPU"设置禁用基于每 CPU 的进程内消息数的阻止功能中输入值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-316">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="8d972-317">"进程内消息数 CPU"设置的默认值为 1000。</span><span class="sxs-lookup"><span data-stu-id="8d972-317">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="8d972-318">请注意，修改此值可能还会影响在低延迟的消息和/或 BizTalk 资源的效率。</span><span class="sxs-lookup"><span data-stu-id="8d972-318">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span> <span data-ttu-id="8d972-319">详细信息，请参阅本主题中的 BizTalk 高进程内消息计数分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-319">For more information, refer to BizTalk High In-Process Message Count Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|             <span data-ttu-id="8d972-320">Microsoft BizTalk Server: BizTalk 高消息送达速率</span><span class="sxs-lookup"><span data-stu-id="8d972-320">Microsoft BizTalk Server:  BizTalk High Message Delivery Rate</span></span>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="8d972-321">此分析检查的值为 1 高消息送达速率计数器中。</span><span class="sxs-lookup"><span data-stu-id="8d972-321">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="8d972-322">高消息送达速率可能引起高处理复杂性、 出站适配器速度缓慢或系统资源出现暂时短缺。</span><span class="sxs-lookup"><span data-stu-id="8d972-322">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span> <span data-ttu-id="8d972-323">详细信息，请参阅本主题中的 BizTalk 高消息送达速率分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-323">For more information, refer to BizTalk High Message Delivery Rate Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|            <span data-ttu-id="8d972-324">Microsoft BizTalk Server: BizTalk 高消息发布速率</span><span class="sxs-lookup"><span data-stu-id="8d972-324">Microsoft BizTalk Server:  BizTalk High Message Publishing Rate</span></span>            |                                                                                                                                                                                       <span data-ttu-id="8d972-325">入站的主机阻止，也称为消息发布阻止在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，应用于包含的主机实例接收适配器或业务流程的消息发布到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="8d972-325">Inbound host throttling, also known as message publishing throttling in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], is applied to host instances that contain receive adapters or orchestrations that publish messages to the MessageBox database.</span></span> <span data-ttu-id="8d972-326">此分析检查的值为 1 高消息发布速率计数器中。</span><span class="sxs-lookup"><span data-stu-id="8d972-326">This analysis checks for a value of 1 in the High Message Publishing Rate counter.</span></span> <span data-ttu-id="8d972-327">如果发生这种情况，然后在数据库无法跟上的消息发布速率到 BizTalk MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="8d972-327">If this occurs, then the database cannot keep up with the publishing rate of messages to the BizTalk MessageBox database.</span></span><br /><br /> <span data-ttu-id="8d972-328">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-328">References:</span></span><br /><br /> <span data-ttu-id="8d972-329">-主机阻止性能计数器在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-329">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="8d972-330">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-330">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="8d972-331">消息发布阻止在设置对话框 [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span><span class="sxs-lookup"><span data-stu-id="8d972-331">-   Message Publishing Throttling Settings Dialog Box at [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)</span></span><br /><span data-ttu-id="8d972-332">-什么是主机阻止？在 [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span><span class="sxs-lookup"><span data-stu-id="8d972-332">-   What is Host Throttling? at [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)</span></span>                                                                                                                                                                                        |
|                <span data-ttu-id="8d972-333">Microsoft BizTalk Server: BizTalk 高进程内存</span><span class="sxs-lookup"><span data-stu-id="8d972-333">Microsoft BizTalk Server:  BizTalk High Process Memory</span></span>                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="8d972-334">限制阈值设置 BizTalk 进程内存使用情况是内存的相比工作集大小和可用虚拟内存总量的进程的总和，如果输入一个介于 1 和 100 之间使用百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-334">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="8d972-335">在指定百分比值时，将按固定的时间间隔来重新计算进程内存阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-335">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="8d972-336">此分析检查 1 中的较高的进程内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-336">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="8d972-337">详细信息，请参阅本主题中的 BizTalk 高进程内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-337">For more information, refer to BizTalk High Process Memory Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                 <span data-ttu-id="8d972-338">Microsoft BizTalk Server: BizTalk 高系统内存</span><span class="sxs-lookup"><span data-stu-id="8d972-338">Microsoft BizTalk Server:  BizTalk High System Memory</span></span>                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="8d972-339">BizTalk 物理内存使用情况限制阈值设置为输入内存消耗与从 1 到 100 之间的如果值可用的物理内存总量的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-339">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="8d972-340">如果输入大于 100 的值，此设置也可以是以兆字节表示的可用物理内存的总量。</span><span class="sxs-lookup"><span data-stu-id="8d972-340">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="8d972-341">输入值 0 可以禁用基于物理内存使用率的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-341">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="8d972-342">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-342">The default value is 0.</span></span> <span data-ttu-id="8d972-343">详细信息，请参阅本主题中的 BizTalk 高的系统内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-343">For more information, refer to BizTalk High System Memory Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                 <span data-ttu-id="8d972-344">Microsoft BizTalk Server: BizTalk 高线程计数</span><span class="sxs-lookup"><span data-stu-id="8d972-344">Microsoft BizTalk Server:  BizTalk High Thread Count</span></span>                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="8d972-345">"每 CPU 线程数"是包括线程使用的适配器的主机进程中线程的总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-345">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="8d972-346">如果超出此阈值，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-346">If this threshold is exceeded, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="8d972-347">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-347">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="8d972-348">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-348">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="8d972-349">默认情况下禁用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-349">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="8d972-350">详细信息，请参阅本主题中的 BizTalk 高的线程计数分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-350">For more information, refer to BizTalk High Thread Count Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                 <span data-ttu-id="8d972-351">Microsoft BizTalk Server: BizTalk 主机队列长度</span><span class="sxs-lookup"><span data-stu-id="8d972-351">Microsoft BizTalk Server:  BizTalk Host Queue Length</span></span>                  |                                                                                                                                                                                                                                                                                            <span data-ttu-id="8d972-352">BizTalk 主机队列长度跟踪特定主机队列中消息的总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-352">The BizTalk Host Queue Length tracks the total number of messages in the particular host queue.</span></span> <span data-ttu-id="8d972-353">长度大小 （即，BizTalk:MessageBox:HostCounters:Host 队列-长度） 可用于为提供正在排队等候在内部通过显示各个主机的队列深度的消息数的更详细的视图。</span><span class="sxs-lookup"><span data-stu-id="8d972-353">You can use length size (i.e., ‘BizTalk:MessageBox:HostCounters:Host Queue – Length’) to give a more detailed view of the number of messages being queued up internally by showing the queue depth for an individual host.</span></span> <span data-ttu-id="8d972-354">此计数器可确定是否遇到瓶颈特定主机。</span><span class="sxs-lookup"><span data-stu-id="8d972-354">This counter can be useful in determining if a specific host is bottlenecked.</span></span> <span data-ttu-id="8d972-355">假设每个传输协议为使用唯一的主机，这可以帮助确定潜在的传输瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-355">Assuming unique hosts are used for each transport, this can be helpful in determining potential transport bottlenecks.</span></span> <span data-ttu-id="8d972-356">此分析检查平均队列长度大于 1。</span><span class="sxs-lookup"><span data-stu-id="8d972-356">This analysis checks for average queue lengths greater than 1.</span></span> <span data-ttu-id="8d972-357">目标主机的情况下，主机队列长度是通过聚合所有队列 (工作 Q，状态 Q 挂起 Q) 的记录计数的加权的队列长度。</span><span class="sxs-lookup"><span data-stu-id="8d972-357">The Host Queue Length is a weighted Queue length by aggregating the record count of all the Queues (Work Q, State Q, Suspended Q) of the target host.</span></span><br /><br /> <span data-ttu-id="8d972-358">参考： BizTalk Server 2006： 管理成功在性能实验室[ http://go.microsoft.com/fwlink/?linkid=104152 ](http://go.microsoft.com/fwlink/?linkid=104152) **注意：** 此白皮书也是适用于 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="8d972-358">Reference: BizTalk Server 2006: Managing a Successful Performance Lab at [http://go.microsoft.com/fwlink/?linkid=104152](http://go.microsoft.com/fwlink/?linkid=104152) **Note:**  This white paper is also applicable to BizTalk Server.</span></span>                                                                                                                                                                                                                                                                                             |
|        <span data-ttu-id="8d972-359">Microsoft BizTalk Server: BizTalk 主机挂起的消息队列长度</span><span class="sxs-lookup"><span data-stu-id="8d972-359">Microsoft BizTalk Server: BizTalk Host Suspended Messages Queue Length</span></span>         |                                                                                                                                                                                          <span data-ttu-id="8d972-360">此计数器跟踪特定主机的挂起的消息总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-360">This counter tracks the total number of suspended messages for the particular host.</span></span> <span data-ttu-id="8d972-361">挂起的消息是消息或业务流程实例的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止处理因出错而系统或消息中。</span><span class="sxs-lookup"><span data-stu-id="8d972-361">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="8d972-362">通常，根据系统问题的解决办法，由系统错误导致的挂起实例是可恢复的。</span><span class="sxs-lookup"><span data-stu-id="8d972-362">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="8d972-363">通常情况下，由于消息问题的挂起的实例不可恢复，以及消息本身必须修复并重新提交到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="8d972-363">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span><br /><br /> <span data-ttu-id="8d972-364">挂起的消息队列是包含为其错误或故障已处理过程中遇到的工作项的队列。</span><span class="sxs-lookup"><span data-stu-id="8d972-364">The suspended message queue is a queue that contains work items for which an error or failure was encountered during processing.</span></span> <span data-ttu-id="8d972-365">挂起队列将一直存储这些消息，直到它们被纠正、重新处理或被删除。</span><span class="sxs-lookup"><span data-stu-id="8d972-365">A suspended queue stores the messages until they can be corrected and reprocessed, or deleted.</span></span> <span data-ttu-id="8d972-366">此分析检查挂起的任何的消息匹配项。</span><span class="sxs-lookup"><span data-stu-id="8d972-366">This analysis checks for any occurrence of suspended messages.</span></span> <span data-ttu-id="8d972-367">为增长趋势可能指示严重的处理错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-367">An increasing trend could indicate severe processing errors.</span></span><br /><br /> <span data-ttu-id="8d972-368">参考： BizTalk Server 2004： 监视和故障排除在 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="8d972-368">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>                                                                                                                                                                                          |
|                     <span data-ttu-id="8d972-369">BizTalk Server: BizTalk 空闲业务流程</span><span class="sxs-lookup"><span data-stu-id="8d972-369">BizTalk Server:  BizTalk Idle Orchestrations</span></span>                      |                                                                                                                    <span data-ttu-id="8d972-370">当前以主机实例为宿主的空闲业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-370">Number of idle orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="8d972-371">此计数器是指没有进展也不可冻结的业务流程。</span><span class="sxs-lookup"><span data-stu-id="8d972-371">This counter refers to orchestrations that are not making progress but are not dehydratable.</span></span> <span data-ttu-id="8d972-372">业务流程被阻止时，出现这种情况，可以等待接收、 侦听或延迟在原子事务中。</span><span class="sxs-lookup"><span data-stu-id="8d972-372">This situation can occur when the orchestration is blocked, waiting for a receive, listen, or delay in an atomic transaction.</span></span> <span data-ttu-id="8d972-373">如果累积了大量的非可冻结业务流程，BizTalk 可能会耗尽内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-373">If a large number of non-dehydratable orchestrations accumulate, then BizTalk may run out of memory.</span></span><br /><br /> <span data-ttu-id="8d972-374">冻结是将业务流程的状态序列化到 SQL Server 数据库中的过程。</span><span class="sxs-lookup"><span data-stu-id="8d972-374">Dehydration is the process of serializing the state of an orchestration into a SQL Server database.</span></span> <span data-ttu-id="8d972-375">解除冻结是此过程的相反： 反序列化数据库从业务流程的最后运行状态。</span><span class="sxs-lookup"><span data-stu-id="8d972-375">Rehydration is the reverse of this process: deserializing the last running state of an orchestration from the database.</span></span> <span data-ttu-id="8d972-376">冻结用于通过减少必须在内存中同时实例化的业务流程数来最大程度地降低系统资源的使用。</span><span class="sxs-lookup"><span data-stu-id="8d972-376">Dehydration is used to minimize the use of system resources by reducing the number of orchestrations that have to be instantiated in memory at one time.</span></span> <span data-ttu-id="8d972-377">引擎保存状态来冻结实例，并释放该实例所占用的内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-377">The engine dehydrates the instance by saving the state, and frees up the memory required by the instance.</span></span> <span data-ttu-id="8d972-378">通过冻结休眠的业务流程实例，该引擎使得大量长时间运行的业务流程，以同时在同一台计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="8d972-378">By dehydrating dormant orchestration instances, the engine makes it possible for a large number of long-running business processes to run concurrently on the same computer.</span></span> <span data-ttu-id="8d972-379">此分析检查每小时一个空闲业务流程为增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-379">This analysis checks for an increasing trend of one idle orchestration per hour.</span></span><br /><br /> <span data-ttu-id="8d972-380">参考： 业务流程冻结和解除冻结在  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span><span class="sxs-lookup"><span data-stu-id="8d972-380">Reference: Orchestration Dehydration and Rehydration at  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)</span></span>                                                                                                                     |
|                       <span data-ttu-id="8d972-381">BizTalk Server: BizTalk 的入站延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-381">BizTalk Server:  BizTalk Inbound Latency</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="8d972-382">以毫秒为单位自消息引擎文档从接收适配器发布到 MessageBox 为止的平均延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-382">Average latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the MessageBox.</span></span> <span data-ttu-id="8d972-383">减少滞后时间是 BizTalk 中，某些用户重要因此跟踪时间的文档所用的入站适配器中的量是很重要。</span><span class="sxs-lookup"><span data-stu-id="8d972-383">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span> <span data-ttu-id="8d972-384">详细信息，请参阅本主题中的 BizTalk 的入站延迟分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-384">For more information, refer to BizTalk Inbound Latency Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                    <span data-ttu-id="8d972-385">BizTalk Server: BizTalk 消息传递延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-385">BizTalk Server:  BizTalk Message Delivery Delay</span></span>                    |                                                                                                                                                                         <span data-ttu-id="8d972-386">这是当前规定延迟时间以毫秒 (ms) 为单位对每个消息送达批 （如果要中止消息传递时适用）。</span><span class="sxs-lookup"><span data-stu-id="8d972-386">This is the current delay in milliseconds (ms) imposed on each message delivery batch (applicable if the message delivery is being throttled).</span></span> <span data-ttu-id="8d972-387">对于限制，在发布或处理消息，具体取决于消息是入站或出站应用延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-387">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="8d972-388">延迟时间是阻止条件的严重性成比例。</span><span class="sxs-lookup"><span data-stu-id="8d972-388">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="8d972-389">阻止条件的严重性较高将启动更长的阻止时间长于阻止条件的严重性较低。</span><span class="sxs-lookup"><span data-stu-id="8d972-389">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="8d972-390">随着阻止条件的变化，将根据阻止机制在特定范围内延长和缩短此延迟时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-390">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="8d972-391">当前延迟时间是通过的 message delivery delay (ms) 和 message publishing 与 biztalk: Message Agent 性能对象类别相关联的延迟 (ms) 性能计数器公开。</span><span class="sxs-lookup"><span data-stu-id="8d972-391">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-392">此分析检查消息传递的大于 5 秒延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-392">This analysis checks for a message delivery delay of greater than 5 seconds.</span></span> <span data-ttu-id="8d972-393">长消息传送延迟可能表明由于高负载而进行大量控制。</span><span class="sxs-lookup"><span data-stu-id="8d972-393">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="8d972-394">参考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-394">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>                                                                                                                                                                         |
|              <span data-ttu-id="8d972-395">BizTalk Server: BizTalk 消息传递限制状态</span><span class="sxs-lookup"><span data-stu-id="8d972-395">BizTalk Server:  BizTalk Message Delivery Throttling State</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="8d972-396">BizTalk 消息传递阻止状态是主要指标，限制之一。</span><span class="sxs-lookup"><span data-stu-id="8d972-396">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="8d972-397">它是指示系统是否要阻止消息送达 （影响 XLANG 消息处理和出站传输） 的标志。</span><span class="sxs-lookup"><span data-stu-id="8d972-397">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="8d972-398">由计数器的数值指示阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-398">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="8d972-399">有关详细信息，请参阅本主题中的 BizTalk 消息传递限制状态分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-399">For more information, see BizTalk Message Delivery Throttling State Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                   <span data-ttu-id="8d972-400">BizTalk Server: BizTalk 消息发布延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-400">BizTalk Server:  BizTalk Message Publishing Delay</span></span>                   |                                                                                                                                                                                                    <span data-ttu-id="8d972-401">限制消息的发布的每个合格批中插入的延迟时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-401">The delay injected in each qualifying batch for throttling the publishing of messages.</span></span> <span data-ttu-id="8d972-402">对于限制，在发布或处理消息，具体取决于消息是入站或出站应用延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-402">In regards to throttling, a delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="8d972-403">延迟时间是阻止条件的严重性成比例。</span><span class="sxs-lookup"><span data-stu-id="8d972-403">The delay period is proportional to the severity of the throttling condition.</span></span> <span data-ttu-id="8d972-404">阻止条件的严重性较高将启动更长的阻止时间长于阻止条件的严重性较低。</span><span class="sxs-lookup"><span data-stu-id="8d972-404">Higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="8d972-405">随着阻止条件的变化，将根据阻止机制在特定范围内延长和缩短此延迟时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-405">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="8d972-406">当前延迟时间是通过的 message delivery delay (ms) 和 message publishing 与 biztalk: Message Agent 性能对象类别相关联的延迟 (ms) 性能计数器公开。</span><span class="sxs-lookup"><span data-stu-id="8d972-406">The current delay period is exposed through the message delivery delay (ms) and the message publishing delay (ms) performance counters associated with the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-407">此分析检查消息发布大于 5 秒的延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-407">This analysis checks for a message publishing delay of greater than 5 seconds.</span></span> <span data-ttu-id="8d972-408">长消息传送延迟可能表明由于高负载而进行大量控制。</span><span class="sxs-lookup"><span data-stu-id="8d972-408">Long message delivery delays may indicate heavy throttling due to high load.</span></span><br /><br /> <span data-ttu-id="8d972-409">参考： 如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-409">Reference: How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span>                                                                                                                                                                                                    |
|           <span data-ttu-id="8d972-410">BizTalk Server: BizTalk MessageBox 数据库连接失败</span><span class="sxs-lookup"><span data-stu-id="8d972-410">BizTalk Server:  BizTalk MessageBox Database Connection Failures</span></span>            |                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="8d972-411">此性能计数器是数据库连接尝试失败，因为启动主机实例的数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-411">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="8d972-412">如果出于任何原因，承载 BizTalk 数据库的 SQL Server 服务将变得不可用，则数据库群集会将资源从主动计算机传输到被动计算机。</span><span class="sxs-lookup"><span data-stu-id="8d972-412">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="8d972-413">在此故障转移过程中，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]服务实例遇到数据库连接失败，并自动重新启动以重新连接到数据库。</span><span class="sxs-lookup"><span data-stu-id="8d972-413">During this failover process, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="8d972-414">采用故障转移期间传输的资源后，正在运行的数据库计算机（即前面提到的被动计算机）将开始处理数据库连接。</span><span class="sxs-lookup"><span data-stu-id="8d972-414">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span> <span data-ttu-id="8d972-415">详细信息，请参阅本主题中的 BizTalk MessageBox 数据库连接故障分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-415">For more information, refer to BizTalk MessageBox Database Connection Failures Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                      |
|         <span data-ttu-id="8d972-416">BizTalk Server: BizTalk 消息传送延迟： 请求响应延迟时间</span><span class="sxs-lookup"><span data-stu-id="8d972-416">BizTalk Server:  BizTalk Messaging Latency:  Request Response Latency</span></span>         |                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="8d972-417">自消息引擎从适配器接收到请求文档到将响应文档返回到适配器的平均延迟时间（以毫秒计）。</span><span class="sxs-lookup"><span data-stu-id="8d972-417">Average latency in milliseconds from when the Messaging Engine receives a request document from the adapter until the time a response document is given back to the adapter.</span></span> <span data-ttu-id="8d972-418">请参阅图，显示如何测量滞后时间是在 BizTalk 的入站延迟分析本主题中。</span><span class="sxs-lookup"><span data-stu-id="8d972-418">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="8d972-419">假设低延迟环境，此分析会检查请求-响应延迟大于 5 秒。</span><span class="sxs-lookup"><span data-stu-id="8d972-419">Assuming a low latency environment, this analysis checks for a Request-Response Latency greater than 5 seconds.</span></span> <span data-ttu-id="8d972-420">这可能表示入站的适配器和出站适配器之间的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-420">This may indicate a processing delay between the inbound adapter and the outbound adapter.</span></span><br /><br /> <span data-ttu-id="8d972-421">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-421">References:</span></span><br /><br /> <span data-ttu-id="8d972-422">请求/响应消息传送在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="8d972-422">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="8d972-423">BizTalk Server 2006： 在 BizTalk Server 2006 在使用 SOAP 适配器的可伸缩性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="8d972-423">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span>                                                                                                                                                                                                                                                                                                                                                              |
|            <span data-ttu-id="8d972-424">BizTalk Server: BizTalk 消息发布阻止状态</span><span class="sxs-lookup"><span data-stu-id="8d972-424">BizTalk Server:  BizTalk Messaging Publishing Throttling State</span></span>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="8d972-425">BizTalk 消息发布阻止状态是主要指标，限制之一。</span><span class="sxs-lookup"><span data-stu-id="8d972-425">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="8d972-426">它是指示系统是否要阻止消息发布 （影响 XLANG 消息处理和入站的传输） 的标志。</span><span class="sxs-lookup"><span data-stu-id="8d972-426">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).</span></span> <span data-ttu-id="8d972-427">详细信息，请参阅本主题中的 BizTalk 消息发布限制状态分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-427">For more information, refer to BizTalk Messaging Publishing Throttling State Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                <span data-ttu-id="8d972-428">BizTalk Server: BizTalk 业务流程挂起/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-428">BizTalk Server:  BizTalk Orchestration Suspended/second</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="8d972-429">挂起的消息是消息或业务流程实例的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已停止处理因出错而系统或消息中。</span><span class="sxs-lookup"><span data-stu-id="8d972-429">A suspended message is an instance of a message or orchestration that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has stopped processing due to an error in the system or the message.</span></span> <span data-ttu-id="8d972-430">通常，根据系统问题的解决办法，由系统错误导致的挂起实例是可恢复的。</span><span class="sxs-lookup"><span data-stu-id="8d972-430">Generally, suspended instances caused by system errors are resumable upon resolution of the system issue.</span></span> <span data-ttu-id="8d972-431">通常情况下，由于消息问题的挂起的实例不可恢复，以及消息本身必须修复并重新提交到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="8d972-431">Often, suspended instances due to a message problem are not resumable, and the message itself must be fixed and resubmitted to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="8d972-432">此分析检查任何挂起的消息/业务流程。</span><span class="sxs-lookup"><span data-stu-id="8d972-432">This analysis checks for any suspended messages/orchestrations.</span></span><br /><br /> <span data-ttu-id="8d972-433">参考： BizTalk Server 2004： 监视和故障排除在 [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span><span class="sxs-lookup"><span data-stu-id="8d972-433">Reference:  BizTalk Server 2004: Monitoring and Troubleshooting at [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
|               <span data-ttu-id="8d972-434">BizTalk Server: BizTalk 业务流程已完成/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-434">BizTalk Server:  BizTalk Orchestrations Completed/second</span></span>                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="8d972-435">这是已完成的 BizTalk 业务流程数 / 秒。</span><span class="sxs-lookup"><span data-stu-id="8d972-435">This is the number of BizTalk orchestrations that have completed per second.</span></span> <span data-ttu-id="8d972-436">这是处理 BizTalk 多少吞吐量很好的指示器。</span><span class="sxs-lookup"><span data-stu-id="8d972-436">This is a good indicator as to how much throughput BizTalk is processing.</span></span> <span data-ttu-id="8d972-437">此分析提供了仅限统计信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-437">This analysis provides statistics only.</span></span><br /><br /> <span data-ttu-id="8d972-438">参考： BizTalk Server 2006： 在 BizTalk Server 2006 中使用 SOAP 适配器的可伸缩性案例研究</span><span class="sxs-lookup"><span data-stu-id="8d972-438">Reference:  BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006</span></span> <br />[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                   <span data-ttu-id="8d972-439">BizTalk Server: BizTalk 业务流程被丢弃</span><span class="sxs-lookup"><span data-stu-id="8d972-439">BizTalk Server:  BizTalk Orchestrations Discarded</span></span>                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="8d972-440">自从主机实例启动以来，内存中被丢弃的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-440">Number of orchestration instances discarded from memory since the host instance started.</span></span> <span data-ttu-id="8d972-441">如果引擎未能持久化某个业务流程的状态，则会将其丢弃。</span><span class="sxs-lookup"><span data-stu-id="8d972-441">An orchestration can be discarded if the engine fails to persist its state.</span></span> <span data-ttu-id="8d972-442">此分析检查任何消息被放弃。</span><span class="sxs-lookup"><span data-stu-id="8d972-442">This analysis checks for any discarded messages.</span></span><br /><br /> <span data-ttu-id="8d972-443">参考： BizTalk 核心引擎的网络日志</span><span class="sxs-lookup"><span data-stu-id="8d972-443">Reference:  BizTalk Core Engine's WebLog</span></span><br />[http://go.microsoft.com/fwlink/?linkid=108775](http://go.microsoft.com/fwlink/?linkid=108775)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|              <span data-ttu-id="8d972-444">在内存中驻留在 BizTalk 服务器： BizTalk 业务流程</span><span class="sxs-lookup"><span data-stu-id="8d972-444">BizTalk Server:  BizTalk Orchestrations Resident in Memory</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="8d972-445">当前以主机实例为宿主的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-445">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="8d972-446">此分析检查驻留在内存和是否超过 50%的驻留在内存中的业务流程不是可冻结业务流程中为增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-446">This analysis checks for an increasing trend in orchestrations resident in memory and whether more than 50 percent of the orchestrations resident in memory are not dehydratable.</span></span> <span data-ttu-id="8d972-447">有关详细信息，请参阅 BizTalk 业务流程驻留在内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-447">For more information, refer to BizTalk Orchestrations Resident in Memory Analysis.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                   <span data-ttu-id="8d972-448">BizTalk Server: BizTalk 适配器的出站延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-448">BizTalk Server:  BizTalk Outbound Adapter Latency</span></span>                   |                                                                                                  <span data-ttu-id="8d972-449">这是从时适配器获取一个文档从消息引擎适配器发送之前的秒数的平均延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-449">This is the average latency in seconds from when the adapter gets a document from the messaging engine until the time it is sent by the adapter.</span></span> <span data-ttu-id="8d972-450">请参阅图，显示如何测量滞后时间是在 BizTalk 的入站延迟分析本主题中。</span><span class="sxs-lookup"><span data-stu-id="8d972-450">Refer to the chart showing how latency is measured in BizTalk Inbound Latency Analysis in this topic.</span></span> <span data-ttu-id="8d972-451">假设低延迟环境，此分析检查在出站适配器中的大于 5 秒的延迟的平均值。</span><span class="sxs-lookup"><span data-stu-id="8d972-451">Assuming a low latency environment, this analysis checks for latency in the outbound adapter of greater than 5 seconds on average.</span></span> <span data-ttu-id="8d972-452">这可能指示在传输中，通过此主机实例中的出站适配器的消息的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-452">This may indicate a processing delay in the transport of messages through outbound adapters in this host instance.</span></span> <span data-ttu-id="8d972-453">如果此主机实例中存在多个出站适配器，请考虑将它们分散到其自己的主机以确定哪种出站适配器的高延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-453">If multiple outbound adapters exist in this host instance, then consider separating them into their own hosts to determine which outbound adapter has high latency.</span></span><br /><br /> <span data-ttu-id="8d972-454">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-454">References:</span></span><br /><br /> <span data-ttu-id="8d972-455">请求/响应消息传送在 [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span><span class="sxs-lookup"><span data-stu-id="8d972-455">-   Request/Response Messaging at [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)</span></span><br /><span data-ttu-id="8d972-456">BizTalk Server 2006： 在 BizTalk Server 2006 在使用 SOAP 适配器的可伸缩性案例研究 [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span><span class="sxs-lookup"><span data-stu-id="8d972-456">-   BizTalk Server 2006: Scalability Case Study Using the SOAP Adapter in BizTalk Server 2006 at [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)</span></span><br /><span data-ttu-id="8d972-457">标识在 BizTalk 层的瓶颈 [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span><span class="sxs-lookup"><span data-stu-id="8d972-457">-   Identifying Bottlenecks in the BizTalk Tier at [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)</span></span><br /><span data-ttu-id="8d972-458">BizTalk Server 2004： 性能优化的低延迟的消息传送在 [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span><span class="sxs-lookup"><span data-stu-id="8d972-458">-   BizTalk Server 2004: Performance Tuning for Low Latency Messaging at [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)</span></span>                                                                                                   |
|                       <span data-ttu-id="8d972-459">BizTalk Server: BizTalk 挂起的消息</span><span class="sxs-lookup"><span data-stu-id="8d972-459">BizTalk Server:  BizTalk Pending Messages</span></span>                       |                                                                                                                                                                                                        <span data-ttu-id="8d972-460">接收到 MessageBox 接收到尚未确认的消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-460">The number of received messages that have not been acknowledged as received to the MessageBox.</span></span> <span data-ttu-id="8d972-461">消息已拉取到内存并将其传送到 XLANG 业务流程，但尚不是挂起的消息处理。</span><span class="sxs-lookup"><span data-stu-id="8d972-461">Pending messages are messages that have been pulled into memory and delivered to the XLANG orchestration, but have not yet been processed.</span></span> <span data-ttu-id="8d972-462">这种情况下会丢失数据无关。</span><span class="sxs-lookup"><span data-stu-id="8d972-462">This circumstance has nothing to do with data loss.</span></span>  <span data-ttu-id="8d972-463">消息传送到业务流程是一个多步骤过程，只是驻留在数据库中的后台处理表中的消息实例。</span><span class="sxs-lookup"><span data-stu-id="8d972-463">Delivering a message to an orchestration is a multi-step process and is simply an instance of the message residing in the spool table in the database.</span></span> <span data-ttu-id="8d972-464">这些挂起的消息计数，在处理消息;因此，在内存中大量的这些地址可能会导致内存限制在系统上。</span><span class="sxs-lookup"><span data-stu-id="8d972-464">These pending messages count as in-process messages; therefore, having a large number of them in memory could cause memory throttling on the system.</span></span> <span data-ttu-id="8d972-465">调整内部消息队列大小设置有助于其控制的挂起消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-465">Adjusting the Internal Message Queue Size setting could help with controlling the number of pending messages.</span></span> <span data-ttu-id="8d972-466">每个 CPU 进程内消息设置会影响限制将时调用挂起的消息更大量的发生时。</span><span class="sxs-lookup"><span data-stu-id="8d972-466">The In-Process Messages Per CPU setting has an impact on when throttling will invoke when a high number of pending messages occurs.</span></span> <span data-ttu-id="8d972-467">在 BizTalk 管理控制台中的主机属性中找到这些设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-467">These setting are found in the Host properties in the BizTalk Administration Console.</span></span> <span data-ttu-id="8d972-468">此分析会检查此计数器仅显示统计。</span><span class="sxs-lookup"><span data-stu-id="8d972-468">This analysis checks only shows statistics for this counter.</span></span><br /><br /> <span data-ttu-id="8d972-469">在参考： 业务流程引擎性能计数器 [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span><span class="sxs-lookup"><span data-stu-id="8d972-469">Reference: Orchestration Engine Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)</span></span>                                                                                                                                                                                                         |
|                  <span data-ttu-id="8d972-470">BizTalk Server: BizTalk 持久化点/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-470">BizTalk Server:  BizTalk Persistence Points/second</span></span>                   |                                                                                         <span data-ttu-id="8d972-471">平均每秒持久化业务流程实例的次数。</span><span class="sxs-lookup"><span data-stu-id="8d972-471">Average number of orchestration instances persisted per second.</span></span> <span data-ttu-id="8d972-472">业务流程引擎保存在不同点正在运行的业务流程实例的状态。</span><span class="sxs-lookup"><span data-stu-id="8d972-472">The orchestration engine saves the state of a running orchestration instance at various points.</span></span> <span data-ttu-id="8d972-473">如果需要解除冻结的业务流程实例、 从受控的关闭、 启动或从意外关机恢复，它将从最后一个持久点运行的业务流程实例。</span><span class="sxs-lookup"><span data-stu-id="8d972-473">If it needs to rehydrate the orchestration instance, start up from a controlled shutdown, or recover from an unexpected shutdown, it will run the orchestration instance from the last persistence point.</span></span> <span data-ttu-id="8d972-474">才能持久地保存业务流程实例，所有对象直接或间接指您的业务流程的实例 （如通过其他对象） 必须可序列化。</span><span class="sxs-lookup"><span data-stu-id="8d972-474">In order to persist an orchestration instance, all object instances that your orchestration refers to directly or indirectly (as through other objects) must be serializable.</span></span> <span data-ttu-id="8d972-475">作为消息持久性频率 （需要永久保存数据的时间数） 增加，总体性能下降。</span><span class="sxs-lookup"><span data-stu-id="8d972-475">As message-persistence frequency (the number of times that data needs to be persisted) increases, overall performance decreases.</span></span> <span data-ttu-id="8d972-476">实际上，每个持久化点是到数据库的往返行程，因此只要有可能的持久化点的频率避免或减少合并持久化点。</span><span class="sxs-lookup"><span data-stu-id="8d972-476">In effect, each persistence point is a round trip to the database, so whenever possible reduce the frequency of persistence points by avoiding or consolidating persistence points.</span></span> <span data-ttu-id="8d972-477">请参阅下面有关持久化点发生时详细信息的引用。</span><span class="sxs-lookup"><span data-stu-id="8d972-477">See the references below for more information regarding when persistence points occur.</span></span> <span data-ttu-id="8d972-478">此分析平均检查每秒超过 10 个持久化点。</span><span class="sxs-lookup"><span data-stu-id="8d972-478">This analysis checks for more than 10 persistence points per second on average.</span></span> <span data-ttu-id="8d972-479">这是常规的起始点。</span><span class="sxs-lookup"><span data-stu-id="8d972-479">This is a general starting point.</span></span><br /><br /> <span data-ttu-id="8d972-480">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-480">References:</span></span><br /><br /> <span data-ttu-id="8d972-481">的在业务流程中暂留 [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span><span class="sxs-lookup"><span data-stu-id="8d972-481">-   Persistence in Orchestrations at [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)</span></span><br /><span data-ttu-id="8d972-482">暂留和在业务流程引擎 [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span><span class="sxs-lookup"><span data-stu-id="8d972-482">-   Persistence and the Orchestration Engine at [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)</span></span>                                                                                         |
|                        <span data-ttu-id="8d972-483">BizTalk Server: BizTalk 专用字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-483">BizTalk Server:  BizTalk Private Bytes</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="8d972-484">这是个主机实例且比分配的专用内存兆字节的"\Process (\*) \Private 字节数"性能计数器。</span><span class="sxs-lookup"><span data-stu-id="8d972-484">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="8d972-485">此分析确定是否任何主机实例正在使用较大的系统的内存和是否在内存使用量随时间增加的主机实例。</span><span class="sxs-lookup"><span data-stu-id="8d972-485">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-486">在此主题的详细信息，请参阅 BizTalk 专用字节分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-486">Refer to BizTalk Private Bytes Analysis in this topic for more information.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                       <span data-ttu-id="8d972-487">BizTalk Server: BizTalk 后台处理表大小</span><span class="sxs-lookup"><span data-stu-id="8d972-487">BizTalk Server:  BizTalk Spool Table Size</span></span>                       |                                                  <span data-ttu-id="8d972-488">MessageBox 后台处理表包含每个消息的记录系统中 (活动或等待进行"垃圾回收")。</span><span class="sxs-lookup"><span data-stu-id="8d972-488">The MessageBox spool table contains a record for each message in the system (active or waiting to be "garbage collected").</span></span> <span data-ttu-id="8d972-489">监视此表中的行数和而增加系统负载提供可以轻松地找到的最大可承受吞吐量每秒接收的消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-489">Monitoring the number of rows in this table and the number of messages received per second while increasing system load provides an easy way to find the maximum sustainable throughput.</span></span> <span data-ttu-id="8d972-490">只需增加输入的负载直到任一 1） 在后台处理表开始无限期地增长或 2） 的第二个 plateaus，具体取决于第一个，，并且在最大可承受吞吐量每收到的消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-490">Simply increase the input load until either 1) the spool table starts to grow indefinitely or 2) the number of messages received per second plateaus, whichever comes first, and that is your maximum sustainable throughput.</span></span> <span data-ttu-id="8d972-491">在摘要，而不考虑其他指标，此度量值将提供快速而简单的方式来评估是否在系统超负荷运行或不。</span><span class="sxs-lookup"><span data-stu-id="8d972-491">In summary, regardless of other indicators, this measure will give you a quick and easy way to assess whether your system is being overdriven or not.</span></span> <span data-ttu-id="8d972-492">当 BizTalk 后台处理表大小上为增长趋势时，限制由于不均衡消息送达速率 （输入的速率超出输出速率） 或由于数据库大小限制可能会发生。</span><span class="sxs-lookup"><span data-stu-id="8d972-492">When the BizTalk spool tables size is on an increasing trend, then throttling due to imbalanced message delivery rate (input rate exceeds output rate) or throttling due to Database size may occur.</span></span> <span data-ttu-id="8d972-493">此分析会检查 BizTalk 后台处理表大小不断增加的趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-493">This analysis checks for an increasing trend in the BizTalk Spool Table Size.</span></span><br /><br /> <span data-ttu-id="8d972-494">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-494">References:</span></span><br /><br /> <span data-ttu-id="8d972-495">-了解 BizTalk Server 2004 SP1 吞吐量和容量 [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span><span class="sxs-lookup"><span data-stu-id="8d972-495">-   Understanding BizTalk Server 2004 SP1 Throughput and Capacity at [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)</span></span><br /><span data-ttu-id="8d972-496">-在可承受负载测试 [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span><span class="sxs-lookup"><span data-stu-id="8d972-496">-   Sustainable Load Test at [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)</span></span><br /><span data-ttu-id="8d972-497">-建议测试引擎性能时 [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span><span class="sxs-lookup"><span data-stu-id="8d972-497">-   Recommendations When Testing Engine Performance at [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)</span></span>                                                   |
|                      <span data-ttu-id="8d972-498">BizTalk Server: BizTalk 跟踪数据大小</span><span class="sxs-lookup"><span data-stu-id="8d972-498">BizTalk Server:  BizTalk Tracking Data Size</span></span>                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="8d972-499">当 BizTalk Server 处理越来越多的数据，你的系统上，BizTalk 跟踪数据库 (BizTalkDTADb) 将不断增长的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-499">As BizTalk Server processes more and more data on your system, the BizTalk Tracking database (BizTalkDTADb) continues to grow in size.</span></span> <span data-ttu-id="8d972-500">不受控制的增长将会降低系统性能，并可能导致跟踪数据传送服务 (TDDS) 出错。</span><span class="sxs-lookup"><span data-stu-id="8d972-500">Unchecked growth decreases system performance and may generate errors in the Tracking Data Delivery Service (TDDS).</span></span> <span data-ttu-id="8d972-501">除了一般的跟踪数据之外，跟踪的消息也会在 MessageBox 数据库中累积，导致磁盘性能下降。</span><span class="sxs-lookup"><span data-stu-id="8d972-501">In addition to general tracking data, tracked messages can also accumulate in the MessageBox database, causing poor disk performance.</span></span> <span data-ttu-id="8d972-502">此分析检查多个 5 MB 的每小时在跟踪中为增长趋势的数据大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-502">This analysis checks for an increasing trend of more than 5 MB’s per hour in the tracking data size.</span></span><br /><br /> <span data-ttu-id="8d972-503">参考：</span><span class="sxs-lookup"><span data-stu-id="8d972-503">Reference:</span></span><br /><br /> <span data-ttu-id="8d972-504">存档和清除 BizTalk 跟踪数据库  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span><span class="sxs-lookup"><span data-stu-id="8d972-504">Archiving and Purging the BizTalk Tracking Database at  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                 <span data-ttu-id="8d972-505">BizTalk Server: BizTalk 事务作用域已中止</span><span class="sxs-lookup"><span data-stu-id="8d972-505">BizTalk Server:  BizTalk Transactional Scopes Aborted</span></span>                 |                                                                                                                                                                                                                                                                                       <span data-ttu-id="8d972-506">这是自从主机实例启动以来已中止的长期或原子作用域数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-506">This is the number of long-running or atomic scopes that have been aborted since the host instance started.</span></span> <span data-ttu-id="8d972-507">事务作用域中止是业务流程中的事务作用域中发生的故障。</span><span class="sxs-lookup"><span data-stu-id="8d972-507">A transactional scope abort is a failure that occurs in a transaction scope within an orchestration.</span></span> <span data-ttu-id="8d972-508">请务必了解作用域已成功完成，但然后必须是撤消，因为周围的作用域已决定中止 （由于更高版本在过程中可能发生的失败） 时才调用作用域的补偿处理程序。</span><span class="sxs-lookup"><span data-stu-id="8d972-508">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="8d972-509">此外，状态不会"自动"回滚事务中止的情况下发生。</span><span class="sxs-lookup"><span data-stu-id="8d972-509">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="8d972-510">您可以获得此结果以编程方式通过异常和补偿处理程序。</span><span class="sxs-lookup"><span data-stu-id="8d972-510">You can achieve this outcome programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="8d972-511">中止事务作用域不应该通常发生在生产环境中;因此，此分析会检查任何已中止的事务作用域的匹配项。</span><span class="sxs-lookup"><span data-stu-id="8d972-511">Transactional scope aborts should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="8d972-512">参考：</span><span class="sxs-lookup"><span data-stu-id="8d972-512">Reference:</span></span><br /><br /> <span data-ttu-id="8d972-513">在 BizTalk Server 2004 跨事务 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="8d972-513">Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>                                                                                                                                                                                                                                                                                       |
|               <span data-ttu-id="8d972-514">BizTalk Server: BizTalk 事务作用域补偿</span><span class="sxs-lookup"><span data-stu-id="8d972-514">BizTalk Server:  BizTalk Transactional Scopes Compensated</span></span>               |                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="8d972-515">可以将补偿视为逻辑撤消以响应某些错误条件已成功提交的工作。</span><span class="sxs-lookup"><span data-stu-id="8d972-515">Compensation can be thought of as a logical undo of the work that has been successfully committed in response to some error condition.</span></span> <span data-ttu-id="8d972-516">请务必了解作用域已成功完成，但然后必须是撤消，因为周围的作用域已决定中止 （由于更高版本在过程中可能发生的失败） 时才调用作用域的补偿处理程序。</span><span class="sxs-lookup"><span data-stu-id="8d972-516">It is important to understand that the compensation handler of a scope is invoked only if the scope completed successfully, but then is required to be undone because a surrounding scope has decided to abort (due to failures that may occur later in the process).</span></span> <span data-ttu-id="8d972-517">此外，状态不会"自动"回滚事务中止的情况下发生。</span><span class="sxs-lookup"><span data-stu-id="8d972-517">Also, no "auto" rollback of state occurs in case of a transaction abort.</span></span> <span data-ttu-id="8d972-518">这种回滚可以通过编写异常处理程序和补偿处理程序来实现。</span><span class="sxs-lookup"><span data-stu-id="8d972-518">You can achieve this programmatically through the exception and compensation handlers.</span></span> <span data-ttu-id="8d972-519">补偿事务作用域不应该通常发生在生产环境中;因此，此分析会检查任何已中止的事务作用域的匹配项。</span><span class="sxs-lookup"><span data-stu-id="8d972-519">Transactional scope compensations should not normally occur in a production environment; therefore, this analysis checks for the occurrence of any transactional scopes aborted.</span></span><br /><br /> <span data-ttu-id="8d972-520">在 BizTalk Server 2004 跨参考： 事务 [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span><span class="sxs-lookup"><span data-stu-id="8d972-520">Reference: Transactions Across BizTalk Server 2004 at [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)</span></span>                                                                                                                                                                                                                                                                                                                                   |
|                        <span data-ttu-id="8d972-521">BizTalk Server: BizTalk 虚拟字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-521">BizTalk Server:  BizTalk Virtual Bytes</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="8d972-522">这是适用于主机实例的虚拟内存保留的兆字节。</span><span class="sxs-lookup"><span data-stu-id="8d972-522">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="8d972-523">此分析确定的任何主机实例是否消耗大量系统的内存，并在主机实例是否在内存使用量随时间增加。</span><span class="sxs-lookup"><span data-stu-id="8d972-523">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-524">详细信息，请参阅本主题中的 BizTalk 虚拟字节分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-524">For more information, refer to BizTalk Virtual Bytes Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|          <span data-ttu-id="8d972-525">BizTalk Server: BizTalk 消息代理数据库会话限制</span><span class="sxs-lookup"><span data-stu-id="8d972-525">BizTalk Server:  BizTalk Message Agent Database Session Throttling</span></span>           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="8d972-526">这是与 MessageBox 相比其相应的 BizTalk 阻止设置的开放式数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-526">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="8d972-527">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-527">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-528">详细信息，请参阅本主题中的 BizTalk 消息代理数据库会话限制分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-528">For more information, refer to BizTalk Message Agent Database Session Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|     <span data-ttu-id="8d972-529">BizTalk Server: BizTalk 消息代理数据库会话限制阈值</span><span class="sxs-lookup"><span data-stu-id="8d972-529">BizTalk Server:  BizTalk Message Agent Database Session Throttling Threshold</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <span data-ttu-id="8d972-530">这是与 MessageBox 的开放式数据库连接数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-530">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="8d972-531">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-531">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-532">详细信息，请参阅本主题中的 BizTalk 消息代理数据库会话限制阈值分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-532">For more information, refer to BizTalk Message Agent Database Session Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|      <span data-ttu-id="8d972-533">BizTalk Server: BizTalk 消息代理进程内消息计数限制</span><span class="sxs-lookup"><span data-stu-id="8d972-533">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling</span></span>       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="8d972-534">这是服务类别正在处理的并行消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-534">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="8d972-535">主机阻止设置中的"进程内消息数 CPU"设置为的最大未处理的消息传送到端点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="8d972-535">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="8d972-536">有关详细信息，请参阅本主题中的 BizTalk 消息代理进程内消息计数限制分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-536">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="8d972-537">BizTalk Server: BizTalk 消息代理进程内消息数阻止阈值</span><span class="sxs-lookup"><span data-stu-id="8d972-537">BizTalk Server:  BizTalk Message Agent In-process Message Count Throttling Threshold</span></span>  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="8d972-538">这是服务类别正在处理的并行消息数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-538">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="8d972-539">主机阻止设置中的"进程内消息数 CPU"设置为的最大未处理的消息传送到端点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="8d972-539">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="8d972-540">有关详细信息，请参阅 BizTalk 消息代理进程内消息计数限制阈值中的分析此主题。</span><span class="sxs-lookup"><span data-stu-id="8d972-540">For more information, refer to BizTalk Message Agent In-process Message Count Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|      <span data-ttu-id="8d972-541">BizTalk Server: BizTalk 消息代理进程内存使用率 (MB) 限制</span><span class="sxs-lookup"><span data-stu-id="8d972-541">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="8d972-542">这是当前进程 (MB) 的内存使用情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-542">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="8d972-543">如果要发布的批处理具有很高的内存要求，或者过多的线程所处理的消息，则会出现 BizTalk 进程内存的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-543">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="8d972-544">有关详细信息，请参阅本主题中的 BizTalk 消息代理进程内存使用率 (MB) 限制分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-544">For more information, refer to BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="8d972-545">阻止阈值的 BizTalk Server: BizTalk 消息代理进程内存使用率 (MB)</span><span class="sxs-lookup"><span data-stu-id="8d972-545">BizTalk Server:  BizTalk Message Agent Process Memory Usage (MB) Throttling Threshold</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="8d972-546">这是当前进程 (MB) 的内存使用量的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-546">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="8d972-547">可能会动态调整阈值，具体取决于实际的于此进程及其内存占用模式可用内存量。</span><span class="sxs-lookup"><span data-stu-id="8d972-547">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="8d972-548">如果要发布的批处理具有很高的内存要求，或者过多的线程所处理的消息，则会出现 BizTalk 进程内存的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-548">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="8d972-549">有关详细信息，请参阅 BizTalk 消息代理进程内存使用率 (MB) 限制阈值分析本主题中。</span><span class="sxs-lookup"><span data-stu-id="8d972-549">For more information, refer to BizTalk Message Agent Process memory usage (MB) Throttling Threshold Analysis in this topic.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|            <span data-ttu-id="8d972-550">BizTalk Server: BizTalk 消息代理线程计数限制</span><span class="sxs-lookup"><span data-stu-id="8d972-550">BizTalk Server:  BizTalk Message Agent Thread Count Throttling</span></span>             | <span data-ttu-id="8d972-551">BizTalk 进程中的线程总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-551">The total number of threads in the BizTalk process.</span></span> <span data-ttu-id="8d972-552">"每 CPU 线程数"是包括线程使用的适配器的主机进程中线程的总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-552">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="8d972-553">如果超过此阈值，则 BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-553">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="8d972-554">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-554">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="8d972-555">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-555">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="8d972-556">默认情况下禁用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-556">Thread based throttling is disabled by default.</span></span> <span data-ttu-id="8d972-557">此分析会检查是否大于 80%的限制的阈值值，该值指示在触发阻止条件很可能 BizTalk 线程数。</span><span class="sxs-lookup"><span data-stu-id="8d972-557">This analysis checks whether the BizTalk Thread count is greater than 80 percent of the throttling threshold value indicating a throttling condition is likely.</span></span><br /><br /> <span data-ttu-id="8d972-558">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-558">References:</span></span><br /><br /> <span data-ttu-id="8d972-559">-主机阻止性能计数器在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-559">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="8d972-560">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-560">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="8d972-561">-如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-561">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="8d972-562">会影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-562">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="8d972-563">线程，数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-563">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span> |
|       <span data-ttu-id="8d972-564">BizTalk Server: BizTalk 消息代理线程数阻止阈值</span><span class="sxs-lookup"><span data-stu-id="8d972-564">BizTalk Server:  BizTalk Message Agent Thread Count Throttling Threshold</span></span>        |                    <span data-ttu-id="8d972-565">这是此进程中线程的总数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-565">This is the current threshold for the total number of threads in the process.</span></span> <span data-ttu-id="8d972-566">"每 CPU 线程数"是包括线程使用的适配器的主机进程中线程的总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-566">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="8d972-567">如果超过此阈值，则 BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-567">If this threshold is exceeded, BizTalk Server will try to reduce the size of EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="8d972-568">在其中高负载可能会导致创建大量的线程的情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-568">Thread-based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="8d972-569">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-569">This parameter affects both inbound and outbound throttling.</span></span><br /><br /> <span data-ttu-id="8d972-570">此分析会检查是否将此限制设置设置为非默认值。</span><span class="sxs-lookup"><span data-stu-id="8d972-570">This analysis checks whether this throttling setting is set to a non-default value.</span></span> <span data-ttu-id="8d972-571">默认情况下禁用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-571">Thread based throttling is disabled by default.</span></span><br /><br /> <span data-ttu-id="8d972-572">引用：</span><span class="sxs-lookup"><span data-stu-id="8d972-572">References:</span></span><br /><br /> <span data-ttu-id="8d972-573">-主机阻止性能计数器在 [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-573">-   Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)</span></span><br /><span data-ttu-id="8d972-574">-如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-574">-   How [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)</span></span><br /><span data-ttu-id="8d972-575">-如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-575">-   How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)</span></span><br /><span data-ttu-id="8d972-576">会影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-576">-   Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span><br /><span data-ttu-id="8d972-577">线程，数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-577">-   Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>                    |

## <a name="logicalphysical-disk-readwrite-latency-analysis"></a><span data-ttu-id="8d972-578">逻辑/物理磁盘读/写延迟分析</span><span class="sxs-lookup"><span data-stu-id="8d972-578">Logical/Physical Disk Read/Write Latency Analysis</span></span>  
 <span data-ttu-id="8d972-579">Windows 检测磁盘性能瓶颈的最可靠方法是通过测量其响应时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-579">The most reliable way for Windows to detect a disk performance bottleneck is by measuring its response times.</span></span> <span data-ttu-id="8d972-580">如果响应时间大于.025 （25 毫秒为单位），这是一个保守的阈值，则可能会发生明显减慢速度和性能问题影响用户。</span><span class="sxs-lookup"><span data-stu-id="8d972-580">If the response times are greater than .025 (25 milliseconds), which is a conservative threshold, then noticeable slow-downs and performance issues affecting users may be occurring.</span></span>  

 <span data-ttu-id="8d972-581">不佳的磁盘延迟的常见原因是磁盘碎片，性能缓存、 一个饱和 SAN，和在磁盘上的过多负载。</span><span class="sxs-lookup"><span data-stu-id="8d972-581">Common causes of poor disk latency are disk fragmentation, performance cache, an over saturated SAN, and too much load on the disk.</span></span> <span data-ttu-id="8d972-582">使用 SPA 工具以帮助识别的高级文件和进程使用的磁盘。</span><span class="sxs-lookup"><span data-stu-id="8d972-582">Use the SPA tool to help identify the top files and processes using the disk.</span></span> <span data-ttu-id="8d972-583">此外检查"进程 IO 数据 Operations/sec"和"进程 IO 其他操作数/秒"若要查看哪些进程正在使用最多磁盘我 / O 的</span><span class="sxs-lookup"><span data-stu-id="8d972-583">Also check the “Process IO Data Operations/sec” and “Process IO Other Operations/sec” to see which processes are consuming the most disk I/O’s.</span></span> <span data-ttu-id="8d972-584">请记住，性能监视器计数器不能指定涉及哪些文件。</span><span class="sxs-lookup"><span data-stu-id="8d972-584">Keep in mind that performance monitor counters are unable to specify which files are involved.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-585">References</span><span class="sxs-lookup"><span data-stu-id="8d972-585">References</span></span>  

-   <span data-ttu-id="8d972-586">排除磁盘密集型的问题 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span><span class="sxs-lookup"><span data-stu-id="8d972-586">Ruling Out Disk-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)</span></span>  

-   <span data-ttu-id="8d972-587">如何确定磁盘性能瓶颈使用在 Microsoft 服务器性能顾问 (SPA) 工具 [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span><span class="sxs-lookup"><span data-stu-id="8d972-587">How to Identify a Disk Performance Bottleneck Using the Microsoft Server Performance Advisor (SPA) Tool at [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)</span></span>  

-   <span data-ttu-id="8d972-588">下载适用于在 Microsoft 服务性能顾问 (SPA) 的详细信息： [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span><span class="sxs-lookup"><span data-stu-id="8d972-588">Download Details for Microsoft Service Performance Advisor (SPA) at: [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)</span></span>  

## <a name="logical-disk-transferssec"></a><span data-ttu-id="8d972-589">逻辑磁盘传输/次数/秒</span><span class="sxs-lookup"><span data-stu-id="8d972-589">Logical Disk Transfers/sec</span></span>  
 <span data-ttu-id="8d972-590">"磁盘传输次数/秒"是的速率的读取和写入磁盘上的操作。</span><span class="sxs-lookup"><span data-stu-id="8d972-590">“Disk Transfers/sec” is the rate of read and write operations on the disk.</span></span> <span data-ttu-id="8d972-591">尽管磁盘传输不直接关联到磁盘我 / O，他们不要告诉我们发生多少个磁盘操作。</span><span class="sxs-lookup"><span data-stu-id="8d972-591">While disk transfers are not a direct correlation to disk I/O's, they do tell us how many disk operations are occurring.</span></span> <span data-ttu-id="8d972-592">如果您的平均顺序我 / O 的和随机我 / O，则你将得到约为 80 个我 / O 每秒作为常规的经验法则。</span><span class="sxs-lookup"><span data-stu-id="8d972-592">If you average out sequential I/O’s and random I/O's, then you end up with about 80 I/O's per second as a general rule of thumb.</span></span> <span data-ttu-id="8d972-593">因此，我们应期望执行禬筁 80 我的 SAN 驱动器/O 按下的第二个时加载。</span><span class="sxs-lookup"><span data-stu-id="8d972-593">Therefore, we should expect a SAN drive to perform more than 80 I/O's per second when under load.</span></span> <span data-ttu-id="8d972-594">此分析检查以查看是否有任何逻辑磁盘的阈值会显示不佳响应时间 （大于 25 毫秒的 I/O 操作的响应时间）。</span><span class="sxs-lookup"><span data-stu-id="8d972-594">The thresholds for this analysis check to see whether any of the logical disks are showing poor response times (greater than 25 ms response times for I/O operations).</span></span> <span data-ttu-id="8d972-595">如果为 true，我们应期望磁盘每秒传输数为或高于 80。</span><span class="sxs-lookup"><span data-stu-id="8d972-595">If this is true, then we should expect the disk transfers per second to be at or above 80.</span></span> <span data-ttu-id="8d972-596">如果没有，则磁盘体系结构需要进行调查。</span><span class="sxs-lookup"><span data-stu-id="8d972-596">If not, then the disk architecture needs to be investigated.</span></span> <span data-ttu-id="8d972-597">不佳的磁盘 I/O 的最常见原因是重载上 SAN – 这意味着多个 LUN 正在使用较小的物理磁盘阵列的位置的条件的逻辑单元号 (LUN)。</span><span class="sxs-lookup"><span data-stu-id="8d972-597">The most common cause of poor disk I/O is logical unit number (LUN) overloading on the SAN – meaning the condition where more than one LUN is using the small physical disk array.</span></span>  

### <a name="reference"></a><span data-ttu-id="8d972-598">参考</span><span class="sxs-lookup"><span data-stu-id="8d972-598">Reference</span></span>  
 <span data-ttu-id="8d972-599">NT 服务器和磁盘子系统性能 [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span><span class="sxs-lookup"><span data-stu-id="8d972-599">NT Server and Disk Subsystem Performance at [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)</span></span>  

## <a name="available-memory-analysis"></a><span data-ttu-id="8d972-600">可用内存分析</span><span class="sxs-lookup"><span data-stu-id="8d972-600">Available Memory Analysis</span></span>  
 <span data-ttu-id="8d972-601">"Available Mbytes"是可在兆字节为单位的计算机上运行的进程的物理内存量。</span><span class="sxs-lookup"><span data-stu-id="8d972-601">“Available Mbytes” is the amount of physical memory available to processes running on the computer, in megabytes.</span></span> <span data-ttu-id="8d972-602">虚拟内存管理器不断调整用在物理内存和磁盘上保持最小操作系统和进程的可用字节数的空间。</span><span class="sxs-lookup"><span data-stu-id="8d972-602">The Virtual Memory Manager continually adjusts the space used in physical memory and on disk to maintain a minimum number of available bytes for the operating system and processes.</span></span> <span data-ttu-id="8d972-603">可用字节数不多时，虚拟内存管理器允许进程的工作集不断增长，或使它们通过删除旧的页为每个新页面添加稳定。</span><span class="sxs-lookup"><span data-stu-id="8d972-603">When available bytes are plentiful, the Virtual Memory Manager lets the working sets of processes grow, or keeps them stable by removing an old page for each new page added.</span></span> <span data-ttu-id="8d972-604">几个可用字节时，虚拟内存管理器必须剪裁流程来保持的最低要求的工作集。</span><span class="sxs-lookup"><span data-stu-id="8d972-604">When available bytes are few, the Virtual Memory Manager must trim the working sets of processes to maintain the minimum required.</span></span>  

 <span data-ttu-id="8d972-605">此分析进行检查以查看总可用内存是否不足 – 10%可用发出警告和在可用的 5%的关键。</span><span class="sxs-lookup"><span data-stu-id="8d972-605">This analysis checks to see whether the total available memory is low – Warning at 10 percent available and Critical at 5 percent available.</span></span> <span data-ttu-id="8d972-606">每小时 10 MB 的下降趋势检测到，指示潜在即将推出的内存情况时，警告也会发出警报。</span><span class="sxs-lookup"><span data-stu-id="8d972-606">A warning is also alerted when a decreasing trend of 10 MB’s per hour is detected, indicating a potential upcoming memory condition.</span></span> <span data-ttu-id="8d972-607">物理内存不足可能导致更高的特权模式下 CPU 和系统的延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-607">Low physical memory can cause increased privileged mode CPU and system delays.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-608">References</span><span class="sxs-lookup"><span data-stu-id="8d972-608">References</span></span>  

-   <span data-ttu-id="8d972-609">在检测内存瓶颈 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span><span class="sxs-lookup"><span data-stu-id="8d972-609">Detecting Memory Bottlenecks at [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)</span></span>  

-   <span data-ttu-id="8d972-610">排除了受内存限制的问题 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="8d972-610">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  

## <a name="memory-leak-detection-analysis"></a><span data-ttu-id="8d972-611">内存泄漏检测分析</span><span class="sxs-lookup"><span data-stu-id="8d972-611">Memory Leak Detection Analysis</span></span>  
 <span data-ttu-id="8d972-612">此分析确定的任何过程是否消耗大量系统的内存，并在进程是否在内存使用量随时间增加。</span><span class="sxs-lookup"><span data-stu-id="8d972-612">This analysis determines whether any of the processes are consuming a large amount of the system's memory and whether the process is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-613">使用大量的内存的进程没什么关系，只要进程的内存返回到系统。</span><span class="sxs-lookup"><span data-stu-id="8d972-613">A process consuming large portions of memory is okay as long as the process returns the memory back to the system.</span></span> <span data-ttu-id="8d972-614">查找增加图表中的趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-614">Look for increasing trends in the chart.</span></span> <span data-ttu-id="8d972-615">长的一段时间内为增长趋势可能指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-615">An increasing trend over a long period of time could indicate a memory leak.</span></span> <span data-ttu-id="8d972-616">专用字节数是内存的当前大小 （字节），此进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="8d972-616">Private Bytes is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="8d972-617">此分析检查 10 MB 的每小时和 5 MB 的每小时增加趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-617">This analysis checks for 10 MB’s per hour and 5 MB’s per hour increasing trends.</span></span> <span data-ttu-id="8d972-618">使用此分析在可用内存分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-618">Use this analysis in correlation with the Available Memory analysis.</span></span>  

 <span data-ttu-id="8d972-619">此外，请注意，新启动的进程将最初显示为内存泄漏时只是正常的启动行为。</span><span class="sxs-lookup"><span data-stu-id="8d972-619">Also, keep in mind that newly started processes will initially appear as a memory leak when it is simply normal startup behavior.</span></span> <span data-ttu-id="8d972-620">当进程会继续占用的内存和长的一段时间，不会释放内存时，将发生内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-620">A memory leak occurs when a process continues to consume memory and does not release memory over a long period of time.</span></span>  

 <span data-ttu-id="8d972-621">如果您怀疑内存泄漏情况，然后安装并使用调试诊断工具工具。</span><span class="sxs-lookup"><span data-stu-id="8d972-621">If you suspect a memory leak condition, then install and use the Debug Diag tool.</span></span> <span data-ttu-id="8d972-622">调试诊断工具的详细信息，请参阅参考部分。</span><span class="sxs-lookup"><span data-stu-id="8d972-622">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="reference"></a><span data-ttu-id="8d972-623">参考</span><span class="sxs-lookup"><span data-stu-id="8d972-623">Reference</span></span>  
 <span data-ttu-id="8d972-624">调试诊断工具在 v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span><span class="sxs-lookup"><span data-stu-id="8d972-624">Debug Diagnostic Tool v1.1 at [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)</span></span>  

## <a name="memory-pagessec-analysis"></a><span data-ttu-id="8d972-625">内存秒页数分析</span><span class="sxs-lookup"><span data-stu-id="8d972-625">Memory Pages/sec Analysis</span></span>  
 <span data-ttu-id="8d972-626">此分析检查"页/秒"为高。</span><span class="sxs-lookup"><span data-stu-id="8d972-626">This analysis checks to see whether the “Pages/sec” is high.</span></span> <span data-ttu-id="8d972-627">如果高，然后在系统可能内存不足通过尝试进行分页到磁盘的内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-627">If it is high, then the system is likely running out of memory by trying to page the memory to the disk.</span></span> <span data-ttu-id="8d972-628">"页/秒"是从读取或写入磁盘为解决强制分页错误页的速率。</span><span class="sxs-lookup"><span data-stu-id="8d972-628">“Pages/sec” is the rate at which pages are read from or written to disk to resolve hard page faults.</span></span> <span data-ttu-id="8d972-629">此计数器是导致系统范围延迟的错误种类的主要指示器。</span><span class="sxs-lookup"><span data-stu-id="8d972-629">This counter is a primary indicator of the kinds of faults that cause system-wide delays.</span></span>  <span data-ttu-id="8d972-630">它是"Memory\Pages Input/sec"和"Memory\Pages Output/sec"之和。</span><span class="sxs-lookup"><span data-stu-id="8d972-630">It is the sum of “Memory\Pages Input/sec” and “Memory\Pages Output/sec”.</span></span> <span data-ttu-id="8d972-631">它以页数，因此它可以与其他页，例如"Memory\Page Faults/sec"计数比较计数。</span><span class="sxs-lookup"><span data-stu-id="8d972-631">It is counted in numbers of pages, so it can be compared to other counts of pages, such as “Memory\Page Faults/sec”.</span></span>  

 <span data-ttu-id="8d972-632">此计数器应始终为 1,000 以下。</span><span class="sxs-lookup"><span data-stu-id="8d972-632">This counter should always be below 1,000.</span></span> <span data-ttu-id="8d972-633">此分析检查到超过 1,000 的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-633">This analysis checks for values above 1,000.</span></span> <span data-ttu-id="8d972-634">与可用内存分析和内存泄漏检测分析的相关中使用此分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-634">Use this analysis in correlation with Available Memory Analysis and Memory Leak Detection analysis.</span></span> <span data-ttu-id="8d972-635">如果所有分析都在同一时间都引发警报，这可能表示系统内存不足。</span><span class="sxs-lookup"><span data-stu-id="8d972-635">If all analyses are throwing alerts at the same time, then this may indicate the system is running out of memory.</span></span> <span data-ttu-id="8d972-636">按照本主题中的其他信息有关内存泄漏检测分析中所述的分析步骤。</span><span class="sxs-lookup"><span data-stu-id="8d972-636">Follow analysis steps mentioned in Additional Information Regarding Memory Leak Detection analysis in this topic.</span></span>  

### <a name="reference"></a><span data-ttu-id="8d972-637">参考</span><span class="sxs-lookup"><span data-stu-id="8d972-637">Reference</span></span>  
 <span data-ttu-id="8d972-638">排除了受内存限制的问题 [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span><span class="sxs-lookup"><span data-stu-id="8d972-638">Ruling Out Memory-Bound Problems at [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)</span></span>  

## <a name="memory-system-cache-resident-bytes-analysis"></a><span data-ttu-id="8d972-639">分析内存系统缓存驻留字节数</span><span class="sxs-lookup"><span data-stu-id="8d972-639">Memory System Cache Resident Bytes Analysis</span></span>  
 <span data-ttu-id="8d972-640">"系统缓存驻留字节数"是大小 （字节） 文件系统缓存中的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="8d972-640">“System Cache Resident Bytes” is the size, in bytes, of the pageable operating system code in the file system cache.</span></span> <span data-ttu-id="8d972-641">此值仅包含当前物理页面，不包括任何当前未驻留的虚拟内存页面。</span><span class="sxs-lookup"><span data-stu-id="8d972-641">This value includes only current physical pages and does not include any virtual memory pages not currently resident.</span></span> <span data-ttu-id="8d972-642">它就是显示在任务管理器的系统缓存值。</span><span class="sxs-lookup"><span data-stu-id="8d972-642">It does equal the System Cache value shown in Task Manager.</span></span> <span data-ttu-id="8d972-643">因此，此值可能小于的实际使用的文件系统缓存中的虚拟内存量。</span><span class="sxs-lookup"><span data-stu-id="8d972-643">As a result, this value may be smaller than the actual amount of virtual memory in use by the file system cache.</span></span> <span data-ttu-id="8d972-644">此值是一个组件的"内存\\\System 代码驻留字节数"，它表示所有当前正在物理内存的可分页操作系统代码。</span><span class="sxs-lookup"><span data-stu-id="8d972-644">This value is a component of “Memory\\\System Code Resident Bytes”, which represents all pageable operating system code that is currently in physical memory.</span></span> <span data-ttu-id="8d972-645">此计数器显示上次观测的值; 仅它不是平均值。</span><span class="sxs-lookup"><span data-stu-id="8d972-645">This counter displays the last observed value only; it is not an average.</span></span>  

 <span data-ttu-id="8d972-646">此分析检查每小时 10 MB 的增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-646">This analysis checks for an increasing trend of 10 MB’s per hour.</span></span> <span data-ttu-id="8d972-647">承受负载时，服务器可能使用系统缓存，以便缓存如磁盘 I/O 活动。</span><span class="sxs-lookup"><span data-stu-id="8d972-647">Under load, a server might use the system cache in order to cache I/O activity such as disk.</span></span> <span data-ttu-id="8d972-648">在中使用相关进程 IO Data Operations/sec 和其他进程 IO 操作数/秒的分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-648">Use in correlation with Process IO Data Operations/sec and Process IO Other Operations/sec analyses.</span></span>  

## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a><span data-ttu-id="8d972-649">处理器利用率分析和进程过多的处理器使用</span><span class="sxs-lookup"><span data-stu-id="8d972-649">Processor Utilization Analysis and Excessive Processor Use by Processes</span></span>  
 <span data-ttu-id="8d972-650">"%Processor Time"是处理器执行非闲置线程的已用时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-650">“% Processor Time” is the percentage of elapsed time that the processor spends to execute a non-idle thread.</span></span> <span data-ttu-id="8d972-651">通过测量采样间隔的空闲线程处于活动状态的持续时间然后减去间隔持续时间计算出它。</span><span class="sxs-lookup"><span data-stu-id="8d972-651">It is calculated by measuring the duration the idle thread is active in the sample interval, and then subtracting that time from the interval duration.</span></span> <span data-ttu-id="8d972-652">（每个处理器都有占用时钟周期时没有其他线程准备好运行的空闲线程。）此计数器是处理器活动的主要指示器，并显示在采样间隔期间观察到的忙时间的平均百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-652">(Each processor has an idle thread that consumes cycles when no other threads are ready to run.) This counter is the primary indicator of processor activity and displays the average percentage of busy time observed during the sample interval.</span></span> <span data-ttu-id="8d972-653">通过监视服务处于非活动状态，时间然后减去该值从 100%，即可计算出它。</span><span class="sxs-lookup"><span data-stu-id="8d972-653">It is calculated by monitoring the time that the service is inactive, and subtracting that value from 100 percent.</span></span>  

 <span data-ttu-id="8d972-654">此分析检查使用率大于每个单个处理器上的 60%。</span><span class="sxs-lookup"><span data-stu-id="8d972-654">This analysis checks for utilization greater than 60 percent on each individual processor.</span></span> <span data-ttu-id="8d972-655">如果是这样，确定它是否高用户模式 CPU 或高特权模式。</span><span class="sxs-lookup"><span data-stu-id="8d972-655">If so, determine whether it is high user mode CPU or high privileged mode.</span></span> <span data-ttu-id="8d972-656">如果高特权模式下 CPU 怀疑有问题，请参阅"特权模式下 CPU 分析"。</span><span class="sxs-lookup"><span data-stu-id="8d972-656">If high privileged mode CPU is suspected, then see the “Privileged Mode CPU Analysis”.</span></span> <span data-ttu-id="8d972-657">如果怀疑用户模式下处理器瓶颈，请考虑使用进程探查器分析导致高 CPU 占用率的函数。</span><span class="sxs-lookup"><span data-stu-id="8d972-657">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="8d972-658">请参阅"如何为： 标识导致高用户模式 CPU 瓶颈为服务器应用程序在生产环境中的函数"的详细信息的参考资料部分中的文章。</span><span class="sxs-lookup"><span data-stu-id="8d972-658">See “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  

## <a name="processor-queue-length-analysis"></a><span data-ttu-id="8d972-659">处理器队列长度分析</span><span class="sxs-lookup"><span data-stu-id="8d972-659">Processor Queue Length Analysis</span></span>  
 <span data-ttu-id="8d972-660">"Processor Queue Length"是处理器队列中的线程数。</span><span class="sxs-lookup"><span data-stu-id="8d972-660">“Processor Queue Length” is the number of threads in the processor queue.</span></span> <span data-ttu-id="8d972-661">与磁盘计数器，此计数器只显示就绪线程，不运行的线程。</span><span class="sxs-lookup"><span data-stu-id="8d972-661">Unlike the disk counters, this counter shows ready threads only, not threads that are running.</span></span>  <span data-ttu-id="8d972-662">没有单个队列的处理器时间百分比甚至在具有多个处理器的计算机上。</span><span class="sxs-lookup"><span data-stu-id="8d972-662">There is a single queue for processor time even on computers with multiple processors.</span></span> <span data-ttu-id="8d972-663">因此，如果计算机具有多个处理器，您需要此值除以处理工作负载的处理器数。</span><span class="sxs-lookup"><span data-stu-id="8d972-663">Therefore, if a computer has multiple processors, you need to divide this value by the number of processors servicing the workload.</span></span> <span data-ttu-id="8d972-664">每个处理器少于 10 个线程的持续的处理器队列是通常可接受，不管工作负载。</span><span class="sxs-lookup"><span data-stu-id="8d972-664">A sustained processor queue of less than 10 threads per processor is normally acceptable, dependent of the workload.</span></span>  

 <span data-ttu-id="8d972-665">此分析确定平均处理器队列长度是否超过处理器的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-665">This analysis determines whether the average processor queue length exceeds the number of processors.</span></span> <span data-ttu-id="8d972-666">如果是这样，这可能表示处理器瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-666">If so, then this could indicate a processor bottleneck.</span></span> <span data-ttu-id="8d972-667">使用此分析在特权模式下 CPU 分析和由进程过多的处理器使用。</span><span class="sxs-lookup"><span data-stu-id="8d972-667">Use this analysis in correlation with Privileged Mode CPU Analysis and Excessive Processor Use by Process.</span></span> <span data-ttu-id="8d972-668">处理器队列是准备就绪，但不能由处理器执行，因为另一个活动线程当前正在执行的线程的集合。</span><span class="sxs-lookup"><span data-stu-id="8d972-668">The processor queue is the collection of threads that are ready but not able to be executed by the processor because another active thread is currently executing.</span></span> <span data-ttu-id="8d972-669">更多的线程的处理器数大于处理器瓶颈更好地指示持续或重复发生队列。</span><span class="sxs-lookup"><span data-stu-id="8d972-669">A sustained or recurring queue of more threads than number of processors is a good indication of a processor bottleneck.</span></span>  

 <span data-ttu-id="8d972-670">可以结合使用此计数器"处理器\\%Processor Time"计数器来确定你的应用程序是否可以从更多的 Cpu 中受益。</span><span class="sxs-lookup"><span data-stu-id="8d972-670">You can use this counter in conjunction with the “Processor\\% Processor Time” counter to determine whether your application can benefit from more CPUs.</span></span> <span data-ttu-id="8d972-671">没有单个队列的处理器时间，即使在多处理器计算机上。</span><span class="sxs-lookup"><span data-stu-id="8d972-671">There is a single queue for processor time, even on multiprocessor computers.</span></span> <span data-ttu-id="8d972-672">因此，在多处理器计算机中，除"Processor Queue Length"(PQL) 值的处理工作负载的处理器数</span><span class="sxs-lookup"><span data-stu-id="8d972-672">Therefore, in a multiprocessor computer, divide the “Processor Queue Length” (PQL) value by the number of processors servicing the workload</span></span>  

 <span data-ttu-id="8d972-673">如果 CPU 是非常忙 （90%和更高的利用率） 并且 PQL 平均值高于一致的处理器，数则可能存在处理器瓶颈可受益于更多的 Cpu。</span><span class="sxs-lookup"><span data-stu-id="8d972-673">If the CPU is very busy (90 percent and higher utilization) and the PQL average is consistently higher than the number of processors, then you may have a processor bottleneck that could benefit from additional CPUs.</span></span> <span data-ttu-id="8d972-674">或者，你可能会减少线程和应用程序级别的队列的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-674">Or, you could reduce the number of threads and queue at the application level.</span></span> <span data-ttu-id="8d972-675">这会导致减少上下文切换，这非常适合于减少 CPU 负载。</span><span class="sxs-lookup"><span data-stu-id="8d972-675">This will cause less context switching, which is good for reducing CPU load.</span></span> <span data-ttu-id="8d972-676">低 CPU 使用率较高 PQL 的常见原因是随机，处理器时间的请求到达时，线程需要不定期大量处理器时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-676">The common reason for a high PQL with low CPU utilization is that requests for processor time arrive randomly, and threads demand irregular amounts of time from the processor.</span></span> <span data-ttu-id="8d972-677">这意味着在处理器不是瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-677">This means that the processor is not a bottleneck.</span></span> <span data-ttu-id="8d972-678">而是，需要改进工作线程处理逻辑。</span><span class="sxs-lookup"><span data-stu-id="8d972-678">Instead, your threading logic that needs to be improved.</span></span>  

 <span data-ttu-id="8d972-679">如果怀疑用户模式下处理器瓶颈，请考虑使用进程探查器分析导致高 CPU 占用率的函数。</span><span class="sxs-lookup"><span data-stu-id="8d972-679">If a user-mode processor bottleneck is suspected, then consider using a process profiler to analyze the functions causing the high CPU consumption.</span></span> <span data-ttu-id="8d972-680">请参阅"如何为： 标识导致高用户模式 CPU 瓶颈为服务器应用程序在生产环境中的函数"的详细信息的参考资料部分中的文章。</span><span class="sxs-lookup"><span data-stu-id="8d972-680">See the “How To: Identify Functions causing a High User-mode CPU Bottleneck for Server Applications in a Production Environment” article in the references section for more information.</span></span>  

## <a name="privileged-mode-cpu-analysis"></a><span data-ttu-id="8d972-681">特权模式下 CPU 分析</span><span class="sxs-lookup"><span data-stu-id="8d972-681">Privileged Mode CPU Analysis</span></span>  
 <span data-ttu-id="8d972-682">此计数器指示线程在特权模式下运行的时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-682">This counter indicates the percentage of time a thread runs in privileged mode.</span></span> <span data-ttu-id="8d972-683">当你的应用程序调用时 （例如，可执行文件或网络 I/O 或分配内存） 的操作系统功能时，这些操作系统函数在特权模式下执行。</span><span class="sxs-lookup"><span data-stu-id="8d972-683">When your application calls operating system functions (for example to perform file or network I/O or to allocate memory), these operating system functions are executed in privileged mode.</span></span>  

 <span data-ttu-id="8d972-684">高特权模式下 CPU 指示计算机花费了太多时间在与实际 （用户模式） 的系统 I/O 工作。</span><span class="sxs-lookup"><span data-stu-id="8d972-684">High privileged mode CPU indicates that the computer is spending too much time in system I/O versus real (user mode) work.</span></span> <span data-ttu-id="8d972-685">"%Privileged Time"是进程线程在特权模式下执行代码所用的占用时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-685">“% Privileged Time” is the percentage of elapsed time that the process threads spent executing code in privileged mode.</span></span>  <span data-ttu-id="8d972-686">调用 Windows 系统服务时，服务将通常运行在特权模式下，若要获取对系统专有数据的访问权限。</span><span class="sxs-lookup"><span data-stu-id="8d972-686">When a Windows system service is called, the service will often run in privileged mode to gain access to system-private data.</span></span> <span data-ttu-id="8d972-687">在用户模式下执行的线程访问从受此类数据。</span><span class="sxs-lookup"><span data-stu-id="8d972-687">Such data is protected from access by threads executing in user mode.</span></span> <span data-ttu-id="8d972-688">对系统的调用可以是显式或隐式的例如页面错误或中断。</span><span class="sxs-lookup"><span data-stu-id="8d972-688">Calls to the system can be explicit or implicit, such as page faults or interrupts.</span></span> <span data-ttu-id="8d972-689">不像某些早期的操作系统，Windows 使用进程边界作为分系统保护除传统的保护之外的用户和特权模式。</span><span class="sxs-lookup"><span data-stu-id="8d972-689">Unlike some early operating systems, Windows uses process boundaries for subsystem protection in addition to the traditional protection of user and privileged modes.</span></span> <span data-ttu-id="8d972-690">代表应用程序由 Windows 完成某些工作可能会出现在进程中的特权时间除了其他子系统进程中。</span><span class="sxs-lookup"><span data-stu-id="8d972-690">Some work done by Windows on behalf of the application might appear in other subsystem processes in addition to the privileged time in the process.</span></span>  

 <span data-ttu-id="8d972-691">此分析进行检查以查看特权模式下 CPU 是否占用了超过 30%的总 CPU。</span><span class="sxs-lookup"><span data-stu-id="8d972-691">This analysis checks to see whether privileged mode CPU is consuming more than 30 percent of total CPU.</span></span> <span data-ttu-id="8d972-692">如果这样，然后的 CPU 使用率可能会引起如网络、 内存或磁盘 I/O 处理器之外的另一个瓶颈。</span><span class="sxs-lookup"><span data-stu-id="8d972-692">If so, then the CPU consumption is likely caused by another bottleneck other than the processor such as network, memory, or disk I/O.</span></span> <span data-ttu-id="8d972-693">在中使用相关将 %Interrupt Time 和大量的上下文切换分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-693">Use in correlation with % Interrupt Time and High Context Switching analyses.</span></span>  

## <a name="high-context-switching-analysis"></a><span data-ttu-id="8d972-694">高上下文切换分析</span><span class="sxs-lookup"><span data-stu-id="8d972-694">High Context Switching Analysis</span></span>  
 <span data-ttu-id="8d972-695">较高优先级线程抢先于当前正在运行的较低优先级线程或高优先级线程阻止时，会发生上下文切换。</span><span class="sxs-lookup"><span data-stu-id="8d972-695">A context switch happens when a higher priority thread preempts a lower priority thread that is currently running or when a high priority thread blocks.</span></span> <span data-ttu-id="8d972-696">当多个线程共享相同的优先级别，会发生上下文切换的高级别。</span><span class="sxs-lookup"><span data-stu-id="8d972-696">High levels of context switching can occur when many threads share the same priority level.</span></span> <span data-ttu-id="8d972-697">这通常表明过多的线程将在系统上处理器的争用。</span><span class="sxs-lookup"><span data-stu-id="8d972-697">This often indicates that too many threads are competing for the processors on the system.</span></span> <span data-ttu-id="8d972-698">如果您看不到更处理器利用率，并且查看非常低级别的上下文切换，则可能表示线程被阻止。</span><span class="sxs-lookup"><span data-stu-id="8d972-698">If you do not see much processor utilization and you see very low levels of context switching, it could indicate that threads are blocked.</span></span>  

 <span data-ttu-id="8d972-699">高特权模式下，CPU 和总体 CPU 时应仅调查高上下文切换。</span><span class="sxs-lookup"><span data-stu-id="8d972-699">High context switching should only be investigated when privileged mode CPU and overall CPU is high.</span></span> <span data-ttu-id="8d972-700">作为一般规则，每个处理器每秒 5,000 个较低的上下文切换费率不值得担心。</span><span class="sxs-lookup"><span data-stu-id="8d972-700">As a general rule, context switching rates of less than 5,000 per second per processor are not worth worrying about.</span></span> <span data-ttu-id="8d972-701">如果上下文切换的速率超过 15,000 每秒每个处理器，则一个约束。</span><span class="sxs-lookup"><span data-stu-id="8d972-701">If context switching rates exceed 15,000 per second per processor, then there is a constraint.</span></span>  

 <span data-ttu-id="8d972-702">此分析检查高 CPU、 高特权模式下 CPU 和高 （大于 5,000 每个处理器） 系统上下文切换每秒所有发生在同一时间。</span><span class="sxs-lookup"><span data-stu-id="8d972-702">This analysis checks for high CPU, high privileged mode CPU, and high (greater than 5,000 per processor) system context switches per second all occurring at the same time.</span></span> <span data-ttu-id="8d972-703">如果在发生高上下文切换，然后减少线程和进程在系统上运行的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-703">If high context switching is occurring, then reduce the number of threads and processes running on the system.</span></span>  

## <a name="biztalk-high-database-sessions-analysis"></a><span data-ttu-id="8d972-704">BizTalk 高数据库会话分析</span><span class="sxs-lookup"><span data-stu-id="8d972-704">BizTalk High Database Sessions Analysis</span></span>  
 <span data-ttu-id="8d972-705">此计数器有两个可能的值即正常 (0)，或超出 (1)。</span><span class="sxs-lookup"><span data-stu-id="8d972-705">This counter has two possible values namely normal (0) or exceeded (1).</span></span> <span data-ttu-id="8d972-706">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="8d972-706">This analysis checks for a value of 1.</span></span> <span data-ttu-id="8d972-707">如果是这样，BizTalk 超出允许的数据库会话数的阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-707">If so, BizTalk has exceeded the threshold of the number of database sessions permitted.</span></span> <span data-ttu-id="8d972-708">此值控制 BizTalk 主机阻止设置中的"每 CPU 的数据库连接"值。</span><span class="sxs-lookup"><span data-stu-id="8d972-708">This value is controlled by the “Database connection per CPU” value in the BizTalk Host Throttling settings.</span></span>  

 <span data-ttu-id="8d972-709">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-709">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-710">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="8d972-710">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="8d972-711">此选项禁用默认设置。通常情况下，此设置应仅启用数据库服务器是瓶颈或低端数据库服务器的 BizTalk Server 系统中。</span><span class="sxs-lookup"><span data-stu-id="8d972-711">This option is disabled by default; typically, this setting should only be enabled if the database server is a bottleneck or for low-end database servers in the BizTalk Server system.</span></span> <span data-ttu-id="8d972-712">可以使用 biztalk: Message Agent 性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-712">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-713">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-713">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-714">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-714">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="8d972-715">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-715">The default value is 0.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="8d972-716">"MaxWorkerThreads"注册表项会影响数字的线程提供给 BizTalk，如果大多数 BizTalk 线程都忙于处理数据库连接可帮助。</span><span class="sxs-lookup"><span data-stu-id="8d972-716">The “MaxWorkerThreads” registry key influences the number threads available to BizTalk and may help if most of the BizTalk threads are busy with database connections.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-717">References</span><span class="sxs-lookup"><span data-stu-id="8d972-717">References</span></span>  

-   <span data-ttu-id="8d972-718">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-718">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-719">线程、 数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-719">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

-   <span data-ttu-id="8d972-720">影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-720">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="8d972-721">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-721">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-high-database-size-analysis"></a><span data-ttu-id="8d972-722">BizTalk 高数据库大小分析</span><span class="sxs-lookup"><span data-stu-id="8d972-722">BizTalk High Database Size Analysis</span></span>  
 <span data-ttu-id="8d972-723">此计数器是指此进程已发布的数据库队列中的消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-723">This counter refers to the number of messages in the database queues that this process has published.</span></span> <span data-ttu-id="8d972-724">此值按所有主机队列表中的项数以及后台处理表和跟踪表中的项数来衡量。</span><span class="sxs-lookup"><span data-stu-id="8d972-724">This value is measured by the number of items in the queue tables for all hosts and the number of items in the spool and tracking tables.</span></span> <span data-ttu-id="8d972-725">队列包括工作队列、 状态队列和挂起的队列。</span><span class="sxs-lookup"><span data-stu-id="8d972-725">Queue includes the work queue, the state queue and the suspended queue.</span></span> <span data-ttu-id="8d972-726">如果要将某一进程发布到多个队列，则此计数器将反映所有队列的加权平均值。</span><span class="sxs-lookup"><span data-stu-id="8d972-726">If a process is publishing to multiple queues, this counter reflects the weighted average of all the queues.</span></span>  

 <span data-ttu-id="8d972-727">如果重新启动该主机，则内存中保留的统计信息将丢失。</span><span class="sxs-lookup"><span data-stu-id="8d972-727">If the host is restarted, statistics held in memory are lost.</span></span> <span data-ttu-id="8d972-728">由于涉及一些系统开销，则 BizTalk Server 会恢复收集统计信息，仅当有至少 100 发布，其中 5%的总会发布在重新启动的主机进程内。</span><span class="sxs-lookup"><span data-stu-id="8d972-728">Since some overhead is involved, BizTalk Server will resume gathering statistics only when there are at least 100 publishes, with 5 percent of the total publishes within the restarted host process.</span></span>  

 <span data-ttu-id="8d972-729">此计数器将设置为值 1，如果任何一个条件为数据库阈值中的消息计数列出发生。</span><span class="sxs-lookup"><span data-stu-id="8d972-729">This counter will be set to a value of 1 if either of the conditions listed for the message count in database threshold occurs.</span></span> <span data-ttu-id="8d972-730">在本主题将介绍此阈值如何修改默认主机阻止设置下面引用。</span><span class="sxs-lookup"><span data-stu-id="8d972-730">This threshold is documented in the topic How to Modify the Default Host Throttling Settings referenced below.</span></span> <span data-ttu-id="8d972-731">默认情况下主机消息阻止阈值的数据库中的计数设置为 50000，会触发在下列情况下的在触发阻止条件的值：</span><span class="sxs-lookup"><span data-stu-id="8d972-731">By default the host message count in database throttling threshold is set to a value of 50,000, which will trigger a throttling condition under the following circumstances:</span></span>  

- <span data-ttu-id="8d972-732">主机实例发布到订阅主机的工作、状态和已挂起队列的消息总数超过 50,000。</span><span class="sxs-lookup"><span data-stu-id="8d972-732">The total number of messages published by the host instance to the work, state, and suspended queues of the subscribing hosts exceeds 50,000.</span></span>  

- <span data-ttu-id="8d972-733">后台处理表或跟踪表中的消息数超过 500,000。</span><span class="sxs-lookup"><span data-stu-id="8d972-733">The number of messages in the spool table or the tracking table exceeds 500,000 messages.</span></span>  

  <span data-ttu-id="8d972-734">由于挂起的消息包括在数据库计算中的消息计数，阻止消息发布即使 BizTalk 服务器很低或没有负载会出现。</span><span class="sxs-lookup"><span data-stu-id="8d972-734">Since suspended messages are included in the message count in database calculation, throttling of message publishing can occur even if the BizTalk server is experiencing low or no load.</span></span>  

  <span data-ttu-id="8d972-735">此分析检查的值为 1。</span><span class="sxs-lookup"><span data-stu-id="8d972-735">This analysis checks for a value of 1.</span></span> <span data-ttu-id="8d972-736">如果发生这种情况，请考虑将减少数据库中的消息的数目的操作过程。</span><span class="sxs-lookup"><span data-stu-id="8d972-736">If this occurs, then consider a course of action that will reduce the number of messages in the database.</span></span> <span data-ttu-id="8d972-737">例如，确保 BizTalk SQL Server 作业正在运行不会出错并在 BizTalk 管理控制台中使用组中心确定消息逐渐累积引起大量挂起消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-737">For example, ensure the BizTalk SQL Server jobs are running without error and use the Group Hub in the BizTalk Administration console to determine whether message build up is caused by large numbers of suspended messages.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-738">References</span><span class="sxs-lookup"><span data-stu-id="8d972-738">References</span></span>  

-   <span data-ttu-id="8d972-739">挂起的消息包括在数据库限制阈值中的消息计数 [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span><span class="sxs-lookup"><span data-stu-id="8d972-739">Suspended Messages are Included in the Message Count in Database Throttling Threshold at [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)</span></span>  

-   <span data-ttu-id="8d972-740">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-740">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-741">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-741">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

## <a name="biztalk-high-in-process-message-count-analysis"></a><span data-ttu-id="8d972-742">BizTalk 高进程内消息计数分析</span><span class="sxs-lookup"><span data-stu-id="8d972-742">BizTalk High In-Process Message Count Analysis</span></span>  
 <span data-ttu-id="8d972-743">主机阻止设置中的"进程内消息数 CPU"设置为的最大未处理的消息传送到端点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="8d972-743">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="8d972-744">此数值不包括从数据库但仍正在等待传递在内存中队列中检索的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-744">This number does not include the messages retrieved from database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="8d972-745">可以使用 biztalk: Message Agent 性能对象类别下的 in-process message count 性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-745">You can monitor the number of in-Process Messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-746">考虑阻止条件时，此参数提供了阻止机制提示。</span><span class="sxs-lookup"><span data-stu-id="8d972-746">This parameter provides a hint to the throttling mechanism when considering throttling conditions.</span></span> <span data-ttu-id="8d972-747">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="8d972-747">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="8d972-748">通过监视进程内消息计数性能计数器，可以验证实际的阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-748">You can verify the actual threshold by monitoring the in-process message count performance counter.</span></span>  

 <span data-ttu-id="8d972-749">此参数可以设置为较小的值对于大消息方案，其中平均消息大小较大或消息的处理可能需要大量的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-749">This parameter can be set to a smaller value for large message scenarios, where either the average message size is high, or the processing of messages may require a large number of messages.</span></span> <span data-ttu-id="8d972-750">这将变得显而易见，如果过于频繁基于内存的限制和内存阈值获取自动调整为大体上低的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-750">This would be evident if a scenario experiences memory-based throttling too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="8d972-751">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-751">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="8d972-752">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-752">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span>  

 <span data-ttu-id="8d972-753">此分析检查高进程内消息计数计数器来确定是否发生这种类型的限制。</span><span class="sxs-lookup"><span data-stu-id="8d972-753">This analysis checks the High In-Process Message Count counter to determine whether this kind of throttling is occurring.</span></span> <span data-ttu-id="8d972-754">如果是这样，请考虑调整"每 CPU 消息进程内"设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-754">If so, consider adjusting the “In-Process messages per CPU” setting.</span></span> <span data-ttu-id="8d972-755">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-755">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-756">在"进程内消息数 CPU"设置禁用基于每 CPU 的进程内消息数的阻止功能中输入值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-756">Enter a value of 0 in the “In-Process messages per CPU” setting to disable throttling based on the number of in-process messages per CPU.</span></span> <span data-ttu-id="8d972-757">"进程内消息数 CPU"设置的默认值为 1000。</span><span class="sxs-lookup"><span data-stu-id="8d972-757">The default value for the “In-Process messages per CPU” setting is 1,000.</span></span> <span data-ttu-id="8d972-758">请注意，修改此值可能还会影响在低延迟的消息和/或 BizTalk 资源的效率。</span><span class="sxs-lookup"><span data-stu-id="8d972-758">Note that modifying this value can also have an impact on low latency of messages and/or the efficiency of BizTalk resources.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-759">References</span><span class="sxs-lookup"><span data-stu-id="8d972-759">References</span></span>  

-   <span data-ttu-id="8d972-760">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-760">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-761">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-761">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

## <a name="biztalk-high-message-delivery-rate-analysis"></a><span data-ttu-id="8d972-762">BizTalk 高消息送达速率分析</span><span class="sxs-lookup"><span data-stu-id="8d972-762">BizTalk High Message Delivery Rate Analysis</span></span>  
 <span data-ttu-id="8d972-763">对于出站 （送达的） 消息，BizTalk Server 将阻止消息的送达如果主机实例的消息送达传入速率超出消息送达传出速率 \* 指定的速率加速因子 （百分比） 值。</span><span class="sxs-lookup"><span data-stu-id="8d972-763">For outbound (delivered) messages, BizTalk Server throttles delivery of messages if the message delivery incoming rate for the host instance exceeds the message delivery outgoing rate \* the specified rate overdrive factor (percent) value.</span></span> <span data-ttu-id="8d972-764">在消息处理阻止设置对话框上，速率加速因子 （百分比） 参数进行配置。</span><span class="sxs-lookup"><span data-stu-id="8d972-764">The rate overdrive factor (percent) parameter is configurable on the Message Processing Throttling Settings dialog box.</span></span> <span data-ttu-id="8d972-765">对出站消息的基于速率的阻止主要是通过将引入从内存中队列中删除消息并将消息送达端点管理器 (EPM) 或业务流程引擎进行处理之前延迟实现。</span><span class="sxs-lookup"><span data-stu-id="8d972-765">Rate-based throttling for outbound messages is accomplished primarily by inducing a delay before removing the messages from the in-memory queue and delivering the messages to the End Point Manager (EPM) or orchestration engine for processing.</span></span> <span data-ttu-id="8d972-766">不执行任何其他操作，以实现对出站消息的基于速率的阻止。</span><span class="sxs-lookup"><span data-stu-id="8d972-766">No other action is taken to accomplish rate-based throttling for outbound messages.</span></span>  

 <span data-ttu-id="8d972-767">出站阻止可能导致消息送达延迟，消息可能会在内存中队列中堆积，并可能导致出列线程被阻止，直到阻止条件得以缓解。</span><span class="sxs-lookup"><span data-stu-id="8d972-767">Outbound throttling can cause delayed message delivery and messages may build up in the in-memory queue and cause de-queue threads to be blocked until the throttling condition is mitigated.</span></span> <span data-ttu-id="8d972-768">当出列线程被阻止，任何额外的消息从 MessageBox 中提取到的内存中队列的出站送达。</span><span class="sxs-lookup"><span data-stu-id="8d972-768">When de-queue threads are blocked, no additional messages are pulled from the MessageBox into the in-memory queue for outbound delivery.</span></span>  

 <span data-ttu-id="8d972-769">此分析检查的值为 1 高消息送达速率计数器中。</span><span class="sxs-lookup"><span data-stu-id="8d972-769">This analysis checks for a value of 1 in the High Message Delivery Rate counter.</span></span> <span data-ttu-id="8d972-770">高消息送达速率可能引起高处理复杂性、 出站适配器速度缓慢或系统资源出现暂时短缺。</span><span class="sxs-lookup"><span data-stu-id="8d972-770">High message delivery rates can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-771">References</span><span class="sxs-lookup"><span data-stu-id="8d972-771">References</span></span>  

-   <span data-ttu-id="8d972-772">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-772">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-773">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-773">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="8d972-774">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-774">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-high-process-memory-analysis"></a><span data-ttu-id="8d972-775">BizTalk 高进程内存分析</span><span class="sxs-lookup"><span data-stu-id="8d972-775">BizTalk High Process Memory Analysis</span></span>  
 <span data-ttu-id="8d972-776">限制阈值设置 BizTalk 进程内存使用情况是内存的相比工作集大小和可用虚拟内存总量的进程的总和，如果输入一个介于 1 和 100 之间使用百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-776">The BizTalk Process Memory usage throttling threshold setting is the percentage of memory used compared to the sum of the working set size and total available virtual memory for the process if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="8d972-777">默认情况下，BizTalk 进程内存使用情况限制设置为 25。</span><span class="sxs-lookup"><span data-stu-id="8d972-777">By default, the BizTalk Process Memory Usage throttling setting is 25.</span></span> <span data-ttu-id="8d972-778">在指定百分比值时，将按固定的时间间隔来重新计算进程内存阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-778">When a percentage value is specified the process memory threshold is recalculated at regular intervals.</span></span> <span data-ttu-id="8d972-779">如果用户指定一个百分比值，它是根据计算为提交和当前进程内存使用情况的可用内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-779">If the user specifies a percentage value, it is computed based on the available memory to commit and the current Process Memory usage.</span></span>  

 <span data-ttu-id="8d972-780">此分析检查 1 中的较高的进程内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-780">This analysis checks for a value of 1 in the High Process Memory counter.</span></span> <span data-ttu-id="8d972-781">如果发生这种情况，请尝试使用调试诊断工具来确定内存增加的原因 （请参阅内存泄漏检测分析中的引用）。</span><span class="sxs-lookup"><span data-stu-id="8d972-781">If this occurs, then try to determine the cause of the memory increase by using Debug Diag (see references in Memory Leak Detection analysis).</span></span> <span data-ttu-id="8d972-782">请注意，为其正常的进程来启动和此过程中占用内存有很大一部分可能最初显示为内存泄漏，但进程无法释放不再需要因此我减少可用的量的内存会发生的真正的内存泄漏随着时间的推移 mory。</span><span class="sxs-lookup"><span data-stu-id="8d972-782">Note that is it normal for processes to consume a large portion of memory during startup and this may initially appear as a memory leak, but a true memory leak occurs when a process fails to release memory that it no longer needs, thereby reducing the amount of available memory over time.</span></span> <span data-ttu-id="8d972-783">有关如何以一般方式分析 BizTalk 中的进程内存泄漏，请参阅下面的"如何为捕获内存转储的进程的是，正在泄漏内存"引用和/或"内存泄漏检测"分析 PAL 中的详细信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-783">See the “How to Capture a Memory Dump of a Process that is Leaking Memory” reference below and/or the “Memory Leak Detection” analysis in PAL for more information on how to generically analyze process memory leaks in BizTalk.</span></span>  

 <span data-ttu-id="8d972-784">如果要发布的批处理具有很高的内存要求高的进程内存限制可能发生或过多的线程所处理的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-784">High process memory throttling can occur if the batch to be published has steep memory requirements, or too many threads are processing messages.</span></span>  <span data-ttu-id="8d972-785">如果系统表现为过度阻止，请考虑增大与主机进程内存使用情况阈值的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-785">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="8d972-786">如果通过增加进程内存使用阈值引发"内存不足"错误，请考虑减小内部消息队列大小的值，并且进程内消息数每 CPU 阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-786">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and In-process messages per CPU thresholds.</span></span> <span data-ttu-id="8d972-787">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-787">This strategy is particularly relevant in large message processing scenarios.</span></span> <span data-ttu-id="8d972-788">此外，此值应设置为较低的值为具有较大内存要求每个消息的方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-788">In addition, this value should be set to a low value for scenarios having large memory requirement per message.</span></span> <span data-ttu-id="8d972-789">设置较低的值将进入在早期限制和阻止在进程内的内存分解。</span><span class="sxs-lookup"><span data-stu-id="8d972-789">Setting a low value will kick in throttling early on and prevent a memory explosion within the process.</span></span>  

 <span data-ttu-id="8d972-790">如果您的 BizTalk server 定期运行虚拟内存不足，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="8d972-790">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="8d972-791">在 64 位服务器上的每个进程可以解决最多 4 TB 的虚拟内存中的 2 GB 的 32 位的。</span><span class="sxs-lookup"><span data-stu-id="8d972-791">Each process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="8d972-792">一般情况下，强烈建议 64 位 BizTalk 和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="8d972-792">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="8d972-793">请参阅"BizTalk Server 64 位支持"参考的详细信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-793">See the “BizTalk Server 64-bit Support” reference for more information.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-794">References</span><span class="sxs-lookup"><span data-stu-id="8d972-794">References</span></span>  

-   <span data-ttu-id="8d972-795">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-795">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="8d972-796">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-796">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-797">如何捕获泄漏内存的进程的内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="8d972-797">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="8d972-798">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="8d972-798">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  

## <a name="biztalk-high-system-memory-analysis"></a><span data-ttu-id="8d972-799">BizTalk 高系统内存分析</span><span class="sxs-lookup"><span data-stu-id="8d972-799">BizTalk High System Memory Analysis</span></span>  
 <span data-ttu-id="8d972-800">BizTalk 物理内存使用情况限制阈值设置为输入内存消耗与从 1 到 100 之间的如果值可用的物理内存总量的百分比。</span><span class="sxs-lookup"><span data-stu-id="8d972-800">The BizTalk Physical Memory usage throttling threshold setting is the percentage of memory consumption compared to the total amount of available physical memory if a value from 1 through 100 is entered.</span></span> <span data-ttu-id="8d972-801">如果输入大于 100 的值，此设置也可以是以兆字节表示的可用物理内存的总量。</span><span class="sxs-lookup"><span data-stu-id="8d972-801">This setting can also be the total amount of available physical memory in megabytes if a value greater than 100 is entered.</span></span> <span data-ttu-id="8d972-802">输入值 0 可以禁用基于物理内存使用率的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-802">Enter a value of 0 to disable throttling based on physical memory usage.</span></span> <span data-ttu-id="8d972-803">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-803">The default value is 0.</span></span>  

 <span data-ttu-id="8d972-804">此分析检查 1 中的较高的系统内存计数器的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-804">This analysis checks for a value of 1 in the High System Memory counter.</span></span> <span data-ttu-id="8d972-805">由于这样将度量系统内存总量，因此如果非 BizTalk Server 进程占用过多的系统内存，则可能会触发阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-805">Since this measures total system memory, a throttling condition may be triggered if non-BizTalk Server processes are consuming an extensive amount of system memory.</span></span> <span data-ttu-id="8d972-806">因此如果发生这种情况，最好的方法是确定哪些进程正在使用的大多数物理内存和/或向服务器添加额外的物理内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-806">Therefore if this occurs, the best approach is to identify which processes are consuming the most physical memory and/or add additional physical memory to the server.</span></span> <span data-ttu-id="8d972-807">此外，请考虑通过减少 EPM 线程池的默认大小和/或适配器批的大小来减少负载。</span><span class="sxs-lookup"><span data-stu-id="8d972-807">Also, consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span> <span data-ttu-id="8d972-808">有关详细信息，请参阅 PAL 中的内存泄漏检测分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-808">For more information, see the Memory Leak Detection analysis in PAL.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-809">References</span><span class="sxs-lookup"><span data-stu-id="8d972-809">References</span></span>  

-   <span data-ttu-id="8d972-810">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-810">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-811">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-811">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-812">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-812">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-high-thread-count-analysis"></a><span data-ttu-id="8d972-813">BizTalk 高线程计数分析</span><span class="sxs-lookup"><span data-stu-id="8d972-813">BizTalk High Thread Count Analysis</span></span>  
 <span data-ttu-id="8d972-814">"每 CPU 线程数"是包括线程使用的适配器的主机进程中线程的总数。</span><span class="sxs-lookup"><span data-stu-id="8d972-814">“Threads Per CPU” is the total number of threads in the host process including threads used by adapters.</span></span> <span data-ttu-id="8d972-815">如果超过此阈值时，BizTalk Server 将尝试减小 EPM 线程池和消息代理线程池的大小。</span><span class="sxs-lookup"><span data-stu-id="8d972-815">If this threshold is exceeded, BizTalk Server will try to reduce the size of the EPM thread pool and message agent thread pool.</span></span> <span data-ttu-id="8d972-816">如果高负载可能导致创建大量线程，则在这种情况下，应启用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-816">Thread based throttling should be enabled in scenarios where high load can lead to the creation of a large number of threads.</span></span> <span data-ttu-id="8d972-817">此参数同时影响入站和出站阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-817">This parameter affects both inbound and outbound throttling.</span></span> <span data-ttu-id="8d972-818">默认情况下禁用基于线程的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-818">Thread based throttling is disabled by default.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="8d972-819">用户指定的值用作一般准则，并且主机动态地自行调整此阈值基于内存使用模式和进程的线程要求。</span><span class="sxs-lookup"><span data-stu-id="8d972-819">The user-specified value is used as a guideline, and the host may dynamically self-tune this threshold value based on the memory usage patterns and thread requirements of the process.</span></span>  

 <span data-ttu-id="8d972-820">此分析检查值为高 Thread Count 计数器中为 1。</span><span class="sxs-lookup"><span data-stu-id="8d972-820">This analysis checks for a value of 1 in the High Thread Count counter.</span></span> <span data-ttu-id="8d972-821">考虑调整不同线程池的大小，以确保系统不会创建大量线程。</span><span class="sxs-lookup"><span data-stu-id="8d972-821">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span> <span data-ttu-id="8d972-822">每个第二个分析，以确定是否使用过多的线程，但在操作系统处于满负荷状态大多数情况下，高的线程计数原因比 BizTalk server 上的后端数据库上的更多争用，可以与上下文切换相关此分析。</span><span class="sxs-lookup"><span data-stu-id="8d972-822">This analysis can be correlated with Context Switches per Second analysis to determine whether the operating system is saturated with too many threads, but in most cases high thread counts cause more contention on the backend database than on the BizTalk server.</span></span> <span data-ttu-id="8d972-823">有关修改线程池大小的详细信息请参阅如何修改默认主机阻止设置在引用中。</span><span class="sxs-lookup"><span data-stu-id="8d972-823">For more information about modifying the thread pool sizes see How to Modify the Default Host Throttling Settings in references.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-824">References</span><span class="sxs-lookup"><span data-stu-id="8d972-824">References</span></span>  

- <span data-ttu-id="8d972-825">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-825">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

- <span data-ttu-id="8d972-826">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-826">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

- <span data-ttu-id="8d972-827">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-827">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

- <span data-ttu-id="8d972-828">影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-828">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

- <span data-ttu-id="8d972-829">线程、 数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-829">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

  <span data-ttu-id="8d972-830">BizTalk 的入站延迟 AnalysisAverage 滞后时间自消息引擎文档从接收适配器发布到消息框之前的毫秒。</span><span class="sxs-lookup"><span data-stu-id="8d972-830">BizTalk Inbound Latency AnalysisAverage latency in milliseconds from when the messaging engine receives a document from the adapter until the time it is published to the message box.</span></span> <span data-ttu-id="8d972-831">减少滞后时间是 BizTalk 中，某些用户重要因此跟踪时间的文档所用的入站适配器中的量是很重要。</span><span class="sxs-lookup"><span data-stu-id="8d972-831">Reducing latency is important to some users of BizTalk, therefore tracking how much time documents spend in the inbound adapter is important.</span></span>  

  <span data-ttu-id="8d972-832">下面是一个显示如何测量滞后时间的图表。</span><span class="sxs-lookup"><span data-stu-id="8d972-832">Here is a chart showing how latency is measured.</span></span>  

|<span data-ttu-id="8d972-833">@shouldalert</span><span class="sxs-lookup"><span data-stu-id="8d972-833">1</span></span>|<span data-ttu-id="8d972-834">2</span><span class="sxs-lookup"><span data-stu-id="8d972-834">2</span></span>|<span data-ttu-id="8d972-835">3</span><span class="sxs-lookup"><span data-stu-id="8d972-835">3</span></span>|<span data-ttu-id="8d972-836">4</span><span class="sxs-lookup"><span data-stu-id="8d972-836">4</span></span>|<span data-ttu-id="8d972-837">5</span><span class="sxs-lookup"><span data-stu-id="8d972-837">5</span></span>|<span data-ttu-id="8d972-838">6</span><span class="sxs-lookup"><span data-stu-id="8d972-838">6</span></span>|  
|-------|-------|-------|-------|-------|-------|  
|<span data-ttu-id="8d972-839">适配器接收消息并将提交到引擎之前都在消息引擎不在适配器中完成的工作中这些性能计数器捕获</span><span class="sxs-lookup"><span data-stu-id="8d972-839">Adapter receives message and submits it to the engine, work done in adapter before message is given to engine not captured in these perf counters</span></span>|<span data-ttu-id="8d972-840">引擎从适配器接收消息，执行接收管道、 映射、 订阅评估，保留 DB 中的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-840">Engine receives message from adapter, executes receive pipeline, map, subscription evaluation, persist message in DB.</span></span>|<span data-ttu-id="8d972-841">业务流程或要求响应端口将运行并生成响应消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-841">Orchestration or Solicit-Response port runs and generates a response message.</span></span>|<span data-ttu-id="8d972-842">响应消息在消息引擎中取消排队、 执行发送管道和映射。</span><span class="sxs-lookup"><span data-stu-id="8d972-842">Response message is dequeued in messaging engine, execute the send pipeline, map.</span></span>|<span data-ttu-id="8d972-843">消息引擎将响应消息提供给适配器。</span><span class="sxs-lookup"><span data-stu-id="8d972-843">Messaging engine gives response message to adapter.</span></span>|<span data-ttu-id="8d972-844">适配器通知引擎消息都是。</span><span class="sxs-lookup"><span data-stu-id="8d972-844">Adapter informs engine message is all done.</span></span>|  
||<span data-ttu-id="8d972-845">I</span><span class="sxs-lookup"><span data-stu-id="8d972-845">I</span></span>|||||  
||<span data-ttu-id="8d972-846">RR</span><span class="sxs-lookup"><span data-stu-id="8d972-846">RR</span></span>|<span data-ttu-id="8d972-847">RR</span><span class="sxs-lookup"><span data-stu-id="8d972-847">RR</span></span>|<span data-ttu-id="8d972-848">RR</span><span class="sxs-lookup"><span data-stu-id="8d972-848">RR</span></span>|||  
||||<span data-ttu-id="8d972-849">O</span><span class="sxs-lookup"><span data-stu-id="8d972-849">O</span></span>|<span data-ttu-id="8d972-850">O</span><span class="sxs-lookup"><span data-stu-id="8d972-850">O</span></span>|<span data-ttu-id="8d972-851">O</span><span class="sxs-lookup"><span data-stu-id="8d972-851">O</span></span>|  
|||||<span data-ttu-id="8d972-852">OA</span><span class="sxs-lookup"><span data-stu-id="8d972-852">OA</span></span>|<span data-ttu-id="8d972-853">OA</span><span class="sxs-lookup"><span data-stu-id="8d972-853">OA</span></span>|  

 <span data-ttu-id="8d972-854">我 = 入站的延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-854">I = Inbound Latency</span></span>  

 <span data-ttu-id="8d972-855">RR = 请求响应延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-855">RR = Request Response Latency</span></span>  

 <span data-ttu-id="8d972-856">O = 出站延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-856">O = Outbound Latency</span></span>  

 <span data-ttu-id="8d972-857">OA = 出站适配器延迟</span><span class="sxs-lookup"><span data-stu-id="8d972-857">OA = Outbound Adapter Latency</span></span>  

 <span data-ttu-id="8d972-858">假设低延迟环境，此分析会检查文档是否花费时间超过 5 秒入站适配器中。</span><span class="sxs-lookup"><span data-stu-id="8d972-858">Assuming a low latency environment, this analysis checks whether the document spent more than 5 seconds in the inbound adapter.</span></span> <span data-ttu-id="8d972-859">这可能指示在传输中，通过此主机实例中的入站适配器的消息的处理延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-859">This may indicate a processing delay in the transport of messages through inbound adapters in this host instance.</span></span> <span data-ttu-id="8d972-860">如果此主机实例中存在多个入站的适配器，请考虑将它们分散到其自己的主机以确定哪个入站的适配器的高延迟。</span><span class="sxs-lookup"><span data-stu-id="8d972-860">If multiple inbound adapters exist in this host instance, then consider separating them into their own hosts to determine which inbound adapter has high latency.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-861">References</span><span class="sxs-lookup"><span data-stu-id="8d972-861">References</span></span>  

-   <span data-ttu-id="8d972-862">BizTalk Server 数据库优化</span><span class="sxs-lookup"><span data-stu-id="8d972-862">BizTalk Server Database Optimization</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=104427](http://go.microsoft.com/fwlink/?linkid=104427)  

-   <span data-ttu-id="8d972-863">请求/响应消息传送</span><span class="sxs-lookup"><span data-stu-id="8d972-863">Request/Response Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155288](http://go.microsoft.com/fwlink/?LinkID=155288)  

-   <span data-ttu-id="8d972-864">确定 BizTalk 层的瓶颈</span><span class="sxs-lookup"><span data-stu-id="8d972-864">Identifying Bottlenecks in the BizTalk Tier</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155289](http://go.microsoft.com/fwlink/?LinkID=155289)  

## <a name="biztalk-message-delivery-throttling-state-analysis"></a><span data-ttu-id="8d972-865">BizTalk 消息传递限制状态分析</span><span class="sxs-lookup"><span data-stu-id="8d972-865">BizTalk Message Delivery Throttling State Analysis</span></span>  
 <span data-ttu-id="8d972-866">BizTalk 消息传递阻止状态是主要指标，限制之一。</span><span class="sxs-lookup"><span data-stu-id="8d972-866">The BizTalk message delivery throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="8d972-867">它是指示系统是否要阻止消息送达 （影响 XLANG 消息处理和出站传输） 的标志。</span><span class="sxs-lookup"><span data-stu-id="8d972-867">It is a flag indicating whether the system is throttling message delivery (affecting XLANG message processing and outbound transports).</span></span> <span data-ttu-id="8d972-868">由计数器的数值指示阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-868">The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="8d972-869">下面是一系列的值和其各自的含义：</span><span class="sxs-lookup"><span data-stu-id="8d972-869">Here is a list of the values and their respective meaning:</span></span>  

|||  
|-|-|  
|<span data-ttu-id="8d972-870">0</span><span class="sxs-lookup"><span data-stu-id="8d972-870">0</span></span>|<span data-ttu-id="8d972-871">不限制</span><span class="sxs-lookup"><span data-stu-id="8d972-871">Not throttling</span></span>|  
|<span data-ttu-id="8d972-872">@shouldalert</span><span class="sxs-lookup"><span data-stu-id="8d972-872">1</span></span>|<span data-ttu-id="8d972-873">由于消息送达速率不匹配（输入速率超出输出速率）而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-873">Throttling due to imbalanced message delivery rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="8d972-874">3</span><span class="sxs-lookup"><span data-stu-id="8d972-874">3</span></span>|<span data-ttu-id="8d972-875">由于进程内消息数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-875">Throttling due to high in-process message count</span></span>|  
|<span data-ttu-id="8d972-876">4</span><span class="sxs-lookup"><span data-stu-id="8d972-876">4</span></span>|<span data-ttu-id="8d972-877">由于进程内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-877">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="8d972-878">5</span><span class="sxs-lookup"><span data-stu-id="8d972-878">5</span></span>|<span data-ttu-id="8d972-879">由于系统内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-879">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="8d972-880">9</span><span class="sxs-lookup"><span data-stu-id="8d972-880">9</span></span>|<span data-ttu-id="8d972-881">由于线程数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-881">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="8d972-882">10</span><span class="sxs-lookup"><span data-stu-id="8d972-882">10</span></span>|<span data-ttu-id="8d972-883">由于送达时的用户替代而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-883">Throttling due to user override on delivery</span></span>|  

 <span data-ttu-id="8d972-884">此分析检查每个值，并为每个具有特定的警报。</span><span class="sxs-lookup"><span data-stu-id="8d972-884">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-885">References</span><span class="sxs-lookup"><span data-stu-id="8d972-885">References</span></span>  

-   <span data-ttu-id="8d972-886">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-886">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-887">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-887">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-messagebox-database-connection-failures-analysis"></a><span data-ttu-id="8d972-888">BizTalk MessageBox 数据库连接故障分析</span><span class="sxs-lookup"><span data-stu-id="8d972-888">BizTalk MessageBox Database Connection Failures Analysis</span></span>  
 <span data-ttu-id="8d972-889">此性能计数器是数据库连接尝试失败，因为启动主机实例的数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-889">This performance counter is the number of attempted database connections that failed since the host instance started.</span></span> <span data-ttu-id="8d972-890">如果出于任何原因，承载 BizTalk 数据库的 SQL Server 服务将变得不可用，则数据库群集会将资源从主动计算机传输到被动计算机。</span><span class="sxs-lookup"><span data-stu-id="8d972-890">If the SQL Server service hosting the BizTalk databases becomes unavailable for any reason, the database cluster transfers resources from the active computer to the passive computer.</span></span> <span data-ttu-id="8d972-891">在此故障转移过程中，BizTalk Server 服务实例会遇到数据库连接失败，这些实例将自动重新启动以重新连接到数据库。</span><span class="sxs-lookup"><span data-stu-id="8d972-891">During this failover process, the BizTalk Server service instances experience database connection failures and automatically restart to reconnect to the databases.</span></span> <span data-ttu-id="8d972-892">采用故障转移期间传输的资源后，正在运行的数据库计算机（即前面提到的被动计算机）将开始处理数据库连接。</span><span class="sxs-lookup"><span data-stu-id="8d972-892">The functioning database computer (previously the passive computer) begins processing the database connections after assuming the resources during failover.</span></span>  

 <span data-ttu-id="8d972-893">当 BizTalk Server 运行时无法与 MessageBox 或管理数据库进行通信时，将出现 DBNetLib （数据库网络库） 错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-893">DBNetLib (Database Network Library) errors occur when the BizTalk Server runtime is unable to communicate with either the MessageBox or management databases.</span></span> <span data-ttu-id="8d972-894">此操作时，会捕获此异常的 BizTalk Server 运行时实例将关闭，然后循环每隔一分钟进行检查，请参阅数据库是否可用。</span><span class="sxs-lookup"><span data-stu-id="8d972-894">When this occurs, the BizTalk Server runtime instance that catches the exception shuts down and then cycles every minute to check to see whether the database is available.</span></span> <span data-ttu-id="8d972-895">有关此主题，请参阅详细信息的参考资料部分。</span><span class="sxs-lookup"><span data-stu-id="8d972-895">See the references section for more information on this topic.</span></span>  

 <span data-ttu-id="8d972-896">当客户端启动到服务器的 TCP/IP 套接字连接时，客户端通常连接到服务器上的特定端口，并请求服务器通过临时（或暂时）TCP 或 UDP 端口进行响应。</span><span class="sxs-lookup"><span data-stu-id="8d972-896">When a client initiates a TCP/IP socket connection to a server, the client typically connects to a specific port on the server and requests that the server respond to the client over an ephemeral, or short lived, TCP or UDP port.</span></span> <span data-ttu-id="8d972-897">在 Windows Server 2003 和 Windows XP 上，客户端应用程序使用的临时端口的默认范围是从 1025 到 5000。</span><span class="sxs-lookup"><span data-stu-id="8d972-897">On Windows Server 2003 and Windows XP, the default range of ephemeral ports used by client applications is from 1025 through 5000.</span></span> <span data-ttu-id="8d972-898">在某些情况下，很可能会耗尽默认范围内的可用端口。</span><span class="sxs-lookup"><span data-stu-id="8d972-898">Under certain conditions it is possible that the available ports in the default range will be exhausted.</span></span> <span data-ttu-id="8d972-899">有关此主题，请参阅详细信息的参考资料部分。</span><span class="sxs-lookup"><span data-stu-id="8d972-899">See the references section for more information on this topic.</span></span>  

 <span data-ttu-id="8d972-900">此分析会检查数据库连接失败的任何匹配项。</span><span class="sxs-lookup"><span data-stu-id="8d972-900">This analysis checks for any occurrence of database connection failures.</span></span> <span data-ttu-id="8d972-901">数据库连接失败十分重要，因为 BizTalk 将不能没有数据库。</span><span class="sxs-lookup"><span data-stu-id="8d972-901">Database connection failures are critical because BizTalk cannot function without the database.</span></span> <span data-ttu-id="8d972-902">如果数据库连接失败的原因是未知的然后请考虑下面列出的引用和/或联系 Microsoft 支持部门以确定连接故障的性质。</span><span class="sxs-lookup"><span data-stu-id="8d972-902">If the cause of the database connection failure is unknown, then consider the references listed below and/or contact Microsoft Support to determine the nature of the connectivity failure.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-903">References</span><span class="sxs-lookup"><span data-stu-id="8d972-903">References</span></span>  

-   <span data-ttu-id="8d972-904">向外扩展数据库</span><span class="sxs-lookup"><span data-stu-id="8d972-904">Scaled-Out Databases</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155307](http://go.microsoft.com/fwlink/?LinkId=155307)  

-   <span data-ttu-id="8d972-905">避免出现 DBNETLIB 异常</span><span class="sxs-lookup"><span data-stu-id="8d972-905">Avoiding DBNETLIB Exceptions</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155308](http://go.microsoft.com/fwlink/?LinkId=155308)  

-   <span data-ttu-id="8d972-906">避免 TCP/IP 端口耗尽的情况</span><span class="sxs-lookup"><span data-stu-id="8d972-906">Avoiding TCP/IP Port Exhaustion</span></span>  
    [http://go.microsoft.com/fwlink/?LinkId=155309](http://go.microsoft.com/fwlink/?LinkId=155309)  

## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a><span data-ttu-id="8d972-907">BizTalk 消息发布阻止状态分析</span><span class="sxs-lookup"><span data-stu-id="8d972-907">BizTalk Messaging Publishing Throttling State Analysis</span></span>  
 <span data-ttu-id="8d972-908">BizTalk 消息发布阻止状态是主要指标，限制之一。</span><span class="sxs-lookup"><span data-stu-id="8d972-908">The BizTalk message publishing throttling state is one of the primary indicators of throttling.</span></span> <span data-ttu-id="8d972-909">它是指示系统是否要阻止消息发布 （影响 XLANG 消息处理和入站的传输） 的标志。由计数器的数值指示阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-909">It is a flag indicating whether the system is throttling message publishing (affecting XLANG message processing and inbound transports).The throttling condition is indicated by the numeric value of the counter.</span></span> <span data-ttu-id="8d972-910">下面是一系列的值和其各自的含义：</span><span class="sxs-lookup"><span data-stu-id="8d972-910">Here is a list of the values and their respective meaning:</span></span>  

|||  
|-|-|  
|<span data-ttu-id="8d972-911">0</span><span class="sxs-lookup"><span data-stu-id="8d972-911">0</span></span>|<span data-ttu-id="8d972-912">不限制</span><span class="sxs-lookup"><span data-stu-id="8d972-912">Not throttling</span></span>|  
|<span data-ttu-id="8d972-913">2</span><span class="sxs-lookup"><span data-stu-id="8d972-913">2</span></span>|<span data-ttu-id="8d972-914">由于消息发布速率不匹配（输入速率超出输出速率）而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-914">Throttling due to imbalanced message publishing rate (input rate exceeds output rate)</span></span>|  
|<span data-ttu-id="8d972-915">4</span><span class="sxs-lookup"><span data-stu-id="8d972-915">4</span></span>|<span data-ttu-id="8d972-916">由于进程内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-916">Throttling due to process memory pressure</span></span>|  
|<span data-ttu-id="8d972-917">5</span><span class="sxs-lookup"><span data-stu-id="8d972-917">5</span></span>|<span data-ttu-id="8d972-918">由于系统内存压力而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-918">Throttling due to system memory pressure</span></span>|  
|<span data-ttu-id="8d972-919">6</span><span class="sxs-lookup"><span data-stu-id="8d972-919">6</span></span>|<span data-ttu-id="8d972-920">由于数据库增长而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-920">Throttling due to database growth</span></span>|  
|<span data-ttu-id="8d972-921">8</span><span class="sxs-lookup"><span data-stu-id="8d972-921">8</span></span>|<span data-ttu-id="8d972-922">由于会话数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-922">Throttling due to high session count</span></span>|  
|<span data-ttu-id="8d972-923">9</span><span class="sxs-lookup"><span data-stu-id="8d972-923">9</span></span>|<span data-ttu-id="8d972-924">由于线程数过高而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-924">Throttling due to high thread count</span></span>|  
|<span data-ttu-id="8d972-925">11</span><span class="sxs-lookup"><span data-stu-id="8d972-925">11</span></span>|<span data-ttu-id="8d972-926">由于发布时的用户替代而阻止</span><span class="sxs-lookup"><span data-stu-id="8d972-926">Throttling due to user override on publishing</span></span>|  

 <span data-ttu-id="8d972-927">此分析检查每个值，并为每个具有特定的警报。</span><span class="sxs-lookup"><span data-stu-id="8d972-927">This analysis checks for each of these values and has a specific alert for each of them.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-928">References</span><span class="sxs-lookup"><span data-stu-id="8d972-928">References</span></span>  

-   <span data-ttu-id="8d972-929">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-929">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-930">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-930">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

## <a name="biztalk-orchestrations-resident-in-memory"></a><span data-ttu-id="8d972-931">在内存中驻留在 BizTalk 业务流程</span><span class="sxs-lookup"><span data-stu-id="8d972-931">BizTalk Orchestrations Resident in Memory</span></span>  
 <span data-ttu-id="8d972-932">当前以主机实例为宿主的业务流程实例的数量。</span><span class="sxs-lookup"><span data-stu-id="8d972-932">Number of orchestration instances currently hosted by the host instance.</span></span> <span data-ttu-id="8d972-933">峰值或激增的业务流程驻留在内存中可能会被视为正常，为增长趋势可能指示"积累"的内存中的业务流程。</span><span class="sxs-lookup"><span data-stu-id="8d972-933">While spikes or bursts of orchestrations resident in memory may be considered normal, an increasing trend could indicate a “pile up” of orchestrations in memory.</span></span> <span data-ttu-id="8d972-934">当 BizTalk 无法冻结业务流程消息/实例时，可能会出现随着时间的推移为增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-934">An increasing trend over time may occur when BizTalk is unable to dehydrate messages/orchestration instances.</span></span> <span data-ttu-id="8d972-935">尝试将此计数器与"XLANG/s Orchestrations(?) 相关联\Dehydratable 业务流程"问号 （？） 所在相同作为此计数器的计数器实例。</span><span class="sxs-lookup"><span data-stu-id="8d972-935">Try to correlate this counter with “XLANG/s Orchestrations(?)\Dehydratable orchestrations” where the question mark (?) is the same counter instance as this counter.</span></span>  

 <span data-ttu-id="8d972-936">如果大量的业务流程都驻留在内存中的和如果较低数目的业务流程都是可冻结，则您的业务流程有可能在内存中处于空闲状态，并且可能导致内存泄漏情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-936">If a high number of orchestrations are resident in memory and if a low number of orchestrations are dehydratable, then your orchestrations are likely idle in memory and may cause a memory leak condition.</span></span> <span data-ttu-id="8d972-937">如果存在，请使用此分析中与"\XLANG/s 业务流程 （\*） \Idle 业务流程"的关联。</span><span class="sxs-lookup"><span data-stu-id="8d972-937">Use this analysis in correlation with “\XLANG/s Orchestrations(\*)\Idle orchestrations” if present.</span></span> <span data-ttu-id="8d972-938">BizTalk 空闲业务流程中的为增长趋势是更好的内存泄漏，因为无法冻结的业务流程实例的指标。</span><span class="sxs-lookup"><span data-stu-id="8d972-938">An increasing trend in BizTalk Idle Orchestrations is a better indicator of memory leaks due to the inability to dehydrate orchestration instances.</span></span>  

 <span data-ttu-id="8d972-939">此分析检查驻留在内存和超过 50%的驻留在内存中的业务流程是否可冻结业务流程中为增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-939">This analysis checks for an increasing trend in orchestrations resident in memory and if more than 50% of the orchestrations resident in memory are not dehydratable.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-940">References</span><span class="sxs-lookup"><span data-stu-id="8d972-940">References</span></span>  

-   <span data-ttu-id="8d972-941">业务流程引擎性能计数器</span><span class="sxs-lookup"><span data-stu-id="8d972-941">Orchestration Engine Performance Counters</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155290](http://go.microsoft.com/fwlink/?LinkID=155290)  

-   <span data-ttu-id="8d972-942">业务流程冻结和解除冻结</span><span class="sxs-lookup"><span data-stu-id="8d972-942">Orchestration Dehydration and Rehydration</span></span>  
    [http://go.microsoft.com/fwlink/?LinkID=155284](http://go.microsoft.com/fwlink/?LinkID=155284)  

## <a name="biztalk-private-bytes-analysis"></a><span data-ttu-id="8d972-943">BizTalk 专用字节分析</span><span class="sxs-lookup"><span data-stu-id="8d972-943">BizTalk Private Bytes Analysis</span></span>  
 <span data-ttu-id="8d972-944">这是个主机实例和类似于"\Process （\*） \Private 字节数"性能计数器分配的专用内存兆字节。</span><span class="sxs-lookup"><span data-stu-id="8d972-944">This is the megabytes of allocated private memory for the host instance and comparable to the “\Process(\*)\Private Bytes” performance counter.</span></span> <span data-ttu-id="8d972-945">专用字节数是内存的当前大小 （字节） 进程已分配不能与其他进程共享。</span><span class="sxs-lookup"><span data-stu-id="8d972-945">Private Bytes is the current size, in bytes, of memory that a process has allocated that cannot be shared with other processes.</span></span> <span data-ttu-id="8d972-946">此分析确定是否任何主机实例正在使用较大的系统的内存和是否在内存使用量随时间增加的主机实例。</span><span class="sxs-lookup"><span data-stu-id="8d972-946">This analysis determines whether any of the host instances are consuming a large size of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-947">只要它返回到系统内存，占用大量内存的主机实例是没问题。</span><span class="sxs-lookup"><span data-stu-id="8d972-947">A host instance consuming large portions of memory is fine as long as the it returns the memory to the system.</span></span> <span data-ttu-id="8d972-948">查找增加图表中的趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-948">Look for increasing trends in the chart.</span></span> <span data-ttu-id="8d972-949">长的一段时间内为增长趋势可能指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-949">An increasing trend over a long period of time could indicate a memory leak.</span></span>  

 <span data-ttu-id="8d972-950">此分析检查每小时 10 MB 的增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-950">This analysis checks for a 10 MB-per-hour increasing trend.</span></span> <span data-ttu-id="8d972-951">使用此分析中使用的可用内存分析和内存泄漏分析相关。</span><span class="sxs-lookup"><span data-stu-id="8d972-951">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="8d972-952">此外，请注意，新启动主机实例将最初显示为内存泄漏时只需正常启动行为。</span><span class="sxs-lookup"><span data-stu-id="8d972-952">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="8d972-953">当一个过程会一直消耗内存和长的一段时间内没有释放内存时，内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-953">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="8d972-954">如果您怀疑内存泄漏情况，然后阅读下面引用的"内存增长中 BizTalk 消息传送"一文。</span><span class="sxs-lookup"><span data-stu-id="8d972-954">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article referenced below.</span></span> <span data-ttu-id="8d972-955">否则为安装并使用调试诊断工具工具。</span><span class="sxs-lookup"><span data-stu-id="8d972-955">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="8d972-956">调试诊断工具的详细信息，请参阅参考部分。</span><span class="sxs-lookup"><span data-stu-id="8d972-956">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-957">References</span><span class="sxs-lookup"><span data-stu-id="8d972-957">References</span></span>  

-   <span data-ttu-id="8d972-958">调试诊断工具 1.1 版</span><span class="sxs-lookup"><span data-stu-id="8d972-958">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   <span data-ttu-id="8d972-959">在 BizTalk 消息传送的内存增长</span><span class="sxs-lookup"><span data-stu-id="8d972-959">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-virtual-bytes-analysis"></a><span data-ttu-id="8d972-960">BizTalk 虚拟字节分析</span><span class="sxs-lookup"><span data-stu-id="8d972-960">BizTalk Virtual Bytes Analysis</span></span>  
 <span data-ttu-id="8d972-961">这是适用于主机实例的虚拟内存保留的兆字节。</span><span class="sxs-lookup"><span data-stu-id="8d972-961">This is the megabytes reserved for virtual memory for the host instance.</span></span> <span data-ttu-id="8d972-962">此分析确定的任何主机实例是否消耗大量系统的内存，并在主机实例是否在内存使用量随时间增加。</span><span class="sxs-lookup"><span data-stu-id="8d972-962">This analysis determines whether any of the host instances are consuming a large amount of the system's memory and whether the host instance is increasing in memory consumption over time.</span></span> <span data-ttu-id="8d972-963">只要它返回到系统内存，占用大量内存的主机实例是没问题。</span><span class="sxs-lookup"><span data-stu-id="8d972-963">A host instance consuming large portions of memory is fine as long as it returns the memory to the system.</span></span> <span data-ttu-id="8d972-964">查找增加图表中的趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-964">Look for increasing trends in the chart.</span></span> <span data-ttu-id="8d972-965">长的一段时间内为增长趋势可能指示内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-965">An increasing trend over a long period of time could indicate a memory leak.</span></span>  

 <span data-ttu-id="8d972-966">此分析检查以虚拟字节为单位按小时 10 MB 的增长趋势。</span><span class="sxs-lookup"><span data-stu-id="8d972-966">This analysis checks for a 10 MB-per-hour increasing trend in virtual bytes.</span></span> <span data-ttu-id="8d972-967">使用此分析中使用的可用内存分析和内存泄漏分析相关。</span><span class="sxs-lookup"><span data-stu-id="8d972-967">Use this analysis in correlation with the Available Memory analysis and the Memory Leak analysis.</span></span> <span data-ttu-id="8d972-968">此外，请注意，新启动主机实例将最初显示为内存泄漏时只需正常启动行为。</span><span class="sxs-lookup"><span data-stu-id="8d972-968">Also, keep in mind that newly started host instances will initially appear as a memory leak when it is simply normal start up behavior.</span></span> <span data-ttu-id="8d972-969">当一个过程会一直消耗内存和长的一段时间内没有释放内存时，内存泄漏。</span><span class="sxs-lookup"><span data-stu-id="8d972-969">A memory leak is when a process continues to consume memory and not releasing memory over a long period of time.</span></span> <span data-ttu-id="8d972-970">如果您怀疑内存泄漏情况，然后读取以下"内存增长中 BizTalk 消息传送"文章。</span><span class="sxs-lookup"><span data-stu-id="8d972-970">If you suspect a memory leak condition, then read the “Memory Growth in BizTalk Messaging” article below.</span></span> <span data-ttu-id="8d972-971">否则为安装并使用调试诊断工具工具。</span><span class="sxs-lookup"><span data-stu-id="8d972-971">Otherwise, install and use the Debug Diag tool.</span></span> <span data-ttu-id="8d972-972">调试诊断工具的详细信息，请参阅参考部分。</span><span class="sxs-lookup"><span data-stu-id="8d972-972">For more information on the Debug Diag Tool, see the references section.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-973">References</span><span class="sxs-lookup"><span data-stu-id="8d972-973">References</span></span>  

-   <span data-ttu-id="8d972-974">调试诊断工具 1.1 版</span><span class="sxs-lookup"><span data-stu-id="8d972-974">Debug Diagnostic Tool v1.1</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  

-   <span data-ttu-id="8d972-975">在 BizTalk 消息传送的内存增长</span><span class="sxs-lookup"><span data-stu-id="8d972-975">Memory Growth in BizTalk Messaging</span></span>  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  

## <a name="biztalk-message-agent-database-session-throttling-analysis"></a><span data-ttu-id="8d972-976">BizTalk 消息代理的数据库会话限制分析</span><span class="sxs-lookup"><span data-stu-id="8d972-976">BizTalk Message Agent Database Session Throttling Analysis</span></span>  
 <span data-ttu-id="8d972-977">这是与 MessageBox 相比其相应的 BizTalk 阻止设置的开放式数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-977">This is the number of open database connections to the MessageBox compared to its respective BizTalk throttling setting.</span></span> <span data-ttu-id="8d972-978">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-978">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-979">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="8d972-979">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="8d972-980">默认情况下，此选项为禁用状态；通常，只有当数据库服务器成为 BizTalk Server 系统的瓶颈时才应启用此设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-980">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="8d972-981">可以使用 biztalk: Message Agent 性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-981">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-982">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-982">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-983">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-983">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="8d972-984">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-984">The default value is 0.</span></span>  

 <span data-ttu-id="8d972-985">MaxWorkerThreads 注册表项具有可用的 BizTalk 数字的线程的影响，可帮助在 BizTalk 的线程中的大部分忙于处理数据库连接的情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-985">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="8d972-986">此分析检查到 MessageBox 的开放式数据库连接数是否大于 80%的数据库会话限制设置，这表明可能在触发阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-986">This analysis checks whether the number of open database connections to the MessageBox are greater than 80 percent of the Database Session Throttling setting, indicating a throttling condition is likely.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-987">References</span><span class="sxs-lookup"><span data-stu-id="8d972-987">References</span></span>  

-   <span data-ttu-id="8d972-988">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-988">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-989">影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-989">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="8d972-990">线程、 数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-990">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a><span data-ttu-id="8d972-991">BizTalk 消息代理的数据库会话限制阈值分析</span><span class="sxs-lookup"><span data-stu-id="8d972-991">BizTalk Message Agent Database Session Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="8d972-992">这是与 MessageBox 的开放式数据库连接数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-992">This is the current threshold for the number of open database connections to the MessageBox.</span></span> <span data-ttu-id="8d972-993">"数据库连接每个 CPU"是阻止开始之前允许并行数据库会话 （每 CPU) 的最大数目。</span><span class="sxs-lookup"><span data-stu-id="8d972-993">“Database connection per CPU” is the maximum number of concurrent database sessions (per CPU) allowed before throttling begins.</span></span> <span data-ttu-id="8d972-994">此计数不包括通用的每主机会话池中的空闲数据库会话数，并且只对主机实例实际使用的会话数进行此检查。</span><span class="sxs-lookup"><span data-stu-id="8d972-994">The idle database sessions in the common per-host session pool do not add to this count, and this check is made strictly on the number of sessions actually being used by the host instance.</span></span> <span data-ttu-id="8d972-995">默认情况下，此选项为禁用状态；通常，只有当数据库服务器成为 BizTalk Server 系统的瓶颈时才应启用此设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-995">This option is disabled by default; typically this setting should only be enabled if the database server is a bottleneck in the BizTalk Server system.</span></span> <span data-ttu-id="8d972-996">可以使用 biztalk: Message Agent 性能对象类别下的数据库会话性能计数器来监视活动数据库连接数。</span><span class="sxs-lookup"><span data-stu-id="8d972-996">You can monitor the number of active database connections by using the database session performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-997">此参数只影响出站消息阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-997">This parameter only affects outbound message throttling.</span></span> <span data-ttu-id="8d972-998">输入值 0 可以禁用基于数据库会话数的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-998">Enter a value of 0 to disable throttling that is based on the number of database sessions.</span></span> <span data-ttu-id="8d972-999">默认值为 0。</span><span class="sxs-lookup"><span data-stu-id="8d972-999">The default value is 0.</span></span>  

 <span data-ttu-id="8d972-1000">MaxWorkerThreads 注册表项具有可用的 BizTalk 数字的线程的影响，可帮助在 BizTalk 的线程中的大部分忙于处理数据库连接的情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-1000">The MaxWorkerThreads registry key has influence on the number threads available to BizTalk and may help in the case where most of BizTalk’s threads are busy with database connections.</span></span> <span data-ttu-id="8d972-1001">此分析会检查此值以查看是否已被修改从其默认设置。</span><span class="sxs-lookup"><span data-stu-id="8d972-1001">This analysis checks this value to see whether it has been modified from its default setting.</span></span> <span data-ttu-id="8d972-1002">默认情况下，此设置是 0，表示数据库会话限制处于禁用状态。</span><span class="sxs-lookup"><span data-stu-id="8d972-1002">By default, this setting is 0, which means throttling on database sessions is disabled.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-1003">References</span><span class="sxs-lookup"><span data-stu-id="8d972-1003">References</span></span>  

-   <span data-ttu-id="8d972-1004">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-1004">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-1005">影响适配器性能的配置参数 [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span><span class="sxs-lookup"><span data-stu-id="8d972-1005">Configuration Parameters that Affect Adapter Performance at [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)</span></span>  

-   <span data-ttu-id="8d972-1006">线程、 数据库会话和在限制 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span><span class="sxs-lookup"><span data-stu-id="8d972-1006">Threads, DB sessions, and throttling at [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)</span></span>  

## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a><span data-ttu-id="8d972-1007">BizTalk 消息代理进程内消息计数限制分析</span><span class="sxs-lookup"><span data-stu-id="8d972-1007">BizTalk Message Agent In-process Message Count Throttling Analysis</span></span>  
 <span data-ttu-id="8d972-1008">这是服务类别正在处理的并行消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-1008">This is the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="8d972-1009">主机阻止设置中的"进程内消息数 CPU"设置为的最大未处理的消息传送到端点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="8d972-1009">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="8d972-1010">这不包括从数据库中检索，但仍在等待内存中队列中传递的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-1010">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="8d972-1011">可以使用 biztalk: Message Agent 性能对象类别下的 in-process message count 性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-1011">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-1012">此参数提供了阻止机制提示以便您考虑阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-1012">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="8d972-1013">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="8d972-1013">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="8d972-1014">通过监视 In-process message count 性能计数器，可以验证实际的阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1014">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  

 <span data-ttu-id="8d972-1015">对于大消息方案 （其中平均消息大小较大或消息的处理可能需要大量的消息），此参数可以设置为较小的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1015">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="8d972-1016">如果频繁出现基于内存的限制和内存阈值获取自动调整为大体上低的值指示大消息方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-1016">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="8d972-1017">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-1017">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="8d972-1018">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1018">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="8d972-1019">此分析检查高进程内消息计数计数器来确定它大于 80%的同一名称下其限制设置，指示在触发阻止条件是否有可能。</span><span class="sxs-lookup"><span data-stu-id="8d972-1019">This analysis checks the High In-Process Message Count counter to determine whether it is greater than 80 percent of its throttling setting under the same name, which indicates a throttling condition is likely.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-1020">References</span><span class="sxs-lookup"><span data-stu-id="8d972-1020">References</span></span>  

-   <span data-ttu-id="8d972-1021">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-1021">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-1022">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-1022">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a><span data-ttu-id="8d972-1023">Biztalk: Message 代理进程内消息数阻止阈值分析</span><span class="sxs-lookup"><span data-stu-id="8d972-1023">BizTalk:Message Agent In-process Message Count Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="8d972-1024">这是服务类别正在处理的并行消息数的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1024">This is the current threshold for the number of concurrent messages that the service class is processing.</span></span> <span data-ttu-id="8d972-1025">主机阻止设置中的"进程内消息数 CPU"设置为的最大未处理的消息传送到端点管理器 (EPM) 或 XLANG 数。</span><span class="sxs-lookup"><span data-stu-id="8d972-1025">The “In-process messages per CPU” setting in the Host Throttling Settings is the maximum number of messages delivered to the End Point Manager (EPM) or XLANG that have not been processed.</span></span> <span data-ttu-id="8d972-1026">这不包括从数据库中检索，但仍在等待内存中队列中传递的消息。</span><span class="sxs-lookup"><span data-stu-id="8d972-1026">This does not include the messages retrieved from the database but still waiting for delivery in the in-memory queue.</span></span> <span data-ttu-id="8d972-1027">可以使用 biztalk: Message Agent 性能对象类别下的 in-process message count 性能计数器来监视进程内消息数。</span><span class="sxs-lookup"><span data-stu-id="8d972-1027">You can monitor the number of in-process messages by using the In-process message count performance counter under the BizTalk:Message Agent performance object category.</span></span> <span data-ttu-id="8d972-1028">此参数提供了阻止机制提示以便您考虑阻止条件。</span><span class="sxs-lookup"><span data-stu-id="8d972-1028">This parameter provides a hint to the throttling mechanism for consideration of throttling conditions.</span></span> <span data-ttu-id="8d972-1029">实际阈值可能会自我优化。</span><span class="sxs-lookup"><span data-stu-id="8d972-1029">The actual threshold is subject to self-tuning.</span></span> <span data-ttu-id="8d972-1030">通过监视 In-process message count 性能计数器，可以验证实际的阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1030">You can verify the actual threshold by monitoring the In-process message count performance counter.</span></span>  

 <span data-ttu-id="8d972-1031">对于大消息方案 （其中平均消息大小较大或消息的处理可能需要大量的消息），此参数可以设置为较小的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1031">For large message scenarios (where either the average message size is high, or the processing of messages may require a large amount of messages), this parameter can be set to a smaller value.</span></span> <span data-ttu-id="8d972-1032">如果频繁出现基于内存的限制和内存阈值获取自动调整为大体上低的值指示大消息方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-1032">A large message scenario is indicated if memory-based throttling occurs too often and if the memory threshold gets auto-adjusted to a substantially low value.</span></span> <span data-ttu-id="8d972-1033">这样将指示出站传输应降低同时处理的消息数以避免占用过高内存。</span><span class="sxs-lookup"><span data-stu-id="8d972-1033">Such behavior would indicate that the outbound transport should process fewer messages concurrently to avoid excessive memory usage.</span></span> <span data-ttu-id="8d972-1034">此外，如果适配器一次处理多个消息（例如在向限制并行连接数的服务器发送消息时）可获得更高效率，则可以将此参数优化为低于默认值的值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1034">Also, for scenarios where the adapter is more efficient when processing a few messages at a time (for example, when sending to a server that limits concurrent connections), this parameter may be tuned to a lower value than the default.</span></span> <span data-ttu-id="8d972-1035">此分析检查高进程内消息计数限制阈值为非默认值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1035">This analysis checks the High In-Process Message Count throttling threshold for a non-default value.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-1036">References</span><span class="sxs-lookup"><span data-stu-id="8d972-1036">References</span></span>  

-   <span data-ttu-id="8d972-1037">主机阻止性能计数器 [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span><span class="sxs-lookup"><span data-stu-id="8d972-1037">Host Throttling Performance Counters at [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)</span></span>  

-   <span data-ttu-id="8d972-1038">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-1038">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a><span data-ttu-id="8d972-1039">BizTalk 消息代理进程内存使用率 (MB) 限制分析</span><span class="sxs-lookup"><span data-stu-id="8d972-1039">BizTalk Message Agent Process Memory Usage (MB) Throttling Analysis</span></span>  
 <span data-ttu-id="8d972-1040">这是当前进程 (MB) 的内存使用情况。</span><span class="sxs-lookup"><span data-stu-id="8d972-1040">This is the memory usage of current process (MB).</span></span> <span data-ttu-id="8d972-1041">如果要发布的批处理具有很高的内存要求，或者过多的线程所处理的消息，则会出现 BizTalk 进程内存的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-1041">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span>  <span data-ttu-id="8d972-1042">如果系统表现为过度阻止，请考虑增大与主机进程内存使用情况阈值的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-1042">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="8d972-1043">如果通过增加进程内存使用阈值引发"内存不足"错误，请考虑减小内部消息队列大小的值，并且进程内消息数每 CPU 阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1043">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="8d972-1044">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-1044">This strategy is particularly relevant in large message processing scenarios.</span></span>  

 <span data-ttu-id="8d972-1045">如果您的 BizTalk server 定期运行虚拟内存不足，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="8d972-1045">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="8d972-1046">在 64 位服务器上的每个进程可以解决最多 4 TB 的虚拟内存中的 2 GB 的 32 位的。</span><span class="sxs-lookup"><span data-stu-id="8d972-1046">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="8d972-1047">一般情况下，强烈建议 64 位 BizTalk 和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="8d972-1047">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="8d972-1048">请参阅"BizTalk Server 64 位支持"参考的详细信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-1048">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="8d972-1049">此分析会检查是否进程内存使用率大于 80%的相同的名称及其相应限制阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1049">This analysis checks whether the process memory usage is greater than 80 percent of its respective throttling threshold of the same name.</span></span> <span data-ttu-id="8d972-1050">默认情况下，BizTalk 进程内存使用情况限制设置为可用于进程的虚拟内存的 25%。</span><span class="sxs-lookup"><span data-stu-id="8d972-1050">By default, the BizTalk Process Memory Usage throttling setting is 25 percent of the virtual memory available to the process.</span></span> <span data-ttu-id="8d972-1051">/3GB 开关对此设置无效。</span><span class="sxs-lookup"><span data-stu-id="8d972-1051">The /3GB switch has no effect on this setting.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-1052">References</span><span class="sxs-lookup"><span data-stu-id="8d972-1052">References</span></span>  

-   <span data-ttu-id="8d972-1053">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-1053">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="8d972-1054">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-1054">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-1055">如何捕获泄漏内存的进程的内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="8d972-1055">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="8d972-1056">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="8d972-1056">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>  

## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a><span data-ttu-id="8d972-1057">Biztalk： 消息代理进程内存使用率 (MB) 限制阈值分析</span><span class="sxs-lookup"><span data-stu-id="8d972-1057">BizTalk:Message Agent Process Memory Usage (MB) Throttling Threshold Analysis</span></span>  
 <span data-ttu-id="8d972-1058">这是当前进程 (MB) 的内存使用量的当前阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1058">This is the current threshold for the memory usage of current process (MB).</span></span> <span data-ttu-id="8d972-1059">可能会动态调整阈值，具体取决于实际的于此进程及其内存占用模式可用内存量。</span><span class="sxs-lookup"><span data-stu-id="8d972-1059">The threshold may be dynamically adjusted depending on the actual amount of memory available to this process and its memory consumption pattern.</span></span> <span data-ttu-id="8d972-1060">如果要发布的批处理具有很高的内存要求，或者过多的线程所处理的消息，则会出现 BizTalk 进程内存的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-1060">BizTalk process memory throttling can occur if the batch to be published has steep memory requirements, or if too many threads are processing messages.</span></span> <span data-ttu-id="8d972-1061">如果系统表现为过度阻止，请考虑增大与主机进程内存使用情况阈值的值，并验证主机实例不会生成"内存不足"错误。</span><span class="sxs-lookup"><span data-stu-id="8d972-1061">If the system appears to be over-throttling, consider increasing the value associated with the process memory usage threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="8d972-1062">如果通过增加进程内存使用阈值引发"内存不足"错误，请考虑减小内部消息队列大小的值，并且进程内消息数每 CPU 阈值。</span><span class="sxs-lookup"><span data-stu-id="8d972-1062">If an "out of memory" error is raised by increasing the process memory usage threshold, then consider reducing the values for the internal message queue size and in-process messages per CPU thresholds.</span></span> <span data-ttu-id="8d972-1063">此策略特别适用于大型消息处理方案。</span><span class="sxs-lookup"><span data-stu-id="8d972-1063">This strategy is particularly relevant in large message processing scenarios.</span></span>  

 <span data-ttu-id="8d972-1064">如果您的 BizTalk server 定期运行虚拟内存不足，请考虑 BizTalk Server 64 位。</span><span class="sxs-lookup"><span data-stu-id="8d972-1064">If your BizTalk server regularly runs out of virtual memory, then consider BizTalk Server 64-bit.</span></span> <span data-ttu-id="8d972-1065">在 64 位服务器上的每个进程可以解决最多 4 TB 的虚拟内存中的 2 GB 的 32 位的。</span><span class="sxs-lookup"><span data-stu-id="8d972-1065">Each Process on 64-bit servers can address up to 4 TB’s of virtual memory versus the 2 GB’s in 32-bit.</span></span> <span data-ttu-id="8d972-1066">一般情况下，强烈建议 64 位 BizTalk 和 64 位 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="8d972-1066">In general, 64-bit BizTalk and 64-bit SQL Server is highly recommended.</span></span> <span data-ttu-id="8d972-1067">请参阅"BizTalk Server 64 位支持"参考的详细信息。</span><span class="sxs-lookup"><span data-stu-id="8d972-1067">See the “BizTalk Server 64-bit Support” reference for more information.</span></span> <span data-ttu-id="8d972-1068">此分析会检查是否为非默认值设置进程内存的阻止功能。</span><span class="sxs-lookup"><span data-stu-id="8d972-1068">This analysis checks whether the Process memory throttling is set to a non-default value.</span></span>  

### <a name="references"></a><span data-ttu-id="8d972-1069">References</span><span class="sxs-lookup"><span data-stu-id="8d972-1069">References</span></span>  

-   <span data-ttu-id="8d972-1070">BizTalk Server 如何实现主机阻止在 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span><span class="sxs-lookup"><span data-stu-id="8d972-1070">How BizTalk Server Implements Host Throttling at [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)</span></span>  

-   <span data-ttu-id="8d972-1071">如何修改默认主机阻止设置 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span><span class="sxs-lookup"><span data-stu-id="8d972-1071">How to Modify the Default Host Throttling Settings at [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)</span></span>  

-   <span data-ttu-id="8d972-1072">如何捕获泄漏内存的进程的内存转储 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span><span class="sxs-lookup"><span data-stu-id="8d972-1072">How to Capture a Memory Dump of a Process that is Leaking Memory at [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)</span></span>  

-   <span data-ttu-id="8d972-1073">在 BizTalk Server 64 位支持 [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span><span class="sxs-lookup"><span data-stu-id="8d972-1073">BizTalk Server 64-bit Support at [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)</span></span>