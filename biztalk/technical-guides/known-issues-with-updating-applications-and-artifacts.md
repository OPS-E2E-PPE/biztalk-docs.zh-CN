---
title: "带有更新应用程序和项目的已知问题 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 220ea03c-d453-40cc-8ddb-18a96f8ddfe5
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 01e445ef19a1d65cc97a3603492a1ad9ba0442e9
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
---
# <a name="known-issues-with-updating-applications-and-artifacts"></a><span data-ttu-id="8b53c-102">更新应用程序和项目的已知的问题</span><span class="sxs-lookup"><span data-stu-id="8b53c-102">Known Issues with Updating Applications and Artifacts</span></span>
## <a name="updating-an-application"></a><span data-ttu-id="8b53c-103">更新应用程序</span><span class="sxs-lookup"><span data-stu-id="8b53c-103">Updating an Application</span></span>  
 <span data-ttu-id="8b53c-104">**删除或删除项目不会删除它从所有位置**</span><span class="sxs-lookup"><span data-stu-id="8b53c-104">**Removing or deleting an artifact does not remove it from all locations**</span></span>  
  
 <span data-ttu-id="8b53c-105">从 BizTalk Server 数据库移除或删除项目，使之不再显示在管理控制台中或由 BTSTask ListApp 命令生成的应用程序的项目列表中。</span><span class="sxs-lookup"><span data-stu-id="8b53c-105">Removing or deleting an artifact deletes it from the BizTalk Server databases, so that it no longer appears in the administration console or in the list of artifacts for an application generated by the BTSTask ListApp command.</span></span> <span data-ttu-id="8b53c-106">它不会如果它存在于其中任何位置的从 Windows 注册表、 全局程序集缓存 (GAC)、 虚拟目录或文件系统中，删除项目。</span><span class="sxs-lookup"><span data-stu-id="8b53c-106">It does not remove the artifact from the Windows registry, the global assembly cache (GAC), a virtual directory, or the file system, if it exists in any of these locations.</span></span> <span data-ttu-id="8b53c-107">如果是只存在于 BizTalk 管理数据库中的发送端口、发送端口组、接收端口和接收位置，此操作将完全删除项目。</span><span class="sxs-lookup"><span data-stu-id="8b53c-107">In the case of send ports, send port groups, receive ports, and receive locations, which exist only in the BizTalk Management database, this operation deletes the artifact entirely.</span></span>  
  
## <a name="updating-an-artifact"></a><span data-ttu-id="8b53c-108">更新某个项目</span><span class="sxs-lookup"><span data-stu-id="8b53c-108">Updating an Artifact</span></span>  
 <span data-ttu-id="8b53c-109">**删除或更改项目的状态可能会导致应用程序无法正常工作**</span><span class="sxs-lookup"><span data-stu-id="8b53c-109">**Removing or changing the state of an artifact can cause an application not to work**</span></span>  
  
 <span data-ttu-id="8b53c-110">如果您从到另一个应用程序中添加的引用，并对在其另一个应用程序依赖，或删除项目的项目的状态进行任何更改，应用程序具有依赖关系将无法正常运行。</span><span class="sxs-lookup"><span data-stu-id="8b53c-110">When you add a reference from one application to another and make any changes to the state of an artifact on which another application depends, or you remove the artifact, the application that has the dependency will not function correctly.</span></span> <span data-ttu-id="8b53c-111">有关更改项目的状态的详细信息，请参阅部分中相应项目[管理项目](http://go.microsoft.com/fwlink/?LinkID=154725)(http://go.microsoft.com/fwlink/?LinkID=154725)。</span><span class="sxs-lookup"><span data-stu-id="8b53c-111">For more information about changing the state of an artifact, see the section on the appropriate artifact in [Managing Artifacts](http://go.microsoft.com/fwlink/?LinkID=154725) (http://go.microsoft.com/fwlink/?LinkID=154725).</span></span>  
  
 <span data-ttu-id="8b53c-112">**不支持.NET 策略文件**</span><span class="sxs-lookup"><span data-stu-id="8b53c-112">**.NET policy files are not supported**</span></span>  
  
 <span data-ttu-id="8b53c-113">BizTalk Server 中不支持的.NET 策略文件使用。</span><span class="sxs-lookup"><span data-stu-id="8b53c-113">The use of .NET policy files is not supported in BizTalk Server.</span></span> <span data-ttu-id="8b53c-114">原因在于策略文件可能不会以预期方式工作。</span><span class="sxs-lookup"><span data-stu-id="8b53c-114">This is because a policy file may not work as expected.</span></span> <span data-ttu-id="8b53c-115">策略文件将.NET 重定向到指定的程序集版本在 GAC 中，但[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通常从缓存或 BizTalk 管理数据库中访问程序集和项目数据。</span><span class="sxs-lookup"><span data-stu-id="8b53c-115">Policy files redirect .NET to a specified assembly version in the GAC, but [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] often accesses assemblies and artifact data from a cache or the BizTalk Management database.</span></span> <span data-ttu-id="8b53c-116">策略文件可能不会执行预期操作，具体情况视项目类型、缓存情况和主机实例是否重新启动而定。</span><span class="sxs-lookup"><span data-stu-id="8b53c-116">Depending on the artifact type, caching situation, and whether host instances are restarted, the policy file may not do what is desired.</span></span>  
  
## <a name="updating-an-assembly"></a><span data-ttu-id="8b53c-117">更新程序集</span><span class="sxs-lookup"><span data-stu-id="8b53c-117">Updating an Assembly</span></span>  
 <span data-ttu-id="8b53c-118">**程序集的更改可能会生效，如果主机未停止**</span><span class="sxs-lookup"><span data-stu-id="8b53c-118">**Changes to an assembly may not take effect if the host is not stopped**</span></span>  
  
 <span data-ttu-id="8b53c-119">BizTalk 程序集必须遵循.NET 版本控制规则。</span><span class="sxs-lookup"><span data-stu-id="8b53c-119">BizTalk assemblies must follow .NET versioning rules.</span></span> <span data-ttu-id="8b53c-120">其主要含义是：根据特定版本的其他 .NET 项目或程序集（包括 BizTalk 项目）生成 BizTalk 项目后，该 BizTalk 项目将继续使用该版本，直到根据更高的版本重新生成该 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="8b53c-120">The main implication of this is that a BizTalk project, once built against a particular version of another .NET project or assembly (including BizTalk projects), continues to use that version until it has been rebuilt against a newer version.</span></span>  
  
 <span data-ttu-id="8b53c-121">如果在没有停止和启动加载类型的 BizTalk 主机实例的情况下，没有更改 BizTalk 项目上的版本号而重新部署了程序集，则在进行与 .NET 版本控制有关的开发过程中会出现一个常见问题。</span><span class="sxs-lookup"><span data-stu-id="8b53c-121">A common problem occurs during development related to .NET versioning when the version numbers on a BizTalk project are not changed and the assembly is redeployed without stopping and starting the BizTalk host instance that the types are loaded into.</span></span>  
  
 <span data-ttu-id="8b53c-122">再次运行该进程时，更改不会生效。</span><span class="sxs-lookup"><span data-stu-id="8b53c-122">When the process is run again, the changes do not take effect.</span></span> <span data-ttu-id="8b53c-123">这是由 .NET 程序集加载到内存中的方式造成的。</span><span class="sxs-lookup"><span data-stu-id="8b53c-123">This is due to the way in which .NET assemblies are loaded into memory.</span></span> <span data-ttu-id="8b53c-124">主机已有的程序集的内存中副本，因为它不会不时重新加载程序集的新副本将放入全局程序集缓存 (GAC)。</span><span class="sxs-lookup"><span data-stu-id="8b53c-124">Because the host already has an in-memory copy of the assembly, it does not reload the assembly when a new copy is put into the global assembly cache (GAC).</span></span> <span data-ttu-id="8b53c-125">例如，部署并运行带有业务流程的版本 1.0.0.0 的程序集，如果对业务流程进行了更改而未更改版本号，则这些更改不会生效。</span><span class="sxs-lookup"><span data-stu-id="8b53c-125">For example, if version 1.0.0.0 of an assembly with an orchestration is deployed and running, and changes are made to the orchestration but the version number is not changed, then the changes do not take effect.</span></span> <span data-ttu-id="8b53c-126">停止主机实例后将释放该程序集的内存中副本，重新启动该主机实例时，将重新加载该程序集的新副本并获取更改。</span><span class="sxs-lookup"><span data-stu-id="8b53c-126">After the host instance is stopped, the in-memory copy of the assembly is released and when the host instance starts again it reloads the new copy of the assembly and gets the changes.</span></span> <span data-ttu-id="8b53c-127">如果已部署的新版本，例如版本 2.0.0.0，和它加载时，则所做的更改将生效。</span><span class="sxs-lookup"><span data-stu-id="8b53c-127">If a new version was deployed, for example version 2.0.0.0, and it was loaded, then the changes would take effect.</span></span>  
  
 <span data-ttu-id="8b53c-128">**更改程序集版本可能会破坏程序集和引用该版本的项之间的关系**</span><span class="sxs-lookup"><span data-stu-id="8b53c-128">**Changing the assembly version may break the relationship between an assembly and items that reference it by version**</span></span>  
  
 <span data-ttu-id="8b53c-129">在.NET Framework 开发很常见的做法进行生成时，更新的程序集版本号为当前的生成号。</span><span class="sxs-lookup"><span data-stu-id="8b53c-129">In .NET Framework development it is typical to update the assembly version number to the current build number when a build takes place.</span></span> <span data-ttu-id="8b53c-130">但在开发 BizTalk 解决方案时，更改程序集版本号会中断程序集与通过其程序集版本号引用 DLL 的依赖项之间的关系。</span><span class="sxs-lookup"><span data-stu-id="8b53c-130">However, when developing a BizTalk solution, changing the assembly version number can break the relationship between an assembly and the dependent items that reference the DLL by its assembly version number.</span></span> <span data-ttu-id="8b53c-131">下表列出了通过使用其版本号和更改程序集版本号的效果引用的 BizTalk Server 程序集的项。</span><span class="sxs-lookup"><span data-stu-id="8b53c-131">The following table lists items that refer to a BizTalk Server assembly by using its version number and the effect of changing an assembly version number.</span></span>  
  
|<span data-ttu-id="8b53c-132">实体</span><span class="sxs-lookup"><span data-stu-id="8b53c-132">Entity</span></span>|<span data-ttu-id="8b53c-133">更改程序集版本号的影响</span><span class="sxs-lookup"><span data-stu-id="8b53c-133">Effect of changing assembly version number</span></span>|  
|------------|------------------------------------------------|  
|<span data-ttu-id="8b53c-134">绑定文件</span><span class="sxs-lookup"><span data-stu-id="8b53c-134">Binding files</span></span>|<span data-ttu-id="8b53c-135">更改程序集版本号会导致引用该程序集的所有现有绑定文件失败。</span><span class="sxs-lookup"><span data-stu-id="8b53c-135">Changing the assembly version number causes any existing binding files that reference the assembly to fail.</span></span> <span data-ttu-id="8b53c-136">这是因为绑定文件通过包括版本号在内的属性来引用程序集。</span><span class="sxs-lookup"><span data-stu-id="8b53c-136">This is because the binding file references the assembly by attributes including its version number.</span></span><br /><br /> <span data-ttu-id="8b53c-137">可以使用记事本或其他编辑器更新绑定文件中的版本信息。</span><span class="sxs-lookup"><span data-stu-id="8b53c-137">You can update the version information in the binding file by using Notepad or another editor.</span></span> <span data-ttu-id="8b53c-138">你可以还重新部署解决方案，并使用 BizTalk Server 管理控制台，然后重新生成绑定文件。</span><span class="sxs-lookup"><span data-stu-id="8b53c-138">You can also redeploy the solution and then regenerate the binding file by using the BizTalk Server Administration console.</span></span> <span data-ttu-id="8b53c-139">最后，可以使用脚本来进行自动化部署和版本控制。</span><span class="sxs-lookup"><span data-stu-id="8b53c-139">Finally, you can use scripts to automate deployment and versioning.</span></span> <span data-ttu-id="8b53c-140">有关部署的详细信息，请参阅[部署和管理 BizTalk 应用程序](http://go.microsoft.com/fwlink/?LinkID=154210)(http://go.microsoft.com/fwlink/?LinkID=154210)。</span><span class="sxs-lookup"><span data-stu-id="8b53c-140">For more information about deployment, see [Deploying and Managing BizTalk Applications](http://go.microsoft.com/fwlink/?LinkID=154210) (http://go.microsoft.com/fwlink/?LinkID=154210).</span></span>|  
|<span data-ttu-id="8b53c-141">BAM 跟踪配置文件定义 (.btt) 文件</span><span class="sxs-lookup"><span data-stu-id="8b53c-141">BAM tracking profile definition (.btt) files</span></span>|<span data-ttu-id="8b53c-142">更改程序集版本号会导致所有现有 BAM 跟踪配置文件定义文件失败。</span><span class="sxs-lookup"><span data-stu-id="8b53c-142">Changing the assembly version number causes any existing BAM tracking profile definition files to fail.</span></span> <span data-ttu-id="8b53c-143">BAM 跟踪文件采用二进制文件格式，因此不能进行编辑，而只能重新生成。</span><span class="sxs-lookup"><span data-stu-id="8b53c-143">The BAM tracking files are in a binary file format so they cannot be edited and instead must be regenerated.</span></span> <span data-ttu-id="8b53c-144">如果需要 BAM 跟踪文件，则可能需要执行以下任一操作：</span><span class="sxs-lookup"><span data-stu-id="8b53c-144">If BAM tracking profiles are required it may be necessary to do either of the following:</span></span><br /><br /> <span data-ttu-id="8b53c-145">-避免经常在生成过程中更新版本号</span><span class="sxs-lookup"><span data-stu-id="8b53c-145">-   Avoid frequently updating version numbers during the build process</span></span><br /><span data-ttu-id="8b53c-146">-延迟生成跟踪配置文件，直到版本号是稳定的 BAM</span><span class="sxs-lookup"><span data-stu-id="8b53c-146">-   Delay building BAM tracking profiles until version numbers are stable</span></span>|  
|<span data-ttu-id="8b53c-147">通过使用 Web Services 发布向导发布的 Web Services</span><span class="sxs-lookup"><span data-stu-id="8b53c-147">Web services published by using the Web Services Publishing Wizard</span></span>|<span data-ttu-id="8b53c-148">当使用 Web 服务发布向导时生成 ASP.NET Web 接口时，BizTalk Server 程序集的程序集版本包含在 ASP.NET 的源代码。</span><span class="sxs-lookup"><span data-stu-id="8b53c-148">When the Web Services Publishing Wizard is used to produce an ASP.NET Web interface, the assembly version of the BizTalk Server assembly is included in the ASP.NET source code.</span></span> <span data-ttu-id="8b53c-149">程序集版本号在由 ASP.NET 接口的运行时使用的 Web 服务操作的 bodyTypeAssemblyQualifiedName 属性的一部分。</span><span class="sxs-lookup"><span data-stu-id="8b53c-149">The assembly version number is used at runtime by the ASP.NET interface as part of the bodyTypeAssemblyQualifiedName property of the Web service operation.</span></span> <span data-ttu-id="8b53c-150">如果 BizTalk Server 程序集的版本号而无需更新 bodyTypeAssemblyQualifiedName 属性发生更改，然后将 BizTalk server 拒绝后续的 Web 服务操作。</span><span class="sxs-lookup"><span data-stu-id="8b53c-150">If the version number of the BizTalk Server assembly changes without updating the bodyTypeAssemblyQualifiedName property, then subsequent Web service operations will be rejected by BizTalk Server.</span></span><br /><br /> <span data-ttu-id="8b53c-151">如果接收位置使用 XmlDefaultPipeline，则订阅依赖于文档类型。</span><span class="sxs-lookup"><span data-stu-id="8b53c-151">If the receive location uses the XmlDefaultPipeline, the subscription relies on the document type.</span></span> <span data-ttu-id="8b53c-152">订阅使用嵌入的程序集信息，并会在程序集不存在时失败。</span><span class="sxs-lookup"><span data-stu-id="8b53c-152">It uses the embedded assembly information and will fail if the assembly does not exist.</span></span> <span data-ttu-id="8b53c-153">如果使用 PassThruPipeline（公开某一端口并让向导创建接收位置时的默认值），则订阅会忽略此嵌入的程序集信息。</span><span class="sxs-lookup"><span data-stu-id="8b53c-153">If you use the PassThruPipeline (which is the default if you expose a port and let the wizard create the receive location), the subscription ignores this embedded assembly information.</span></span>|