---
title: 优化 BizTalk Server WCF 适配器性能 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2900c845-15be-4466-8fa0-b51b2486842f
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5d5ce620e7d9da984081b0f0874985bfe762eeae
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22299669"
---
# <a name="optimizing-biztalk-server-wcf-adapter-performance"></a><span data-ttu-id="51c30-102">优化 BizTalk Server WCF 适配器性能</span><span class="sxs-lookup"><span data-stu-id="51c30-102">Optimizing BizTalk Server WCF Adapter Performance</span></span>
<span data-ttu-id="51c30-103">本主题提供用于选择相应的 WCF 适配器或绑定类型和应用各种 WCF 适配器配置选项的指南的建议。</span><span class="sxs-lookup"><span data-stu-id="51c30-103">This topic provides recommendations for selecting the appropriate WCF adapter or binding type and guidance for applying various WCF adapter configuration options.</span></span>  
  
## <a name="considerations-when-choosing-which-wcf-adapter-to-use-or-which-wcf-customwcf-customisolated-binding-type-to-use"></a><span data-ttu-id="51c30-104">选择要使用哪个 WCF 适配器或要使用的 WCF 自定义 WCF CustomIsolated 绑定类型时的注意事项</span><span class="sxs-lookup"><span data-stu-id="51c30-104">Considerations when choosing which WCF adapter to use or which WCF-Custom/WCF-CustomIsolated binding type to use</span></span>  
  
-   <span data-ttu-id="51c30-105">如果不是严格需要，因为它会增加消息的大小，则不使用消息级安全性。</span><span class="sxs-lookup"><span data-stu-id="51c30-105">Do not use message-level security if not strictly required because it increases the size of messages.</span></span> <span data-ttu-id="51c30-106">这反过来可以尽量减少解决方案的总体吞吐量。</span><span class="sxs-lookup"><span data-stu-id="51c30-106">This in turn can minimize the overall throughput of the solution.</span></span>  
  
-   <span data-ttu-id="51c30-107">选择要使用哪个 WCF 适配器或哪些 WCF 的自定义/WCF-CustomIsolated 时**绑定类型**若要使用，仔细考虑任何应用程序要求，如兼容性、 性能、 托管平台、 安全性和支持传输。</span><span class="sxs-lookup"><span data-stu-id="51c30-107">When choosing which WCF adapter to use or which WCF-Custom/WCF-CustomIsolated **binding type** to use, carefully consider any application requirements such as compatibility, performance, hosting platform, security, and supported transports.</span></span> <span data-ttu-id="51c30-108">下面列出的准则适用于 WCF 一般情况下，而且不特定于 BizTalk Server:</span><span class="sxs-lookup"><span data-stu-id="51c30-108">The guidelines listed below are applicable to WCF in general, and are not specific to BizTalk Server:</span></span>  
  
    -   <span data-ttu-id="51c30-109">**BasicHttpBinding**如果 WCF 服务需要支持如 WebSphere Web 服务或预期的 ASMX Web 服务的.NET 1.1 应用程序的旧客户端应使用。</span><span class="sxs-lookup"><span data-stu-id="51c30-109">**BasicHttpBinding** should be used if the WCF service needs to support legacy clients such as WebSphere Web services or .NET 1.1 applications that expect an ASMX Web service.</span></span> <span data-ttu-id="51c30-110">由于 BasicHttpBinding 不实施任何安全，默认情况下，如果需要消息或传输的安全性，应在此绑定上显式配置。</span><span class="sxs-lookup"><span data-stu-id="51c30-110">Because BasicHttpBinding does not implement any security by default, if you require message or transport security, you should configure it explicitly on this binding.</span></span> <span data-ttu-id="51c30-111">使用 BasicHttpBinding 来公开能够与基于 ASMX 的 Web 服务和客户端以及符合 WS 其他服务进行通信的终结点的基本配置文件 1.1。</span><span class="sxs-lookup"><span data-stu-id="51c30-111">Use BasicHttpBinding to expose endpoints that are able to communicate with ASMX-based Web services and clients and other services that conform to the WS-I Basic Profile 1.1.</span></span> <span data-ttu-id="51c30-112">当配置传输安全性，BasicHttpBinding 默认设置，以便只需使用任何凭据如经典的 ASMX Web 服务。</span><span class="sxs-lookup"><span data-stu-id="51c30-112">When configuring transport security, BasicHttpBinding defaults to use no credentials just like a classic ASMX Web service.</span></span> <span data-ttu-id="51c30-113">BasicHttpBinding 可用于承载 IIS 7.5 或 IIS 7.0 中的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="51c30-113">BasicHttpBinding allows you to host the WCF service in IIS 7.5 or IIS 7.0.</span></span>  
  
    -   <span data-ttu-id="51c30-114">**WsHttpBinding**如果通过 Internet WCF 客户端将调用 WCF 服务应使用。</span><span class="sxs-lookup"><span data-stu-id="51c30-114">**WsHttpBinding** should be used if the WCF service will be called by WCF clients over the Internet.</span></span> <span data-ttu-id="51c30-115">WsHttpBinding 是一个不错的选择在其中你无需支持预期的 ASMX Web 服务的旧客户端，并且 WsHttpBinding 可用于承载 IIS 7.5 或 IIS 7.0 中的 WCF 服务的 Internet 方案。</span><span class="sxs-lookup"><span data-stu-id="51c30-115">WsHttpBinding is a good choice for Internet scenarios in which you do not have to support legacy clients that expect an ASMX Web service and WsHttpBinding allows you to host the WCF service in IIS 7.5 or IIS 7.0.</span></span> <span data-ttu-id="51c30-116">如果你确实需要支持旧客户端，请考虑改为使用 BasicHttpBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-116">If you do need to support legacy clients, consider using BasicHttpBinding instead.</span></span>   
        <span data-ttu-id="51c30-117">应使用 WsHttpBinding，当你需要公开 WCF 接收位置或采用发送端口支持 WS-\* 协议，例如 Ws-security 或 WS AtomicTransactions。</span><span class="sxs-lookup"><span data-stu-id="51c30-117">WsHttpBinding should be used when you need to expose WCF Receive Locations or adopt Send Ports which support WS-\* Protocols like WS-Security or WS-AtomicTransactions.</span></span>  
  
    -   <span data-ttu-id="51c30-118">**NetTcpBinding**是一个理想的选择，如果你需要支持在 intranet 中的客户端。</span><span class="sxs-lookup"><span data-stu-id="51c30-118">**NetTcpBinding** is an excellent choice if you need to support clients within your intranet.</span></span> <span data-ttu-id="51c30-119">NetTcpBinding 是一个不错的选择对 intranet 方案，如果传输性能对你很重要，并且它是可接受的 Windows 服务而不是 IIS 中承载服务。</span><span class="sxs-lookup"><span data-stu-id="51c30-119">NetTcpBinding is a good choice for intranet scenarios if transport performance is important to you, and if it is acceptable to host the service in a Windows service instead of in IIS.</span></span> <span data-ttu-id="51c30-120">当你想要提供一个安全且可靠的绑定的环境时，请使用此绑定。NET.NET 跨计算机通信。</span><span class="sxs-lookup"><span data-stu-id="51c30-120">Use this binding when you want to provide a secure and reliable binding environment for .NET-to-.NET cross-machine communication.</span></span> <span data-ttu-id="51c30-121">请注意在 Windows 服务或在 IIS 7.5/7.0 中，必须承载 NetTcpBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-121">Note that the NetTcpBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="51c30-122">**NetNamedPipeBinding**如果你需要在你的服务所在的计算机上支持 WCF 客户端应使用。</span><span class="sxs-lookup"><span data-stu-id="51c30-122">**NetNamedPipeBinding** should be used if you need to support WCF clients on the same computer as your service.</span></span> <span data-ttu-id="51c30-123">此绑定提供用于跨进程，同一台计算机的通信的安全且可靠的绑定环境。</span><span class="sxs-lookup"><span data-stu-id="51c30-123">This binding provides a secure and reliable binding environment for cross-process, same-computer communication.</span></span> <span data-ttu-id="51c30-124">使用此绑定，如果你想要利用 NamedPipe 协议。</span><span class="sxs-lookup"><span data-stu-id="51c30-124">Use this binding when you want to make use of the NamedPipe protocol.</span></span> <span data-ttu-id="51c30-125">请注意在 Windows 服务或在 IIS 7.5/7.0 中，必须承载 NetNamedPipeBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-125">Note that the NetNamedPipeBinding must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="51c30-126">**NetMsmqBinding**如果你需要支持断开连接队列应使用。</span><span class="sxs-lookup"><span data-stu-id="51c30-126">**NetMsmqBinding** should be used if you need to support disconnected queuing.</span></span> <span data-ttu-id="51c30-127">队列提供通过使用消息队列 (也称为 MSMQ) 作为传输协议，支持的断开连接的操作、 故障隔离、 和负荷量。</span><span class="sxs-lookup"><span data-stu-id="51c30-127">Queuing is provided by using Message Queuing (also known as MSMQ) as a transport, which enables support for disconnected operations, failure isolation, and load leveling.</span></span> <span data-ttu-id="51c30-128">当客户端和服务不需要在同一时间处于联机状态时，你可以使用 NetMsmqBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-128">You can use NetMsmqBinding when the client and the service do not have to be online at the same time.</span></span> <span data-ttu-id="51c30-129">你还可以通过使用负载分级管理任意数量的传入消息。</span><span class="sxs-lookup"><span data-stu-id="51c30-129">You can also manage any number of incoming messages by using load leveling.</span></span> <span data-ttu-id="51c30-130">消息队列支持故障隔离、 其中的消息可能会失败而不会影响其他消息的处理。</span><span class="sxs-lookup"><span data-stu-id="51c30-130">Message Queuing supports failure isolation, where messages can fail without affecting the processing of other messages.</span></span> <span data-ttu-id="51c30-131">请注意在 Windows 服务或在 IIS 7.5/7.0 中，必须承载 NetMsmqBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-131">Note that the NetMsmqBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="51c30-132">**WsDualHttpBinding**如果你需要以支持双工服务应使用。</span><span class="sxs-lookup"><span data-stu-id="51c30-132">**WsDualHttpBinding** should be used if you need to support a duplex service.</span></span> <span data-ttu-id="51c30-133">双工服务是使用双工消息模式，从而使通过回调与客户端的服务进行通信的功能的服务。</span><span class="sxs-lookup"><span data-stu-id="51c30-133">A duplex service is a service that uses duplex message patterns, thus providing the ability for a service to communicate back to the client via a callback.</span></span> <span data-ttu-id="51c30-134">请注意在 Windows 服务或在 IIS 7.5/7.0 中，必须承载 WsDualHttpBinding。</span><span class="sxs-lookup"><span data-stu-id="51c30-134">Note that the WsDualHttpBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
## <a name="wcf-binding-comparison"></a><span data-ttu-id="51c30-135">WCF 绑定比较</span><span class="sxs-lookup"><span data-stu-id="51c30-135">WCF Binding Comparison</span></span>  
 <span data-ttu-id="51c30-136">绑定提供了用于配置通道堆栈的机制。</span><span class="sxs-lookup"><span data-stu-id="51c30-136">Bindings provide a mechanism for configuring channel stacks.</span></span> <span data-ttu-id="51c30-137">绑定创建一个过程来生成通道堆栈使用传输通道、 消息编码器选项和协议通道的一组。</span><span class="sxs-lookup"><span data-stu-id="51c30-137">A binding creates a process to build a channel stack using a transport channel, a message encoder, and a set of protocol channels.</span></span> <span data-ttu-id="51c30-138">Windows Communication Foundation 附带有许多都被预配置为满足最常见通信方案的内置绑定。</span><span class="sxs-lookup"><span data-stu-id="51c30-138">Windows Communication Foundation ships with numerous built-in bindings that come preconfigured to address most common communication scenarios.</span></span>  
  
|<span data-ttu-id="51c30-139">绑定类名称</span><span class="sxs-lookup"><span data-stu-id="51c30-139">Binding Class Name</span></span>|<span data-ttu-id="51c30-140">Transport</span><span class="sxs-lookup"><span data-stu-id="51c30-140">Transport</span></span>|<span data-ttu-id="51c30-141">消息编码</span><span class="sxs-lookup"><span data-stu-id="51c30-141">Message Encoding</span></span>|<span data-ttu-id="51c30-142">安全模式</span><span class="sxs-lookup"><span data-stu-id="51c30-142">Security Mode</span></span>|<span data-ttu-id="51c30-143">可靠消息传递</span><span class="sxs-lookup"><span data-stu-id="51c30-143">Reliable Messaging</span></span>|<span data-ttu-id="51c30-144">事务流 （默认情况下禁用）</span><span class="sxs-lookup"><span data-stu-id="51c30-144">Transaction Flow (disabled by default)</span></span>|  
|------------------------|---------------|----------------------|-------------------|------------------------|----------------------------------------------|  
|<span data-ttu-id="51c30-145">BasicHttpBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-145">BasicHttpBinding</span></span>|<span data-ttu-id="51c30-146">HTTP</span><span class="sxs-lookup"><span data-stu-id="51c30-146">HTTP</span></span>|<span data-ttu-id="51c30-147">Text</span><span class="sxs-lookup"><span data-stu-id="51c30-147">Text</span></span>|<span data-ttu-id="51c30-148">无</span><span class="sxs-lookup"><span data-stu-id="51c30-148">None</span></span>|<span data-ttu-id="51c30-149">不支持</span><span class="sxs-lookup"><span data-stu-id="51c30-149">Not supported</span></span>|<span data-ttu-id="51c30-150">不支持</span><span class="sxs-lookup"><span data-stu-id="51c30-150">Not supported</span></span>|  
|<span data-ttu-id="51c30-151">WSHttpBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-151">WSHttpBinding</span></span>|<span data-ttu-id="51c30-152">HTTP</span><span class="sxs-lookup"><span data-stu-id="51c30-152">HTTP</span></span>|<span data-ttu-id="51c30-153">Text</span><span class="sxs-lookup"><span data-stu-id="51c30-153">Text</span></span>|<span data-ttu-id="51c30-154">消息</span><span class="sxs-lookup"><span data-stu-id="51c30-154">Message</span></span>|<span data-ttu-id="51c30-155">禁用</span><span class="sxs-lookup"><span data-stu-id="51c30-155">Disabled</span></span>|<span data-ttu-id="51c30-156">WS AtomicTransactions</span><span class="sxs-lookup"><span data-stu-id="51c30-156">WS-AtomicTransactions</span></span>|  
|<span data-ttu-id="51c30-157">NetTcpBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-157">NetTcpBinding</span></span>|<span data-ttu-id="51c30-158">TCP</span><span class="sxs-lookup"><span data-stu-id="51c30-158">TCP</span></span>|<span data-ttu-id="51c30-159">二进制</span><span class="sxs-lookup"><span data-stu-id="51c30-159">Binary</span></span>|<span data-ttu-id="51c30-160">Transport</span><span class="sxs-lookup"><span data-stu-id="51c30-160">Transport</span></span>|<span data-ttu-id="51c30-161">禁用</span><span class="sxs-lookup"><span data-stu-id="51c30-161">Disabled</span></span>|<span data-ttu-id="51c30-162">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="51c30-162">OleTransactions</span></span>|  
|<span data-ttu-id="51c30-163">NetNamedPipesBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-163">NetNamedPipesBinding</span></span>|<span data-ttu-id="51c30-164">命名管道</span><span class="sxs-lookup"><span data-stu-id="51c30-164">Named Pipes</span></span>|<span data-ttu-id="51c30-165">二进制</span><span class="sxs-lookup"><span data-stu-id="51c30-165">Binary</span></span>|<span data-ttu-id="51c30-166">Transport</span><span class="sxs-lookup"><span data-stu-id="51c30-166">Transport</span></span>|<span data-ttu-id="51c30-167">不支持</span><span class="sxs-lookup"><span data-stu-id="51c30-167">Not supported</span></span>|<span data-ttu-id="51c30-168">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="51c30-168">OleTransactions</span></span>|  
|<span data-ttu-id="51c30-169">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-169">NetMsmqBinding</span></span>|<span data-ttu-id="51c30-170">MSMQ</span><span class="sxs-lookup"><span data-stu-id="51c30-170">MSMQ</span></span>|<span data-ttu-id="51c30-171">二进制</span><span class="sxs-lookup"><span data-stu-id="51c30-171">Binary</span></span>|<span data-ttu-id="51c30-172">消息</span><span class="sxs-lookup"><span data-stu-id="51c30-172">Message</span></span>|<span data-ttu-id="51c30-173">不支持</span><span class="sxs-lookup"><span data-stu-id="51c30-173">Not supported</span></span>|<span data-ttu-id="51c30-174">不支持</span><span class="sxs-lookup"><span data-stu-id="51c30-174">Not supported</span></span>|  
|<span data-ttu-id="51c30-175">CustomBinding</span><span class="sxs-lookup"><span data-stu-id="51c30-175">CustomBinding</span></span>|<span data-ttu-id="51c30-176">你决定</span><span class="sxs-lookup"><span data-stu-id="51c30-176">You decide</span></span>|<span data-ttu-id="51c30-177">你决定</span><span class="sxs-lookup"><span data-stu-id="51c30-177">You decide</span></span>|<span data-ttu-id="51c30-178">你决定</span><span class="sxs-lookup"><span data-stu-id="51c30-178">You decide</span></span>|<span data-ttu-id="51c30-179">你决定</span><span class="sxs-lookup"><span data-stu-id="51c30-179">You decide</span></span>|<span data-ttu-id="51c30-180">你决定</span><span class="sxs-lookup"><span data-stu-id="51c30-180">You decide</span></span>|  
  
 <span data-ttu-id="51c30-181">你可以选择基于通信需求的特定绑定。</span><span class="sxs-lookup"><span data-stu-id="51c30-181">You can select a particular binding based on your communication needs.</span></span> <span data-ttu-id="51c30-182">例如：</span><span class="sxs-lookup"><span data-stu-id="51c30-182">For example:</span></span>  
  
-   <span data-ttu-id="51c30-183">**BasicHttpBinding**旨在与简单 Web 服务互操作性。</span><span class="sxs-lookup"><span data-stu-id="51c30-183">**BasicHttpBinding** is designed for interoperability with simple Web services.</span></span> <span data-ttu-id="51c30-184">BasicHttpBinding 使用 HTTP 传输和消息编码的文本。</span><span class="sxs-lookup"><span data-stu-id="51c30-184">BasicHttpBinding uses HTTP for the transport and text for the message encoding.</span></span>  
  
-   <span data-ttu-id="51c30-185">**WSHttpBinding**专为互操作性与更高级的 Web 服务，它们可能利用不同 WS-\* 协议。</span><span class="sxs-lookup"><span data-stu-id="51c30-185">**WSHttpBinding** is designed for interoperability with more advanced Web services that might take advantage of different WS-\* protocols.</span></span>  <span data-ttu-id="51c30-186">WSHttpBinding 还使用 HTTP 传输和消息编码的文本。</span><span class="sxs-lookup"><span data-stu-id="51c30-186">WSHttpBinding also uses HTTP for the transport and text for the message encoding.</span></span>  
  
-   <span data-ttu-id="51c30-187">**NetTcpBinding**和**NetNamedPipeBinding**旨在高效，并执行与其他 WCF 应用程序的 ant 通信分别跨计算机或同一台计算机上。</span><span class="sxs-lookup"><span data-stu-id="51c30-187">**NetTcpBinding** and **NetNamedPipeBinding** are designed for efficient and perform ant communication with other WCF applications across machines or on the same machine respectively.</span></span>  
  
-   <span data-ttu-id="51c30-188">如果你需要通过使用运行时的一个或多个自定义协议通道的最大的灵活性，你可以使用**CustomBinding** ，它将授予你决定哪些绑定元素构成你绑定的可能性。</span><span class="sxs-lookup"><span data-stu-id="51c30-188">If you need maximum flexibility by using one or multiple custom protocol channels at runtime, you can use the **CustomBinding** that gives you the possibility to decide which binding elements compose your binding.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="51c30-189">绑定具有一些在响应时间和吞吐量方面不同的特征。</span><span class="sxs-lookup"><span data-stu-id="51c30-189">Bindings have different characteristics in terms of response time and throughput.</span></span> <span data-ttu-id="51c30-190">因此，以提高性能的常规建议使用 NetTcpBindind 和 NetNamesPipeBinding 在可能的情况。</span><span class="sxs-lookup"><span data-stu-id="51c30-190">So, the general advice to increase performance is using the NetTcpBindind and NetNamesPipeBinding when possible.</span></span>  
  
## <a name="use-the-tcp-transport-and-binary-message-encoding-to-maximize-wcf-adapter-throughput-and-minimize-wcf-adapter-latency"></a><span data-ttu-id="51c30-191">使用 TCP 传输和二进制消息编码以最大化 WCF 适配器吞吐量并减少 WCF 适配器延迟</span><span class="sxs-lookup"><span data-stu-id="51c30-191">Use the TCP transport and binary message encoding to maximize WCF adapter throughput and minimize WCF adapter latency</span></span>  
 <span data-ttu-id="51c30-192">使用 WCF NetTcp 适配器时可以最大化吞吐量。</span><span class="sxs-lookup"><span data-stu-id="51c30-192">Use the WCF-NetTcp adapter when possible to maximize throughput.</span></span> <span data-ttu-id="51c30-193">WCF NetTcp 适配器使用 TCP/IP 传输协议和二进制消息编码一起提供改进的性能，与其他 WCF-相比 \* 适配器。</span><span class="sxs-lookup"><span data-stu-id="51c30-193">The WCF-NetTcp adapter uses TCP/IP transport protocol and binary message encoding which together provide improved performance as compared to other WCF-\* adapters.</span></span>  
  
 <span data-ttu-id="51c30-194">或者，可以使用配置的 WCF 自定义 （或用于接收位置的 WCF CustomIsolated 适配器） **customBinding**绑定类型。</span><span class="sxs-lookup"><span data-stu-id="51c30-194">Alternatively, you can configure the WCF-Custom (or WCF-CustomIsolated adapter for Receive Locations) with a **customBinding** binding type.</span></span> <span data-ttu-id="51c30-195">然后，将添加**binaryMessageEncoding**绑定扩展来实现二进制消息编码和**tcpTransport**绑定扩展来实现 TCP/IP 作为消息传输协议。</span><span class="sxs-lookup"><span data-stu-id="51c30-195">Then, add the **binaryMessageEncoding** binding extension to implement binary message encoding and the **tcpTransport** binding extension to implement TCP/IP as the message transport protocol.</span></span> <span data-ttu-id="51c30-196">这种方法是非常灵活，因为它允许你以选择并配置所需的绑定元素，并创建自定义通道，以扩展 BizTalk 消息引擎的默认行为。</span><span class="sxs-lookup"><span data-stu-id="51c30-196">This approach is very flexible because it allows you to select and configure only the binding elements you need and to create custom channels to extend the default behavior of the BizTalk Messaging Engine.</span></span> <span data-ttu-id="51c30-197">如果实现的 WCF 自定义适配器**customBinding**绑定类型，指定以下值作为要最大化吞吐量并减少延迟的绑定扩展配置参数。</span><span class="sxs-lookup"><span data-stu-id="51c30-197">If you implement the WCF-Custom adapter with the **customBinding** binding type, specify these values for the binding extension Configuration parameters to maximize throughput and minimize latency.</span></span>  
  
 <span data-ttu-id="51c30-198">**发送端口的配置值：**</span><span class="sxs-lookup"><span data-stu-id="51c30-198">**Send Port Configuration Values:**</span></span>  
  
|<span data-ttu-id="51c30-199">设置</span><span class="sxs-lookup"><span data-stu-id="51c30-199">Setting</span></span>|<span data-ttu-id="51c30-200">默认值</span><span class="sxs-lookup"><span data-stu-id="51c30-200">Default value</span></span>|<span data-ttu-id="51c30-201">推荐值</span><span class="sxs-lookup"><span data-stu-id="51c30-201">Recommended value</span></span>|  
|-------------|-------------------|-----------------------|  
|<span data-ttu-id="51c30-202">**TcpTransportBindingElement.ConnectionPoolSettings.maxOutboundConnectionsPerEndpoint** -获取或设置最大连接池中缓存的每个终结点的出站连接数。</span><span class="sxs-lookup"><span data-stu-id="51c30-202">**TcpTransportBindingElement.ConnectionPoolSettings.maxOutboundConnectionsPerEndpoint** - Gets or sets the maximum number of outbound connections for each endpoint cached in the connection pool.</span></span> <span data-ttu-id="51c30-203">这将限制为每个唯一的远程终结点缓存的连接数。</span><span class="sxs-lookup"><span data-stu-id="51c30-203">This limits the number of connections that are cached for each unique remote endpoint.</span></span> <span data-ttu-id="51c30-204">如果具有更多活动客户端连接而超出此值，该服务可能表现为客户端，并应将此值调整以适应最大为每个唯一远程终结点缓存的预期连接数。</span><span class="sxs-lookup"><span data-stu-id="51c30-204">If this value is exceeded by having more active client connections, the service may appear unresponsive to the client, and this value should be adjusted to accommodate the maximum number of expected connections that are cached for each unique remote endpoint.</span></span> <span data-ttu-id="51c30-205">有关此属性的详细信息，请参阅[TcpConnectionPoolSettings.MaxOutboundConnectionsPerEndpoint 属性](http://go.microsoft.com/fwlink/?LinkId=157737)(http://go.microsoft.com/fwlink/?LinkId=157737) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-205">For more information about this property, see [TcpConnectionPoolSettings.MaxOutboundConnectionsPerEndpoint Property](http://go.microsoft.com/fwlink/?LinkId=157737) (http://go.microsoft.com/fwlink/?LinkId=157737) on MSDN.</span></span>|<span data-ttu-id="51c30-206">10</span><span class="sxs-lookup"><span data-stu-id="51c30-206">10</span></span>|<span data-ttu-id="51c30-207">请尝试 > = 20</span><span class="sxs-lookup"><span data-stu-id="51c30-207">Try >= 20</span></span>|  
  
 <span data-ttu-id="51c30-208">**接收端口配置值：**</span><span class="sxs-lookup"><span data-stu-id="51c30-208">**Receive Port Configuration Values:**</span></span>  
  
|<span data-ttu-id="51c30-209">设置</span><span class="sxs-lookup"><span data-stu-id="51c30-209">Setting</span></span>|<span data-ttu-id="51c30-210">.NET Framework 4 的默认值</span><span class="sxs-lookup"><span data-stu-id="51c30-210">Default value for .NET Framework 4</span></span>|<span data-ttu-id="51c30-211">针对.NET Framework 4 的建议的值</span><span class="sxs-lookup"><span data-stu-id="51c30-211">Recommended value for .NET Framework 4</span></span>|<span data-ttu-id="51c30-212">.NET Framework 3.5 的默认值</span><span class="sxs-lookup"><span data-stu-id="51c30-212">Default value for .NET Framework 3.5</span></span>|<span data-ttu-id="51c30-213">.NET Framework 3.5 的建议的值</span><span class="sxs-lookup"><span data-stu-id="51c30-213">Recommended value for .NET Framework 3.5</span></span>|  
|-------------|----------------------------------------|--------------------------------------------|------------------------------------------|----------------------------------------------|  
|<span data-ttu-id="51c30-214">**TcpTransportBindingElement.MaxPendingAccepts** -获取或设置最大挂起异步接受数可用于处理传入连接到服务的操作。</span><span class="sxs-lookup"><span data-stu-id="51c30-214">**TcpTransportBindingElement.MaxPendingAccepts** - Gets or sets the maximum number of pending asynchronous accept operations that are available for processing incoming connections to the service.</span></span> <span data-ttu-id="51c30-215">对于具有高级别的同时连接导致的方案，此值还不够，而应将调整连同**MaxPendingConnections**属性以处理更多的并发客户端连接尝试次数。</span><span class="sxs-lookup"><span data-stu-id="51c30-215">For scenarios with high levels of simultaneous connection initiations, this value may be inadequate and should be adjusted along with the **MaxPendingConnections** property to handle higher levels of concurrent client connection attempts.</span></span> <span data-ttu-id="51c30-216">应该不需要将此属性设置为一个值大于存在于承载该服务的计算机的处理器数。</span><span class="sxs-lookup"><span data-stu-id="51c30-216">It should not be necessary to set this property to a value greater than the number of processors present in the machine hosting the service.</span></span> <span data-ttu-id="51c30-217">有关此属性的详细信息，请参阅[ConnectionOrientedTransportBindingElement.MaxPendingAccepts 属性](http://go.microsoft.com/fwlink/?LinkId=157738)(http://go.microsoft.com/fwlink/?LinkId=157738) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-217">For more information about this property, see [ConnectionOrientedTransportBindingElement.MaxPendingAccepts Property](http://go.microsoft.com/fwlink/?LinkId=157738) (http://go.microsoft.com/fwlink/?LinkId=157738) on MSDN.</span></span>|<span data-ttu-id="51c30-218">1</span><span class="sxs-lookup"><span data-stu-id="51c30-218">1</span></span>|<span data-ttu-id="51c30-219">2 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-219">2\*ProcessorCount</span></span>|<span data-ttu-id="51c30-220">1</span><span class="sxs-lookup"><span data-stu-id="51c30-220">1</span></span>|<span data-ttu-id="51c30-221">请尝试 > = 20</span><span class="sxs-lookup"><span data-stu-id="51c30-221">Try >= 20</span></span>|  
|<span data-ttu-id="51c30-222">**TcpTransportBindingElement.MaxPendingConnections** -获取或设置连接在服务上等待调度的最大数目。</span><span class="sxs-lookup"><span data-stu-id="51c30-222">**TcpTransportBindingElement.MaxPendingConnections** - Gets or sets the maximum number of connections awaiting dispatch on the service.</span></span> <span data-ttu-id="51c30-223">这将限制等待调度的同时进行的客户端连接数。</span><span class="sxs-lookup"><span data-stu-id="51c30-223">This limits the number of simultaneous client connections awaiting dispatch.</span></span> <span data-ttu-id="51c30-224">如果此值太低，则客户端连接尝试可能拒绝服务。</span><span class="sxs-lookup"><span data-stu-id="51c30-224">If this value is too low, client connection attempts may be rejected by the service.</span></span> <span data-ttu-id="51c30-225">如果太高，则服务可能无迟缓或没有响应向客户端负荷期间。</span><span class="sxs-lookup"><span data-stu-id="51c30-225">If it is too high, the service may appear slow or unresponsive to clients during heavy load periods.</span></span> <span data-ttu-id="51c30-226">此属性应设置为一个值，允许服务运行在大容量时，和不更高版本。</span><span class="sxs-lookup"><span data-stu-id="51c30-226">This property should be set to a value that allows the service to run at full capacity, and no higher.</span></span> <span data-ttu-id="51c30-227">当堆栈调用中的高层**AcceptDispatch**，连接从等待调度的连接队列中删除。</span><span class="sxs-lookup"><span data-stu-id="51c30-227">When a higher layer in the stack calls **AcceptDispatch**, that connection is removed from the queue of connections awaiting dispatch.</span></span> <span data-ttu-id="51c30-228">有关此属性的详细信息，请参阅[ConnectionOrientedTransportBindingElement.MaxPendingConnections 属性](http://go.microsoft.com/fwlink/?LinkId=157735)(http://go.microsoft.com/fwlink/?LinkId=157735) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-228">For more information about this property, see [ConnectionOrientedTransportBindingElement.MaxPendingConnections Property](http://go.microsoft.com/fwlink/?LinkId=157735) (http://go.microsoft.com/fwlink/?LinkId=157735) on MSDN.</span></span>|<span data-ttu-id="51c30-229">10</span><span class="sxs-lookup"><span data-stu-id="51c30-229">10</span></span>|<span data-ttu-id="51c30-230">16 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-230">16\*ProcessorCount</span></span>|<span data-ttu-id="51c30-231">10</span><span class="sxs-lookup"><span data-stu-id="51c30-231">10</span></span>|<span data-ttu-id="51c30-232">请尝试 > = 20</span><span class="sxs-lookup"><span data-stu-id="51c30-232">Try >= 20</span></span>|  
|<span data-ttu-id="51c30-233">**TcpTransportBindingElement.ListenBacklog** -获取或设置的最大可为挂起状态的排队的连接请求数。</span><span class="sxs-lookup"><span data-stu-id="51c30-233">**TcpTransportBindingElement.ListenBacklog** - Gets or sets the maximum number of queued connection requests that can be pending.</span></span> <span data-ttu-id="51c30-234">**ListenBacklog**是套接字级别的属性，描述的"挂起接受"号进行排队的请求。</span><span class="sxs-lookup"><span data-stu-id="51c30-234">**ListenBacklog** is a socket-level property that describes the number of "pending accept" requests to be queued.</span></span> <span data-ttu-id="51c30-235">确保最大并发连接数不超过基础套接字队列。</span><span class="sxs-lookup"><span data-stu-id="51c30-235">Ensure that the underlying socket queue is not exceeded by the maximum number of concurrent connections.</span></span> <span data-ttu-id="51c30-236">有关此属性的详细信息请参阅[TcpTransportBindingElement.ListenBacklog 属性](http://go.microsoft.com/fwlink/?LinkId=157734)(http://go.microsoft.com/fwlink/?LinkId=157734) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-236">For more information about this property see [TcpTransportBindingElement.ListenBacklog Property](http://go.microsoft.com/fwlink/?LinkId=157734) (http://go.microsoft.com/fwlink/?LinkId=157734) on MSDN.</span></span>|<span data-ttu-id="51c30-237">10</span><span class="sxs-lookup"><span data-stu-id="51c30-237">10</span></span>|<span data-ttu-id="51c30-238">16 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-238">16\*ProcessorCount</span></span>|<span data-ttu-id="51c30-239">10</span><span class="sxs-lookup"><span data-stu-id="51c30-239">10</span></span>|<span data-ttu-id="51c30-240">请尝试 > = 20</span><span class="sxs-lookup"><span data-stu-id="51c30-240">Try >= 20</span></span>|  
  
 <span data-ttu-id="51c30-241">**将 ServiceThrottlingBehavior 服务行为添加到 WCF 自定义或 WCF CustomIsolated 接收位置并使用以下设置：**</span><span class="sxs-lookup"><span data-stu-id="51c30-241">**Add the ServiceThrottlingBehavior service behavior to a WCF-Custom or WCF-CustomIsolated Receive Location and use the following settings:**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="51c30-242">可以修改 ServiceThrottlingBehavior 服务行为的任何元素之前，必须首先添加**serviceThrottling**到行为扩展**行为**选项卡**WCF 自定义\*传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="51c30-242">Before any elements of the ServiceThrottlingBehavior service behavior can be modified, you must first add the **serviceThrottling** behavior extension to the **Behaviors** tab of the **WCF-Custom\* Transport Properties** dialog box.</span></span> <span data-ttu-id="51c30-243">若要将 serviceThrottling 添加到行为的列表中，选择**行为**选项卡**WCF 自定义\*传输属性**对话框中，右键单击**ServiceBehavior**下**行为**，单击**将扩展添加**，选择**serviceThrottling**，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="51c30-243">To add serviceThrottling to the list of Behaviors, select the **Behaviors** tab of the **WCF-Custom\* Transport Properties** dialog box, right-click **ServiceBehavior** under **Behavior**, click **Add extension**, select **serviceThrottling**, and then click **OK**.</span></span> <span data-ttu-id="51c30-244">然后单击以选择下可用的属性**ServiceThrottlingElement**并根据需要更改属性的值。</span><span class="sxs-lookup"><span data-stu-id="51c30-244">Then click to select the properties available under **ServiceThrottlingElement** and change the value for the properties as needed.</span></span>  
  
|<span data-ttu-id="51c30-245">设置</span><span class="sxs-lookup"><span data-stu-id="51c30-245">Setting</span></span>|<span data-ttu-id="51c30-246">.NET Framework 4 的默认值</span><span class="sxs-lookup"><span data-stu-id="51c30-246">Default value for .NET Framework 4</span></span>|<span data-ttu-id="51c30-247">针对.NET Framework 4 的建议的值</span><span class="sxs-lookup"><span data-stu-id="51c30-247">Recommended value for .NET Framework 4</span></span>|<span data-ttu-id="51c30-248">.NET Framework 3.5 的默认值</span><span class="sxs-lookup"><span data-stu-id="51c30-248">Default value for .NET Framework 3.5</span></span>|<span data-ttu-id="51c30-249">建议值为.Net Framework 3.5</span><span class="sxs-lookup"><span data-stu-id="51c30-249">Recommended value for .Net Framework 3.5</span></span>|  
|-------------|----------------------------------------|--------------------------------------------|------------------------------------------|----------------------------------------------|  
|<span data-ttu-id="51c30-250">**ServiceThrottlingBehavior.MaxConcurrentCalls** -获取或设置一个值，指定的最大活动处理跨消息数**ServiceHost**。</span><span class="sxs-lookup"><span data-stu-id="51c30-250">**ServiceThrottlingBehavior.MaxConcurrentCalls** - Gets or sets a value that specifies the maximum number of messages actively processing across a **ServiceHost**.</span></span> <span data-ttu-id="51c30-251">**MaxConcurrentCalls**属性指定的最大活动处理跨消息数**ServiceHost**对象。</span><span class="sxs-lookup"><span data-stu-id="51c30-251">The **MaxConcurrentCalls** property specifies the maximum number of messages actively processing across a **ServiceHost** object.</span></span> <span data-ttu-id="51c30-252">每个通道都可以有一个挂起消息不会影响的值**MaxConcurrentCalls**直到 WCF 开始对其进行处理。</span><span class="sxs-lookup"><span data-stu-id="51c30-252">Each channel can have one pending message that does not count against the value of **MaxConcurrentCalls** until WCF begins to process it.</span></span> <span data-ttu-id="51c30-253">有关此属性的详细信息，请参阅[ServiceThrottlingBehavior.MaxConcurrentCalls](http://go.microsoft.com/fwlink/?LinkId=157838) (http://go.microsoft.com/fwlink/?LinkId=157838) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-253">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentCalls](http://go.microsoft.com/fwlink/?LinkId=157838) (http://go.microsoft.com/fwlink/?LinkId=157838) on MSDN.</span></span> <span data-ttu-id="51c30-254">默认值为 BizTalk WCF 自定义和 WCF CustomIsolated 接收适配器**MaxConcurrentCalls**属性是**16**每个 CPU。</span><span class="sxs-lookup"><span data-stu-id="51c30-254">The default value for the BizTalk WCF-Custom and WCF-CustomIsolated receive adapters **MaxConcurrentCalls** property is **16** per CPU.</span></span> <span data-ttu-id="51c30-255">**注意：** BizTalk Server WCF 接收 WCF 自定义和 WCF CustomIsolated 适配器公开以外的适配器**最大并发调用**属性**绑定**选项卡**WCF-\*传输属性**对话框中，以配置此行为。</span><span class="sxs-lookup"><span data-stu-id="51c30-255">**Note:**  BizTalk Server WCF receive adapters other than the WCF-Custom and WCF-CustomIsolated adapter expose a **Maximum Concurrent Calls** property on the **Binding** tab of the **WCF-\* Transport Properties** dialog box to configure this behavior.</span></span> <span data-ttu-id="51c30-256">默认值**最大并发调用**行为是**200**。</span><span class="sxs-lookup"><span data-stu-id="51c30-256">The default value of the **Maximum Concurrent Calls** behavior is **200**.</span></span>|<span data-ttu-id="51c30-257">16 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-257">16\*ProcessorCount</span></span>|<span data-ttu-id="51c30-258">16 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-258">16\*ProcessorCount</span></span>|<span data-ttu-id="51c30-259">-16 个的 BizTalk WCF 自定义和 WCF CustomIsolated 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="51c30-259">-   16 for the BizTalk WCF-Custom and WCF-CustomIsolated receive adapters.</span></span><br /><span data-ttu-id="51c30-260">-200 其他 wcf 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="51c30-260">-   200 for the other WCF receive adapters.</span></span>|<span data-ttu-id="51c30-261">-尝试 > = 200，用于 WCF 自定义和 WCF CustomIsolated 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="51c30-261">-   Try >= 200 for the WCF-Custom and WCF-CustomIsolated receive adapters.</span></span><br /><span data-ttu-id="51c30-262">-尝试为 200 >**最大并发调用**属性**绑定**选项卡**WCF-\*传输属性**BizTalk Server WCF 的对话框中接收而不是 WCF 自定义和 WCF CustomIsolated 适配器的适配器。</span><span class="sxs-lookup"><span data-stu-id="51c30-262">-   Try > 200 for the **Maximum Concurrent Calls** property on the **Binding** tab of the **WCF-\* Transport Properties** dialog box for BizTalk Server WCF receive adapters other than the WCF-Custom and WCF-CustomIsolated adapter.</span></span>|  
|<span data-ttu-id="51c30-263">**ServiceThrottlingBehavior.maxConcurrentInstances** -获取或设置一个值，指定的最大数目**InstanceContext**可以同时执行的服务中的对象。</span><span class="sxs-lookup"><span data-stu-id="51c30-263">**ServiceThrottlingBehavior.maxConcurrentInstances** - Gets or sets a value that specifies the maximum number of **InstanceContext** objects in the service that can execute at once.</span></span> <span data-ttu-id="51c30-264">**MaxConcurrentInstances**属性指定的最大数**InstanceContext**服务中的对象。</span><span class="sxs-lookup"><span data-stu-id="51c30-264">The **MaxConcurrentInstances** property specifies the maximum number of **InstanceContext** objects in the service.</span></span> <span data-ttu-id="51c30-265">务必要记住之间的关系**MaxConcurrentInstances**属性和**InstanceContextMode**属性。</span><span class="sxs-lookup"><span data-stu-id="51c30-265">It is important to keep in mind the relationship between the **MaxConcurrentInstances** property and the **InstanceContextMode** property.</span></span> <span data-ttu-id="51c30-266">如果**InstanceContextMode**为 PerSession，生成的值为总会话数。</span><span class="sxs-lookup"><span data-stu-id="51c30-266">If **InstanceContextMode** is PerSession, the resulting value is the total number of sessions.</span></span> <span data-ttu-id="51c30-267">如果**InstanceContextMode**是 PerCall，生成的值是并发调用数。</span><span class="sxs-lookup"><span data-stu-id="51c30-267">If **InstanceContextMode** is PerCall, the resulting value is the number of concurrent calls.</span></span> <span data-ttu-id="51c30-268">如果消息到达时的最大数**InstanceContext**对象已经存在，直到保存该消息**InstanceContext**对象关闭。</span><span class="sxs-lookup"><span data-stu-id="51c30-268">If a message arrives while the maximum number of **InstanceContext** objects already exist, the message is held until an **InstanceContext** object closes.</span></span> <span data-ttu-id="51c30-269">有关此属性的详细信息，请参阅[ServiceThrottlingBehavior.MaxConcurrentInstances 属性](http://go.microsoft.com/fwlink/?LinkId=157897)(http://go.microsoft.com/fwlink/?LinkId=157897) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-269">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentInstances Property](http://go.microsoft.com/fwlink/?LinkId=157897) (http://go.microsoft.com/fwlink/?LinkId=157897) on MSDN.</span></span> <span data-ttu-id="51c30-270">默认值用于 WCF 自定义和 WCF CustomIsolated 接收适配器 MaxConcurrentInstances 属性是**116**每个 CPU。</span><span class="sxs-lookup"><span data-stu-id="51c30-270">The default value for the WCF-Custom and WCF-CustomIsolated receive adapter MaxConcurrentInstances property is **116** per CPU.</span></span> <span data-ttu-id="51c30-271">**注意：** 由于 WCF 接收位置实现为包含在 Microsoft.BizTalk.Adapter.Wcf.Runtime.dll 程序集，因为此类标记为 ServiceBehavior (InstanceContextMode BizTalkServiceInstance 类的实例= InstanceContextMode.Single，ConcurrencyMode=ConcurrencyMode.Multiple）。</span><span class="sxs-lookup"><span data-stu-id="51c30-271">**Note:**  Since WCF receive locations are implemented as instances of the BizTalkServiceInstance class contained in the Microsoft.BizTalk.Adapter.Wcf.Runtime.dll assembly and since this class is marked as ServiceBehavior(InstanceContextMode=InstanceContextMode.Single, ConcurrencyMode=ConcurrencyMode.Multiple).</span></span> <span data-ttu-id="51c30-272">所有传入请求由相同的单一实例对象，并将忽略此参数。</span><span class="sxs-lookup"><span data-stu-id="51c30-272">all incoming requests are managed by the same singleton object and this parameter is ignored.</span></span> <span data-ttu-id="51c30-273">因此，将 maxConcurrentInstances 属性设置上某些 WCF 自定义接收位置具有不起作用，，因为活动的实例数也始终等于 1。</span><span class="sxs-lookup"><span data-stu-id="51c30-273">So setting the maxConcurrentInstances property on certain WCF-Custom receive locations has no effect, since the number of active instances is always equal to 1.</span></span>|<span data-ttu-id="51c30-274">116 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-274">116\*ProcessorCount</span></span>|<span data-ttu-id="51c30-275">116 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-275">116\*ProcessorCount</span></span>|<span data-ttu-id="51c30-276">26</span><span class="sxs-lookup"><span data-stu-id="51c30-276">26</span></span>|<span data-ttu-id="51c30-277">请尝试 > = 200</span><span class="sxs-lookup"><span data-stu-id="51c30-277">Try >= 200</span></span>|  
|<span data-ttu-id="51c30-278">**ServiceThrottlingBehavior.MaxConcurrentSessions** - **MaxConcurrentSessions**属性获取或设置最大会话数**ServiceHost**对象可一次接受.</span><span class="sxs-lookup"><span data-stu-id="51c30-278">**ServiceThrottlingBehavior.MaxConcurrentSessions** - The **MaxConcurrentSessions** property gets or sets the maximum number of sessions a **ServiceHost** object can accept at one time.</span></span> <span data-ttu-id="51c30-279">务必了解，在这种情况下进行会话并不局限于仅支持可靠会话的通道。</span><span class="sxs-lookup"><span data-stu-id="51c30-279">It is important to understand that sessions in this case does is not limited to only channels that support reliable sessions.</span></span> <span data-ttu-id="51c30-280">每个侦听器对象都可以有一个挂起通道会话不会影响的值**MaxConcurrentSessions**直到 WCF 接受通道会话并开始处理通道会话消息。</span><span class="sxs-lookup"><span data-stu-id="51c30-280">Each listener object can have one pending channel session that does not count against the value of **MaxConcurrentSessions** until WCF accepts the channel session and begins processing the channel session messages.</span></span> <span data-ttu-id="51c30-281">此属性是最有用中进行的方案使用的会话。</span><span class="sxs-lookup"><span data-stu-id="51c30-281">This property is most useful in scenarios that make use of sessions.</span></span> <span data-ttu-id="51c30-282">当此属性设置为小于客户端线程数的值时，从多个客户端请求可能会在同一套接字连接中进行排队。</span><span class="sxs-lookup"><span data-stu-id="51c30-282">When this property is set to a value less than the number of client threads, the requests from multiple clients may get queued in the same socket connection.</span></span> <span data-ttu-id="51c30-283">将阻止来自尚未与服务建立会话的客户端的请求。</span><span class="sxs-lookup"><span data-stu-id="51c30-283">The requests from the client that has not created a session with the service will be blocked.</span></span> <span data-ttu-id="51c30-284">它们将保持阻止状态，直到该服务将关闭它的会话与其他客户端，如果服务上打开的会话数已达到指定的值**MaxConcurrentSessions**。</span><span class="sxs-lookup"><span data-stu-id="51c30-284">They will remain blocked until the service closes its session with the other clients, if the number of open sessions on the service has reached the value specified for **MaxConcurrentSessions**.</span></span> <span data-ttu-id="51c30-285">然后将未被提供服务的客户端请求超时时，和服务关闭会话。</span><span class="sxs-lookup"><span data-stu-id="51c30-285">The client requests that are not served are then timed out, and the service closes the session.</span></span> <span data-ttu-id="51c30-286">若要避免这种情况下，请考虑运行客户端线程从不同的应用程序域，以便其他套接字连接接受请求消息。</span><span class="sxs-lookup"><span data-stu-id="51c30-286">To avoid this situation, consider running the client threads from different application domains so that the request messages are accepted by different socket connections.</span></span> <span data-ttu-id="51c30-287">有关此属性的详细信息，请参阅[ServiceThrottlingBehavior.MaxConcurrentSessions 属性](http://go.microsoft.com/fwlink/?LinkID=157864)(http://go.microsoft.com/fwlink/?LinkId=157864) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-287">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentSessions Property](http://go.microsoft.com/fwlink/?LinkID=157864) (http://go.microsoft.com/fwlink/?LinkId=157864) on MSDN.</span></span>|<span data-ttu-id="51c30-288">100 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-288">100\*ProcessorCount</span></span>|<span data-ttu-id="51c30-289">100 \* ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="51c30-289">100\*ProcessorCount</span></span>|<span data-ttu-id="51c30-290">10</span><span class="sxs-lookup"><span data-stu-id="51c30-290">10</span></span>|<span data-ttu-id="51c30-291">请尝试 > = 200</span><span class="sxs-lookup"><span data-stu-id="51c30-291">Try >= 200</span></span>|  
  
 <span data-ttu-id="51c30-292">当修改端口配置设置应用更改系统地;单独修改每个参数，并测试对性能和整体稳定性更改的效果。</span><span class="sxs-lookup"><span data-stu-id="51c30-292">When modifying port configuration settings apply changes methodically; modify each parameter individually and, test the effects of the change on performance and overall stability.</span></span> <span data-ttu-id="51c30-293">如往常一样，要应用的正确值取决于特定的方案： 如果值设置得太低，则可以减少可伸缩性;而如果值设置过高，则应用程序要求可能超出的计算机上的物理资源容量。</span><span class="sxs-lookup"><span data-stu-id="51c30-293">As always, the proper value to apply depends on the particular scenario: if a value is set too low, scalability can be reduced; whereas if a value is set too high, the application requirement may exceed the capacity of physical resources on the computer.</span></span> <span data-ttu-id="51c30-294">此外，由于这些属性在相关，它们应在一致和一致的方式设置。</span><span class="sxs-lookup"><span data-stu-id="51c30-294">In addition, since these properties are related, they should be set in a consistent and coherent way.</span></span> <span data-ttu-id="51c30-295">有关使用 ServiceThrottlingBehavior 控制 WCF 服务性能的详细信息，请参阅[使用 ServiceThrottlingBehavior 控制 WCF 服务性能](http://go.microsoft.com/fwlink/?LinkId=157908)(http://go.microsoft.com/fwlink/?LinkId=157908) MSDN 上。</span><span class="sxs-lookup"><span data-stu-id="51c30-295">For more information about using ServiceThrottlingBehavior to control WCF Service Performance, see [Using ServiceThrottlingBehavior to Control WCF Service Performance](http://go.microsoft.com/fwlink/?LinkId=157908) (http://go.microsoft.com/fwlink/?LinkId=157908) on MSDN.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="51c30-296">另请参阅</span><span class="sxs-lookup"><span data-stu-id="51c30-296">See Also</span></span>  
 [<span data-ttu-id="51c30-297">优化 BizTalk Server 性能</span><span class="sxs-lookup"><span data-stu-id="51c30-297">Optimizing BizTalk Server Performance</span></span>](../technical-guides/optimizing-biztalk-server-performance.md)