---
title: "步骤 4： 配置用于负载测试的 BizTalk Server 环境 |Microsoft 文档"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 5f336c5f-5a18-493d-8fc0-a8a475ab47b3
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5520062cb6c9bbd937d5c131c41992a7013a9711
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="step-4-configure-biztalk-server-environment-for-load-testing"></a><span data-ttu-id="30a2e-102">步骤 4： 配置用于负载测试的 BizTalk Server 环境</span><span class="sxs-lookup"><span data-stu-id="30a2e-102">Step 4: Configure BizTalk Server Environment for Load Testing</span></span>
<span data-ttu-id="30a2e-103">本主题提供有关创建 BizTalk Server 接收位置，接收端口的信息和运行主题所述的示例代码所需的发送端口[步骤 1： 创建单元测试以提交给 BizTalk Server 的文档进行](~/technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md)和[步骤 3： 创建负载测试，以同时执行多个单元测试](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md)。</span><span class="sxs-lookup"><span data-stu-id="30a2e-103">This topic provides information for creating the BizTalk Server Receive Locations, Receive Ports, and Send Ports required to run the sample code described in the topics [Step 1: Create a Unit Test to Submit Documents to BizTalk Server](~/technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md) and [Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md).</span></span>  
  
## <a name="configure-biztalk-server-environment-for-load-tests"></a><span data-ttu-id="30a2e-104">为负载测试配置 BizTalk Server 环境</span><span class="sxs-lookup"><span data-stu-id="30a2e-104">Configure BizTalk Server Environment for Load Tests</span></span>  
 <span data-ttu-id="30a2e-105">本主题中所述[步骤 3： 创建负载测试对执行多个单元测试同时](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md)，负载测试**BTS_Messaging_Step**配置为执行单元测试**BTSMessaging**和**BTSMessaging2**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-105">As described in the topic [Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously](~/technical-guides/step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously.md), the load test **BTS_Messaging_Step** is configured to execute the unit tests **BTSMessaging** and **BTSMessaging2**.</span></span> <span data-ttu-id="30a2e-106">反过来，这些单元测试加载消息 C:\Projects\LoadTest\BTSLoad\TestMessages\TestXmlDocument.xml 的副本，并将其发送到终结点**BTSMessagingEP**和**BTSMessagingEP2**中定义项目的应用程序配置 (app.config) 文件的以下部分：</span><span class="sxs-lookup"><span data-stu-id="30a2e-106">In turn, these unit tests load a copy of the message C:\Projects\LoadTest\BTSLoad\TestMessages\TestXmlDocument.xml and send it to the endpoints **BTSMessagingEP** and **BTSMessagingEP2** as defined in the following section of the project’s application configuration (app.config) file:</span></span>  
  
 <span data-ttu-id="30a2e-107">\<\!---> BTSMessagingEP\<终结点 address="net.tcp://*BizTalk 服务器计算机*: 8123/btsloadtest"绑定 ="netTcpBinding"bindingConfiguration ="netTcpBinding"协定 ="System.ServiceModel.Channels.IRequestChannel"名称 ="BTSMessagingEP"/ >\<终结点 address="net.tcp://*BizTalk 服务器计算机*: 8123/btsloadtest"绑定 ="netTcpBinding"bindingConfiguration ="netTcpBinding"contract="System.ServiceModel.Channels.IRequestChannel"名称 ="BTSMessagingEP2"/ ></span><span class="sxs-lookup"><span data-stu-id="30a2e-107">\<\!-- BTSMessagingEP -->         \<endpoint address="net.tcp://*BizTalk Server Computer*:8123/btsloadtest" binding="netTcpBinding" bindingConfiguration="netTcpBinding" contract="System.ServiceModel.Channels.IRequestChannel" name="BTSMessagingEP" />         \<endpoint address="net.tcp://*BizTalk Server Computer*:8123/btsloadtest" binding="netTcpBinding" bindingConfiguration="netTcpBinding" contract="System.ServiceModel.Channels.IRequestChannel" name="BTSMessagingEP2" /></span></span>  
  
> [!NOTE]
>  <span data-ttu-id="30a2e-108">如前文所述， *BizTalk 服务器计算机*是一个占位符的实际的 BizTalk Server 计算机名，或在情况下，将 BizTalk Server 计算机配置为网络负载平衡 (NLB) 群集; 的成员*BizTalk 服务器计算机*是的名称或地址的相应的 NLB 虚拟服务器的占位符。</span><span class="sxs-lookup"><span data-stu-id="30a2e-108">As noted earlier, *BizTalk Server Computer* is a placeholder for the actual BizTalk Server computer names or, in the case that the BizTalk Server Computers are configured as members of a Network Load Balancing (NLB) cluster; *BizTalk Server Computer* is a placeholder for the name or address of the corresponding NLB virtual server.</span></span>  
  
 <span data-ttu-id="30a2e-109">此示例的目的，使用两台 BizTalk Server 计算机和 BizTalk Server 消息框数据库在远程 SQL Server 计算机上已被。</span><span class="sxs-lookup"><span data-stu-id="30a2e-109">For purposes of this example, two BizTalk Server computers were used and the BizTalk Server Message Box database was on a remote SQL Server computer.</span></span>  
  
### <a name="create-biztalk-server-send-and-receive-hosts"></a><span data-ttu-id="30a2e-110">创建 BizTalk Server 发送和接收主机</span><span class="sxs-lookup"><span data-stu-id="30a2e-110">Create BizTalk Server Send and Receive Hosts</span></span>  
 <span data-ttu-id="30a2e-111">请按照 BizTalk Server 文档主题中的步骤[如何创建新的主机](http://go.microsoft.com/fwlink/?LinkId=208595)(http://go.microsoft.com/fwlink/?LinkId=208595) 创建 BizTalk Server"发送"主机发送端口和发送适配器处理程序。</span><span class="sxs-lookup"><span data-stu-id="30a2e-111">Follow the steps in the BizTalk Server Documentation topic [How to Create a New Host](http://go.microsoft.com/fwlink/?LinkId=208595) (http://go.microsoft.com/fwlink/?LinkId=208595) to create a BizTalk Server “Send” host for Send Ports and Send adapter handlers.</span></span> <span data-ttu-id="30a2e-112">配置主机具有以下属性：</span><span class="sxs-lookup"><span data-stu-id="30a2e-112">Configure the host with the following properties:</span></span>  
  
|<span data-ttu-id="30a2e-113">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-113">Property</span></span>|<span data-ttu-id="30a2e-114">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-114">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-115">Name</span><span class="sxs-lookup"><span data-stu-id="30a2e-115">Name</span></span>|<span data-ttu-id="30a2e-116">TxHost</span><span class="sxs-lookup"><span data-stu-id="30a2e-116">TxHost</span></span>|  
|<span data-ttu-id="30a2e-117">类型</span><span class="sxs-lookup"><span data-stu-id="30a2e-117">Type</span></span>|<span data-ttu-id="30a2e-118">进程内</span><span class="sxs-lookup"><span data-stu-id="30a2e-118">In-Process</span></span>|  
|<span data-ttu-id="30a2e-119">允许主机跟踪</span><span class="sxs-lookup"><span data-stu-id="30a2e-119">Allow Host Tracking</span></span>|<span data-ttu-id="30a2e-120">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-120">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-121">受信任验证</span><span class="sxs-lookup"><span data-stu-id="30a2e-121">Authentication Trusted</span></span>|<span data-ttu-id="30a2e-122">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-122">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-123">仅限 32 位</span><span class="sxs-lookup"><span data-stu-id="30a2e-123">32-bit only</span></span>|<span data-ttu-id="30a2e-124">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-124">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-125">将其用作组中的默认主机</span><span class="sxs-lookup"><span data-stu-id="30a2e-125">Make this the default host in the group</span></span>|<span data-ttu-id="30a2e-126">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-126">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-127">Windows 组</span><span class="sxs-lookup"><span data-stu-id="30a2e-127">Windows group</span></span>|<span data-ttu-id="30a2e-128">用于控制对此主机与关联的主机实例的访问的 Windows 组。</span><span class="sxs-lookup"><span data-stu-id="30a2e-128">The Windows group used to control access to this host and associated host instances.</span></span> <span data-ttu-id="30a2e-129">为默认进程内主机为创建的窗口组*\<计算机名称 >*\BizTalk 应用程序用户 （适用于单个服务器 BizTalk Server 安装） 或*\<域名称 >*\BizTalk 应用程序用户 （适用于多个服务器需要域组使用的 BizTalk Server 安装）。</span><span class="sxs-lookup"><span data-stu-id="30a2e-129">The Window group created for the default in-process host is named either *\<Computer Name>*\BizTalk Application Users (for a single server BizTalk Server installation) or *\<Domain Name>*\BizTalk Application Users (for a multiple server BizTalk Server installation, which requires the use of domain groups).</span></span> <span data-ttu-id="30a2e-130">**注意：***\<计算机名称 >*和*\<域名 >*占位符的实际的计算机名称或创建组时使用的域名。  </span><span class="sxs-lookup"><span data-stu-id="30a2e-130">**Note:**  *\<Computer Name>* and *\<Domain Name>* are placeholders for the actual computer name or domain name used when the group was created.</span></span> <br /><br /> <span data-ttu-id="30a2e-131">如果为该主机中创建新组，则它必须具有本主题所述的特权[主机组](http://go.microsoft.com/fwlink/?LinkId=208803)(http://go.microsoft.com/fwlink/?LinkId=208803) BizTalk Server 文档中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-131">If a new group is created for this host then it must have the privileges described in the topic [Host Groups](http://go.microsoft.com/fwlink/?LinkId=208803) (http://go.microsoft.com/fwlink/?LinkId=208803) in the BizTalk Server documentation.</span></span>|  
  
 <span data-ttu-id="30a2e-132">重复执行您遵循创建用来创建"接收"宿主"发送"主机时的步骤。</span><span class="sxs-lookup"><span data-stu-id="30a2e-132">Repeat the steps that you followed when creating the “Send” host to create a “Receive” host.</span></span> <span data-ttu-id="30a2e-133">使用以下属性值配置"接收"主机：</span><span class="sxs-lookup"><span data-stu-id="30a2e-133">Configure the “Receive” host with the following property values:</span></span>  
  
|<span data-ttu-id="30a2e-134">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-134">Property</span></span>|<span data-ttu-id="30a2e-135">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-135">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-136">Name</span><span class="sxs-lookup"><span data-stu-id="30a2e-136">Name</span></span>|<span data-ttu-id="30a2e-137">RxHost</span><span class="sxs-lookup"><span data-stu-id="30a2e-137">RxHost</span></span>|  
|<span data-ttu-id="30a2e-138">类型</span><span class="sxs-lookup"><span data-stu-id="30a2e-138">Type</span></span>|<span data-ttu-id="30a2e-139">进程内</span><span class="sxs-lookup"><span data-stu-id="30a2e-139">In-Process</span></span>|  
|<span data-ttu-id="30a2e-140">允许主机跟踪</span><span class="sxs-lookup"><span data-stu-id="30a2e-140">Allow Host Tracking</span></span>|<span data-ttu-id="30a2e-141">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-141">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-142">受信任验证</span><span class="sxs-lookup"><span data-stu-id="30a2e-142">Authentication Trusted</span></span>|<span data-ttu-id="30a2e-143">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-143">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-144">仅限 32 位</span><span class="sxs-lookup"><span data-stu-id="30a2e-144">32-bit only</span></span>|<span data-ttu-id="30a2e-145">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-145">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-146">将其用作组中的默认主机</span><span class="sxs-lookup"><span data-stu-id="30a2e-146">Make this the default host in the group</span></span>|<span data-ttu-id="30a2e-147">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-147">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-148">Windows 组</span><span class="sxs-lookup"><span data-stu-id="30a2e-148">Windows group</span></span>|<span data-ttu-id="30a2e-149">用于控制对此主机与关联的主机实例的访问的 Windows 组。</span><span class="sxs-lookup"><span data-stu-id="30a2e-149">The Windows group used to control access to this host and associated host instances.</span></span> <span data-ttu-id="30a2e-150">为默认进程内主机为创建的窗口组*\<计算机名称 >*\BizTalk 应用程序用户 （适用于单个服务器 BizTalk Server 安装） 或*\<域名称 >*\BizTalk 应用程序用户 （适用于多个服务器需要域组使用的 BizTalk Server 安装）。</span><span class="sxs-lookup"><span data-stu-id="30a2e-150">The Window group created for the default in-process host is named either *\<Computer Name>*\BizTalk Application Users (for a single server BizTalk Server installation) or *\<Domain Name>*\BizTalk Application Users (for a multiple server BizTalk Server installation, which requires the use of domain groups).</span></span> <span data-ttu-id="30a2e-151">**注意：***\<计算机名称 >*和*\<域名 >*占位符的实际的计算机名称或创建组时使用的域名。  </span><span class="sxs-lookup"><span data-stu-id="30a2e-151">**Note:**  *\<Computer Name>* and *\<Domain Name>* are placeholders for the actual computer name or domain name used when the group was created.</span></span> <br /><br /> <span data-ttu-id="30a2e-152">如果为该主机中创建新组，则它必须具有本主题所述的特权[主机组](http://go.microsoft.com/fwlink/?LinkId=208803)(http://go.microsoft.com/fwlink/?LinkId=208803) BizTalk Server 文档中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-152">If a new group is created for this host then it must have the privileges described in the topic [Host Groups](http://go.microsoft.com/fwlink/?LinkId=208803) (http://go.microsoft.com/fwlink/?LinkId=208803) in the BizTalk Server documentation.</span></span>|  
  
### <a name="create-instances-of-the-biztalk-server-send-and-receive-hosts"></a><span data-ttu-id="30a2e-153">创建 BizTalk Server 发送的实例，并接收主机</span><span class="sxs-lookup"><span data-stu-id="30a2e-153">Create Instances of the BizTalk Server Send and Receive Hosts</span></span>  
 <span data-ttu-id="30a2e-154">请按照 BizTalk Server 文档主题中的步骤[如何添加一个主机实例](http://go.microsoft.com/fwlink/?LinkId=208596)(http://go.microsoft.com/fwlink/?LinkId=208596) 创建并启动 BizTalk Server"发送"主机的实例。</span><span class="sxs-lookup"><span data-stu-id="30a2e-154">Follow the steps in the BizTalk Server Documentation topic [How to Add a Host Instance](http://go.microsoft.com/fwlink/?LinkId=208596) (http://go.microsoft.com/fwlink/?LinkId=208596) to create and start instances of the BizTalk Server “Send” host.</span></span> <span data-ttu-id="30a2e-155">配置要在 BizTalk Server 组中每个 BizTalk 服务器上运行并将每个主机实例配置为带有以下属性值的"发送"主机的实例：</span><span class="sxs-lookup"><span data-stu-id="30a2e-155">Configure an instance of the “Send” host to run on each BizTalk Server in the BizTalk Server group and configure each host instance with the following property values:</span></span>  
  
|<span data-ttu-id="30a2e-156">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-156">Property</span></span>|<span data-ttu-id="30a2e-157">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-157">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-158">**主机名**</span><span class="sxs-lookup"><span data-stu-id="30a2e-158">**Host name**</span></span>|<span data-ttu-id="30a2e-159">选择**TxHost**下拉列表中下一步**主机名**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-159">Select **TxHost** from the drop-down list next to **Host name**.</span></span>|  
|<span data-ttu-id="30a2e-160">**Server**</span><span class="sxs-lookup"><span data-stu-id="30a2e-160">**Server**</span></span>|<span data-ttu-id="30a2e-161">选择将运行此主机实例中的下拉列表旁边的 BizTalk 服务器**服务器**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-161">Select the BizTalk Server that will run this host instance from the drop-down list next to **Server**.</span></span>|  
|<span data-ttu-id="30a2e-162">**登录**</span><span class="sxs-lookup"><span data-stu-id="30a2e-162">**Logon**</span></span>|<span data-ttu-id="30a2e-163">1.单击**配置**按钮以显示**登录凭据**对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-163">1.  Click the **Configure** button to display the **Logon Credentials** dialog box.</span></span><br /><span data-ttu-id="30a2e-164">2.在**登录凭据**对话框中指定的属性中输入以下值：</span><span class="sxs-lookup"><span data-stu-id="30a2e-164">2.  In the **Logon Credentials** dialog box enter the following values for the specified properties:</span></span><br />     <span data-ttu-id="30a2e-165">**属性**</span><span class="sxs-lookup"><span data-stu-id="30a2e-165">**Property**</span></span><br />     <span data-ttu-id="30a2e-166">**登录**： 是与此 BizTalk Server 主机关联的 Windows 组的成员的用户帐户名称。</span><span class="sxs-lookup"><span data-stu-id="30a2e-166">**Logon**: Name of user account that is a member of the Windows group associated with this BizTalk Server host.</span></span><br />     <span data-ttu-id="30a2e-167">**密码**： 中指定的用户帐户的密码**登录**文本框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-167">**Password**: Password for the user account specified in the **Logon** textbox.</span></span><br /><span data-ttu-id="30a2e-168">3.单击**确定**关闭**登录凭据**对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-168">3.  Click **OK** to close the **Logon Credentials** dialog box.</span></span>|  
|<span data-ttu-id="30a2e-169">**禁用主机启动的实例。**</span><span class="sxs-lookup"><span data-stu-id="30a2e-169">**Disable host instance from starting.**</span></span>|<span data-ttu-id="30a2e-170">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-170">Ensure that this box is un-checked.</span></span>|  
  
 <span data-ttu-id="30a2e-171">创建主机实例之后, 的主机实例上右键单击并选择**启动**从上下文菜单。</span><span class="sxs-lookup"><span data-stu-id="30a2e-171">After creating the host instance, right-click on the host instance and select **Start** from the context menu.</span></span>  
  
 <span data-ttu-id="30a2e-172">重复执行在创建要创建"接收"主机实例的"发送"主机实例时遵循的步骤。</span><span class="sxs-lookup"><span data-stu-id="30a2e-172">Repeat the steps that you followed when creating the “Send” host instances to create “Receive” host instances.</span></span> <span data-ttu-id="30a2e-173">配置"接收"主机在 BizTalk Server 组中每个 BizTalk Server 上运行并将每个主机实例配置为带有以下属性值的实例：</span><span class="sxs-lookup"><span data-stu-id="30a2e-173">Configure an instance of the “Receive” host to run on each BizTalk Server in the BizTalk Server group and configure each host instance with the following property values:</span></span>  
  
|<span data-ttu-id="30a2e-174">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-174">Property</span></span>|<span data-ttu-id="30a2e-175">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-175">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-176">主机名</span><span class="sxs-lookup"><span data-stu-id="30a2e-176">Host name</span></span>|<span data-ttu-id="30a2e-177">选择**RxHost**下拉列表中下一步**主机名**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-177">Select **RxHost** from the drop-down list next to **Host name**.</span></span>|  
|<span data-ttu-id="30a2e-178">Server</span><span class="sxs-lookup"><span data-stu-id="30a2e-178">Server</span></span>|<span data-ttu-id="30a2e-179">选择将运行此主机实例中的下拉列表旁边的 BizTalk 服务器**服务器**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-179">Select the BizTalk Server that will run this host instance from the drop-down list next to **Server**.</span></span>|  
|<span data-ttu-id="30a2e-180">登录</span><span class="sxs-lookup"><span data-stu-id="30a2e-180">Logon</span></span>|<span data-ttu-id="30a2e-181">1.单击**配置**按钮以显示**登录凭据**对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-181">1.  Click the **Configure** button to display the **Logon Credentials** dialog box.</span></span><br /><span data-ttu-id="30a2e-182">2.在**登录凭据**对话框中指定的属性中输入以下值：</span><span class="sxs-lookup"><span data-stu-id="30a2e-182">2.  In the **Logon Credentials** dialog box enter the following values for the specified properties:</span></span><br />     <span data-ttu-id="30a2e-183">**属性**</span><span class="sxs-lookup"><span data-stu-id="30a2e-183">**Property**</span></span><br />     <span data-ttu-id="30a2e-184">**登录**： 是与此 BizTalk Server 主机关联的 Windows 组的成员的用户帐户名称。</span><span class="sxs-lookup"><span data-stu-id="30a2e-184">**Logon**: Name of user account that is a member of the Windows group associated with this BizTalk Server host.</span></span><br />     <span data-ttu-id="30a2e-185">**密码**： 中指定的用户帐户的密码**登录**文本框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-185">**Password**: Password for the user account specified in the **Logon** textbox.</span></span><br /><span data-ttu-id="30a2e-186">3.单击**确定**以关闭登录凭据对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-186">3.  Click **OK** to close the Logon Credentials dialog box.</span></span>|  
|<span data-ttu-id="30a2e-187">禁止主机实例启动</span><span class="sxs-lookup"><span data-stu-id="30a2e-187">Disable host instance from starting</span></span>|<span data-ttu-id="30a2e-188">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-188">Ensure that this box is un-checked.</span></span>|  
  
 <span data-ttu-id="30a2e-189">创建主机实例之后, 的主机实例上右键单击并选择**启动**从上下文菜单。</span><span class="sxs-lookup"><span data-stu-id="30a2e-189">After creating the host instance, right-click on the host instance and select **Start** from the context menu.</span></span>  
  
### <a name="create-a-biztalk-server-receive-port"></a><span data-ttu-id="30a2e-190">创建 BizTalk Server 接收端口</span><span class="sxs-lookup"><span data-stu-id="30a2e-190">Create a BizTalk Server Receive Port</span></span>  
 <span data-ttu-id="30a2e-191">按照本主题中的步骤[如何创建接收端口](http://go.microsoft.com/fwlink/?LinkID=154843)(http://go.microsoft.com/fwlink/?LinkID=154843) BizTalk Server 文档，以创建单向接收端口中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-191">Follow the steps in the topic [How to Create a Receive Port](http://go.microsoft.com/fwlink/?LinkID=154843) (http://go.microsoft.com/fwlink/?LinkID=154843) in the BizTalk Server documentation to create a One-Way Receive Port.</span></span> <span data-ttu-id="30a2e-192">在创建时接收端口，将保留为默认值除外的所有属性下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="30a2e-192">When creating the Receive port, leave all properties at default values except as noted in the table below:</span></span>  
  
|<span data-ttu-id="30a2e-193">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-193">Property</span></span>|<span data-ttu-id="30a2e-194">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-194">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-195">General\Name</span><span class="sxs-lookup"><span data-stu-id="30a2e-195">General\Name</span></span>|<span data-ttu-id="30a2e-196">BTSLoadTestMessaging.OneWay.ReceivePort</span><span class="sxs-lookup"><span data-stu-id="30a2e-196">BTSLoadTestMessaging.OneWay.ReceivePort</span></span>|  
|<span data-ttu-id="30a2e-197">General\Port 类型</span><span class="sxs-lookup"><span data-stu-id="30a2e-197">General\Port Type</span></span>|<span data-ttu-id="30a2e-198">单向</span><span class="sxs-lookup"><span data-stu-id="30a2e-198">One-Way</span></span>|  
|<span data-ttu-id="30a2e-199">General\Authentication</span><span class="sxs-lookup"><span data-stu-id="30a2e-199">General\Authentication</span></span>|<span data-ttu-id="30a2e-200">不进行身份验证</span><span class="sxs-lookup"><span data-stu-id="30a2e-200">No authentication</span></span>|  
|<span data-ttu-id="30a2e-201">General\Enable 路由失败消息</span><span class="sxs-lookup"><span data-stu-id="30a2e-201">General\Enable routing for failed messages</span></span>|<span data-ttu-id="30a2e-202">确保未选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-202">Ensure that this box is un-checked.</span></span>|  
|<span data-ttu-id="30a2e-203">General\Description</span><span class="sxs-lookup"><span data-stu-id="30a2e-203">General\Description</span></span>|<span data-ttu-id="30a2e-204">将保留为空</span><span class="sxs-lookup"><span data-stu-id="30a2e-204">Leave blank</span></span>|  
|<span data-ttu-id="30a2e-205">入站映射</span><span class="sxs-lookup"><span data-stu-id="30a2e-205">Inbound Maps</span></span>|<span data-ttu-id="30a2e-206">无</span><span class="sxs-lookup"><span data-stu-id="30a2e-206">None</span></span>|  
|<span data-ttu-id="30a2e-207">跟踪</span><span class="sxs-lookup"><span data-stu-id="30a2e-207">Tracking</span></span>|<span data-ttu-id="30a2e-208">请确保所有框未选中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-208">Ensure that all boxes are un-checked.</span></span>|  
|<span data-ttu-id="30a2e-209">接收位置</span><span class="sxs-lookup"><span data-stu-id="30a2e-209">Receive Locations</span></span>|<span data-ttu-id="30a2e-210">单击**新建**，这将显示**接收位置属性**对话框中下一节中所述，应将其配置**创建 BizTalk 服务器接收位置**.</span><span class="sxs-lookup"><span data-stu-id="30a2e-210">Click **New**, this will display the **Receive Location Properties** dialog box which should be configured as described in the following section, **Create a BizTalk Server Receive Location**.</span></span>|  
  
### <a name="create-a-biztalk-server-receive-location"></a><span data-ttu-id="30a2e-211">创建 BizTalk Server 接收位置</span><span class="sxs-lookup"><span data-stu-id="30a2e-211">Create a BizTalk Server Receive Location</span></span>  
 <span data-ttu-id="30a2e-212">在**接收位置属性**对话框中显示创建 BizTalk Server 接收端口时，应用的指定的属性值：</span><span class="sxs-lookup"><span data-stu-id="30a2e-212">In the **Receive Location Properties** dialog box displayed while creating the BizTalk Server Receive port, apply the specified property values:</span></span>  
  
|<span data-ttu-id="30a2e-213">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-213">Property</span></span>|<span data-ttu-id="30a2e-214">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-214">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-215">名称：</span><span class="sxs-lookup"><span data-stu-id="30a2e-215">Name:</span></span>|<span data-ttu-id="30a2e-216">BTSLoadTest.Messaging.OneWay.WCF Customer.ReceiveLocation</span><span class="sxs-lookup"><span data-stu-id="30a2e-216">BTSLoadTest.Messaging.OneWay.WCF-Customer.ReceiveLocation</span></span>|  
|<span data-ttu-id="30a2e-217">接收处理程序：</span><span class="sxs-lookup"><span data-stu-id="30a2e-217">Receive handler:</span></span>|<span data-ttu-id="30a2e-218">RxHost</span><span class="sxs-lookup"><span data-stu-id="30a2e-218">RxHost</span></span>|  
|<span data-ttu-id="30a2e-219">接收管道：</span><span class="sxs-lookup"><span data-stu-id="30a2e-219">Receive pipeline:</span></span>|<span data-ttu-id="30a2e-220">PassThruReceive</span><span class="sxs-lookup"><span data-stu-id="30a2e-220">PassThruReceive</span></span>|  
|<span data-ttu-id="30a2e-221">说明:</span><span class="sxs-lookup"><span data-stu-id="30a2e-221">Description:</span></span>|<span data-ttu-id="30a2e-222">将其留空</span><span class="sxs-lookup"><span data-stu-id="30a2e-222">Leave this blank</span></span>|  
|<span data-ttu-id="30a2e-223">类型：</span><span class="sxs-lookup"><span data-stu-id="30a2e-223">Type:</span></span>|<span data-ttu-id="30a2e-224">选择**WCF 自定义**从下拉列表，然后单击**配置**按钮，这将显示**WCF 自定义传输属性**对话框中，它应该是配置中下一节所述**配置 WCF 自定义接收传输**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-224">Select **WCF-Custom** from the drop-down list and then click the **Configure** button, this will display the **WCF-Custom Transport Properties** dialog box which should be configured as described in the following section, **Configure the WCF-Custom Receive Transport**.</span></span>|  
  
### <a name="configure-the-wcf-custom-receive-transport"></a><span data-ttu-id="30a2e-225">配置 WCF 自定义接收传输</span><span class="sxs-lookup"><span data-stu-id="30a2e-225">Configure the WCF-Custom Receive Transport</span></span>  
 <span data-ttu-id="30a2e-226">在**WCF 自定义传输属性**对话框中显示创建 BizTalk Server 接收位置时，将所有属性都保留为默认值除外下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="30a2e-226">In the **WCF-Custom Transport Properties** dialog box displayed while creating the BizTalk Server Receive location, leave all properties at default values except as noted in the table below:</span></span>  
  
|<span data-ttu-id="30a2e-227">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-227">Property</span></span>|<span data-ttu-id="30a2e-228">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-228">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-229">General\Address (URI)</span><span class="sxs-lookup"><span data-stu-id="30a2e-229">General\Address (URI)</span></span>|<span data-ttu-id="30a2e-230">net.tcp: //localhost: 8123/btsloadtest</span><span class="sxs-lookup"><span data-stu-id="30a2e-230">net.tcp://localhost:8123/btsloadtest</span></span>|  
|<span data-ttu-id="30a2e-231">Binding\Binding 类型</span><span class="sxs-lookup"><span data-stu-id="30a2e-231">Binding\Binding Type</span></span>|<span data-ttu-id="30a2e-232">netTcpbinding</span><span class="sxs-lookup"><span data-stu-id="30a2e-232">netTcpbinding</span></span>|  
|<span data-ttu-id="30a2e-233">Binding\NetTcpBindingElement\listenBacklog</span><span class="sxs-lookup"><span data-stu-id="30a2e-233">Binding\NetTcpBindingElement\listenBacklog</span></span>|<span data-ttu-id="30a2e-234">400</span><span class="sxs-lookup"><span data-stu-id="30a2e-234">400</span></span>|  
|<span data-ttu-id="30a2e-235">Binding\NetTcpBindingElement\maxConnections</span><span class="sxs-lookup"><span data-stu-id="30a2e-235">Binding\NetTcpBindingElement\maxConnections</span></span>|<span data-ttu-id="30a2e-236">400</span><span class="sxs-lookup"><span data-stu-id="30a2e-236">400</span></span>|  
|<span data-ttu-id="30a2e-237">Binding\Security\NetTcpSecurityElement\mode</span><span class="sxs-lookup"><span data-stu-id="30a2e-237">Binding\Security\NetTcpSecurityElement\mode</span></span>|<span data-ttu-id="30a2e-238">无</span><span class="sxs-lookup"><span data-stu-id="30a2e-238">None</span></span>|  
|<span data-ttu-id="30a2e-239">Behavior\ServiceBehavior\serviceThrottling\ServiceThrottlingElement**注意：**将 serviceThrottling 行为添加到的行为，右键单击 ServiceBehavior 列表单击**添加扩展**，选择**serviceThrottling**从列表中的行为扩展，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-239">Behavior\ServiceBehavior\serviceThrottling\ServiceThrottlingElement **Note:**  To add the serviceThrottling behavior to the list of behaviors, right-click ServiceBehavior, click **Add Extension**, select **serviceThrottling** from the list of behavior extensions and then click **OK**.</span></span>|<span data-ttu-id="30a2e-240">设置**ServiceThrottlingElement**为以下值的属性：</span><span class="sxs-lookup"><span data-stu-id="30a2e-240">Set the **ServiceThrottlingElement** properties to the following values:</span></span><br /><br /> <span data-ttu-id="30a2e-241">-   **maxConcurrentCalls** 400</span><span class="sxs-lookup"><span data-stu-id="30a2e-241">-   **maxConcurrentCalls** 400</span></span><br /><span data-ttu-id="30a2e-242">-   **maxConcurrentInstances** 400</span><span class="sxs-lookup"><span data-stu-id="30a2e-242">-   **maxConcurrentInstances** 400</span></span><br /><span data-ttu-id="30a2e-243">-   **maxConcurrentSessions** 400</span><span class="sxs-lookup"><span data-stu-id="30a2e-243">-   **maxConcurrentSessions** 400</span></span>|  
|<span data-ttu-id="30a2e-244">Behavior\ServiceBehavior\serviceDebug\ServiceDebugElement**注意：**将 serviceDebug 行为添加到的行为，右键单击 ServiceBehavior 列表单击**添加扩展**，选择**serviceDebug**从列表中的行为扩展，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-244">Behavior\ServiceBehavior\serviceDebug\ServiceDebugElement **Note:**  To add the serviceDebug behavior to the list of behaviors, right-click ServiceBehavior, click **Add Extension**, select **serviceDebug** from the list of behavior extensions, and then click **OK**.</span></span>|<span data-ttu-id="30a2e-245">保留的列表**ServiceDebugElement**其默认值 （空） 除外的以下属性，其中应更改为 True 的值的属性：</span><span class="sxs-lookup"><span data-stu-id="30a2e-245">Leave the list of **ServiceDebugElement** properties at their default values (empty) except for the following properties, which should be changed to a value of True:</span></span><br /><br /> <span data-ttu-id="30a2e-246">-   **httpHelpPageEnabled** True</span><span class="sxs-lookup"><span data-stu-id="30a2e-246">-   **httpHelpPageEnabled** True</span></span><br /><span data-ttu-id="30a2e-247">-   **httpsHelpPageEnabled** True</span><span class="sxs-lookup"><span data-stu-id="30a2e-247">-   **httpsHelpPageEnabled** True</span></span><br /><span data-ttu-id="30a2e-248">-   **includeExceptionDetailInFaults** True</span><span class="sxs-lookup"><span data-stu-id="30a2e-248">-   **includeExceptionDetailInFaults** True</span></span>|  
  
 <span data-ttu-id="30a2e-249">单击**确定**若要关闭 WCF 自定义传输属性对话框中，然后单击**确定**以关闭接收位置属性对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-249">Click **OK** to close the WCF-Custom Transport Properties dialog box and then click **OK** again to close the Receive Location Properties dialog box.</span></span>  
  
### <a name="create-a-biztalk-server-send-port"></a><span data-ttu-id="30a2e-250">创建 BizTalk Server 发送端口</span><span class="sxs-lookup"><span data-stu-id="30a2e-250">Create a BizTalk Server Send Port</span></span>  
 <span data-ttu-id="30a2e-251">按照本主题中的步骤[如何创建发送端口](http://go.microsoft.com/fwlink/?LinkID=154845)(http://go.microsoft.com/fwlink/?LinkID=154845) 在 BizTalk Server 文档中用于创建**静态单向**发送端口。</span><span class="sxs-lookup"><span data-stu-id="30a2e-251">Follow the steps in the topic [How to Create a Send Port](http://go.microsoft.com/fwlink/?LinkID=154845) (http://go.microsoft.com/fwlink/?LinkID=154845) in the BizTalk Server documentation to create a **Static One-Way** Send Port.</span></span> <span data-ttu-id="30a2e-252">在创建时发送端口，将保留为默认值除外的所有属性下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="30a2e-252">When creating the Send port, leave all properties at default values except as noted in the table below:</span></span>  
  
|<span data-ttu-id="30a2e-253">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-253">Property</span></span>|<span data-ttu-id="30a2e-254">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-254">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-255">General\Name</span><span class="sxs-lookup"><span data-stu-id="30a2e-255">General\Name</span></span>|<span data-ttu-id="30a2e-256">BTSLoadTest.Messaging.Send.WCF 自定义</span><span class="sxs-lookup"><span data-stu-id="30a2e-256">BTSLoadTest.Messaging.Send.WCF-Custom</span></span>|  
|<span data-ttu-id="30a2e-257">General\Send 处理程序</span><span class="sxs-lookup"><span data-stu-id="30a2e-257">General\Send handler</span></span>|<span data-ttu-id="30a2e-258">TxHost</span><span class="sxs-lookup"><span data-stu-id="30a2e-258">TxHost</span></span>|  
|<span data-ttu-id="30a2e-259">General\Send 管道</span><span class="sxs-lookup"><span data-stu-id="30a2e-259">General\Send pipeline</span></span>|<span data-ttu-id="30a2e-260">PassThruTransmit</span><span class="sxs-lookup"><span data-stu-id="30a2e-260">PassThruTransmit</span></span>|  
|<span data-ttu-id="30a2e-261">Filters\Name</span><span class="sxs-lookup"><span data-stu-id="30a2e-261">Filters\Name</span></span>|<span data-ttu-id="30a2e-262">BTS.ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="30a2e-262">BTS.ReceivePortName</span></span>|  
|<span data-ttu-id="30a2e-263">Filters\Operator</span><span class="sxs-lookup"><span data-stu-id="30a2e-263">Filters\Operator</span></span>|==|  
|<span data-ttu-id="30a2e-264">Filters\Value</span><span class="sxs-lookup"><span data-stu-id="30a2e-264">Filters\Value</span></span>|<span data-ttu-id="30a2e-265">BTSLoadTest.Messaging.OneWay.ReceivePort</span><span class="sxs-lookup"><span data-stu-id="30a2e-265">BTSLoadTest.Messaging.OneWay.ReceivePort</span></span>|  
|<span data-ttu-id="30a2e-266">通过 Filters\Group</span><span class="sxs-lookup"><span data-stu-id="30a2e-266">Filters\Group by</span></span>|<span data-ttu-id="30a2e-267">和**注意：**这些属性配置为包含正确的值，如果筛选器应显示为`BTS.ReceivePortName == BTSLoadTest.Messaging.OneWay.ReceivePort`b 中的发送端口属性对话框的筛选器页的底部所示ox。</span><span class="sxs-lookup"><span data-stu-id="30a2e-267">And **Note:**  If these properties are configured with the correct values, the filter should be displayed as                                              `BTS.ReceivePortName == BTSLoadTest.Messaging.OneWay.ReceivePort` as seen toward the bottom of the Filters page of the Send Port Properties dialog box.</span></span> <span data-ttu-id="30a2e-268">由于应用此筛选器，此发送端口订阅接收 BizTalk Server 通过名为 BTSLoadTest.Messaging.OneWay.ReceivePort 的接收端口的任何消息。</span><span class="sxs-lookup"><span data-stu-id="30a2e-268">As a result of applying this filter, this Send port subscribes to any messages received by BizTalk Server via the Receive Port named BTSLoadTest.Messaging.OneWay.ReceivePort.</span></span>|  
|<span data-ttu-id="30a2e-269">跟踪</span><span class="sxs-lookup"><span data-stu-id="30a2e-269">Tracking</span></span>|<span data-ttu-id="30a2e-270">请确保所有框未选中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-270">Ensure that all boxes are un-checked.</span></span>|  
|<span data-ttu-id="30a2e-271">General\Type</span><span class="sxs-lookup"><span data-stu-id="30a2e-271">General\Type</span></span>|<span data-ttu-id="30a2e-272">选择**WCF 自定义**从下拉列表，然后单击**配置**按钮，这将显示**WCF 自定义传输属性**对话框中，它应该是配置中下一节所述**配置 WCF 自定义发送传输**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-272">Select **WCF-Custom** from the drop-down list and then click the **Configure** button, this will display the **WCF-Custom Transport Properties** dialog box which should be configured as described in the following section, **Configure the WCF-Custom Send Transport**.</span></span>|  
  
### <a name="configure-the-wcf-custom-send-transport"></a><span data-ttu-id="30a2e-273">配置 WCF 自定义发送传输</span><span class="sxs-lookup"><span data-stu-id="30a2e-273">Configure the WCF-Custom Send Transport</span></span>  
 <span data-ttu-id="30a2e-274">在**WCF 自定义传输属性**对话框中显示创建 BizTalk Server 发送端口时，将所有属性都保留为默认值除外下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="30a2e-274">In the **WCF-Custom Transport Properties** dialog box displayed while creating the BizTalk Server Send Port, leave all properties at default values except as noted in the table below:</span></span>  
  
|<span data-ttu-id="30a2e-275">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-275">Property</span></span>|<span data-ttu-id="30a2e-276">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-276">Value</span></span>|  
|--------------|-----------|  
|<span data-ttu-id="30a2e-277">General\Address (URI)</span><span class="sxs-lookup"><span data-stu-id="30a2e-277">General\Address (URI)</span></span>|<span data-ttu-id="30a2e-278">net.tcp://*\<计算机名称 >*: 2001年/TCP1**重要说明：***\<计算机名称 >*是使用的实际计算机名称的占位符以承载 IndigoService.exe，旨在使用通过 WCF 发送的消息。  </span><span class="sxs-lookup"><span data-stu-id="30a2e-278">net.tcp://*\<Computer Name>*:2001/TCP1 **Important:**  *\<Computer Name>* is a placeholder for the actual computer name used to host IndigoService.exe, which is designed to consume messages sent via WCF.</span></span> <span data-ttu-id="30a2e-279">由于 IndigoService.exe 需要很少的资源，它通常是完全可以接受用于 BizTalk Server 组数据库的 SQL Server 计算机上运行 IndigoService.exe。</span><span class="sxs-lookup"><span data-stu-id="30a2e-279">Because IndigoService.exe requires very little resources, it is often perfectly acceptable to run IndigoService.exe on the SQL Server computer used for the BizTalk Server group databases.</span></span> <span data-ttu-id="30a2e-280">IndigoService.exe 属于 BizTalk 基准向导中，位于[BizTalk 基准向导](http://go.microsoft.com/fwlink/?LinkID=186347)(http://go.microsoft.com/fwlink/?LinkID=186347)。</span><span class="sxs-lookup"><span data-stu-id="30a2e-280">IndigoService.exe is part of the BizTalk Benchmark Wizard, which is available at [BizTalk Benchmark Wizard](http://go.microsoft.com/fwlink/?LinkID=186347) (http://go.microsoft.com/fwlink/?LinkID=186347).</span></span>|  
|<span data-ttu-id="30a2e-281">Binding\Binding 类型</span><span class="sxs-lookup"><span data-stu-id="30a2e-281">Binding\Binding Type</span></span>|<span data-ttu-id="30a2e-282">**customBinding**</span><span class="sxs-lookup"><span data-stu-id="30a2e-282">**customBinding**</span></span>|  
  
 <span data-ttu-id="30a2e-283">与大多数 WCF 自定义绑定类型**customBinding**绑定类型公开多个属性，应设置为以下值：</span><span class="sxs-lookup"><span data-stu-id="30a2e-283">As with most of the WCF-Custom Binding Types, the **customBinding** Binding type exposes several properties, which should be set to the following values:</span></span>  
  
1.  <span data-ttu-id="30a2e-284">下**绑定**部分没有**CustomBindingElement**具有一个关联属性**配置**部分。</span><span class="sxs-lookup"><span data-stu-id="30a2e-284">Under the **Binding** section there is a **CustomBindingElement** property with an associated **Configuration** section.</span></span> <span data-ttu-id="30a2e-285">保留的所有值的配置部分中**CustomBindingElement**其默认值的属性。</span><span class="sxs-lookup"><span data-stu-id="30a2e-285">Leave all of the values in the Configuration section for the **CustomBindingElement** property at their default values.</span></span>  
  
2.  <span data-ttu-id="30a2e-286">然后在**CustomBindingElement**右键单击**textMessageEncoding**和选择**删除扩展 (Del)**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-286">Then under **CustomBindingElement** right-click **textMessageEncoding** and select **Remove extension (Del)**.</span></span> <span data-ttu-id="30a2e-287">同样，右键单击**httpTransport**和选择**删除扩展 (Del)**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-287">Likewise, right-click **httpTransport** and select **Remove extension (Del)**.</span></span>  
  
3.  <span data-ttu-id="30a2e-288">现在，右键单击**CustomBindingElement**和选择**添加扩展单元**以显示**选择绑定元素扩展**对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-288">Now right-click **CustomBindingElement** and select **Add extension Ins** to display the **Select Binding Element Extension** dialog box.</span></span>  
  
4.  <span data-ttu-id="30a2e-289">选择**binaryMessageEncoding**单击**确定**添加**binaryMessageEncoding**元素扩展。</span><span class="sxs-lookup"><span data-stu-id="30a2e-289">Select **binaryMessageEncoding** and click **OK** to add the **binaryMessageEncoding** element extension.</span></span> <span data-ttu-id="30a2e-290">重复步骤，以显示**选择绑定元素扩展**对话框框和滚动下级可用元素扩展的列表，直到你看到**tcpTransport**元素扩展，请选择**tcpTransport**单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-290">Repeat the steps to display the **Select Binding Element Extension** dialog box and scroll down the list of available element extensions until you see the **tcpTransport** element extension, select **tcpTransport** and click **OK**.</span></span>  
  
5.  <span data-ttu-id="30a2e-291">下**CustomBindingElement**选择**tcpTransport**元素和中的配置节**tcpTransport**，将所有属性都保留为默认值为除外下表所示：</span><span class="sxs-lookup"><span data-stu-id="30a2e-291">Under **CustomBindingElement** select the **tcpTransport** element and in the Configuration section for **tcpTransport**, leave all properties at default values except as noted in the following table:</span></span>  
  
    |<span data-ttu-id="30a2e-292">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-292">Property</span></span>|<span data-ttu-id="30a2e-293">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-293">Value</span></span>|  
    |--------------|-----------|  
    |<span data-ttu-id="30a2e-294">connectionBufferSize</span><span class="sxs-lookup"><span data-stu-id="30a2e-294">connectionBufferSize</span></span>|<span data-ttu-id="30a2e-295">2097152</span><span class="sxs-lookup"><span data-stu-id="30a2e-295">2097152</span></span>|  
    |<span data-ttu-id="30a2e-296">maxBufferSize</span><span class="sxs-lookup"><span data-stu-id="30a2e-296">maxBufferSize</span></span>|<span data-ttu-id="30a2e-297">2097152</span><span class="sxs-lookup"><span data-stu-id="30a2e-297">2097152</span></span>|  
    |<span data-ttu-id="30a2e-298">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="30a2e-298">maxPendingAccepts</span></span>|<span data-ttu-id="30a2e-299">400</span><span class="sxs-lookup"><span data-stu-id="30a2e-299">400</span></span>|  
    |<span data-ttu-id="30a2e-300">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="30a2e-300">maxPendingConnections</span></span>|<span data-ttu-id="30a2e-301">400</span><span class="sxs-lookup"><span data-stu-id="30a2e-301">400</span></span>|  
    |<span data-ttu-id="30a2e-302">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="30a2e-302">listenBacklog</span></span>|<span data-ttu-id="30a2e-303">400</span><span class="sxs-lookup"><span data-stu-id="30a2e-303">400</span></span>|  
    |<span data-ttu-id="30a2e-304">maxBufferPoolSize</span><span class="sxs-lookup"><span data-stu-id="30a2e-304">maxBufferPoolSize</span></span>|<span data-ttu-id="30a2e-305">2097152</span><span class="sxs-lookup"><span data-stu-id="30a2e-305">2097152</span></span>|  
    |<span data-ttu-id="30a2e-306">maxReceivedMessageSize</span><span class="sxs-lookup"><span data-stu-id="30a2e-306">maxReceivedMessageSize</span></span>|<span data-ttu-id="30a2e-307">2097152</span><span class="sxs-lookup"><span data-stu-id="30a2e-307">2097152</span></span>|  
  
6.  <span data-ttu-id="30a2e-308">下**tcpTransport**元素选择**ConnectionPoolSettings**元素，并保留在默认的所有属性都值除外**maxOutboundConnectionsPerEndpoint**属性，应更改为 400 的值。</span><span class="sxs-lookup"><span data-stu-id="30a2e-308">Under the **tcpTransport** element select the **ConnectionPoolSettings** element and leave all properties at default values except for the **maxOutboundConnectionsPerEndpoint** property, which should be changed to a value of 400.</span></span>  
  
7.  <span data-ttu-id="30a2e-309">单击**确定**若要关闭 WCF 自定义传输属性对话框中，然后单击**确定**以关闭 BTSLoadTest.Messaging.Send.WCF Custom-发送端口属性对话框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-309">Click **OK** to close the WCF-Custom Transport Properties dialog box, then click **OK** again to close the BTSLoadTest.Messaging.Send.WCF-Custom – Send Port Properties dialog box.</span></span>  
  
### <a name="configure-a-computer-to-consume-messages-sent-by-the-biztalk-server-send-port"></a><span data-ttu-id="30a2e-310">将计算机配置为使用由 BizTalk Server 发送端口发送消息</span><span class="sxs-lookup"><span data-stu-id="30a2e-310">Configure a Computer to Consume Messages Sent by the BizTalk Server Send Port</span></span>  
 <span data-ttu-id="30a2e-311">如前面所述，IndigoService.exe 旨在使用通过 WCF 发送的消息。</span><span class="sxs-lookup"><span data-stu-id="30a2e-311">As described earlier, the IndigoService.exe is designed to consume messages sent via WCF.</span></span> <span data-ttu-id="30a2e-312">IndigoService.exe 属于 BizTalk 基准向导中，位于[BizTalk 基准向导](http://go.microsoft.com/fwlink/?LinkID=186347)(http://go.microsoft.com/fwlink/?LinkID=186347)。</span><span class="sxs-lookup"><span data-stu-id="30a2e-312">IndigoService.exe is part of the BizTalk Benchmark Wizard, which is available at [BizTalk Benchmark Wizard](http://go.microsoft.com/fwlink/?LinkID=186347) (http://go.microsoft.com/fwlink/?LinkID=186347).</span></span> <span data-ttu-id="30a2e-313">设置和运行此示例的目的 IndigoService.exe 的最简单方法是只需下载中的 BizTalk 基准向导 zip 文件[BizTalk 基准向导下载页](http://go.microsoft.com/fwlink/?LinkID=209100)(http://go.microsoft.com/fwlink/?LinkID = 209100) 和提取到你想要运行 IndigoService.exe 的计算机上以下 4 个文件：</span><span class="sxs-lookup"><span data-stu-id="30a2e-313">The easiest way to set up and run IndigoService.exe for purposes of this example is to simply download the BizTalk Benchmark Wizard zip file from the [BizTalk BenchMark Wizard download page](http://go.microsoft.com/fwlink/?LinkID=209100) (http://go.microsoft.com/fwlink/?LinkID=209100) and extract the following 4 files onto the computer that you would like to run IndigoService.exe:</span></span>  
  
1.  <span data-ttu-id="30a2e-314">\IndigoService\bin\Release\IndigoService.exe</span><span class="sxs-lookup"><span data-stu-id="30a2e-314">\IndigoService\bin\Release\IndigoService.exe</span></span>  
  
2.  <span data-ttu-id="30a2e-315">\IndigoService\bin\Release\IndigoService.exe.config</span><span class="sxs-lookup"><span data-stu-id="30a2e-315">\IndigoService\bin\Release\IndigoService.exe.config</span></span>  
  
3.  <span data-ttu-id="30a2e-316">\IndigoService\bin\Release\Response.xml</span><span class="sxs-lookup"><span data-stu-id="30a2e-316">\IndigoService\bin\Release\Response.xml</span></span>  
  
4.  <span data-ttu-id="30a2e-317">\IndigoService\bin\Release\StartIndigoService.bat</span><span class="sxs-lookup"><span data-stu-id="30a2e-317">\IndigoService\bin\Release\StartIndigoService.bat</span></span>  
  
 <span data-ttu-id="30a2e-318">然后，通过双击 StartIndigoService.bat 启动 IndigoService.exe。</span><span class="sxs-lookup"><span data-stu-id="30a2e-318">Then, start IndigoService.exe by double-clicking on StartIndigoService.bat.</span></span> <span data-ttu-id="30a2e-319">IndigoService.exe 使用消息发送到 IndigoService.exe.config 文件中指定的终结点：</span><span class="sxs-lookup"><span data-stu-id="30a2e-319">IndigoService.exe consumes messages sent to the endpoint specified in the IndigoService.exe.config file:</span></span>  
  
 <span data-ttu-id="30a2e-320">\<终结点地址 ="net.tcp: //localhost: 2001年/TCP1"绑定 ="netTcpBinding"bindingConfiguration ="Binding1"名称 ="endpoint1"contract="IndigoService.IServiceTwoWaysVoidNonTransactional"/ ></span><span class="sxs-lookup"><span data-stu-id="30a2e-320">\<endpoint address="net.tcp://localhost:2001/TCP1"             binding="netTcpBinding"             bindingConfiguration="Binding1"             name="endpoint1"             contract="IndigoService.IServiceTwoWaysVoidNonTransactional" /></span></span>  
  
 <span data-ttu-id="30a2e-321">这就是为什么发送端口地址配置与地址 (URI) 的 net.tcp://*\<计算机名称 >*: 2001年/TCP1</span><span class="sxs-lookup"><span data-stu-id="30a2e-321">This is why the Send Port Address is configured with an Address (URI) of net.tcp://*\<Computer Name>*:2001/TCP1</span></span>  
  
 <span data-ttu-id="30a2e-322">由于 IndigoService.exe 需要很少的资源，它通常是完全可以接受用于 BizTalk Server 数据库的 SQL Server 计算机上运行 IndigoService.exe。</span><span class="sxs-lookup"><span data-stu-id="30a2e-322">Because IndigoService.exe requires very little resources, it is often perfectly acceptable to run IndigoService.exe on the SQL Server computer used for the BizTalk Server databases.</span></span>  
  
### <a name="disable-tracking-and-throttling-for-the-biztalk-server-group"></a><span data-ttu-id="30a2e-323">禁用跟踪和限制用于 BizTalk Server 组</span><span class="sxs-lookup"><span data-stu-id="30a2e-323">Disable Tracking and Throttling for the BizTalk Server Group</span></span>  
 <span data-ttu-id="30a2e-324">若要确定系统，这两个消息的绝对最大可持续吞吐量跟踪和带宽限制之前，应禁用开始负载测试。</span><span class="sxs-lookup"><span data-stu-id="30a2e-324">In order to determine the absolute maximum sustainable throughput of the system, both message Tracking and Throttling should be disabled before beginning load testing.</span></span> <span data-ttu-id="30a2e-325">这可以通过执行以下步骤中使用 BizTalk Server 管理控制台：</span><span class="sxs-lookup"><span data-stu-id="30a2e-325">This can be done using the BizTalk Server Administration console by following these steps:</span></span>  
  
1.  <span data-ttu-id="30a2e-326">启动 BizTalk Server 管理控制台。</span><span class="sxs-lookup"><span data-stu-id="30a2e-326">Launch the BizTalk Server Administration console.</span></span> <span data-ttu-id="30a2e-327">单击**启动**，指向**所有程序**，指向**BizTalk Server 2010** ，然后单击**BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-327">Click **Start**, point to **All Programs**, point to **BizTalk Server 2010** and then click **BizTalk Server Administration**.</span></span>  
  
2.  <span data-ttu-id="30a2e-328">下**BizTalk Server 管理**、 选择你的 BizTalk 组，如果它列出或如果未列出，请右键单击**BizTalk Server 管理**，选择**连接到现有组**，输入旁边保存 BizTalk 组的 BizTalk Server 管理数据库的 SQL Server 名称**SQL Server 名称：**，输入的 BizTalk 组的管理数据库名称旁边**数据库名称：** ，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-328">Under **BizTalk Server Administration**, select your BizTalk Group if it is listed or if it is not listed, right-click **BizTalk Server Administration**, select **Connect to Existing Group**, enter the SQL Server name that houses the BizTalk Group’s BizTalk Server Management database next to **SQL Server name:**, enter the name of the BizTalk Group’s management database name next to **Database name:** and then click **OK**.</span></span>  
  
3.  <span data-ttu-id="30a2e-329">右键单击 BizTalk 组节点并选择**设置**以显示**BizTalk 设置仪表板**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-329">Right-click the BizTalk Group node and select **Settings** to display the **BizTalk Settings Dashboard**.</span></span>  
  
4.  <span data-ttu-id="30a2e-330">单击以选择**主机**BizTalk 设置仪表板的左侧窗格中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-330">Click to select **Hosts** in the left hand pane of the BizTalk Settings Dashboard.</span></span>  
  
5.  <span data-ttu-id="30a2e-331">单击下拉列表中下一步**主机**选择其中一种将性能测试期间使用的主机。</span><span class="sxs-lookup"><span data-stu-id="30a2e-331">Click the dropdown list next to **Host** to select one of the hosts that will be used during performance testing.</span></span>  
  
6.  <span data-ttu-id="30a2e-332">将属性保留为其默认值除外下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="30a2e-332">Leave properties at their default values except as noted in the following table:</span></span>  
  
    |<span data-ttu-id="30a2e-333">属性</span><span class="sxs-lookup"><span data-stu-id="30a2e-333">Property</span></span>|<span data-ttu-id="30a2e-334">值</span><span class="sxs-lookup"><span data-stu-id="30a2e-334">Value</span></span>|  
    |--------------|-----------|  
    |<span data-ttu-id="30a2e-335">**General\Move 到 DTA DB 跟踪数据**</span><span class="sxs-lookup"><span data-stu-id="30a2e-335">**General\Move tracking data to DTA DB**</span></span>|<span data-ttu-id="30a2e-336">如果对其进行检查，取消选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-336">Uncheck this box if it is checked.</span></span>|  
    |<span data-ttu-id="30a2e-337">**仅 General\32 位**</span><span class="sxs-lookup"><span data-stu-id="30a2e-337">**General\32-bit only**</span></span>|<span data-ttu-id="30a2e-338">如果对其进行检查，取消选中此框。</span><span class="sxs-lookup"><span data-stu-id="30a2e-338">Uncheck this box if it is checked.</span></span>|  
    |<span data-ttu-id="30a2e-339">**General\Polling Intervals\Messaging**</span><span class="sxs-lookup"><span data-stu-id="30a2e-339">**General\Polling Intervals\Messaging**</span></span>|<span data-ttu-id="30a2e-340">设置为 20000000 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-340">Set to a value of 20000000</span></span>|  
    |<span data-ttu-id="30a2e-341">**General\Polling Intervals\Orchestrations**</span><span class="sxs-lookup"><span data-stu-id="30a2e-341">**General\Polling Intervals\Orchestrations**</span></span>|<span data-ttu-id="30a2e-342">设置为 20000000 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-342">Set to a value of 20000000</span></span>|  
    |<span data-ttu-id="30a2e-343">**基于资源的 Throttling\In 处理消息**</span><span class="sxs-lookup"><span data-stu-id="30a2e-343">**Resource-Based Throttling\In-process messages**</span></span>|<span data-ttu-id="30a2e-344">设置为 10000 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-344">Set to a value of 10000</span></span>|  
    |<span data-ttu-id="30a2e-345">**基于资源的 Throttling\Internal 消息队列大小**</span><span class="sxs-lookup"><span data-stu-id="30a2e-345">**Resource-Based Throttling\Internal message queue size**</span></span>|<span data-ttu-id="30a2e-346">设置为 10000 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-346">Set to a value of 10000</span></span>|  
    |<span data-ttu-id="30a2e-347">**在数据库中的基于资源的 Throttling\Message 计数**</span><span class="sxs-lookup"><span data-stu-id="30a2e-347">**Resource-Based Throttling\Message count in DB**</span></span>|<span data-ttu-id="30a2e-348">设置为 0 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-348">Set to a value of 0</span></span>|  
    |<span data-ttu-id="30a2e-349">**虚拟的基于资源的 Throttling\Memory Usage\Process**</span><span class="sxs-lookup"><span data-stu-id="30a2e-349">**Resource-Based Throttling\Memory Usage\Process virtual**</span></span>|<span data-ttu-id="30a2e-350">设置为 0 的值</span><span class="sxs-lookup"><span data-stu-id="30a2e-350">Set to a value of 0</span></span>|  
    |<span data-ttu-id="30a2e-351">**速率基于 Throttling\Publishing\Throttling 替代**</span><span class="sxs-lookup"><span data-stu-id="30a2e-351">**Rate-Based Throttling\Publishing\Throttling override**</span></span>|<span data-ttu-id="30a2e-352">设置为不限制</span><span class="sxs-lookup"><span data-stu-id="30a2e-352">Set to Do Not Throttle</span></span>|  
    |<span data-ttu-id="30a2e-353">**速率基于 Throttling\Delivery\Throttling 替代**</span><span class="sxs-lookup"><span data-stu-id="30a2e-353">**Rate-Based Throttling\Delivery\Throttling override**</span></span>|<span data-ttu-id="30a2e-354">设置为不限制</span><span class="sxs-lookup"><span data-stu-id="30a2e-354">Set to Do Not Throttle</span></span>|  
  
7.  <span data-ttu-id="30a2e-355">重复步骤 6 中所述过程的性能测试过程中将使用每个主机的过程。</span><span class="sxs-lookup"><span data-stu-id="30a2e-355">Repeat the process outlined in step 6 for every host that will be used during the course of performance testing.</span></span>  
  
8.  <span data-ttu-id="30a2e-356">单击以选择**主机实例**BizTalk 设置仪表板的左侧窗格中。</span><span class="sxs-lookup"><span data-stu-id="30a2e-356">Click to select **Host Instances** in the left hand pane of the BizTalk Settings Dashboard.</span></span>  
  
9. <span data-ttu-id="30a2e-357">单击下拉列表中下一步**主机实例：**若要选择将用于性能测试的主机实例之一。</span><span class="sxs-lookup"><span data-stu-id="30a2e-357">Click the dropdown list next to **Host Instance:** to select one of the host instances that will be used for performance testing.</span></span>  
  
10. <span data-ttu-id="30a2e-358">将属性值保留为其默认设置，除了更改**.NET CLR 最大工作线程**为值**100**和更改**.NET CLR 最小工作线程**到值**25**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-358">Leave property values at their default setting except change the **.NET CLR Maximum worker threads** to a value of **100** and change the **.NET CLR Minimum worker threads** to a value of **25**.</span></span>  
  
11. <span data-ttu-id="30a2e-359">重复此过程的性能测试过程中将使用每个主机实例的步骤 10 中所述的过程。</span><span class="sxs-lookup"><span data-stu-id="30a2e-359">Repeat the process outlined in step 10 for every host instance that will be used during the course of performance testing.</span></span>  
  
 <span data-ttu-id="30a2e-360">即使禁用跟踪和带宽限制确实不以任何方式表示应如何在生产方案中，因为这些操作可从性能角度最好先禁用它们以找出 true 最大可持续如此昂贵BizTalk Server 环境的吞吐量 (MST)。</span><span class="sxs-lookup"><span data-stu-id="30a2e-360">Even though disabling Tracking and Throttling does not in any way represent what should be done in a production scenario, because these operations are so expensive from a performance perspective it makes sense to disable them to find out the true Maximum Sustainable Throughput (MST) of a BizTalk Server Environment.</span></span> <span data-ttu-id="30a2e-361">这允许测试人员清楚地看出调整的任何性能的影响已应用到环境。</span><span class="sxs-lookup"><span data-stu-id="30a2e-361">This allows testers to clearly see the impact of any performance tweaking that has been applied to the environment.</span></span> <span data-ttu-id="30a2e-362">当然，不应禁用跟踪，如果你从一开始就知道你的 BizTalk Server 应用程序将需要跟踪然后应启用跟踪，则无法进行自变量。</span><span class="sxs-lookup"><span data-stu-id="30a2e-362">Certainly an argument could be made that tracking should not be disabled and if you know from the outset that your BizTalk Server application will require tracking then you should enable tracking.</span></span> <span data-ttu-id="30a2e-363">话虽如此，**应尽量将以禁用限制为进行性能测试**。</span><span class="sxs-lookup"><span data-stu-id="30a2e-363">With that said, **every effort should be made to disable throttling for purposes of performance testing**.</span></span> <span data-ttu-id="30a2e-364">限制将阻止 BizTalk Server 发生从"故障"因负载过大，在生产环境中非常有用。</span><span class="sxs-lookup"><span data-stu-id="30a2e-364">Throttling is very useful for preventing a BizTalk Server from “falling over” due to excessive load in a production environment.</span></span> <span data-ttu-id="30a2e-365">但是，你不希望限制启用性能测试，因为它将占用大量资源从性能角度来看，并且如果负载测试期间限制中的启动，则必须确定何种级别的性能很难时间期间你BizTalk Server 应用程序真的能实现。</span><span class="sxs-lookup"><span data-stu-id="30a2e-365">However, you don’t want throttling enabled during performance testing because it is expensive from a performance standpoint and because if throttling kicks in during a load test then you will have a very difficult time determining what level of performance your BizTalk Server application can actually achieve.</span></span> <span data-ttu-id="30a2e-366">下一步的主题介绍如何执行步骤负载测试，以便推送你的 BizTalk Server 环境超出 MST，然后规模缩减至实际 MST 使用常量负载测试。</span><span class="sxs-lookup"><span data-stu-id="30a2e-366">The next topics describe how to perform step load testing to push your BizTalk Server environment beyond MST and then scale back to actual MST with constant load testing.</span></span> <span data-ttu-id="30a2e-367">如果启用限制然后它将变得几乎不可能推送超出 MST BizTalk 环境，以便你可能会反过来发现哪些 MST 是 true。</span><span class="sxs-lookup"><span data-stu-id="30a2e-367">If throttling is enabled then it will become nearly impossible to push your BizTalk environment beyond MST so that you could in turn discover what the true MST is.</span></span>