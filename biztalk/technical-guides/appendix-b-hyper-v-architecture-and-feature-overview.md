---
title: "附录 b: HYPER-V 体系结构和功能概述 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 87b6b9a0-a470-43f7-b076-36075477cc34
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9e6282b6f5a5784b80d58a1a1737389ee23e01e2
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="appendix-b-hyper-v-architecture-and-feature-overview"></a><span data-ttu-id="6c2d6-102">附录 b: HYPER-V 体系结构和功能概述</span><span class="sxs-lookup"><span data-stu-id="6c2d6-102">Appendix B: Hyper-V Architecture and Feature Overview</span></span>
<span data-ttu-id="6c2d6-103">本主题提供了 HYPER-V 体系结构的概述，描述 HYPER-V 的优点和缺点。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-103">This topic provides an overview of Hyper-V architecture, describes advantages and disadvantages of Hyper-V.</span></span>  
  
## <a name="hyper-v-architecture"></a><span data-ttu-id="6c2d6-104">HYPER-V 体系结构</span><span class="sxs-lookup"><span data-stu-id="6c2d6-104">Hyper-V Architecture</span></span>  
  
 <span data-ttu-id="6c2d6-105">HYPER-V 是基于虚拟机监控程序的虚拟化平台和之一项使能技术[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]的先进功能，实时迁移。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-105">Hyper-V is a hypervisor-based virtualization platform and an enabling technology for one of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]’s marquee features, Live Migration.</span></span> <span data-ttu-id="6c2d6-106">与 HYPER-V 版本 1.0，Windows Server 2008 时能够快速迁移，无法使用仅为几秒钟的停机时间的物理主机之间移动虚拟机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-106">With Hyper-V version 1.0, Windows Server 2008 was capable of Quick Migration, which could move VMs between physical hosts with only a few seconds of down-time.</span></span> <span data-ttu-id="6c2d6-107">使用实时迁移，物理目标之间移动发生毫秒，这意味着迁移操作变得对连接的用户不可见。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-107">With Live Migration, moves between physical targets happen in millisecond, which means migration operations become invisible to connected users.</span></span> <span data-ttu-id="6c2d6-108">若要了解中新功能和改进[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]HYPER-V，请参阅[What's New in Windows Server 2008 R2 中 HYPER-V](http://go.microsoft.com/fwlink/?LinkID=202427)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-108">To find out new features and improvements in  [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V, see [What's New in Hyper-V in Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span></span>  
  
 <span data-ttu-id="6c2d6-109">虚拟机监控程序是特定于处理器的虚拟化平台，可以托管多个虚拟机 (Vm)，相互隔离，但通过虚拟化的处理器、 内存和输入/输出设备共享基础硬件资源。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-109">The hypervisor is the processor-specific virtualization platform that can host multiple virtual machines (VMs) that are isolated from each other but share the underlying hardware resources by virtualizing the processors, memory, and I/O devices.</span></span>  
  
 <span data-ttu-id="6c2d6-110">HYPER-V 虚拟机中运行的来宾操作系统提供性能接近在物理硬件上运行的操作系统性能*如果*必要的虚拟服务器客户端 (VSC) 驱动程序和服务来宾操作系统上安装。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-110">Guest operating systems running in a Hyper-V virtual machine provide performance approaching the performance of an operating system running on physical hardware *if* the necessary virtual server client (VSC) drivers and services are installed on the guest operating system.</span></span> <span data-ttu-id="6c2d6-111">HYPER-V 虚拟服务器客户端 (VSC) 代码，也称为 HYPER-V 启用 I/O，支持对 HYPER-V"虚拟机总线"直接访问以及可在安装了 HYPER-V 集成服务。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-111">Hyper-V virtual server client (VSC) code, also known as Hyper-V enlightened I/O, enables direct access to the Hyper-V “Virtual Machine Bus” and is available with the installation of Hyper-V integration services.</span></span> <span data-ttu-id="6c2d6-112">同时[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]和[!INCLUDE[btsWinVista](../includes/btswinvista-md.md)]支持 HYPER-V 启用 I/O 与 HYPER-V 集成服务。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-112">Both [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] and [!INCLUDE[btsWinVista](../includes/btswinvista-md.md)] support Hyper-V enlightened I/O with Hyper-V integration services.</span></span> <span data-ttu-id="6c2d6-113">提供 VSC 驱动程序的 HYPER-V 集成服务也已可用于其他客户端操作系统的系统。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-113">Hyper-V Integration services that provide VSC drivers are also available for other client operating systems.</span></span>  
  
 <span data-ttu-id="6c2d6-114">HYPER-V 支持按分区隔离。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-114">Hyper-V supports isolation in terms of a partition.</span></span> <span data-ttu-id="6c2d6-115">分区是隔离的由虚拟机监控程序，执行操作系统的支持的逻辑单元。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-115">A partition is a logical unit of isolation, supported by the hypervisor, in which operating systems execute.</span></span> <span data-ttu-id="6c2d6-116">Microsoft 虚拟机监控程序必须至少一个父级或根，分区，运行[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-116">The Microsoft hypervisor must have at least one parent, or root, partition, running [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="6c2d6-117">虚拟化堆栈在父分区中运行，并直接访问硬件设备。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-117">The virtualization stack runs in the parent partition and has direct access to the hardware devices.</span></span> <span data-ttu-id="6c2d6-118">然后，根分区创建子分区中的承载于来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-118">The root partition then creates the child partitions which host the guest operating systems.</span></span> <span data-ttu-id="6c2d6-119">根分区创建子分区使用 hypercall 应用程序编程接口 (API)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-119">A root partition creates child partitions using the hypercall application programming interface (API).</span></span>  
  
 <span data-ttu-id="6c2d6-120">分区的确可以访问物理处理器，也不它们处理处理器中断。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-120">Partitions do not have access to the physical processor, nor do they handle the processor interrupts.</span></span> <span data-ttu-id="6c2d6-121">相反，它们有一个虚拟处理器的视图，专用于每个来宾分区的虚拟内存地址区域中运行。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-121">Instead, they have a virtual view of the processor and run in a virtual memory address region that is private to each guest partition.</span></span> <span data-ttu-id="6c2d6-122">虚拟机监控程序处理对处理器的中断操作，并将他们重定向到相应的分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-122">The hypervisor handles the interrupts to the processor, and redirects them to the respective partition.</span></span> <span data-ttu-id="6c2d6-123">此外可以 HYPER-V 硬件加速的地址转换之间通过输入输出内存管理单元 (IOMMU) 进行操作独立于使用的 CPU 内存管理硬件的各种来宾虚拟地址空间。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-123">Hyper-V can also hardware accelerate the address translation between various guest virtual address spaces by using an Input Output Memory Management Unit (IOMMU) which operates independent of the memory management hardware used by the CPU.</span></span> <span data-ttu-id="6c2d6-124">IOMMU 用于重新映射到子分区都使用的地址的物理内存地址。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-124">An IOMMU is used to remap physical memory addresses to the addresses that are used by the child partitions.</span></span>  
  
 <span data-ttu-id="6c2d6-125">子分区也并不一定直接访问其他硬件资源的资源的虚拟视图显示为虚拟设备 (Vdev)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-125">Child partitions also do not have direct access to other hardware resources and are presented a virtual view of the resources, as virtual devices (VDevs).</span></span> <span data-ttu-id="6c2d6-126">通过 VMBus 或虚拟机监控程序在父分区中，处理请求的设备，则将重定向到虚拟设备的请求。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-126">Requests to the virtual devices are redirected either via the VMBus or the hypervisor to the devices in the parent partition, which handles the requests.</span></span> <span data-ttu-id="6c2d6-127">VMBus 是一个逻辑间分区通信通道。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-127">The VMBus is a logical inter-partition communication channel.</span></span> <span data-ttu-id="6c2d6-128">父分区承载虚拟化服务提供程序 (Vsp) 通过 VMBus 以处理来自子分区的设备访问请求进行通信。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-128">The parent partition hosts Virtualization Service Providers (VSPs) which communicate over the VMBus to handle device access requests from child partitions.</span></span> <span data-ttu-id="6c2d6-129">子分区承载虚拟化服务使用方 (Vsc) 将设备请求重定向到 Vsp 通过 VMBus 的父分区中。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-129">Child partitions host Virtualization Service Consumers (VSCs) which redirect device requests to VSPs in the parent partition via the VMBus.</span></span> <span data-ttu-id="6c2d6-130">此整个过程是透明的来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-130">This entire process is transparent to the guest operating system.</span></span>  
  
 <span data-ttu-id="6c2d6-131">虚拟设备还可以利用一个名为存储、 网络、 图形和输入的子系统的启用 I/O 的 Windows Server 虚拟化功能。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-131">Virtual Devices can also take advantage of a Windows Server Virtualization feature, named Enlightened I/O, for storage, networking, graphics, and input subsystems.</span></span> <span data-ttu-id="6c2d6-132">启用的 I/O 是利用 VMBus 直接，绕过任何设备仿真层的高级别的通信协议 （如 SCSI) 的专用的虚拟化感知实现。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-132">Enlightened I/O is a specialized virtualization-aware implementation of high level communication protocols (such as SCSI) that utilize the VMBus directly, bypassing any device emulation layer.</span></span> <span data-ttu-id="6c2d6-133">这使得通信更加有效，但需要是虚拟机监控程序和 VMBus 感知的启用的来宾。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-133">This makes the communication more efficient but requires an enlightened guest that is hypervisor and VMBus aware.</span></span> <span data-ttu-id="6c2d6-134">HYPER-V 启用 I/O 和虚拟机监控程序感知内核提供通过 HYPER-V integration services 的安装。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-134">Hyper-V enlightened I/O and a hypervisor aware kernel is provided via installation of Hyper-V integration services.</span></span> <span data-ttu-id="6c2d6-135">集成组件，包括虚拟服务器客户端 (VSC) 驱动程序，也是可用的其他客户端操作系统的系统。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-135">Integration components, which include virtual server client (VSC) drivers, are also available for other client operating systems.</span></span> <span data-ttu-id="6c2d6-136">HYPER-V 需要一个处理器，包括硬件辅助虚拟化，如提供具有 Intel VT 或 AMD 虚拟化 (AMD-V) 技术。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-136">Hyper-V requires a processor that includes hardware assisted virtualization, such as is provided with Intel VT or AMD Virtualization (AMD-V) technology.</span></span>  
  
 <span data-ttu-id="6c2d6-137">下图提供 Windows Server 2008 上运行的 HYPER-V 环境的体系结构的高级概述。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-137">The following diagram provides a high-level overview of the architecture of a Hyper-V environment running on Windows Server 2008.</span></span>  
  
 <span data-ttu-id="6c2d6-138">![Hyper &#45;V 体系结构概述](../technical-guides/media/eadd2a84-3936-4b48-a0e2-05b94882d848.gif "eadd2a84-3936-4b48-a0e2-05b94882d848")</span><span class="sxs-lookup"><span data-stu-id="6c2d6-138">![Hyper&#45;V architecture overview](../technical-guides/media/eadd2a84-3936-4b48-a0e2-05b94882d848.gif "eadd2a84-3936-4b48-a0e2-05b94882d848")</span></span>  
<span data-ttu-id="6c2d6-139">HYPER-V 体系结构的概述</span><span class="sxs-lookup"><span data-stu-id="6c2d6-139">Overview of Hyper-V architecture</span></span>  
  
 <span data-ttu-id="6c2d6-140">首字母缩略和上面的关系图中使用的术语如下所述：</span><span class="sxs-lookup"><span data-stu-id="6c2d6-140">Acronyms and terms used in the diagram above are described below:</span></span>  
  
-   <span data-ttu-id="6c2d6-141">**APIC** – 高级可编程中断控制器。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-141">**APIC** – Advanced Programmable Interrupt Controller.</span></span> <span data-ttu-id="6c2d6-142">将输出允许优先级级别分配给它的中断的设备。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-142">A device which allows priority levels to be assigned to its interrupt outputs.</span></span>  
  
-   <span data-ttu-id="6c2d6-143">**子分区**– 承载来宾操作系统的分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-143">**Child Partition** – Partition that hosts a guest operating system.</span></span> <span data-ttu-id="6c2d6-144">对物理内存和按子分区的设备的所有访问可通过虚拟机总线 (VMBus) 或虚拟机监控程序都提供。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-144">All access to physical memory and devices by a child partition is provided via the Virtual Machine Bus (VMBus) or the hypervisor.</span></span>  
  
-   <span data-ttu-id="6c2d6-145">**Hypercall** – 虚拟机监控程序与进行通信的接口。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-145">**Hypercall** – Interface for communication with the hypervisor.</span></span> <span data-ttu-id="6c2d6-146">Hypercall 接口还包含对提供的虚拟机监控程序的优化访问。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-146">The hypercall interface accommodates access to the optimizations provided by the hypervisor.</span></span>  
  
-   <span data-ttu-id="6c2d6-147">**虚拟机监控程序**– 一个位于之间的硬件要求和一个或多个操作系统的软件层。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-147">**Hypervisor** – A layer of software that sits between the hardware and one or more operating systems.</span></span> <span data-ttu-id="6c2d6-148">其主要任务是提供隔离的执行环境调用分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-148">Its primary job is to provide isolated execution environments called partitions.</span></span> <span data-ttu-id="6c2d6-149">虚拟机监控程序控制，并且仲裁访问基础硬件。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-149">The hypervisor controls and arbitrates access to the underlying hardware.</span></span>  
  
-   <span data-ttu-id="6c2d6-150">**IC** – 集成组件。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-150">**IC** – Integration component.</span></span> <span data-ttu-id="6c2d6-151">允许子分区移到与其他分区和虚拟机监控程序的通信的组件。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-151">Component that allows child partitions to communication with other partitions and the hypervisor.</span></span>  
  
-   <span data-ttu-id="6c2d6-152">**I/O 堆栈**– 输入/输出堆栈。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-152">**I/O stack** – Input/output stack.</span></span>  
  
-   <span data-ttu-id="6c2d6-153">**MSR** – 内存服务例程。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-153">**MSR** – Memory Service Routine.</span></span>  
  
-   <span data-ttu-id="6c2d6-154">**根分区**– 管理设备驱动程序、 电源管理和设备热添加/删除等的计算机级函数。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-154">**Root Partition** – Manages machine-level functions such as device drivers, power management, and device hot addition/removal.</span></span> <span data-ttu-id="6c2d6-155">根域 （或父） 分区是直接访问物理内存和设备的唯一分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-155">The root (or parent) partition is the only partition that has direct access to physical memory and devices.</span></span>  
  
-   <span data-ttu-id="6c2d6-156">**VID** – 虚拟化基础结构驱动程序。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-156">**VID** – Virtualization Infrastructure Driver.</span></span> <span data-ttu-id="6c2d6-157">提供分区管理服务、 虚拟处理器管理服务和内存管理服务的分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-157">Provides partition management services, virtual processor management services, and memory management services for partitions.</span></span>  
  
-   <span data-ttu-id="6c2d6-158">**VMBus** – 基于通道的通信机制，用于在具有多个活动的虚拟化分区系统上的分区间通信和设备枚举。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-158">**VMBus** – Channel-based communication mechanism used for inter-partition communication and device enumeration on systems with multiple active virtualized partitions.</span></span> <span data-ttu-id="6c2d6-159">与 HYPER-V 集成服务，并安装 VMBus。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-159">The VMBus is installed with Hyper-V Integration Services.</span></span>  
  
-   <span data-ttu-id="6c2d6-160">**VMMS** – 虚拟机管理服务。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-160">**VMMS** – Virtual Machine Management Service.</span></span> <span data-ttu-id="6c2d6-161">负责管理子分区中的所有虚拟机的状态。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-161">Responsible for managing the state of all virtual machines in child partitions.</span></span>  
  
-   <span data-ttu-id="6c2d6-162">**VMWP** – 虚拟机工作进程。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-162">**VMWP** – Virtual Machine Worker Process.</span></span> <span data-ttu-id="6c2d6-163">虚拟化堆栈某个用户模式组件。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-163">A user mode component of the virtualization stack.</span></span> <span data-ttu-id="6c2d6-164">工作进程提供从虚拟机管理服务[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]在父分区中的子分区的来宾操作系统的实例。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-164">The worker process provides virtual machine management services from the [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] instance in the parent partition to the guest operating systems in the child partitions.</span></span> <span data-ttu-id="6c2d6-165">虚拟机管理服务生成每个正在运行的虚拟机的单独的辅助进程。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-165">The Virtual Machine Management Service spawns a separate worker process for each running virtual machine.</span></span>  
  
-   <span data-ttu-id="6c2d6-166">**VSC** – 虚拟化服务客户端。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-166">**VSC** – Virtualization Service Client.</span></span> <span data-ttu-id="6c2d6-167">合成设备实例，该实例驻留在子分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-167">A synthetic device instance that resides in a child partition.</span></span> <span data-ttu-id="6c2d6-168">Vsc 利用提供的虚拟化服务提供程序 (Vsp) 父分区中的硬件资源。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-168">VSCs utilize hardware resources that are provided by Virtualization Service Providers (VSPs) in the parent partition.</span></span> <span data-ttu-id="6c2d6-169">它们通过与通信在父分区相应 Vsp VMBus 以满足子分区设备 I/O 请求。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-169">They communicate with the corresponding VSPs in the parent partition over the VMBus to satisfy a child partitions device I/O requests.</span></span>  
  
-   <span data-ttu-id="6c2d6-170">**VSP** – 虚拟化服务提供程序。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-170">**VSP** – Virtualization Service Provider.</span></span> <span data-ttu-id="6c2d6-171">驻留在根分区中，虚拟机总线 (VMBus) 通过提供综合设备支持添加到子分区。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-171">Resides in the root partition and provide synthetic device support to child partitions over the Virtual Machine Bus (VMBus).</span></span>  
  
-   <span data-ttu-id="6c2d6-172">**WinHv** – Windows 虚拟机监控程序接口库。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-172">**WinHv** – Windows Hypervisor Interface Library.</span></span> <span data-ttu-id="6c2d6-173">WinHv 是实质上是分区的操作系统的驱动程序和虚拟机监控程序这样驱动程序以调用虚拟机监控程序使用标准 Windows 调用约定之间的桥梁</span><span class="sxs-lookup"><span data-stu-id="6c2d6-173">WinHv is essentially a bridge between a partitioned operating system’s drivers and the hypervisor which allows drivers to call the hypervisor using standard Windows calling conventions</span></span>  
  
-   <span data-ttu-id="6c2d6-174">**WMI** – 虚拟机管理服务公开一组基于 Windows Management Instrumentation WMI Api 来管理和控制虚拟机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-174">**WMI** – The Virtual Machine Management Service exposes a set of Windows Management Instrumentation (WMI)-based APIs for managing and controlling virtual machines.</span></span>  
  
 <span data-ttu-id="6c2d6-175">在中定义其中的大多数术语[Glossary8](../technical-guides/glossary8.md)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-175">Most of these terms are defined in the [Glossary8](../technical-guides/glossary8.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6c2d6-176">有关详细信息[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]HYPER-V，请参阅[http://go.microsoft.com/fwlink/?LinkID=121187](http://go.microsoft.com/fwlink/?LinkID=121187)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-176">For more information about [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=121187](http://go.microsoft.com/fwlink/?LinkID=121187).</span></span>  
  
## <a name="advantages-of-hyper-v"></a><span data-ttu-id="6c2d6-177">Hyper V 的优点</span><span class="sxs-lookup"><span data-stu-id="6c2d6-177">Advantages of Hyper-V</span></span>  
 <span data-ttu-id="6c2d6-178">在 HYPER-V 虚拟化环境中运行企业级解决方案的优点包括：</span><span class="sxs-lookup"><span data-stu-id="6c2d6-178">The advantages of running enterprise-level solutions in a Hyper-V virtualized environment include the following:</span></span>  
  
1.  <span data-ttu-id="6c2d6-179">**硬件资源合并**-多个物理服务器可轻松地合并到相对较少服务器通过实现与 HYPER-V 虚拟化。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-179">**Consolidation of hardware resources** - Multiple physical servers can be easily consolidated into comparatively fewer servers by implementing virtualization with Hyper-V.</span></span> <span data-ttu-id="6c2d6-180">合并能够适应充分利用已部署的硬件资源。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-180">Consolidation accommodates full use of deployed hardware resources.</span></span> <span data-ttu-id="6c2d6-181">Windows Server 2008 R2 中 HYPER-V 现在可以访问的主机计算机上的最多为 64 逻辑 Cpu。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-181">Hyper-V in Windows Server 2008 R2 can now access up to 64 logical CPUs on host computers.</span></span> <span data-ttu-id="6c2d6-182">此功能不仅充分利用新的多核系统，它还意味着更高的虚拟机整合率，每个物理主机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-182">This capability not only takes advantage of new multicore systems, it also means greater virtual machine consolidation ratios per physical host.</span></span>  
  
2.  <span data-ttu-id="6c2d6-183">**易管理性**:</span><span class="sxs-lookup"><span data-stu-id="6c2d6-183">**Ease of administration**:</span></span>  
  
    -   <span data-ttu-id="6c2d6-184">合并的资源的集中，可以简化管理。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-184">Consolidation and centralization of resources simplifies administration.</span></span>  
  
    -   <span data-ttu-id="6c2d6-185">向上缩放和向外的扩展的实现被容纳多更易于使用。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-185">Implementation of scale-up and scale out is accommodated with much greater ease.</span></span>  
  
3.  <span data-ttu-id="6c2d6-186">**有效方面可节省成本**:</span><span class="sxs-lookup"><span data-stu-id="6c2d6-186">**Significant cost savings**:</span></span>  
  
    -   <span data-ttu-id="6c2d6-187">显著降低硬件成本，因为多个虚拟机可以在单个物理计算机上运行，因此，不需要为每台计算机单独的物理计算机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-187">Hardware costs are significantly reduced because multiple virtual machines can run on a single physical machine, therefore, a separate physical machine is not required for every computer.</span></span>  
  
    -   <span data-ttu-id="6c2d6-188">HYPER-V 许可成本所含的许可成本[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-188">Hyper-V licensing costs are included with the license cost of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="6c2d6-189">此外可以用作独立的产品，可以安装在购买 HYPER-V[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]服务器核心。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-189">Hyper-V can also be purchased for use as a stand-alone product that can be installed on [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Server Core.</span></span>  
  
    -   <span data-ttu-id="6c2d6-190">通过将合并到虚拟化 HYPER-V 环境由于减少了物理硬件"占用空间"的现有应用程序，可能会显著降低 power 要求所需。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-190">Power requirements may be significantly reduced by consolidating existing applications onto a virtualized Hyper-V environment due to the reduced physical hardware “footprint” that is required.</span></span>  
  
4.  <span data-ttu-id="6c2d6-191">**错误通过 HYPER-V 群集的容差支持**– 因为 HYPER-V 是群集感知应用程序，[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]提供本机主机群集在 HYPER-V 虚拟化环境中创建的虚拟机的支持。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-191">**Fault tolerance support through Hyper-V clustering** – Because Hyper-V is a cluster aware application, [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] provides native host clustering support for virtual machines created in a Hyper-V virtualized environment.</span></span>  
  
5.  <span data-ttu-id="6c2d6-192">**易于部署和管理**:</span><span class="sxs-lookup"><span data-stu-id="6c2d6-192">**Ease of deployment and management**:</span></span>  
  
    -   <span data-ttu-id="6c2d6-193">现有服务器合并到较少的物理服务器可以简化部署。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-193">Consolidation of existing servers into fewer physical servers simplifies deployment.</span></span>  
  
    -   <span data-ttu-id="6c2d6-194">与 System Center Virtual Machine Manager 中提供了全面的 HYPER-V 管理解决方案。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-194">A comprehensive Hyper-V management solution is available with System Center Virtual Machine Manager.</span></span> <span data-ttu-id="6c2d6-195">有关 System Center Virtual Machine Manager 的详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=111303](http://go.microsoft.com/fwlink/?LinkID=111303)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-195">For more information about System Center Virtual Machine Manager, see [http://go.microsoft.com/fwlink/?LinkID=111303](http://go.microsoft.com/fwlink/?LinkID=111303).</span></span>  
  
6.  <span data-ttu-id="6c2d6-196">**密钥 HYPER-V 性能特征**:</span><span class="sxs-lookup"><span data-stu-id="6c2d6-196">**Key Hyper-V performance characteristics**:</span></span>  
  
    -   <span data-ttu-id="6c2d6-197">**共享体系结构的改进的硬件**-Hyper V 提供提高访问权限和核心资源，例如磁盘、 网络、 利用率和视频时运行来宾操作系统的系统的虚拟机监控程序感知内核和配有必备项的虚拟服务器客户端 (VSC) 代码 （称为 HYPER-V 启用 I/O）。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-197">**Improved hardware sharing architecture** - Hyper-V provides improved access and utilization of core resources, such as disk, networking, and video when running guest operating systems with a hypervisor-aware kernel and which are equipped with requisite virtual server client (VSC) code (known as Hyper-V enlightened I/O).</span></span> <span data-ttu-id="6c2d6-198">启蒙为以减少某些操作系统功能，例如内存管理成本对操作系统所做的增强功能。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-198">Enlightenments are enhancements made to the operating system to help reduce the cost of certain operating system functions like memory management.</span></span> <span data-ttu-id="6c2d6-199">目前，同时[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]和[!INCLUDE[btsWinVista](../includes/btswinvista-md.md)]支持 HYPER-V 启用 I/O 和虚拟机监控程序感知内核通过 HYPER-V integration services 的安装。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-199">Presently, both [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] and [!INCLUDE[btsWinVista](../includes/btswinvista-md.md)] support Hyper-V enlightened I/O and a hypervisor aware kernel via installation of Hyper-V integration services.</span></span> <span data-ttu-id="6c2d6-200">集成组件，包括 VSC 驱动程序，也是可用的其他客户端操作系统的系统。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-200">Integration components, which include VSC drivers, are also available for other client operating systems.</span></span>  
  
         <span data-ttu-id="6c2d6-201">磁盘性能至关重要的磁盘 I/O 密集型企业应用程序，如 Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和除了 HYPER-V 启用 I/O;HYPER-V 提供的"传递"磁盘支持，从而提供可与物理磁盘性能相媲美的磁盘性能。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-201">Disk performance is critical for disk I/O intensive enterprise applications such as Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and in addition to Hyper-V enlightened I/O; Hyper-V provides “Passthrough” disk support which provides disk performance on par with physical disk performance.</span></span> <span data-ttu-id="6c2d6-202">请注意"传递"磁盘支持，提供改进的性能，以较小的成本，为方便起见。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-202">Note that “Passthrough” disk support provides improved performance at a small cost to convenience.</span></span> <span data-ttu-id="6c2d6-203">"传递"的磁盘是实质上是物理磁盘/Lun，它们附加到虚拟机并不支持某些功能的虚拟磁盘，例如虚拟机快照。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-203">“Passthrough” disks are essentially physical disks/LUNs that are attached to a virtual machine and do not support some of the functionality of virtual disks, such as Virtual Machine Snapshots.</span></span>  
  
    -   <span data-ttu-id="6c2d6-204">**处理器硬件辅助虚拟化支持**– HYPER-V 充分利用适用于最新的处理器技术的处理器硬件辅助虚拟化支持。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-204">**Processor hardware-assisted virtualization support** – Hyper-V takes full advantage of processor hardware assisted virtualization support that is available with recent processor technology.</span></span>  
  
    -   <span data-ttu-id="6c2d6-205">**多核 (SMP) 来宾操作系统支持**– HYPER-V 提供了在虚拟机环境中，它允许应用程序中的虚拟充分利用多线程处理功能支持最多四个处理器的能力机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-205">**Multi-core (SMP) guest operating system support** – Hyper-V provides the ability to support up to four processors in a virtual machine environment, which allows applications to take full advantage of multi-threading functionality in a virtual machine.</span></span>  
  
    -   <span data-ttu-id="6c2d6-206">**32 位和 64 位来宾操作系统支持**– HYPER-V 提供广泛支持同时运行的不同类型的操作系统，包括跨不同的服务器平台，例如 Windows 的 32 位和 64 位系统Linux®，和其他人。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-206">**Both 32-bit and 64-bit guest operating system support** – Hyper-V provides broad support for simultaneously running different types of operating systems, including 32-bit and 64-bit systems across different server platforms, such as Windows, Linux®, and others.</span></span>  
  
7.  <span data-ttu-id="6c2d6-207">**经验证的跟踪记录**-密钥 Microsoft Web 站点 MSDN ([http://msdn.microsoft.com](http://go.microsoft.com/fwlink/?LinkId=122019)) 和 TechNet ([http://technet.microsoft.com](http://go.microsoft.com/fwlink/?LinkID=64380)) 在 HYPER-V 环境中托管。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-207">**Proven track record** - Key Microsoft Web sites MSDN ([http://msdn.microsoft.com](http://go.microsoft.com/fwlink/?LinkId=122019)) and TechNet ([http://technet.microsoft.com](http://go.microsoft.com/fwlink/?LinkID=64380)) are hosted in Hyper-V environments.</span></span>  
  
8.  <span data-ttu-id="6c2d6-208">**全面的产品支持**– Microsoft Microsoft 企业应用程序 （例如 Exchange Server 和 SQL Server） 进行完全测试在 HYPER-V 中运行，因为已部署和运行在 HYPER-V 中时在这些应用程序提供了代码修复支持环境。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-208">**Comprehensive product support** – Because Microsoft enterprise applications (such as Exchange Server and SQL Server) are fully tested running in Hyper-V, Microsoft provides code fix support for these applications when deployed and run in a Hyper-V environment.</span></span>  
  
9. <span data-ttu-id="6c2d6-209">**可伸缩性**– 其他处理电源、 网络带宽和存储容量，可以快速轻松地通过实现分派到来宾虚拟机从主计算机的其他可用资源。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-209">**Scalability** – Additional processing power, network bandwidth, and storage capacity can be accomplished quickly and easily by apportioning additional available resources from the host computer to the guest virtual machine(s).</span></span> <span data-ttu-id="6c2d6-210">这可能需要升级主机或来宾虚拟机在移动到功能更强大的主机计算机。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-210">This may require that the host computer is upgraded or that the guest virtual machines are moved to a more capable host computer.</span></span>  
  
 <span data-ttu-id="6c2d6-211">有关详细信息的有关的好处的利用随 HYPER-V 一起提供的虚拟化技术的深入信息，请参阅[虚拟化优势](http://go.microsoft.com/fwlink/?LinkID=202419)的[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-211">For more in depth information about the benefits of leveraging virtualization technology provided with Hyper-V, see    [Virtualization Benefits](http://go.microsoft.com/fwlink/?LinkID=202419) of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span>  
  
## <a name="disadvantages-of-hyper-v"></a><span data-ttu-id="6c2d6-212">Hyper V 的缺点</span><span class="sxs-lookup"><span data-stu-id="6c2d6-212">Disadvantages of Hyper-V</span></span>  
 <span data-ttu-id="6c2d6-213">在 HYPER-V 虚拟化环境中运行企业级解决方案的一些缺点可能包括：</span><span class="sxs-lookup"><span data-stu-id="6c2d6-213">Some disadvantages of running enterprise-level solutions in a Hyper-V virtualized environment may include:</span></span>  
  
-   <span data-ttu-id="6c2d6-214">**硬件要求 –**由于服务器合并的需求，HYPER-V 虚拟机倾向于使用更多的 CPU 和内存，并且需要更大的磁盘 I/O 带宽比具有可比较的计算负载的物理服务器。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-214">**Hardware requirements –** Due to the demands of server consolidation, Hyper-V virtual machines tend to consume more CPU and memory, and require greater disk I/O bandwidth than physical servers with comparable computing loads.</span></span> <span data-ttu-id="6c2d6-215">由于 HYPER-V 服务器角色可用的仅为 64 位和所有版本的 Windows Server 2008 R2 只有 64 位物理硬件必须支持硬件辅助虚拟化。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-215">Because the Hyper-V server role is only available for 64-bit and all editions of Windows Server 2008 R2 are 64-bit only, the physical hardware must support hardware assisted virtualization.</span></span> <span data-ttu-id="6c2d6-216">这意味着必须是具有 Intel VT 或 AMD 虚拟化 (AMD-V) 技术兼容的处理器、 系统 BIOS 必须支持数据执行保护 (DEP)，并且必须支持 DEP。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-216">This means the processor must be compatible with Intel VT or AMD Virtualization (AMD-V) technology, the system BIOS must support Data Execution Prevention (DEP), and DEP must be enabled.</span></span>  
  
-   <span data-ttu-id="6c2d6-217">**软件要求 –**尽管大多数 Microsoft 软件支持 HYPER-V 虚拟机上运行，某些 Microsoft 软件正在仍然正在进行测试以确保与 HYPER-V 虚拟化环境的兼容性。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-217">**Software requirements –** While most Microsoft software is supported running on Hyper-V virtual machines, some Microsoft software is still in the process of being tested to ensure compatibility with a Hyper-V virtualized environment.</span></span> <span data-ttu-id="6c2d6-218">例如，大多数 Microsoft 企业级应用程序支持在 HYPER-V 上运行或正在要测试其 HYPER-V 上的支持。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-218">For example, most Microsoft enterprise level applications either support running on Hyper-V or are in the process of being tested for support on Hyper-V.</span></span> <span data-ttu-id="6c2d6-219">所有版本的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]由于[!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)]支持在 HYPER-V 上运行。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-219">All versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] since [!INCLUDE[btsBizTalkServer2004](../includes/btsbiztalkserver2004-md.md)] are supported running on Hyper-V.</span></span> <span data-ttu-id="6c2d6-220">有关详细信息的可支持性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]上 HYPER-V，请参阅[附录 c: BizTalk Server 和 SQL Server HYPER-V 可支持性](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)。</span><span class="sxs-lookup"><span data-stu-id="6c2d6-220">For more information on the supportability of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] on Hyper-V, see [Appendix C: BizTalk Server and SQL Server Hyper-V Supportability](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span></span>