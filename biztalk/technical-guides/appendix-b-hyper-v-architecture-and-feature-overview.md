---
title: 附录 B：HYPER-V 体系结构和功能概述 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 87b6b9a0-a470-43f7-b076-36075477cc34
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bfd53cf4ef318c3f1e6858b32b57177026aa4248
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65401370"
---
# <a name="appendix-b-hyper-v-architecture-and-feature-overview"></a><span data-ttu-id="9ae8c-102">附录 B：HYPER-V 体系结构和功能概述</span><span class="sxs-lookup"><span data-stu-id="9ae8c-102">Appendix B: Hyper-V Architecture and Feature Overview</span></span>
<span data-ttu-id="9ae8c-103">本主题提供了 HYPER-V 体系结构的概述，描述了 HYPER-V 的优点和缺点。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-103">This topic provides an overview of Hyper-V architecture, describes advantages and disadvantages of Hyper-V.</span></span>  
  
## <a name="hyper-v-architecture"></a><span data-ttu-id="9ae8c-104">HYPER-V 体系结构</span><span class="sxs-lookup"><span data-stu-id="9ae8c-104">Hyper-V Architecture</span></span>  
  
 <span data-ttu-id="9ae8c-105">HYPER-V 是基于虚拟机监控程序的虚拟化平台和技术可一个 Windows Server 的先进功能，实时迁移。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-105">Hyper-V is a hypervisor-based virtualization platform and an enabling technology for one of Windows Server’s marquee features, Live Migration.</span></span> <span data-ttu-id="9ae8c-106">使用 HYPER-V，Windows Server 是能够快速迁移，可以使用仅在几秒钟的停机时间的物理主机之间移动 Vm。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-106">With Hyper-V, Windows Server is capable of Quick Migration, which could move VMs between physical hosts with only a few seconds of down-time.</span></span> <span data-ttu-id="9ae8c-107">通过实时迁移物理目标之间移动发生毫秒，这意味着迁移操作变得对已连接的用户不可见。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-107">With Live Migration, moves between physical targets happen in millisecond, which means migration operations become invisible to connected users.</span></span> <span data-ttu-id="9ae8c-108">请参阅[什么是 Windows Server 上的 HYPER-V 中的新增功能](https://docs.microsoft.com/windows-server/virtualization/hyper-v/what-s-new-in-hyper-v-on-windows)。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-108">See [What's new in Hyper-V on Windows Server](https://docs.microsoft.com/windows-server/virtualization/hyper-v/what-s-new-in-hyper-v-on-windows).</span></span>
  
 <span data-ttu-id="9ae8c-109">虚拟机监控程序是特定于处理器的虚拟化平台，可以托管多个虚拟机 (Vm) 的相互隔离的但通过虚拟化的处理器、 内存和 I/O 设备共享的基础硬件资源。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-109">The hypervisor is the processor-specific virtualization platform that can host multiple virtual machines (VMs) that are isolated from each other but share the underlying hardware resources by virtualizing the processors, memory, and I/O devices.</span></span>  
  
 <span data-ttu-id="9ae8c-110">HYPER-V 虚拟机中运行的来宾操作系统提供性能接近物理硬件上运行的操作系统性能*如果*必要的虚拟服务器客户端 (VSC) 驱动程序和服务安装来宾操作系统上。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-110">Guest operating systems running in a Hyper-V virtual machine provide performance approaching the performance of an operating system running on physical hardware *if* the necessary virtual server client (VSC) drivers and services are installed on the guest operating system.</span></span> <span data-ttu-id="9ae8c-111">HYPER-V 虚拟服务器客户端 (VSC) 代码，也称为 HYPER-V 启用 I/O、 可直接访问 HYPER-V"虚拟机总线"，可在安装了 HYPER-V 集成服务。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-111">Hyper-V virtual server client (VSC) code, also known as Hyper-V enlightened I/O, enables direct access to the Hyper-V “Virtual Machine Bus” and is available with the installation of Hyper-V integration services.</span></span> <span data-ttu-id="9ae8c-112">提供 VSC 驱动程序的 HYPER-V 集成服务也已可供其他客户端操作系统。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-112">Hyper-V Integration services that provide VSC drivers are also available for other client operating systems.</span></span>  
  
 <span data-ttu-id="9ae8c-113">HYPER-V 支持在一个分区方面的隔离。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-113">Hyper-V supports isolation in terms of a partition.</span></span> <span data-ttu-id="9ae8c-114">分区是隔离的通过虚拟机监控程序，在其中执行操作系统支持的逻辑单元。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-114">A partition is a logical unit of isolation, supported by the hypervisor, in which operating systems execute.</span></span> <span data-ttu-id="9ae8c-115">Microsoft 虚拟机监控程序必须具有至少一个父级，即根分区中，运行 Windows Server。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-115">The Microsoft hypervisor must have at least one parent, or root, partition, running Windows Server.</span></span> <span data-ttu-id="9ae8c-116">虚拟化堆栈在父分区中运行，并直接访问硬件设备。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-116">The virtualization stack runs in the parent partition and has direct access to the hardware devices.</span></span> <span data-ttu-id="9ae8c-117">然后，根分区创建子分区承载的来宾操作系统的。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-117">The root partition then creates the child partitions which host the guest operating systems.</span></span> <span data-ttu-id="9ae8c-118">根分区创建子分区使用 hypercall 应用程序编程接口 (API)。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-118">A root partition creates child partitions using the hypercall application programming interface (API).</span></span>  
  
 <span data-ttu-id="9ae8c-119">分区不能访问到物理处理器，也请务必处理处理器中断。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-119">Partitions do not have access to the physical processor, nor do they handle the processor interrupts.</span></span> <span data-ttu-id="9ae8c-120">相反，它们有一个虚拟处理器的视图，专用于每个来宾分区的虚拟内存地址区域中运行。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-120">Instead, they have a virtual view of the processor and run in a virtual memory address region that is private to each guest partition.</span></span> <span data-ttu-id="9ae8c-121">虚拟机监控程序处理中断处理器，并将它们重定向到相应的分区。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-121">The hypervisor handles the interrupts to the processor, and redirects them to the respective partition.</span></span> <span data-ttu-id="9ae8c-122">HYPER-V 还可以通过使用输入输出内存管理单元 (IOMMU) 进行操作独立于使用的 CPU 的内存管理硬件的各种来宾虚拟地址空间之间硬件加速的地址转换。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-122">Hyper-V can also hardware accelerate the address translation between various guest virtual address spaces by using an Input Output Memory Management Unit (IOMMU) which operates independent of the memory management hardware used by the CPU.</span></span> <span data-ttu-id="9ae8c-123">IOMMU 用于重新映射到的地址的子分区都使用的物理内存地址。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-123">An IOMMU is used to remap physical memory addresses to the addresses that are used by the child partitions.</span></span>  
  
 <span data-ttu-id="9ae8c-124">子分区也不具有直接访问其他硬件资源，并将表示为虚拟设备 (Vdev) 的资源的虚拟视图。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-124">Child partitions also do not have direct access to other hardware resources and are presented a virtual view of the resources, as virtual devices (VDevs).</span></span> <span data-ttu-id="9ae8c-125">通过 VMBus 或虚拟机监控程序为父分区，处理的请求中的设备，则将重定向到虚拟设备的请求。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-125">Requests to the virtual devices are redirected either via the VMBus or the hypervisor to the devices in the parent partition, which handles the requests.</span></span> <span data-ttu-id="9ae8c-126">VMBus 是逻辑内分区通信通道。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-126">The VMBus is a logical inter-partition communication channel.</span></span> <span data-ttu-id="9ae8c-127">父分区托管虚拟化服务提供商 (Vsp) 通过 VMBus 以处理来自子分区的设备访问请求进行通信。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-127">The parent partition hosts Virtualization Service Providers (VSPs) which communicate over the VMBus to handle device access requests from child partitions.</span></span> <span data-ttu-id="9ae8c-128">子分区托管虚拟化服务使用者 (Vsc) 将设备请求重定向到 Vsp VMBus 通过父分区中。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-128">Child partitions host Virtualization Service Consumers (VSCs) which redirect device requests to VSPs in the parent partition via the VMBus.</span></span> <span data-ttu-id="9ae8c-129">整个过程是透明的来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-129">This entire process is transparent to the guest operating system.</span></span>  
  
 <span data-ttu-id="9ae8c-130">虚拟设备还可以利用 Windows Server 虚拟化功能，启用 I/O 命名的存储、 网络、 图形和输入的子系统。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-130">Virtual Devices can also take advantage of a Windows Server Virtualization feature, named Enlightened I/O, for storage, networking, graphics, and input subsystems.</span></span> <span data-ttu-id="9ae8c-131">已启用的 I/O 是利用 VMBus 直接绕过任何设备仿真层的高级别的通信协议 （如 SCSI) 的专用虚拟化感知实现。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-131">Enlightened I/O is a specialized virtualization-aware implementation of high level communication protocols (such as SCSI) that utilize the VMBus directly, bypassing any device emulation layer.</span></span> <span data-ttu-id="9ae8c-132">这使通信更高效，但需要为虚拟机监控程序和 VMBus 注意已启用的来宾。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-132">This makes the communication more efficient but requires an enlightened guest that is hypervisor and VMBus aware.</span></span> <span data-ttu-id="9ae8c-133">HYPER-V 启用 I/O 和虚拟机监控程序注意内核提供通过 HYPER-V integration services 的安装。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-133">Hyper-V enlightened I/O and a hypervisor aware kernel is provided via installation of Hyper-V integration services.</span></span> <span data-ttu-id="9ae8c-134">集成组件，其中包括虚拟服务器客户端 (VSC) 驱动程序，也已可供其他客户端操作系统。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-134">Integration components, which include virtual server client (VSC) drivers, are also available for other client operating systems.</span></span> <span data-ttu-id="9ae8c-135">HYPER-V 需要硬件辅助虚拟化，包括如一个处理器提供与 Intel VT 或 AMD 虚拟化 (AMD-V) 技术。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-135">Hyper-V requires a processor that includes hardware assisted virtualization, such as is provided with Intel VT or AMD Virtualization (AMD-V) technology.</span></span>  
  
 <span data-ttu-id="9ae8c-136">下图提供了 Windows Server 上运行的 HYPER-V 环境的体系结构的高级概述。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-136">The following diagram provides a high-level overview of the architecture of a Hyper-V environment running on Windows Server.</span></span>  
  
 <span data-ttu-id="9ae8c-137">![Hyper&#45;V 体系结构概述](../technical-guides/media/eadd2a84-3936-4b48-a0e2-05b94882d848.gif "eadd2a84-3936-4b48-a0e2-05b94882d848")</span><span class="sxs-lookup"><span data-stu-id="9ae8c-137">![Hyper&#45;V architecture overview](../technical-guides/media/eadd2a84-3936-4b48-a0e2-05b94882d848.gif "eadd2a84-3936-4b48-a0e2-05b94882d848")</span></span>  

  
 <span data-ttu-id="9ae8c-138">首字母缩写词和上面的关系图中使用的术语如下所述：</span><span class="sxs-lookup"><span data-stu-id="9ae8c-138">Acronyms and terms used in the diagram above are described below:</span></span>  
  
- <span data-ttu-id="9ae8c-139">**APIC** – 高级可编程中断控制器。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-139">**APIC** – Advanced Programmable Interrupt Controller.</span></span> <span data-ttu-id="9ae8c-140">允许优先级别分配给它的中断的设备输出。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-140">A device which allows priority levels to be assigned to its interrupt outputs.</span></span>  
  
- <span data-ttu-id="9ae8c-141">**子分区**– 承载来宾操作系统的分区。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-141">**Child Partition** – Partition that hosts a guest operating system.</span></span> <span data-ttu-id="9ae8c-142">通过虚拟机总线 (VMBus) 或虚拟机监控程序提供对物理内存和通过子分区的设备的所有访问。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-142">All access to physical memory and devices by a child partition is provided via the Virtual Machine Bus (VMBus) or the hypervisor.</span></span>  
  
- <span data-ttu-id="9ae8c-143">**Hypercall** – 与虚拟机监控程序进行通信的接口。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-143">**Hypercall** – Interface for communication with the hypervisor.</span></span> <span data-ttu-id="9ae8c-144">Hypercall 接口还包含对提供的虚拟机监控程序的优化访问。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-144">The hypercall interface accommodates access to the optimizations provided by the hypervisor.</span></span>  
  
- <span data-ttu-id="9ae8c-145">**虚拟机监控程序**– 位于硬件和一个或多个操作系统之间的软件层。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-145">**Hypervisor** – A layer of software that sits between the hardware and one or more operating systems.</span></span> <span data-ttu-id="9ae8c-146">其主要工作是提供名为分区的独立的执行环境。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-146">Its primary job is to provide isolated execution environments called partitions.</span></span> <span data-ttu-id="9ae8c-147">虚拟机监控程序控制并进行仲裁对基础硬件的访问。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-147">The hypervisor controls and arbitrates access to the underlying hardware.</span></span>  
  
- <span data-ttu-id="9ae8c-148">**IC** – 集成组件。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-148">**IC** – Integration component.</span></span> <span data-ttu-id="9ae8c-149">允许子分区移到与其他分区和虚拟机监控程序进行通信的组件。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-149">Component that allows child partitions to communication with other partitions and the hypervisor.</span></span>  
  
- <span data-ttu-id="9ae8c-150">**I/O 堆栈**– 输入/输出堆栈。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-150">**I/O stack** – Input/output stack.</span></span>  
  
- <span data-ttu-id="9ae8c-151">**MSR** – 内存服务例程。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-151">**MSR** – Memory Service Routine.</span></span>  
  
- <span data-ttu-id="9ae8c-152">**根分区**– 管理计算机级别的功能，如设备驱动程序、 电源管理和设备热添加/删除。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-152">**Root Partition** – Manages machine-level functions such as device drivers, power management, and device hot addition/removal.</span></span> <span data-ttu-id="9ae8c-153">根 （或父） 分区是直接访问物理内存和设备的唯一分区。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-153">The root (or parent) partition is the only partition that has direct access to physical memory and devices.</span></span>  
  
- <span data-ttu-id="9ae8c-154">**VID** – 虚拟化基础结构驱动程序。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-154">**VID** – Virtualization Infrastructure Driver.</span></span> <span data-ttu-id="9ae8c-155">提供分区管理服务、 虚拟处理器管理服务和内存管理服务的分区。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-155">Provides partition management services, virtual processor management services, and memory management services for partitions.</span></span>  
  
- <span data-ttu-id="9ae8c-156">**VMBus** – 基于通道的通信机制，用于具有多个活动的虚拟化分区的系统上的分区间通信和设备枚举。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-156">**VMBus** – Channel-based communication mechanism used for inter-partition communication and device enumeration on systems with multiple active virtualized partitions.</span></span> <span data-ttu-id="9ae8c-157">VMBus 随 HYPER-V 集成服务。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-157">The VMBus is installed with Hyper-V Integration Services.</span></span>  
  
- <span data-ttu-id="9ae8c-158">**VMMS** – 虚拟机管理服务。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-158">**VMMS** – Virtual Machine Management Service.</span></span> <span data-ttu-id="9ae8c-159">负责管理子分区中的所有虚拟机的状态。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-159">Responsible for managing the state of all virtual machines in child partitions.</span></span>  
  
- <span data-ttu-id="9ae8c-160">**VMWP** – 虚拟机工作进程。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-160">**VMWP** – Virtual Machine Worker Process.</span></span> <span data-ttu-id="9ae8c-161">虚拟化堆栈的一个用户模式组件。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-161">A user mode component of the virtualization stack.</span></span> <span data-ttu-id="9ae8c-162">工作进程提供了从父分区中的 Windows Server 实例的子分区中的来宾操作系统的虚拟机管理服务。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-162">The worker process provides virtual machine management services from the Windows Server instance in the parent partition to the guest operating systems in the child partitions.</span></span> <span data-ttu-id="9ae8c-163">虚拟机管理服务生成每个正在运行的虚拟机的单独的工作的进程。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-163">The Virtual Machine Management Service spawns a separate worker process for each running virtual machine.</span></span>  
  
- <span data-ttu-id="9ae8c-164">**VSC** – 虚拟化服务客户端。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-164">**VSC** – Virtualization Service Client.</span></span> <span data-ttu-id="9ae8c-165">合成设备实例驻留在子分区中。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-165">A synthetic device instance that resides in a child partition.</span></span> <span data-ttu-id="9ae8c-166">Vsc 利用虚拟化服务提供商 (Vsp) 父分区中提供的硬件资源。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-166">VSCs utilize hardware resources that are provided by Virtualization Service Providers (VSPs) in the parent partition.</span></span> <span data-ttu-id="9ae8c-167">它们通过与通信在父分区中相应的 Vsp VMBus 满足子分区设备 I/O 请求。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-167">They communicate with the corresponding VSPs in the parent partition over the VMBus to satisfy a child partitions device I/O requests.</span></span>  
  
- <span data-ttu-id="9ae8c-168">**VSP** – 虚拟化服务提供程序。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-168">**VSP** – Virtualization Service Provider.</span></span> <span data-ttu-id="9ae8c-169">驻留在根分区中，虚拟机总线 (VMBus) 通过提供综合设备支持添加到子分区。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-169">Resides in the root partition and provide synthetic device support to child partitions over the Virtual Machine Bus (VMBus).</span></span>  
  
- <span data-ttu-id="9ae8c-170">**WinHv** – Windows 虚拟机监控程序接口库。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-170">**WinHv** – Windows Hypervisor Interface Library.</span></span> <span data-ttu-id="9ae8c-171">WinHv 是实质上是已分区的操作系统的驱动程序和虚拟机监控程序允许驱动程序，以调用使用标准 Windows 调用约定的虚拟机监控程序之间的桥梁</span><span class="sxs-lookup"><span data-stu-id="9ae8c-171">WinHv is essentially a bridge between a partitioned operating system’s drivers and the hypervisor which allows drivers to call the hypervisor using standard Windows calling conventions</span></span>  
  
- <span data-ttu-id="9ae8c-172">**WMI** – 虚拟机管理服务公开一组基于 Windows Management Instrumentation WMI 的 Api 提供用于管理和控制虚拟机。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-172">**WMI** – The Virtual Machine Management Service exposes a set of Windows Management Instrumentation (WMI)-based APIs for managing and controlling virtual machines.</span></span>  
  
  <span data-ttu-id="9ae8c-173">其中大多数术语中定义[术语表](../technical-guides/glossary8.md)。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-173">Most of these terms are defined in the [Glossary](../technical-guides/glossary8.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9ae8c-174">[HYPER-V 技术概述](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview)是一个好资源。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-174">[Hyper-V Technology Overview](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview) is a good resource.</span></span> 
  
## <a name="advantages"></a><span data-ttu-id="9ae8c-175">优点</span><span class="sxs-lookup"><span data-stu-id="9ae8c-175">Advantages</span></span>
 <span data-ttu-id="9ae8c-176">在 HYPER-V 虚拟化环境中运行企业级解决方案的优点包括：</span><span class="sxs-lookup"><span data-stu-id="9ae8c-176">The advantages of running enterprise-level solutions in a Hyper-V virtualized environment include the following:</span></span>  
  
1. <span data-ttu-id="9ae8c-177">**硬件资源的整合**-多个物理服务器可以轻松地整合到相对较少的服务器通过实现使用的 HYPER-V 虚拟化。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-177">**Consolidation of hardware resources** - Multiple physical servers can be easily consolidated into comparatively fewer servers by implementing virtualization with Hyper-V.</span></span> <span data-ttu-id="9ae8c-178">合并适合于已部署的硬件资源利用。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-178">Consolidation accommodates full use of deployed hardware resources.</span></span> <span data-ttu-id="9ae8c-179">Windows Server 中的 HYPER-V 可以访问主计算机上的最多 64 个逻辑 Cpu。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-179">Hyper-V in Windows Server can access up to 64 logical CPUs on host computers.</span></span> <span data-ttu-id="9ae8c-180">此功能不仅能充分利用新的多核系统，这也意味着更高版本中每台物理主机的虚拟机的整合率。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-180">This capability not only takes advantage of new multicore systems, it also means greater virtual machine consolidation ratios per physical host.</span></span>  
  
2. <span data-ttu-id="9ae8c-181">**易管理性**:</span><span class="sxs-lookup"><span data-stu-id="9ae8c-181">**Ease of administration**:</span></span>  
  
   -   <span data-ttu-id="9ae8c-182">合并和集中管理的资源可简化管理。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-182">Consolidation and centralization of resources simplifies administration.</span></span>  
  
   -   <span data-ttu-id="9ae8c-183">实现纵向和横向扩展实现对多更容易。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-183">Implementation of scale-up and scale out is accommodated with much greater ease.</span></span>  
  
3. <span data-ttu-id="9ae8c-184">**节约成本的有效**:</span><span class="sxs-lookup"><span data-stu-id="9ae8c-184">**Significant cost savings**:</span></span>  
  
   -   <span data-ttu-id="9ae8c-185">因为一台物理计算机上运行多个虚拟机，可以显著减少了硬件成本，因此，不需要对每台计算机单独的物理计算机。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-185">Hardware costs are significantly reduced because multiple virtual machines can run on a single physical machine, therefore, a separate physical machine is not required for every computer.</span></span>  
  
   -   <span data-ttu-id="9ae8c-186">HYPER-V 的许可费用可能随 Windows Server 许可证成本，还可作为独立产品购买。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-186">Hyper-V licensing costs may be included with the license cost of Windows Server, and may also be purchased as a stand-alone product.</span></span>
  
   -   <span data-ttu-id="9ae8c-187">通过将合并到由于减少了物理硬件"占用空间"的虚拟化的 HYPER-V 环境上的现有应用程序，可能会显著降低电源要求所需。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-187">Power requirements may be significantly reduced by consolidating existing applications onto a virtualized Hyper-V environment due to the reduced physical hardware “footprint” that is required.</span></span>  
  
4. <span data-ttu-id="9ae8c-188">**错误通过 HYPER-V 群集的容错支持**– 因为 HYPER-V 是群集感知应用程序、 Windows Server 提供了本机主机群集的 HYPER-V 虚拟化环境中创建的虚拟机的支持。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-188">**Fault tolerance support through Hyper-V clustering** – Because Hyper-V is a cluster aware application, Windows Server provides native host clustering support for virtual machines created in a Hyper-V virtualized environment.</span></span>  
  
5. <span data-ttu-id="9ae8c-189">**易于部署和管理**:</span><span class="sxs-lookup"><span data-stu-id="9ae8c-189">**Ease of deployment and management**:</span></span>  
  
   -   <span data-ttu-id="9ae8c-190">现有的服务器整合到更少的物理服务器简化了部署。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-190">Consolidation of existing servers into fewer physical servers simplifies deployment.</span></span>  
  
   -   <span data-ttu-id="9ae8c-191">全面的 HYPER-V 管理解决方案，提供与 System Center Virtual Machine Manager。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-191">A comprehensive Hyper-V management solution is available with System Center Virtual Machine Manager.</span></span> <span data-ttu-id="9ae8c-192">[在 System Center VMM 的新增](https://docs.microsoft.com/system-center/vmm/whats-new?view=sc-vmm-2016)提供一些指导。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-192">[What's new in VMM in System Center](https://docs.microsoft.com/system-center/vmm/whats-new?view=sc-vmm-2016) provides some guidance.</span></span>
  
6. <span data-ttu-id="9ae8c-193">**密钥的 HYPER-V 的性能特征**:</span><span class="sxs-lookup"><span data-stu-id="9ae8c-193">**Key Hyper-V performance characteristics**:</span></span>  
  
   -   <span data-ttu-id="9ae8c-194">**改进了的硬件共享体系结构**-Hyper V 提供改进的访问和核心资源，如磁盘、 网络、 利用率和视频时运行来宾操作系统的系统识别虚拟机监控程序的内核和其配备了必备项的虚拟服务器 （称为 HYPER-V 启用 I/O） 的客户端 (VSC) 代码。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-194">**Improved hardware sharing architecture** - Hyper-V provides improved access and utilization of core resources, such as disk, networking, and video when running guest operating systems with a hypervisor-aware kernel and which are equipped with requisite virtual server client (VSC) code (known as Hyper-V enlightened I/O).</span></span> <span data-ttu-id="9ae8c-195">启发方法是以帮助降低某些操作系统功能，例如内存管理的成本对操作系统所做的增强功能。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-195">Enlightenments are enhancements made to the operating system to help reduce the cost of certain operating system functions like memory management.</span></span> <span data-ttu-id="9ae8c-196">集成组件，其中包括 VSC 驱动程序，也已可供其他客户端操作系统。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-196">Integration components, which include VSC drivers, are also available for other client operating systems.</span></span>  
  
        <span data-ttu-id="9ae8c-197">磁盘性能至关重要的磁盘 I/O 密集型企业应用程序如 Microsoft BizTalk Server 和 HYPER-V 除了启用 I/O;HYPER-V 提供了"传递"的磁盘支持，从而可以提供与物理磁盘性能相媲美的磁盘性能。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-197">Disk performance is critical for disk I/O intensive enterprise applications such as Microsoft BizTalk Server and in addition to Hyper-V enlightened I/O; Hyper-V provides “Passthrough” disk support which provides disk performance on par with physical disk performance.</span></span> <span data-ttu-id="9ae8c-198">请注意"传递"的磁盘支持，提供改进的性能，在较小的成本为方便起见。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-198">Note that “Passthrough” disk support provides improved performance at a small cost to convenience.</span></span> <span data-ttu-id="9ae8c-199">"传递"磁盘是实质上是物理磁盘/Lun 附加到虚拟机且不支持的某些功能的虚拟磁盘，例如虚拟机快照。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-199">“Passthrough” disks are essentially physical disks/LUNs that are attached to a virtual machine and do not support some of the functionality of virtual disks, such as Virtual Machine Snapshots.</span></span>  
  
   -   <span data-ttu-id="9ae8c-200">**处理器硬件辅助虚拟化支持**– HYPER-V 利用完整的处理器提供最新处理器技术使用硬件辅助虚拟化支持。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-200">**Processor hardware-assisted virtualization support** – Hyper-V takes full advantage of processor hardware assisted virtualization support that is available with recent processor technology.</span></span>  
  
   -   <span data-ttu-id="9ae8c-201">**多核 (SMP) 来宾操作系统支持**– HYPER-V 提供了在虚拟机环境中，它允许应用程序以充分利用多线程处理功能在虚拟机支持最多四个处理器的能力计算机。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-201">**Multi-core (SMP) guest operating system support** – Hyper-V provides the ability to support up to four processors in a virtual machine environment, which allows applications to take full advantage of multi-threading functionality in a virtual machine.</span></span>  
  
   -   <span data-ttu-id="9ae8c-202">**32 位和 64 位来宾操作系统支持**– HYPER-V 的同时运行的不同类型的操作系统，在不同服务器平台，如 Windows，包括 32 位和 64 位系统提供广泛的支持Linux®，和其他人。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-202">**Both 32-bit and 64-bit guest operating system support** – Hyper-V provides broad support for simultaneously running different types of operating systems, including 32-bit and 64-bit systems across different server platforms, such as Windows, Linux®, and others.</span></span>  
  
7. <span data-ttu-id="9ae8c-203">**全面的产品支持**– 已部署并运行的 HYPER-V 中时，Microsoft 完全在 HYPER-V 中运行测试 （如 Exchange Server 和 SQL Server） 的 Microsoft 企业应用程序，因为提供这些应用程序的代码修补程序支持环境。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-203">**Comprehensive product support** – Because Microsoft enterprise applications (such as Exchange Server and SQL Server) are fully tested running in Hyper-V, Microsoft provides code fix support for these applications when deployed and run in a Hyper-V environment.</span></span>  
  
8. <span data-ttu-id="9ae8c-204">**可伸缩性**– 额外处理能力、 网络带宽和存储容量，可以快速轻松地通过实现分派到来宾虚拟机从主计算机的其他可用资源。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-204">**Scalability** – Additional processing power, network bandwidth, and storage capacity can be accomplished quickly and easily by apportioning additional available resources from the host computer to the guest virtual machine(s).</span></span> <span data-ttu-id="9ae8c-205">这可能需要升级主计算机或来宾虚拟机在移动到功能更强大的主机计算机。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-205">This may require that the host computer is upgraded or that the guest virtual machines are moved to a more capable host computer.</span></span>  
  
   <span data-ttu-id="9ae8c-206">有关在利用虚拟化技术随 HYPER-V 一起提供的好处的深度信息的详细信息，请参阅[HYPER-V 技术概述](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview)。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-206">For more in depth information about the benefits of leveraging virtualization technology provided with Hyper-V, see the [Hyper-V Technology Overview](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview).</span></span> 
  
## <a name="disadvantages"></a><span data-ttu-id="9ae8c-207">缺点</span><span class="sxs-lookup"><span data-stu-id="9ae8c-207">Disadvantages</span></span>
 <span data-ttu-id="9ae8c-208">在 HYPER-V 虚拟化环境中运行企业级解决方案的缺点可能包括：</span><span class="sxs-lookup"><span data-stu-id="9ae8c-208">Some disadvantages of running enterprise-level solutions in a Hyper-V virtualized environment may include:</span></span>  
  
-   <span data-ttu-id="9ae8c-209">**硬件要求-** 因服务器合并的需求，而 HYPER-V 虚拟机往往会占用更多 CPU 和内存，并且需要更大的磁盘 I/O 带宽比可比较的计算负载的物理服务器。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-209">**Hardware requirements –** Due to the demands of server consolidation, Hyper-V virtual machines tend to consume more CPU and memory, and require greater disk I/O bandwidth than physical servers with comparable computing loads.</span></span> <span data-ttu-id="9ae8c-210">对于 64 位和所有版本的 Windows Server 仅 64 位的 HYPER-V 服务器角色才可用，因为物理硬件必须支持硬件辅助虚拟化。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-210">Because the Hyper-V server role is only available for 64-bit and all editions of Windows Server are 64-bit only, the physical hardware must support hardware assisted virtualization.</span></span> <span data-ttu-id="9ae8c-211">这意味着必须是与 Intel VT 或 AMD 虚拟化 (AMD-V) 技术兼容的处理器、 系统 BIOS 必须支持数据执行保护 (DEP) 和必须启用 DEP。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-211">This means the processor must be compatible with Intel VT or AMD Virtualization (AMD-V) technology, the system BIOS must support Data Execution Prevention (DEP), and DEP must be enabled.</span></span>  
  
-   <span data-ttu-id="9ae8c-212">**软件的要求，即**时运行的 HYPER-V 虚拟机上支持大多数 Microsoft 软件，则仍要测试以确保与 HYPER-V 虚拟化环境的兼容性是某些 Microsoft 软件。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-212">**Software requirements –** While most Microsoft software is supported running on Hyper-V virtual machines, some Microsoft software is still in the process of being tested to ensure compatibility with a Hyper-V virtualized environment.</span></span> <span data-ttu-id="9ae8c-213">例如，大多数 Microsoft 企业级应用程序支持的 HYPER-V 上运行或正在被测试的 HYPER-V 上的支持。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-213">For example, most Microsoft enterprise level applications either support running on Hyper-V or are in the process of being tested for support on Hyper-V.</span></span> <span data-ttu-id="9ae8c-214">有关 BizTalk Server 和 HYPER-V 上的 SQL Server 的可支持性详细信息，请参阅[附录 c:BizTalk Server 和 SQL Server 的 HYPER-V 可支持性](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)。</span><span class="sxs-lookup"><span data-stu-id="9ae8c-214">For more information on the supportability of BizTalk Server and SQL Server on Hyper-V, see [Appendix C: BizTalk Server and SQL Server Hyper-V Supportability](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span></span>