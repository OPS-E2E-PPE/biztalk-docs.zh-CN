---
title: 测试方案概述 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cde553ad-2540-40d9-a74b-928fee873c31
caps.latest.revision: 32
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1c30bf4102da74869e596af32f8c9361fc796ce7
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36997686"
---
# <a name="test-scenario-overview"></a><span data-ttu-id="f056b-102">测试方案概述</span><span class="sxs-lookup"><span data-stu-id="f056b-102">Test Scenario Overview</span></span>
<span data-ttu-id="f056b-103">本主题概述了测试应用程序;测试，所使用的方法和列表的说明在负载测试期间捕获的关键绩效指标 (Kpi)。</span><span class="sxs-lookup"><span data-stu-id="f056b-103">This topic provides an overview of the test application; a description of the testing methodology used, and lists the key performance indicators (KPIs) captured during load testing.</span></span>  

## <a name="test-application"></a><span data-ttu-id="f056b-104">测试应用程序</span><span class="sxs-lookup"><span data-stu-id="f056b-104">Test Application</span></span>  
 <span data-ttu-id="f056b-105">同步请求-响应应用程序用于比较的物理硬件上运行的 BizTalk Server HYPER-V 上运行的 BizTalk Server 的性能。</span><span class="sxs-lookup"><span data-stu-id="f056b-105">A synchronous request-response application was used to compare performance of BizTalk Server running on Hyper-V to BizTalk Server running on physical hardware.</span></span> <span data-ttu-id="f056b-106">此应用程序用于说明性能[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已被优化以低延迟的解决方案。</span><span class="sxs-lookup"><span data-stu-id="f056b-106">This application was used to illustrate performance of a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution that has been tuned for low latency.</span></span> <span data-ttu-id="f056b-107">较低的延迟消息的某些情况下，如联机银行客户端发送一个请求，需要在非常短的时间间隔 （例如 < 3 秒） 内响应消息的位置至关重要。</span><span class="sxs-lookup"><span data-stu-id="f056b-107">Low latency messaging is critical for certain scenarios such as online banking where a client sends a request and expects a response message within a very short interval (for example < 3 seconds).</span></span>  

 <span data-ttu-id="f056b-108">下图显示使用的高级体系结构。</span><span class="sxs-lookup"><span data-stu-id="f056b-108">The figure below illustrates the high-level architecture used.</span></span> <span data-ttu-id="f056b-109">Visual Studio Team System (VSTS) 2008 Test Load Agent 调用自定义测试类，该类用于 WCF 传输生成负载与[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f056b-109">Visual Studio Team System (VSTS) 2008 Test Load Agent invoked a custom test class, which used the WCF transport to generate load against [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f056b-110">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]在此方案中的应用程序公开请求-响应通过 Wcf-basichttp 接收位置。</span><span class="sxs-lookup"><span data-stu-id="f056b-110">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application in this scenario was exposed via a WCF-BasicHttp request-response receive location.</span></span> <span data-ttu-id="f056b-111">VSTS 2008 Test Load Agent 用作测试客户端由于极大的它所提供的灵活性，包括配置的消息数的功能，同时线程总数，在发送和请求之间的休眠时间间隔发送。</span><span class="sxs-lookup"><span data-stu-id="f056b-111">VSTS 2008 Test Load Agent was used as the test client because of the great flexibility that it provides, including the capability to configure the number of messages sent in total, number of simultaneous threads, and the sleep interval between requests sent.</span></span>  

 <span data-ttu-id="f056b-112">多个 VSTS 2008 Test Load Agent 的计算机可以运行在迁移后，若要模拟现实世界的负载模式。</span><span class="sxs-lookup"><span data-stu-id="f056b-112">Several VSTS 2008 Test Load Agent computers can be run in tandem to simulate real world load patterns.</span></span> <span data-ttu-id="f056b-113">对于这些测试，VSTS 2008 Test Load Agent 的计算机的驱动力也在运行 BizUnit 3.0 的单个 VSTS 2008 测试负载代理控制器计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-113">For these tests, the VSTS 2008 Test Load Agent computers were driven by a single VSTS 2008 Test Load Agent Controller computer that was also running BizUnit 3.0.</span></span> <span data-ttu-id="f056b-114">因此，一致负载发送到的物理和虚拟[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-114">As a result, a consistent load was sent to both the physical and virtual [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span> <span data-ttu-id="f056b-115">有关使用 VSTS 2008 Test Edition 来生成用于测试的模拟的负载的详细信息，请参阅[ http://go.microsoft.com/fwlink/?LinkID=132311 ](http://go.microsoft.com/fwlink/?LinkID=132311)。</span><span class="sxs-lookup"><span data-stu-id="f056b-115">For more information about using VSTS 2008 Test Edition to generate simulated load for testing, see [http://go.microsoft.com/fwlink/?LinkID=132311](http://go.microsoft.com/fwlink/?LinkID=132311).</span></span>  

 <span data-ttu-id="f056b-116">![应用程序体系结构](../technical-guides/media/testapplicationarchitecture.gif "TestApplicationArchitecture")</span><span class="sxs-lookup"><span data-stu-id="f056b-116">![Application Architecture](../technical-guides/media/testapplicationarchitecture.gif "TestApplicationArchitecture")</span></span>  
<span data-ttu-id="f056b-117">测试应用程序体系结构</span><span class="sxs-lookup"><span data-stu-id="f056b-117">Test Application Architecture</span></span>  

1. <span data-ttu-id="f056b-118">Wcf-basichttp: Wcf-basichttp 或 WCF 自定义请求-响应接收位置接收新 CalculatorRequest 从 Test Load Agent 的计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-118">A WCF-BasicHttp or WCF-Custom Request-Response Receive Location receives a new CalculatorRequest from a Test Load Agent computer.</span></span>  

2. <span data-ttu-id="f056b-119">XML 拆装器组件将升级 CalculatorRequest xml 文档内的方法元素。</span><span class="sxs-lookup"><span data-stu-id="f056b-119">The XML disassembler component promotes the Method element inside the CalculatorRequest xml document.</span></span> <span data-ttu-id="f056b-120">消息代理提交到 MessageBox 数据库 (BizTalkMsgBoxDb) 传入的消息。</span><span class="sxs-lookup"><span data-stu-id="f056b-120">The Message Agent submits the incoming message to the MessageBox database (BizTalkMsgBoxDb).</span></span>  

3. <span data-ttu-id="f056b-121">入站的请求启动 LogicalPortsOrchestration 的新实例。</span><span class="sxs-lookup"><span data-stu-id="f056b-121">The inbound request starts a new instance of the LogicalPortsOrchestration.</span></span> <span data-ttu-id="f056b-122">此业务流程使用直接绑定的端口接收与方法升级属性 CalculatorRequest 消息 ="LogicalPortsOrchestration"。</span><span class="sxs-lookup"><span data-stu-id="f056b-122">This orchestration uses a direct bound port to receive the CalculatorRequest messages with the Method promoted property = “LogicalPortsOrchestration”.</span></span>  

4. <span data-ttu-id="f056b-123">LogicalPortsOrchestration 使用循环检索操作并为每个项，它调用下游计算器 WCF web 服务使用逻辑要求-响应端口。</span><span class="sxs-lookup"><span data-stu-id="f056b-123">The LogicalPortsOrchestration uses a loop to retrieve operations and for each item it invokes the downstream Calculator WCF web service using a Logical Solicit-Response Port.</span></span> <span data-ttu-id="f056b-124">创建使用助手组件计算器 WCF web 服务的请求消息并将其发布到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="f056b-124">The request message for the Calculator WCF web service is created using a helper component and published to the MessageBox.</span></span>  

5. <span data-ttu-id="f056b-125">请求消息都会使用 Wcf-basichttp 发送端口。</span><span class="sxs-lookup"><span data-stu-id="f056b-125">The request message is consumed by a WCF-BasicHttp Send Port.</span></span>  

6. <span data-ttu-id="f056b-126">Wcf-basichttp 发送端口调用的方法之一 （加、 减、 乘、 除） 计算器 WCF web 服务公开的。</span><span class="sxs-lookup"><span data-stu-id="f056b-126">The WCF-BasicHttp Send Port invokes one of the methods (Add, Subtract, Multiply, Divide) exposed by the Calculator WCF web service.</span></span>  

7. <span data-ttu-id="f056b-127">计算器 WCF web 服务返回的响应消息。</span><span class="sxs-lookup"><span data-stu-id="f056b-127">The Calculator WCF web service returns a response message.</span></span>  

8. <span data-ttu-id="f056b-128">响应消息发布到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="f056b-128">The response message is published to the MessageBox.</span></span>  

9. <span data-ttu-id="f056b-129">响应消息返回到调用方 LogicalPortsOrchestration。</span><span class="sxs-lookup"><span data-stu-id="f056b-129">The response message is returned to the caller LogicalPortsOrchestration.</span></span> <span data-ttu-id="f056b-130">业务流程的入站 CalculatorRequest xml 文档中的每个操作都重复此模式。</span><span class="sxs-lookup"><span data-stu-id="f056b-130">The orchestration repeats this pattern for each operation within the inbound CalculatorRequest xml document.</span></span>  

10. <span data-ttu-id="f056b-131">LogicalPortsOrchestration 将 CalculatorResponse 消息发布到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="f056b-131">The LogicalPortsOrchestration publishes the CalculatorResponse message to the MessageBox.</span></span>  

11. <span data-ttu-id="f056b-132">通过请求-响应 Wcf-basichttp 接收位置中检索响应消息。</span><span class="sxs-lookup"><span data-stu-id="f056b-132">The response message is retrieved by the Request-Response WCF-BasicHttp Receive Location.</span></span>  

12. <span data-ttu-id="f056b-133">响应消息返回到负载测试代理计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-133">The response message is returned to the Load Test Agent computer.</span></span>  

    <span data-ttu-id="f056b-134">在负载测试期间使用的业务流程的屏幕截图如下所示：</span><span class="sxs-lookup"><span data-stu-id="f056b-134">A screenshot of the orchestration used during the load test is shown below:</span></span>  

> [!NOTE]  
>  <span data-ttu-id="f056b-135">为便于说明，如下所述的业务流程是实际在负载测试期间使用的业务流程的简化的版本。</span><span class="sxs-lookup"><span data-stu-id="f056b-135">For purposes of illustration, the orchestration depicted below is a simplified version of the orchestration that was actually used during load testing.</span></span> <span data-ttu-id="f056b-136">在负载测试期间使用的业务流程包含多个作用域、 错误处理逻辑和其他端口类型。</span><span class="sxs-lookup"><span data-stu-id="f056b-136">The orchestration used during load testing included multiple scopes, error handling logic, and additional port types.</span></span>  

 <span data-ttu-id="f056b-137">![测试应用程序业务流程](../technical-guides/media/logicalportsorchestration.gif "LogicalPortsOrchestration")</span><span class="sxs-lookup"><span data-stu-id="f056b-137">![Test Application Orchestration](../technical-guides/media/logicalportsorchestration.gif "LogicalPortsOrchestration")</span></span>  
<span data-ttu-id="f056b-138">测试应用程序业务流程</span><span class="sxs-lookup"><span data-stu-id="f056b-138">Test Application Orchestration</span></span>  

## <a name="testing-methodology"></a><span data-ttu-id="f056b-139">测试方法的更多信息</span><span class="sxs-lookup"><span data-stu-id="f056b-139">Testing Methodology</span></span>  
 <span data-ttu-id="f056b-140">性能测试涉及许多任务，即如果手动执行了重复的、 单调，而且容易出错。</span><span class="sxs-lookup"><span data-stu-id="f056b-140">Performance testing involves many tasks, which if performed manually are repetitive, monotonous, and error prone.</span></span> <span data-ttu-id="f056b-141">为了提高测试效率，并提供测试运行之间的一致性[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]BizUnit 3.0 与 Team System (VSTS) 测试版用于自动执行在测试过程中所需的任务。</span><span class="sxs-lookup"><span data-stu-id="f056b-141">In order to improve test efficiency and provide consistency between test runs, [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System (VSTS) Test Edition with BizUnit 3.0 was used to automate the tasks required during the testing process.</span></span> <span data-ttu-id="f056b-142">VSTS 2008 Test Load Agent 的计算机用作测试客户端生成消息负载的系统和每个测试运行以提高一致性上使用的相同消息类型。</span><span class="sxs-lookup"><span data-stu-id="f056b-142">VSTS 2008 Test Load Agent computers were used as the test client to generate the message load against the system and the same message types were used on each test run to improve consistency.</span></span> <span data-ttu-id="f056b-143">按此过程为每个测试运行提供一致的数据集。</span><span class="sxs-lookup"><span data-stu-id="f056b-143">Following this process provides a consistent set of data for every test run.</span></span> <span data-ttu-id="f056b-144">有关 BizUnit 3.0 的详细信息，请参阅[ http://go.microsoft.com/fwlink/?LinkID=85168 ](http://go.microsoft.com/fwlink/?LinkID=85168)。</span><span class="sxs-lookup"><span data-stu-id="f056b-144">For more information about BizUnit 3.0, see [http://go.microsoft.com/fwlink/?LinkID=85168](http://go.microsoft.com/fwlink/?LinkID=85168).</span></span> <span data-ttu-id="f056b-145">有关详细信息[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]Team System Test Edition，请参阅[ http://go.microsoft.com/fwlink/?LinkID=141387 ](http://go.microsoft.com/fwlink/?LinkID=141387)。</span><span class="sxs-lookup"><span data-stu-id="f056b-145">For more information about [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System Test Edition, see [http://go.microsoft.com/fwlink/?LinkID=141387](http://go.microsoft.com/fwlink/?LinkID=141387).</span></span>  

 <span data-ttu-id="f056b-146">已自动执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="f056b-146">The following steps were automated:</span></span>  

- <span data-ttu-id="f056b-147">停止 BizTalk 主机。</span><span class="sxs-lookup"><span data-stu-id="f056b-147">Stop BizTalk hosts.</span></span>  

- <span data-ttu-id="f056b-148">清理测试目录。</span><span class="sxs-lookup"><span data-stu-id="f056b-148">Clean up test directories.</span></span>  

- <span data-ttu-id="f056b-149">重新启动 IIS。</span><span class="sxs-lookup"><span data-stu-id="f056b-149">Restart IIS.</span></span>  

- <span data-ttu-id="f056b-150">清理[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Messagebox 数据库。</span><span class="sxs-lookup"><span data-stu-id="f056b-150">Clean up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Messagebox database.</span></span>  

- <span data-ttu-id="f056b-151">重新启动 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f056b-151">Restart [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>  

- <span data-ttu-id="f056b-152">清除事件日志。</span><span class="sxs-lookup"><span data-stu-id="f056b-152">Clear event logs.</span></span>  

- <span data-ttu-id="f056b-153">创建存储关联的性能指标和日志文件每次运行的测试结果文件夹。</span><span class="sxs-lookup"><span data-stu-id="f056b-153">Create a test results folder for each run to store associated performance metrics and log files.</span></span>  

- <span data-ttu-id="f056b-154">启动 BizTalk 主机。</span><span class="sxs-lookup"><span data-stu-id="f056b-154">Start BizTalk Hosts.</span></span>  

- <span data-ttu-id="f056b-155">加载性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-155">Load Performance Monitor counters.</span></span>  

- <span data-ttu-id="f056b-156">预热负载较小的 BizTalk 环境。</span><span class="sxs-lookup"><span data-stu-id="f056b-156">Warm up BizTalk environment with a small load.</span></span>  

- <span data-ttu-id="f056b-157">通过运行代表发送。</span><span class="sxs-lookup"><span data-stu-id="f056b-157">Send through representative run.</span></span>  

- <span data-ttu-id="f056b-158">性能日志写入结果文件夹。</span><span class="sxs-lookup"><span data-stu-id="f056b-158">Write performance logs to a results folder.</span></span>  

- <span data-ttu-id="f056b-159">收集应用程序日志，并写入到.csv 文件中的结果文件夹。</span><span class="sxs-lookup"><span data-stu-id="f056b-159">Collect application logs and write to a .csv file in the results folder.</span></span>  

- <span data-ttu-id="f056b-160">针对收集的性能日志，以生成统计信息、 图表和报表运行性能分析的日志 (PAL) 工具、 重新记录和日志分析程序工具。</span><span class="sxs-lookup"><span data-stu-id="f056b-160">Run the Performance Analysis of Logs (PAL) tool, Relog and Log Parser tools against the collected performance logs to produce statistics, charts and reports.</span></span> <span data-ttu-id="f056b-161">有关 PAL、 重新记录，以及日志分析程序的详细信息，请参阅[用于衡量性能的附录 d： 工具](../technical-guides/appendix-d-tools-for-measuring-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="f056b-161">For more information about PAL, Relog, and Log Parser, see [Appendix D: Tools for Measuring Performance](../technical-guides/appendix-d-tools-for-measuring-performance.md).</span></span>  

> [!NOTE]  
>  <span data-ttu-id="f056b-162">已禁用所有跟踪和测试过程中都禁用 BizTalk Server SQL Server 代理作业。</span><span class="sxs-lookup"><span data-stu-id="f056b-162">All tracking was disabled and the BizTalk Server SQL Server Agent job was disabled during testing.</span></span>  

 <span data-ttu-id="f056b-163">若要确保此实验的结果就能够提供的性能比较[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]在物理和 HYPER-V 环境中，性能指标和日志中收集的每个测试运行一个集中位置。</span><span class="sxs-lookup"><span data-stu-id="f056b-163">To ensure that the results of this lab were able to provide a comparison of the performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a physical and Hyper-V environment, performance metrics and logs were collected in a centralized location for each test run.</span></span>  

 <span data-ttu-id="f056b-164">测试客户端用于创建每个测试运行的唯一结果目录。</span><span class="sxs-lookup"><span data-stu-id="f056b-164">The test client was used to create a unique results directory for each test run.</span></span> <span data-ttu-id="f056b-165">此目录包含所有性能日志、 事件日志和关联的数据所需的测试。</span><span class="sxs-lookup"><span data-stu-id="f056b-165">This directory contained all the performance logs, event logs and associated data required for the test.</span></span> <span data-ttu-id="f056b-166">这种方法提供追溯分析之前测试的运行时所需信息是必需的。</span><span class="sxs-lookup"><span data-stu-id="f056b-166">This approach provided information needed when retrospective analysis of prior test runs was required.</span></span> <span data-ttu-id="f056b-167">在每个测试结束时，原始数据已编译成一组一致的结果和关键绩效指标 (Kpi)。</span><span class="sxs-lookup"><span data-stu-id="f056b-167">At the end of each test, the raw data was compiled into a set of consistent results and key performance indicators (KPIs).</span></span> <span data-ttu-id="f056b-168">用于提供的点之间的不同的测试运行和不同的环境所需的比较的物理和虚拟机收集一致的结果集。</span><span class="sxs-lookup"><span data-stu-id="f056b-168">Collecting consistent results set for physical and virtualized machines provided the points of comparison needed between the different test runs and different environments.</span></span> <span data-ttu-id="f056b-169">包含收集的数据：</span><span class="sxs-lookup"><span data-stu-id="f056b-169">The data collected included:</span></span>  

- <span data-ttu-id="f056b-170">**环境 –** 记录哪些环境测试针对物理硬件上的 BizTalk Server 或 BizTalk Server HYPER-V 上运行。</span><span class="sxs-lookup"><span data-stu-id="f056b-170">**Environment –** To record which environment the test was being run against, either BizTalk Server on physical hardware or BizTalk Server on Hyper-V.</span></span>  

- <span data-ttu-id="f056b-171">**测试运行数 –** 来唯一地标识每个测试运行</span><span class="sxs-lookup"><span data-stu-id="f056b-171">**Test Run Number –** To uniquely identify each test run</span></span>  

- <span data-ttu-id="f056b-172">**测试用例-** 以记录测试过程中使用的 BizTalk Server 解决方案的体系结构。</span><span class="sxs-lookup"><span data-stu-id="f056b-172">**Test Case –** To record the architecture of the BizTalk Server solution used during testing.</span></span> <span data-ttu-id="f056b-173">（例如具有与使用内联的业务流程的逻辑端口的业务流程将发送）</span><span class="sxs-lookup"><span data-stu-id="f056b-173">(For example Orchestration with Logical Ports versus Orchestration using inline Sends)</span></span>  

- <span data-ttu-id="f056b-174">**日期 –** 若要记录的日期和时间测试是否运行</span><span class="sxs-lookup"><span data-stu-id="f056b-174">**Date –** To record the date and time the test was run</span></span>  

- <span data-ttu-id="f056b-175">**时间已启动 –** 所启动的第一个 VSTS 负载测试代理报告</span><span class="sxs-lookup"><span data-stu-id="f056b-175">**Time Started –** As reported by the first VSTS load test agent initiated</span></span>  

- <span data-ttu-id="f056b-176">**时间已停止 –** 报告的最后一个 VSTS 负载测试代理来完成</span><span class="sxs-lookup"><span data-stu-id="f056b-176">**Time Stopped –** As reported by the last VSTS load test agent to complete</span></span>  

- <span data-ttu-id="f056b-177">**在几分钟内 – 测试持续时间**以记录测试的持续时间。</span><span class="sxs-lookup"><span data-stu-id="f056b-177">**Test Duration in Minutes –** To record the duration of the test.</span></span>  

- <span data-ttu-id="f056b-178">**总计-发送的邮件数**以记录测试期间从负载代理计算机发送到 BizTalk Server 计算机的消息总数。</span><span class="sxs-lookup"><span data-stu-id="f056b-178">**Messages Sent in Total –** To record the total number of messages sent from the Load Agent computers to the BizTalk Server computers during the test.</span></span>  

- <span data-ttu-id="f056b-179">**每秒-发送的邮件数**来记录每秒从负载代理计算机到 BizTalk Server 计算机测试过程中发送的消息。</span><span class="sxs-lookup"><span data-stu-id="f056b-179">**Messages Sent per Second –** To record the messages sent per second from the Load Agent computers to the BizTalk Server computers during the test.</span></span>  

- <span data-ttu-id="f056b-180">**平均客户端延迟 –** 记录的平均 Test Load Agent 客户端发起的请求和接收到的响应 BizTalk Server 计算机在负载测试期间之间的时间量。</span><span class="sxs-lookup"><span data-stu-id="f056b-180">**Average Client Latency –** To record the average amount of time between when Test Load Agent clients initiated a request to and received a response from the BizTalk Server computers during the load test.</span></span>  

- <span data-ttu-id="f056b-181">**请求-响应持续时间平均 （毫秒） –** 报告**BizTalk: Messaging Latency\Request 响应延迟 （秒）** biztalkserverisolatedhost 性能监视器计数器</span><span class="sxs-lookup"><span data-stu-id="f056b-181">**Request-Response Duration Average (ms) –** As reported by the **BizTalk:Messaging Latency\Request-Response Latency (sec)** Performance Monitor counter for the BizTalkServerIsolatedHost</span></span>  

  > [!NOTE]  
  >  <span data-ttu-id="f056b-182">使用其中多个虚拟化的 BizTalk 主机正在运行的这些计数器的平均值计算出从日志。</span><span class="sxs-lookup"><span data-stu-id="f056b-182">Where multiple virtualized BizTalk hosts were running an average of these counters as calculated from the logs was used.</span></span>  

- <span data-ttu-id="f056b-183">**每秒 – 业务流程已完成**报告**XLANG/s 业务流程 (BizTalkServerApplication) \Orchestrations 每秒完成**性能监视器计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-183">**Orchestrations Completed per Second –** As reported by the **XLANG/s Orchestrations(BizTalkServerApplication)\Orchestrations completed/sec** Performance Monitor counter.</span></span> <span data-ttu-id="f056b-184">此计数器可很好的吞吐量测量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]解决方案。</span><span class="sxs-lookup"><span data-stu-id="f056b-184">This counter provides a good measure of the throughput of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution.</span></span>  

- <span data-ttu-id="f056b-185">**消息处理 < 3 秒数 – %** 记录在测试期间的 3 分钟内处理的消息的总数。</span><span class="sxs-lookup"><span data-stu-id="f056b-185">**% of Messages Processed < 3 seconds –** To record the total number of messages processed within 3 seconds during the test.</span></span>  

  <span data-ttu-id="f056b-186">VSTS 2008 负载测试用于生成整个所有测试的一致负载。</span><span class="sxs-lookup"><span data-stu-id="f056b-186">VSTS 2008 Load Test was used to generate a consistent load throughout all the tests.</span></span> <span data-ttu-id="f056b-187">以下测试运行设置和测试，以调整每个测试的负载配置文件期间修改了负载模式：</span><span class="sxs-lookup"><span data-stu-id="f056b-187">The following test run settings and load pattern were modified during testing to adjust the load profile of each test:</span></span>  

- <span data-ttu-id="f056b-188">**测试运行设置**</span><span class="sxs-lookup"><span data-stu-id="f056b-188">**Test Run Settings**</span></span>  

   <span data-ttu-id="f056b-189">具体取决于正在执行的测试已修改以下测试运行设置：</span><span class="sxs-lookup"><span data-stu-id="f056b-189">The following test run setting was modified depending on the test being performed:</span></span>  

  - <span data-ttu-id="f056b-190">**运行持续时间 –** 指定测试运行的时间长度。</span><span class="sxs-lookup"><span data-stu-id="f056b-190">**Run Duration –** Specifies how long the test is run.</span></span>  

    <span data-ttu-id="f056b-191">![测试运行的设置](../technical-guides/media/wcfloadtestrunsettings.gif "WCFLoadTestRunSettings")</span><span class="sxs-lookup"><span data-stu-id="f056b-191">![Test Run Settings](../technical-guides/media/wcfloadtestrunsettings.gif "WCFLoadTestRunSettings")</span></span>  
    <span data-ttu-id="f056b-192">测试运行设置</span><span class="sxs-lookup"><span data-stu-id="f056b-192">Test Run Settings</span></span>  

- <span data-ttu-id="f056b-193">**测试模式设置**</span><span class="sxs-lookup"><span data-stu-id="f056b-193">**Test Pattern Settings**</span></span>  

   <span data-ttu-id="f056b-194">具体取决于正在执行的测试修改了以下测试模式设置：</span><span class="sxs-lookup"><span data-stu-id="f056b-194">The following test pattern settings were modified depending on the test being performed:</span></span>  

  1. <span data-ttu-id="f056b-195">**模式-** 指定负载测试期间如何调整模拟的用户负载。</span><span class="sxs-lookup"><span data-stu-id="f056b-195">**Pattern –** Specifies how the simulated user load is adjusted during a load test.</span></span> <span data-ttu-id="f056b-196">负载模式为**常量**，**步骤**，或**目标**基于。</span><span class="sxs-lookup"><span data-stu-id="f056b-196">Load patterns are either **Constant**, **Step**, or **Goal** based.</span></span> <span data-ttu-id="f056b-197">所有负载测试执行都为常数或步骤。</span><span class="sxs-lookup"><span data-stu-id="f056b-197">All load testing performed was either Constant or Step.</span></span>  

     > [!NOTE]
     >  <span data-ttu-id="f056b-198">所有测试执行本指南使用了上述两**常量**负载模式或**步骤**负载模式。</span><span class="sxs-lookup"><span data-stu-id="f056b-198">All testing performed for purposes of this guide used either a **Constant** load pattern or a **Step** load pattern.</span></span> <span data-ttu-id="f056b-199">常量负载模式和步骤的负载模式提供了以下功能：</span><span class="sxs-lookup"><span data-stu-id="f056b-199">Constant load patterns and Step load patterns provide the following functionality:</span></span>  
     > 
     > - <span data-ttu-id="f056b-200">**常量负载模式 –** 负载模式是相同的测试的持续时间内，模拟用户的数量从预定义级别开始，并不会更改。</span><span class="sxs-lookup"><span data-stu-id="f056b-200">**Constant load pattern –** The load pattern is the same for the duration of the test, the number of simulated users starts at a predefined level and does not change.</span></span>  
     >   -   <span data-ttu-id="f056b-201">**分级负载模式 –** 在测试运行期间增加的负载模式; 模拟用户的数量从预定义级别开始，就会递增预定义的金额按预定义的时间间隔的测试的持续时间。</span><span class="sxs-lookup"><span data-stu-id="f056b-201">**Step load pattern –** The load pattern is increased during the test run; the number of simulated users starts at a predefined level and is incremented by a predefined amount at predefined intervals for the duration of the test.</span></span>  

  2. <span data-ttu-id="f056b-202">**常数用户计数 （常量负载模式） –** 生成针对 Visual Studio 负载测试项目的 app.config 文件中指定的终结点地址的负载的虚拟用户数。</span><span class="sxs-lookup"><span data-stu-id="f056b-202">**Constant User Count (Constant Load Pattern) –** Number of virtual users that are generating load against the endpoint address specified in the app.config file of the Visual Studio Load Test project.</span></span> <span data-ttu-id="f056b-203">用于负载测试的负载模式设置中指定此值。</span><span class="sxs-lookup"><span data-stu-id="f056b-203">This value is specified in the Load Pattern settings used for the load test.</span></span>  

  3. <span data-ttu-id="f056b-204">**初始用户计数 （分级负载模式） –** 生成针对分级负载模式测试的开始处的指定的终结点地址的负载的虚拟用户数。</span><span class="sxs-lookup"><span data-stu-id="f056b-204">**Initial User Count (Step Load Pattern) –** Number of virtual users that are generating load against the specified endpoint address at the beginning of a Step Load Pattern test.</span></span> <span data-ttu-id="f056b-205">用于负载测试的负载模式设置中指定此值。</span><span class="sxs-lookup"><span data-stu-id="f056b-205">This value is specified in the Load Pattern settings used for the load test.</span></span>  

  4. <span data-ttu-id="f056b-206">**最大用户计数 （分级负载模式） –** 生成针对分级负载模式测试末尾处的指定的终结点地址的负载的虚拟用户数。</span><span class="sxs-lookup"><span data-stu-id="f056b-206">**Maximum User Count (Step Load Pattern) –** Number of virtual users that are generating load against the specified endpoint address at the end of a Step Load Pattern test.</span></span> <span data-ttu-id="f056b-207">用于负载测试的负载模式设置中指定此值。</span><span class="sxs-lookup"><span data-stu-id="f056b-207">This value is specified in the Load Pattern settings used for the load test.</span></span>  

  5. <span data-ttu-id="f056b-208">**单步持续时间 （分级负载模式） –** 虚拟用户生成针对负载测试步骤的指定的终结点地址的负载的秒数。</span><span class="sxs-lookup"><span data-stu-id="f056b-208">**Step Duration (Step Load Pattern) –** Number of seconds that virtual users are generating load against the specified endpoint address for a load test step.</span></span>  

  6. <span data-ttu-id="f056b-209">**单步用户计数 （分级负载模式） –** 可使用分级负载模式时增加的每个步骤的虚拟用户数。</span><span class="sxs-lookup"><span data-stu-id="f056b-209">**Step User Count (Step Load Pattern) –** Number of virtual users to increase at each step when using a step load pattern.</span></span>  

     <span data-ttu-id="f056b-210">![测试模式设置](../technical-guides/media/wcfloadtestpatternsettings.gif "WCFLoadTestPatternSettings")</span><span class="sxs-lookup"><span data-stu-id="f056b-210">![Test Pattern Settings](../technical-guides/media/wcfloadtestpatternsettings.gif "WCFLoadTestPatternSettings")</span></span>  
     <span data-ttu-id="f056b-211">测试模式设置</span><span class="sxs-lookup"><span data-stu-id="f056b-211">Test Pattern Settings</span></span>  

  <span data-ttu-id="f056b-212">有关使用负载测试中的详细信息[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]，请参阅主题**使用负载测试**中[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]Team System 文档[ http://go.microsoft.com/fwlink/?LinkId=141486 ](http://go.microsoft.com/fwlink/?LinkId=141486)。</span><span class="sxs-lookup"><span data-stu-id="f056b-212">For more information about working with load tests in [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)], see the topic **Working with Load Tests** in the [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System documentation at [http://go.microsoft.com/fwlink/?LinkId=141486](http://go.microsoft.com/fwlink/?LinkId=141486).</span></span>  

## <a name="key-performance-indicators-measured-during-testing"></a><span data-ttu-id="f056b-213">在测试期间测量的关键绩效指标</span><span class="sxs-lookup"><span data-stu-id="f056b-213">Key Performance Indicators Measured During Testing</span></span>  
 <span data-ttu-id="f056b-214">适用于所有测试运行的关键绩效指标 (KPI) 作为捕获以下性能监视器计数器：</span><span class="sxs-lookup"><span data-stu-id="f056b-214">The following Performance Monitor counters were captured as key performance indicators (KPI) for all test runs:</span></span>  

> [!NOTE]  
>  <span data-ttu-id="f056b-215">有关评估性能监视器计数器的性能的详细信息，请参阅[清单： 度量 HYPER-V 上的性能](../technical-guides/checklist-measuring-performance-on-hyper-v.md)。</span><span class="sxs-lookup"><span data-stu-id="f056b-215">For more information about evaluating performance with Performance monitor counters, see [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  

 <span data-ttu-id="f056b-216">**BizTalk Server KPI**</span><span class="sxs-lookup"><span data-stu-id="f056b-216">**BizTalk Server KPI**</span></span>  

- <span data-ttu-id="f056b-217">**每秒-处理的文档**由度量**BizTalk： 消息传送/文档处理数/秒**计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-217">**Documents processed per second –** As measured by the **BizTalk:Messaging/Documents processed/Sec** counter.</span></span>  

- <span data-ttu-id="f056b-218">**延迟 –** 所返回的 VSTS 2008 负载测试控制器进行度量。</span><span class="sxs-lookup"><span data-stu-id="f056b-218">**Latency –** As measured as returned by the VSTS 2008 Load Test Controller.</span></span>  

  <span data-ttu-id="f056b-219">**SQL Server KPI**</span><span class="sxs-lookup"><span data-stu-id="f056b-219">**SQL Server KPI**</span></span>  

- <span data-ttu-id="f056b-220">**SQL Server 的处理器使用率 –** 由度量**SQL\Processor(Total)\\%Processor Time**计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-220">**SQL Server processor utilization –** As measured by the **SQL\Processor(Total)\\%Processor Time** counter.</span></span> <span data-ttu-id="f056b-221">此计数器测量的 CPU 使用率[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]处理[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-221">This counter measures CPU utilization of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] processing on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer.</span></span>  

- <span data-ttu-id="f056b-222">**Transact SQL 命令处理性能 –** 由度量**\SQL Server:SQL Statistics\Batch 请求数/秒**计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-222">**Transact SQL command processing performance –** As measured by the **\SQL Server:SQL Statistics\Batch Requests/sec** counter.</span></span> <span data-ttu-id="f056b-223">此计数器测量的每秒接收的 TRANSACT-SQL 命令批处理的数目。</span><span class="sxs-lookup"><span data-stu-id="f056b-223">This counter measures the number of Transact-SQL command batches received per second.</span></span> <span data-ttu-id="f056b-224">使用此计数器来测量吞吐量上[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-224">This counter is used to measure throughput on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer.</span></span>  

  <span data-ttu-id="f056b-225">**网络 KPI**</span><span class="sxs-lookup"><span data-stu-id="f056b-225">**Networking KPI**</span></span>  

- <span data-ttu-id="f056b-226">**BizTalk Server 的网络吞吐量 –** 由度量**\Network 接口 (\*) \Bytes Total/sec**上的性能监视器计数器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机。</span><span class="sxs-lookup"><span data-stu-id="f056b-226">**BizTalk Server network throughput –** As measured by the **\Network Interface(\*)\Bytes Total/sec** performance monitor counter on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span>  

- <span data-ttu-id="f056b-227">**SQL Server 网络吞吐量 –** 由度量**SQL Network Interface\Bytes Total/sec (Avg)** 返回的 VSTS 2008 负载测试控制器。</span><span class="sxs-lookup"><span data-stu-id="f056b-227">**SQL Server network throughput –** As measured by the **SQL Network Interface\Bytes Total/sec (Avg)** returned by the VSTS 2008 Load Test Controller.</span></span>  

  <span data-ttu-id="f056b-228">**内存 KPI**</span><span class="sxs-lookup"><span data-stu-id="f056b-228">**Memory KPI**</span></span>  

- <span data-ttu-id="f056b-229">**可用内存 — —** 由度量**\Memory\Available Mbytes**的各种方案的计数器。</span><span class="sxs-lookup"><span data-stu-id="f056b-229">**Available memory –** As measured by the **\Memory\Available Mbytes** counter for the various scenarios.</span></span>  

## <a name="physical-infrastructure-specifics"></a><span data-ttu-id="f056b-230">物理基础结构详细信息</span><span class="sxs-lookup"><span data-stu-id="f056b-230">Physical Infrastructure Specifics</span></span>  
 <span data-ttu-id="f056b-231">为每个已安装的服务器已调整以下设置。</span><span class="sxs-lookup"><span data-stu-id="f056b-231">For each of the servers that were installed the following settings were adjusted.</span></span>  

 <span data-ttu-id="f056b-232">**对于所有服务器：**</span><span class="sxs-lookup"><span data-stu-id="f056b-232">**For all servers:**</span></span>  

- <span data-ttu-id="f056b-233">页面文件设置为分配的物理内存量的 1.5 倍。</span><span class="sxs-lookup"><span data-stu-id="f056b-233">The paging file was set to 1.5 times the amount of physical memory allocated.</span></span> <span data-ttu-id="f056b-234">分页文件通过确保初始大小和最大值相同以 mb 为单位设置为固定大小。</span><span class="sxs-lookup"><span data-stu-id="f056b-234">The paging file was set to a fixed size by ensuring that the initial size and maximum values were identical in MB.</span></span>  

- <span data-ttu-id="f056b-235">高级系统属性屏幕中选择了"调整为最佳性能"性能选项。</span><span class="sxs-lookup"><span data-stu-id="f056b-235">The “Adjust for best performance” performance option was selected from the advanced System Properties screen.</span></span>  

- <span data-ttu-id="f056b-236">它已验证的系统具有已调整为获得最佳性能的系统属性的性能选项部分中的后台服务。</span><span class="sxs-lookup"><span data-stu-id="f056b-236">It was verified that the system had been adjusted for best performance of Background services in the Performance Options section of System Properties.</span></span>  

- [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="f056b-237"> 已安装为上每个虚拟机的来宾操作系统。</span><span class="sxs-lookup"><span data-stu-id="f056b-237"> was installed as the guest operating system on each of the virtual machines.</span></span>  

- <span data-ttu-id="f056b-238">Windows 更新已安装最新安全更新的所有服务器上成功运行了。</span><span class="sxs-lookup"><span data-stu-id="f056b-238">Windows Update was successfully run on all servers to install the latest security updates.</span></span>  

  <span data-ttu-id="f056b-239">**对于 SQL Server:**</span><span class="sxs-lookup"><span data-stu-id="f056b-239">**For SQL Server:**</span></span>  

- <span data-ttu-id="f056b-240">根据安装指南位于安装了 SQL Server [ http://go.microsoft.com/fwlink/?LinkId=141021 ](http://go.microsoft.com/fwlink/?LinkId=141021)。</span><span class="sxs-lookup"><span data-stu-id="f056b-240">SQL Server was installed as per the installation guide available at [http://go.microsoft.com/fwlink/?LinkId=141021](http://go.microsoft.com/fwlink/?LinkId=141021).</span></span>  

- [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="f056b-241"> 使用 SAN Lun 配置根据下表。</span><span class="sxs-lookup"><span data-stu-id="f056b-241"> used had the SAN LUNs configured as per the table below.</span></span> <span data-ttu-id="f056b-242">数据库和日志文件已隔离到在 Lun，如下所示，若要减少有可能发生磁盘 I/O 争用：</span><span class="sxs-lookup"><span data-stu-id="f056b-242">The database and log files were separated to across the LUNs as follows to reduce possible disk I/O contention:</span></span>  

  - <span data-ttu-id="f056b-243">Data_Sys 卷用于除 MessageBox 和 TempDb 数据库 （包括系统和 BizTalk 数据库） 的所有数据库文件都存储。</span><span class="sxs-lookup"><span data-stu-id="f056b-243">The Data_Sys volume was used to store all database files (including system and BizTalk databases) except the MessageBox and TempDb databases.</span></span>  

  - <span data-ttu-id="f056b-244">Log_Sys 卷用于存储所有日志文件 (包括系统和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库) 除外的 MessageBox 和 TempDb 数据库。</span><span class="sxs-lookup"><span data-stu-id="f056b-244">The Log_Sys volume was used to store all log files (including system and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases) except the MessageBox and TempDb databases.</span></span>  

  - <span data-ttu-id="f056b-245">Data_TempDb 卷用于存储在 TempDb 数据库文件。</span><span class="sxs-lookup"><span data-stu-id="f056b-245">The Data_TempDb volume was used to store the TempDb database file.</span></span>  

  - <span data-ttu-id="f056b-246">Logs_TempDb 卷用于存储 TempDb 日志文件。</span><span class="sxs-lookup"><span data-stu-id="f056b-246">The Logs_TempDb volume was used to store the TempDb log file.</span></span>  

  - <span data-ttu-id="f056b-247">MessageBox 数据库文件的存储上 Data_BtsMsgBox 卷和日志文件的存储 Log_BtsMsgBox 卷上。</span><span class="sxs-lookup"><span data-stu-id="f056b-247">The MessageBox database file was stored on the Data_BtsMsgBox volume and the log file was stored on the Log_BtsMsgBox volume.</span></span>  

- <span data-ttu-id="f056b-248">除此之外，单独的 LUN 提供 MSDTC 日志文件。</span><span class="sxs-lookup"><span data-stu-id="f056b-248">In addition to this, a separate LUN was provided for the MSDTC log file.</span></span> <span data-ttu-id="f056b-249">在高吞吐量 BizTalk 系统中，MSDTC 日志文件活动已被证实将导致 I/O 瓶颈，如果它将保留在操作系统所在的物理驱动器上。</span><span class="sxs-lookup"><span data-stu-id="f056b-249">On high throughput BizTalk systems, the MSDTC log file activity has been shown to cause an I/O bottleneck if it is left on the same physical drive as the operating system.</span></span>  


  |      <span data-ttu-id="f056b-250">卷名</span><span class="sxs-lookup"><span data-stu-id="f056b-250">Volume Name</span></span>      |               <span data-ttu-id="f056b-251">“文件”</span><span class="sxs-lookup"><span data-stu-id="f056b-251">Files</span></span>               | <span data-ttu-id="f056b-252">LUN 大小 GB</span><span class="sxs-lookup"><span data-stu-id="f056b-252">LUN Size GB</span></span> | <span data-ttu-id="f056b-253">主机分区大小 GB</span><span class="sxs-lookup"><span data-stu-id="f056b-253">Host Partition Size GB</span></span> | <span data-ttu-id="f056b-254">群集大小</span><span class="sxs-lookup"><span data-stu-id="f056b-254">Cluster Size</span></span> |
  |-----------------------|-----------------------------------|-------------|------------------------|--------------|
  |       <span data-ttu-id="f056b-255">Data_Sys</span><span class="sxs-lookup"><span data-stu-id="f056b-255">Data_Sys</span></span>        |    <span data-ttu-id="f056b-256">MASTER 和 MSDB 数据文件</span><span class="sxs-lookup"><span data-stu-id="f056b-256">MASTER, and MSDB data files</span></span>    |     <span data-ttu-id="f056b-257">10</span><span class="sxs-lookup"><span data-stu-id="f056b-257">10</span></span>      |           <span data-ttu-id="f056b-258">10</span><span class="sxs-lookup"><span data-stu-id="f056b-258">10</span></span>           |     <span data-ttu-id="f056b-259">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-259">64KB</span></span>     |
  |       <span data-ttu-id="f056b-260">Logs_Sys</span><span class="sxs-lookup"><span data-stu-id="f056b-260">Logs_Sys</span></span>        |     <span data-ttu-id="f056b-261">MASTER 和 MSDB 日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-261">MASTER and MSDB log files</span></span>     |     <span data-ttu-id="f056b-262">10</span><span class="sxs-lookup"><span data-stu-id="f056b-262">10</span></span>      |           <span data-ttu-id="f056b-263">10</span><span class="sxs-lookup"><span data-stu-id="f056b-263">10</span></span>           |     <span data-ttu-id="f056b-264">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-264">64KB</span></span>     |
  |      <span data-ttu-id="f056b-265">Data_TempDb</span><span class="sxs-lookup"><span data-stu-id="f056b-265">Data_TempDb</span></span>      |         <span data-ttu-id="f056b-266">TempDB 数据文件</span><span class="sxs-lookup"><span data-stu-id="f056b-266">TempDB data file</span></span>          |     <span data-ttu-id="f056b-267">50</span><span class="sxs-lookup"><span data-stu-id="f056b-267">50</span></span>      |           <span data-ttu-id="f056b-268">50</span><span class="sxs-lookup"><span data-stu-id="f056b-268">50</span></span>           |     <span data-ttu-id="f056b-269">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-269">64KB</span></span>     |
  |      <span data-ttu-id="f056b-270">Logs_TempDb</span><span class="sxs-lookup"><span data-stu-id="f056b-270">Logs_TempDb</span></span>      |          <span data-ttu-id="f056b-271">TempDB 日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-271">TempDB log file</span></span>          |     <span data-ttu-id="f056b-272">50</span><span class="sxs-lookup"><span data-stu-id="f056b-272">50</span></span>      |           <span data-ttu-id="f056b-273">50</span><span class="sxs-lookup"><span data-stu-id="f056b-273">50</span></span>           |     <span data-ttu-id="f056b-274">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-274">64KB</span></span>     |
  |    <span data-ttu-id="f056b-275">Data_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="f056b-275">Data_BtsMsgBox</span></span>     |     <span data-ttu-id="f056b-276">BizTalkMsgBoxDb 数据文件</span><span class="sxs-lookup"><span data-stu-id="f056b-276">BizTalkMsgBoxDb data file</span></span>     |     <span data-ttu-id="f056b-277">300</span><span class="sxs-lookup"><span data-stu-id="f056b-277">300</span></span>     |          <span data-ttu-id="f056b-278">100</span><span class="sxs-lookup"><span data-stu-id="f056b-278">100</span></span>           |     <span data-ttu-id="f056b-279">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-279">64KB</span></span>     |
  |    <span data-ttu-id="f056b-280">Logs_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="f056b-280">Logs_BtsMsgBox</span></span>     |     <span data-ttu-id="f056b-281">BizTalkMsgBoxDb 日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-281">BizTalkMsgBoxDb log file</span></span>      |     <span data-ttu-id="f056b-282">100</span><span class="sxs-lookup"><span data-stu-id="f056b-282">100</span></span>     |          <span data-ttu-id="f056b-283">100</span><span class="sxs-lookup"><span data-stu-id="f056b-283">100</span></span>           |     <span data-ttu-id="f056b-284">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-284">64KB</span></span>     |
  | <span data-ttu-id="f056b-285">Data_BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="f056b-285">Data_BAMPrimaryImport</span></span> |    <span data-ttu-id="f056b-286">BAMPrimaryImport 数据文件</span><span class="sxs-lookup"><span data-stu-id="f056b-286">BAMPrimaryImport data file</span></span>     |     <span data-ttu-id="f056b-287">10</span><span class="sxs-lookup"><span data-stu-id="f056b-287">10</span></span>      |           <span data-ttu-id="f056b-288">10</span><span class="sxs-lookup"><span data-stu-id="f056b-288">10</span></span>           |     <span data-ttu-id="f056b-289">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-289">64KB</span></span>     |
  | <span data-ttu-id="f056b-290">Logs_BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="f056b-290">Logs_BAMPrimaryImport</span></span> |     <span data-ttu-id="f056b-291">BAMPrimaryImport 日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-291">BAMPrimaryImport log file</span></span>     |     <span data-ttu-id="f056b-292">10</span><span class="sxs-lookup"><span data-stu-id="f056b-292">10</span></span>      |           <span data-ttu-id="f056b-293">10</span><span class="sxs-lookup"><span data-stu-id="f056b-293">10</span></span>           |     <span data-ttu-id="f056b-294">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-294">64KB</span></span>     |
  | <span data-ttu-id="f056b-295">Data_BizTalkDatabases</span><span class="sxs-lookup"><span data-stu-id="f056b-295">Data_BizTalkDatabases</span></span> | <span data-ttu-id="f056b-296">其他 BizTalk 数据库数据文件</span><span class="sxs-lookup"><span data-stu-id="f056b-296">Other BizTalk database data files</span></span> |     <span data-ttu-id="f056b-297">20</span><span class="sxs-lookup"><span data-stu-id="f056b-297">20</span></span>      |           <span data-ttu-id="f056b-298">20</span><span class="sxs-lookup"><span data-stu-id="f056b-298">20</span></span>           |     <span data-ttu-id="f056b-299">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-299">64KB</span></span>     |
  | <span data-ttu-id="f056b-300">Logs_BizTalkDatabases</span><span class="sxs-lookup"><span data-stu-id="f056b-300">Logs_BizTalkDatabases</span></span> | <span data-ttu-id="f056b-301">其他 BizTalk 数据库日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-301">Other BizTalk database log files</span></span>  |     <span data-ttu-id="f056b-302">20</span><span class="sxs-lookup"><span data-stu-id="f056b-302">20</span></span>      |           <span data-ttu-id="f056b-303">20</span><span class="sxs-lookup"><span data-stu-id="f056b-303">20</span></span>           |     <span data-ttu-id="f056b-304">64 KB</span><span class="sxs-lookup"><span data-stu-id="f056b-304">64KB</span></span>     |
  |          <span data-ttu-id="f056b-305">N/A</span><span class="sxs-lookup"><span data-stu-id="f056b-305">N/A</span></span>          |          <span data-ttu-id="f056b-306">MSDTC 日志文件</span><span class="sxs-lookup"><span data-stu-id="f056b-306">MSDTC log file</span></span>           |      <span data-ttu-id="f056b-307">5</span><span class="sxs-lookup"><span data-stu-id="f056b-307">5</span></span>      |           <span data-ttu-id="f056b-308">5</span><span class="sxs-lookup"><span data-stu-id="f056b-308">5</span></span>            |     <span data-ttu-id="f056b-309">N/A</span><span class="sxs-lookup"><span data-stu-id="f056b-309">N/A</span></span>      |


- <span data-ttu-id="f056b-310">根据安装指南位于安装了 BizTalk Server [ http://go.microsoft.com/fwlink/?LinkId=128383 ](http://go.microsoft.com/fwlink/?LinkId=128383)。</span><span class="sxs-lookup"><span data-stu-id="f056b-310">BizTalk Server was installed as per the installation guides available at [http://go.microsoft.com/fwlink/?LinkId=128383](http://go.microsoft.com/fwlink/?LinkId=128383).</span></span>  

- <span data-ttu-id="f056b-311">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]最佳做法分析器 (BPA) 工具用来在执行平台验证后已配置系统。</span><span class="sxs-lookup"><span data-stu-id="f056b-311">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Best Practices Analyzer (BPA) tool was used to perform platform validation once the system had been configured.</span></span> <span data-ttu-id="f056b-312">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] BPA 位于[ http://go.microsoft.com/fwlink/?LinkId=67150 ](http://go.microsoft.com/fwlink/?LinkId=67150)。</span><span class="sxs-lookup"><span data-stu-id="f056b-312">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] BPA is available at [http://go.microsoft.com/fwlink/?LinkId=67150](http://go.microsoft.com/fwlink/?LinkId=67150).</span></span>  

## <a name="virtualization-specifics"></a><span data-ttu-id="f056b-313">虚拟化细节</span><span class="sxs-lookup"><span data-stu-id="f056b-313">Virtualization Specifics</span></span>  
 <span data-ttu-id="f056b-314">一个单一 50 GB 的固定大小的 VHD 用来承载每个 HYPER-V 虚拟机的操作系统。</span><span class="sxs-lookup"><span data-stu-id="f056b-314">A single 50 GB fixed VHD was used to host the operating system for each Hyper-V virtual machine.</span></span>  

 <span data-ttu-id="f056b-315">固定的 Vhd 已使用而不是可动态调整大小的 Vhd，因为它们立即分配的最大存储为 VHD 的托管它的驱动器上的文件。</span><span class="sxs-lookup"><span data-stu-id="f056b-315">Fixed VHDs were used instead of dynamically sized VHDs because they immediately allocate the maximum storage for the VHD to the file on the drive where it is hosted.</span></span> <span data-ttu-id="f056b-316">这可以减少发生物理驱动器上托管它的位置，这样可以提高磁盘 I/O 性能的 VHD 文件的碎片。</span><span class="sxs-lookup"><span data-stu-id="f056b-316">This reduces fragmentation of the VHD file occurring on the physical drive where it is hosted, which improves disk I/O performance.</span></span>  

 <span data-ttu-id="f056b-317">设置虚拟机，安装了[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]对单个 VHD 执行 64 位版本。</span><span class="sxs-lookup"><span data-stu-id="f056b-317">To set-up the virtual machines, an installation of [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] 64-bit edition was performed on a single VHD.</span></span> <span data-ttu-id="f056b-318">已安装所有合适的更新后使用 sysprep 实用工具一起安装的映像基础的虚拟机[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]，%WINDIR%\system32\sysprep 目录中。</span><span class="sxs-lookup"><span data-stu-id="f056b-318">Once all appropriate updates had been installed the base virtual machine was imaged using sysprep utility that is installed with [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], in the %WINDIR%\system32\sysprep directory.</span></span>  

 <span data-ttu-id="f056b-319">此基本 VHD 已复制，然后跨环境部署的所有 HYPER-V 虚拟机都用作的基础。</span><span class="sxs-lookup"><span data-stu-id="f056b-319">This base VHD was then copied and used as the basis for all Hyper-V virtual machines that were deployed across the environment.</span></span> <span data-ttu-id="f056b-320">若要重置任何之前的系统的安全标识符的基本 VHD 映像上运行 Sysprep[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]或[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]二进制文件部署到系统。</span><span class="sxs-lookup"><span data-stu-id="f056b-320">Sysprep was run on the base VHD image to reset system security identifiers before any [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] binaries were deployed to the system.</span></span>  

> [!NOTE]
>  <span data-ttu-id="f056b-321">运行 Sysprep 后已安装并在服务器上配置 BizTalk Server 可以通过使用 Sysprep 应答文件和 BizTalk Server 提供的脚本来完成。</span><span class="sxs-lookup"><span data-stu-id="f056b-321">Running Sysprep after BizTalk Server has been installed and configured on the server can be accomplished through the use of a Sysprep answer file and scripts provided with BizTalk Server.</span></span> <span data-ttu-id="f056b-322">向 BizTalk Server 安装在 32 位和 64 位版本的这些示例脚本专供[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]仅。</span><span class="sxs-lookup"><span data-stu-id="f056b-322">These sample scripts are designed for use with BizTalk Server installed on 32-bit and 64-bit versions of [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] only.</span></span> <span data-ttu-id="f056b-323">有关详细信息，请参阅 BizTalk Server 联机文档。</span><span class="sxs-lookup"><span data-stu-id="f056b-323">For more information see the BizTalk Server online documentation.</span></span>  

 <span data-ttu-id="f056b-324">无人参与 Windows 安装程序参考位于[ http://go.microsoft.com/fwlink/?LinkId=142364 ](http://go.microsoft.com/fwlink/?LinkId=142364)。</span><span class="sxs-lookup"><span data-stu-id="f056b-324">The Unattended Windows Setup Reference is available at [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span></span>  

## <a name="see-also"></a><span data-ttu-id="f056b-325">请参阅</span><span class="sxs-lookup"><span data-stu-id="f056b-325">See Also</span></span>  
 [<span data-ttu-id="f056b-326">附录 C：BizTalk Server 和 SQL Server Hyper-V 支持性</span><span class="sxs-lookup"><span data-stu-id="f056b-326">Appendix C: BizTalk Server and SQL Server Hyper-V Supportability</span></span>](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)