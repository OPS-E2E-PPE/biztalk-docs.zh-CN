---
title: 清单：执行每周性能检查 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c36fe78d-1be8-49f2-97ce-b6d0cadffab8
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e743ae5c33bb8530d4135e9aaba66a613baa6826
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65242601"
---
# <a name="checklist-performing-weekly-performance-checks"></a><span data-ttu-id="39d1c-102">清单：执行每周性能检查</span><span class="sxs-lookup"><span data-stu-id="39d1c-102">Checklist: Performing Weekly Performance Checks</span></span>
<span data-ttu-id="39d1c-103">本主题列出了最佳做法，以避免性能问题时应遵循每周都会[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]系统。</span><span class="sxs-lookup"><span data-stu-id="39d1c-103">This topic lists best practices that you should follow on a weekly basis when to avoid performance issues with a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span>  


|                                       <span data-ttu-id="39d1c-104">步骤</span><span class="sxs-lookup"><span data-stu-id="39d1c-104">Steps</span></span>                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="39d1c-105">参考</span><span class="sxs-lookup"><span data-stu-id="39d1c-105">Reference</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                     <span data-ttu-id="39d1c-106">设置为固定数量的数据库自动增长</span><span class="sxs-lookup"><span data-stu-id="39d1c-106">Set database auto-growth to a fixed number</span></span>                     | <span data-ttu-id="39d1c-107">数据库自动增长应设置为固定数量的兆字节为单位，而不是百分比，尤其是对于 MessageBox 和跟踪 (DTA) 数据库。</span><span class="sxs-lookup"><span data-stu-id="39d1c-107">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking (DTA) databases.</span></span> <span data-ttu-id="39d1c-108">具体取决于你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序和吞吐量、 MessageBox 和跟踪数据库可能会非常大。</span><span class="sxs-lookup"><span data-stu-id="39d1c-108">Depending on your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="39d1c-109">如果自动增长设置为百分比，则自动增长可能是重大。</span><span class="sxs-lookup"><span data-stu-id="39d1c-109">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="39d1c-110">-如果系统为新系统，并且没有已明确建立静态大小，然后将文件配置为启用自动增长选项，并指定文件增长等手段在兆字节为单位。</span><span class="sxs-lookup"><span data-stu-id="39d1c-110">-   If the system is new and the static sizes have not been definitively established, then configure files with the Enable Autogrowth option and specify file growth In Megabytes.</span></span> <span data-ttu-id="39d1c-111">增长增量应通常不能大于 100 MB （对于大型文件）、 （适用于中型文件），10 MB 或 1 MB （对于小文件）。</span><span class="sxs-lookup"><span data-stu-id="39d1c-111">The growth increment should generally be no larger than 100 MB (for large files), 10 MB (for medium-sized files), or 1 MB (for small files).</span></span> <span data-ttu-id="39d1c-112">请参阅**附录 B – 建议使用 BizTalk Server 数据库配置**一部分[BizTalk Server 数据库优化白皮书](http://go.microsoft.com/fwlink/p/?LinkID=153594)(<http://go.microsoft.com/fwlink/p/?LinkID=153594>) 具有的建议的文件大小的表每个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="39d1c-112">See the **Appendix B – Recommended BizTalk Server Database Configuration** section of the [BizTalk Server Database Optimization white paper](http://go.microsoft.com/fwlink/p/?LinkID=153594) (<http://go.microsoft.com/fwlink/p/?LinkID=153594>) for a table with suggested files sizes for each of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> |
|             <span data-ttu-id="39d1c-113">限制您使用 SQL Server Profiler 来监视的事件</span><span class="sxs-lookup"><span data-stu-id="39d1c-113">Limit the events that you monitor with SQL Server Profiler</span></span>             |                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="39d1c-114">使用 SQL Server Profiler 来监视感兴趣的事件。</span><span class="sxs-lookup"><span data-stu-id="39d1c-114">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="39d1c-115">如果跟踪变得太大，可以筛选它们基于所需的信息，以便收集事件数据的一个子集。</span><span class="sxs-lookup"><span data-stu-id="39d1c-115">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="39d1c-116">监视过多事件会增加服务器和监视进程的开销，并且可能导致跟踪文件或跟踪表变得很大，尤其是当监视进程持续很长时间时。</span><span class="sxs-lookup"><span data-stu-id="39d1c-116">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>                                                                                                                                                                                                                                                                                                                                                                 |
|             <span data-ttu-id="39d1c-117">配置消息批处理以提高适配器性能</span><span class="sxs-lookup"><span data-stu-id="39d1c-117">Configure message batching to increase adapter performance</span></span>             |                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="39d1c-118">-执行由适配器通过组合多个到单个批处理操作的事务的数量降至最低。</span><span class="sxs-lookup"><span data-stu-id="39d1c-118">-   Minimize the number of transactions performed by an adapter by combining more than one operation into a single batch.</span></span><br /><span data-ttu-id="39d1c-119">-限制基于总消息计数除了在批处理中的字节数的批大小。</span><span class="sxs-lookup"><span data-stu-id="39d1c-119">-   Limit the batch size based on the total number of bytes in the batch, in addition to message count.</span></span> <span data-ttu-id="39d1c-120">有关限制批处理大小的详细信息，请参阅[提高适配器性能配置批处理](../technical-guides/configuring-batching-to-improve-adapter-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="39d1c-120">For more information about limiting the batch size, see [Configuring Batching to Improve Adapter Performance](../technical-guides/configuring-batching-to-improve-adapter-performance.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                              |
|                         <span data-ttu-id="39d1c-121">调整大消息阈值</span><span class="sxs-lookup"><span data-stu-id="39d1c-121">Adjust the large message threshold</span></span>                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="39d1c-122">若要增加吞吐量，增加大消息阈值，这样就降低了大型进行缓冲的消息数为在映射期间的磁盘。</span><span class="sxs-lookup"><span data-stu-id="39d1c-122">To improve throughput, increase the large message threshold, which lowers the number of large messages that are buffered to disk during mapping.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="39d1c-123">调查内存泄漏或 BizTalk Server 进程中的内存不足异常</span><span class="sxs-lookup"><span data-stu-id="39d1c-123">Investigate memory leaks or out-of-memory exceptions in the BizTalk Server process</span></span> |                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="39d1c-124">BizTalk 进程中的内存泄漏可能由于各种原因。</span><span class="sxs-lookup"><span data-stu-id="39d1c-124">Memory leaks in BizTalk processes can occur due to varied reasons.</span></span> <span data-ttu-id="39d1c-125">请参阅 Microsoft 知识库文章 918643，[如何排查内存泄漏或 BizTalk Server 进程中的出现内存不足异常](http://go.microsoft.com/fwlink/p/?LinkId=157212)(<http://go.microsoft.com/fwlink/p/?LinkId=157212>) 的方案中可能发生内存泄漏，有关信息和如何修复此错误。</span><span class="sxs-lookup"><span data-stu-id="39d1c-125">See Microsoft Knowledge Base Article 918643, [How to troubleshoot a memory leak or an out-of-memory exception in the BizTalk Server process](http://go.microsoft.com/fwlink/p/?LinkId=157212) (<http://go.microsoft.com/fwlink/p/?LinkId=157212>) for information about the scenarios in which a memory leak may occur, and how to fix it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |

## <a name="see-also"></a><span data-ttu-id="39d1c-126">请参阅</span><span class="sxs-lookup"><span data-stu-id="39d1c-126">See Also</span></span>  
 <span data-ttu-id="39d1c-127">[例程性能清单](../technical-guides/routine-performance-checklists.md) </span><span class="sxs-lookup"><span data-stu-id="39d1c-127">[Routine Performance Checklists](../technical-guides/routine-performance-checklists.md) </span></span>  
 [<span data-ttu-id="39d1c-128">清单：执行每月性能检查</span><span class="sxs-lookup"><span data-stu-id="39d1c-128">Checklist: Performing Monthly Performance Checks</span></span>](../technical-guides/checklist-performing-monthly-performance-checks.md)