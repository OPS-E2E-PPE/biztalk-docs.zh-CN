---
title: BizTalk ESB 工具包的体系结构 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a41674f5-5ea4-4a8f-a270-b67fd6854028
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c6a85e8e98e7ea2874935656553b18abac7ca88a
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
ms.locfileid: "26007846"
---
# <a name="architecture-of-the-biztalk-esb-toolkit"></a><span data-ttu-id="e215d-102">BizTalk ESB 工具包的体系结构</span><span class="sxs-lookup"><span data-stu-id="e215d-102">Architecture of the BizTalk ESB Toolkit</span></span>
<span data-ttu-id="e215d-103">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]支持和实现松散耦合的消息传递环境，它使更轻松地生成基于消息的企业应用程序的组件进行互操作的一系列组成。</span><span class="sxs-lookup"><span data-stu-id="e215d-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] consists of a series of interoperating components that support and implement a loosely coupled messaging environment that makes it easier to build message-based enterprise applications.</span></span> <span data-ttu-id="e215d-104">服务和组件自然地划分为以下的七种类别：</span><span class="sxs-lookup"><span data-stu-id="e215d-104">The services and components fall naturally into the following seven categories:</span></span>  
  
-   <span data-ttu-id="e215d-105">**Web 服务。**</span><span class="sxs-lookup"><span data-stu-id="e215d-105">**Web services.**</span></span> <span data-ttu-id="e215d-106">这些公开内部服务，例如路线处理、 异常管理解析终结点和地图，BizTalk 服务器操作、 通用、 描述、 发现和集成 (UDDI) 进行互操作，以及消息内容的转换.</span><span class="sxs-lookup"><span data-stu-id="e215d-106">These expose internal services such as itinerary processing, exception management, resolution of endpoints and maps, BizTalk Server operations, Universal Description, Discovery, and Integration (UDDI) interoperation, and transformation of message content.</span></span>  
  
-   <span data-ttu-id="e215d-107">**路线服务。**</span><span class="sxs-lookup"><span data-stu-id="e215d-107">**Itinerary services.**</span></span> <span data-ttu-id="e215d-108">其中包括用于执行转换和路由消息的基于业务流程的和基于消息的服务。</span><span class="sxs-lookup"><span data-stu-id="e215d-108">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="e215d-109">你可以在路线处理过程中创建参与的自定义服务。</span><span class="sxs-lookup"><span data-stu-id="e215d-109">You can create custom services that participate in Itinerary processing.</span></span> <span data-ttu-id="e215d-110">其中包括用于执行转换和路由消息的基于业务流程的和基于消息的服务。</span><span class="sxs-lookup"><span data-stu-id="e215d-110">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="e215d-111">你可以在路线处理过程中创建参与的自定义服务。</span><span class="sxs-lookup"><span data-stu-id="e215d-111">You can create custom services that participate in Itinerary processing.</span></span>  
  
-   <span data-ttu-id="e215d-112">**路线上的渐变。**</span><span class="sxs-lookup"><span data-stu-id="e215d-112">**Itinerary on-ramps.**</span></span> <span data-ttu-id="e215d-113">这些接收外部消息、 附加相应路线每条消息，并执行路线处理;它们使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和用于动态解析终结点以及元数据适配器提供程序框架。</span><span class="sxs-lookup"><span data-stu-id="e215d-113">These receive external messages, attach the appropriate itinerary for each message, and perform itinerary processing; they use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="e215d-114">**渐变。**</span><span class="sxs-lookup"><span data-stu-id="e215d-114">**On-ramps.**</span></span> <span data-ttu-id="e215d-115">与不同的路线上-渐变，这些格式和传输协议，如 HTTP、 Java 消息服务 (JMS)、 IBM WebSphere MQ (WMQ)、 文件传输协议 (FTP)、 平面文件和 XML 的一系列中接收外部的消息。</span><span class="sxs-lookup"><span data-stu-id="e215d-115">Unlike itinerary on-ramps, these receive external messages in a range of formats and transports, such as HTTP, Java Message Service (JMS), IBM WebSphere MQ (WMQ), File Transfer Protocol (FTP), Flat File, and XML.</span></span> <span data-ttu-id="e215d-116">它们是典型的 BizTalk Server 接收 （可选） 使用的位置[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]互操作管道组件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和用于动态解析终结点以及元数据适配器提供程序框架。</span><span class="sxs-lookup"><span data-stu-id="e215d-116">They are typical BizTalk Server receive locations that optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="e215d-117">**关闭渐变。**</span><span class="sxs-lookup"><span data-stu-id="e215d-117">**Off-ramps.**</span></span> <span data-ttu-id="e215d-118">这些实现发送端口使用的格式和传输如 WCF、 JMS、 WMQ、 FTP、 HTTP、 平面文件、 XML 或任何其他自定义格式的消息传递。</span><span class="sxs-lookup"><span data-stu-id="e215d-118">These implement send ports for the delivery of messages using formats and transports such as WCF, JMS, WMQ, FTP, HTTP, Flat File, XML, or any other custom formats.</span></span> <span data-ttu-id="e215d-119">它们是动态发送端口被直接绑定到消息框和 （可选） 使用的典型 BizTalk Server[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]互操作管道组件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]解析器和用于动态终结点解析适配器提供程序框架和元数据。</span><span class="sxs-lookup"><span data-stu-id="e215d-119">They are typical BizTalk Server dynamic send ports that are direct-bound to the Message Box and optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
-   <span data-ttu-id="e215d-120">**异常管理框架。**</span><span class="sxs-lookup"><span data-stu-id="e215d-120">**Exception Management Framework.**</span></span> <span data-ttu-id="e215d-121">这包括异常 Web 服务、 异常管理 API 和扩充、 处理和传递给 ESB 管理门户的异常详细信息的组件。</span><span class="sxs-lookup"><span data-stu-id="e215d-121">This includes the exception Web service, the exception management API, and components that enrich, process, and pass exception details to the ESB Management Portal.</span></span>  
  
-   <span data-ttu-id="e215d-122">**ESB 管理门户。**</span><span class="sxs-lookup"><span data-stu-id="e215d-122">**ESB Management Portal.**</span></span> <span data-ttu-id="e215d-123">此示例应用程序提供注册表设置、 异常中介，警报通知和分析。</span><span class="sxs-lookup"><span data-stu-id="e215d-123">This sample application provides registry provisioning, exception mediation, alert notification, and analytics.</span></span>  
  
 <span data-ttu-id="e215d-124">这些组件和服务的许多依赖于由 BizTalk Server 中，如业务流程、 转换和业务规则引擎和消息框数据库实现的功能。</span><span class="sxs-lookup"><span data-stu-id="e215d-124">Many of these components and services rely on features implemented by BizTalk Server, such as the Orchestration, Transformation, and Business Rules engines and the Message Box database.</span></span> <span data-ttu-id="e215d-125">图 1 显示的类别、 组件和服务中每个类别，通常发生的示意图和核心 BizTalk Server 系统组件由[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e215d-125">Figure 1 shows a schematic view of the categories, the components and services typically occurring within each category, and the core BizTalk Server system components used by the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)].</span></span>  
  
 <span data-ttu-id="e215d-126">![ESB 体系结构](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span><span class="sxs-lookup"><span data-stu-id="e215d-126">![ESB Architecture](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span></span>  
  
 <span data-ttu-id="e215d-127">**图 1**</span><span class="sxs-lookup"><span data-stu-id="e215d-127">**Figure 1**</span></span>  
  
 <span data-ttu-id="e215d-128">**体系结构和组件[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span><span class="sxs-lookup"><span data-stu-id="e215d-128">**The architecture and components of the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span></span>  
  
## <a name="how-the-biztalk-esb-toolkit-works"></a><span data-ttu-id="e215d-129">BizTalk ESB 工具包的工作原理</span><span class="sxs-lookup"><span data-stu-id="e215d-129">How the BizTalk ESB Toolkit Works</span></span>  
 <span data-ttu-id="e215d-130">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]接受入站的消息，并对它们，可能 （但不是总是） 通过执行转换等的进程，路由，或任何其他自定义过程。</span><span class="sxs-lookup"><span data-stu-id="e215d-130">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] accepts inbound messages and operates on them, perhaps (but not always) by performing processes such as transformation, routing, or any other custom defined process.</span></span> <span data-ttu-id="e215d-131">若要指定的操作需要，核心处理组件需要每条消息都有一个传送名单，其中包含关联的说明或定义要应用的进程的元数据和用于执行与消息内容的任务。</span><span class="sxs-lookup"><span data-stu-id="e215d-131">To specify the operations required, the core processing components require each message to have a routing slip that contains associated instructions or metadata that define the processes to apply and the tasks to execute with the message content.</span></span> <span data-ttu-id="e215d-132">这些路由滑动称为路线和可以自动解决、 检索从中央存储库，和它接收到入口时附加到消息。</span><span class="sxs-lookup"><span data-stu-id="e215d-132">These routing slips are referred to as itineraries and can be automatically resolved, retrieved from a central repository, and attached to a message when it is received by an on-ramp.</span></span>  
  
 <span data-ttu-id="e215d-133">此路由滑动方法提供服务，这意味着 ESB 不需要为每个消息事先了解特定的处理之间的松散耦合。</span><span class="sxs-lookup"><span data-stu-id="e215d-133">This routing slip approach provides loose coupling between services, meaning that the ESB does not require prior knowledge of the specific processing for each message.</span></span> <span data-ttu-id="e215d-134">它只是必须知道进程的可能范围以及如何将应用每个进程。</span><span class="sxs-lookup"><span data-stu-id="e215d-134">It just has to know what the possible range of processes is and how to apply each process.</span></span> <span data-ttu-id="e215d-135">用于指定可用进程及进程与消息中说明间映射的选项众多，它们提供了一个配置和调整行为的灵活机制，不需要更改代码和重新部署组件。</span><span class="sxs-lookup"><span data-stu-id="e215d-135">The wide range of options for specifying the available processes and the mapping between the processes and the instructions within messages provides a flexible mechanism for configuring and adjusting behavior, without requiring changes to code and redeployment of components.</span></span>  
  
## <a name="design-patterns"></a><span data-ttu-id="e215d-136">设计模式</span><span class="sxs-lookup"><span data-stu-id="e215d-136">Design Patterns</span></span>  
 <span data-ttu-id="e215d-137">ESB 使用，其中进程存款消息在消息框数据库和订阅服务器中选取它们基于在消息中，处理指令的体系结构有效地实现的状态机设计模式。</span><span class="sxs-lookup"><span data-stu-id="e215d-137">The architecture that ESB uses, where processes deposit messages in the Message Box database and subscribers pick them up based on a processing instruction in the message, effectively implements the state-machine design pattern.</span></span> <span data-ttu-id="e215d-138">此外，ESB 实现，并以面向服务的方式，其中包括与外部应用程序可以通过一组核心 Web 服务公开其核心功能。</span><span class="sxs-lookup"><span data-stu-id="e215d-138">In addition, the ESB implements and exposes its core functionality in a services-oriented manner, including to external applications through a set of core Web services.</span></span>  
  
 <span data-ttu-id="e215d-139">这松散耦合方法的设计 BizTalk Server 和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-基于应用程序生成的高度灵活的解决方案，并且已变得行业认可的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="e215d-139">This loosely coupled approach to designing BizTalk Server and [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-based applications yields highly flexible solutions and has become an industry-accepted best practice.</span></span>