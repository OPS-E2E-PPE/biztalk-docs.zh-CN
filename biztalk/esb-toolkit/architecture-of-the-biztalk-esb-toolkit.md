---
title: BizTalk ESB 工具包的体系结构 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a41674f5-5ea4-4a8f-a270-b67fd6854028
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d9208b8321a3b1a3eae3d421cc1f46c1cf40df4e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65392276"
---
# <a name="architecture-of-the-biztalk-esb-toolkit"></a><span data-ttu-id="4b2f0-102">BizTalk ESB 工具包的体系结构</span><span class="sxs-lookup"><span data-stu-id="4b2f0-102">Architecture of the BizTalk ESB Toolkit</span></span>
<span data-ttu-id="4b2f0-103">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]系列进行互操作支持和实现松散耦合的消息传送环境可简化构建基于消息的企业应用程序组件组成。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-103">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] consists of a series of interoperating components that support and implement a loosely coupled messaging environment that makes it easier to build message-based enterprise applications.</span></span> <span data-ttu-id="4b2f0-104">服务和组件很自然地划分为以下七个类别：</span><span class="sxs-lookup"><span data-stu-id="4b2f0-104">The services and components fall naturally into the following seven categories:</span></span>  
  
- <span data-ttu-id="4b2f0-105">**Web 服务。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-105">**Web services.**</span></span> <span data-ttu-id="4b2f0-106">这些公开内部服务，例如路线处理、 异常管理终结点和映射，BizTalk Server 操作、 通用描述、 发现和集成 (UDDI) 互操作和转换消息内容的解决方法.</span><span class="sxs-lookup"><span data-stu-id="4b2f0-106">These expose internal services such as itinerary processing, exception management, resolution of endpoints and maps, BizTalk Server operations, Universal Description, Discovery, and Integration (UDDI) interoperation, and transformation of message content.</span></span>  
  
- <span data-ttu-id="4b2f0-107">**路线服务。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-107">**Itinerary services.**</span></span> <span data-ttu-id="4b2f0-108">其中包括用于执行转换和消息路由基于业务流程和基于消息的服务。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-108">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="4b2f0-109">在路线处理过程中，可以创建自定义参与的服务。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-109">You can create custom services that participate in Itinerary processing.</span></span> <span data-ttu-id="4b2f0-110">其中包括用于执行转换和消息路由基于业务流程和基于消息的服务。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-110">These include orchestration-based and messaging-based services for performing transformations and message routing.</span></span> <span data-ttu-id="4b2f0-111">在路线处理过程中，可以创建自定义参与的服务。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-111">You can create custom services that participate in Itinerary processing.</span></span>  
  
- <span data-ttu-id="4b2f0-112">**路线接入。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-112">**Itinerary on-ramps.**</span></span> <span data-ttu-id="4b2f0-113">这些接收外部消息、 附加为每个消息，适当的旅行计划和执行路线处理;它们使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]冲突解决程序和适配器提供程序框架，用于动态解析的终结点和元数据。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-113">These receive external messages, attach the appropriate itinerary for each message, and perform itinerary processing; they use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
- <span data-ttu-id="4b2f0-114">**接入。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-114">**On-ramps.**</span></span> <span data-ttu-id="4b2f0-115">与不同的路线接入，这些接收外部消息格式和传输，如 HTTP、 Java 消息服务 (JMS)、 IBM WebSphere MQ (WMQ)、 文件传输协议 (FTP)、 平面文件和 XML 的范围内。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-115">Unlike itinerary on-ramps, these receive external messages in a range of formats and transports, such as HTTP, Java Message Service (JMS), IBM WebSphere MQ (WMQ), File Transfer Protocol (FTP), Flat File, and XML.</span></span> <span data-ttu-id="4b2f0-116">它们是典型的 BizTalk Server 接收位置 （可选） 使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]互操作的管道组件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]冲突解决程序和适配器提供程序框架，用于动态解析的终结点和元数据。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-116">They are typical BizTalk Server receive locations that optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
- <span data-ttu-id="4b2f0-117">**接出点。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-117">**Off-ramps.**</span></span> <span data-ttu-id="4b2f0-118">这些实现的发送端口使用的格式和传输如 WCF、 JMS、 WMQ、 FTP、 HTTP、 平面文件、 XML 或任何其他自定义格式的消息传递。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-118">These implement send ports for the delivery of messages using formats and transports such as WCF, JMS, WMQ, FTP, HTTP, Flat File, XML, or any other custom formats.</span></span> <span data-ttu-id="4b2f0-119">它们是典型的 BizTalk Server 会直接绑定的动态发送端口消息框中，还可以选择使用[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]互操作的管道组件和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]冲突解决程序和适配器提供程序框架，用于动态解析的终结点和元数据。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-119">They are typical BizTalk Server dynamic send ports that are direct-bound to the Message Box and optionally use the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] interop pipeline components and the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] Resolver and Adapter Provider Framework for dynamic resolution of endpoints and metadata.</span></span>  
  
- <span data-ttu-id="4b2f0-120">**异常管理框架。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-120">**Exception Management Framework.**</span></span> <span data-ttu-id="4b2f0-121">这包括异常 Web 服务、 异常管理 API，以及组件的丰富、 处理，并将异常详细信息传递到 ESB 管理门户。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-121">This includes the exception Web service, the exception management API, and components that enrich, process, and pass exception details to the ESB Management Portal.</span></span>  
  
- <span data-ttu-id="4b2f0-122">**ESB 管理门户。**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-122">**ESB Management Portal.**</span></span> <span data-ttu-id="4b2f0-123">此示例应用程序提供注册预配、 异常中介、 警报通知和分析。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-123">This sample application provides registry provisioning, exception mediation, alert notification, and analytics.</span></span>  
  
  <span data-ttu-id="4b2f0-124">许多这些组件和服务的依赖功能由 BizTalk Server 中，例如业务流程、 转换和业务规则引擎和 Messagebox 数据库实现。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-124">Many of these components and services rely on features implemented by BizTalk Server, such as the Orchestration, Transformation, and Business Rules engines and the Message Box database.</span></span> <span data-ttu-id="4b2f0-125">图 1 显示了示意图类别、 组件和服务通常发生在每个类别中，并通过使用核心 BizTalk Server 系统组件[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-125">Figure 1 shows a schematic view of the categories, the components and services typically occurring within each category, and the core BizTalk Server system components used by the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)].</span></span>  
  
  <span data-ttu-id="4b2f0-126">![ESB 体系结构](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span><span class="sxs-lookup"><span data-stu-id="4b2f0-126">![ESB Architecture](../esb-toolkit/media/esbarchitecture.gif "ESBArchitecture")</span></span>  
  
  <span data-ttu-id="4b2f0-127">**图 1**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-127">**Figure 1**</span></span>  
  
  <span data-ttu-id="4b2f0-128">**体系结构和组件 [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span><span class="sxs-lookup"><span data-stu-id="4b2f0-128">**The architecture and components of the [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]**</span></span>  
  
## <a name="how-the-biztalk-esb-toolkit-works"></a><span data-ttu-id="4b2f0-129">BizTalk ESB 工具包的工作原理</span><span class="sxs-lookup"><span data-stu-id="4b2f0-129">How the BizTalk ESB Toolkit Works</span></span>  
 <span data-ttu-id="4b2f0-130">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]接受入站的消息并对其进行操作，可能是 （但不是总是） 通过执行进程，例如转换，路由，或任何其他自定义进程。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-130">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] accepts inbound messages and operates on them, perhaps (but not always) by performing processes such as transformation, routing, or any other custom defined process.</span></span> <span data-ttu-id="4b2f0-131">若要指定的操作需要，核心处理组件需要每条消息具有传送名单，其中包含关联的说明或定义应用的进程的元数据和要使用消息内容执行的任务。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-131">To specify the operations required, the core processing components require each message to have a routing slip that contains associated instructions or metadata that define the processes to apply and the tasks to execute with the message content.</span></span> <span data-ttu-id="4b2f0-132">这些路由滑动称为路线和可以自动解决，检索从中央存储库，和附加到消息时接收到的途径。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-132">These routing slips are referred to as itineraries and can be automatically resolved, retrieved from a central repository, and attached to a message when it is received by an on-ramp.</span></span>  
  
 <span data-ttu-id="4b2f0-133">此路由的名单方法提供服务，这意味着 ESB 不需要事先了解的特定处理每条消息之间的松散耦合。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-133">This routing slip approach provides loose coupling between services, meaning that the ESB does not require prior knowledge of the specific processing for each message.</span></span> <span data-ttu-id="4b2f0-134">它只须了解可能的进程范围是什么以及如何将应用每个进程。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-134">It just has to know what the possible range of processes is and how to apply each process.</span></span> <span data-ttu-id="4b2f0-135">多种选项用于指定可用进程及进程与消息中的说明进行操作之间的映射提供了用于配置和调整行为，而无需更改代码和重新部署的灵活机制组件。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-135">The wide range of options for specifying the available processes and the mapping between the processes and the instructions within messages provides a flexible mechanism for configuring and adjusting behavior, without requiring changes to code and redeployment of components.</span></span>  
  
## <a name="design-patterns"></a><span data-ttu-id="4b2f0-136">设计模式</span><span class="sxs-lookup"><span data-stu-id="4b2f0-136">Design Patterns</span></span>  
 <span data-ttu-id="4b2f0-137">使用 ESB，其中进程 Messagebox 数据库中存放消息和订阅服务器中选取它们基于在消息中，处理指令的体系结构有效地实现状态机设计模式。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-137">The architecture that ESB uses, where processes deposit messages in the Message Box database and subscribers pick them up based on a processing instruction in the message, effectively implements the state-machine design pattern.</span></span> <span data-ttu-id="4b2f0-138">此外，ESB 实现，并在面向服务的方式，包括对外部应用程序通过一系列核心 Web 服务中公开其核心功能。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-138">In addition, the ESB implements and exposes its core functionality in a services-oriented manner, including to external applications through a set of core Web services.</span></span>  
  
 <span data-ttu-id="4b2f0-139">这松散耦合的设计 BizTalk Server 的方法和[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-基于应用程序生成高度灵活的解决方案和已经成为行业接受的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="4b2f0-139">This loosely coupled approach to designing BizTalk Server and [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]-based applications yields highly flexible solutions and has become an industry-accepted best practice.</span></span>