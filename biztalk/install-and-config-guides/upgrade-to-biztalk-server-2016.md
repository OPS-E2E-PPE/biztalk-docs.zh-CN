---
title: 升级到 BizTalk Server 2016 |Microsoft 文档
ms.custom: ''
ms.prod: biztalk-server
ms.date: 06/08/2017
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 975ec82b-ed27-4545-8e4a-0e567507c9ba
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 39b5b6b6da7d97d3c763e5f45f215aa03d13c77c
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2018
---
# <a name="upgrade-to-biztalk-server-2016"></a><span data-ttu-id="ae256-102">升级到 BizTalk Server 2016</span><span class="sxs-lookup"><span data-stu-id="ae256-102">Upgrade to BizTalk Server 2016</span></span>
<span data-ttu-id="ae256-103">从 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] 或 BizTalk Server 2013 升级到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ae256-103">Upgrading to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] from [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)], or BizTalk Server 2013.</span></span>

<span data-ttu-id="ae256-104">本主题简要介绍 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 升级过程、重要信息，以及从 BizTalk Server 2013 R2 或 BizTalk Server 2013 进行升级的分步说明。</span><span class="sxs-lookup"><span data-stu-id="ae256-104">This topic provides an overview of the [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] upgrade process, key information, and step-by-step instructions for upgrading from BizTalk Server 2013 R2 or BizTalk Server 2013.</span></span>


## <a name="upgrade-overview"></a><span data-ttu-id="ae256-105">升级概述</span><span class="sxs-lookup"><span data-stu-id="ae256-105">Upgrade overview</span></span>

- <span data-ttu-id="ae256-106">升级之前，请阅读整篇文档。</span><span class="sxs-lookup"><span data-stu-id="ae256-106">Read this entire document before you upgrade.</span></span> <span data-ttu-id="ae256-107">BizTalk Server 可以将很多不同的组件（内部和外部）连接到你的企业。</span><span class="sxs-lookup"><span data-stu-id="ae256-107">BizTalk Server connects many disparate components, both internal and external, to your enterprise.</span></span> <span data-ttu-id="ae256-108">大多数实际的部署方案都会进一步扩展，以包括多台服务器，最终包括物理和虚拟计算机群集。</span><span class="sxs-lookup"><span data-stu-id="ae256-108">Most real-world deployment scenarios extend much farther to include multiple servers and eventually clusters of both physical and virtual computers.</span></span>

- <span data-ttu-id="ae256-109">没有任何两个 BizTalk Server 的部署是相同的。</span><span class="sxs-lookup"><span data-stu-id="ae256-109">No two BizTalk Server deployments are the same.</span></span> <span data-ttu-id="ae256-110">在升级之前，请先根据企业需要收集信息，并与将使用 BizTalk Server 的 IT 专家、系统管理员及开发人员讨论部署范围。</span><span class="sxs-lookup"><span data-stu-id="ae256-110">Before you upgrade, gather information on your enterprise needs, and discuss the scope of your deployment with the IT Professionals, System Administrators, and Developers who use BizTalk Server.</span></span> <span data-ttu-id="ae256-111">通过学习此升级指南并确定企业的具体需求，可创建出属于自己的部署指南。</span><span class="sxs-lookup"><span data-stu-id="ae256-111">By studying this upgrade guide, and determining the specific needs of your enterprise, you are creating your own deployment roadmap.</span></span>

- <span data-ttu-id="ae256-112">使用 BizTalk Server 最佳实践分析工具 (BPA)，检查 BizTalk Server 部署，并生成最佳实践列表。</span><span class="sxs-lookup"><span data-stu-id="ae256-112">Use the BizTalk Server Best Practices Analyzer (BPA) to examine a BizTalk Server deployment, and generate a list of best practices.</span></span> <span data-ttu-id="ae256-113">BPA 只通过读取和报告的方式执行配置级别验证，它使用收集到的数据来确定是否符合最佳实践。</span><span class="sxs-lookup"><span data-stu-id="ae256-113">BPA performs configuration-level verification, by reading and reporting only, and uses the gathered data to determine whether best practices are being followed.</span></span>

### <a name="planning-your-upgrade"></a><span data-ttu-id="ae256-114">规划升级</span><span class="sxs-lookup"><span data-stu-id="ae256-114">Planning your upgrade</span></span>

<span data-ttu-id="ae256-115">以下是升级过程的高级视图。</span><span class="sxs-lookup"><span data-stu-id="ae256-115">The following is a high-level view of the upgrade process.</span></span> <span data-ttu-id="ae256-116">必须按所示顺序完成所列的每个步骤。</span><span class="sxs-lookup"><span data-stu-id="ae256-116">Each of the steps listed must be run in the order shown.</span></span>

- <span data-ttu-id="ae256-117">操作系统升级路径</span><span class="sxs-lookup"><span data-stu-id="ae256-117">Operating systems upgrade paths</span></span>
- <span data-ttu-id="ae256-118">Microsoft SQL Server® 升级路径</span><span class="sxs-lookup"><span data-stu-id="ae256-118">Microsoft SQL Server® upgrade paths</span></span>
- <span data-ttu-id="ae256-119">Windows® SharePoint® Services 升级</span><span class="sxs-lookup"><span data-stu-id="ae256-119">Windows® SharePoint® Services upgrade</span></span>
- <span data-ttu-id="ae256-120">并行安装 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ae256-120">Install Visual Studio side-by-side</span></span>
- <span data-ttu-id="ae256-121">并行安装 Microsoft Office 2016/2013</span><span class="sxs-lookup"><span data-stu-id="ae256-121">Install Microsoft Office 2016/2013 side-by-side</span></span>

### <a name="supported-upgrade-paths"></a><span data-ttu-id="ae256-122">受支持的升级路径</span><span class="sxs-lookup"><span data-stu-id="ae256-122">Supported upgrade paths</span></span>
<span data-ttu-id="ae256-123">下表列出了可以升级到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的受支持操作系统。</span><span class="sxs-lookup"><span data-stu-id="ae256-123">The following table lists the supported operating systems that can be upgraded to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="ae256-124">“是”表示在该操作系统上运行的 BizTalk Server 版本可升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-124">“Yes” means the BizTalk Server version running on that operating system can be upgraded.</span></span> <span data-ttu-id="ae256-125">“否”表示在该操作系统上运行的 BizTalk Server 版本不可升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-125">“No” means the BizTalk Server version running on that operating system cannot be upgraded.</span></span> <span data-ttu-id="ae256-126">如果是“否”，则必须在受支持的操作系统上重新创建 BizTalk 环境。</span><span class="sxs-lookup"><span data-stu-id="ae256-126">When “No”, the BizTalk environment must be recreated on a supported operating system.</span></span>  <span data-ttu-id="ae256-127">[BizTalk Server 2016 的硬件和软件要求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)列出了受支持的操作系统。</span><span class="sxs-lookup"><span data-stu-id="ae256-127">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported operating systems.</span></span>

| <span data-ttu-id="ae256-128">操作系统</span><span class="sxs-lookup"><span data-stu-id="ae256-128">Operating Systems</span></span> | <span data-ttu-id="ae256-129">BizTalk Server 2013 R2</span><span class="sxs-lookup"><span data-stu-id="ae256-129">BizTalk Server 2013 R2</span></span> |<span data-ttu-id="ae256-130">BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="ae256-130">BizTalk Server 2013</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ae256-131">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="ae256-131">Windows Server 2012 R2</span></span> | <span data-ttu-id="ae256-132">是</span><span class="sxs-lookup"><span data-stu-id="ae256-132">Yes</span></span> | <span data-ttu-id="ae256-133">否</span><span class="sxs-lookup"><span data-stu-id="ae256-133">No</span></span> |
| <span data-ttu-id="ae256-134">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="ae256-134">Windows Server 2012</span></span> | <span data-ttu-id="ae256-135">否</span><span class="sxs-lookup"><span data-stu-id="ae256-135">No</span></span> | <span data-ttu-id="ae256-136">否</span><span class="sxs-lookup"><span data-stu-id="ae256-136">No</span></span> |
| <span data-ttu-id="ae256-137">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="ae256-137">Windows 8.1</span></span> | <span data-ttu-id="ae256-138">是</span><span class="sxs-lookup"><span data-stu-id="ae256-138">Yes</span></span> | <span data-ttu-id="ae256-139">否</span><span class="sxs-lookup"><span data-stu-id="ae256-139">No</span></span> |
| <span data-ttu-id="ae256-140">Windows 8</span><span class="sxs-lookup"><span data-stu-id="ae256-140">Windows 8</span></span> | <span data-ttu-id="ae256-141">否</span><span class="sxs-lookup"><span data-stu-id="ae256-141">No</span></span> | <span data-ttu-id="ae256-142">否</span><span class="sxs-lookup"><span data-stu-id="ae256-142">No</span></span>
| <span data-ttu-id="ae256-143">Windows 7 SP1</span><span class="sxs-lookup"><span data-stu-id="ae256-143">Windows 7 SP1</span></span> | <span data-ttu-id="ae256-144">否</span><span class="sxs-lookup"><span data-stu-id="ae256-144">No</span></span> | <span data-ttu-id="ae256-145">否</span><span class="sxs-lookup"><span data-stu-id="ae256-145">No</span></span> |

<span data-ttu-id="ae256-146">下表列出了可以升级到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的受支持 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-146">The following table lists the supported SQL Server versions that can be upgraded to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="ae256-147">SQL Server 可承载 BizTalk Server 所使用的数据库。</span><span class="sxs-lookup"><span data-stu-id="ae256-147">The SQL Server hosts the databases used by BizTalk Server.</span></span> <span data-ttu-id="ae256-148">“是”表示使用该 SQL Server 版本的 BizTalk Server 可以升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-148">“Yes” means BizTalk Server using that SQL Server version can be upgraded.</span></span> <span data-ttu-id="ae256-149">“否”表示使用该 SQL Server 版本的 BizTalk Server 不可升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-149">“No” means BizTalk Server using that SQL Server version cannot be upgraded.</span></span> <span data-ttu-id="ae256-150">如果是“否”，则必须在受支持的 SQL Server 版本上重新创建 BizTalk 环境。</span><span class="sxs-lookup"><span data-stu-id="ae256-150">When “No”, the BizTalk environment must be recreated on a supported SQL Server version.</span></span> <span data-ttu-id="ae256-151">[BizTalk Server 2016 的硬件和软件要求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)列出了受支持的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-151">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported SQL Server versions.</span></span> 

> [!TIP] 
> <span data-ttu-id="ae256-152">如果 SQL Server 版本不受支持，或不在下面的列表中，请查看 SQL Server 升级文档。</span><span class="sxs-lookup"><span data-stu-id="ae256-152">If you're SQL Server version isn't supported, or isn't in the following list, then review the SQL Server upgrade documentation.</span></span> <span data-ttu-id="ae256-153">SQL 升级所适用的版本比 BizTalk 支持的版本更多。</span><span class="sxs-lookup"><span data-stu-id="ae256-153">The SQL upgrade covers more versions than what BizTalk supports.</span></span> <span data-ttu-id="ae256-154">例如，如果使用的是 SQL Server 2008，则可以升级到 SQL Server 2016。</span><span class="sxs-lookup"><span data-stu-id="ae256-154">For example, if you're using SQL Server 2008, you may be able to upgrade SQL Server 2016.</span></span> <span data-ttu-id="ae256-155">然后，可以升级到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ae256-155">Then, you can upgrade to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="ae256-156">[升级到 SQL Server 2016](https://msdn.microsoft.com/library/bb677622.aspx) 和[升级到 SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx) 列出了可升级的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-156">[Upgrade to SQL Server 2016](https://msdn.microsoft.com/library/bb677622.aspx) and [Upgrade to SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx) lists the SQL Server versions that can be upgraded.</span></span>

| <span data-ttu-id="ae256-157">SQL Server</span><span class="sxs-lookup"><span data-stu-id="ae256-157">SQL Server</span></span> | <span data-ttu-id="ae256-158">BizTalk Server 2013 R2</span><span class="sxs-lookup"><span data-stu-id="ae256-158">BizTalk Server 2013 R2</span></span> |<span data-ttu-id="ae256-159">BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="ae256-159">BizTalk Server 2013</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ae256-160">SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="ae256-160">SQL Server 2014</span></span> | <span data-ttu-id="ae256-161">是</span><span class="sxs-lookup"><span data-stu-id="ae256-161">Yes</span></span> | <span data-ttu-id="ae256-162">否</span><span class="sxs-lookup"><span data-stu-id="ae256-162">No</span></span> |
| <span data-ttu-id="ae256-163">SQL Server 2012 SP1</span><span class="sxs-lookup"><span data-stu-id="ae256-163">SQL Server 2012 SP1</span></span>| <span data-ttu-id="ae256-164">否</span><span class="sxs-lookup"><span data-stu-id="ae256-164">No</span></span> | <span data-ttu-id="ae256-165">否</span><span class="sxs-lookup"><span data-stu-id="ae256-165">No</span></span> |
| <span data-ttu-id="ae256-166">SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="ae256-166">SQL Server 2012</span></span> | <span data-ttu-id="ae256-167">否</span><span class="sxs-lookup"><span data-stu-id="ae256-167">No</span></span> | <span data-ttu-id="ae256-168">否</span><span class="sxs-lookup"><span data-stu-id="ae256-168">No</span></span> |
| <span data-ttu-id="ae256-169">SQL Server 2008 R2 SP1</span><span class="sxs-lookup"><span data-stu-id="ae256-169">SQL Server 2008 R2 SP1</span></span> | <span data-ttu-id="ae256-170">否</span><span class="sxs-lookup"><span data-stu-id="ae256-170">No</span></span> | <span data-ttu-id="ae256-171">否</span><span class="sxs-lookup"><span data-stu-id="ae256-171">No</span></span> |


<span data-ttu-id="ae256-172">下表列出了 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 这些版本中支持的版本升级路径。</span><span class="sxs-lookup"><span data-stu-id="ae256-172">The following table lists the supported Edition upgrade path from [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="ae256-173">“是”表示 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 版本可升级到该版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-173">“Yes” means the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 edition can be upgraded to the edition.</span></span> <span data-ttu-id="ae256-174">“否”表示 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 版本不可升级到该版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-174">“No” means the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 edition cannot be upgraded to the edition.</span></span> <span data-ttu-id="ae256-175">如果是“否”，则必须重新创建 BizTalk 环境。</span><span class="sxs-lookup"><span data-stu-id="ae256-175">When “No”, the BizTalk environment must be recreated.</span></span>

| <span data-ttu-id="ae256-176">BizTalk Server 2013 R2/2013</span><span class="sxs-lookup"><span data-stu-id="ae256-176">BizTalk Server 2013 R2/2013</span></span> | <span data-ttu-id="ae256-177">BizTalk Server 2016 Evaluation Edition</span><span class="sxs-lookup"><span data-stu-id="ae256-177">BizTalk Server 2016 Evaluation Edition</span></span> | <span data-ttu-id="ae256-178">BizTalk Server 2016 Branch Edition</span><span class="sxs-lookup"><span data-stu-id="ae256-178">BizTalk Server 2016 Branch Edition</span></span> | <span data-ttu-id="ae256-179">BizTalk Server 2016 Developer Edition</span><span class="sxs-lookup"><span data-stu-id="ae256-179">BizTalk Server 2016 Developer Edition</span></span> | <span data-ttu-id="ae256-180">BizTalk Server 2016 Standard Edition</span><span class="sxs-lookup"><span data-stu-id="ae256-180">BizTalk Server 2016 Standard Edition</span></span> | <span data-ttu-id="ae256-181">BizTalk Server 2016 Enterprise Edition</span><span class="sxs-lookup"><span data-stu-id="ae256-181">BizTalk Server 2016 Enterprise Edition</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ae256-182">Evaluation</span><span class="sxs-lookup"><span data-stu-id="ae256-182">Evaluation</span></span> | <span data-ttu-id="ae256-183">否</span><span class="sxs-lookup"><span data-stu-id="ae256-183">No</span></span> | <span data-ttu-id="ae256-184">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-184">No</span></span> | <span data-ttu-id="ae256-185">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-185">No</span></span> | <span data-ttu-id="ae256-186">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-186">No</span></span> | <span data-ttu-id="ae256-187">是</span><span class="sxs-lookup"><span data-stu-id="ae256-187">Yes</span></span> | 
| <span data-ttu-id="ae256-188">Branch</span><span class="sxs-lookup"><span data-stu-id="ae256-188">Branch</span></span> | <span data-ttu-id="ae256-189">否</span><span class="sxs-lookup"><span data-stu-id="ae256-189">No</span></span> | <span data-ttu-id="ae256-190">是</span><span class="sxs-lookup"><span data-stu-id="ae256-190">Yes</span></span> | <span data-ttu-id="ae256-191">是</span><span class="sxs-lookup"><span data-stu-id="ae256-191">No</span></span> | <span data-ttu-id="ae256-192">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-192">No</span></span> | <span data-ttu-id="ae256-193">是</span><span class="sxs-lookup"><span data-stu-id="ae256-193">Yes</span></span> | 
| <span data-ttu-id="ae256-194">Developer</span><span class="sxs-lookup"><span data-stu-id="ae256-194">Developer</span></span> | <span data-ttu-id="ae256-195">否</span><span class="sxs-lookup"><span data-stu-id="ae256-195">No</span></span> | <span data-ttu-id="ae256-196">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-196">No</span></span> | <span data-ttu-id="ae256-197">是</span><span class="sxs-lookup"><span data-stu-id="ae256-197">Yes</span></span> | <span data-ttu-id="ae256-198">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-198">No</span></span> | <span data-ttu-id="ae256-199">是</span><span class="sxs-lookup"><span data-stu-id="ae256-199">Yes</span></span> | 
| <span data-ttu-id="ae256-200">Standard</span><span class="sxs-lookup"><span data-stu-id="ae256-200">Standard</span></span> | <span data-ttu-id="ae256-201">否</span><span class="sxs-lookup"><span data-stu-id="ae256-201">No</span></span> | <span data-ttu-id="ae256-202">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-202">No</span></span> | <span data-ttu-id="ae256-203">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-203">No</span></span> | <span data-ttu-id="ae256-204">用户帐户控制</span><span class="sxs-lookup"><span data-stu-id="ae256-204">Yes</span></span> | <span data-ttu-id="ae256-205">是</span><span class="sxs-lookup"><span data-stu-id="ae256-205">Yes</span></span> | 
| <span data-ttu-id="ae256-206">Enterprise</span><span class="sxs-lookup"><span data-stu-id="ae256-206">Enterprise</span></span> | <span data-ttu-id="ae256-207">否</span><span class="sxs-lookup"><span data-stu-id="ae256-207">No</span></span> | <span data-ttu-id="ae256-208">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-208">No</span></span> | <span data-ttu-id="ae256-209">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-209">No</span></span> | <span data-ttu-id="ae256-210">“否”</span><span class="sxs-lookup"><span data-stu-id="ae256-210">No</span></span> | <span data-ttu-id="ae256-211">是</span><span class="sxs-lookup"><span data-stu-id="ae256-211">Yes</span></span> | 

## <a name="before-the-upgrade--what-you-need-to-know"></a><span data-ttu-id="ae256-212">升级之前 – 需要知道的事项</span><span class="sxs-lookup"><span data-stu-id="ae256-212">Before the upgrade – what you need to know</span></span>


- <span data-ttu-id="ae256-213">**权限**：执行升级的用户必须属于以下用户组或具有同等权限：</span><span class="sxs-lookup"><span data-stu-id="ae256-213">**Permissions**: The user performing the upgrade must be a member of the following user groups or have the equivalent permissions:</span></span>

    - <span data-ttu-id="ae256-214">本地计算机上的管理员组</span><span class="sxs-lookup"><span data-stu-id="ae256-214">Administrators group on the local computer</span></span>
    - <span data-ttu-id="ae256-215">SQL Server 上的 SQL Server 系统管理员组</span><span class="sxs-lookup"><span data-stu-id="ae256-215">SQL Server System Administrators group on the SQL Server</span></span>
    - <span data-ttu-id="ae256-216">BizTalk Server 管理员组</span><span class="sxs-lookup"><span data-stu-id="ae256-216">BizTalk Server Administrators group</span></span>
    - <span data-ttu-id="ae256-217">单一登录 (SSO) 管理员组</span><span class="sxs-lookup"><span data-stu-id="ae256-217">Single Sign-On (SSO) Administrators group</span></span>

- <span data-ttu-id="ae256-218">**SSO**：升级期间，托管 SSO 数据库的单一登录主密钥服务器和 SQL Server 必须处于运行状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-218">**SSO**: The Single Sign-On Master Secret Server and the SQL Server that hosts the SSO database must be running during the upgrade.</span></span>

- <span data-ttu-id="ae256-219">**网络服务帐户**：必须具有对 %windir%\temp 的写入权限。</span><span class="sxs-lookup"><span data-stu-id="ae256-219">**Network Service Account**: Must have write access to %windir%\temp.</span></span>

- <span data-ttu-id="ae256-220">**证书**：备份 Windows 证书存储：</span><span class="sxs-lookup"><span data-stu-id="ae256-220">**Certificates**: Back up the Windows certificates store:</span></span>  

    [<span data-ttu-id="ae256-221">Windows 7 和 Windows Server 2008 R2：导入证书</span><span class="sxs-lookup"><span data-stu-id="ae256-221">Windows 7 and Windows Server 2008 R2: Import a Certificate</span></span>](http://technet.microsoft.com/library/cc754489.aspx)  
    [<span data-ttu-id="ae256-222">Windows 7 和 Windows Server 2008 R2：导出证书</span><span class="sxs-lookup"><span data-stu-id="ae256-222">Windows 7 and Windows Server 2008 R2: Export a Certificate</span></span>](http://technet.microsoft.com/library/cc730988.aspx)  

- <span data-ttu-id="ae256-223">**DTC**：启用 Microsoft 分布式事务处理协调器 (MSDTC)（[用于优化环境的配置后步骤](../install-and-config-guides/post-configuration-steps-to-optimize-your-environment.md)），然后启用入站/出站 DTC 规则：</span><span class="sxs-lookup"><span data-stu-id="ae256-223">**DTC**: Enable Microsoft Distributed Transaction Coordinator (MSDTC) ([Post-configuration steps to optimize your environment](../install-and-config-guides/post-configuration-steps-to-optimize-your-environment.md)), and then enable the Inbound/Outbound DTC rules:</span></span>

    1. <span data-ttu-id="ae256-224">在“服务器管理器”中，选择“工具”，然后打开“高级安全 Windows 防火墙”。</span><span class="sxs-lookup"><span data-stu-id="ae256-224">In Server Manager, select **Tools**, and open **Windows Firewall with Advanced Security**.</span></span>
    2. <span data-ttu-id="ae256-225">选择“入站规则”。</span><span class="sxs-lookup"><span data-stu-id="ae256-225">Select **Inbound Rules**.</span></span>
    3. <span data-ttu-id="ae256-226">在**入站规则**，右键单击**分布式事务处理协调器**\* （根据需要），然后**启用规则**。</span><span class="sxs-lookup"><span data-stu-id="ae256-226">In **Inbound Rules**, right-click **Distributed Transaction Coordinator** \* (as appropriate), and then **Enable Rule**.</span></span>
    4.  <span data-ttu-id="ae256-227">在“高级安全 Windows 防火墙”中，选择“出站规则”。</span><span class="sxs-lookup"><span data-stu-id="ae256-227">In Windows Firewall with Advanced Security, select **Outbound Rules**.</span></span>
    5.  <span data-ttu-id="ae256-228">在**出站规则**，右键单击**分布式事务处理协调器**\* （根据需要），然后**启用规则**。</span><span class="sxs-lookup"><span data-stu-id="ae256-228">In **Outbound Rules**, right-click **Distributed Transaction Coordinator** \* (as appropriate), and then **Enable Rule**.</span></span>
    
- <span data-ttu-id="ae256-229">**SharePoint**：用于连接到 SharePoint 服务的客户端对象模型 (CSOM)。</span><span class="sxs-lookup"><span data-stu-id="ae256-229">**SharePoint**: The Client Side Object Model (CSOM) is used to connect to SharePoint Services.</span></span> <span data-ttu-id="ae256-230">[!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 中已删除客户端对象模型 (SSOM)（Web 服务）。</span><span class="sxs-lookup"><span data-stu-id="ae256-230">The  Server Side Object Model (SSOM) (the web service) is removed in [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span>

    <span data-ttu-id="ae256-231">如果使用的是不支持 CSOM 的 SharePoint 版本，则可升级到支持的 SharePoint 版本：</span><span class="sxs-lookup"><span data-stu-id="ae256-231">If you are using SharePoint versions that doesn't support CSOM, you may be able to upgrade to a supported SharePoint version:</span></span>
    
    <span data-ttu-id="ae256-232">[升级到 SharePoint 2016](https://technet.microsoft.com/library/cc303420(v=office.16).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae256-232">[Upgrade to SharePoint 2016](https://technet.microsoft.com/library/cc303420(v=office.16).aspx)</span></span>  
    <span data-ttu-id="ae256-233">[Upgrade to SharePoint 2013](https://technet.microsoft.com/library/cc303420(v=office.15).aspx)（升级到 SharePoint 2013）</span><span class="sxs-lookup"><span data-stu-id="ae256-233">[Upgrade to SharePoint 2013](https://technet.microsoft.com/library/cc303420(v=office.15).aspx)</span></span>

- <span data-ttu-id="ae256-234">**.NET Framework**：.NET Framework 4.5 和 .NET Framework 4.6 之间不存在并行安装的概念。</span><span class="sxs-lookup"><span data-stu-id="ae256-234">**.NET Framework**: There is no concept of side-by-side installation between .NET Framework 4.5 and .NET Framework 4.6.</span></span> <span data-ttu-id="ae256-235">.NET Framework 4.6 二进制文件会覆盖 .NET Framework 4.5 二进制文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-235">The .NET Framework 4.6 binaries overwrite .NET Framework 4.5 binaries.</span></span> <span data-ttu-id="ae256-236">.NET Framework 4.6 是一项 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 要求，并且在以前的 BizTalk Server 版本中不受支持，也不应安装。</span><span class="sxs-lookup"><span data-stu-id="ae256-236">.NET Framework 4.6 is a [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] requirement, and is not supported (and should not be installed) in previous BizTalk Server versions.</span></span>

- <span data-ttu-id="ae256-237">**Office 2016 和 Office 2013**：在同一台计算机上[安装和使用不同版本的 Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF)。</span><span class="sxs-lookup"><span data-stu-id="ae256-237">**Office 2016 and Office 2013**: [Install and use different versions of Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF) on the same computer.</span></span> <span data-ttu-id="ae256-238">此外，请检查[这些问题](https://support.microsoft.com/kb/3094527)。</span><span class="sxs-lookup"><span data-stu-id="ae256-238">Also, check out [these issues](https://support.microsoft.com/kb/3094527).</span></span>

- <span data-ttu-id="ae256-239">**BizTalkServerApplication 主机**：升级需要默认主机。</span><span class="sxs-lookup"><span data-stu-id="ae256-239">**BizTalkServerApplication Host**: The upgrade requires the existence of the default host.</span></span> <span data-ttu-id="ae256-240">如果已删除与 SQL 适配器发送端口和接收位置相关联的默认主机实例，请将默认主机与 SQL 适配器关联后再进行升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-240">If the default host instance associated with the SQL Adapter send ports and receive locations is removed, associate the default host to the SQL Adapter before upgrading.</span></span> <span data-ttu-id="ae256-241">升级完成后，可从列表中删除默认主机。</span><span class="sxs-lookup"><span data-stu-id="ae256-241">After upgrade is complete, you can remove the default host from the list.</span></span>

- <span data-ttu-id="ae256-242">**自定义绑定**：升级后，通过 .NET Framework 早期版本生成的用户定义的自定义绑定不可用。</span><span class="sxs-lookup"><span data-stu-id="ae256-242">**Custom Bindings**: User-defined custom bindings that are built with earlier versions of the .NET Framework are not available after you upgrade.</span></span> <span data-ttu-id="ae256-243">若要使用自定义绑定，请在 .NET Framework 4.6 machine.config 文件中手动添加自定义绑定。</span><span class="sxs-lookup"><span data-stu-id="ae256-243">To use the custom bindings, manually add the custom bindings in the .NET Framework 4.6 machine.config file.</span></span>

- <span data-ttu-id="ae256-244">**配置文件**：备份 BizTalk Server 2013 R2/2013 中的所有自定义配置文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-244">**Configuration Files**: Back up all custom configuration files in BizTalk Server 2013 R2/2013.</span></span> <span data-ttu-id="ae256-245">BizTalk Server 仅支持 `btsntsvc.exe.config` 和 `bm.exe.config` 文件中的更改迁移。</span><span class="sxs-lookup"><span data-stu-id="ae256-245">BizTalk Server supports migration of changes only in the `btsntsvc.exe.config` and `bm.exe.config` files.</span></span>



### <a name="bam-alerts"></a><span data-ttu-id="ae256-246">BAM 警报</span><span class="sxs-lookup"><span data-stu-id="ae256-246">BAM Alerts</span></span>

<span data-ttu-id="ae256-247">使用 BAM 警报需要 SQL Server Database Mail。</span><span class="sxs-lookup"><span data-stu-id="ae256-247">SQL Server Database Mail is required to use BAM Alerts.</span></span> <span data-ttu-id="ae256-248">如果要从 SQL 版本升级 SQL Server，并且使用的是现有 BAM 警报定义和通知服务，那么可以备份 BAM 警报定义，并在升级后对其进行部署。</span><span class="sxs-lookup"><span data-stu-id="ae256-248">If SQL Server is being upgraded from a SQL version that used existing BAM Alert definitions with Notification Services, then you can back up your BAM alert definitions, and deploy them after upgrading.</span></span> <span data-ttu-id="ae256-249">使用 BM.exe 命令行工具 (`\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`)。</span><span class="sxs-lookup"><span data-stu-id="ae256-249">Use the BM.exe command line tool (`\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`).</span></span> <span data-ttu-id="ae256-250">具体步骤包括：</span><span class="sxs-lookup"><span data-stu-id="ae256-250">Specific steps include:</span></span>

1. <span data-ttu-id="ae256-251">打开命令提示符，并转到 `\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`。</span><span class="sxs-lookup"><span data-stu-id="ae256-251">Open a command prompt and go to `\Program Files (x86)\Microsoft BizTalk Server <your version>\Tracking`.</span></span>
2. <span data-ttu-id="ae256-252">在命令提示符处创建一个定义文件：`bm.exe get-defxml -FileName:YourBAMDefinition.xml`</span><span class="sxs-lookup"><span data-stu-id="ae256-252">Create a definition file in the command prompt: `bm.exe get-defxml -FileName:YourBAMDefinition.xml`</span></span>
4. <span data-ttu-id="ae256-253">在 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 配置中，取消对 BAM 警报的配置。</span><span class="sxs-lookup"><span data-stu-id="ae256-253">In [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 Configuration, unconfigure BAM Alerts.</span></span>
5. <span data-ttu-id="ae256-254">升级到 SQL Server 2016 或 SQL Server 2014 SP1。</span><span class="sxs-lookup"><span data-stu-id="ae256-254">Upgrade to SQL Server 2016 or SQL Server 2014 SP1.</span></span>
6. <span data-ttu-id="ae256-255">配置 SQL Server Database Mail。</span><span class="sxs-lookup"><span data-stu-id="ae256-255">Configure SQL Server Database Mail.</span></span>
7. <span data-ttu-id="ae256-256">升级到 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ae256-256">Upgrade to [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span>
8. <span data-ttu-id="ae256-257">在 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 配置中，配置 BAM 警报。</span><span class="sxs-lookup"><span data-stu-id="ae256-257">In [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] Configuration, configure BAM Alerts.</span></span>
9. <span data-ttu-id="ae256-258">在命令提示符处部署保存的定义文件：`bm.exe update-all -DefinitionFile:YourBAMDefinition.xml`</span><span class="sxs-lookup"><span data-stu-id="ae256-258">Deploy the saved definition file in the command prompt: `bm.exe update-all -DefinitionFile:YourBAMDefinition.xml`</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae256-259">如果不按所列顺序执行这些步骤或创建一个定义文件，则必须在升级 BizTalk Server 后重新创建定义文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-259">If you don’t follow these steps in the order listed or create a definition file, you must recreate the definition files after the BizTalk Server upgrade.</span></span>
> 
> <span data-ttu-id="ae256-260">若要查看 BM.exe 帮助，请键入：`bm.exe help`。</span><span class="sxs-lookup"><span data-stu-id="ae256-260">To view the BM.exe help, type: `bm.exe help`.</span></span>


### <a name="bam"></a><span data-ttu-id="ae256-261">BAM</span><span class="sxs-lookup"><span data-stu-id="ae256-261">BAM</span></span> 

- <span data-ttu-id="ae256-262">**BAM DTS 包**：停止所有 BAM 数据转换服务 (DTS) 包。</span><span class="sxs-lookup"><span data-stu-id="ae256-262">**BAM DTS Packages**: Stop all BAM Data Transformation Services (DTS) packages.</span></span> <span data-ttu-id="ae256-263">否则，可能会丢失数据或损坏联机分析处理 (OLAP) 多维数据集。</span><span class="sxs-lookup"><span data-stu-id="ae256-263">Otherwise, data may be lost or an online analytical processing (OLAP) cube may corrupt.</span></span> 

- <span data-ttu-id="ae256-264">**磁盘空间**：可用磁盘空间应至少是现有 BAM 数据库的大小。</span><span class="sxs-lookup"><span data-stu-id="ae256-264">**Disk Space**: The free disk space should be at least the size of the existing BAM databases.</span></span>

- <span data-ttu-id="ae256-265">**实时聚合**：如果当前版本的 BizTalk Server 中使用的是 BAM 实时聚合，且要升级 SQL Server，请安装或升级到 SQL Server Enterprise Edition。</span><span class="sxs-lookup"><span data-stu-id="ae256-265">**Real-time Aggregations**: If you are using BAM real-time aggregations in your current version of BizTalk Server and are upgrading SQL Server, install or upgrade to the SQL Server Enterprise Edition.</span></span> <span data-ttu-id="ae256-266">否则升级将失败。</span><span class="sxs-lookup"><span data-stu-id="ae256-266">Otherwise, the upgrade fails.</span></span>

- <span data-ttu-id="ae256-267">**maxTimeout 值**：如果拥有大型 BAM 数据库，请将 machine.config 文件中的分布式事务的 `maxTimeout` 值更新到：</span><span class="sxs-lookup"><span data-stu-id="ae256-267">**maxTimeout value**: If you have a large BAM database, update the `maxTimeout` value for distributed transactions in your machine.config file to:</span></span>  

    ```
    <system.transactions>
       <machineSettings maxTimeout="23:59:59" />
    </system.transactions>
    ```

- <span data-ttu-id="ae256-268">**使用跟踪配置文件编辑器 (TPE) 启用的 BAM 跟踪**：升级后，会发现之前部署的跟踪配置文件已升级，但相应的侦听器配置尚未升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-268">**BAM tracking enabled with Tracking Profile Editor (TPE)**: After you upgrade, tracking profiles that were previously deployed are upgraded; however, their corresponding interceptor configurations are not upgraded.</span></span> <span data-ttu-id="ae256-269">任何新截获的 BAM 消息可能仍具有 BizTalk Server 2013 R2/2013 引用。</span><span class="sxs-lookup"><span data-stu-id="ae256-269">Any new intercepted BAM messages may still have the BizTalk Server 2013 R2/2013 references.</span></span> <span data-ttu-id="ae256-270">若要升级相应的侦听器配置，请使用“跟踪配置文件编辑器”检索活动的配置文件，然后重新应用此配置文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-270">To upgrade the corresponding interceptor configurations, use the Tracking Profile Editor to retrieve the profile for the activity, and then reapply the profile.</span></span>

- <span data-ttu-id="ae256-271">**实时数据工作薄**：如果在 BizTalk Server 2013 R2/2013 中使用的是 BAM，升级后，必须手动重新生成实时数据工作簿。</span><span class="sxs-lookup"><span data-stu-id="ae256-271">**LiveData Workbook**: If you are using BAM in BizTalk Server 2013 R2/2013, after the upgrade, you must manually regenerate the LiveData Workbook.</span></span> <span data-ttu-id="ae256-272">重新生成实时数据工作簿：</span><span class="sxs-lookup"><span data-stu-id="ae256-272">To regenerate the LiveData Workbook:</span></span>

    1. <span data-ttu-id="ae256-273">运行以下命令来检索 BAM 定义：</span><span class="sxs-lookup"><span data-stu-id="ae256-273">Retrieve the BAM Definition by running the following command:</span></span>  
    `BM get-defxml MyDef.xml`
    2. <span data-ttu-id="ae256-274">打开 Microsoft Office Excel，然后选择 BAM 外接程序，重新创建数据透视表。导入在步骤 (1) 中创建的 *MyDef.xml* 文件，并重新创建数据透视表。</span><span class="sxs-lookup"><span data-stu-id="ae256-274">Re-create the PivotTable reports by opening Microsoft Office Excel, and then selecting the BAM Add-ins. Import the *MyDef.xml* file created in step (1), and recreate the PivotTable reports.</span></span> <span data-ttu-id="ae256-275">将新的 BAM 工作簿保存为 *MyNewBook.xls*。</span><span class="sxs-lookup"><span data-stu-id="ae256-275">Save the new BAM Workbook as *MyNewBook.xls*.</span></span>
    3. <span data-ttu-id="ae256-276">在 `<BAMDefinition>\<Extension>\<OWC>\<PivotTableView>\<PivotTable>\<PivotView>\<Label>` 路径中的 `<Caption>` 下的 *MyDef.xml* 中，找到数据透视表名，然后重命名数据透视表。</span><span class="sxs-lookup"><span data-stu-id="ae256-276">Rename the PivotTable reports by finding the PivotTable names in *MyDef.xml* under `<Caption>` in the  `<BAMDefinition>\<Extension>\<OWC>\<PivotTableView>\<PivotTable>\<PivotView>\<Label>` path.</span></span> <span data-ttu-id="ae256-277">使用这些名称重命名 *MyNewBook.xls* 中的数据透视表。</span><span class="sxs-lookup"><span data-stu-id="ae256-277">Use these names to rename your PivotTable reports in *MyNewBook.xls*.</span></span>
    4. <span data-ttu-id="ae256-278">运行以下命令，重新生成实时数据工作簿：</span><span class="sxs-lookup"><span data-stu-id="ae256-278">Regenerate the LiveData Workbook by running the following command:</span></span>  
    `BM regenerate-livedataworkbook MyNewBook.xls`

    > [!NOTE]
    > <span data-ttu-id="ae256-279">重新生成的实时数据工作簿不会在原始实时数据工作簿中重新创建 Excel 项目（例如，图表）。</span><span class="sxs-lookup"><span data-stu-id="ae256-279">Regenerated LiveData Workbooks do not recreate the Excel artifacts (for example, charts) in the original LiveData Workbook.</span></span> <span data-ttu-id="ae256-280">手动重新创建项目。</span><span class="sxs-lookup"><span data-stu-id="ae256-280">Manually recreate the artifacts.</span></span>


### <a name="enterprise-single-sign-on-esso"></a><span data-ttu-id="ae256-281">企业单一登录 (ESSO)</span><span class="sxs-lookup"><span data-stu-id="ae256-281">Enterprise Single Sign-On (ESSO)</span></span>

| <span data-ttu-id="ae256-282">应用场景</span><span class="sxs-lookup"><span data-stu-id="ae256-282">Scenario</span></span> | <span data-ttu-id="ae256-283">详细信息</span><span class="sxs-lookup"><span data-stu-id="ae256-283">More info</span></span> |
| --- | --- |
| <span data-ttu-id="ae256-284">从企业单一登录的早期版本进行升级</span><span class="sxs-lookup"><span data-stu-id="ae256-284">Upgrading from an earlier version of Enterprise Single Sign-on</span></span> | <span data-ttu-id="ae256-285">BizTalk Server 包含企业单一登录 (ESSO) 的已更新版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-285">BizTalk Server includes an updated version of Enterprise Single Sign-On (ESSO).</span></span> <span data-ttu-id="ae256-286">如果您在安装了 BizTalk 早期版本的计算机上安装此发行版本，则 ESSO 在安装过程中自动更新。</span><span class="sxs-lookup"><span data-stu-id="ae256-286">If you are installing this release on a computer with an earlier version of BizTalk, ESSO is automatically updated during setup.</span></span> <span data-ttu-id="ae256-287">建议您在升级前先执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="ae256-287">We recommend that you perform the following steps before upgrading:</span></span> <br/><br/> <span data-ttu-id="ae256-288">1.验证是否已将当前版本的单一登录数据库 (SSODB) 备份到安全位置。</span><span class="sxs-lookup"><span data-stu-id="ae256-288">1. Verify that a current version of the Single Sign-On database (SSODB) is backed up to a secure location.</span></span> <br/><span data-ttu-id="ae256-289">2.验证是否已将当前主密钥备份到安全位置。</span><span class="sxs-lookup"><span data-stu-id="ae256-289">2. Verify that the current master secret key is backed up to a secure location.</span></span><br/><span data-ttu-id="ae256-290">3.知道主密钥的密码。</span><span class="sxs-lookup"><span data-stu-id="ae256-290">3. Know the password to the master secret.</span></span><br/><br/><span data-ttu-id="ae256-291">将 BizTalk 组中的所有服务器升级到同一发行版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-291">Upgrade all the servers in a BizTalk group to the same release.</span></span> <span data-ttu-id="ae256-292">此要求同样适用于独立主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="ae256-292">This requirement also applies to a standalone master secret server.</span></span> |
| <span data-ttu-id="ae256-293">使用企业单一登录独立安装程序进行升级</span><span class="sxs-lookup"><span data-stu-id="ae256-293">Upgrade using the Enterprise Single Sign-On standalone setup</span></span> | <span data-ttu-id="ae256-294">按照以下步骤，在安装有独立企业单一登录的计算机（如专用主密钥服务器）上执行升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-294">Use the following steps to perform an upgrade on computers that have a standalone Enterprise Single Sign on installation, such as a dedicated master secret server.</span></span><br/><br/><span data-ttu-id="ae256-295">1.验证是否已将当前主密钥备份到安全位置。</span><span class="sxs-lookup"><span data-stu-id="ae256-295">1. Verify that the current master secret key is backed up to a secure location.</span></span><br/><span data-ttu-id="ae256-296">2.验证是否已将当前版本的 SSODB 备份到安全位置。</span><span class="sxs-lookup"><span data-stu-id="ae256-296">2. Verify that a current version of the SSODB is backed up to a secure location.</span></span><br/><span data-ttu-id="ae256-297">3.从 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 安装媒体运行 ESSO **Setup.exe**。</span><span class="sxs-lookup"><span data-stu-id="ae256-297">3. Run the ESSO **Setup.exe** from the [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] installation media.</span></span> <span data-ttu-id="ae256-298">默认安装文件夹是 `\Platform\SSO`。</span><span class="sxs-lookup"><span data-stu-id="ae256-298">The default installation folder is `\Platform\SSO`.</span></span><br/><span data-ttu-id="ae256-299">4.在“自动运行”对话框中，选择“Microsoft 企业单一登录”。</span><span class="sxs-lookup"><span data-stu-id="ae256-299">4. In the **Autorun** dialog box, select **Microsoft Enterprise Single Sign-On**.</span></span><br/><span data-ttu-id="ae256-300">5.在“摘要”对话框中，选择“升级”。</span><span class="sxs-lookup"><span data-stu-id="ae256-300">5. In the Summary dialog box, select **Upgrade**.</span></span> |

### <a name="multicomputer-environment"></a><span data-ttu-id="ae256-301">多计算机环境</span><span class="sxs-lookup"><span data-stu-id="ae256-301">Multicomputer environment</span></span>
<span data-ttu-id="ae256-302">在多计算机环境中，升级 SSO 主密钥服务器计算机。</span><span class="sxs-lookup"><span data-stu-id="ae256-302">In a multicomputer environment, upgrade the SSO master secret server computer.</span></span> <span data-ttu-id="ae256-303">之后再升级其他 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="ae256-303">Then, upgrade the other BizTalk Server computers.</span></span> <span data-ttu-id="ae256-304">不支持同时升级一个组中的 BizTalk 计算机。</span><span class="sxs-lookup"><span data-stu-id="ae256-304">Simultaneously upgrading the BizTalk computers in a group is not supported.</span></span> <span data-ttu-id="ae256-305">按以下顺序一次升级一台计算机：</span><span class="sxs-lookup"><span data-stu-id="ae256-305">Upgrade one computer at a time in the following order:</span></span>

1. <span data-ttu-id="ae256-306">单一登录主密钥服务器</span><span class="sxs-lookup"><span data-stu-id="ae256-306">Single Sign-On master secret server</span></span>
2. <span data-ttu-id="ae256-307">运行 BizTalk Server 的运行时计算机</span><span class="sxs-lookup"><span data-stu-id="ae256-307">Run-time computers that are running BizTalk Server</span></span>
3. <span data-ttu-id="ae256-308">管理工具和监视计算机</span><span class="sxs-lookup"><span data-stu-id="ae256-308">Administration tools and monitoring computer</span></span>
4. <span data-ttu-id="ae256-309">开发计算机和运行 BizTalk Server 的所有其他剩余的计算机</span><span class="sxs-lookup"><span data-stu-id="ae256-309">Development and any other remaining computers that are running BizTalk Server</span></span>

<span data-ttu-id="ae256-310">**补充说明**</span><span class="sxs-lookup"><span data-stu-id="ae256-310">**Additional**</span></span>  
<span data-ttu-id="ae256-311">使用设置仪表板，可以细致地调整 BizTalk Server 设置以优化性能。</span><span class="sxs-lookup"><span data-stu-id="ae256-311">Using the Settings Dashboard, you can extensively tweak BizTalk Server settings for performance optimization.</span></span> <span data-ttu-id="ae256-312">还可以修改 BizTalk 组、BizTalk 主机和 BizTalk 主机实例的设置。</span><span class="sxs-lookup"><span data-stu-id="ae256-312">You can also modify settings for the BizTalk Group, BizTalk Host, and BizTalk Host Instance.</span></span> <span data-ttu-id="ae256-313">请参阅[使用 BizTalk Server 性能调整的设置仪表板](../core/using-settings-dashboard-for-biztalk-server-performance-tuning.md)。</span><span class="sxs-lookup"><span data-stu-id="ae256-313">See [Using Settings Dashboard for BizTalk Server Performance Tuning](../core/using-settings-dashboard-for-biztalk-server-performance-tuning.md).</span></span>

### <a name="general-information"></a><span data-ttu-id="ae256-314">一般信息</span><span class="sxs-lookup"><span data-stu-id="ae256-314">General information</span></span>

- <span data-ttu-id="ae256-315">**帐户名**：应尽可能使用默认帐户名。</span><span class="sxs-lookup"><span data-stu-id="ae256-315">**Account names**: Use the default account names whenever possible.</span></span> <span data-ttu-id="ae256-316">BizTalk Server 安装程序会自动将已安装的组件配置为使用默认帐户。</span><span class="sxs-lookup"><span data-stu-id="ae256-316">The BizTalk Server Setup program automatically configures installed components to use the default accounts.</span></span> <span data-ttu-id="ae256-317">如果 Active Directory 林中有多个 BizTalk Server 组，请更改帐户名，以避免冲突。</span><span class="sxs-lookup"><span data-stu-id="ae256-317">If there are multiple BizTalk Server groups in an Active Directory forest, change the account names to avoid conflicts.</span></span> <span data-ttu-id="ae256-318">对于服务帐户和 Windows 组，BizTalk Server 仅支持 `<NetBIOS domain name>\<user>` 名称格式。</span><span class="sxs-lookup"><span data-stu-id="ae256-318">BizTalk Server supports only `<NetBIOS domain name>\<user>` name formats for service accounts and Windows groups.</span></span>

- <span data-ttu-id="ae256-319">**带有 BAM 管理 Web 服务的帐户名**：BizTalk Server 不支持 BAM 管理 Web 服务用户的内置帐户或无密码的帐户。</span><span class="sxs-lookup"><span data-stu-id="ae256-319">**Account names with BAM Management Web Service**: BizTalk Server does not support built-in accounts or accounts without passwords for the BAM Management Web Service User.</span></span> 

  <span data-ttu-id="ae256-320">通过此类帐户配置 BizTalk Server 看起来似乎会成功，但是 BAM 管理 Web 服务会发生故障。</span><span class="sxs-lookup"><span data-stu-id="ae256-320">Configuring BizTalk Server with such accounts may appear to succeed, but the BAM Management Web Service fails.</span></span> 

  <span data-ttu-id="ae256-321">系统支持将此类帐户用于 BAM 应用程序池。</span><span class="sxs-lookup"><span data-stu-id="ae256-321">Use of such accounts for the BAM Application pool is supported.</span></span>

- <span data-ttu-id="ae256-322">64 位操作系统不支持**BizTalk 程序集查看器**。</span><span class="sxs-lookup"><span data-stu-id="ae256-322">**BizTalk Assembly Viewer** is not supported on a 64-bit operating system.</span></span>

- <span data-ttu-id="ae256-323">**安装和卸载**：卸载 BizTalk Server 时，请手动删除 BizTalk Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="ae256-323">**Install and Uninstall**: When you uninstall BizTalk Server, manually delete the BizTalk Server databases.</span></span> <span data-ttu-id="ae256-324">如果是以开发人员或评估师身份安装 BizTalk Server，请考虑在虚拟机上进行安装。</span><span class="sxs-lookup"><span data-stu-id="ae256-324">If you are installing BizTalk Server as a developer or evaluator, consider installing on a virtual machine.</span></span> <span data-ttu-id="ae256-325">这样，如果您必须进行重新安装，就可以轻松回滚到预设的检查点，而无需完成整个卸载过程。</span><span class="sxs-lookup"><span data-stu-id="ae256-325">This way, if you have to reinstall, you can easily roll back to a preset checkpoint without having to go through the uninstall process.</span></span>

- <span data-ttu-id="ae256-326">**32 位和 64 位计算机**：在 32 位 Windows 或 64 位 Windows 上安装 BizTalk Server 时有一些不同之处。</span><span class="sxs-lookup"><span data-stu-id="ae256-326">**32-bit and 64-bit computers**: There are few differences when installing BizTalk Server on 32-bit Windows or 64-bit Windows.</span></span> <span data-ttu-id="ae256-327">本文档同时介绍 32 位和 64 位安装。</span><span class="sxs-lookup"><span data-stu-id="ae256-327">This document covers both 32-bit and 64-bit installations.</span></span> <span data-ttu-id="ae256-328">以下是它们的不同之处。</span><span class="sxs-lookup"><span data-stu-id="ae256-328">Differences between them are noted.</span></span>

- <span data-ttu-id="ae256-329">**工作组**：支持在单台计算机上的工作组环境中安装和配置 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="ae256-329">**Workgroups**: Installing and configuring BizTalk Server in a workgroup environment on a single computer is supported.</span></span> <span data-ttu-id="ae256-330">在此方案中，SQL Server 和 BizTalk Server 的功能和组件在同一计算机上安装和配置。</span><span class="sxs-lookup"><span data-stu-id="ae256-330">In this scenario, both SQL Server and BizTalk Server features and components are installed and configured on the same computer.</span></span>

- <span data-ttu-id="ae256-331">**终端服务器**：不支持使用在应用程序模式下运行的终端服务器安装 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="ae256-331">**Terminal Server**: Installing BizTalk Server using Terminal Server running in application mode is not supported.</span></span> <span data-ttu-id="ae256-332">请参阅 [KB 832027](https://support.microsoft.com/kb/832027)。</span><span class="sxs-lookup"><span data-stu-id="ae256-332">See [KB 832027](https://support.microsoft.com/kb/832027).</span></span>

- <span data-ttu-id="ae256-333">不支持**无提示升级**。</span><span class="sxs-lookup"><span data-stu-id="ae256-333">**Silent Upgrade** is not supported.</span></span>

- <span data-ttu-id="ae256-334">**不支持的应用程序**：BizTalk Server 不支持在不受支持的 API（例如 PAM API）上生成的自定义应用程序、存储过程或直接数据库访问。</span><span class="sxs-lookup"><span data-stu-id="ae256-334">**Unsupported Applications**: BizTalk Server does not support custom applications built on unsupported APIs such as PAM APIs, stored procedures, or direct database access.</span></span> <span data-ttu-id="ae256-335">先运行至少一个测试升级，然后再升级生产环境。</span><span class="sxs-lookup"><span data-stu-id="ae256-335">Run at least one test upgrade before you upgrade your production environment.</span></span>

- <span data-ttu-id="ae256-336">**SQL Server 实例**：良好的做法是在升级平台前先升级任何 SQL Server 实例。</span><span class="sxs-lookup"><span data-stu-id="ae256-336">**SQL Server instances**: It’s a good practice to upgrade any SQL Server instances before you upgrade the platform.</span></span>

## <a name="prepare-your-computer-for-upgrade"></a><span data-ttu-id="ae256-337">准备计算机以进行升级</span><span class="sxs-lookup"><span data-stu-id="ae256-337">Prepare your computer for upgrade</span></span>

| <span data-ttu-id="ae256-338">任务</span><span class="sxs-lookup"><span data-stu-id="ae256-338">Task</span></span> | <span data-ttu-id="ae256-339">信息</span><span class="sxs-lookup"><span data-stu-id="ae256-339">Info</span></span> |
| --- | --- | 
| <span data-ttu-id="ae256-340">安装 Windows 的关键更新</span><span class="sxs-lookup"><span data-stu-id="ae256-340">Install Critical Windows Updates</span></span> | <span data-ttu-id="ae256-341">在“程序”菜单中，选择“Windows 更新”。</span><span class="sxs-lookup"><span data-stu-id="ae256-341">Select Windows Update from the Programs menu.</span></span> <span data-ttu-id="ae256-342">可能需要重启计算机。</span><span class="sxs-lookup"><span data-stu-id="ae256-342">You may need to restart your computer.</span></span> |
| <span data-ttu-id="ae256-343">保存 BAM 警报定义</span><span class="sxs-lookup"><span data-stu-id="ae256-343">Save BAM Alert Definitions</span></span> | <span data-ttu-id="ae256-344">仅在当前使用现有 BAM 警报定义和 SQL Server 通知服务时适用。</span><span class="sxs-lookup"><span data-stu-id="ae256-344">Applies only if you currently use existing BAM Alert definitions with SQL Server Notification Services.</span></span> <span data-ttu-id="ae256-345">使用 BM.exe 创建定义文件并在 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 配置中取消对 BAM 警报的配置。</span><span class="sxs-lookup"><span data-stu-id="ae256-345">Create a definition file using BM.exe and unconfigure BAM Alerts in the [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013 Configuration.</span></span><br/><br/><span data-ttu-id="ae256-346">本主题中的**升级之前**部分中列出了具体步骤。</span><span class="sxs-lookup"><span data-stu-id="ae256-346">**Before the upgrade** (in this topic) lists the specific steps.</span></span><br/><br/><span data-ttu-id="ae256-347">否则，请在升级后重新创建 BAM 警报定义。</span><span class="sxs-lookup"><span data-stu-id="ae256-347">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span> |
| <span data-ttu-id="ae256-348">升级 SQL Server</span><span class="sxs-lookup"><span data-stu-id="ae256-348">Upgrade SQL Server</span></span> | <span data-ttu-id="ae256-349">升级到受支持的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-349">Upgrade to a supported SQL Server version.</span></span> <span data-ttu-id="ae256-350">请参阅：</span><span class="sxs-lookup"><span data-stu-id="ae256-350">See:</span></span><br/><br/>[<span data-ttu-id="ae256-351">BizTalk Server 2016 的硬件和软件要求</span><span class="sxs-lookup"><span data-stu-id="ae256-351">Hardware and Software Requirements for BizTalk Server 2016</span></span>](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)<br/>[<span data-ttu-id="ae256-352">升级到 SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="ae256-352">Upgrade to SQL Server 2016</span></span>](https://msdn.microsoft.com/library/bb677622.aspx)<br/><span data-ttu-id="ae256-353">[升级到 SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae256-353">[Upgrade to SQL Server 2014](https://msdn.microsoft.com/library/bb677622(v=sql.120).aspx)</span></span> |
| <span data-ttu-id="ae256-354">升级 SQL Server 客户端工具</span><span class="sxs-lookup"><span data-stu-id="ae256-354">Upgrade SQL Server Client Tools</span></span> | <span data-ttu-id="ae256-355">在多计算机环境中，可能会在单独的计算机上安装管理工具。</span><span class="sxs-lookup"><span data-stu-id="ae256-355">In a multicomputer environment, the Administration tools may be installed on a separate computer.</span></span> <span data-ttu-id="ae256-356">升级 SQL Server 管理客户端工具，包括管理工具。</span><span class="sxs-lookup"><span data-stu-id="ae256-356">Upgrade the SQL Server Administration Client Tools, including the Management Tools.</span></span> |
| <span data-ttu-id="ae256-357">安装 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ae256-357">Install Visual Studio</span></span> | <span data-ttu-id="ae256-358">有关支持的版本，请参阅 [BizTalk Server 2016 的硬件和软件要求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)。</span><span class="sxs-lookup"><span data-stu-id="ae256-358">See [Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) for the supported versions.</span></span> <span data-ttu-id="ae256-359">可以并行安装不同的 Visual Studio 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-359">Different Visual Studio versions can be installed side-by-side.</span></span> <span data-ttu-id="ae256-360">请参阅 [Visual Studio 2015](https://msdn.microsoft.com/library/ms246609(v=vs.140).aspx) 和 [Visual Studio 2013](https://msdn.microsoft.com/library/ms246609(v=vs.120).aspx)。</span><span class="sxs-lookup"><span data-stu-id="ae256-360">See [Visual Studio 2015](https://msdn.microsoft.com/library/ms246609(v=vs.140).aspx) and [Visual Studio 2013](https://msdn.microsoft.com/library/ms246609(v=vs.120).aspx).</span></span> |
| <span data-ttu-id="ae256-361">安装 Office</span><span class="sxs-lookup"><span data-stu-id="ae256-361">Install Office</span></span> | <span data-ttu-id="ae256-362">请参阅[在同一台计算机上安装和使用不同版本的 Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF)。</span><span class="sxs-lookup"><span data-stu-id="ae256-362">See [Install and use different versions of Office](https://support.office.com/article/Install-and-use-different-versions-of-Office-on-the-same-PC-6EBB44CE-18A3-43F9-A187-B78C513788BF) on the same computer.</span></span> <span data-ttu-id="ae256-363">[BizTalk Server 2016 的硬件和软件要求](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md)列出了支持的 Office 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-363">[Hardware and Software Requirements for BizTalk Server 2016](../install-and-config-guides/hardware-and-software-requirements-for-biztalk-server-2016.md) lists the supported Office versions.</span></span> |
| <span data-ttu-id="ae256-364">停止 BizTalk 和 Windows 服务</span><span class="sxs-lookup"><span data-stu-id="ae256-364">Stop the BizTalk and Windows Services</span></span> | <span data-ttu-id="ae256-365">- BizTalk 服务 BizTalk 组：*<Application_Name>*</span><span class="sxs-lookup"><span data-stu-id="ae256-365">- BizTalk Service BizTalk Group:  *<Application_Name>*</span></span><br/><span data-ttu-id="ae256-366">- BizTalk 基本 EDI 服务</span><span class="sxs-lookup"><span data-stu-id="ae256-366">- BizTalk Base EDI Service</span></span><br/><span data-ttu-id="ae256-367">- 规则引擎更新服务</span><span class="sxs-lookup"><span data-stu-id="ae256-367">- Rule Engine Update Service</span></span><br/><span data-ttu-id="ae256-368">- 万维网发布服务</span><span class="sxs-lookup"><span data-stu-id="ae256-368">- World Wide Web Publishing Service</span></span><br/><br/><span data-ttu-id="ae256-369">**注意**</span><span class="sxs-lookup"><span data-stu-id="ae256-369">**NOTE**</span></span><br/><span data-ttu-id="ae256-370">如果安装了任何 BizTalk Server 加速器，请停止 HL7 日志记录服务。</span><span class="sxs-lookup"><span data-stu-id="ae256-370">If you have any BizTalk Server accelerators installed, stop the HL7 Logging Service.</span></span> |
| <span data-ttu-id="ae256-371">备份数据库</span><span class="sxs-lookup"><span data-stu-id="ae256-371">Back up the databases</span></span> | <span data-ttu-id="ae256-372">- Master</span><span class="sxs-lookup"><span data-stu-id="ae256-372">- Master</span></span><br/><span data-ttu-id="ae256-373">- MSDB</span><span class="sxs-lookup"><span data-stu-id="ae256-373">- MSDB</span></span><br/><span data-ttu-id="ae256-374">- BAMArchive</span><span class="sxs-lookup"><span data-stu-id="ae256-374">- BAMArchive</span></span><br/><span data-ttu-id="ae256-375">- BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="ae256-375">- BAMPrimaryImport</span></span><br/><span data-ttu-id="ae256-376">- BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="ae256-376">- BAMStarSchema</span></span><br/><span data-ttu-id="ae256-377">- BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="ae256-377">- BizTalkDTADb</span></span><br/><span data-ttu-id="ae256-378">- BizTalkEDIDb</span><span class="sxs-lookup"><span data-stu-id="ae256-378">- BizTalkEDIDb</span></span><br/><span data-ttu-id="ae256-379">- BizTalkHwsDb</span><span class="sxs-lookup"><span data-stu-id="ae256-379">- BizTalkHwsDb</span></span><br/><span data-ttu-id="ae256-380">- BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="ae256-380">- BizTalkMgmtDb</span></span><br/><span data-ttu-id="ae256-381">- BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="ae256-381">- BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="ae256-382">- BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="ae256-382">- BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="ae256-383">- TPM</span><span class="sxs-lookup"><span data-stu-id="ae256-383">- TPM</span></span><br/><span data-ttu-id="ae256-384">- BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="ae256-384">- BizTalkAnalysisDb</span></span><br/><span data-ttu-id="ae256-385">- BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="ae256-385">- BAMAnalysis</span></span><br/><br/><span data-ttu-id="ae256-386">[SQL Server 2014：备份概述](https://technet.microsoft.com/library/ms175477(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae256-386">[SQL Server 2014: Backup Overview](https://technet.microsoft.com/library/ms175477(v=sql.120).aspx)</span></span><br/><span data-ttu-id="ae256-387">[SQL Server 2012：备份概述](https://technet.microsoft.com/library/ms175477(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae256-387">[SQL Server 2012: Backup Overview](https://technet.microsoft.com/library/ms175477(v=sql.110).aspx)</span></span> |
| <span data-ttu-id="ae256-388">配置 SQL Server Database Mail</span><span class="sxs-lookup"><span data-stu-id="ae256-388">Configure SQL Server Database Mail</span></span> | <span data-ttu-id="ae256-389">仅在使用 BAM 警报定义和 SQL Server 通知服务时适用。</span><span class="sxs-lookup"><span data-stu-id="ae256-389">Applies only if you use BAM Alert definitions with SQL Server Notification Services.</span></span><br/><br/><span data-ttu-id="ae256-390">本主题中的**升级之前**部分中列出了具体步骤。</span><span class="sxs-lookup"><span data-stu-id="ae256-390">**Before the upgrade** (in this topic) lists the specific steps.</span></span><br/><br/><span data-ttu-id="ae256-391">否则，请在升级后重新创建 BAM 警报定义。</span><span class="sxs-lookup"><span data-stu-id="ae256-391">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span> |

## <a name="do-the-upgrade"></a><span data-ttu-id="ae256-392">执行升级</span><span class="sxs-lookup"><span data-stu-id="ae256-392">Do the upgrade</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ae256-393">安装 SQL Server 时，安装程序便将系统管理员权限授予你的登录帐户。</span><span class="sxs-lookup"><span data-stu-id="ae256-393">When you installed SQL Server, setup granted your logged-on account system administrator rights.</span></span> <span data-ttu-id="ae256-394">安装 BizTalk Server 时也需要系统管理员权限。</span><span class="sxs-lookup"><span data-stu-id="ae256-394">System administrator rights are also required to install BizTalk Server.</span></span> <span data-ttu-id="ae256-395">执行以下操作之一：</span><span class="sxs-lookup"><span data-stu-id="ae256-395">Do one of the following:</span></span>
> 
> - <span data-ttu-id="ae256-396">使用安装 SQL Server 时所用的同一帐户</span><span class="sxs-lookup"><span data-stu-id="ae256-396">Use the same account you used when you installed SQL Server</span></span>  
> <span data-ttu-id="ae256-397">**或**</span><span class="sxs-lookup"><span data-stu-id="ae256-397">**OR**</span></span>  
> - <span data-ttu-id="ae256-398">确保当前的登录帐户具有系统管理员权限</span><span class="sxs-lookup"><span data-stu-id="ae256-398">Make sure the current logged-on account has system administrator rights</span></span>

### <a name="upgrade-steps"></a><span data-ttu-id="ae256-399">升级步骤</span><span class="sxs-lookup"><span data-stu-id="ae256-399">Upgrade steps</span></span>

1. <span data-ttu-id="ae256-400">关闭所有打开的程序。</span><span class="sxs-lookup"><span data-stu-id="ae256-400">Close any open programs.</span></span>
2. <span data-ttu-id="ae256-401">从安装媒体中运行 **Setup.exe**。</span><span class="sxs-lookup"><span data-stu-id="ae256-401">Run **Setup.exe** from the installation media.</span></span>
3. <span data-ttu-id="ae256-402">在“开始”中，选择“安装 Microsoft BizTalk Server”。</span><span class="sxs-lookup"><span data-stu-id="ae256-402">In Start, select **Install Microsoft BizTalk Server**.</span></span>
4. <span data-ttu-id="ae256-403">在“客户信息”中，输入用户名、组织、产品密钥。</span><span class="sxs-lookup"><span data-stu-id="ae256-403">In **Customer Information**, enter your user name, organization, and product key.</span></span> <span data-ttu-id="ae256-404">选择“下一步” 。</span><span class="sxs-lookup"><span data-stu-id="ae256-404">Select **Next**.</span></span>
5. <span data-ttu-id="ae256-405">接受许可协议，然后选择“下一步”。</span><span class="sxs-lookup"><span data-stu-id="ae256-405">Accept the license agreement, and select **Next**.</span></span>
6. <span data-ttu-id="ae256-406">在“客户体验改善计划”中，输入首选项。</span><span class="sxs-lookup"><span data-stu-id="ae256-406">In Customer Experience Improvement Program, enter you preference.</span></span> <span data-ttu-id="ae256-407">有关详细信息，请参阅本主题中的**附录 A**。</span><span class="sxs-lookup"><span data-stu-id="ae256-407">See **Appendix A** (in this topic) for more information.</span></span>
7. <span data-ttu-id="ae256-408">在“组件安装”中，查看可用组件，然后选择“下一步”。</span><span class="sxs-lookup"><span data-stu-id="ae256-408">In **Component Installation**, review the available components, and select **Next**.</span></span>
8. <span data-ttu-id="ae256-409">如果计算机缺少必备组件，则安装程序可能会安装可再发行的必备组件。</span><span class="sxs-lookup"><span data-stu-id="ae256-409">If your computer is missing a prerequisite, Setup can install the redistributable prerequisites.</span></span> <span data-ttu-id="ae256-410">您可以：</span><span class="sxs-lookup"><span data-stu-id="ae256-410">You can either:</span></span>

    - <span data-ttu-id="ae256-411">选择“自动从 Web 安装可再发行的必备组件”</span><span class="sxs-lookup"><span data-stu-id="ae256-411">Select Automatically install the redistributable prerequisites from the web</span></span>  
  
      <span data-ttu-id="ae256-412">或</span><span class="sxs-lookup"><span data-stu-id="ae256-412">OR</span></span>  
  
    - <span data-ttu-id="ae256-413">如果已下载 CAB 文件，则选择“自动从 CAB 文件安装可再发行的必备组件”。</span><span class="sxs-lookup"><span data-stu-id="ae256-413">Select Automatically install the redistributable prerequisites from a CAB file if you downloaded the CAB file.</span></span> <span data-ttu-id="ae256-414">浏览到 CAB 文件的位置，然后选择该文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-414">Browse to the location of the CAB file and select it.</span></span>

9. <span data-ttu-id="ae256-415">在“摘要”中，查看可升级的组件。</span><span class="sxs-lookup"><span data-stu-id="ae256-415">In **Summary**, review the upgradable components.</span></span>
10. <span data-ttu-id="ae256-416">选择“升级”以开始升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-416">Select **Upgrade** to start.</span></span>
11. <span data-ttu-id="ae256-417">可选：选择“检查更新时使用 Microsoft 更新(推荐)”。</span><span class="sxs-lookup"><span data-stu-id="ae256-417">Optional: Select **Use the Microsoft Update when I check for updates (recommended)**.</span></span>
12. <span data-ttu-id="ae256-418">在“升级已完成”中，清除“启动 BizTalk Server 配置”复选框，然后选择“完成”。</span><span class="sxs-lookup"><span data-stu-id="ae256-418">In **Upgrade Completed**, clear the L**aunch BizTalk Server Configuration** check box, and then select **Finish**.</span></span>

<span data-ttu-id="ae256-419">**补充说明**</span><span class="sxs-lookup"><span data-stu-id="ae256-419">**ADDITIONAL**</span></span>  
<span data-ttu-id="ae256-420">升级 BizTalk Server 期间会发生很多情况，在此过程中发生错误也就不足为奇了。</span><span class="sxs-lookup"><span data-stu-id="ae256-420">A lot happens during an upgrade of BizTalk Server, and it’s not uncommon to run into an error during the process.</span></span> <span data-ttu-id="ae256-421">但是，如果您作了准备，大多数错误可轻松纠正。</span><span class="sxs-lookup"><span data-stu-id="ae256-421">However, most errors are easily remedied if you’re prepared.</span></span> <span data-ttu-id="ae256-422">建议阅读本主题中的**附录 B**，了解如何避免升级错误，以及发生错误时应采取的操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-422">We recommend reading the **Appendix B** (in this topic) for tips on how to avoid upgrade errors, and what to do if one occurs.</span></span>

<span data-ttu-id="ae256-423">升级过程仅升级作为前一版本 BizTalk Server 一部分的功能。</span><span class="sxs-lookup"><span data-stu-id="ae256-423">The upgrade process only upgrades features that were part of your previous version of BizTalk Server.</span></span> <span data-ttu-id="ae256-424">升级过程中不安装新的功能。</span><span class="sxs-lookup"><span data-stu-id="ae256-424">New features are not installed during an upgrade.</span></span> <span data-ttu-id="ae256-425">若要安装这些功能，请在升级之后重新运行安装程序，选择“修改”，然后选择要安装的功能。</span><span class="sxs-lookup"><span data-stu-id="ae256-425">To install these features, rerun Setup after the upgrade, choose **Modify**, and select the features you want to install.</span></span> <span data-ttu-id="ae256-426">安装后，可使用 **BizTalk Server 配置管理器**对其进行配置。</span><span class="sxs-lookup"><span data-stu-id="ae256-426">Once installed, configure them using the **BizTalk Server Configuration Manager**.</span></span>

<span data-ttu-id="ae256-427">若要验证升级是否成功，请打开“程序和功能”并查找 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ae256-427">To verify if the upgrade is successful, open **Programs and Features** and look for [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span> <span data-ttu-id="ae256-428">如果已列出，则安装成功。</span><span class="sxs-lookup"><span data-stu-id="ae256-428">If it’s listed, setup succeeded.</span></span>

## <a name="post-upgrade"></a><span data-ttu-id="ae256-429">升级后</span><span class="sxs-lookup"><span data-stu-id="ae256-429">Post upgrade</span></span>
<span data-ttu-id="ae256-430">无法回退到 [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013。</span><span class="sxs-lookup"><span data-stu-id="ae256-430">You cannot roll back to [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]/2013.</span></span>

- <span data-ttu-id="ae256-431">**如果创建了 BAM 警报定义 XML 文件**：在 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 配置中，配置 BAM 警报。</span><span class="sxs-lookup"><span data-stu-id="ae256-431">**If you created a BAM Alerts definition XML file**: In [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] Configuration, configure BAM Alerts.</span></span> <span data-ttu-id="ae256-432">然后，部署已保存的定义。</span><span class="sxs-lookup"><span data-stu-id="ae256-432">Then, deploy the saved Definitions.</span></span>

    <span data-ttu-id="ae256-433">本主题中的**升级之前**部分中列出了具体步骤。</span><span class="sxs-lookup"><span data-stu-id="ae256-433">**Before the upgrade** (in this topic) lists the specific steps.</span></span> <span data-ttu-id="ae256-434">否则，请在升级后重新创建 BAM 警报定义。</span><span class="sxs-lookup"><span data-stu-id="ae256-434">Otherwise, recreate the BAM Alert definitions after you upgrade.</span></span>

- <span data-ttu-id="ae256-435">**安装 MQSAgent**：如果 MQSAgent.dll 文件安装在远程 WebSphere MQ Server 上，请在远程 WebSphere MQ Server 上安装 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] 的新版 MQ 代理。</span><span class="sxs-lookup"><span data-stu-id="ae256-435">**Install MQSAgent**: If the MQSAgent.dll file is installed on a remote WebSphere MQ Server, install a new version of the MQ Agent from [!INCLUDE[bts2016_md](../includes/bts2016-md.md)] on the remote WebSphere MQ Server.</span></span>

- <span data-ttu-id="ae256-436">**启动 MSMQ**：如果使用 MSMQ 适配器，请启动消息队列服务。</span><span class="sxs-lookup"><span data-stu-id="ae256-436">**Start MSMQ**: If you use the MSMQ adapter, start the Message Queuing service.</span></span>

- <span data-ttu-id="ae256-437">**自定义 EXE 和 BRE**：如果在 BizTalk Server 2010 中具有引用业务规则引擎程序集的自定义托管可执行文件，请将以下内容添加到应用程序配置文件中，以在 .NET Framework 2.0 中运行此进程。</span><span class="sxs-lookup"><span data-stu-id="ae256-437">**Custom EXE and BRE**: If you have a custom managed executable file that references Business Rule Engine assembly in BizTalk Server 2010, add the following to the application configuration file to run the process in the .NET Framework 2.0.</span></span>

    ```
    <?xml version="1.0" encoding="Windows-1252"?>
    <configuration> 
     <startup>
      <supportedRuntime version="v2.0.50727" />
     </startup>   
    </configuration>
    ```

- <span data-ttu-id="ae256-438">**SQL 代理作业**：重新配置以下 SQL Server 代理作业：</span><span class="sxs-lookup"><span data-stu-id="ae256-438">**SQL Agent job**: Reconfigure the following SQL Server Agent jobs:</span></span>

    -   <span data-ttu-id="ae256-439">配置 DTA 清除和存档 (BizTalkDTADb)：请参阅[如何配置 DTA 清除和存档作业](../core/how-to-configure-the-dta-purge-and-archive-job.md)</span><span class="sxs-lookup"><span data-stu-id="ae256-439">DTA Purge and Archive (BizTalkDTADb): See [How to Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md)</span></span>
    -   <span data-ttu-id="ae256-440">备份 BizTalk Server (BizTalkMgmtDb)：请参阅[如何配置备份 BizTalk Server 作业](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="ae256-440">Backup BizTalk Server (BizTalkMgmtDb): See [How to Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>

- <span data-ttu-id="ae256-441">**重启应用程序**：重启升级后的所有部署的应用程序。</span><span class="sxs-lookup"><span data-stu-id="ae256-441">**Restart applications**: Restart all deployed applications that are upgraded.</span></span>

- <span data-ttu-id="ae256-442">**BAM 门户错误**：打开 BAM 门户时，可能会收到以下错误消息：</span><span class="sxs-lookup"><span data-stu-id="ae256-442">**BAM Portal error**: When you open the BAM portal, you may receive the following error message:</span></span> 

    `The server encountered a critical failure while trying to access the list of Views. The Business Management Web Service requires Administrator's attention.` 

    <span data-ttu-id="ae256-443">如果 BAM 门户是在运行 .NET Framework 2.0 的应用程序所用的网站上配置的，则可能发生此错误。</span><span class="sxs-lookup"><span data-stu-id="ae256-443">This error can occur if the BAM portal is configured on a website used by applications that are running .NET Framework 2.0.</span></span> <span data-ttu-id="ae256-444">在这种情况下，应在一个新网站上托管 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="ae256-444">In this scenario, host the BAM portal on a new website.</span></span> <span data-ttu-id="ae256-445">若要添加网站，请参阅[创建网站](http://go.microsoft.com/fwlink/p/?LinkID=196470)。</span><span class="sxs-lookup"><span data-stu-id="ae256-445">To add a website, see [Create a Web Site](http://go.microsoft.com/fwlink/p/?LinkID=196470).</span></span> <span data-ttu-id="ae256-446">创建网站后，重新配置 BAM 门户：</span><span class="sxs-lookup"><span data-stu-id="ae256-446">After creating the website, reconfigure the BAM Portal:</span></span>

    1. <span data-ttu-id="ae256-447">打开“BizTalk Server 配置”。</span><span class="sxs-lookup"><span data-stu-id="ae256-447">Open **BizTalk Server Configuration**.</span></span>
    2. <span data-ttu-id="ae256-448">选择“取消对功能的配置”。</span><span class="sxs-lookup"><span data-stu-id="ae256-448">Select **Unconfigure Features**.</span></span> <span data-ttu-id="ae256-449">在“取消对功能的配置”中，选中“BAM 门户”复选框，然后选择“确定”。</span><span class="sxs-lookup"><span data-stu-id="ae256-449">In **Unconfigure Features**, select the **BAM Portal** check box, and select **OK**.</span></span>
    3. <span data-ttu-id="ae256-450">从“BAM 门户网站”列表中选择新网站，重新配置 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="ae256-450">Reconfigure the BAM portal by selecting the new website from the **BAM Portal Web Site** list.</span></span>

- <span data-ttu-id="ae256-451">**用于 SWIFT 的 BizTalk 2016 加速器**：BizTalk Server 升级过程不会更新已编辑的 *BREDeployment.exe.config* 文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-451">**BizTalk 2016 Accelerator for SWIFT**: The BizTalk Server upgrade process does not update an edited *BREDeployment.exe.config* file.</span></span> <span data-ttu-id="ae256-452">手动更改 *BREDeployment.exe.config* 文件中的路径，该文件位于 `\Program Files\Microsoft BizTalk 2016 Accelerator for SWIFT\SDK\Tools` 文件夹中。</span><span class="sxs-lookup"><span data-stu-id="ae256-452">Manually change the paths in the *BREDeployment.exe.config* file located in the `\Program Files\Microsoft BizTalk 2016 Accelerator for SWIFT\SDK\Tools` folder.</span></span>

    <span data-ttu-id="ae256-453">另外，A4SWIFT Web 服务和 Message Pack 配置也将丢失。</span><span class="sxs-lookup"><span data-stu-id="ae256-453">Also, the A4SWIFT Web Services and Message Pack configuration is lost.</span></span> <span data-ttu-id="ae256-454">在 BizTalk Server 升级后，重新配置这些设置。</span><span class="sxs-lookup"><span data-stu-id="ae256-454">Reconfigure these after BizTalk Server is upgraded.</span></span>

## <a name="appendix-a-customer-experience-improvement-program"></a><span data-ttu-id="ae256-455">附录 A：客户体验改善计划</span><span class="sxs-lookup"><span data-stu-id="ae256-455">Appendix A: Customer experience improvement Program</span></span>
<span data-ttu-id="ae256-456">根据 BizTalk Server 中的客户体验改善计划，可就 BizTalk Server 的功能使用情况向 Microsoft 提供有用的反馈。</span><span class="sxs-lookup"><span data-stu-id="ae256-456">As part of the Customer Experience Improvement Program in BizTalk Server, you can provide useful feedback to Microsoft regarding feature usage of BizTalk Server.</span></span> <span data-ttu-id="ae256-457">收集的数据是匿名的，不能用来识别你的身份。</span><span class="sxs-lookup"><span data-stu-id="ae256-457">The data collected is anonymous, and cannot be used to identify you.</span></span> <span data-ttu-id="ae256-458">Microsoft 会作为此计划的一部分来收集功能使用情况统计信息。</span><span class="sxs-lookup"><span data-stu-id="ae256-458">Microsoft collects feature usage statistics as part of this program.</span></span>

<span data-ttu-id="ae256-459">通过参与此计划，您可以帮助我们改进 BizTalk Server 各项功能的可靠性和性能。</span><span class="sxs-lookup"><span data-stu-id="ae256-459">By participating in this program, you can help improve the reliability and performance of various features of BizTalk Server.</span></span> <span data-ttu-id="ae256-460">若要深入了解此计划及其隐私策略，请参阅 [Microsoft BizTalk Server CEIP 隐私策略](http://go.microsoft.com/fwlink/p/?LinkId=188553)。</span><span class="sxs-lookup"><span data-stu-id="ae256-460">For more information about this program and its privacy policy, see [Microsoft BizTalk Server CEIP Privacy Policy](http://go.microsoft.com/fwlink/p/?LinkId=188553).</span></span>

## <a name="appendix-b-known-issues"></a><span data-ttu-id="ae256-461">附录 B：已知问题</span><span class="sxs-lookup"><span data-stu-id="ae256-461">Appendix B: Known issues</span></span>

- <span data-ttu-id="ae256-462">**在管理计算机上配置 BAM 警报**：在不同的计算机上安装了管理组件、运行时组件和 SQL Server 组件的多计算机环境。</span><span class="sxs-lookup"><span data-stu-id="ae256-462">**Configure BAM Alerts on Administration computer**: There is a multicomputer environment with the Administration, Runtime, and SQL Server components installed on separate computers.</span></span> <span data-ttu-id="ae256-463">在使用 BAM 工具或 BAM 警报时，可能会出现以下问题：</span><span class="sxs-lookup"><span data-stu-id="ae256-463">When working with BAM Tools or BAM Alerts, the following issues can occur:</span></span>

    <span data-ttu-id="ae256-464">**问题**：在 BizTalk 管理计算机上配置 BAM 工具时，将发生以下错误：</span><span class="sxs-lookup"><span data-stu-id="ae256-464">**ISSUE**: When you configure BAM Tools on a BizTalk Administration computer, the following error occurs:</span></span>
    
    `Service BAMAlerts was not found on computer ‘.’.The specified service does not exist as an installed service.`

    <span data-ttu-id="ae256-465">**问题**：从运行时计算机部署 BAM 活动定义时，将发生以下错误：</span><span class="sxs-lookup"><span data-stu-id="ae256-465">**ISSUE**: When you deploy a BAM Activity Definition from Runtime computer, the following error occurs:</span></span>
    
    `A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) (.Net SqlClient Data Provider)`
    
    <span data-ttu-id="ae256-466">如果在运行时计算机上配置 BAM 警报，则会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="ae256-466">This occurs if BAM Alerts is configured on the Runtime computer.</span></span> <span data-ttu-id="ae256-467">若要解决，请在 BizTalk 管理控制台的同一台计算机上配置 BAM 警报。</span><span class="sxs-lookup"><span data-stu-id="ae256-467">To resolve, configure BAM Alerts on the same computer as the BizTalk Administration console.</span></span> <span data-ttu-id="ae256-468">请勿在运行时计算机上配置 BAM 警报。</span><span class="sxs-lookup"><span data-stu-id="ae256-468">Do not configure BAM Alerts on the Runtime computer.</span></span>

- <span data-ttu-id="ae256-469">**从失败的升级中恢复**：升级过程中随时可能发生升级失败。</span><span class="sxs-lookup"><span data-stu-id="ae256-469">**Recovering from a Failed Upgrade**: A failed upgrade can occur at any time during the upgrade.</span></span> <span data-ttu-id="ae256-470">如何从失败的升级中恢复将取决于升级失败发生在每个阶段中的哪个点。</span><span class="sxs-lookup"><span data-stu-id="ae256-470">How you recover from a failed upgrade is determined from what point during each phase the failure occurred.</span></span>

    - <span data-ttu-id="ae256-471">如果在安装必备组件时发生升级失败，安装程序将停止必备软件的进一步安装，并返回错误消息。</span><span class="sxs-lookup"><span data-stu-id="ae256-471">If the upgrade fails when installing the prerequisites, then setup stops further installation of prerequisites, and returns a message with the error.</span></span> <span data-ttu-id="ae256-472">然后，可更正问题并重新运行安装程序。</span><span class="sxs-lookup"><span data-stu-id="ae256-472">You can then correct the problem and rerun setup.</span></span>
    
    - <span data-ttu-id="ae256-473">如果在升级数据库、删除现有 BizTalk Server 版本中的功能或安装新版本时升级失败，则安装程序将停止进一步安装，并返回错误消息。</span><span class="sxs-lookup"><span data-stu-id="ae256-473">If the upgrade fails when upgrading the databases, removing features from the existing BizTalk Server version, or installing the new version, then setup stops further installation, and returns a message with the error.</span></span> <span data-ttu-id="ae256-474">将回退所做的任何更改。</span><span class="sxs-lookup"><span data-stu-id="ae256-474">Any changes are rolled back.</span></span> <span data-ttu-id="ae256-475">无法回退对 BizTalk Server 数据库所做的更改。</span><span class="sxs-lookup"><span data-stu-id="ae256-475">Changes made to the BizTalk Server databases cannot be rolled back.</span></span>
    
        <span data-ttu-id="ae256-476">如果在升级过程中删除了先前安装的 BizTalk Server 的组件，那么计算机可能会保持无 BizTalk Server 组件的状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-476">If components of the previous BizTalk Server installation are removed during upgrade, your computer may be left in a state with no BizTalk Server components.</span></span> <span data-ttu-id="ae256-477">可能会保留先前安装中的功能配置信息。</span><span class="sxs-lookup"><span data-stu-id="ae256-477">Feature configuration information from the previous installation may be retained.</span></span> <span data-ttu-id="ae256-478">并且根据升级过程失败的位置，可能已升级了 BizTalk Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="ae256-478">And depending on where the upgrade process fails, the BizTalk Server databases may have been upgraded.</span></span> <span data-ttu-id="ae256-479">可能需要还原之前备份的数据库，然后才能再次运行安装程序。</span><span class="sxs-lookup"><span data-stu-id="ae256-479">It may be necessary to restore the databases which you backed up earlier before running setup again.</span></span>
    
    - <span data-ttu-id="ae256-480">如果在重新配置 BizTalk Server 功能时升级失败，则安装程序将返回完成比例消息。</span><span class="sxs-lookup"><span data-stu-id="ae256-480">If the upgrade fails when reconfiguring the BizTalk Server features, then the setup returns a message with the level of completion.</span></span> <span data-ttu-id="ae256-481">如果配置升级失败或部分成功，请运行 BizTalk Server 配置来完成升级。</span><span class="sxs-lookup"><span data-stu-id="ae256-481">If configuration upgrade fails or partially succeeds, run the BizTalk Server configuration to complete the upgrade.</span></span>
    
    <span data-ttu-id="ae256-482">如果升级继续失败并且需要回退到先前版本的 BizTalk Server，则必须还原已备份的数据库，然后再重新安装先前的 BizTalk Server 版本。</span><span class="sxs-lookup"><span data-stu-id="ae256-482">If the upgrade continues to fail and you need to regress to your previous version of BizTalk Server, you must restore the databases you backed up, and then reinstall your previous BizTalk Server version.</span></span>

- <span data-ttu-id="ae256-483">**使用同一版本**：在 BizTalk 应用程序组中，无法运行具有不同版本 BizTalk Server 的计算机。</span><span class="sxs-lookup"><span data-stu-id="ae256-483">**Use the same versions**: In a BizTalk application group, you cannot run machines with different versions of BizTalk Server.</span></span> <span data-ttu-id="ae256-484">例如，在 BizTalk 管理控制台中，你无法将运行在一个 BizTalk Server 版本上的发送端口绑定到运行在其他 BizTalk Server 版本上的接收位置。</span><span class="sxs-lookup"><span data-stu-id="ae256-484">For example, in the BizTalk Administration Console, you cannot bind a send port running on one version of BizTalk Server to a receive location running on a different version of BizTalk Server.</span></span> 

- <span data-ttu-id="ae256-485">**重启 SSO 服务**：如果在计算机上安装了早期版本的 Visual Studio 或 .NET Framework 4.5，则早期版本的 BizTalk Server 中的 SSO 服务会停止工作。</span><span class="sxs-lookup"><span data-stu-id="ae256-485">**Restart SSO Service**: If you have a previous Visual Studio version or .NET Framework 4.5 installed on your machine, then the SSO service in earlier versions of BizTalk Server stops working.</span></span> <span data-ttu-id="ae256-486">若要解决此问题，请从 Visual Studio 命令提示符处运行 `regasm SSOSQL.dll` 命令。</span><span class="sxs-lookup"><span data-stu-id="ae256-486">To resolve this issue, run the `regasm SSOSQL.dll` command from the Visual Studio command prompt.</span></span> <span data-ttu-id="ae256-487">该命令将重新启动 SSO 服务。</span><span class="sxs-lookup"><span data-stu-id="ae256-487">This command restarts the SSO service.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ae256-488">在 64 位计算机上，运行 32 位和 64 位版本的 regasm 命令。</span><span class="sxs-lookup"><span data-stu-id="ae256-488">On a 64-bit computer, run the 32-bit and 64-bit versions of the regasm command.</span></span>

- <span data-ttu-id="ae256-489">**无法使用 SOAP**：平台升级完成之后，可能会由于没有权限而无法发送 SOAP 消息。</span><span class="sxs-lookup"><span data-stu-id="ae256-489">**Unable to use SOAP**: After a platform upgrade, you may not be able to send SOAP message because of permissions.</span></span> <span data-ttu-id="ae256-490">若要解决此问题，请使用下列文本在 `C:\inetpub\wwwroot\<SOAPExternalAppName>\` 处编辑 Web.config 文件：</span><span class="sxs-lookup"><span data-stu-id="ae256-490">To resolve this, edit the Web.config file at `C:\inetpub\wwwroot\<SOAPExternalAppName>\` with the following text:</span></span>

    ```
    <securityPolicy>
    <trustLevel name="Full" policyFile="internal" />
    <trustLevel name="High" policyFile="web_hightrust.config" />
    <trustLevel name="Medium" policyFile="web_mediumtrust.config" />
    <trustLevel name="Low" policyFile="web_lowtrust.config" />
    <trustLevel name="Minimal" policyFile="web_minimaltrust.config"/>
    </securityPolicy>
    <trust level="Full" originUrl="" processRequestInApplicationTrust="true"/>
    ```

    <span data-ttu-id="ae256-491">可能还必须将自定义错误模式从“仅远程”更改为“禁用”。</span><span class="sxs-lookup"><span data-stu-id="ae256-491">You may also have to change the custom error mode from **Remote Only** to **Off**.</span></span>

- <span data-ttu-id="ae256-492">**证书存储**：升级后，从 BizTalk Server 管理控制台打开发送端口或接收位置，会出现错误：`Could not open certificate store, the system cannot find the file specified (System).`</span><span class="sxs-lookup"><span data-stu-id="ae256-492">**Certificate Store**: After you upgrade, you open a send port or receive location from the BizTalk Server Administration console, and get error: `Could not open certificate store, the system cannot find the file specified (System).`</span></span>

    <span data-ttu-id="ae256-493">缺少证书存储时会出现此错误。</span><span class="sxs-lookup"><span data-stu-id="ae256-493">This error occurs if the certificate store is missing.</span></span>

- <span data-ttu-id="ae256-494">**BAM 门户**：在 64 位计算机上，升级后无法访问 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="ae256-494">**BAM Portal**: On a 64-bit machine, you cannot access BAM portal after you upgrade.</span></span> <span data-ttu-id="ae256-495">可能的解决方法：</span><span class="sxs-lookup"><span data-stu-id="ae256-495">Possible resolution:</span></span>

    1. <span data-ttu-id="ae256-496">创建位于 `%BizTalkInstallDir%\BAMPortal\web.config` 处的 web.config 文件的备份副本。</span><span class="sxs-lookup"><span data-stu-id="ae256-496">Create a backup copy of the web.config file located at `%BizTalkInstallDir%\BAMPortal\web.config`.</span></span>

    2. <span data-ttu-id="ae256-497">使用 BizTalk Server Tracking 文件夹中的 bm.exe，在命令提示符处运行以下命令：`bm.exe get-config –FileName:<filepath> -Server:MyServer -Database:MyDB`</span><span class="sxs-lookup"><span data-stu-id="ae256-497">Using bm.exe in the BizTalk Server Tracking folder, run the following at the command prompt: `bm.exe get-config –FileName:<filepath> -Server:MyServer -Database:MyDB`</span></span>

    <span data-ttu-id="ae256-498">在 Config XML 文件中，获取 *BAMVRoot* 的值 (xpath: BAMConfiguration\ GlobalProperty\Name="BAMVRoot")。</span><span class="sxs-lookup"><span data-stu-id="ae256-498">From the Config XML file, get the value for *BAMVRoot* (xpath: BAMConfiguration\ GlobalProperty\Name="BAMVRoot").</span></span>

    3. <span data-ttu-id="ae256-499">打开列为 BAMVRoot 值的计算机上的 BizTalk Server 配置，然后取消对 BAM 门户的配置。</span><span class="sxs-lookup"><span data-stu-id="ae256-499">Open the BizTalk Server Configuration on the computer that is listed as the BAMVRoot value, and unconfigure the BAM portal.</span></span>

    4. <span data-ttu-id="ae256-500">打开 BizTalk Server 配置，然后配置 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="ae256-500">Open the BizTalk Server Configuration, and configure the BAM portal.</span></span>

    5. <span data-ttu-id="ae256-501">从步骤 (1) 中提到的位置打开新的 web.config 文件。</span><span class="sxs-lookup"><span data-stu-id="ae256-501">Open the new web.config file from location mentioned in step (1).</span></span>

    6. <span data-ttu-id="ae256-502">使用 web.config 文件的备份副本，设置以下值（`configuration\appSettings` 下）：</span><span class="sxs-lookup"><span data-stu-id="ae256-502">Using the backup copy of the web.config file, set the following values (under `configuration\appSettings`):</span></span>

        - <span data-ttu-id="ae256-503">key="MainPageContentUrl"</span><span class="sxs-lookup"><span data-stu-id="ae256-503">key="MainPageContentUrl"</span></span>
        - <span data-ttu-id="ae256-504">key="AlertNotificationOptions"</span><span class="sxs-lookup"><span data-stu-id="ae256-504">key="AlertNotificationOptions"</span></span>

    > [!NOTE] 
    > <span data-ttu-id="ae256-505">在 64 位计算机上，升级操作系统之后，建议重新配置 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="ae256-505">On a 64-bit machine, after you upgrade the operating system, we recommend that you reconfigure the BAM portal.</span></span>

- <span data-ttu-id="ae256-506">**部署 EDI BAM 活动**：升级时，升级可能会部分成功。</span><span class="sxs-lookup"><span data-stu-id="ae256-506">**Deploy EDI BAM activities**: When you upgrade, the upgrade may partially succeed.</span></span> <span data-ttu-id="ae256-507">升级已配置 EDI 的 SQL Server 时可能发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="ae256-507">This can happen when you upgrade SQL Server (with EDI configured).</span></span> <span data-ttu-id="ae256-508">可能未正确升级 EDI BAM 活动。</span><span class="sxs-lookup"><span data-stu-id="ae256-508">The EDI BAM activities might not be upgraded properly.</span></span> <span data-ttu-id="ae256-509">若要解决此问题，请通过使用管理凭据在命令提示符处运行以下命令来部署 BAM 活动：</span><span class="sxs-lookup"><span data-stu-id="ae256-509">To resolve this issue, deploy the BAM activities by running the following commands at the command prompt with administrative credentials:</span></span>

    `"<BizTalk Installation Folder>\Tracking\bm.exe" deploy-all -DefinitionFile:"<BizTalk Installation Folder>\AS2ResendActivityDefs.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

    `"<BizTalk Installation Folder>\Tracking\bm.exe" update-all -DefinitionFile:"<BizTalk Installation Folder>\Microsoft.BizTalk.Configuration.EdiAS2.UpgradeR2toR3.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

    `"<BizTalk Installation Folder>\Tracking\bm.exe" update-all -DefinitionFile:"<BizTalk Installation Folder>\Microsoft.BizTalk.Configuration.Batching.UpgradeR2toR3.xml" -Server:"<BAM Database Server Name>" -Database:"<BAM Database Name>"`

- <span data-ttu-id="ae256-510">**群集上的 SSO 错误**：在 BizTalk Server 运行时群集环境中，尝试升级时，可能会收到错误消息：</span><span class="sxs-lookup"><span data-stu-id="ae256-510">**SSO Error on Cluster**: On a BizTalk Server runtime cluster environment, when you try to upgrade, you may receive an error message:</span></span>

    `SSO Master Secret Server service is not running on <Cluster name>.Please start the service to continue the upgrade.` 

    <span data-ttu-id="ae256-511">若要解决此问题，请刷新 SSO 和 BizTalk Server 运行时群集中的 SSO 服务。</span><span class="sxs-lookup"><span data-stu-id="ae256-511">To resolve this issue, refresh the SSO services both in the SSO and BizTalk Server runtime cluster.</span></span>

    <span data-ttu-id="ae256-512">**刷新 SSO 群集中的 SSO 服务**：</span><span class="sxs-lookup"><span data-stu-id="ae256-512">**To refresh the SSO services in SSO cluster**:</span></span>

    1. <span data-ttu-id="ae256-513">在群集管理器中，对包含群集企业 SSO 服务资源的群集组执行**联机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-513">In Cluster Administrator, **Bring Online** the cluster group that contains the clustered Enterprise SSO service resource.</span></span> <span data-ttu-id="ae256-514">这应启动群集组中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="ae256-514">This should start all of the resources in the cluster group.</span></span>

    2. <span data-ttu-id="ae256-515">对企业 SSO 服务的群集实例执行**脱机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-515">**Take Offline** the clustered instance of the Enterprise SSO service.</span></span> <span data-ttu-id="ae256-516">然后，让其返回到**联机**状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-516">And then, bring it back **Online**.</span></span>

    3. <span data-ttu-id="ae256-517">**移动**群集组。</span><span class="sxs-lookup"><span data-stu-id="ae256-517">**Move** the cluster group.</span></span> <span data-ttu-id="ae256-518">此步骤应将第一个节点上包含群集企业 SSO 服务资源的群集组移到第二个节点上。</span><span class="sxs-lookup"><span data-stu-id="ae256-518">This step should move the cluster group that contains the clustered Enterprise SSO services resource from the first node to the second node.</span></span>

    4. <span data-ttu-id="ae256-519">对企业 SSO 服务的群集实例执行**脱机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-519">**Take Offline** the clustered instance of the Enterprise SSO service.</span></span> <span data-ttu-id="ae256-520">然后，让其返回到**联机**状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-520">And then, bring it back **Online**.</span></span>

    <span data-ttu-id="ae256-521">**刷新 BizTalk Server 运行时群集中的 SSO 服务**：</span><span class="sxs-lookup"><span data-stu-id="ae256-521">**To refresh the SSO services in a BizTalk Server Runtime cluster**:</span></span>

    1. <span data-ttu-id="ae256-522">在群集管理器中，对包含群集 BizTalk Server 运行时资源的群集组执行**联机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-522">In Cluster Administrator, **Bring Online** the cluster group that contains the clustered BizTalk Server runtime resource.</span></span> <span data-ttu-id="ae256-523">这应启动群集组中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="ae256-523">This should start all of the resources in the cluster group.</span></span>

    2. <span data-ttu-id="ae256-524">对企业 SSO 服务的群集实例执行**脱机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-524">**Take Offline** the clustered instance of the Enterprise SSO services.</span></span> <span data-ttu-id="ae256-525">然后，让其返回到**联机**状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-525">And then, bring it back **Online**.</span></span>

    3. <span data-ttu-id="ae256-526">**移动**群集组。</span><span class="sxs-lookup"><span data-stu-id="ae256-526">**Move** the cluster group.</span></span> <span data-ttu-id="ae256-527">此步骤应将第一个节点上包含群集 BizTalk Server 运行时资源的群集组移到第二个节点上。</span><span class="sxs-lookup"><span data-stu-id="ae256-527">This step should move the cluster group that contains the clustered BizTalk Server runtime resource from the first node to the second node.</span></span>

    4. <span data-ttu-id="ae256-528">对企业 SSO 服务的群集实例执行**脱机**操作。</span><span class="sxs-lookup"><span data-stu-id="ae256-528">**Take Offline** the clustered instance of the Enterprise SSO services.</span></span> <span data-ttu-id="ae256-529">然后，让其返回到**联机**状态。</span><span class="sxs-lookup"><span data-stu-id="ae256-529">And then, bring it back **Online**.</span></span>