---
title: 配置后步骤用于优化环境 |Microsoft Docs
description: 要在安装和配置 BizTalk Server 后完成的任务包括配置的 SQL 代理作业、 安装 EDI 架构、 创建主机和主机实例以及 BizTalk Server 中的详细信息
ms.custom: ''
ms.prod: biztalk-server
ms.date: 09/27/2017
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d0fef6ea-e7cc-4ea9-936d-5d638bc43feb
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3562487e70557ec57a686d8b0109f61eccaa8dce
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65394018"
---
# <a name="post-configuration-steps-to-optimize-your-environment"></a><span data-ttu-id="647d0-103">用于优化环境的配置后步骤</span><span class="sxs-lookup"><span data-stu-id="647d0-103">Post-configuration steps to optimize your environment</span></span>
<span data-ttu-id="647d0-104">配置后步骤，以帮助提高性能，维护 BizTalk 环境，并安装 EDI 架构。</span><span class="sxs-lookup"><span data-stu-id="647d0-104">Post-configuration steps to help improve performance, maintain your BizTalk environment, and install the EDI schemas.</span></span>

## <a name="disable-shared-memory-protocol-in-sql-server"></a><span data-ttu-id="647d0-105">禁用 SQL Server 中的 Shared Memory 协议</span><span class="sxs-lookup"><span data-stu-id="647d0-105">Disable Shared Memory protocol in SQL Server</span></span>

1. <span data-ttu-id="647d0-106">打开 **SQL Server 配置管理器**。</span><span class="sxs-lookup"><span data-stu-id="647d0-106">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="647d0-107">展开**SQL Server 网络配置**，然后选择**MSSQLSERVER 的协议**。</span><span class="sxs-lookup"><span data-stu-id="647d0-107">Expand **SQL Server Network Configuration**, and select **Protocols for MSSQLSERVER**.</span></span>
3. <span data-ttu-id="647d0-108">右键单击**Shared Memory**，然后选择**禁用**。</span><span class="sxs-lookup"><span data-stu-id="647d0-108">Right-click **Shared Memory**, and select **Disable**.</span></span>
4. <span data-ttu-id="647d0-109">选择**SQL Server Services**，右键单击**SQL Server (MSSQLServer)**，然后选择**重启**。</span><span class="sxs-lookup"><span data-stu-id="647d0-109">Select **SQL Server Services**, right-click **SQL Server (MSSQLServer)**, and select **Restart**.</span></span>
5. <span data-ttu-id="647d0-110">关闭**SQL Server 配置管理器**。</span><span class="sxs-lookup"><span data-stu-id="647d0-110">Close **SQL Server Configuration Manager**.</span></span>

## <a name="configure-the-sql-agent-jobs"></a><span data-ttu-id="647d0-111">配置 SQL 代理作业</span><span class="sxs-lookup"><span data-stu-id="647d0-111">Configure the SQL Agent jobs</span></span>

1. <span data-ttu-id="647d0-112">**SQL Server Management Studio**，并连接到**数据库引擎**。</span><span class="sxs-lookup"><span data-stu-id="647d0-112">**SQL Server Management Studio**, and connect to **Database Engine**.</span></span>
2. <span data-ttu-id="647d0-113">展开 **“SQL Server 代理”**，然后展开 **“作业”**。</span><span class="sxs-lookup"><span data-stu-id="647d0-113">Expand **SQL Server Agent**, and expand **Jobs**.</span></span> <span data-ttu-id="647d0-114">配置以下作业：</span><span class="sxs-lookup"><span data-stu-id="647d0-114">Configure the following jobs:</span></span>  

    <span data-ttu-id="647d0-115">作业名称</span><span class="sxs-lookup"><span data-stu-id="647d0-115">Job Name</span></span>  |<span data-ttu-id="647d0-116">Description</span><span class="sxs-lookup"><span data-stu-id="647d0-116">Description</span></span>  |<span data-ttu-id="647d0-117">为什么需要它</span><span class="sxs-lookup"><span data-stu-id="647d0-117">Why you need it</span></span>  
    ---------|---------|---------
    <span data-ttu-id="647d0-118">备份 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="647d0-118">Backup BizTalk Server</span></span> | <span data-ttu-id="647d0-119">备份 BizTalk Server 数据库和日志文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-119">Backs up the BizTalk Server databases and the log files.</span></span> <span data-ttu-id="647d0-120">在配置该作业，确定频率和文件位置等参数。</span><span class="sxs-lookup"><span data-stu-id="647d0-120">When configuring the job, you determine parameters like frequency and file location.</span></span><br/><br/><span data-ttu-id="647d0-121">以下链接介绍了 SQL 代理作业和其参数：</span><span class="sxs-lookup"><span data-stu-id="647d0-121">The following links describe the SQL Agent job and its parameters:</span></span><br/><br/>[<span data-ttu-id="647d0-122">备份和还原 BizTalk Server 数据库</span><span class="sxs-lookup"><span data-stu-id="647d0-122">Backing Up and Restoring BizTalk Server Databases</span></span>](../core/backing-up-and-restoring-biztalk-server-databases.md)<br/>[<span data-ttu-id="647d0-123">如何配置备份 BizTalk Server 作业</span><span class="sxs-lookup"><span data-stu-id="647d0-123">How to Configure the Backup BizTalk Server Job</span></span>](../core/how-to-configure-the-backup-biztalk-server-job.md)|<span data-ttu-id="647d0-124">此 SQL 代理作业会截断事务日志，从而可帮助提高性能。</span><span class="sxs-lookup"><span data-stu-id="647d0-124">This SQL Agent job also truncates the transaction logs, which helps improve performance.</span></span><br/><br/><span data-ttu-id="647d0-125">此作业不会移除或删除备份文件，包括较早的文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-125">This job does not remove or delete backup files, including older files.</span></span> <span data-ttu-id="647d0-126">若要删除备份文件，请参阅"备份 BizTalk Server"作业失败时的备份文件累积一段时间中的 Microsoft BizTalk Server 数据库服务器。</span><span class="sxs-lookup"><span data-stu-id="647d0-126">To delete backup files, refer to The "Backup BizTalk Server" job fails when backup files accumulate over time in the Microsoft BizTalk Server database server.</span></span>
    <span data-ttu-id="647d0-127">DTA 清除和存档</span><span class="sxs-lookup"><span data-stu-id="647d0-127">DTA Purge and Archive</span></span> |<span data-ttu-id="647d0-128">截断并存档 BizTalk Server 跟踪数据库 (BizTalkDTADb)。</span><span class="sxs-lookup"><span data-stu-id="647d0-128">Truncates and archives the BizTalk Server Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="647d0-129">在配置该作业，确定参数喜欢多长时间内将保存已完成的实例以及还有多少天，以保留所有数据。</span><span class="sxs-lookup"><span data-stu-id="647d0-129">When configuring the job, you determine parameters like how many days to keep completed instances and how many to days to keep all data.</span></span><br/><br/><span data-ttu-id="647d0-130">以下链接介绍了 SQL 代理作业和其参数：</span><span class="sxs-lookup"><span data-stu-id="647d0-130">The following links describe the SQL Agent job and its parameters:</span></span> <br/><br/>[<span data-ttu-id="647d0-131">存档和清除 BizTalk 跟踪数据库</span><span class="sxs-lookup"><span data-stu-id="647d0-131">Archiving and Purging the BizTalk Tracking Database</span></span>](../core/archiving-and-purging-the-biztalk-tracking-database.md)<br/>[<span data-ttu-id="647d0-132">如何配置 DTA 清除和存档作业</span><span class="sxs-lookup"><span data-stu-id="647d0-132">How to Configure the DTA Purge and Archive Job</span></span>](../core/how-to-configure-the-dta-purge-and-archive-job.md)|<span data-ttu-id="647d0-133">此 SQL 代理作业通过维护跟踪主机和清除跟踪事件会直接影响性能。</span><span class="sxs-lookup"><span data-stu-id="647d0-133">This SQL Agent job directly impacts performance by maintaining the Tracking host and purging tracking events.</span></span>

## <a name="maintain-your-backup-files"></a><span data-ttu-id="647d0-134">维护备份文件</span><span class="sxs-lookup"><span data-stu-id="647d0-134">Maintain your backup files</span></span>

<span data-ttu-id="647d0-135">BizTalk Server 不包括任何作业要删除备份文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-135">BizTalk Server does not include any job to delete backup files.</span></span> <span data-ttu-id="647d0-136">因此，如何维护备份文件是由您决定。</span><span class="sxs-lookup"><span data-stu-id="647d0-136">As a result, how you maintain your backup files is up to you.</span></span> <span data-ttu-id="647d0-137">许多用户创建 sp_DeleteBackupHistoryAndFiles 存储过程，然后直接在备份 BizTalk Server 作业中调用此存储的过程。</span><span class="sxs-lookup"><span data-stu-id="647d0-137">Many users create the sp_DeleteBackupHistoryAndFiles stored procedure, and then call this stored procedure directly in the Backup BizTalk Server job.</span></span> <span data-ttu-id="647d0-138">某些用户创建维护计划。</span><span class="sxs-lookup"><span data-stu-id="647d0-138">Some users create a maintenance plan.</span></span> <span data-ttu-id="647d0-139">由您的选择。</span><span class="sxs-lookup"><span data-stu-id="647d0-139">The choice is yours.</span></span> <span data-ttu-id="647d0-140">本主题列出了这两个选项。</span><span class="sxs-lookup"><span data-stu-id="647d0-140">This topic lists both options.</span></span>

#### <a name="option-1-create-the-spdeletebackuphistoryandfiles-stored-procedure"></a><span data-ttu-id="647d0-141">选项 1：创建 sp_DeleteBackupHistoryAndFiles 存储过程</span><span class="sxs-lookup"><span data-stu-id="647d0-141">Option 1: Create the sp_DeleteBackupHistoryAndFiles stored procedure</span></span>

1. <span data-ttu-id="647d0-142">在 SQL Server Management Studio 中，选择 BizTalk 管理数据库 (BizTalkMgmtDb)。</span><span class="sxs-lookup"><span data-stu-id="647d0-142">In SQL Server Management Studio, select the BizTalk Management database (BizTalkMgmtDb).</span></span> 
2. <span data-ttu-id="647d0-143">选择**新查询**，并运行以下 T-SQL 脚本创建 sp_DeleteBackupHistoryAndFiles 存储过程：</span><span class="sxs-lookup"><span data-stu-id="647d0-143">Select **New Query**, and run the following T-SQL script to create the sp_DeleteBackupHistoryAndFiles stored procedure:</span></span> 

    ```
    CREATE PROCEDURE [dbo].[sp_DeleteBackupHistoryAndFiles] @DaysToKeep smallint = null
    AS

    BEGIN
    set nocount on
    IF @DaysToKeep IS NULL OR @DaysToKeep <= 1
    RETURN
    /*
    Only delete full sets
    If a set spans a day in such a way that some items fall into the deleted group and the other does not, do not delete the set
    */

    DECLARE DeleteBackupFiles CURSOR
    FOR SELECT 'del "' + [BackupFileLocation] + '\' + [BackupFileName] + '"' FROM [adm_BackupHistory]
    WHERE  datediff( dd, [BackupDateTime], getdate() ) >= @DaysToKeep
    AND [BackupSetId] NOT IN ( SELECT [BackupSetId] FROM [dbo].[adm_BackupHistory] [h2] WHERE [h2].[BackupSetId] = [BackupSetId] AND datediff( dd, [h2].[BackupDateTime], getdate() ) < @DaysToKeep )

    DECLARE @cmd varchar(400)
    OPEN DeleteBackupFiles
    FETCH NEXT FROM DeleteBackupFiles INTO @cmd
    WHILE (@@fetch_status <> -1)
    BEGIN
        IF (@@fetch_status <> -2)
        BEGIN
            EXEC master.dbo.xp_cmdshell @cmd, NO_OUTPUT
            delete from [adm_BackupHistory] WHERE CURRENT OF DeleteBackupFiles
            print @cmd
        END
        FETCH NEXT FROM DeleteBackupFiles INTO @cmd
    END

    CLOSE DeleteBackupFiles
    DEALLOCATE DeleteBackupFiles
    END
    GO
    ```

3. <span data-ttu-id="647d0-144">打开备份 BizTalk Server 作业，并选择**步骤**。</span><span class="sxs-lookup"><span data-stu-id="647d0-144">Open the Backup BizTalk Server job, and select **Steps**.</span></span>
4. <span data-ttu-id="647d0-145">编辑**清除备份历史记录**步骤，以便调用新*sp_DeleteBackupHistoryAndFiles*存储过程而不是上一*sp_DeleteBackupHistory*存储的过程。</span><span class="sxs-lookup"><span data-stu-id="647d0-145">Edit the **Clear Backup History** step so that it calls the new *sp_DeleteBackupHistoryAndFiles* stored procedure instead of the previous *sp_DeleteBackupHistory* stored procedure.</span></span>
5. <span data-ttu-id="647d0-146">选择**确定**以保存所做的更改。</span><span class="sxs-lookup"><span data-stu-id="647d0-146">Select **OK** to save your changes.</span></span>

#### <a name="option-2-create-a-maintenance-plan"></a><span data-ttu-id="647d0-147">选项 2：创建维护计划</span><span class="sxs-lookup"><span data-stu-id="647d0-147">Option 2: Create a maintenance plan</span></span>

1. <span data-ttu-id="647d0-148">在 SQL Server Management Studio 中，展开**管理**，右键单击**维护计划**，然后选择**维护计划向导**。</span><span class="sxs-lookup"><span data-stu-id="647d0-148">In SQL Server Management Studio, expand **Management**, right-click **Maintenance Plans**, and select **Maintenance Plan Wizard**.</span></span>
2. <span data-ttu-id="647d0-149">命名计划 (例如，将其命名*清除备份文件*)，然后选择**更改**按钮旁边**计划**。</span><span class="sxs-lookup"><span data-stu-id="647d0-149">Name the plan (for example, name it *Purge Backup Files*), and then select the **Change** button next to **Schedule**.</span></span>
3. <span data-ttu-id="647d0-150">选择你想要清除备份文件的频率。</span><span class="sxs-lookup"><span data-stu-id="647d0-150">Choose how frequently you want to purge the backup files.</span></span> <span data-ttu-id="647d0-151">这些设置是完全取决于您。</span><span class="sxs-lookup"><span data-stu-id="647d0-151">These settings are completely up to you.</span></span> <span data-ttu-id="647d0-152">选择“确定”，然后选择“下一步”。</span><span class="sxs-lookup"><span data-stu-id="647d0-152">Select **OK**, and then select **Next**.</span></span>
4. <span data-ttu-id="647d0-153">选择**清除维护任务**，然后选择**下一步**。</span><span class="sxs-lookup"><span data-stu-id="647d0-153">Select **Maintenance Cleanup Task**, and select **Next**.</span></span>
5. <span data-ttu-id="647d0-154">在中**清除任务**窗口中，转到**搜索文件夹并删除文件...**，选择备份文件夹 (也许 f:\BizTalkBackUps)，然后输入 **.bak**文件扩展名。</span><span class="sxs-lookup"><span data-stu-id="647d0-154">In the **Cleanup Task** window, go to **Search folder and delete files...**, select your backup Folder (maybe f:\BizTalkBackUps), and enter **.bak** for the File extension.</span></span> <span data-ttu-id="647d0-155">您还可以选择根据保留时间删除文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-155">You can also choose to delete files based on their age.</span></span> <span data-ttu-id="647d0-156">如果你想要删除早于 3 周的文件，例如，输入 3。</span><span class="sxs-lookup"><span data-stu-id="647d0-156">For example, enter 3 if you want to delete files that are older than 3 weeks.</span></span> <span data-ttu-id="647d0-157">选择“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="647d0-157">Select **Next**.</span></span>
6. <span data-ttu-id="647d0-158">完成向导并输入所需的任何其他信息。</span><span class="sxs-lookup"><span data-stu-id="647d0-158">Finish going through the wizard and enter any additional information you want.</span></span> <span data-ttu-id="647d0-159">选择“完成”。</span><span class="sxs-lookup"><span data-stu-id="647d0-159">Select **Finish**.</span></span>


## <a name="install-edi-schemas-and-more-edi-as2-configuration"></a><span data-ttu-id="647d0-160">安装 EDI 架构和更多 EDI AS2 配置</span><span class="sxs-lookup"><span data-stu-id="647d0-160">Install EDI schemas and more EDI AS2 configuration</span></span>
 <span data-ttu-id="647d0-161">EANCOM、 EDIFACT、 HIPAA 和 X12 架构文件都包括在名为 MicrosoftEdiXSDTemplates.exe 的自解压缩可执行文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-161">The EANCOM, EDIFACT, HIPAA, and X12 schema files are included in a self-extracting executable file named  MicrosoftEdiXSDTemplates.exe.</span></span> <span data-ttu-id="647d0-162">若要创建 EDI 解决方案，请解压缩这些文件，并随项目部署。</span><span class="sxs-lookup"><span data-stu-id="647d0-162">To create EDI solutions, extract these files, and deploy with your projects.</span></span> <span data-ttu-id="647d0-163">若要安装并解压缩这些文件：</span><span class="sxs-lookup"><span data-stu-id="647d0-163">To install and extract these files:</span></span>  

1. <span data-ttu-id="647d0-164">运行[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]安装，然后安装**开发人员工具和 SDK**组件。</span><span class="sxs-lookup"><span data-stu-id="647d0-164">Run the [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] installation, and install the **Developer Tools and SDK** component.</span></span> <span data-ttu-id="647d0-165">此组件将 MicrosoftEdiXSDTemplates.exe EDI 架构文件下载到 \XSD_Schema\EDI 文件夹中。</span><span class="sxs-lookup"><span data-stu-id="647d0-165">This component  downloads the MicrosoftEdiXSDTemplates.exe EDI schema file to the \XSD_Schema\EDI folder.</span></span>  

   > [!NOTE]
   > <span data-ttu-id="647d0-166">如果升级[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]，在安装中的 MicrosoftEdiXSDTemplates.exe 文件将替换为与升级关联的新的 MicrosoftEdiXSDTemplates.exe 文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-166">If you upgrade [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)], the MicrosoftEdiXSDTemplates.exe file in your installation is replaced with the new MicrosoftEdiXSDTemplates.exe file associated with the upgrade.</span></span> <span data-ttu-id="647d0-167">如果你需要上一个架构，则备份上一个 MicrosoftEdiXSDTemplates.exe 文件。</span><span class="sxs-lookup"><span data-stu-id="647d0-167">If you need the previous the schemas, then back up the previous MicrosoftEdiXSDTemplates.exe file.</span></span>  
   > 
   > [!NOTE]
   > <span data-ttu-id="647d0-168">如果在升级时升级消息架构[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]到更高版本中，您可能会遇到的问题，使用更新后的架构，或者您可能必须执行其他升级步骤。</span><span class="sxs-lookup"><span data-stu-id="647d0-168">If you upgrade message schemas when you upgrade [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] to a later build, you may encounter issues using the updated schemas, or you may have to perform additional updating steps.</span></span> <span data-ttu-id="647d0-169">"更新架构的注意事项"一节中，请参阅[更新应用程序的重要注意事项](../core/important-considerations-for-updating-applications.md)</span><span class="sxs-lookup"><span data-stu-id="647d0-169">See the "Considerations for updating schemas" section in [Important Considerations for Updating Applications](../core/important-considerations-for-updating-applications.md)</span></span>

2. <span data-ttu-id="647d0-170">转到[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI，然后双击 MicrosoftEdiXSDTemplates.exe。</span><span class="sxs-lookup"><span data-stu-id="647d0-170">Go  to [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI, and double-click MicrosoftEdiXSDTemplates.exe.</span></span>  

3. <span data-ttu-id="647d0-171">架构解压缩到[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI。</span><span class="sxs-lookup"><span data-stu-id="647d0-171">Extract the schemas to [!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]\XSD_Schema\EDI.</span></span> <span data-ttu-id="647d0-172">在解压缩架构时，它们都存储在 EANCOM、 EDIFACT、 HIPAA 和 X12 文件夹。</span><span class="sxs-lookup"><span data-stu-id="647d0-172">When you extract the schemas, they are stored in EANCOM, EDIFACT, HIPAA, and X12 folders.</span></span>  

#### <a name="add-a-reference-to-the-biztalk-server-edi-application"></a><span data-ttu-id="647d0-173">添加对 BizTalk Server EDI 应用程序的引用</span><span class="sxs-lookup"><span data-stu-id="647d0-173">Add a reference to the BizTalk Server EDI application</span></span>  
 <span data-ttu-id="647d0-174">在部署的 EDI 架构、 管道和业务流程**BizTalk EDI 应用程序**。</span><span class="sxs-lookup"><span data-stu-id="647d0-174">EDI schemas, pipelines, and orchestrations are deployed in the **BizTalk EDI Application**.</span></span> <span data-ttu-id="647d0-175">若要将用作 EDI 应用程序的任何其他应用程序，添加到引用**BizTalk EDI 应用程序**。</span><span class="sxs-lookup"><span data-stu-id="647d0-175">To use any other application as an EDI application, add a reference to the **BizTalk EDI Application**.</span></span> <span data-ttu-id="647d0-176">步骤：</span><span class="sxs-lookup"><span data-stu-id="647d0-176">Steps:</span></span>  

1. <span data-ttu-id="647d0-177">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**应用程序**。</span><span class="sxs-lookup"><span data-stu-id="647d0-177">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand  **Applications**.</span></span> <span data-ttu-id="647d0-178">右键单击你想要为 EDI 使用的应用程序 (如*BizTalk Application 1*)，选择**添加**，然后选择**引用**。</span><span class="sxs-lookup"><span data-stu-id="647d0-178">Right-click the application that you want to use for EDI (such as *BizTalk Application 1*), select **Add**, and then select **References**.</span></span>  

2. <span data-ttu-id="647d0-179">选择**BizTalk EDI 应用程序**，然后选择**确定**以保存所做的更改。</span><span class="sxs-lookup"><span data-stu-id="647d0-179">Select **BizTalk EDI Application**, and select **OK** to save your changes.</span></span>  

> [!TIP]
>  <span data-ttu-id="647d0-180">若要查看对其他应用程序的引用，请右键单击任何应用程序，然后选择**属性**。</span><span class="sxs-lookup"><span data-stu-id="647d0-180">To see references to other applications, right-click any application, and select **Properties**.</span></span> <span data-ttu-id="647d0-181">选择**引用**。</span><span class="sxs-lookup"><span data-stu-id="647d0-181">Select **References**.</span></span> <span data-ttu-id="647d0-182">您还可以添加新的引用，并删除现有的引用。</span><span class="sxs-lookup"><span data-stu-id="647d0-182">You can also add new references, and remove existing references.</span></span>  

> [!NOTE]
>  <span data-ttu-id="647d0-183">不要对 BizTalk EDI 应用程序中添加自定义项目。</span><span class="sxs-lookup"><span data-stu-id="647d0-183">Do not add custom artifacts to the BizTalk EDI Application.</span></span> <span data-ttu-id="647d0-184">最好是将保留该应用程序作为-是。</span><span class="sxs-lookup"><span data-stu-id="647d0-184">It's best to leave this application as-is.</span></span>  

#### <a name="start-batch-orchestrations"></a><span data-ttu-id="647d0-185">启动批处理业务流程</span><span class="sxs-lookup"><span data-stu-id="647d0-185">Start batch orchestrations</span></span>  
 <span data-ttu-id="647d0-186">如果启用了用于接收和/或发送 EDI 批的参与方，然后启动批处理业务流程。</span><span class="sxs-lookup"><span data-stu-id="647d0-186">If you enable a party to receive and/or send EDI batches, then start the batching orchestrations.</span></span> <span data-ttu-id="647d0-187">这些业务流程不会启动安装向导或配置向导。</span><span class="sxs-lookup"><span data-stu-id="647d0-187">These orchestrations are not started by the installation wizard or the configuration wizard.</span></span> <span data-ttu-id="647d0-188">步骤：</span><span class="sxs-lookup"><span data-stu-id="647d0-188">Steps:</span></span>  

1. <span data-ttu-id="647d0-189">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**BizTalk EDI 应用程序**，然后选择**业务流程**。</span><span class="sxs-lookup"><span data-stu-id="647d0-189">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand **BizTalk EDI Application**, and select**Orchestrations**.</span></span>  

2. <span data-ttu-id="647d0-190">右键单击每个以下的业务流程，然后选择**启动**:</span><span class="sxs-lookup"><span data-stu-id="647d0-190">Right-click each of the following orchestrations, and select **Start**:</span></span>  

   -   <span data-ttu-id="647d0-191">Microsoft.BizTalk.Edi.BatchSuspendOrchestration.BatchElementSuspendService (程序集：Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="647d0-191">Microsoft.BizTalk.Edi.BatchSuspendOrchestration.BatchElementSuspendService (assembly: Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span></span>  

   -   <span data-ttu-id="647d0-192">Microsoft.BizTalk.Edi.BatchingOrchestration.BatchingService (程序集：Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="647d0-192">Microsoft.BizTalk.Edi.BatchingOrchestration.BatchingService (assembly: Microsoft.BizTalk.Edi.BatchingOrchestration.dll)</span></span>  

   -   <span data-ttu-id="647d0-193">Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService (程序集：Microsoft.BizTalk.Edi.RoutingOrchestration.dll)</span><span class="sxs-lookup"><span data-stu-id="647d0-193">Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService (assembly: Microsoft.BizTalk.Edi.RoutingOrchestration.dll)</span></span>  

> [!NOTE]
>  <span data-ttu-id="647d0-194">如果接收和/或发送 EDI 批，则只应启动 EDI 批处理业务流程。</span><span class="sxs-lookup"><span data-stu-id="647d0-194">The EDI batching orchestrations should only be started if you receive and/or send EDI batches.</span></span> <span data-ttu-id="647d0-195">在系统不接收或发送 EDI 批时启动它们可能会影响系统性能。</span><span class="sxs-lookup"><span data-stu-id="647d0-195">Starting them when the system is not receiving or sending EDI batches could affect system performance.</span></span>  

#### <a name="migrate-edi-artifacts-from-a-previous-biztalk-version"></a><span data-ttu-id="647d0-196">从早期版本的 BizTalk 迁移 EDI 项目</span><span class="sxs-lookup"><span data-stu-id="647d0-196">Migrate EDI artifacts from a previous BizTalk version</span></span>  
 <span data-ttu-id="647d0-197">在中管理贸易合作伙伴的方式[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已更新中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2010年及更新版本。</span><span class="sxs-lookup"><span data-stu-id="647d0-197">The way trading partners are managed in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] was updated in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer versions.</span></span> <span data-ttu-id="647d0-198">在前面[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]版本中，创建参与方是仅为贸易合作伙伴，而不是针对托管的合作伙伴[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="647d0-198">In the previous [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] versions, a party was created only for the trading partner, and not for the partner hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="647d0-199">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2010年及更高版本，必须为所有贸易合作伙伴，包括托管的合作伙伴创建参与方[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="647d0-199">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer, a party must be created for all the trading partners, including the partner hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="647d0-200">在以前[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]版本，编码 （X12 和 EDIFACT） 和传输 (AS2) 协议属性在参与方级别定义。</span><span class="sxs-lookup"><span data-stu-id="647d0-200">In previous [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] versions, the encoding (X12 and EDIFACT) and transport (AS2) protocol properties are defined at the party level.</span></span> <span data-ttu-id="647d0-201">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2010年及更新版本，这些属性通过协议定义。</span><span class="sxs-lookup"><span data-stu-id="647d0-201">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010 and newer versions, these properties are defined through agreements.</span></span>  

 <span data-ttu-id="647d0-202">若要从早期版本迁移参与方数据[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]包含参与方迁移工具。</span><span class="sxs-lookup"><span data-stu-id="647d0-202">To migrate party data from previous versions, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] includes a Party Migration Tool.</span></span> <span data-ttu-id="647d0-203">请考虑以下迁移路径：</span><span class="sxs-lookup"><span data-stu-id="647d0-203">Consider the following migration paths:</span></span>  


| [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="647d0-204">版本</span><span class="sxs-lookup"><span data-stu-id="647d0-204">Version</span></span>  |                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="647d0-205">迁移路径</span><span class="sxs-lookup"><span data-stu-id="647d0-205">Migration Path</span></span>                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      **[!INCLUDE[btsbiztalkserver2006r2](../includes/btsbiztalkserver2006r2-md.md)]**       | <span data-ttu-id="647d0-206">升级到 BizTalk Server 2009。</span><span class="sxs-lookup"><span data-stu-id="647d0-206">Upgrade to BizTalk Server 2009.</span></span> <span data-ttu-id="647d0-207">然后，使用附带的参与方迁移工具[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2 迁移到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="647d0-207">Then, use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span><br /><br /> <span data-ttu-id="647d0-208">**或者**，使用附带的参与方迁移工具[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2 迁移到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2010年。</span><span class="sxs-lookup"><span data-stu-id="647d0-208">**Or**, use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010.</span></span> <span data-ttu-id="647d0-209">然后，升级到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="647d0-209">Then, upgrade to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span> |
| <span data-ttu-id="647d0-210">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2009**</span><span class="sxs-lookup"><span data-stu-id="647d0-210">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2009**</span></span> |                                                                                                                                                                                                           <span data-ttu-id="647d0-211">使用附带的参与方迁移工具[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2 直接迁移到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="647d0-211">Use the Party Migration Tool included with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2 to migrate directly to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span>                                                                                                                                                                                                            |
| <span data-ttu-id="647d0-212">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010**</span><span class="sxs-lookup"><span data-stu-id="647d0-212">**[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2010**</span></span> |                                                                                                                                                                                                                                                                                       <span data-ttu-id="647d0-213">升级到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]2013/2013 R2。</span><span class="sxs-lookup"><span data-stu-id="647d0-213">Upgrade to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 2013/2013 R2.</span></span>                                                                                                                                                                                                                                                                                       |

 <span data-ttu-id="647d0-214">参与方迁移工具位于[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]介质的 \PartyMigrationTool 文件夹下。</span><span class="sxs-lookup"><span data-stu-id="647d0-214">The Party Migration Tool is available on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] media under the \PartyMigrationTool folder.</span></span>  


## <a name="install-biztalk-health-monitor-bhm"></a><span data-ttu-id="647d0-215">安装 BizTalk 运行状况监视器 (BHM)</span><span class="sxs-lookup"><span data-stu-id="647d0-215">Install BizTalk Health Monitor (BHM)</span></span>

<span data-ttu-id="647d0-216">BizTalk 运行状况监视器提供了一个仪表板来创建和查看 MessageBox 查看器的报表、 创建自定义查询、 运行终止符任务、 监视多个 BizTalk 环境，和的详细信息。</span><span class="sxs-lookup"><span data-stu-id="647d0-216">BizTalk Health Monitor provides a dashboard to create and view MessageBox Viewer reports, create custom queries, run Terminator tasks, monitor multiple BizTalk environments, and more.</span></span> <span data-ttu-id="647d0-217">如果你负责 BizTalk 环境，我们建议安装和使用此工具检查 BizTalk 环境的运行状况并对其进行维护。</span><span class="sxs-lookup"><span data-stu-id="647d0-217">If you are responsible for a BizTalk envrionment, we suggest you install and use this tool to check the health of your BizTalk environment, and also maintain it.</span></span>

<span data-ttu-id="647d0-218">关键链接：</span><span class="sxs-lookup"><span data-stu-id="647d0-218">Key links:</span></span>

[<span data-ttu-id="647d0-219">下载 BHM</span><span class="sxs-lookup"><span data-stu-id="647d0-219">Download BHM</span></span>](https://www.microsoft.com/download/details.aspx?id=43716)  
[<span data-ttu-id="647d0-220">安装 BHM</span><span class="sxs-lookup"><span data-stu-id="647d0-220">Install BHM</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/26466.biztalk-server-how-to-install-the-new-biztalk-health-monitor-snap-in.aspx)  
[<span data-ttu-id="647d0-221">BHM 官方博客</span><span class="sxs-lookup"><span data-stu-id="647d0-221">BHM Official Blog</span></span>](https://blogs.msdn.microsoft.com/biztalkhealthmonitor/)

## <a name="create-your-hosts-and-host-instances"></a><span data-ttu-id="647d0-222">创建主机和主机实例</span><span class="sxs-lookup"><span data-stu-id="647d0-222">Create your hosts and host instances</span></span>
<span data-ttu-id="647d0-223">建议将某些关键任务分到单独的主机。</span><span class="sxs-lookup"><span data-stu-id="647d0-223">It is recommended to separate some key tasks into separate hosts.</span></span> <span data-ttu-id="647d0-224">例如，始终创建单独的主机专用于仅跟踪。</span><span class="sxs-lookup"><span data-stu-id="647d0-224">For example, always create a separate host that is dedicated to only tracking.</span></span> <span data-ttu-id="647d0-225">创建另一个主机/主机实例，它侧重于接收消息、 用于发送消息，另一个主机/主机实例和业务流程的另一个主机/主机实例。</span><span class="sxs-lookup"><span data-stu-id="647d0-225">Create another host/host instance that focuses on receiving messages, another host/host instance for sending messages, and another host/host instance for orchestration.</span></span> 

<span data-ttu-id="647d0-226">提供了此区域中的许多建议。</span><span class="sxs-lookup"><span data-stu-id="647d0-226">There are many recommendations in this area.</span></span> <span data-ttu-id="647d0-227">下面是一些可帮助你开始：</span><span class="sxs-lookup"><span data-stu-id="647d0-227">Here are a few to get you started:</span></span> 

[<span data-ttu-id="647d0-228">管理 BizTalk 主机和主机实例</span><span class="sxs-lookup"><span data-stu-id="647d0-228">Managing BizTalk Hosts and Host Instances</span></span>](../core/managing-biztalk-hosts-and-host-instances.md)  
[<span data-ttu-id="647d0-229">为 BizTalk 主机提供高可用性</span><span class="sxs-lookup"><span data-stu-id="647d0-229">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)  
[<span data-ttu-id="647d0-230">最佳做法：创建和配置 BizTalk Server 主机和主机</span><span class="sxs-lookup"><span data-stu-id="647d0-230">Best Practices: Create and Configure BizTalk Server Host and Host</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/19701.biztalk-server-best-practices-create-and-configure-biztalk-server-host-and-host-instances.aspx)  
[<span data-ttu-id="647d0-231">在同一计算机上运行多个主机中的业务流程</span><span class="sxs-lookup"><span data-stu-id="647d0-231">Running Orchestrations in Multiple Hosts on the Same Computer</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/31183.biztalk-server-running-orchestrations-in-multiple-hosts-on-the-same-computer.aspx)  
[<span data-ttu-id="647d0-232">PowerShell 创建和配置 BizTalk Server 主机、 主机实例和处理程序</span><span class="sxs-lookup"><span data-stu-id="647d0-232">PowerShell to Create and Configure BizTalk Server Host, Host Instances and Handlers</span></span>](https://gallery.technet.microsoft.com/PowerShell-to-Configure-43d77916)  
[<span data-ttu-id="647d0-233">TechNet Wiki 上的 BizTalk Server 资源</span><span class="sxs-lookup"><span data-stu-id="647d0-233">BizTalk Server Resources on the TechNet Wiki</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/2240.biztalk-server-resources-on-the-technet-wiki.aspx)
