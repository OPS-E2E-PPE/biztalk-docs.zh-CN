---
title: 合并 BizTalk Server 数据库 2 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d7fc4fe6-3fc2-4164-9f16-90b6f473ba8c
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f5f633383b4e57133fc3b39bec804e376e1c6542
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65266168"
---
# <a name="consolidate-the-biztalk-server-databases2"></a><span data-ttu-id="ce711-102">合并 BizTalk Server 数据库 2</span><span class="sxs-lookup"><span data-stu-id="ce711-102">Consolidate the BizTalk Server Databases2</span></span>
<span data-ttu-id="ce711-103">Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]安装可能需要在 Microsoft 中最多 13 个单独的数据库创建[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]用作数据存储为各种[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]功能。</span><span class="sxs-lookup"><span data-stu-id="ce711-103">A Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] installation may require the creation of up to 13 separate databases in Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] for use as data stores for various [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] features.</span></span> <span data-ttu-id="ce711-104">由于管理和维护这些数据库所需的开销[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可容纳多个这些数据库的合并到单个数据库。</span><span class="sxs-lookup"><span data-stu-id="ce711-104">Due to the overhead required to manage and maintain these databases, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] accommodates the consolidation of several of these databases into a single database.</span></span> <span data-ttu-id="ce711-105">本部分介绍如何完成[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库合并，并讨论了实现的注意事项[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库合并。</span><span class="sxs-lookup"><span data-stu-id="ce711-105">This section describes how to accomplish [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation and discusses considerations for implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation.</span></span>  

> [!NOTE]
>  <span data-ttu-id="ce711-106">有关所有安装时所需的数据库的完整列表[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，请参阅[BizTalk Server 中的数据库](../core/databases-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="ce711-106">For a complete list of all of the databases that are required when installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], see [Databases in BizTalk Server](../core/databases-in-biztalk-server.md).</span></span>  

## <a name="implementing-biztalk-database-consolidation"></a><span data-ttu-id="ce711-107">实现 BizTalk 数据库合并</span><span class="sxs-lookup"><span data-stu-id="ce711-107">Implementing BizTalk Database Consolidation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="ce711-108">安装后执行数据库整合[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]配置。</span><span class="sxs-lookup"><span data-stu-id="ce711-108">database consolidation is performed after installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], during [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] configuration.</span></span> <span data-ttu-id="ce711-109">请按照下列步骤来实现[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库合并：</span><span class="sxs-lookup"><span data-stu-id="ce711-109">Follow these steps to implement [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation:</span></span>  

1. <span data-ttu-id="ce711-110">单击**启动**，依次指向**程序**，指向[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，然后单击**BizTalk Server 配置**。</span><span class="sxs-lookup"><span data-stu-id="ce711-110">Click **Start**, point to **Programs**, point to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and then click **BizTalk Server Configuration**.</span></span> <span data-ttu-id="ce711-111">如果系统提示选择配置类型，请单击**自定义配置**。</span><span class="sxs-lookup"><span data-stu-id="ce711-111">If prompted to select a configuration type, click **Custom configuration**.</span></span>  

2. <span data-ttu-id="ce711-112">输入相同[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**服务器名称**并**数据库名称**(例如*BizTalkConsolidatedDb*) 对于一个或多个以下数据存储：</span><span class="sxs-lookup"><span data-stu-id="ce711-112">Enter the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name** (for example *BizTalkConsolidatedDb*) for one of more of the following data stores:</span></span>  

   |<span data-ttu-id="ce711-113">功能名称</span><span class="sxs-lookup"><span data-stu-id="ce711-113">Feature Name</span></span>|<span data-ttu-id="ce711-114">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="ce711-114">Data Store Name</span></span>|  
   |------------------|---------------------|  
   |<span data-ttu-id="ce711-115">企业 SSO</span><span class="sxs-lookup"><span data-stu-id="ce711-115">Enterprise SSO</span></span>|<span data-ttu-id="ce711-116">SSO 数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-116">SSO Database</span></span>|  
   |<span data-ttu-id="ce711-117">Group</span><span class="sxs-lookup"><span data-stu-id="ce711-117">Group</span></span>|<span data-ttu-id="ce711-118">BizTalk 管理数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-118">BizTalk Management Database</span></span>|  
   |<span data-ttu-id="ce711-119">Group</span><span class="sxs-lookup"><span data-stu-id="ce711-119">Group</span></span>|<span data-ttu-id="ce711-120">BizTalk MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-120">BizTalk MessageBox Database</span></span>|  
   |<span data-ttu-id="ce711-121">Group</span><span class="sxs-lookup"><span data-stu-id="ce711-121">Group</span></span>|<span data-ttu-id="ce711-122">BizTalk 跟踪数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-122">BizTalk Tracking Database</span></span>|  
   |<span data-ttu-id="ce711-123">业务规则引擎</span><span class="sxs-lookup"><span data-stu-id="ce711-123">Business Rules Engine</span></span>|<span data-ttu-id="ce711-124">规则引擎数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-124">Rule Engine Database</span></span>|  

    <span data-ttu-id="ce711-125">请注意以下数据存储应**不**配置为共享[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]数据库：</span><span class="sxs-lookup"><span data-stu-id="ce711-125">Note that the following data stores should **not** be configured to share a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database:</span></span>  


   | <span data-ttu-id="ce711-126">功能名称</span><span class="sxs-lookup"><span data-stu-id="ce711-126">Feature Name</span></span> |       <span data-ttu-id="ce711-127">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="ce711-127">Data Store Name</span></span>       |
   |--------------|-----------------------------|
   |  <span data-ttu-id="ce711-128">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="ce711-128">BAM Tools</span></span>   | <span data-ttu-id="ce711-129">BAM 主导入数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-129">BAM Primary Import Database</span></span> |
   |  <span data-ttu-id="ce711-130">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="ce711-130">BAM Tools</span></span>   |    <span data-ttu-id="ce711-131">BAM 存档数据库</span><span class="sxs-lookup"><span data-stu-id="ce711-131">BAM Archive Database</span></span>     |


3. <span data-ttu-id="ce711-132">设置剩余的配置选项，并将应用配置。</span><span class="sxs-lookup"><span data-stu-id="ce711-132">Set the remaining configuration options and apply the configuration.</span></span> <span data-ttu-id="ce711-133">配置工具将在共享中创建表[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]为其指定了相同的数据存储的数据库[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**服务器名称**并**数据库名称**。</span><span class="sxs-lookup"><span data-stu-id="ce711-133">The configuration tool will create tables in the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database for the data stores for which you specified the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name**.</span></span>  

## <a name="considerations-for-implementing-biztalk-database-consolidation"></a><span data-ttu-id="ce711-134">实现 BizTalk 数据库合并的注意事项</span><span class="sxs-lookup"><span data-stu-id="ce711-134">Considerations for Implementing BizTalk Database Consolidation</span></span>  
 <span data-ttu-id="ce711-135">合并 BizTalk 数据库时, 考虑以下方面：</span><span class="sxs-lookup"><span data-stu-id="ce711-135">When consolidating a BizTalk Database, consider the following:</span></span>  

1. <span data-ttu-id="ce711-136">数据库合并可降低与管理和维护关联的开销[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库，但只应在适当的环境中实现。</span><span class="sxs-lookup"><span data-stu-id="ce711-136">Database consolidation reduces the overhead associated with managing and maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases but should only be implemented in the appropriate environment.</span></span> <span data-ttu-id="ce711-137">实现之前[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]上的数据库在生产环境中，影响合并[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应在过渡环境中测量的持续的性能。</span><span class="sxs-lookup"><span data-stu-id="ce711-137">Before implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation in a production environment, the effect on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sustained performance should be measured in a staging environment.</span></span> <span data-ttu-id="ce711-138">请考虑实施[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库合并，以简化数据库管理和维护以下方案中：</span><span class="sxs-lookup"><span data-stu-id="ce711-138">Consider implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation to simplify database administration and maintenance in the following scenarios:</span></span>  

   - <span data-ttu-id="ce711-139">小型、 低容量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库性能不会成为性能瓶颈的可能性非常小的生产环境。</span><span class="sxs-lookup"><span data-stu-id="ce711-139">Small scale, low volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments where database performance is very unlikely to become a performance bottleneck.</span></span>  

   - <span data-ttu-id="ce711-140">中型、 中等容量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]如果合并不包含 BizTalk 跟踪数据库的生产环境，理想情况下，如果从合并数据库的单独物理磁盘上创建 BizTalk 跟踪数据库。</span><span class="sxs-lookup"><span data-stu-id="ce711-140">Medium scale, medium volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the BizTalk tracking database is not included in the consolidation and, ideally, if the BizTalk tracking database is created on a separate physical disk from the consolidated database.</span></span>  

   - <span data-ttu-id="ce711-141">大型、 高容量[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]生产环境如果共享[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]数据库以物理方式位于其中的数据库成为性能瓶颈的可能性是非常高性能存储区域网络 (SAN) 设备非常低。</span><span class="sxs-lookup"><span data-stu-id="ce711-141">Large scale, high volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database is physically located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span>  

   - <span data-ttu-id="ce711-142">概念证明或开发环境，其中数据库性能是次要问题。</span><span class="sxs-lookup"><span data-stu-id="ce711-142">Proof of concept or development environments where database performance is of secondary concern.</span></span>  

2. <span data-ttu-id="ce711-143">总体[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能所依赖的性能通常[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库。</span><span class="sxs-lookup"><span data-stu-id="ce711-143">Overall [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance is usually dependent upon the performance of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="ce711-144">因此数据库整合不都应在任何实现[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]生产环境采用或将要采用高容量。</span><span class="sxs-lookup"><span data-stu-id="ce711-144">Therefore database consolidation should not be implemented in any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environment that is experiencing or will be experiencing high volume.</span></span> <span data-ttu-id="ce711-145">一个例外情况是如果[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库位于其中的数据库成为性能瓶颈的可能性是非常低的性能非常高存储区域网络 (SAN) 设备上。</span><span class="sxs-lookup"><span data-stu-id="ce711-145">One exception to this is if the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases are located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span> <span data-ttu-id="ce711-146">如果数据库磁盘不位于高性能 SAN，分布式的数据库提供优异的性能与合并数据库，尤其是在负载下。</span><span class="sxs-lookup"><span data-stu-id="ce711-146">If the database disks are not housed on a high performance SAN, distributed databases provide superior performance to consolidated databases, especially under load.</span></span>  

3. <span data-ttu-id="ce711-147">如果[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理数据库包含在数据库合并和合并数据库不是**BizTalkMgmtDb**，那么必须将 BizTalk 管理控制台配置为指向合并数据库。</span><span class="sxs-lookup"><span data-stu-id="ce711-147">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database is included in the database consolidation and the consolidation database is not named **BizTalkMgmtDb**, then the BizTalk Administration console must be configured to point to the consolidation database.</span></span> <span data-ttu-id="ce711-148">按照中的步骤[如何连接到现有组](../core/how-to-connect-to-an-existing-group.md)并配置[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台来指向合并数据库，以便管理[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="ce711-148">Follow the steps in [How to Connect to an Existing Group](../core/how-to-connect-to-an-existing-group.md) and configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to point to the consolidation database in order to manage the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  

4. <span data-ttu-id="ce711-149">详细了解可承受[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]性能，请参阅[规划可持续性能](../core/planning-for-sustained-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="ce711-149">For more information about sustainable [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance, please refer to [Planning for Sustained Performance](../core/planning-for-sustained-performance.md).</span></span>  

   <span data-ttu-id="ce711-150">有关与维护相关的活动详细信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库，请参阅[维护 BizTalk Server1](../core/maintaining-biztalk-server1.md)。</span><span class="sxs-lookup"><span data-stu-id="ce711-150">For more information about activities related to maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, please refer to [Maintaining BizTalk Server1](../core/maintaining-biztalk-server1.md).</span></span>