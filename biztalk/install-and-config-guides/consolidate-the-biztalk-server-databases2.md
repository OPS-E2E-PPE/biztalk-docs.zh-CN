---
title: "合并 BizTalk Server Databases2 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d7fc4fe6-3fc2-4164-9f16-90b6f473ba8c
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 56a8f594298569caaa4842a5f754ba991e9e5f51
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="consolidate-the-biztalk-server-databases2"></a><span data-ttu-id="1f451-102">合并 BizTalk Server 数据库2</span><span class="sxs-lookup"><span data-stu-id="1f451-102">Consolidate the BizTalk Server Databases2</span></span>
<span data-ttu-id="1f451-103">安装 Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可能需要在 Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 中创建多达 13 个单独的数据库，以用作各种 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 功能的数据库。</span><span class="sxs-lookup"><span data-stu-id="1f451-103">A Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] installation may require the creation of up to 13 separate databases in Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] for use as data stores for various [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] features.</span></span> <span data-ttu-id="1f451-104">由于管理和维护这些数据库需要过多开销，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 允许将多个这样的数据库合并为一个数据库。</span><span class="sxs-lookup"><span data-stu-id="1f451-104">Due to the overhead required to manage and maintain these databases, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] accommodates the consolidation of several of these databases into a single database.</span></span> <span data-ttu-id="1f451-105">本部分介绍如何实现 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库合并，并讨论实现 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库合并的注意事项。</span><span class="sxs-lookup"><span data-stu-id="1f451-105">This section describes how to accomplish [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation and discusses considerations for implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f451-106">若要获取安装 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 时需要的所有数据库的完整列表，请参阅 [BizTalk Server 中的数据库](../core/databases-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="1f451-106">For a complete list of all of the databases that are required when installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], see [Databases in BizTalk Server](../core/databases-in-biztalk-server.md).</span></span>  
  
## <a name="implementing-biztalk-database-consolidation"></a><span data-ttu-id="1f451-107">实现 BizTalk 数据库合并</span><span class="sxs-lookup"><span data-stu-id="1f451-107">Implementing BizTalk Database Consolidation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="1f451-108"> 数据库合并是在安装 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 后、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 配置期间执行的。</span><span class="sxs-lookup"><span data-stu-id="1f451-108"> database consolidation is performed after installing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], during [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] configuration.</span></span> <span data-ttu-id="1f451-109">请遵循下列步骤实现 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库合并：</span><span class="sxs-lookup"><span data-stu-id="1f451-109">Follow these steps to implement [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation:</span></span>  
  
1.  <span data-ttu-id="1f451-110">单击“开始”，依次指向“程序”和“[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]”，然后单击“BizTalk Server 配置”。</span><span class="sxs-lookup"><span data-stu-id="1f451-110">Click **Start**, point to **Programs**, point to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], and then click **BizTalk Server Configuration**.</span></span> <span data-ttu-id="1f451-111">如果系统提示选择配置类型，请单击“自定义配置”。</span><span class="sxs-lookup"><span data-stu-id="1f451-111">If prompted to select a configuration type, click **Custom configuration**.</span></span>  
  
2.  <span data-ttu-id="1f451-112">为下列一个或多个数据存储输入相同的[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**服务器名称**和**数据库名称**（例如 *BizTalkConsolidatedDb*）：</span><span class="sxs-lookup"><span data-stu-id="1f451-112">Enter the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name** (for example *BizTalkConsolidatedDb*) for one of more of the following data stores:</span></span>  
  
    |<span data-ttu-id="1f451-113">功能名称</span><span class="sxs-lookup"><span data-stu-id="1f451-113">Feature Name</span></span>|<span data-ttu-id="1f451-114">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="1f451-114">Data Store Name</span></span>|  
    |------------------|---------------------|  
    |<span data-ttu-id="1f451-115">企业 SSO</span><span class="sxs-lookup"><span data-stu-id="1f451-115">Enterprise SSO</span></span>|<span data-ttu-id="1f451-116">SSO 数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-116">SSO Database</span></span>|  
    |<span data-ttu-id="1f451-117">组</span><span class="sxs-lookup"><span data-stu-id="1f451-117">Group</span></span>|<span data-ttu-id="1f451-118">BizTalk 管理数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-118">BizTalk Management Database</span></span>|  
    |<span data-ttu-id="1f451-119">组</span><span class="sxs-lookup"><span data-stu-id="1f451-119">Group</span></span>|<span data-ttu-id="1f451-120">BizTalk MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-120">BizTalk MessageBox Database</span></span>|  
    |<span data-ttu-id="1f451-121">组</span><span class="sxs-lookup"><span data-stu-id="1f451-121">Group</span></span>|<span data-ttu-id="1f451-122">BizTalk 跟踪数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-122">BizTalk Tracking Database</span></span>|  
    |<span data-ttu-id="1f451-123">业务规则引擎</span><span class="sxs-lookup"><span data-stu-id="1f451-123">Business Rules Engine</span></span>|<span data-ttu-id="1f451-124">规则引擎数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-124">Rule Engine Database</span></span>|  
  
     <span data-ttu-id="1f451-125">请注意，**不**应将下列数据存储配置为共享 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 数据库：</span><span class="sxs-lookup"><span data-stu-id="1f451-125">Note that the following data stores should **not** be configured to share a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database:</span></span>  
  
    |<span data-ttu-id="1f451-126">功能名称</span><span class="sxs-lookup"><span data-stu-id="1f451-126">Feature Name</span></span>|<span data-ttu-id="1f451-127">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="1f451-127">Data Store Name</span></span>|  
    |------------------|---------------------|  
    |<span data-ttu-id="1f451-128">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="1f451-128">BAM Tools</span></span>|<span data-ttu-id="1f451-129">BAM 主导入数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-129">BAM Primary Import Database</span></span>|  
    |<span data-ttu-id="1f451-130">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="1f451-130">BAM Tools</span></span>|<span data-ttu-id="1f451-131">BAM 存档数据库</span><span class="sxs-lookup"><span data-stu-id="1f451-131">BAM Archive Database</span></span>|  
  
3.  <span data-ttu-id="1f451-132">设置剩余的配置选项，并应用配置。</span><span class="sxs-lookup"><span data-stu-id="1f451-132">Set the remaining configuration options and apply the configuration.</span></span> <span data-ttu-id="1f451-133">对于为其指定了相同[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**服务器名称**和**数据库名称**的数据存储，配置工具将在共享 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 数据库中为这样的数据存储创建表。</span><span class="sxs-lookup"><span data-stu-id="1f451-133">The configuration tool will create tables in the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database for the data stores for which you specified the same [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]**Server Name** and **Database Name**.</span></span>  
  
## <a name="considerations-for-implementing-biztalk-database-consolidation"></a><span data-ttu-id="1f451-134">实现 BizTalk 数据库合并的注意事项</span><span class="sxs-lookup"><span data-stu-id="1f451-134">Considerations for Implementing BizTalk Database Consolidation</span></span>  
 <span data-ttu-id="1f451-135">合并 BizTalk 数据库时，应考虑下列几点：</span><span class="sxs-lookup"><span data-stu-id="1f451-135">When consolidating a BizTalk Database, consider the following:</span></span>  
  
1.  <span data-ttu-id="1f451-136">数据库合并可降低与管理和维护 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库关联的开销，但只应在相应环境中实现。</span><span class="sxs-lookup"><span data-stu-id="1f451-136">Database consolidation reduces the overhead associated with managing and maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases but should only be implemented in the appropriate environment.</span></span> <span data-ttu-id="1f451-137">在生产环境中实现 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库合并之前，应在过渡环境中测量合并对 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可持续性能的影响。</span><span class="sxs-lookup"><span data-stu-id="1f451-137">Before implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation in a production environment, the effect on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sustained performance should be measured in a staging environment.</span></span> <span data-ttu-id="1f451-138">请在下列各方案中考虑实现 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库合并，以简化数据库管理和维护：</span><span class="sxs-lookup"><span data-stu-id="1f451-138">Consider implementing [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database consolidation to simplify database administration and maintenance in the following scenarios:</span></span>  
  
    -   <span data-ttu-id="1f451-139">小型、低容量的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 生产环境，其中数据库性能不太可能成为性能瓶颈。</span><span class="sxs-lookup"><span data-stu-id="1f451-139">Small scale, low volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments where database performance is very unlikely to become a performance bottleneck.</span></span>  
  
    -   <span data-ttu-id="1f451-140">中型、中等容量的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 生产环境，条件是：BizTalk 跟踪数据库不包含在合并中，并且该数据库最好在不同于合并数据库的单独物理磁盘上创建。</span><span class="sxs-lookup"><span data-stu-id="1f451-140">Medium scale, medium volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the BizTalk tracking database is not included in the consolidation and, ideally, if the BizTalk tracking database is created on a separate physical disk from the consolidated database.</span></span>  
  
    -   <span data-ttu-id="1f451-141">大型、高容量的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 生产环境，条件是：共享 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 数据库物理位于性能非常高的存储区域网络 (SAN) 设备上，该设备上的数据库成为性能瓶颈的可能性非常低。</span><span class="sxs-lookup"><span data-stu-id="1f451-141">Large scale, high volume [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environments if the shared [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database is physically located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span>  
  
    -   <span data-ttu-id="1f451-142">概念验证或开发环境，其中数据库性能是次要问题。</span><span class="sxs-lookup"><span data-stu-id="1f451-142">Proof of concept or development environments where database performance is of secondary concern.</span></span>  
  
2.  <span data-ttu-id="1f451-143">整个 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的性能通常依赖于 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库的性能。</span><span class="sxs-lookup"><span data-stu-id="1f451-143">Overall [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance is usually dependent upon the performance of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="1f451-144">因此，不能在采用或将要采用高容量的任何 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 生产环境中实现数据库合并。</span><span class="sxs-lookup"><span data-stu-id="1f451-144">Therefore database consolidation should not be implemented in any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] production environment that is experiencing or will be experiencing high volume.</span></span> <span data-ttu-id="1f451-145">但此规则也有一个例外，即如果 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库位于性能非常高的存储区域网络 (SAN) 设备上，该设备上的数据库成为性能瓶颈的可能性非常低。</span><span class="sxs-lookup"><span data-stu-id="1f451-145">One exception to this is if the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases are located on a very high performance storage area network (SAN) device where the likelihood of the database becoming a performance bottleneck is very low.</span></span> <span data-ttu-id="1f451-146">如果数据库磁盘不位于高性能 SAN 中，则分布式数据库与合并数据库相比，能提供更高的性能，特别是在负载条件下更是如此。</span><span class="sxs-lookup"><span data-stu-id="1f451-146">If the database disks are not housed on a high performance SAN, distributed databases provide superior performance to consolidated databases, especially under load.</span></span>  
  
3.  <span data-ttu-id="1f451-147">如果数据库合并包含 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理数据库，并且合并数据库的名称不是 **BizTalkMgmtDb**，那么必须将 BizTalk 管理控制台配置为指向合并数据库。</span><span class="sxs-lookup"><span data-stu-id="1f451-147">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database is included in the database consolidation and the consolidation database is not named **BizTalkMgmtDb**, then the BizTalk Administration console must be configured to point to the consolidation database.</span></span> <span data-ttu-id="1f451-148">请遵循[如何连接到现有组](../core/how-to-connect-to-an-existing-group.md)中的步骤，并将 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台配置为指向合并数据库，以便管理 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 组。</span><span class="sxs-lookup"><span data-stu-id="1f451-148">Follow the steps in [How to Connect to an Existing Group](../core/how-to-connect-to-an-existing-group.md) and configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to point to the consolidation database in order to manage the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
4.  <span data-ttu-id="1f451-149">有关 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可持续性能的详细信息，请参考[规划可持续性能](../core/planning-for-sustained-performance.md)。</span><span class="sxs-lookup"><span data-stu-id="1f451-149">For more information about sustainable [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance, please refer to [Planning for Sustained Performance](../core/planning-for-sustained-performance.md).</span></span>  
  
 <span data-ttu-id="1f451-150">有关与维护 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库相关的活动的详细信息，请参考[维护 BizTalk Server1](../core/maintaining-biztalk-server1.md)。</span><span class="sxs-lookup"><span data-stu-id="1f451-150">For more information about activities related to maintaining the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, please refer to [Maintaining BizTalk Server1](../core/maintaining-biztalk-server1.md).</span></span>