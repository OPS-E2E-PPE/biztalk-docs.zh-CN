---
title: 在多计算机环境中安装 BizTalk Server |Microsoft Docs
description: 当 BizTalk 和 SQL Server 安装在不同的计算机，其中包括 BAM 上多服务器安装和设置指南
ms.custom: ''
ms.date: 09/27/2018
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e4d0e707-6b9e-49e1-9f17-19b3bac1229e
caps.latest.revision: 27
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5243cb9dd53fdeec4d3dac46f54f2851befa1b15
ms.sourcegitcommit: 53b16fe6c1b1707ecf233dbd05f780653eb19419
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/01/2018
ms.locfileid: "50753237"
---
# <a name="install-biztalk-server-in-a-multi-computer-environment"></a><span data-ttu-id="366bf-103">在多计算机环境中安装 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="366bf-103">Install BizTalk Server in a Multi-Computer Environment</span></span>

## <a name="overview"></a><span data-ttu-id="366bf-104">概述</span><span class="sxs-lookup"><span data-stu-id="366bf-104">Overview</span></span>

<span data-ttu-id="366bf-105">有许多事情需要考虑在计划的 Microsoft® BizTalk® Server 多计算机安装。</span><span class="sxs-lookup"><span data-stu-id="366bf-105">There are many things to consider when planning a multicomputer installation of Microsoft® BizTalk® Server.</span></span> <span data-ttu-id="366bf-106">通常的网络基础结构存在和 BizTalk Server 必须与其他网络应用程序共存。</span><span class="sxs-lookup"><span data-stu-id="366bf-106">Often the network infrastructure exists and BizTalk Server must coexist with other network applications.</span></span> <span data-ttu-id="366bf-107">本指南介绍了一些适用于 BizTalk Server 和多计算机的分布式部署中的业务活动监视 (BAM) 安装的注意事项。</span><span class="sxs-lookup"><span data-stu-id="366bf-107">This guide describes some of the considerations that apply to the BizTalk Server and Business Activity Monitoring (BAM) installation in a multicomputer, distributed deployment.</span></span> <span data-ttu-id="366bf-108">此信息可帮助您计划安装和配置 BizTalk Server 和业务活动监视 (BAM) 和应用程序和组件依赖于。</span><span class="sxs-lookup"><span data-stu-id="366bf-108">This information helps you plan the installation and configuration of BizTalk Server and Business Activity Monitoring (BAM) and the applications and components it depends on.</span></span>

<span data-ttu-id="366bf-109">单服务器安装指南包含一些重要过程和在本文档中不重复的更多背景信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-109">The single server installation guide contains important procedures and more background information that is not duplicated in this document.</span></span> <span data-ttu-id="366bf-110">例如，在单服务器安装指南中详细讨论了以下信息：</span><span class="sxs-lookup"><span data-stu-id="366bf-110">For example, the following information is discussed in detail in the single server installation guide:</span></span>

- <span data-ttu-id="366bf-111">详细的安装过程</span><span class="sxs-lookup"><span data-stu-id="366bf-111">Detailed installation procedures</span></span>
- <span data-ttu-id="366bf-112">BizTalk Server 功能和依存关系的说明</span><span class="sxs-lookup"><span data-stu-id="366bf-112">Descriptions of BizTalk Server features and dependencies</span></span>
- <span data-ttu-id="366bf-113">BizTalk Server 基本配置设置的详细信息</span><span class="sxs-lookup"><span data-stu-id="366bf-113">Details of BizTalk Server basic configuration settings</span></span>
- <span data-ttu-id="366bf-114">软件和硬件要求</span><span class="sxs-lookup"><span data-stu-id="366bf-114">Software and hardware requirements</span></span>
- <span data-ttu-id="366bf-115">CAB 文件可再发行组件列表</span><span class="sxs-lookup"><span data-stu-id="366bf-115">CAB file redistributable component list</span></span>

## <a name="high-availability"></a><span data-ttu-id="366bf-116">高可用性</span><span class="sxs-lookup"><span data-stu-id="366bf-116">High availability</span></span>
<span data-ttu-id="366bf-117">BizTalk Server 提供了使用网络负载平衡 (NLB) 群集和故障转移群集和 SQL Server Always On 使用可用性组 (AG) 的高可用性解决方案。</span><span class="sxs-lookup"><span data-stu-id="366bf-117">BizTalk Server provides a high availability solution that uses network load balancing (NLB) clustering and failover clustering, and SQL Server Always On using Availability Groups (AG).</span></span> <span data-ttu-id="366bf-118">高可用性解决方案可帮助硬件或软件故障时尽量减少停机时间。</span><span class="sxs-lookup"><span data-stu-id="366bf-118">A high availability solution helps minimize the downtime if there is a hardware or software failure.</span></span> 

<span data-ttu-id="366bf-119">**NLB 和故障转移群集**相互补充在复杂的体系结构中。</span><span class="sxs-lookup"><span data-stu-id="366bf-119">**NLB and failover clusters** complement each other in complex architectures.</span></span> <span data-ttu-id="366bf-120">NLB 群集用于前端 Web 服务器之间的负载平衡请求。</span><span class="sxs-lookup"><span data-stu-id="366bf-120">NLB clustering is used for to load balance requests between front-end web servers.</span></span> <span data-ttu-id="366bf-121">故障转移群集为 BizTalk Server 进程内宿主、企业单一登录主密钥服务器以及 BizTalk Server 数据库提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="366bf-121">Failover clustering provides high availability for the BizTalk Server in-process hosts, the Enterprise Single Sign-On Master Secret Server and BizTalk Server databases.</span></span> <span data-ttu-id="366bf-122">这通常用于在本地环境。</span><span class="sxs-lookup"><span data-stu-id="366bf-122">This is typically used for on-premises environments.</span></span> <span data-ttu-id="366bf-123">以下是有用的资源：</span><span class="sxs-lookup"><span data-stu-id="366bf-123">The following are good resources:</span></span> 

* [<span data-ttu-id="366bf-124">BizTalk Server：高可用性生存指南</span><span class="sxs-lookup"><span data-stu-id="366bf-124">BizTalk Server: High Availability Survival Guide</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/6532.biztalk-server-high-availability-survival-guide.aspx)

* [<span data-ttu-id="366bf-125">通过使用 Windows Server 故障转移群集或 Windows Server 群集改进 BizTalk Server 中的容错能力</span><span class="sxs-lookup"><span data-stu-id="366bf-125">Improving Fault Tolerance in BizTalk Server by Using a Windows Server failover cluster or Windows Server cluster</span></span>](http://go.microsoft.com/fwlink/p/?LinkId=154499)

<span data-ttu-id="366bf-126">**SQL Server Always On AG**可用与在本地环境和 Azure 虚拟机。</span><span class="sxs-lookup"><span data-stu-id="366bf-126">**SQL Server Always On AG** can be used with on-premises environments, and with Azure virtual machines.</span></span> <span data-ttu-id="366bf-127">可用性组支持 BizTalk Server 2016 开始，任何较新版本的 BizTalk Server 中支持。</span><span class="sxs-lookup"><span data-stu-id="366bf-127">AG support starts with BizTalk Server 2016, and is supported in any newer versions of BizTalk Server.</span></span> <span data-ttu-id="366bf-128">可用性组包含主数据库副本和辅助数据库副本。</span><span class="sxs-lookup"><span data-stu-id="366bf-128">AG includes primary database replicas, and secondary database replicas.</span></span> <span data-ttu-id="366bf-129">BizTalk Server 连接到主数据库副本，而辅助数据库副本提供冗余和故障转移。</span><span class="sxs-lookup"><span data-stu-id="366bf-129">BizTalk Server connects to the primary database replicas, while the secondary database replicas provide redundancy and fail over.</span></span> <span data-ttu-id="366bf-130">[Always On 可用性组 (SQL Server)](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server)提供可用性组的工作原理的详细信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-130">[Always On Availability Groups (SQL Server)](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server) provides details on AG works.</span></span> 

<span data-ttu-id="366bf-131">[BizTalk HA 使用 SQL Server Always On AG](../core/high-availability-using-sql-server-always-on-availability-groups.md)从 BizTalk 的角度提供更多详细信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-131">[BizTalk HA using SQL Server Always On AG](../core/high-availability-using-sql-server-always-on-availability-groups.md) provides more details from a BizTalk-perspective.</span></span>

## <a name="separate-runtime-and-administration"></a><span data-ttu-id="366bf-132">单独的运行时和管理</span><span class="sxs-lookup"><span data-stu-id="366bf-132">Separate runtime and administration</span></span>
<span data-ttu-id="366bf-133">BizTalk Server 支持在生产环境中实施多种安装方案。</span><span class="sxs-lookup"><span data-stu-id="366bf-133">BizTalk Server supports various installation scenarios in the production environment.</span></span> <span data-ttu-id="366bf-134">例如，您可以在一台计算机上安装、配置和部署仅限运行时的安装，在第二台计算机上执行仅限管理工具的安装。</span><span class="sxs-lookup"><span data-stu-id="366bf-134">For example, you can install, configure, and deploy a runtime-only installation on one computer and an administration tools-only installation on a second computer.</span></span>

<span data-ttu-id="366bf-135">在仅限管理工具安装期间，将安装以下组件：BizTalk 管理控制台、BM.exe 和 BTSDeploy.exe。</span><span class="sxs-lookup"><span data-stu-id="366bf-135">During an Administration tools-only installation, the following components are installed: BizTalk Administration console, BM.exe, and BTSDeploy.exe.</span></span> <span data-ttu-id="366bf-136">创建仅管理工具的 BizTalk Server 安装时需要考虑以下事项：</span><span class="sxs-lookup"><span data-stu-id="366bf-136">Consider the following when creating an Administration Tools-only BizTalk Server installation:</span></span>

- <span data-ttu-id="366bf-137">SQL Server 代理必须运行在作为 BizTalk Server MessageBox 数据库宿主的所有计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-137">SQL Server Agent must be running on all computers that are hosting BizTalk Server MessageBox databases.</span></span> <span data-ttu-id="366bf-138">SQL Server 代理需要跟踪 BizTalk Server 消息引擎中的消息正文。</span><span class="sxs-lookup"><span data-stu-id="366bf-138">SQL Server Agent is required to track message bodies in the BizTalk Server Messaging engine.</span></span>

- <span data-ttu-id="366bf-139">当你运行 BizTalk Server 配置向导时，将创建 Analysis Services 数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-139">When you run the BizTalk Server Configuration Wizard, you create an Analysis Services database.</span></span>

- <span data-ttu-id="366bf-140">不支持联合使用 BizTalk 跟踪数据库和 SQL Server Analysis Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-140">Using the BizTalk Tracking database with SQL Server Analysis Services is not supported.</span></span>

- <span data-ttu-id="366bf-141">不支持使用 SQL Server Analysis Services 的命名实例。</span><span class="sxs-lookup"><span data-stu-id="366bf-141">Using named instances of SQL Server Analysis Services is not supported.</span></span>

<span data-ttu-id="366bf-142">若要仅安装管理工具为 BizTalk Server，请选择仅**管理工具**在安装过程。</span><span class="sxs-lookup"><span data-stu-id="366bf-142">To install only Administration tools for BizTalk Server, select only **Administration Tools** during Setup.</span></span> <span data-ttu-id="366bf-143">在完成安装后，打开自定义配置管理器并且加入现有的企业单一登录 (SSO) 系统和 BizTalk 组。</span><span class="sxs-lookup"><span data-stu-id="366bf-143">After the installation is complete, open the custom configuration manager and join an existing Enterprise Single Sign-On (SSO) system and BizTalk group.</span></span>
<span data-ttu-id="366bf-144">返回页首</span><span class="sxs-lookup"><span data-stu-id="366bf-144">Top of page</span></span>

## <a name="enable-msdtc"></a><span data-ttu-id="366bf-145">启用 MSDTC</span><span class="sxs-lookup"><span data-stu-id="366bf-145">Enable MSDTC</span></span>
<span data-ttu-id="366bf-146">在多计算机环境中安装和配置 BizTalk Server 之前，请启用所有 BizTalk Server 上的网络 DTC 访问和网络 COM+ 访问以及 BizTalk Server 使用的任何远程 SQL Server 实例。</span><span class="sxs-lookup"><span data-stu-id="366bf-146">Before installing and configuring BizTalk Server in a multicomputer environment, enable network DTC access and network COM+ access on all BizTalk servers and any remote SQL Server instances used by BizTalk Server.</span></span> <span data-ttu-id="366bf-147">请参阅[用于优化环境的配置后步骤](post-configuration-steps-to-optimize-your-environment.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-147">See [Post-configuration steps to optimize your environment](post-configuration-steps-to-optimize-your-environment.md).</span></span>

<span data-ttu-id="366bf-148">其他：</span><span class="sxs-lookup"><span data-stu-id="366bf-148">Additional:</span></span>

- <span data-ttu-id="366bf-149">所有 BizTalk server 和 SQL 服务器组中必须都具有相同的远程过程调用 (RPC) 身份验证级别应用。</span><span class="sxs-lookup"><span data-stu-id="366bf-149">All BizTalk servers and SQL Servers in a group must have the same remote procedure call (RPC) authentication level applied.</span></span> <span data-ttu-id="366bf-150">DTC 代理可能不正确时进行身份验证 DTC 的计算机使用不同的操作系统、 连接到工作组，或位于不同域不信任彼此。</span><span class="sxs-lookup"><span data-stu-id="366bf-150">The DTC proxy may not correctly authenticate DTC when the computers use different operating systems, are joined to workgroups, or are in different domains that do not trust each other.</span></span> <span data-ttu-id="366bf-151">请参阅[MSDTC 无法相互进行身份验证](https://msdn.microsoft.com/library/ms686976(VS.85).aspx)。</span><span class="sxs-lookup"><span data-stu-id="366bf-151">See [MSDTC Fails to Mutually Authenticate](https://msdn.microsoft.com/library/ms686976(VS.85).aspx).</span></span>

- <span data-ttu-id="366bf-152">如果使用防火墙，请打开所需的 DTC 和 RPC 端口。</span><span class="sxs-lookup"><span data-stu-id="366bf-152">If using a firewall, open the required DTC and RPC ports.</span></span> <span data-ttu-id="366bf-153">请参阅[服务概述和网络端口要求 Windows](http://support.microsoft.com/kb/832017)。</span><span class="sxs-lookup"><span data-stu-id="366bf-153">See [Service overview and network port requirements for Windows](http://support.microsoft.com/kb/832017).</span></span>

- <span data-ttu-id="366bf-154">若要确保 DTC 设置正确无误，请使用 DTC 测试人员和 DTC Ping 工具。</span><span class="sxs-lookup"><span data-stu-id="366bf-154">To ensure that the DTC settings are correct, use the DTC Tester and DTC Ping tools.</span></span> <span data-ttu-id="366bf-155">这些工具以及 DTC 疑难解答的详细，请参阅[BizTalk Server-MSDTC 疑难解答](https://social.technet.microsoft.com/wiki/contents/articles/2031.biztalk-server-troubleshooting-problems-with-msdtc.aspx)。</span><span class="sxs-lookup"><span data-stu-id="366bf-155">These tools and more DTC troubleshooting are described at [BizTalk Server - Troubleshooting Problems with MSDTC](https://social.technet.microsoft.com/wiki/contents/articles/2031.biztalk-server-troubleshooting-problems-with-msdtc.aspx).</span></span>

## <a name="remote-sql-server"></a><span data-ttu-id="366bf-156">远程 SQL Server</span><span class="sxs-lookup"><span data-stu-id="366bf-156">Remote SQL Server</span></span>
<span data-ttu-id="366bf-157">如果在远程计算机上安装了 SQL Server:</span><span class="sxs-lookup"><span data-stu-id="366bf-157">When SQL Server is installed on a remote computer:</span></span>

- <span data-ttu-id="366bf-158">[SQL Server 管理工具](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)（较新的 SQL 版本） 或 SQL Server 客户端工具连接 （较旧的 SQL 版本） 必须安装本地 BizTalk Server 计算机上，当 SQL Server 是远程数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-158">[SQL Server Management Tools](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) (newer SQL versions) or SQL Server Client Tools Connectivity (older SQL versions) must be installed on the local BizTalk Server computer when SQL Server is remote.</span></span> <span data-ttu-id="366bf-159">SQL Server Tools 安装所需的 SQL Server 远程实例进行通信的客户端库。</span><span class="sxs-lookup"><span data-stu-id="366bf-159">The SQL Server Tools installs the client libraries required to communicate with the remote instance of SQL Server.</span></span> <span data-ttu-id="366bf-160">本地 BizTalk Server 计算机上的 SQL Server 工具的版本必须是远程的 SQL Server 安装的版本相同。</span><span class="sxs-lookup"><span data-stu-id="366bf-160">The version of the SQL Server tools on the local BizTalk Server computer must be the same version that is installed on the remote SQL Server.</span></span>

- <span data-ttu-id="366bf-161">如果您计划远程使用 Analysis Services，则 SQL Server OLAP 客户端必须安装在本地计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-161">SQL Server OLAP client must be installed on the local computer if you plan to use Analysis Services remotely.</span></span> <span data-ttu-id="366bf-162">OLAP 客户端可能随附[SQL Server 2016 功能包](https://www.microsoft.com/download/details.aspx?id=52676)。</span><span class="sxs-lookup"><span data-stu-id="366bf-162">The OLAP client may be included with [SQL Server 2016 Feature Pack](https://www.microsoft.com/download/details.aspx?id=52676).</span></span>

- <span data-ttu-id="366bf-163">在 BizTalk Server 配置期间必须运行远程 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="366bf-163">The remote SQL Server must be running during BizTalk Server configuration.</span></span>

- <span data-ttu-id="366bf-164">您在 SQL Server 安装过程中指定的 TCP 和 UDP 端口在 BizTalk Server 配置期间必须打开。</span><span class="sxs-lookup"><span data-stu-id="366bf-164">The TCP and UDP ports you specified during the SQL Server setup process must be open during BizTalk Server configuration.</span></span>

- <span data-ttu-id="366bf-165">若要配置 BAM 工具，请在 BizTalk BAM 服务器上安装 SQL Server 管理工具（基本工具和完整工具）。</span><span class="sxs-lookup"><span data-stu-id="366bf-165">To configure BAM tools, install SQL Server Management Tools - Basic and Complete on the BizTalk BAM Server.</span></span> <span data-ttu-id="366bf-166">有关设置和多计算机环境中配置 BAM 的详细信息，请参阅[安装并配置 BAM （业务活动监视） 在多计算机环境中](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx)。</span><span class="sxs-lookup"><span data-stu-id="366bf-166">For more information about setting up and configuring BAM in a multi-computer environment, see [Install and Configure BAM (Business Activity Monitoring) in a Multi-Computer Environment](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx).</span></span> 

- <span data-ttu-id="366bf-167">不支持的 SQL Server Analysis Services 命名的实例。</span><span class="sxs-lookup"><span data-stu-id="366bf-167">Named instances of SQL Server Analysis Services are not supported.</span></span>

### <a name="sql-server-topologies"></a><span data-ttu-id="366bf-168">SQL Server 拓扑</span><span class="sxs-lookup"><span data-stu-id="366bf-168">SQL Server Topologies</span></span>
<span data-ttu-id="366bf-169">在 BizTalk 服务器上，或在另一台服务器专用于 SQL Server 上，可以本地安装 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="366bf-169">SQL Server can be installed locally on the BizTalk Server, or on another server dedicated to SQL Server.</span></span> <span data-ttu-id="366bf-170">大多数生产方案包括 BizTalk Server 和 SQL Server 安装在单独的计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-170">Most production scenarios include BizTalk Server and SQL Server installed on separate computers.</span></span> 

<span data-ttu-id="366bf-171">有关受支持的 SQL Server 版本的列表，请参阅：</span><span class="sxs-lookup"><span data-stu-id="366bf-171">For a list of the supported SQL Server versions, see:</span></span> 

* [<span data-ttu-id="366bf-172">BizTalk Server 2016 软件要求</span><span class="sxs-lookup"><span data-stu-id="366bf-172">BizTalk Server 2016 software requirements</span></span>](hardware-and-software-requirements-for-biztalk-server-2016.md) 
* [<span data-ttu-id="366bf-173">BizTalk Server 2013R2 和 2013年软件要求</span><span class="sxs-lookup"><span data-stu-id="366bf-173">BizTalk Server 2013R2 and 2013 software requirements</span></span>](hardware-and-software-requirements-for-biztalk-server-2013-and-2013-r2.md)

> [!IMPORTANT]
> <span data-ttu-id="366bf-174">支持其他 Service Pack 和 Windows Update，并且应进行安装。</span><span class="sxs-lookup"><span data-stu-id="366bf-174">Any additional service packs and Windows Updates are supported and should be installed.</span></span>

### <a name="maintain-and-troubleshoot-databases"></a><span data-ttu-id="366bf-175">维护和故障排除的数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-175">Maintain and troubleshoot databases</span></span>

<span data-ttu-id="366bf-176">请参阅[如何维护和故障排除 BizTalk Server 数据库](http://support.microsoft.com/kb/952555)。</span><span class="sxs-lookup"><span data-stu-id="366bf-176">See [How to maintain and troubleshoot BizTalk Server databases](http://support.microsoft.com/kb/952555).</span></span>

## <a name="business-activity-monitoring-bam"></a><span data-ttu-id="366bf-177">业务活动监视 (BAM)</span><span class="sxs-lookup"><span data-stu-id="366bf-177">Business Activity Monitoring (BAM)</span></span>
<span data-ttu-id="366bf-178">BizTalk Server 提供了多种工具的信息工作者，在它们之间 BAM。</span><span class="sxs-lookup"><span data-stu-id="366bf-178">BizTalk Server provides several tools for information workers, among them BAM.</span></span> <span data-ttu-id="366bf-179">组件体系结构的一个基本了解可帮助你规划 BizTalk Server 安装，以便利用可用于您的服务器资源。</span><span class="sxs-lookup"><span data-stu-id="366bf-179">A basic understanding of the component architecture helps you plan the BizTalk Server installation to utilize the server resources available to you.</span></span>
<span data-ttu-id="366bf-180">业务活动监视 (BAM) 是一系列的工具用于管理聚合、 警报和配置文件，以监视相关业务度量，称为关键性能指标或 Kpi。</span><span class="sxs-lookup"><span data-stu-id="366bf-180">Business Activity Monitoring (BAM) is a collection of tools used to manage aggregations, alerts, and profiles to monitor relevant business metrics, known as key performance indicators or KPIs.</span></span>

<span data-ttu-id="366bf-181">BAM 是一个模块，可提供端到端可见性业务流程以提供有关状态和结果的各种操作流程和事务的信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-181">BAM is a module that gives you end-to-end visibility into your business processes to provides information about the status and results of various operational processes and transactions.</span></span> <span data-ttu-id="366bf-182">可以使用 BAM 输出确定出现问题的方面并解决企业内部的问题。</span><span class="sxs-lookup"><span data-stu-id="366bf-182">You can use the BAM output to address problem areas and resolve issues within your business.</span></span> <span data-ttu-id="366bf-183">有关 BAM 生命周期的详细信息，请参阅在业务活动监视 (BAM) 海报[BizTalk Server BAP 海报](https://www.microsoft.com/download/details.aspx?id=56123)。</span><span class="sxs-lookup"><span data-stu-id="366bf-183">For more information about BAM life cycle, see Business Activity Monitoring (BAM) poster at [BizTalk Server BAP posters](https://www.microsoft.com/download/details.aspx?id=56123).</span></span>

<span data-ttu-id="366bf-184">BAM 由以下层组成：</span><span class="sxs-lookup"><span data-stu-id="366bf-184">BAM consists of the following layers:</span></span>

| <span data-ttu-id="366bf-185">层</span><span class="sxs-lookup"><span data-stu-id="366bf-185">Layer</span></span> | <span data-ttu-id="366bf-186">作用</span><span class="sxs-lookup"><span data-stu-id="366bf-186">What it does</span></span> | <span data-ttu-id="366bf-187">示例</span><span class="sxs-lookup"><span data-stu-id="366bf-187">Examples</span></span> | <span data-ttu-id="366bf-188">安装了</span><span class="sxs-lookup"><span data-stu-id="366bf-188">Where installed</span></span> |
|---| ---|---|---|
| <span data-ttu-id="366bf-189">表示和工具</span><span class="sxs-lookup"><span data-stu-id="366bf-189">Presentation and Tools</span></span> | <span data-ttu-id="366bf-190">为业务用户和开发人员提供前端服务。</span><span class="sxs-lookup"><span data-stu-id="366bf-190">Provides front-end services to business users and developers.</span></span> <span data-ttu-id="366bf-191">显示数据，可让业务用户和开发人员定义和管理模板和配置文件;以及其他功能。</span><span class="sxs-lookup"><span data-stu-id="366bf-191">Displays data, allows business users and developers define and manage templates and profiles; among other functions.</span></span> | <span data-ttu-id="366bf-192">Office Excel，BAM 门户</span><span class="sxs-lookup"><span data-stu-id="366bf-192">Office Excel, BAM Portal</span></span> | <span data-ttu-id="366bf-193">Excel、管理工具和自定义用户界面安装在业务用户或开发人员的工作站上。</span><span class="sxs-lookup"><span data-stu-id="366bf-193">Excel, management tools, and custom user interfaces are installed on the business user's or developer's workstation.</span></span> <span data-ttu-id="366bf-194">在 BAM 基础结构的基础上构建的 BAM 门户和自定义 Web 应用程序安装在服务器上。</span><span class="sxs-lookup"><span data-stu-id="366bf-194">The BAM portal and custom web applications built on the BAM infrastructure are installed on a server.</span></span> |
| <span data-ttu-id="366bf-195">Web Services 和处理</span><span class="sxs-lookup"><span data-stu-id="366bf-195">Web Services and Processing</span></span> | <span data-ttu-id="366bf-196">链接表示层和数据库层；实现业务规则和业务流程；聚合和分析数据。</span><span class="sxs-lookup"><span data-stu-id="366bf-196">Link the presentation and database layers; implementation of business rules and processes; data aggregation and analysis.</span></span> | <span data-ttu-id="366bf-197">Windows SharePoint Services (WSS)、贸易合作伙伴管理 Web Services、BAM 管理 Web Services 和 BizTalk Server 引擎。</span><span class="sxs-lookup"><span data-stu-id="366bf-197">Windows SharePoint Services (WSS), Trading Partner Management Web Service, BAM Management Web Service, and the BizTalk Server engine.</span></span> | <span data-ttu-id="366bf-198">在使用 IIS，SQL 通知服务，并可能为自定义 web 服务，具体取决于应用程序的服务器。</span><span class="sxs-lookup"><span data-stu-id="366bf-198">On a server with IIS, SQL Notification service, and possibly custom web services, depending on the application.</span></span> <span data-ttu-id="366bf-199">在此服务器上，或在多个具有三个或多台计算机的计算机配置中的独立服务器上，也可以安装 BizTalk 主机服务。</span><span class="sxs-lookup"><span data-stu-id="366bf-199">The BizTalk host services can also be installed on this server, or on a separate server in multiple computer configuration that has three or more computers.</span></span> |
| <span data-ttu-id="366bf-200">数据库和平台服务</span><span class="sxs-lookup"><span data-stu-id="366bf-200">Database and Platform Services</span></span> | <span data-ttu-id="366bf-201">数据存储和检索；安全性和身份验证；网络；操作系统功能</span><span class="sxs-lookup"><span data-stu-id="366bf-201">Data storage and retrieval; security and authentication; networking; operating system functions</span></span> | <span data-ttu-id="366bf-202">SQL Server、 Windows Server、 企业单一登录 (SSO)，并故障转移和 NLB 群集</span><span class="sxs-lookup"><span data-stu-id="366bf-202">SQL Server, Windows Server, Enterprise Single Sign-On (SSO), and fail-over and NLB clustering</span></span> | <span data-ttu-id="366bf-203">在 Windows Server、 SQL Server 的服务器。</span><span class="sxs-lookup"><span data-stu-id="366bf-203">On a server with Windows Server, SQL Server.</span></span> <span data-ttu-id="366bf-204">出于性能原因，此服务器通常不会不运行 BizTalk 主机服务。</span><span class="sxs-lookup"><span data-stu-id="366bf-204">For performance reasons, this server typically does not run the BizTalk host services.</span></span> |

### <a name="install-bam"></a><span data-ttu-id="366bf-205">安装 BAM</span><span class="sxs-lookup"><span data-stu-id="366bf-205">Install BAM</span></span>
<span data-ttu-id="366bf-206">分步指南：[安装并配置 BAM （业务活动监视） 在多计算机环境中](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx)</span><span class="sxs-lookup"><span data-stu-id="366bf-206">Step-by-step guide: [Install and Configure BAM (Business Activity Monitoring) in a Multi-Computer Environment](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx)</span></span>

<span data-ttu-id="366bf-207">它是更轻松地了解 BAM、 安装和配置过程和依赖项通过将拆分为下表中所述的三个 BizTalk Server 环境：</span><span class="sxs-lookup"><span data-stu-id="366bf-207">It is easier to understand BAM, the installation and configuration process, and dependencies by splitting into three BizTalk Server environments described in the following table:</span></span>

| <span data-ttu-id="366bf-208">运行时环境</span><span class="sxs-lookup"><span data-stu-id="366bf-208">Runtime Environment</span></span> | <span data-ttu-id="366bf-209">设计时环境</span><span class="sxs-lookup"><span data-stu-id="366bf-209">Design-time Environment</span></span> | <span data-ttu-id="366bf-210">使用时环境</span><span class="sxs-lookup"><span data-stu-id="366bf-210">Usage-time Environment</span></span> |
|---|---|---|
| <span data-ttu-id="366bf-211">基本 BizTalk Server 运行时环境可能包括以下服务器：</span><span class="sxs-lookup"><span data-stu-id="366bf-211">A basic BizTalk Server runtime environment can include the following servers:</span></span> <ul><li><span data-ttu-id="366bf-212">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="366bf-212">BizTalk Server</span></span></li><li><span data-ttu-id="366bf-213">SQL Server</span><span class="sxs-lookup"><span data-stu-id="366bf-213">SQL Server</span></span></li><li><span data-ttu-id="366bf-214">BizTalk BAM 服务器</span><span class="sxs-lookup"><span data-stu-id="366bf-214">BizTalk BAM Server</span></span></li><li><span data-ttu-id="366bf-215">Web 服务器</span><span class="sxs-lookup"><span data-stu-id="366bf-215">Web Server</span></span></li></ul> | <span data-ttu-id="366bf-216">在 BAM 开发和部署过程中涉及三个角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-216">There are three roles involved during the BAM development and deployment process.</span></span> <span data-ttu-id="366bf-217">角色包括：</span><span class="sxs-lookup"><span data-stu-id="366bf-217">Roles include:</span></span> <ul><li><span data-ttu-id="366bf-218">业务分析员</span><span class="sxs-lookup"><span data-stu-id="366bf-218">Business analyst</span></span></li><li><span data-ttu-id="366bf-219">业务管理员</span><span class="sxs-lookup"><span data-stu-id="366bf-219">Business administrator</span></span></li><li><span data-ttu-id="366bf-220">应用程序开发人员</span><span class="sxs-lookup"><span data-stu-id="366bf-220">Application developer</span></span></li></ul> | <span data-ttu-id="366bf-221">实现和部署 BAM 解决方案之后，业务最终用户可以查看各种报告工具生成的报表。</span><span class="sxs-lookup"><span data-stu-id="366bf-221">After a BAM solution is implemented and deployed, business end users can view the reports generated by various reporting tools.</span></span> <span data-ttu-id="366bf-222">这些工具包括：</span><span class="sxs-lookup"><span data-stu-id="366bf-222">These tools include:</span></span> <ul><li><span data-ttu-id="366bf-223">BAM 门户</span><span class="sxs-lookup"><span data-stu-id="366bf-223">BAM Portal</span></span> </li><li><span data-ttu-id="366bf-224">SQL Server Reporting Services</span><span class="sxs-lookup"><span data-stu-id="366bf-224">SQL Server Reporting Services</span></span></li><li><span data-ttu-id="366bf-225">Microsoft PerformancePoint Monitoring Server</span><span class="sxs-lookup"><span data-stu-id="366bf-225">Microsoft PerformancePoint Monitoring Server</span></span></li><li><span data-ttu-id="366bf-226">自定义 BAM 报告应用程序</span><span class="sxs-lookup"><span data-stu-id="366bf-226">Custom BAM reporting applications</span></span></li></ul> |

<span data-ttu-id="366bf-227">下表描述了要安装的 BAM 组件：</span><span class="sxs-lookup"><span data-stu-id="366bf-227">The following table describes the BAM components to install:</span></span>

|<span data-ttu-id="366bf-228">类别</span><span class="sxs-lookup"><span data-stu-id="366bf-228">Category</span></span> |<span data-ttu-id="366bf-229">BAM 组件</span><span class="sxs-lookup"><span data-stu-id="366bf-229">BAM Component</span></span>|<span data-ttu-id="366bf-230">用途</span><span class="sxs-lookup"><span data-stu-id="366bf-230">Purpose</span></span>|
|---|---|---|
| <span data-ttu-id="366bf-231">门户组件</span><span class="sxs-lookup"><span data-stu-id="366bf-231">Portal Components</span></span> | <span data-ttu-id="366bf-232">业务活动监视</span><span class="sxs-lookup"><span data-stu-id="366bf-232">Business Activity Monitoring</span></span> | <span data-ttu-id="366bf-233">选择业务活动监视组件将安装的软件，为业务用户提供其异构业务流程，使他们能够做出重要业务决策的实时视图。</span><span class="sxs-lookup"><span data-stu-id="366bf-233">Selecting the Business Activity Monitoring component installs the software that gives business users a real-time view of their heterogeneous business processes, enabling them to make important business decisions.</span></span> |
| <span data-ttu-id="366bf-234">其他软件</span><span class="sxs-lookup"><span data-stu-id="366bf-234">Additional Software</span></span> | <span data-ttu-id="366bf-235">BAM 警报</span><span class="sxs-lookup"><span data-stu-id="366bf-235">BAM Alerts</span></span> | <span data-ttu-id="366bf-236">将安装所需的软件，使 BizTalk Server 能够提供业务活动监视 (BAM) 警报。</span><span class="sxs-lookup"><span data-stu-id="366bf-236">Installs the necessary software that enables BizTalk Server to provide Business Activity Monitoring (BAM) alerts.</span></span> <br/><br/><span data-ttu-id="366bf-237">BizTalk Server 2013 R2 和更高版本的 BAM 警报使用 SQL Server Database Mail。</span><span class="sxs-lookup"><span data-stu-id="366bf-237">BAM Alerts on BizTalk Server 2013 R2 and newer use SQL Server Database Mail.</span></span> <span data-ttu-id="366bf-238">不使用或不支持 SQL Notification Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-238">SQL Notification Services is not used or supported.</span></span><br/><br/><span data-ttu-id="366bf-239">BizTalk Server 2013 与 SQL Server 2012 上的 BAM 警报使用 SQL Notification Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-239">BAM Alerts on BizTalk Server 2013 with SQL Server 2012 uses SQL Notification Services.</span></span> <span data-ttu-id="366bf-240">BizTalk Server 2013 的 SQL Server 2008 R2 上的 BAM 警报使用 SQL Notification Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-240">BAM Alerts on BizTalk Server 2013 with SQL Server 2008 R2 uses SQL Notification Services.</span></span> |
| | <span data-ttu-id="366bf-241">BAM 客户端</span><span class="sxs-lookup"><span data-stu-id="366bf-241">BAM Client</span></span> | <span data-ttu-id="366bf-242">选择 BAM 客户端组件将安装必要的客户端软件，使业务用户能够使用 BizTalk Server 的业务活动监视功能。</span><span class="sxs-lookup"><span data-stu-id="366bf-242">Selecting the BAM Client component installs the necessary client-side software that allows business users to work with the Business Activity Monitoring feature of BizTalk Server.</span></span> | 
| | <span data-ttu-id="366bf-243">BAM-Eventing</span><span class="sxs-lookup"><span data-stu-id="366bf-243">BAM-Eventing</span></span> | <span data-ttu-id="366bf-244">选择 Bam-eventing 侦听器用于 Windows Workflow Foundation 和 Windows Communication Foundation 的 Bam-eventing Support 组件安装的软件。</span><span class="sxs-lookup"><span data-stu-id="366bf-244">Select the BAM-Eventing Support component installs the software for the BAM-Eventing Interceptors for Windows Workflow Foundation and Windows Communication Foundation.</span></span> <span data-ttu-id="366bf-245">选择该组件还可安装用于从自定义应用程序向 BAM 数据库发送事件的 BAM Event API。</span><span class="sxs-lookup"><span data-stu-id="366bf-245">Selecting this component also installs the BAM Event API that is used to send events to the BAM database from custom applications.</span></span> <span data-ttu-id="366bf-246">Bam-eventing Support 是 BizTalk Server 中的业务活动监视功能的一部分。</span><span class="sxs-lookup"><span data-stu-id="366bf-246">BAM-Eventing Support is part of the Business Activity Monitoring feature in BizTalk Server.</span></span> | 

### <a name="configure-bam"></a><span data-ttu-id="366bf-247">配置 BAM</span><span class="sxs-lookup"><span data-stu-id="366bf-247">Configure BAM</span></span>
<span data-ttu-id="366bf-248">分步指南：[安装并配置 BAM （业务活动监视） 在多计算机环境中](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx)</span><span class="sxs-lookup"><span data-stu-id="366bf-248">Step-by-step guide: [Install and Configure BAM (Business Activity Monitoring) in a Multi-Computer Environment](https://social.technet.microsoft.com/wiki/contents/articles/1888.install-and-configure-bam-business-activity-monitoring-in-a-multi-computer-environment.aspx)</span></span>

<span data-ttu-id="366bf-249">打开 BizTalk Server 配置，然后选择[自定义配置](configure-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-249">Open BizTalk Server Configuration and choose [Custom Configuration](configure-biztalk-server.md).</span></span> <span data-ttu-id="366bf-250">在自定义配置中，你可以配置高级的选项和有选择地配置或取消配置每项功能。</span><span class="sxs-lookup"><span data-stu-id="366bf-250">In Custom Configuration, you can configure advanced options and selectively configure or unconfigure each feature.</span></span> 

### <a name="install-and-configure-sql-server-for-bam"></a><span data-ttu-id="366bf-251">安装和配置 BAM 的 SQL Server</span><span class="sxs-lookup"><span data-stu-id="366bf-251">Install and Configure SQL Server for BAM</span></span>

<span data-ttu-id="366bf-252">在中[新增功能、 安装、 配置和升级](biztalk-server-what-s-new-installation-configuration-and-upgrade.md)，你可以：</span><span class="sxs-lookup"><span data-stu-id="366bf-252">In [What's New, Installation, Configuration, and Upgrade](biztalk-server-what-s-new-installation-configuration-and-upgrade.md), you can:</span></span> 

- <span data-ttu-id="366bf-253">请参阅 BizTalk Server，包括支持的 SQL Server 版本的受支持的软件要求</span><span class="sxs-lookup"><span data-stu-id="366bf-253">See the supported software requirements for BizTalk Server, including the supported SQL Server versions</span></span>
- <span data-ttu-id="366bf-254">安装必备软件，包括 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="366bf-254">Install the prerequisite software, including SQL Server.</span></span> <span data-ttu-id="366bf-255">有关特定于 SQL Server 的安装步骤，请参阅[安装 SQL Server 2016](https://docs.microsoft.com/sql/database-engine/install-windows/install-sql-server-from-the-installation-wizard-setup)或[安装 SQL Server 2014](https://msdn.microsoft.com/library/bb500469(v=sql.120).aspx)。</span><span class="sxs-lookup"><span data-stu-id="366bf-255">For SQL Server-specific installation steps, see [Install SQL Server 2016](https://docs.microsoft.com/sql/database-engine/install-windows/install-sql-server-from-the-installation-wizard-setup) or [Install SQL Server 2014](https://msdn.microsoft.com/library/bb500469(v=sql.120).aspx).</span></span>

<span data-ttu-id="366bf-256">除了所需的数据库服务通过 BizTalk Server 核心功能，BAM 还具有以下要求：</span><span class="sxs-lookup"><span data-stu-id="366bf-256">In addition to Database Services that required by the BizTalk Server core functions, BAM also requires the following:</span></span>

- <span data-ttu-id="366bf-257">SQL Server Analysis Services (SSAS)</span><span class="sxs-lookup"><span data-stu-id="366bf-257">SQL Server Analysis Services (SSAS)</span></span>

- <span data-ttu-id="366bf-258">SQL Server Integration Services (SSIS)</span><span class="sxs-lookup"><span data-stu-id="366bf-258">SQL Server Integration Services (SSIS)</span></span>

- <span data-ttu-id="366bf-259">SQL Server 数据库邮件或 SQL Server Notification Services (SSNS)</span><span class="sxs-lookup"><span data-stu-id="366bf-259">SQL Server Database Mail or SQL Server Notification Services (SSNS)</span></span>

##### <a name="configure-ssis"></a><span data-ttu-id="366bf-260">配置 SSIS</span><span class="sxs-lookup"><span data-stu-id="366bf-260">Configure SSIS</span></span>
<span data-ttu-id="366bf-261">如果不在 BizTalk Server 的计算机上安装 SQL Server，然后配置 SSIS。</span><span class="sxs-lookup"><span data-stu-id="366bf-261">If your SQL Server is installed on a computer other than the BizTalk Server, then configure SSIS.</span></span> <span data-ttu-id="366bf-262">在此任务中，将 SSIS 配置为使用远程 SQL Server 上的 msdb 数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-262">In this task, you configure the SSIS to use the msdb database on a remote SQL Server.</span></span>

1. <span data-ttu-id="366bf-263">打开命令提示符。</span><span class="sxs-lookup"><span data-stu-id="366bf-263">Open a Command Prompt.</span></span>

2. <span data-ttu-id="366bf-264">将目录更改为 %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn。</span><span class="sxs-lookup"><span data-stu-id="366bf-264">Change directory to %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn.</span></span>

3. <span data-ttu-id="366bf-265">运行以下命令： notepad MsDtsSrvr.ini.xml</span><span class="sxs-lookup"><span data-stu-id="366bf-265">Run the following command: notepad MsDtsSrvr.ini.xml</span></span>

4. <span data-ttu-id="366bf-266">在记事本中，更新内的文本"<ServerName>"标记添加到 SQL Server 的主机名。</span><span class="sxs-lookup"><span data-stu-id="366bf-266">In Notepad, update the text inside the “<ServerName>” tag to the host name of the SQL Server.</span></span> <span data-ttu-id="366bf-267">保存更改。</span><span class="sxs-lookup"><span data-stu-id="366bf-267">Save your changes.</span></span>

5. <span data-ttu-id="366bf-268">从命令提示符下，执行以下命令： net stop MsDtsServer</span><span class="sxs-lookup"><span data-stu-id="366bf-268">From the Command Prompt, execute the following command: net stop MsDtsServer</span></span>

6. <span data-ttu-id="366bf-269">从命令提示符下，执行以下命令： net start MsDtsServer</span><span class="sxs-lookup"><span data-stu-id="366bf-269">From the Command Prompt, execute the following command: net start MsDtsServer</span></span>

    <span data-ttu-id="366bf-270">**其他**:</span><span class="sxs-lookup"><span data-stu-id="366bf-270">**Additional**:</span></span>  
    <span data-ttu-id="366bf-271">默认情况下，Integration Services 服务配置为管理存储在数据库引擎的本地默认实例的 msdb 数据库中的程序包。</span><span class="sxs-lookup"><span data-stu-id="366bf-271">By default, the Integration Services service is configured to manage packages that are stored in the msdb database in a local, default instance of Database Engine.</span></span> <span data-ttu-id="366bf-272">若要管理的命名的实例或数据库引擎的远程实例中或在数据库引擎的多个实例中存储的包，修改配置文件。</span><span class="sxs-lookup"><span data-stu-id="366bf-272">To manage packages that are stored in a named instance or a remote instance of the Database Engine, or in multiple instances of the Database Engine, modify the configuration file.</span></span> <span data-ttu-id="366bf-273">例如，可以创建 SqlServerFolder 类型的更多根文件夹，以管理数据库引擎的多个实例的 msdb 数据库中的程序包。如果该服务停止，你还可以修改配置文件以允许程序包继续运行。</span><span class="sxs-lookup"><span data-stu-id="366bf-273">For example, you can create more root folders of the type, SqlServerFolder, to manage packages in the msdb database of multiple instances of the Database Engine.If the service stops, you can also modify the configuration file to allow packages to continue running.</span></span> <span data-ttu-id="366bf-274">此选项显示对象资源管理器中的多个根文件夹，或指定由 Integration Services 服务管理的文件系统中的另一个文件夹或多个文件夹。</span><span class="sxs-lookup"><span data-stu-id="366bf-274">This option displays more root folders in Object Explorer, or specifies a different folder or more folders in the file system managed by Integration Services service.</span></span>

    <span data-ttu-id="366bf-275">`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSDTS\ServiceConfigFile`注册表项指定的位置和 Integration Services 服务使用的配置文件的名称。</span><span class="sxs-lookup"><span data-stu-id="366bf-275">The `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSDTS\ServiceConfigFile` registry key specifies the location and name for the configuration file that Integration Services service uses.</span></span> <span data-ttu-id="366bf-276">注册表项的默认值为 C:\Program Files\Microsoft SQL server\100\dts\binn \ MsDtsSrvr.ini.xml。</span><span class="sxs-lookup"><span data-stu-id="366bf-276">The default value of the registry key is C:\Program Files\Microsoft SQL Server\100\DTS\Binn\ MsDtsSrvr.ini.xml.</span></span> <span data-ttu-id="366bf-277">可以更新该注册表项的值，以使配置文件使用其他名称和位置。</span><span class="sxs-lookup"><span data-stu-id="366bf-277">You can update the value of the registry key to use a different name and location for the configuration file.</span></span>

#### <a name="configure-bam-databases"></a><span data-ttu-id="366bf-278">配置 BAM 数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-278">Configure BAM databases</span></span>
<span data-ttu-id="366bf-279">您可以在不同计算机上配置 BAM 主导入数据库、BAM 存档数据库、BAM 星型架构数据库、BAM 分析数据库和 BAM Notification Services 应用程序数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-279">You can configure BAM Primary Import, BAM Archive, BAM Star Schema, BAM Analysis, and BAM Notification Services Application databases on different computers.</span></span> <span data-ttu-id="366bf-280">以下是在非 BizTalk Server 的计算机上安装 SQL Server 的软件要求：</span><span class="sxs-lookup"><span data-stu-id="366bf-280">The following are the software requirements when SQL Server is installed on a computer other than the BizTalk Server:</span></span>

| <span data-ttu-id="366bf-281">BAM 功能</span><span class="sxs-lookup"><span data-stu-id="366bf-281">BAM feature</span></span> | <span data-ttu-id="366bf-282">功能配置</span><span class="sxs-lookup"><span data-stu-id="366bf-282">Feature configuration</span></span> | <span data-ttu-id="366bf-283">BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="366bf-283">BizTalk Server</span></span> | <span data-ttu-id="366bf-284">SQL Server</span><span class="sxs-lookup"><span data-stu-id="366bf-284">SQL Server</span></span> | 
|---|---|---|---|
|<span data-ttu-id="366bf-285">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="366bf-285">BAM Tools</span></span> | <span data-ttu-id="366bf-286">BAM 主导入表和 BAM 存档数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-286">BAM Primary Import Tables and BAM Archive database</span></span> | <span data-ttu-id="366bf-287">ADOMD.NET SQL Server Integration Services</span><span class="sxs-lookup"><span data-stu-id="366bf-287">ADOMD.NET SQL Server Integration Services</span></span> | <span data-ttu-id="366bf-288">受支持的 SQL Server 版本。</span><span class="sxs-lookup"><span data-stu-id="366bf-288">Supported SQL Server version.</span></span> <span data-ttu-id="366bf-289">请参阅[最新内容、 安装、 配置和升级](biztalk-server-what-s-new-installation-configuration-and-upgrade.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-289">See [What's New, Installation, Configuration, and Upgrade](biztalk-server-what-s-new-installation-configuration-and-upgrade.md).</span></span>|
| <span data-ttu-id="366bf-290">BAM 工具</span><span class="sxs-lookup"><span data-stu-id="366bf-290">BAM Tools</span></span>| <span data-ttu-id="366bf-291">为 BAM 聚合启用 Analysis Services</span><span class="sxs-lookup"><span data-stu-id="366bf-291">Enable Analysis Services for BAM aggregations</span></span>| <span data-ttu-id="366bf-292">SQL Server Integration Services</span><span class="sxs-lookup"><span data-stu-id="366bf-292">SQL Server Integration Services</span></span>| <span data-ttu-id="366bf-293">SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="366bf-293">SQL Server Analysis Services</span></span>| 
| <span data-ttu-id="366bf-294">BAM Notification Services 应用程序数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-294">BAM Notification Services Application Database</span></span>| <span data-ttu-id="366bf-295">BAM 警报</span><span class="sxs-lookup"><span data-stu-id="366bf-295">BAM Alerts</span></span>| <span data-ttu-id="366bf-296">BAM 警报</span><span class="sxs-lookup"><span data-stu-id="366bf-296">BAM Alerts</span></span> <br/><span data-ttu-id="366bf-297">中列出的要求[新增功能、 安装、 配置和升级](biztalk-server-what-s-new-installation-configuration-and-upgrade.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-297">Requirements listed in [What's New, Installation, Configuration, and Upgrade](biztalk-server-what-s-new-installation-configuration-and-upgrade.md).</span></span>| <span data-ttu-id="366bf-298">如果使用 SQL Server 2012 或 SQL Server 2014，配置 SQL Server Database Mail。</span><span class="sxs-lookup"><span data-stu-id="366bf-298">If using SQL Server 2012 or SQL Server 2014, configure SQL Server Database Mail.</span></span> <span data-ttu-id="366bf-299">如果使用 SQL Server 2008 R2，安装 SQL Server 2005 Notification Services 引擎组件。</span><span class="sxs-lookup"><span data-stu-id="366bf-299">If using SQL Server 2008 R2, install SQL Server 2005 Notification Services Engine Components.</span></span><br/><br/><span data-ttu-id="366bf-300">BAM 警报要求记录在准备安装您的计算机。</span><span class="sxs-lookup"><span data-stu-id="366bf-300">The BAM Alerts requirements are documented at Preparing Your Computer for Installation.</span></span>

> [!NOTE] 
> <span data-ttu-id="366bf-301">用于 OLAP 服务的服务帐户应该对 BAM 星型架构数据库具有 db_datareader 权限。</span><span class="sxs-lookup"><span data-stu-id="366bf-301">The service account used for the OLAP service should have db_datareader permissions on the BAM Star Schema database.</span></span>

##### <a name="notification-services--biztalk-2013--sql-server-2008-r2-only"></a><span data-ttu-id="366bf-302">通知服务 – BizTalk 2013 / 仅限 SQL Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="366bf-302">Notification Services – BizTalk 2013 / SQL Server 2008 R2 Only</span></span>

> [!IMPORTANT]
> <span data-ttu-id="366bf-303">当使用 SQL Server 2008 R2，此部分才适用。</span><span class="sxs-lookup"><span data-stu-id="366bf-303">This section only applies if SQL Server 2008 R2 is used.</span></span>

<span data-ttu-id="366bf-304">您可以在 Notification Services 的提供者、生成者和分发者角色位于不同计算机的多计算机环境中安装 SQL Server Notification Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-304">You can install SQL Server Notification Services in a multicomputer environment where the Provider, Generator, and Distributor roles of Notification Services are on different computers.</span></span> <span data-ttu-id="366bf-305">下面介绍该方案中的依存关系：</span><span class="sxs-lookup"><span data-stu-id="366bf-305">The following describes the dependencies in that scenario:</span></span>

- <span data-ttu-id="366bf-306">AggregationEventProvider.dll 应安装在承载提供程序角色的计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-306">The AggregationEventProvider.dll should be installed on the computer that hosts the Provider role.</span></span> <span data-ttu-id="366bf-307">在 BizTalk Server 安装期间安装 BAM 警报聚合事件提供程序时，将安装此.dll 文件。</span><span class="sxs-lookup"><span data-stu-id="366bf-307">This .dll file is installed when you install the BAM Alerts Aggregate Event Provider during the installation of BizTalk Server.</span></span> <span data-ttu-id="366bf-308">如果安装了 BizTalk 运行时、管理工具或者开发人员工具和 SDK，将存在 BAM 警报聚合事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="366bf-308">The BAM Alerts Aggregate Event Provider is present if the BizTalk Runtime, Administration Tools, or Developer Tools and SDK are installed.</span></span>

- <span data-ttu-id="366bf-309">EmailNotification.xslt 和 FileNotification.xslt 被必需托管分发服务器角色的计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-309">EmailNotification.xslt and FileNotification.xslt are required on the computer that hosts the Distributor role.</span></span> <span data-ttu-id="366bf-310">从现有的 BizTalk Server 复制中的以下路径的文件： BizTalk Server \Program Files\Microsoft*版本*\Tracking</span><span class="sxs-lookup"><span data-stu-id="366bf-310">You can copy the files in the following path from an existing BizTalk Server: \Program Files\Microsoft BizTalk Server *version*\Tracking</span></span>

- <span data-ttu-id="366bf-311">托管分发服务器角色的计算机上的.xslt 文件的确切位置更新 Notification Services 应用程序定义文件 （.adf 文件）。</span><span class="sxs-lookup"><span data-stu-id="366bf-311">Update the Notification Services Application definition file (.adf file) with the exact location of the .xslt files on the computer that hosts the Distributor role.</span></span> 

<span data-ttu-id="366bf-312">**更新应用程序定义文件 （.adf 文件）**:</span><span class="sxs-lookup"><span data-stu-id="366bf-312">**Update the Application definition file (.adf file)**:</span></span>  

1. <span data-ttu-id="366bf-313">在计算机上安装 BizTalk Server，打开 Notification Services 命令提示符。</span><span class="sxs-lookup"><span data-stu-id="366bf-313">On the computer where BizTalk Server is installed, open the Notification Services command prompt.</span></span>
2. <span data-ttu-id="366bf-314">浏览到 files\microsoft BizTalk Server*版本*\Tracking。</span><span class="sxs-lookup"><span data-stu-id="366bf-314">Browse to \Program Files\Microsoft BizTalk Server *version*\Tracking.</span></span>
3. <span data-ttu-id="366bf-315">执行 ProcessBamNsFiles.vbs 以便创建初始的 .adf 文件。</span><span class="sxs-lookup"><span data-stu-id="366bf-315">Execute ProcessBamNsFiles.vbs to create the initial .adf file.</span></span>
4. <span data-ttu-id="366bf-316">修改 .adf 文件中 .xslt 文件的路径。</span><span class="sxs-lookup"><span data-stu-id="366bf-316">Modify the .adf file with the path to the .xslt file.</span></span>
5. <span data-ttu-id="366bf-317">再次执行 ProcessBamNsFiles.vbs 以更新 .adf 文件。</span><span class="sxs-lookup"><span data-stu-id="366bf-317">Execute ProcessBamNsFiles.vbs again to update the .adf file.</span></span>
6. <span data-ttu-id="366bf-318">重新启动 BAMAlerts NT 服务。</span><span class="sxs-lookup"><span data-stu-id="366bf-318">Restart the BAMAlerts NT service.</span></span>

##### <a name="bam-scale-out-alerts-topology"></a><span data-ttu-id="366bf-319">BAM 向外扩展警报拓扑</span><span class="sxs-lookup"><span data-stu-id="366bf-319">BAM Scale-Out Alerts Topology</span></span>
<span data-ttu-id="366bf-320">如果你要将现有的 BAM 向外扩展警报拓扑升级至 BizTalk Server 2013，则在每个服务器上执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="366bf-320">If you are upgrading your existing BAM scale-out alerts topology to BizTalk Server 2013, then do the following steps on each server:</span></span>

1. <span data-ttu-id="366bf-321">停止 Notification Service，然后注销 Notification Service 的实例：</span><span class="sxs-lookup"><span data-stu-id="366bf-321">Stop the Notification Service and then unregister an instance of Notification Service:</span></span>
    1. <span data-ttu-id="366bf-322">在中**程序**，单击**Microsoft SQL Server 2005**，单击**配置工具**，然后单击**Notification Services 命令提示**.</span><span class="sxs-lookup"><span data-stu-id="366bf-322">In **Programs**, click **Microsoft SQL Server 2005**, click **Configuration Tools**, and then click **Notification Services Command Prompt**.</span></span>
    1. <span data-ttu-id="366bf-323">在命令提示符处，键入： `net stop NS$<instance_name>`。</span><span class="sxs-lookup"><span data-stu-id="366bf-323">At the command prompt, type: `net stop NS$<instance_name>`.</span></span> <span data-ttu-id="366bf-324">例如，键入： `net stop NS$BamAlerts`。</span><span class="sxs-lookup"><span data-stu-id="366bf-324">For example, type: `net stop NS$BamAlerts`.</span></span>
    1. <span data-ttu-id="366bf-325">若要注销该实例，键入以下命令： `nscontrol unregister -name BamAlerts`。</span><span class="sxs-lookup"><span data-stu-id="366bf-325">To unregister the instance, type the following command: `nscontrol unregister -name BamAlerts`.</span></span> 

        <span data-ttu-id="366bf-326">注销实例会删除注册表项、NS$instance_name 服务（如果存在），还会删除该服务的性能计数器。</span><span class="sxs-lookup"><span data-stu-id="366bf-326">Unregistering an instance removes the registry entries, removes the NS$instance_name service (if present), and deletes the performance counters for the service.</span></span>

2. <span data-ttu-id="366bf-327">升级到更高版本的 SQL Server 2005 Notification Services 的 Notification Services 实例的服务器。</span><span class="sxs-lookup"><span data-stu-id="366bf-327">Upgrade your servers that have Notification Services instances to a higher edition of SQL Server 2005 Notification Services.</span></span>

3. <span data-ttu-id="366bf-328">若要根据您要从升级的 SQL Server 版本将 BAM 数据库迁移，请运行位于 BizTalk Server Tracking 文件夹中的迁移数据库命令 bm.exe 程序。</span><span class="sxs-lookup"><span data-stu-id="366bf-328">To migrate your BAM databases based on the SQL Server version you are upgrading from, run the migration database command bm.exe program located in the BizTalk Server Tracking folder.</span></span> <span data-ttu-id="366bf-329">例如，如果 SQL Server 2005 升级到 SQL Server 2008 R2，运行以下命令在命令提示符中使用管理凭据： `bm.exe migrate-sql –From:sql2005 –To:sql2008 –NSUser:<username>`。</span><span class="sxs-lookup"><span data-stu-id="366bf-329">For example, if SQL Server 2005 is upgraded to SQL Server 2008 R2, run the following in the command prompt with administrative credentials: `bm.exe migrate-sql –From:sql2005 –To:sql2008 –NSUser:<username>`.</span></span>

4. <span data-ttu-id="366bf-330">重新注册 Notification Service 除迁移程序 (bm.exe) 正在使用的位置的服务器的所有服务器上。</span><span class="sxs-lookup"><span data-stu-id="366bf-330">Reregister the Notification Service on all the servers except the server where the migration program (bm.exe) is being used.</span></span>

   1. <span data-ttu-id="366bf-331">在中**程序**，单击**Microsoft SQL Server 2005**，单击**配置工具**，然后单击**Notification Services 命令提示**.</span><span class="sxs-lookup"><span data-stu-id="366bf-331">In **Programs**, click **Microsoft SQL Server 2005**, click **Configuration Tools**, and then click **Notification Services Command Prompt**.</span></span>
   2. <span data-ttu-id="366bf-332">在命令提示符下键入： `nscontrol register -name BamAlerts -server <NS DB Server> -service -serviceusername "<NSServiceUserName>" -servicepassword "<NSServicePassword>"`</span><span class="sxs-lookup"><span data-stu-id="366bf-332">At the command prompt, type: `nscontrol register -name BamAlerts -server <NS DB Server> -service -serviceusername "<NSServiceUserName>" -servicepassword "<NSServicePassword>"`</span></span>

      <span data-ttu-id="366bf-333">这可使 Notification Services 登录到正确的数据库 （此信息保留在服务计算机的注册表中由 nscontrol）。</span><span class="sxs-lookup"><span data-stu-id="366bf-333">This enables Notification Services to log on to the correct database (this information is maintained in the registry of the service computer by nscontrol).</span></span>

      > [!IMPORTANT] 
      > <span data-ttu-id="366bf-334">请记得使用新的 Notification Services 数据库服务器中重新注册该服务时在-server 选项。</span><span class="sxs-lookup"><span data-stu-id="366bf-334">Remember to use the new Notification Services database server in the -server option when re-registering the service.</span></span> <span data-ttu-id="366bf-335">此外，使用新的 Notification Services 服务的同一用户名称与旧。</span><span class="sxs-lookup"><span data-stu-id="366bf-335">In addition, use the same user name for the new Notification Services service as the old one.</span></span>

5. <span data-ttu-id="366bf-336">验证 BAM 警报： 打开**Notification Services 命令提示符**并键入： `nscontrol.exe status –name BAMAlerts –server <NS DB Server>`。</span><span class="sxs-lookup"><span data-stu-id="366bf-336">Validate the BAM alerts: Open the **Notification Services Command Prompt** and type: `nscontrol.exe status –name BAMAlerts –server <NS DB Server>`.</span></span>

### <a name="bam-portal"></a><span data-ttu-id="366bf-337">BAM 门户</span><span class="sxs-lookup"><span data-stu-id="366bf-337">BAM Portal</span></span>
<span data-ttu-id="366bf-338">门户组件是一组服务业务人员用来进行通信、 协作和做出决策，使他们能够进行交互，配置和监视业务流程和工作流。</span><span class="sxs-lookup"><span data-stu-id="366bf-338">The Portal Components are a set of services used by business people to communicate, collaborate, and make decisions that enable them to interact, configure, and monitor business processes and workflows.</span></span> <span data-ttu-id="366bf-339">若要使用此功能，安装 Internet 信息服务 (IIS)。</span><span class="sxs-lookup"><span data-stu-id="366bf-339">To use this feature, install Internet Information Services (IIS).</span></span> <span data-ttu-id="366bf-340">IIS 要求属于[新增功能、 安装、 配置和升级](biztalk-server-what-s-new-installation-configuration-and-upgrade.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-340">The IIS requirements are in [What's New, Installation, Configuration, and Upgrade](biztalk-server-what-s-new-installation-configuration-and-upgrade.md).</span></span>

### <a name="bam-add-in-from-excel"></a><span data-ttu-id="366bf-341">BAM 外接程序从 Excel</span><span class="sxs-lookup"><span data-stu-id="366bf-341">BAM Add-in from Excel</span></span>
<span data-ttu-id="366bf-342">[添加或删除外接程序](https://support.office.com/article/add-or-remove-add-ins-0af570c4-5cf3-4fa9-9b88-403625a0b460)excel 中列出的步骤。</span><span class="sxs-lookup"><span data-stu-id="366bf-342">[Add or remove add-ins](https://support.office.com/article/add-or-remove-add-ins-0af570c4-5cf3-4fa9-9b88-403625a0b460) lists the steps for Excel.</span></span> <span data-ttu-id="366bf-343">BAM 外接程序名称是**业务活动监视**。</span><span class="sxs-lookup"><span data-stu-id="366bf-343">The BAM add-in name is **Business Activity Monitoring**.</span></span>

### <a name="configure-multiple-biztalk-groups-to-use-a-single-bam-database"></a><span data-ttu-id="366bf-344">配置多个 BizTalk 组，以使用单个 BAM 数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-344">Configure Multiple BizTalk Groups to use a Single BAM Database</span></span>
<span data-ttu-id="366bf-345">在多个 BizTalk 组间共享 BAM 数据库：</span><span class="sxs-lookup"><span data-stu-id="366bf-345">Share the BAM databases across multiple BizTalk groups:</span></span>

1. <span data-ttu-id="366bf-346">配置具有 BAM 功能的第一个 BizTalk 组。</span><span class="sxs-lookup"><span data-stu-id="366bf-346">Configure the first BizTalk group with the BAM features.</span></span> <span data-ttu-id="366bf-347">这些功能包括 BAM 工具、 BAM 分析数据库、 BAM 警报和 BAM 门户。</span><span class="sxs-lookup"><span data-stu-id="366bf-347">These features include BAM tools, the BAM Analysis database, BAM alerts, and the BAM portal.</span></span>

2. <span data-ttu-id="366bf-348">配置后面的 BizTalk 组并执行 BizTalk Server 配置向导中的以下操作：</span><span class="sxs-lookup"><span data-stu-id="366bf-348">Configure the subsequent BizTalk groups and do the following in the BizTalk Server Configuration Wizard:</span></span>

   1. <span data-ttu-id="366bf-349">选择**BAM 工具**，然后选择**启用业务活动监视工具**并**为 BAM 聚合启用 Analysis Services**复选框。</span><span class="sxs-lookup"><span data-stu-id="366bf-349">Select **BAM Tools**, and then select the **Enable Business Activity Monitoring tools** and **Enable Analysis Services for BAM aggregations** check boxes.</span></span>

   2. <span data-ttu-id="366bf-350">更改**服务器名称**并**数据库名称**的 BAM 数据存储以匹配配置的第一个 BizTalk 组时使用的相同名称。</span><span class="sxs-lookup"><span data-stu-id="366bf-350">Change the **Server Name** and **Database Name** of the BAM data stores to match the same names used when configuring the first BizTalk group.</span></span>

   3. <span data-ttu-id="366bf-351">选择**BAM 警报**，然后选择**启用 BAM 警报**。</span><span class="sxs-lookup"><span data-stu-id="366bf-351">Select **BAM Alerts** and then select **Enable BAM alerts**.</span></span>

   4. <span data-ttu-id="366bf-352">更改服务帐户为 BAM 警报，因此它是一个空的用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="366bf-352">Change the service account for BAM Alerts so it's a blank user name and password.</span></span>

   5. <span data-ttu-id="366bf-353">更改 BAM 警报 SMTP 服务器，BAM 警报文件位置，SQL Server 警报数据库并警报数据库名称以匹配配置的第一个 BizTalk 组时使用的相同名称的前缀。</span><span class="sxs-lookup"><span data-stu-id="366bf-353">Change the BAM Alerts SMTP Server, BAM Alerts File Location, SQL Server for Alerts Database, and Prefix for Alerts Database Names to match the same names used when configuring the first BizTalk group.</span></span>

      > <span data-ttu-id="366bf-354">!请注意] 相同的主导入表 (PIT) 可以使用，但使用不同的 BAM 存档、 BAM 分析和星型架构数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-354">!NOTE] The same Primary Import Tables (PIT) can be used but with different BAM Archive, BAM Analysis, and Star Schema databases.</span></span> <span data-ttu-id="366bf-355">但是，此选项会影响使用同一 PIT 的所有组。</span><span class="sxs-lookup"><span data-stu-id="366bf-355">However, this option impacts all groups that use the same PIT.</span></span>

3. <span data-ttu-id="366bf-356">选择**BAM 门户**，然后选择**启用 BAM 门户**复选框。</span><span class="sxs-lookup"><span data-stu-id="366bf-356">Select **BAM Portal**, and then select the **Enable BAM Portal** check box.</span></span>

    > [!NOTE]
    > <span data-ttu-id="366bf-357">此屏幕上的所有字段都是只读的，因为在 BAM 主导入数据库和 BAM 门户之间存在一对一的关系。</span><span class="sxs-lookup"><span data-stu-id="366bf-357">All the fields on this screen are read-only because there is a one-to-one relationship between the BAM Primary Import database and the BAM portal.</span></span> <span data-ttu-id="366bf-358">多个 BizTalk 组共享 BAM 门户时配置对相同的 BAM 数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-358">Multiple BizTalk groups share the BAM portal when configured against the same BAM databases.</span></span>

4. <span data-ttu-id="366bf-359">选择**应用配置**。</span><span class="sxs-lookup"><span data-stu-id="366bf-359">Select **Apply Configuration**.</span></span>

### <a name="bam-client-software-requirements"></a><span data-ttu-id="366bf-360">BAM 客户端软件要求</span><span class="sxs-lookup"><span data-stu-id="366bf-360">BAM Client Software Requirements</span></span>
- <span data-ttu-id="366bf-361">对于 web 客户端，您需要 Internet Explorer 和 Office Web Components 11 版本 4.0 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="366bf-361">For the web client, you need Internet Explorer and Office Web Components 11 version 4.0 or later.</span></span>

- <span data-ttu-id="366bf-362">如果您运行 web 客户端并使用 SQL Server 2008 R2 Analysis Services，安装 Microsoft SQL Server 2008 R2 Analysis Services 10.0 OLE DB 访问接口。</span><span class="sxs-lookup"><span data-stu-id="366bf-362">If you are running the web client and using SQL Server 2008 R2 Analysis Services, install Microsoft SQL Server 2008 R2 Analysis Services 10.0 OLE DB Provider.</span></span> 

- <span data-ttu-id="366bf-363">对于 Excel 客户端，你将需要 Microsoft Excel 和 BAM Excel 外接程序提供与 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="366bf-363">For the Excel client, you need Microsoft Excel and the BAM Excel Add-in provided with BizTalk Server.</span></span>


## <a name="groups-and-service-accounts"></a><span data-ttu-id="366bf-364">组和服务帐户</span><span class="sxs-lookup"><span data-stu-id="366bf-364">Groups and Service Accounts</span></span>
<span data-ttu-id="366bf-365">手动创建所有域组和帐户，然后在多计算机安装中配置 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="366bf-365">Manually create all of the domain groups and accounts before you configure BizTalk Server in a multicomputer installation.</span></span> <span data-ttu-id="366bf-366">以下信息可在创建这些组和帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-366">The following information is useful in creating these groups and accounts.</span></span>

<span data-ttu-id="366bf-367">在多计算机环境中，BizTalk Server 仅支持域组和域服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-367">In a multicomputer environment, BizTalk Server supports only domain groups and domain service accounts.</span></span> 

- <span data-ttu-id="366bf-368">BizTalk Server 仅支持<NetBIOSDomainName>\<用户 > 名称格式的 Windows 组和服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-368">BizTalk Server supports only <NetBIOSDomainName>\<User> name formats for Windows groups and service accounts.</span></span>

- <span data-ttu-id="366bf-369">在多计算机配置中，BizTalk Server 仅支持 Active Directory 域组和用户帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-369">BizTalk Server supports only Active Directory domain groups and user accounts in multicomputer configurations.</span></span> <span data-ttu-id="366bf-370">域组包括域本地组、全局组和通用组，在单计算机环境和多计算机环境中均支持这些组。</span><span class="sxs-lookup"><span data-stu-id="366bf-370">Domain groups include Domain Local groups, Global groups, and Universal groups, which are supported in both single computer and multicomputer environments.</span></span>

- <span data-ttu-id="366bf-371">一般情况下，因为它们的使用需要的所有服务器，包括 BizTalk Server 基础结构中的 SQL 服务器，属于同一个域，不建议域本地组。</span><span class="sxs-lookup"><span data-stu-id="366bf-371">In general, Domain Local Groups are not recommended because their use requires that all of the servers, including SQL Servers, in the BizTalk Server infrastructure belong to the same domain.</span></span> <span data-ttu-id="366bf-372">这一注意事项并不适用于较小的网络，在这些网络中，所有服务器和用户帐户都驻留在单个域中。</span><span class="sxs-lookup"><span data-stu-id="366bf-372">This consideration does not apply to small networks where all of the servers and user accounts reside in a single domain.</span></span> <span data-ttu-id="366bf-373">[Active Directory 组](http://technet.microsoft.com/library/cc733001.aspx)提供了详细信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-373">[Active Directory groups](http://technet.microsoft.com/library/cc733001.aspx) provides more information.</span></span>

- <span data-ttu-id="366bf-374">安装和配置 BizTalk Server 在多计算机环境中时，不支持 NT AUTHORITY\LOCAL SERVICE、 NT AUTHORITY\NETWORK SERVICE、 NT AUTHORITY\SERVICE、 NT AUTHORITY\SYSTEM 和 Everyone 之类的内置帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-374">Built-in accounts such as NT AUTHORITY\LOCAL SERVICE, NT AUTHORITY\NETWORK SERVICE, NT AUTHORITY\SERVICE, NT AUTHORITY\SYSTEM, and Everyone are not supported when you install and configure BizTalk Server in a multicomputer environment.</span></span>

- <span data-ttu-id="366bf-375">运行 BizTalk Server 配置的用户必须属于以下用户组： 本地计算机上的 SQL Server 计算机，用于 BizTalk Server Administrators 域组的系统管理员组上的管理员组组和用于 SSO 管理员组的域组。</span><span class="sxs-lookup"><span data-stu-id="366bf-375">The user that runs the BizTalk Server configuration must belong to the following user groups: the Administrators group on the local computer, the System Administrators group on the SQL Server computer, the domain group used for the BizTalk Server Administrators group, and the domain group used for the SSO Administrators group.</span></span>

- <span data-ttu-id="366bf-376">只要可能，使用在设置期间创建的默认帐户名称。</span><span class="sxs-lookup"><span data-stu-id="366bf-376">Whenever possible, use the default account names created during setup.</span></span> <span data-ttu-id="366bf-377">BizTalk Server 安装程序会自动配置已安装的组件要使用的默认帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-377">The BizTalk Server setup program automatically configures installed components to use the default accounts.</span></span> <span data-ttu-id="366bf-378">使用默认名称可以简化安装和配置，但它并不总是可能。</span><span class="sxs-lookup"><span data-stu-id="366bf-378">Using the default names simplifies setup and configuration, but it is not always possible.</span></span> <span data-ttu-id="366bf-379">例如，可以有多个活动域森林内的 BizTalk Server 组。</span><span class="sxs-lookup"><span data-stu-id="366bf-379">For example, there can be multiple BizTalk Server groups within an Active Domain forest.</span></span> <span data-ttu-id="366bf-380">在此情况下，必须修改帐户名，以避免冲突。</span><span class="sxs-lookup"><span data-stu-id="366bf-380">In this situation, the account names must be modified to avoid conflicts.</span></span> <span data-ttu-id="366bf-381">或者，你的组织可能使用的命名标准的服务和用户帐户因此更改默认帐户，以符合标准。</span><span class="sxs-lookup"><span data-stu-id="366bf-381">Or, your organization might use naming standards for service and user accounts so you change the default accounts to conform to the standard.</span></span>

### <a name="windows-groups"></a><span data-ttu-id="366bf-382">Windows 组</span><span class="sxs-lookup"><span data-stu-id="366bf-382">Windows Groups</span></span>
<span data-ttu-id="366bf-383">下表列出了 BizTalk Server 使用的 Windows 组及其成员。</span><span class="sxs-lookup"><span data-stu-id="366bf-383">The following table lists the Windows groups and their membership used by BizTalk Server.</span></span> <span data-ttu-id="366bf-384">它还给出了这些组的 SQL Server 角色或数据库角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-384">It also identifies the SQL Server Roles or Database Roles for the group.</span></span>

| <span data-ttu-id="366bf-385">Group</span><span class="sxs-lookup"><span data-stu-id="366bf-385">Group</span></span> | <span data-ttu-id="366bf-386">组说明</span><span class="sxs-lookup"><span data-stu-id="366bf-386">Group Description</span></span> | <span data-ttu-id="366bf-387">成员身份</span><span class="sxs-lookup"><span data-stu-id="366bf-387">Membership</span></span> | <span data-ttu-id="366bf-388">SQL Server 角色或数据库角色</span><span class="sxs-lookup"><span data-stu-id="366bf-388">SQL Server Roles or Database Roles</span></span> | 
| ---|---|---|---|
| <span data-ttu-id="366bf-389">SSO Administrators</span><span class="sxs-lookup"><span data-stu-id="366bf-389">SSO Administrators</span></span> | <span data-ttu-id="366bf-390">企业单一登录 (SSO) 服务的管理员。</span><span class="sxs-lookup"><span data-stu-id="366bf-390">Administrator of the Enterprise Single Sign-On (SSO) service.</span></span> <span data-ttu-id="366bf-391">[指定 SSO 管理员帐户和关联管理员帐户](../core/how-to-specify-sso-administrators-and-affiliate-administrators-accounts.md)提供了更多信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-391">[Specify SSO Administrator and Affiliate Administrators Accounts](../core/how-to-specify-sso-administrators-and-affiliate-administrators-accounts.md) has more information.</span></span> | <span data-ttu-id="366bf-392">包含企业单一登录服务的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-392">Contains service accounts for Enterprise Single Sign-On service.</span></span> <span data-ttu-id="366bf-393">包含需要能够配置和管理 BizTalk Server 和 SSO 服务的用户/组。包含用于在配置 SSO 主密钥服务器时运行 BizTalk 配置管理器的帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-393">Contains users/groups that need to be able to configure and administer BizTalk Server and SSO service.Contains accounts used to run BizTalk Configuration Manager when configuring SSO master secret server.</span></span> | <span data-ttu-id="366bf-394">**db_owner** sso 的 SQL Server 数据库角色</span><span class="sxs-lookup"><span data-stu-id="366bf-394">**db_owner** SQL Server Database Role for the SSO</span></span> <br/><br/><span data-ttu-id="366bf-395">**securityadmin** SSO 所在的 SQL server 的 SQL Server 角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-395">**securityadmin** SQL Server Role for the SQL Server where SSO is located.</span></span> |
| <span data-ttu-id="366bf-396">SSO Affiliate Administrators</span><span class="sxs-lookup"><span data-stu-id="366bf-396">SSO Affiliate Administrators</span></span> | <span data-ttu-id="366bf-397">某些 SSO 关联应用程序的管理员。</span><span class="sxs-lookup"><span data-stu-id="366bf-397">Administrators of certain SSO affiliate applications.</span></span> <span data-ttu-id="366bf-398">他们能够创建/删除 SSO 关联应用程序，管理用户映射，以及为关联应用程序用户设置凭据。</span><span class="sxs-lookup"><span data-stu-id="366bf-398">Can create/delete SSO affiliate applications, administer user mappings, and set credentials for affiliate application users.</span></span> | <span data-ttu-id="366bf-399">不包含服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-399">Contains no service accounts.</span></span> <span data-ttu-id="366bf-400">包含 BizTalk Server 管理员使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-400">Contains account used for BizTalk Server Administrators.</span></span>| |
|<span data-ttu-id="366bf-401">BizTalk Server Administrators</span><span class="sxs-lookup"><span data-stu-id="366bf-401">BizTalk Server Administrators</span></span> | <span data-ttu-id="366bf-402">具有执行管理任务所需的最少权限。</span><span class="sxs-lookup"><span data-stu-id="366bf-402">Has the fewest privileges necessary to perform administrative tasks.</span></span> <span data-ttu-id="366bf-403">可以部署解决方案，管理应用程序并解决在消息处理过程中出现的问题。</span><span class="sxs-lookup"><span data-stu-id="366bf-403">Can deploy solutions, manage applications, and resolve message processing issues.</span></span> <span data-ttu-id="366bf-404">若要执行关于适配器、接收处理程序、发送处理程序和接收位置的管理任务，则必须将 BizTalk Server Administrators 的成员添加到 Single Sign-On Affiliate Administrators 中。</span><span class="sxs-lookup"><span data-stu-id="366bf-404">To perform administrative tasks for adapters, receive and send handlers, and receive locations, the BizTalk Server Administrators must be added to the Single Sign-On Affiliate Administrators.</span></span> <span data-ttu-id="366bf-405">请参阅[管理 BizTalk Server 安全性](../core/managing-biztalk-server-security.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-405">See [Manage BizTalk Server Security](../core/managing-biztalk-server-security.md).</span></span> | <span data-ttu-id="366bf-406">包含配置和管理 BizTalk Server 所需的用户/组。</span><span class="sxs-lookup"><span data-stu-id="366bf-406">Contains users/groups that need to be able to configure and administer BizTalk Server.</span></span> | <span data-ttu-id="366bf-407">**BTS_ADMIN_USERS**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-407">**BTS_ADMIN_USERS** SQL Server Database Role in the following databases:</span></span><br/><span data-ttu-id="366bf-408">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-408">BizTalkMgmtDb</span></span><br/><span data-ttu-id="366bf-409">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-409">BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="366bf-410">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-410">BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="366bf-411">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-411">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-412">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-412">BAMPrimaryImport</span></span><br/><br/><span data-ttu-id="366bf-413">**db_owner**以下数据库的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-413">**db_owner** SQL Server Database Role for the following databases:</span></span><br/><span data-ttu-id="366bf-414">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="366bf-414">BAMStarSchema</span></span><br/><span data-ttu-id="366bf-415">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-415">BAMPrimaryImport</span></span><br/><span data-ttu-id="366bf-416">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="366bf-416">BAMArchive</span></span><br/><span data-ttu-id="366bf-417">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="366bf-417">BAMAlertsApplication</span></span><br/><span data-ttu-id="366bf-418">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="366bf-418">BAMAlertsNSMain</span></span><br/><br/><span data-ttu-id="366bf-419">**NSAdmin**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-419">**NSAdmin** SQL Server Database Role in the following databases:</span></span> <br/><span data-ttu-id="366bf-420">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="366bf-420">BAMAlertsApplication</span></span><br/><span data-ttu-id="366bf-421">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="366bf-421">BAMAlertsNSMain</span></span><br/><br/><span data-ttu-id="366bf-422">以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-422">SQL Server Database Role in the following databases:</span></span> <br/><span data-ttu-id="366bf-423">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-423">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-424">BizTalkMgmtDb。</span><span class="sxs-lookup"><span data-stu-id="366bf-424">BizTalkMgmtDb.</span></span> <br/><br/><span data-ttu-id="366bf-425">**OLAP 管理员**承载 BAMAnalysis OLAP 数据库的计算机上。</span><span class="sxs-lookup"><span data-stu-id="366bf-425">**OLAP Administrators** on the computer that hosts the BAMAnalysis OLAP database.</span></span> |
| <span data-ttu-id="366bf-426">BizTalk Server Operators</span><span class="sxs-lookup"><span data-stu-id="366bf-426">BizTalk Server Operators</span></span> | <span data-ttu-id="366bf-427">具有低权限角色，仅有权监视和故障排除操作。</span><span class="sxs-lookup"><span data-stu-id="366bf-427">Has a low privilege role with access only to monitoring and troubleshooting actions.</span></span> | <span data-ttu-id="366bf-428">包含监视解决方案的用户/组。</span><span class="sxs-lookup"><span data-stu-id="366bf-428">Contains user/groups that monitor solutions.</span></span> <span data-ttu-id="366bf-429">不包含服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-429">Contains no service accounts.</span></span> | <span data-ttu-id="366bf-430">**BTS_OPERATORS**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-430">**BTS_OPERATORS** SQL Server Database Role in the following databases:</span></span> <br/><span data-ttu-id="366bf-431">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-431">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-432">BizTalkEDIDb</span><span class="sxs-lookup"><span data-stu-id="366bf-432">BizTalkEDIDb</span></span><br/><span data-ttu-id="366bf-433">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-433">BizTalkMgmtDb</span></span><br/><span data-ttu-id="366bf-434">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-434">BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="366bf-435">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-435">BizTalkRuleEngineDb</span></span> | 
| <span data-ttu-id="366bf-436">BizTalk Application Users</span><span class="sxs-lookup"><span data-stu-id="366bf-436">BizTalk Application Users</span></span> | <span data-ttu-id="366bf-437">由配置管理器创建的首个进程内 BizTalk 主机组的默认名称。</span><span class="sxs-lookup"><span data-stu-id="366bf-437">The default name of the first In-Process BizTalk Host Group created by Configuration Manager.</span></span> <span data-ttu-id="366bf-438">在你的环境中每个进程内主机将使用一个 BizTalk 主机组。</span><span class="sxs-lookup"><span data-stu-id="366bf-438">Use one BizTalk Host Group for each In-Process host in your environment.</span></span> <span data-ttu-id="366bf-439">包含能够访问进程内 BizTalk 主机（BizTalk Server 中的主机进程 BTSNTSvc.exe）的帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-439">Includes accounts with access to In-Process BizTalk Hosts (hosts processes in BizTalk Server, BTSNTSvc.exe).</span></span> | <span data-ttu-id="366bf-440">包含在进程内 BizTalk 主机实例和 BizTalk 主机组所属主机中的 BizTalk 规则引擎服务的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-440">Contains service accounts for the BizTalk In-Process host instance and BizTalk Rule Engine service in the host(s) that the BizTalk Host Group is designated for.</span></span>  | <span data-ttu-id="366bf-441">**BTS_HOST_USERS**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-441">**BTS_HOST_USERS** SQL Server Database Role in the following databases:</span></span><br/><span data-ttu-id="366bf-442">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-442">BizTalkMgmtDb</span></span><br/><span data-ttu-id="366bf-443">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-443">BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="366bf-444">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-444">BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="366bf-445">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-445">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-446">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-446">BAMPrimaryImport</span></span><br/><br/> <span data-ttu-id="366bf-447">**BAM_EVENT_WRITER** BAMPrimaryImport 中的 SQL Server 数据库角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-447">**BAM_EVENT_WRITER** SQL Server Database Role in the BAMPrimaryImport.</span></span> | 
| <span data-ttu-id="366bf-448">BizTalk Isolated Host Users</span><span class="sxs-lookup"><span data-stu-id="366bf-448">BizTalk Isolated Host Users</span></span> | <span data-ttu-id="366bf-449">由配置管理器创建的首个独立 BizTalk 主机组的默认名称。</span><span class="sxs-lookup"><span data-stu-id="366bf-449">The default name of the first Isolated BizTalk Host Group created by Configuration Manager.</span></span> <span data-ttu-id="366bf-450">独立 BizTalk 主机指不在 BizTalk Server 上运行的 BizTalk 主机，例如 HTTP 和 SOAP。</span><span class="sxs-lookup"><span data-stu-id="366bf-450">Isolated BizTalk hosts not running on BizTalk Server, such as HTTP and SOAP.</span></span> <span data-ttu-id="366bf-451">在你的环境中每个独立主机将使用一个 BizTalk 独立主机组。</span><span class="sxs-lookup"><span data-stu-id="366bf-451">Use one BizTalk Isolated Host Group for each Isolated Host in your environment.</span></span> | <span data-ttu-id="366bf-452">包含独立 BizTalk 主机组所属主机中，BizTalk 独立主机实例的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-452">Contains service accounts for the BizTalk Isolated host instance in the host that the Isolated BizTalk Host Group is designated for.</span></span> | <span data-ttu-id="366bf-453">**BTS_HOST_USERS**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-453">**BTS_HOST_USERS** SQL Server Database Role in the following databases:</span></span><br/><span data-ttu-id="366bf-454">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-454">BizTalkMgmtDb</span></span><br/><span data-ttu-id="366bf-455">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-455">BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="366bf-456">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-456">BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="366bf-457">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-457">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-458">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-458">BAMPrimaryImport</span></span> | 
| <span data-ttu-id="366bf-459">EDI Subsystem Users</span><span class="sxs-lookup"><span data-stu-id="366bf-459">EDI Subsystem Users</span></span> | <span data-ttu-id="366bf-460">能够访问 EDI 数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-460">Has access to the EDI database.</span></span> | <span data-ttu-id="366bf-461">包含 BizTalk 基本 EDI 服务的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-461">Contains service accounts for BizTalk Base EDI service.</span></span> | <span data-ttu-id="366bf-462">**EDI_ADMIN_USERS** BizTalkEDIDb 中的 SQL Server 数据库角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-462">**EDI_ADMIN_USERS** SQL Server Database Role in the BizTalkEDIDb.</span></span> | 
| <span data-ttu-id="366bf-463">BAM Portal Users</span><span class="sxs-lookup"><span data-stu-id="366bf-463">BAM Portal Users</span></span> | <span data-ttu-id="366bf-464">有权访问 BAM 门户网站。</span><span class="sxs-lookup"><span data-stu-id="366bf-464">Has access to BAM Portal website.</span></span> | <span data-ttu-id="366bf-465">默认情况下，此角色使用 Everyone 组。</span><span class="sxs-lookup"><span data-stu-id="366bf-465">Everyone group is used for this role by default.</span></span> <span data-ttu-id="366bf-466">不包含服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-466">Contains no service accounts.</span></span> |  | 
| <span data-ttu-id="366bf-467">BizTalk SharePoint Adapter Enabled Hosts</span><span class="sxs-lookup"><span data-stu-id="366bf-467">BizTalk SharePoint Adapter Enabled Hosts</span></span> | <span data-ttu-id="366bf-468">能够访问 Windows SharePoint Services 适配器 Web Services。</span><span class="sxs-lookup"><span data-stu-id="366bf-468">Has access to Windows SharePoint Services Adapter Web Service.</span></span> | <span data-ttu-id="366bf-469">包含要使用 SharePoint 适配器的 BizTalk 主机实例的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-469">Contains service accounts for the BizTalk host instance to use the SharePoint Adapter.</span></span> |  | 
| <span data-ttu-id="366bf-470">BizTalk B2B Operators 组</span><span class="sxs-lookup"><span data-stu-id="366bf-470">BizTalk B2B Operators Group</span></span> | <span data-ttu-id="366bf-471">减轻管理员执行所有参与方管理操作 BizTalk 角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-471">A BizTalk role that reduces the onus on the Administrators to perform all Party management operation.</span></span> <span data-ttu-id="366bf-472">使用此角色，与该角色关联的 Windows 用户可以执行所有参与方管理操作。</span><span class="sxs-lookup"><span data-stu-id="366bf-472">This role allows windows users associated with the role to perform all party management operations.</span></span> | <span data-ttu-id="366bf-473">包含的用户/组必须能够配置和管理 BizTalk Server TPM 数据以及监视解决方案。</span><span class="sxs-lookup"><span data-stu-id="366bf-473">Contains users/groups that must be able to configure and administer BizTalk Server TPM data and monitor solutions.</span></span> | <span data-ttu-id="366bf-474">**BTS_OPERATORS**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-474">**BTS_OPERATORS** SQL Server Database Role in the following databases:</span></span> <br/><span data-ttu-id="366bf-475">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-475">BizTalkDTADb</span></span><br/><span data-ttu-id="366bf-476">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-476">BizTalkMgmtDb</span></span><br/><span data-ttu-id="366bf-477">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-477">BizTalkMsgBoxDb</span></span><br/><span data-ttu-id="366bf-478">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-478">BizTalkRuleEngineDb</span></span><br/><span data-ttu-id="366bf-479">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-479">BAMPrimaryImport</span></span> |

### <a name="user-and-service-accounts"></a><span data-ttu-id="366bf-480">用户帐户和服务帐户</span><span class="sxs-lookup"><span data-stu-id="366bf-480">User and Service Accounts</span></span>
<span data-ttu-id="366bf-481">下表列出了 BizTalk Server 所使用的 Windows 用户帐户或服务帐户以及组从属关系。</span><span class="sxs-lookup"><span data-stu-id="366bf-481">The following table lists the Windows user or service accounts and group affiliations used by BizTalk Server.</span></span> <span data-ttu-id="366bf-482">它还给出了这些帐户的 SQL Server 角色或数据库角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-482">It also identifies the SQL Server Roles or Database Roles for the accounts.</span></span>


|                  <span data-ttu-id="366bf-483">用户</span><span class="sxs-lookup"><span data-stu-id="366bf-483">User</span></span>                  |                                                                                                                   <span data-ttu-id="366bf-484">用户说明</span><span class="sxs-lookup"><span data-stu-id="366bf-484">User Description</span></span>                                                                                                                   |                  <span data-ttu-id="366bf-485">组从属关系</span><span class="sxs-lookup"><span data-stu-id="366bf-485">Group Affiliation</span></span>                   |                                                                                <span data-ttu-id="366bf-486">SQL Server 角色或数据库角色</span><span class="sxs-lookup"><span data-stu-id="366bf-486">SQL Server Roles or Database Roles</span></span>                                                                                |
|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   <span data-ttu-id="366bf-487">企业单一登录服务</span><span class="sxs-lookup"><span data-stu-id="366bf-487">Enterprise Single Sign-On Service</span></span>    |                                                                           <span data-ttu-id="366bf-488">用于运行企业单一登录服务，该服务会访问 SSO 数据库的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-488">Service account used to run Enterprise Single Sign-On Service, which accesses the SSO database.</span></span>                                                                            |                  <span data-ttu-id="366bf-489">SSO Administrators</span><span class="sxs-lookup"><span data-stu-id="366bf-489">SSO Administrators</span></span>                  |                                                                                                                                                                                                  |
|     <span data-ttu-id="366bf-490">BizTalk 主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="366bf-490">BizTalk Host Instance Account</span></span>      |                                                                                       <span data-ttu-id="366bf-491">用于运行 BizTalk 进程内主机实例 (BTNTSVC) 的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-491">Service account used to run BizTalk In-Process host instance (BTNTSVC).</span></span>                                                                                        |              <span data-ttu-id="366bf-492">BizTalk Application Users</span><span class="sxs-lookup"><span data-stu-id="366bf-492">BizTalk Application Users</span></span>               |                                                                                                                                                                                                  |
| <span data-ttu-id="366bf-493">BizTalk 独立主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="366bf-493">BizTalk Isolated Host Instance Account</span></span> |                                                                                       <span data-ttu-id="366bf-494">用于运行 BizTalk 独立主机实例 (HTTP/SOAP) 的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-494">Service account used to run BizTalk Isolated host instance (HTTP/SOAP).</span></span>                                                                                        |          <span data-ttu-id="366bf-495">BizTalk Isolated Host UsersIIS_WPG</span><span class="sxs-lookup"><span data-stu-id="366bf-495">BizTalk Isolated Host UsersIIS_WPG</span></span>          |                                                                                                                                                                                                  |
|       <span data-ttu-id="366bf-496">规则引擎更新服务</span><span class="sxs-lookup"><span data-stu-id="366bf-496">Rule Engine Update Service</span></span>       |                                               <span data-ttu-id="366bf-497">用于运行规则引擎更新服务（该服务从规则引擎数据库接收部署/取消部署策略的通知）的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-497">Service account used to run Rule Engine Update Service, which receives notifications to deployment/undeployment policies from the Rule engine database.</span></span>                                                |                                                      |                                                              <span data-ttu-id="366bf-498">**RE_HOST_USERS** BizTalkRuleEngineDb 中的 SQL Server 数据库角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-498">**RE_HOST_USERS** SQL Server Database Role in the BizTalkRuleEngineDb.</span></span>                                                              |
|     <span data-ttu-id="366bf-499">BAM Notification Services 用户</span><span class="sxs-lookup"><span data-stu-id="366bf-499">BAM Notification Services User</span></span>     |                                                                               <span data-ttu-id="366bf-500">用于运行 BAM 通知服务，访问 BAM 数据库的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-500">Service account used to run BAM Notification Services, which accesses the BAM databases.</span></span>                                                                               | <span data-ttu-id="366bf-501">SQLServer2005NotificationServicesUser $<ComputerName></span><span class="sxs-lookup"><span data-stu-id="366bf-501">SQLServer2005NotificationServicesUser$<ComputerName></span></span> | <span data-ttu-id="366bf-502">**NSRunService**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-502">**NSRunService** SQL Server Database Role in the following databases:</span></span><br/><span data-ttu-id="366bf-503">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="366bf-503">BAMAlertsApplication</span></span><br/><span data-ttu-id="366bf-504">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="366bf-504">BAMAlertsNSMain</span></span><br/><br/><span data-ttu-id="366bf-505">**BAM_ManagementNSReader** BAMPrimaryImport 的 SQL Server 角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-505">**BAM_ManagementNSReader** SQL Server role for the BAMPrimaryImport.</span></span> |
|    <span data-ttu-id="366bf-506">BAM 管理 Web Services 用户</span><span class="sxs-lookup"><span data-stu-id="366bf-506">BAM Management Web Service User</span></span>     | <span data-ttu-id="366bf-507">访问各种 BAM 资源的 BAM 管理 Web Services (BAMManagementService) 的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-507">User account for BAM Management Web service (BAMManagementService) to access various BAM resources.</span></span> <span data-ttu-id="366bf-508">BAM 门户调用 BAMManagementService（使用登录 BAM 门户的用户凭据）来管理警报、获取 BAM 定义 XML 和 BAM 视图。</span><span class="sxs-lookup"><span data-stu-id="366bf-508">BAM Portal calls BAMManagementService with the user credentials logged on the BAM Portal to manage alerts, get BAM definition XML and BAM views.</span></span> |                       <span data-ttu-id="366bf-509">IIS_WPG</span><span class="sxs-lookup"><span data-stu-id="366bf-509">IIS_WPG</span></span>                        | <span data-ttu-id="366bf-510">**NSSubscriberAdmin**以下数据库中的 SQL Server 数据库角色：</span><span class="sxs-lookup"><span data-stu-id="366bf-510">**NSSubscriberAdmin** SQL Server Database Role in the following databases:</span></span><br/><span data-ttu-id="366bf-511">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="366bf-511">BAMAlertsApplication</span></span><br/><span data-ttu-id="366bf-512">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="366bf-512">BAMAlertsNSMain</span></span><br/><br/><span data-ttu-id="366bf-513">**BAM_ManagementWS** BAMPrimaryImport 的 SQL Server 角色。</span><span class="sxs-lookup"><span data-stu-id="366bf-513">**BAM_ManagementWS** SQL Server role for the BAMPrimaryImport.</span></span>  |
|      <span data-ttu-id="366bf-514">BAM 应用程序池帐户</span><span class="sxs-lookup"><span data-stu-id="366bf-514">BAM Application Pool Account</span></span>      |                                                                                     <span data-ttu-id="366bf-515">BAMAppPool，承载 BAM 门户网站的应用程序池帐户。</span><span class="sxs-lookup"><span data-stu-id="366bf-515">Application pool account for BAMAppPool, which hosts the BAM Portal website.</span></span>                                                                                     |                       <span data-ttu-id="366bf-516">IIS_WPG</span><span class="sxs-lookup"><span data-stu-id="366bf-516">IIS_WPG</span></span>                        |                                                                                                                                                                                                  |

> [!IMPORTANT]
> <span data-ttu-id="366bf-517">有关 Windows 组和 BizTalk Server 中使用的服务帐户的详细信息，请参阅[Windows 组和 BizTalk Server 中的用户帐户](../core/windows-groups-and-user-accounts-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-517">For more information about Windows groups and service accounts used in BizTalk Server, see [Windows Groups and User Accounts in BizTalk Server](../core/windows-groups-and-user-accounts-in-biztalk-server.md).</span></span>

## <a name="databases-list"></a><span data-ttu-id="366bf-518">数据库列表</span><span class="sxs-lookup"><span data-stu-id="366bf-518">Databases list</span></span>
<span data-ttu-id="366bf-519">下面是 BizTalk Server 中使用的 SQL Server 数据库的列表：</span><span class="sxs-lookup"><span data-stu-id="366bf-519">The following is the list of SQL Server databases used in BizTalk Server:</span></span>

| <span data-ttu-id="366bf-520">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="366bf-520">Data store name</span></span> | <span data-ttu-id="366bf-521">默认数据库名称</span><span class="sxs-lookup"><span data-stu-id="366bf-521">Default database name</span></span> | <span data-ttu-id="366bf-522">数据量</span><span class="sxs-lookup"><span data-stu-id="366bf-522">Volume</span></span> | <span data-ttu-id="366bf-523">增长率</span><span class="sxs-lookup"><span data-stu-id="366bf-523">Growth</span></span> | <span data-ttu-id="366bf-524">Description</span><span class="sxs-lookup"><span data-stu-id="366bf-524">Description</span></span> | 
| ---|---|---|---|---|
| <span data-ttu-id="366bf-525">SSO 数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-525">SSO Database</span></span> | <span data-ttu-id="366bf-526">SSODB</span><span class="sxs-lookup"><span data-stu-id="366bf-526">SSODB</span></span> | <span data-ttu-id="366bf-527">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-527">Low</span></span> | <span data-ttu-id="366bf-528">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-528">Low</span></span> | <span data-ttu-id="366bf-529">此企业单一登录凭据数据库安全地存储了用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="366bf-529">This Enterprise Single Sign-On credential database securely stores the user name and password.</span></span>| 
| <span data-ttu-id="366bf-530">BizTalk 管理数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-530">BizTalk Management Database</span></span> | <span data-ttu-id="366bf-531">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="366bf-531">BizTalkMgmtDb</span></span> | <span data-ttu-id="366bf-532">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-532">Low</span></span> | <span data-ttu-id="366bf-533">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-533">Low</span></span> | <span data-ttu-id="366bf-534">此数据库是所有 BizTalk Server 实例的中央元信息存储区。</span><span class="sxs-lookup"><span data-stu-id="366bf-534">This database is the central meta-information store for all instances of BizTalk Server.</span></span>| 
| <span data-ttu-id="366bf-535">BizTalk MessageBox 数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-535">BizTalk MessageBox Database</span></span> | <span data-ttu-id="366bf-536">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="366bf-536">BizTalkMsgBoxDb</span></span> | <span data-ttu-id="366bf-537">High</span><span class="sxs-lookup"><span data-stu-id="366bf-537">High</span></span> | <span data-ttu-id="366bf-538">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-538">Medium</span></span> | <span data-ttu-id="366bf-539">BizTalk Server 引擎将此数据库用于路由、 排队、 实例管理和各种其他任务。</span><span class="sxs-lookup"><span data-stu-id="366bf-539">The BizTalk Server engine uses this database for routing, queuing, instance management, and various other tasks.</span></span><br/><br/><span data-ttu-id="366bf-540">**注意**</span><span class="sxs-lookup"><span data-stu-id="366bf-540">**Note**</span></span><br/><span data-ttu-id="366bf-541">自动更新统计信息、 自动创建统计信息和并行度设置都被故意禁用承载 BizTalk Server BizTalkMsgBoxDB 数据库的 SQL Server 数据库实例中。</span><span class="sxs-lookup"><span data-stu-id="366bf-541">Auto Update Statistics, Auto Create Statistics, and the Parallelism setting are purposely turned off in the SQL Server database instance that hosts the BizTalk Server BizTalkMsgBoxDB database.</span></span> <span data-ttu-id="366bf-542">请勿启用这些设置。</span><span class="sxs-lookup"><span data-stu-id="366bf-542">Do not enable these settings.</span></span> | 
| <span data-ttu-id="366bf-543">BizTalk 跟踪数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-543">BizTalk Tracking Database</span></span> | <span data-ttu-id="366bf-544">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="366bf-544">BizTalkDTADb</span></span> | <span data-ttu-id="366bf-545">High</span><span class="sxs-lookup"><span data-stu-id="366bf-545">High</span></span> | <span data-ttu-id="366bf-546">High</span><span class="sxs-lookup"><span data-stu-id="366bf-546">High</span></span> | <span data-ttu-id="366bf-547">此数据库存储 BizTalk Server 跟踪引擎所跟踪的业务数据和运行状况监视数据。</span><span class="sxs-lookup"><span data-stu-id="366bf-547">This database stores business and health monitoring data tracked by the BizTalk Server tracking engine.</span></span> | 
| <span data-ttu-id="366bf-548">规则引擎数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-548">Rule Engine Database</span></span> | <span data-ttu-id="366bf-549">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="366bf-549">BizTalkRuleEngineDb</span></span> | <span data-ttu-id="366bf-550">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-550">Low</span></span> | <span data-ttu-id="366bf-551">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-551">Low</span></span> | <span data-ttu-id="366bf-552">此数据库是策略库，策略是相关规则和词汇的集合。</span><span class="sxs-lookup"><span data-stu-id="366bf-552">This database is a repository for policies, which are sets of related rules and vocabularies.</span></span> <span data-ttu-id="366bf-553">词汇是用于在规则中进行数据引用的、特定于域的、用户友好名称集合。</span><span class="sxs-lookup"><span data-stu-id="366bf-553">Vocabularies are collections of user-friendly, domain-specific names for data references in rules.</span></span> | 
| <span data-ttu-id="366bf-554">BAM 主导入数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-554">BAM Primary Import Database</span></span> | <span data-ttu-id="366bf-555">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="366bf-555">BAMPrimaryImport</span></span> | <span data-ttu-id="366bf-556">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-556">Medium</span></span> | <span data-ttu-id="366bf-557">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-557">Medium</span></span> | <span data-ttu-id="366bf-558">此数据库收集原始 BAM 跟踪数据。</span><span class="sxs-lookup"><span data-stu-id="366bf-558">This database collects raw BAM tracking data.</span></span> | 
| <span data-ttu-id="366bf-559">BAM 存档数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-559">BAM Archive Database</span></span> | <span data-ttu-id="366bf-560">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="366bf-560">BAMArchive</span></span> | <span data-ttu-id="366bf-561">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-561">Medium</span></span> | <span data-ttu-id="366bf-562">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-562">Medium</span></span> | <span data-ttu-id="366bf-563">此数据库存档旧的业务活动数据。</span><span class="sxs-lookup"><span data-stu-id="366bf-563">This database archives old business activity data.</span></span> <span data-ttu-id="366bf-564">创建 BAM 存档数据库以最大程度减少 BAM 主导入数据库中的业务活动数据的累计。</span><span class="sxs-lookup"><span data-stu-id="366bf-564">Create a BAM Archive database to minimizes the accumulation of business activity data in the BAM Primary Import database.</span></span> | 
| <span data-ttu-id="366bf-565">BAM 星型架构数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-565">BAM Star Schema Database</span></span> | <span data-ttu-id="366bf-566">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="366bf-566">BAMStarSchema</span></span> | <span data-ttu-id="366bf-567">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-567">Medium</span></span> | <span data-ttu-id="366bf-568">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-568">Medium</span></span> | <span data-ttu-id="366bf-569">此数据库包含中间临时表、度量值表和维度表。</span><span class="sxs-lookup"><span data-stu-id="366bf-569">This database contains the staging table, and the measure and dimension tables.</span></span> | 
| <span data-ttu-id="366bf-570">BAM 通知服务应用程序数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-570">BAM Notification Services Application database</span></span> | <span data-ttu-id="366bf-571">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="366bf-571">BAMAlertsApplication</span></span> | <span data-ttu-id="366bf-572">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-572">Medium</span></span> | <span data-ttu-id="366bf-573">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-573">Medium</span></span> | <span data-ttu-id="366bf-574">此数据库包含用于 BAM 通知的警报信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-574">This database contains alert information for BAM notifications.</span></span> <span data-ttu-id="366bf-575">例如，在创建警报使用 BAM 门户时，会将条目插入此数据库中指定与警报相关，以及其他支持的数据警报的条件和事件。</span><span class="sxs-lookup"><span data-stu-id="366bf-575">For example, when you create an alert using the BAM portal, entries are inserted in this database that specify the conditions and events to which the alert pertains, as well as other supporting data for the alert.</span></span> | 
| <span data-ttu-id="366bf-576">BAM 通知服务实例数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-576">BAM Notification Services Instance database</span></span> | <span data-ttu-id="366bf-577">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="366bf-577">BAMAlertsNSMain</span></span> | <span data-ttu-id="366bf-578">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-578">Medium</span></span> | <span data-ttu-id="366bf-579">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-579">Medium</span></span> | <span data-ttu-id="366bf-580">此数据库包含指定 notification services 如何连接到 BAM 正在监视系统的实例信息。</span><span class="sxs-lookup"><span data-stu-id="366bf-580">This database contains instance information that specifies how the notification services connect to the system that BAM is monitoring.</span></span> | 

#### <a name="sql-server-databases-used-by-sharepoint"></a><span data-ttu-id="366bf-581">使用 SharePoint 的 SQL Server 数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-581">SQL Server databases used by SharePoint</span></span>

| <span data-ttu-id="366bf-582">数据存储区名称</span><span class="sxs-lookup"><span data-stu-id="366bf-582">Data store name</span></span> | <span data-ttu-id="366bf-583">默认数据库名称</span><span class="sxs-lookup"><span data-stu-id="366bf-583">Default database name</span></span> | <span data-ttu-id="366bf-584">数据量</span><span class="sxs-lookup"><span data-stu-id="366bf-584">Volume</span></span> | <span data-ttu-id="366bf-585">增长率</span><span class="sxs-lookup"><span data-stu-id="366bf-585">Growth</span></span> | <span data-ttu-id="366bf-586">Description</span><span class="sxs-lookup"><span data-stu-id="366bf-586">Description</span></span> | 
|---|---|---|---|---|
| <span data-ttu-id="366bf-587">Windows SharePoint Services 配置数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-587">Windows SharePoint Services configuration database</span></span> | <span data-ttu-id="366bf-588">用户定义</span><span class="sxs-lookup"><span data-stu-id="366bf-588">User-defined</span></span> | <span data-ttu-id="366bf-589">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-589">Low</span></span> | <span data-ttu-id="366bf-590">Low</span><span class="sxs-lookup"><span data-stu-id="366bf-590">Low</span></span> | <span data-ttu-id="366bf-591">此数据库包含服务器的所有全局设置。</span><span class="sxs-lookup"><span data-stu-id="366bf-591">This database contains all of the global settings for the server.</span></span> | 
| <span data-ttu-id="366bf-592">Windows SharePoint Services 内容数据库</span><span class="sxs-lookup"><span data-stu-id="366bf-592">Windows SharePoint Services content database</span></span> | <span data-ttu-id="366bf-593">用户定义</span><span class="sxs-lookup"><span data-stu-id="366bf-593">User-defined</span></span> | <span data-ttu-id="366bf-594">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-594">Medium</span></span> | <span data-ttu-id="366bf-595">Medium</span><span class="sxs-lookup"><span data-stu-id="366bf-595">Medium</span></span> | <span data-ttu-id="366bf-596">此数据库包含列表项和文档等所有站点内容。</span><span class="sxs-lookup"><span data-stu-id="366bf-596">This database contains all of the site content, such as list items and documents.</span></span> | 

## <a name="install-biztalk-a-multi-server-environment"></a><span data-ttu-id="366bf-597">安装 BizTalk 多服务器环境</span><span class="sxs-lookup"><span data-stu-id="366bf-597">Install BizTalk a multi-server environment</span></span>

1. <span data-ttu-id="366bf-598">**安装 Active Directory 域服务**-到多服务器环境中安装 BizTalk Server 所需的第一步是安装各种 BizTalk Server 组和帐户的 Active Directory 域服务。</span><span class="sxs-lookup"><span data-stu-id="366bf-598">**Install Active Directory Domain Services** - The first step required to install BizTalk Server into a multiple server environment is to install Active Directory domain services for the various BizTalk Server groups and accounts.</span></span> <span data-ttu-id="366bf-599">若要创建 Active Directory 域，请参阅以下内容：</span><span class="sxs-lookup"><span data-stu-id="366bf-599">To create the Active Directory domain, refer to the following:</span></span>

   - <span data-ttu-id="366bf-600">Windows Server 2012 及更高版本：[安装 Active Directory 域服务](https://docs.microsoft.com/windows-server/identity/ad-ds/deploy/install-active-directory-domain-services--level-100-)</span><span class="sxs-lookup"><span data-stu-id="366bf-600">Windows Server 2012 and newer: [Install Active Directory Domain Services](https://docs.microsoft.com/windows-server/identity/ad-ds/deploy/install-active-directory-domain-services--level-100-)</span></span>
   - <span data-ttu-id="366bf-601">Windows Server 2008 R2: [AD DS 安装和删除分步指南](https://technet.microsoft.com/library/cc755258(WS.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="366bf-601">Windows Server 2008 R2: [AD DS Installation and Removal Step-by-Step Guide](https://technet.microsoft.com/library/cc755258(WS.10).aspx)</span></span>

     > [!IMPORTANT]
     > <span data-ttu-id="366bf-602">BizTalk Server 组中所述**用户和服务帐户使用 BizTalk Server 中的**到多服务器环境中安装 BizTalk Server 之前，必须创建表 （在本主题中）。</span><span class="sxs-lookup"><span data-stu-id="366bf-602">The BizTalk Server groups described in the **User and Service Accounts Used In BizTalk Server** table (in this topic) must be created before installing BizTalk Server into a multiple server environment.</span></span>

2. <span data-ttu-id="366bf-603">**根据需要安装多个实例的 SQL Server** – 如果您的负载要求指示您需要多个 MessageBox 数据库或需要 BizTalk Server I/O 负载分散到多个 SQL Server 实例，然后安装更多 SQL Server所需的实例。</span><span class="sxs-lookup"><span data-stu-id="366bf-603">**Install Multiple Instances of SQL Server as needed** – If your load requirements dictate that you need multiple MessageBox databases or that you need to spread the BizTalk Server I/O load over multiple SQL Server instances, then install more SQL Server instances as required.</span></span> 

    <span data-ttu-id="366bf-604">有关测试您的 BizTalk Server 环境和数据库优化性能的详细信息，请参阅[BizTalk Server 性能优化指南](../technical-guides/biztalk-server-2013-performance-optimization-guide.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-604">For more information about performance testing your BizTalk Server environment, and database optimization, see the [BizTalk Server Performance Optimizations Guide](../technical-guides/biztalk-server-2013-performance-optimization-guide.md).</span></span> 

3. <span data-ttu-id="366bf-605">**根据需要安装多个 BizTalk Server 计算机到在 BizTalk Server 组**– 如果您的负载要求指示您需要多个 BizTalk Server 计算机到 BizTalk Server 组，然后使用 BizTalk Server Enterprise Edition 到多个 BizTalk 服务器上进行横向扩展处理要求。</span><span class="sxs-lookup"><span data-stu-id="366bf-605">**Install Multiple BizTalk Server computers into your BizTalk Server Group as needed** – If your load requirements dictate that you need multiple BizTalk Server computers into your BizTalk Server group, then use the BizTalk Server Enterprise Edition to scale out your processing requirements across multiple BizTalk Servers.</span></span> 

    > [!IMPORTANT]
    > <span data-ttu-id="366bf-606">BizTalk Server 的许多企业级别的功能（如群集、向组中添加多个服务器以及本机 64 位处理）只能通过企业版本的 BizTalk Server 获得。</span><span class="sxs-lookup"><span data-stu-id="366bf-606">Many of the Enterprise level features of BizTalk Server such as clustering, adding multiple servers to a group, and native 64-bit processing are only available with the Enterprise edition of BizTalk Server.</span></span>

4. <span data-ttu-id="366bf-607">**安装累积更新**-Windows Update 中列出累积更新。</span><span class="sxs-lookup"><span data-stu-id="366bf-607">**Install Cumulative Updates** - Cumulative updates are listed in Windows Update.</span></span> <span data-ttu-id="366bf-608">[KB article 2555976](http://support.microsoft.com/kb/2555976) 列出了可用的 Service Pack 和累积更新。</span><span class="sxs-lookup"><span data-stu-id="366bf-608">[KB article 2555976](http://support.microsoft.com/kb/2555976) lists available service packs and cumulative updates.</span></span>

## <a name="cluster-considerations"></a><span data-ttu-id="366bf-609">群集的注意事项</span><span class="sxs-lookup"><span data-stu-id="366bf-609">Cluster considerations</span></span>

- <span data-ttu-id="366bf-610">**群集 MSDTC** – Microsoft 分布式事务处理协调器 (MSDTC) 是任何 BizTalk Server 环境的中心组件。</span><span class="sxs-lookup"><span data-stu-id="366bf-610">**Clustering MSDTC** – The Microsoft Distributed Transaction Coordinator (MSDTC) is a central component of any BizTalk Server environment.</span></span> <span data-ttu-id="366bf-611">如果对 BizTalk Server 环境的其他组件进行了群集处理，建议也对 MSDTC 进行群集处理。</span><span class="sxs-lookup"><span data-stu-id="366bf-611">If other components of the BizTalk Server environment are clustered, it is recommended to also cluster MSDTC.</span></span> 

- <span data-ttu-id="366bf-612">**安装 SQL Server 故障转移群集**– 若要为 BizTalk Server 数据库提供高可用性/容错能力建议 SQL Server 故障转移群集上是否安装了 BizTalk Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="366bf-612">**Install SQL Server Failover Clustering** – To provide high availability/fault tolerance for the BizTalk Server databases, it is recommended that the BizTalk Server databases are installed on a SQL Server failover cluster.</span></span> <span data-ttu-id="366bf-613">有关安装 SQL Server 故障转移群集的信息，请参阅：</span><span class="sxs-lookup"><span data-stu-id="366bf-613">For information on installing SQL Server failover cluster, see:</span></span> 

  * <span data-ttu-id="366bf-614">SQL Server 2016: [Alwayson 故障转移群集实例 (SQL Server)](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server)</span><span class="sxs-lookup"><span data-stu-id="366bf-614">SQL Server 2016: [Always On Failover Cluster Instances (SQL Server)](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server)</span></span>
  * <span data-ttu-id="366bf-615">SQL Server 2014: [Windows Server 故障转移群集 (WSFC) 与 SQL Server](https://msdn.microsoft.com/library/ms189134(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="366bf-615">SQL Server 2014: [Windows Server Failover Clustering (WSFC) with SQL Server](https://msdn.microsoft.com/library/ms189134(v=sql.120).aspx)</span></span>

    <span data-ttu-id="366bf-616">一次 SQL Server 配置为高可用性/容错能力，则 SQL Server 群集的实例，可以引用就像任何其他 SQL Server 实例的 BizTalk Server 配置。</span><span class="sxs-lookup"><span data-stu-id="366bf-616">Once SQL Server is configured for high availability/fault tolerance, then the SQL Server clustered instance can be referenced just as any other SQL Server instance by the BizTalk Server configuration.</span></span>

- <span data-ttu-id="366bf-617">**将企业单一登录主密钥服务器配置为群集资源**– 企业单一登录主密钥服务器的故障可能会导致 BizTalk Server 环境的系统范围故障。</span><span class="sxs-lookup"><span data-stu-id="366bf-617">**Configure the Enterprise Single Sign-On Master Secret Server as a cluster resource** – A failure of the Enterprise Single Sign-On Master Secret Server can cause a system-wide failure of the BizTalk Server environment.</span></span> <span data-ttu-id="366bf-618">建议通过将主密钥服务器配置为群集资源来配置企业单一登录主密钥服务器的高可用性/容错能力。</span><span class="sxs-lookup"><span data-stu-id="366bf-618">It is recommended to configure the Enterprise Single Sign-On Master Secret Server for high availability/fault tolerance by configuring the Master Secret Server as a cluster resource.</span></span> <span data-ttu-id="366bf-619">由于主密钥服务器不是 BizTalk Server 环境的资源密集型组件，建议在 SQL Server 实例相同的群集节点上进行群集主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="366bf-619">Because the Master Secret Server is not a resource-intensive component of a BizTalk Server environment, it is recommended that the Master Secret Server be clustered on the same cluster nodes as the SQL Server instances.</span></span> <span data-ttu-id="366bf-620">有关企业单一登录主密钥服务器配置为群集资源的详细信息，请参阅[群集主密钥服务器](../core/how-to-cluster-the-master-secret-server1.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-620">For more information about configuring the Enterprise Single Sign-On Master Secret Server as a cluster resource, see [Cluster the Master Secret Server](../core/how-to-cluster-the-master-secret-server1.md).</span></span> 

- <span data-ttu-id="366bf-621">**将 BizTalk 主机配置为群集资源**– 运行 BizTalk Server 主机的多个实例提供高可用性/容错能力。</span><span class="sxs-lookup"><span data-stu-id="366bf-621">**Configure a BizTalk host as a cluster resource** – Running multiple instances of a BizTalk Server host provides high availability/fault tolerance.</span></span> <span data-ttu-id="366bf-622">因此，不建议将 BizTalk 主机配置为群集资源，特殊情况除外。</span><span class="sxs-lookup"><span data-stu-id="366bf-622">As a result, configuring a BizTalk host as a cluster resource is not recommended except in particular circumstances.</span></span> <span data-ttu-id="366bf-623">例如，你可以配置 BizTalk 主机作为群集资源时适应高可用性/容错能力，或者对于某些 BizTalk Server 适配器提供按序的送达。</span><span class="sxs-lookup"><span data-stu-id="366bf-623">For example, you can confgure a BizTalk host as a cluster resource when accommodating high availability/fault tolerance or for providing ordered delivery for certain BizTalk Server adapters.</span></span> <span data-ttu-id="366bf-624">有关何时适合将 BizTalk 主机配置为群集资源的详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-624">For more information about when it is appropriate to configure a BizTalk host as a cluster resource, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span> <span data-ttu-id="366bf-625">另请参阅[如何将 BizTalk 主机配置为群集资源](../core/how-to-configure-a-biztalk-host-as-a-cluster-resource1.md)。</span><span class="sxs-lookup"><span data-stu-id="366bf-625">Also see [How to Configure a BizTalk Host as a Cluster Resource](../core/how-to-configure-a-biztalk-host-as-a-cluster-resource1.md).</span></span> 

- <span data-ttu-id="366bf-626">**群集消息队列**– 请参阅[安装和群集 MSMQ](https://blogs.msdn.microsoft.com/biztalknotes/2013/03/20/how-to-install-and-cluster-msmq-on-windows-server-2012/)。</span><span class="sxs-lookup"><span data-stu-id="366bf-626">**Cluster Message Queuing** – See [install and cluster MSMQ](https://blogs.msdn.microsoft.com/biztalknotes/2013/03/20/how-to-install-and-cluster-msmq-on-windows-server-2012/).</span></span>

- <span data-ttu-id="366bf-627">**群集文件系统**– 请参阅[如何群集文件系统](http://go.microsoft.com/fwlink/p/?LinkId=189517)。</span><span class="sxs-lookup"><span data-stu-id="366bf-627">**Cluster the File System** – See [How to Cluster the File System](http://go.microsoft.com/fwlink/p/?LinkId=189517).</span></span>

## <a name="use-scom"></a><span data-ttu-id="366bf-628">使用 SCOM</span><span class="sxs-lookup"><span data-stu-id="366bf-628">Use SCOM</span></span>
<span data-ttu-id="366bf-629">BizTalk Server 管理包为 Operations Manager 提供了全面发现和监视 BizTalk Server 组件和在多台计算机中运行的应用程序。</span><span class="sxs-lookup"><span data-stu-id="366bf-629">The BizTalk Server Management Pack for Operations Manager provides comprehensive discovery and monitoring of BizTalk Server components and applications that are running in multiple machines.</span></span> <span data-ttu-id="366bf-630">有关 BizTalk Server 管理包的详细信息，请参阅 http://www.microsoft.com/download/details.aspx?id=39617 。</span><span class="sxs-lookup"><span data-stu-id="366bf-630">For more information about the BizTalk Server Management Pack, see http://www.microsoft.com/download/details.aspx?id=39617.</span></span>

## <a name="next"></a><span data-ttu-id="366bf-631">Next</span><span class="sxs-lookup"><span data-stu-id="366bf-631">Next</span></span>  
[<span data-ttu-id="366bf-632">配置 BizTalk</span><span class="sxs-lookup"><span data-stu-id="366bf-632">Configure BizTalk</span></span>](configure-biztalk-server.md)
