---
title: 配置批处理 (EDIFACT) |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f711ff4b-702b-419b-9c17-dce60ea437a0
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d68f1a40cbaeb95f7ee35e50c6a2dae256325d62
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65356308"
---
# <a name="configuring-batching-edifact"></a>配置批处理 (EDIFACT)
批处理定义如何[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]生成并发送 EDI 批到参与方。  
  
> [!IMPORTANT]
>  所有属性都禁用此页上，即使您清除**本地 BizTalk 处理参与方或支持来自此参与方发送消息的接收的消息**要为其创建的参与方时的复选框协议。 **新的批处理**此页上禁用按钮。  
>   
>  仅在与参与方所发送交换的属性相对应的单向协议选项卡上禁用这些属性。 例如，如果两个参与方 Party A 和参与方 B 创建和参与方 a 清除该复选框，**新的批处理**上禁用按钮**参与方 A-> 参与方 B**单向协议选项卡。  
  
## <a name="prerequisites"></a>先决条件  
 必须以成员的身份登录[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理员或[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]B2B Operators 组。  
  
### <a name="to-configure-batching-settings"></a>配置批处理设置  
  
1.  创建 EDIFACT 编码协议，如中所述[配置常规设置 (EDIFACT)](../core/configuring-general-settings-edifact.md)。 若要更新现有的协议，请右键单击中的协议**参与方和业务配置文件**页，然后单击**属性**。  
  
2.  在单向协议选项卡下**交换设置**部分中，单击**批处理配置**。  
  
3.  从**批配置**页上，单击**新的批处理**若要创建新的批处理配置。 一个**Batch1**添加选项卡。  
  
4.  在中**标识**部分的选项卡中，执行以下步骤：  
  
    1.  输入**批处理**名称。 此值用作此批处理配置的选项卡标识符。  
  
    2.  输入在此批处理配置的说明**批处理说明**。  
  
    3.  **批处理 ID**是应用批处理设置后，会显示的唯一批处理 ID 的只读文本框。  
  
    4.  **业务流程实例 ID**是显示批处理与之关联的批处理业务流程实例 ID 的只读文本框。 在批启动后，将显示业务流程实例 ID。  
  
5.  在中**筛选器**部分的选项卡中，执行以下步骤：  
  
    1.  单击**筛选器**。  
  
    2.  在中**批处理筛选器**对话框框中，输入属性、 运算符和值以生成批处理业务流程订阅筛选器。 这些筛选器子句用于确定路由业务流程将路由到 MessageBox 进行批处理的事务集。  
  
        > [!NOTE]
        >  若要指定给组的所有消息将进行都批处理，批处理将筛选器中的参与方名称设置的参与方属性。  
  
        > [!NOTE]
        >  有关批处理过程的详细信息，请参阅[装配批处理的 EDI 交换](../core/assembling-a-batched-edi-interchange.md)。  
  
    3.  若要删除的行，选择的行，然后单击**删除**。  
  
    4.  若要向上或向下移动一行，请单击**移**或**下移**按钮。  
  
6.  在中**版本**部分的选项卡中，执行以下步骤：  
  
    1.  选择**计划**创建并发送一批根据预先确定的计划。 若要定义计划，请单击**计划程序**，然后继续按如下所示：  
  
        > [!NOTE]
        >  批处理计划可能会受到特殊事件。 例如，夏时制的开始。 如果一批已计划按小时计费小于一小时的夏时制开始后，将不创建并发送后时钟已通过递增小时重置批处理。 可以通过单击结果中跳过批处理的特殊事件的补偿**启动**按钮**批处理**页后，可以手动开始批处理业务流程。 您可能还需要停止重复的批处理。  
  
        -   若要按小时发送一批，请选择**每小时**。 从下拉列表中为**首次发布**，选择首次发布批的日期，然后输入时间。 有关**后续发布每个**，从下拉列表中选择时间是否处于**小时**或**分钟**，然后输入小时数或将分钟数每次批。  
  
        -   每天发送一批，请选择**每日**。 从下拉列表中为**首次发布**，选择首次发布批的日期，然后输入时间。 有关**后续发布每个**，输入的每次批的天数。  
  
        -   每周都会发送一批，请选择**每周**。 从下拉列表中为**首次发布**，选择首次发布批的日期，然后输入时间。 有关**后续发布每个**，输入之间的周的第一次发布和各后续发布的一周的周数。 然后，选择在发布批内容每周天数。  
  
            > [!NOTE]
            >  将所做的日期和设置首次发布**首次发布**字段中，即使未在对话框中选择该日期是星期几。  
  
            > [!NOTE]
            >  如果在对话框中选择一个或多个星期几，将在第一周的第一个版本之后的任何所选一天进行发布。 例如，如果已选择星期一和星期五，并且首次发布时间是星期三，将在第一周的星期五进行发布。 后续版本将发生*n*周后第一周，与*n*中的值由决定**后续发布每个**字段。 版本将在对话框中选择一周中的每一天。  
  
        -   选择**发送空的批处理信号**根据计划发送批时批处理业务流程不收到任何消息发送空的批处理信号。  
  
    2.  选择**最大数量的事务集**来创建和发送批时一定数量的事务集或消息已路由到 MessageBox 进行批处理。 选择要计算其中事务的消息的一部分设置中 (任一**组**或**交换**)，然后输入批处理的组或交换中事务集的最大数目。  
  
         例如，如果你想要两个交换组成一个批次选择**交换**从下拉列表，然后输入`2`在文本框中。  
  
    3.  选择**交换中的字符的最大数量**来创建和发送批时特定数目的字符是可用于批处理。 输入批处理的组或交换中的最大字符数。  
  
         批处理业务流程将累计批处理元素，直到这些元素 （减去信封中的计数） 中的字符数超过最大计数。 它然后将除最后一个元素 （会导致计数超过最大计数） 之外的所有批处理。  
  
        > [!NOTE]
        >  对于最大字符数，输入足够大，以生成有意义的批。 该数字至少应大于批头部中的字符总数和最大消息中的字符数。 太小的数字可能会导致空的批处理。  
  
    4.  选择**外部发布触发器**创建并随后发送批时由 BizTalk Server 外部的应用程序执行外部触发器。 有关如何设置此机制的详细信息，请参阅[实现外部批处理发布机制](../core/implementing-an-external-batch-release-mechanism.md)。  
  
        > [!NOTE]
        >  **重写**按钮并**激活范围**控件仍将有效如果**外部发布**选择触发器属性。  
  
7.  在中**激活**部分的选项卡中，执行以下步骤：  
  
    1.  选择**立即开始**以让批处理业务流程立即开始批处理消息。  
  
         若要在特定日期开始批处理业务流程，清除**立即开始**框并选择一个日期和时间来激活批处理业务流程。  
  
8.  在中**终止**部分的选项卡中，执行以下步骤：  
  
    1.  保持**无结束日期**选择如果不想指定将停用批处理业务流程的结束日期。  
  
    2.  选择**结束前的 （出现）** 指定批处理业务流程，将生成一定数量的批之后停用状态。 输入所需在文本框中的编号。  
  
    3.  选择**结束**以指定将停用批处理业务流程的结束日期。 消息将不再收集用于批处理截至这一次。 从日历中选择的结束日期或直接在文本框中更改的日期或时间。  
  
9. 单击**应用**以便将你在上一步骤中提供的批处理设置。 单击后**Apply**，批处理 ID 创建和显示在**批处理 ID**中的文本字段**标识**部分。  
  
    > [!NOTE]
    >  一条消息**激活批处理**下将显示**启动**按钮。  
  
10. 单击**启动**手动激活批处理业务流程。  
  
    > [!NOTE]
    >  若要确保，批处理业务流程将立即激活单击时**启动**按钮，更新 BatchControlMessageReccvLoc 中的 SQL 适配器接收位置的轮询间隔。 有关详细信息，请参阅[演练 (X12):发送批处理 EDI 交换](../core/walkthrough-x12-sending-batched-edi-interchanges.md)。  
  
    > [!NOTE]
    >  单击后**启动**，单击**刷新**。 可能需要一段时间才能将批与业务流程实例相关联。 如果单击**刷新**批与业务流程关联之前，请参阅消息**批处理已激活批处理业务流程尚未实例化**。 单击**刷新**再次以查看关联的业务流程实例 ID**业务流程实例 ID**文本框。 消息**激活批处理**下显示**启动**按钮。  
  
11. 单击**重写**到强制批处理业务流程发送一批，指示是否已满足发布条件。 使用此选项将重写现有批条件，使用结果一批是使用现有元素创建并立即发送。 在此之后，批处理业务流程继续进行批处理根据已建立的设置。  
  
12. 单击**停止**而无需发送一批终止活动批处理业务流程，然后手动停用批处理业务流程。  
  
13. 单击**刷新**刷新批处理业务流程的状态。  
  
    > [!NOTE]
    >  您可以使用顶部的下拉列表**批配置**页来筛选显示选择的批处理配置选项卡**所有**（若要查看所有批的选项卡），**活动**（若要查看活动的批处理的选项卡），或**非活动**（若要查看用于非活动批的选项卡）。  
  
    > [!NOTE]
    >  如果在业务流程正在处理一批更改配置设置，新设置将不会应用到该批。 这可能导致发送管道中的验证错误。  
  
    > [!NOTE]
    >  若要激活批处理业务流程参与方的加速开发服务器上，可以缩短轮询间隔为批处理 SQL 适配器接收位置 (BatchControlMessageRecvLoc) 该服务器上。 我们建议你将开发服务器将轮询间隔设置为 30 秒。  
  
14. 单击**确定**以验证所做的更改，然后关闭对话框。  
  
## <a name="see-also"></a>请参阅  
 [配置交换设置 (EDIFACT)](../core/configuring-interchange-settings-edifact.md)