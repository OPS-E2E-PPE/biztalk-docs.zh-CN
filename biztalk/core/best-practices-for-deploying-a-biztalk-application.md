---
title: 部署 BizTalk 应用程序的最佳实践 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- best practices, deploying
- best practices, applications
- applications, best practices
- deploying, best practices
ms.assetid: 97ebf479-0dc5-4e95-b409-d3b6ad3d60d0
caps.latest.revision: 24
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3b50ff0a6e64633090e562b6ca8e3ae66eb8683
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22233061"
---
# <a name="best-practices-for-deploying-a-biztalk-application"></a><span data-ttu-id="102b5-102">部署 BizTalk 应用程序的最佳做法</span><span class="sxs-lookup"><span data-stu-id="102b5-102">Best Practices for Deploying a BizTalk Application</span></span>
<span data-ttu-id="102b5-103">本主题介绍部署 BizTalk 应用程序的最佳实践。</span><span class="sxs-lookup"><span data-stu-id="102b5-103">This topic describes best practices for deploying a BizTalk application.</span></span>  
  
## <a name="group-related-artifacts-together-in-a-single-application"></a><span data-ttu-id="102b5-104">分组在一起在单个应用程序的相关的项目</span><span class="sxs-lookup"><span data-stu-id="102b5-104">Group related artifacts together in a single application</span></span>  
 <span data-ttu-id="102b5-105">尽可能将相关项目放在同一个 BizTalk 应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-105">As much as possible, place related artifacts in the same BizTalk application.</span></span> <span data-ttu-id="102b5-106">这样可以将各个项目作为单一实体进行管理和部署，从而更易于管理。</span><span class="sxs-lookup"><span data-stu-id="102b5-106">This allows you to manage and deploy the artifacts as a single entity, making management easier.</span></span> <span data-ttu-id="102b5-107">可以将支持同一业务流程的项目或执行类似功能的项目分组到一个应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-107">You can group artifacts that support the same business process or artifacts that perform similar functions into a single application.</span></span>  
  
## <a name="deploy-shared-artifacts-in-a-separate-application"></a><span data-ttu-id="102b5-108">部署在单独的应用程序中的共享的项目</span><span class="sxs-lookup"><span data-stu-id="102b5-108">Deploy shared artifacts in a separate application</span></span>  
 <span data-ttu-id="102b5-109">如果某些项目将由两个或多个应用程序共享，则应将这些共享项目部署在一个单独的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-109">If artifacts are going to be shared by two or more applications, deploy the shared artifacts into a separate application.</span></span> <span data-ttu-id="102b5-110">例如，如果两个应用程序共享一个架构，应将该架构部署在一个单独的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-110">For example, if two applications share a schema, place the schema in a separate application.</span></span> <span data-ttu-id="102b5-111">这是因为在 BizTalk 组中只能有一个项目具有本地唯一标识符 (LUID) -- 由项目名称和可选的其他属性组成。</span><span class="sxs-lookup"><span data-stu-id="102b5-111">This is because only one artifact having the same locally unique identifier (LUID) -- which consists of the artifact name and optionally other attributes -- can exist in a BizTalk group.</span></span> <span data-ttu-id="102b5-112">如果您在一个应用程序中包括了某个项目，然后在另一个应用程序中创建了对该项目的引用，则当包含该项目的应用程序停止时，您可能会遇到问题（比如进行引用的应用程序不能正常工作）。</span><span class="sxs-lookup"><span data-stu-id="102b5-112">If you include an artifact in one application, and then create a reference to it from another application, you may encounter problems such as the referring application not functioning correctly when you stop the application containing the artifact.</span></span>  
  
 <span data-ttu-id="102b5-113">此最佳实践适用于所有项目类型，但文件除外（比如 Readme 文件和脚本，它们是以文件类型的项目添加到应用程序中的）。</span><span class="sxs-lookup"><span data-stu-id="102b5-113">This best practice applies to all artifact types except for files, such as Readme files and scripts, which are added to the application as a File type of artifact.</span></span> <span data-ttu-id="102b5-114">这是因为可以在 BizTalk 组中部署具有相同名称的多个文件项目。</span><span class="sxs-lookup"><span data-stu-id="102b5-114">This is because more than one file artifact having the same name can be deployed in a BizTalk group.</span></span> <span data-ttu-id="102b5-115">因此，您可以在两个或多个应用程序中使用具有相同名称的文件。</span><span class="sxs-lookup"><span data-stu-id="102b5-115">Therefore, you can use a file having the same name in two or more applications.</span></span> <span data-ttu-id="102b5-116">停止一个应用程序不会影响另一个应用程序。</span><span class="sxs-lookup"><span data-stu-id="102b5-116">Stopping one application will not impact the other application.</span></span> <span data-ttu-id="102b5-117">有关添加文件项目的详细信息，请参阅[如何将文件添加到应用程序](../core/how-to-add-a-file-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="102b5-117">For more information about adding File artifacts, see [How to Add a File to an Application](../core/how-to-add-a-file-to-an-application.md).</span></span>  
  
 <span data-ttu-id="102b5-118">有关共享特定项目类型的最佳实践，请参阅本部分中的“将共享网站部署在单独的应用程序中”、“将共享策略部署在单独的应用程序中”和“将共享证书部署在单独的应用程序中”。</span><span class="sxs-lookup"><span data-stu-id="102b5-118">For best practices on sharing specific artifact types, see "Deploy a shared Web site in a separate application," "Deploy shared policies in a separate application," and "Deploy shared certificates in a separate application" in this section.</span></span>  
  
## <a name="deploy-a-shared-web-site-in-a-separate-application"></a><span data-ttu-id="102b5-119">部署单独的应用程序中的共享的 Web 站点</span><span class="sxs-lookup"><span data-stu-id="102b5-119">Deploy a shared Web site in a separate application</span></span>  
 <span data-ttu-id="102b5-120">如果某个网站将由多个业务解决方案共享，应将该网站部署在一个单独的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-120">If a Web site will be shared by more than one business solution, deploy the Web site in a separate application.</span></span> <span data-ttu-id="102b5-121">这是因为在卸载某个 BizTalk 应用程序时，作为该应用程序一部分的任何网站的虚拟目录也会被删除，尽管该网站正在运行。</span><span class="sxs-lookup"><span data-stu-id="102b5-121">This is because when you uninstall a BizTalk application, the virtual directory of any Web site that is part of the application is removed, even if the Web site is running.</span></span> <span data-ttu-id="102b5-122">如果该网站与另一个业务解决方案共享，则会导致这个业务解决方案不能正常工作。</span><span class="sxs-lookup"><span data-stu-id="102b5-122">If the Web site is shared with another business solution, the other business solution will no longer function correctly as a result.</span></span>  
  
## <a name="deploy-shared-policies-in-a-separate-application"></a><span data-ttu-id="102b5-123">部署在单独的应用程序中的共享的策略</span><span class="sxs-lookup"><span data-stu-id="102b5-123">Deploy shared policies in a separate application</span></span>  
 <span data-ttu-id="102b5-124">如果某个策略将由两个或多个应用程序使用，应将该策略部署在一个单独的应用程序中，而不是创建从一个应用程序到另一个应用程序的引用。</span><span class="sxs-lookup"><span data-stu-id="102b5-124">If a policy is used by two or more applications, you should deploy it in a separate application rather than creating a reference from one application to another.</span></span> <span data-ttu-id="102b5-125">这是因为当其中一个应用程序停止时，会取消部署其策略。</span><span class="sxs-lookup"><span data-stu-id="102b5-125">This is because when you stop an application, its policies are undeployed.</span></span> <span data-ttu-id="102b5-126">如果您停止一个应用程序，而该应用程序包含另一个程序所使用的策略，则该策略将不能在另一个应用程序中起作用。</span><span class="sxs-lookup"><span data-stu-id="102b5-126">If you stop an application that includes a policy used by another application, the policy will no longer function in either application.</span></span>  
  
## <a name="deploy-shared-certificates-in-a-separate-application"></a><span data-ttu-id="102b5-127">部署在单独的应用程序中的共享的证书</span><span class="sxs-lookup"><span data-stu-id="102b5-127">Deploy shared certificates in a separate application</span></span>  
 <span data-ttu-id="102b5-128">如果某个证书由两个或多个应用程序的发送端口或接收位置使用，应将该证书部署在一个单独的应用程序中，然后从需要使用该证书的应用程序中引用该程序。</span><span class="sxs-lookup"><span data-stu-id="102b5-128">If a certificate is used by a send port or receive location in two or more applications, you should deploy the certificate in a separate application, and then reference this application from the applications that need to use the certificate.</span></span> <span data-ttu-id="102b5-129">这是因为 BizTalk 组中只能有一个项目具有特定的 LUID，因此您不能将同一个证书导入到两个不同的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-129">This is because only one artifact having a particular LUID can exist in the BizTalk group, so you will not be able to import the same certificate in two different applications.</span></span> <span data-ttu-id="102b5-130">如果尝试导入两个使用同一证书的应用程序，则第一个导入将会成功，而第二个导入将会失败。</span><span class="sxs-lookup"><span data-stu-id="102b5-130">If you attempt to import two applications that each use the same certificate, the first import will succeed, and the second will not.</span></span> <span data-ttu-id="102b5-131">在这种情况下，使用“覆盖”导入选项并不能解决问题，因为您要覆盖的现有证书包含在另一个应用程序中。</span><span class="sxs-lookup"><span data-stu-id="102b5-131">In this case, using the Overwrite import option does not correct the problem, as the existing certificate that you want to overwrite is contained in another application.</span></span>  
  
## <a name="never-deploy-an-assembly-from-visual-studio-on-a-production-computer"></a><span data-ttu-id="102b5-132">且勿将 Visual Studio 中的程序集部署在生产计算机上</span><span class="sxs-lookup"><span data-stu-id="102b5-132">Never deploy an assembly from Visual Studio on a production computer</span></span>  
 <span data-ttu-id="102b5-133">在开发过程中，开发人员经常需要重新部署 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 中的程序集。</span><span class="sxs-lookup"><span data-stu-id="102b5-133">During the development process, the developer often must redeploy assemblies from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="102b5-134">为了进行重新部署，[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 会对程序集中包括的项目取消部署、取消绑定、停止并取消登记。</span><span class="sxs-lookup"><span data-stu-id="102b5-134">To enable the redeployment, [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] may undeploy, unbind, stop, and unenlist artifacts included in the assemblies.</span></span> <span data-ttu-id="102b5-135">虽然在部署环境中这样做是必要和适当的，但在生产环境中会产生意外和不需要的结果。</span><span class="sxs-lookup"><span data-stu-id="102b5-135">Although this is necessary and appropriate in the development environment, it can cause unexpected and undesired consequences in a production environment.</span></span> <span data-ttu-id="102b5-136">因此，为了避免可能有人尝试在生产计算机上部署 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 中的程序集，建议您永远也不要在生产计算机上安装 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="102b5-136">For this reason, as well as to avoid the possibility of anyone's attempting to deploy an assembly from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] on a production computer, we recommend that you never install [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] on a production computer.</span></span>  
  
 <span data-ttu-id="102b5-137">另外，不要从运行 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 的计算机中引用生产数据库。</span><span class="sxs-lookup"><span data-stu-id="102b5-137">In addition, never refer to a production database from a computer running [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span>  
  
## <a name="when-deploying-large-msi-files-you-may-need-to-increase-the-default-transaction-timeout-of-the-com-components-used-by-biztalk-to-deploy-applications"></a><span data-ttu-id="102b5-138">部署大的 MSI 文件时，可能需要增大 BizTalk 用于部署应用程序的 COM+ 组件的默认事务超时值。</span><span class="sxs-lookup"><span data-stu-id="102b5-138">When deploying large MSI files, you may need to increase the default transaction timeout of the COM+ components used by BizTalk to deploy applications</span></span>  
 <span data-ttu-id="102b5-139">如果要部署的 MSI 文件很大（超过 100 MB），则在应用程序部署过程中，在 BizTalk 所使用的 COM+ 组件的默认事务超时时间内可能无法部署完应用程序。</span><span class="sxs-lookup"><span data-stu-id="102b5-139">If the MSI file being deployed is very large (over 100 MB) then the application may not be deployed within the default transaction timeout of the COM+ components that are used by BizTalk during application deployment.</span></span> <span data-ttu-id="102b5-140">如果在部署完成之前，与这些 COM+ 组件相关联的事务超时，则部署将失败。</span><span class="sxs-lookup"><span data-stu-id="102b5-140">If the transactions associated with these COM+ components time out before the deployment is completed then the deployment will fail.</span></span> <span data-ttu-id="102b5-141">如果要部署很大的 MSI 文件，则应考虑采用以下方法之一以缓解此问题：</span><span class="sxs-lookup"><span data-stu-id="102b5-141">If you are deploying very large MSI files then consider taking one of these approaches to mitigate this problem:</span></span>  
  
1.  <span data-ttu-id="102b5-142">部署多个较小的 MSI 文件，而不是部署一个很大的 MSI 文件。</span><span class="sxs-lookup"><span data-stu-id="102b5-142">Deploy several smaller MSI files instead of one large MSI file.</span></span>  
  
2.  <span data-ttu-id="102b5-143">增加 3000 秒与关联的默认事务超时**Microsoft.BizTalk.ApplicationDeployment.Group**和**Microsoft.BizTalk.Deployment.DeployerComponent**中的组件**组件服务**管理界面。</span><span class="sxs-lookup"><span data-stu-id="102b5-143">Increase the default transaction timeout of 3000 seconds associated with the **Microsoft.BizTalk.ApplicationDeployment.Group** and the **Microsoft.BizTalk.Deployment.DeployerComponent** components in the **Component Services** management interface.</span></span> <span data-ttu-id="102b5-144">这些组件属于**Microsoft.BizTalk.ApplicationDeployment.Engine**和**Microsoft.Biztalk.Deployment** COM + 应用程序分别。</span><span class="sxs-lookup"><span data-stu-id="102b5-144">These components belong to the **Microsoft.BizTalk.ApplicationDeployment.Engine** and **Microsoft.Biztalk.Deployment** COM+ applications respectively.</span></span> <span data-ttu-id="102b5-145">有关如何更改事务的详细信息请参阅 COM + 组件的超时值[如何更改事务超时值 MTS 或 COM +](http://go.microsoft.com/fwlink/?LinkId=67691)。</span><span class="sxs-lookup"><span data-stu-id="102b5-145">For more information about how to change the transaction time out value for a COM+ component see [How To Change the Transaction Time-Out Value for MTS or COM+](http://go.microsoft.com/fwlink/?LinkId=67691).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="102b5-146">另请参阅</span><span class="sxs-lookup"><span data-stu-id="102b5-146">See Also</span></span>  
 [<span data-ttu-id="102b5-147">部署和管理 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="102b5-147">Deploying and Managing BizTalk Applications</span></span>](../core/deploying-and-managing-biztalk-applications.md)