---
title: 参与方解析管道组件 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6ad728ff-4d7c-4ab3-af0e-76006576dce5
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1307238dea03b2cc7fd35e0d6586c5cd6f2638e4
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65395026"
---
# <a name="party-resolution-pipeline-component"></a><span data-ttu-id="7bf03-102">参与方解析管道组件</span><span class="sxs-lookup"><span data-stu-id="7bf03-102">Party Resolution Pipeline Component</span></span>

## <a name="overview"></a><span data-ttu-id="7bf03-103">概述</span><span class="sxs-lookup"><span data-stu-id="7bf03-103">Overview</span></span>
<span data-ttu-id="7bf03-104">参与方解析管道组件的职责是发件人证书或发件人安全标识符 (SID) 映射到相应的已配置 BizTalk Server 参与方。</span><span class="sxs-lookup"><span data-stu-id="7bf03-104">The responsibility of the Party Resolution pipeline component is to map the sender certificate or the sender security identifier (SID) to the corresponding configured BizTalk Server party.</span></span>  

 <span data-ttu-id="7bf03-105">当参与方解析组件读取传入消息时，它使用两个消息上下文属性作为输入：**WindowsUser**并**SignatureCertificate**。</span><span class="sxs-lookup"><span data-stu-id="7bf03-105">When the Party Resolution component reads the incoming message, it takes two message context properties as input: **WindowsUser** and **SignatureCertificate**.</span></span> <span data-ttu-id="7bf03-106">**WindowsUser**适配器，或通过自定义管道组件，它可以可靠地派生发件人信息的发送程序的用户名填充属性。</span><span class="sxs-lookup"><span data-stu-id="7bf03-106">The **WindowsUser** property is populated by the adapter, or by a custom pipeline component, with the user name of the sender when it can reliably derive the sender information.</span></span> <span data-ttu-id="7bf03-107">**SignatureCertificate**填充由适配器或 MIME/SMIME 解码器管道组件使用的客户端身份验证证书的指纹。</span><span class="sxs-lookup"><span data-stu-id="7bf03-107">The **SignatureCertificate** is populated by the adapter or the MIME/SMIME Decoder pipeline component with the thumbprint of the client authentication certificate.</span></span>  

 <span data-ttu-id="7bf03-108">如果对消息进行签名，然后使用用于验证入站消息上的签名的证书的指纹的参与方与关联的配置存储库中查找。</span><span class="sxs-lookup"><span data-stu-id="7bf03-108">If the message is signed, the thumbprint of the certificate that was used to validate the signature on the inbound message is then used to look in the Configuration Repository to determine which party it is associated with.</span></span> <span data-ttu-id="7bf03-109">如果找到参与方，则该参与方的 SourcePartyID 作为消息的发信方放置在消息的上下文中。</span><span class="sxs-lookup"><span data-stu-id="7bf03-109">If a party is found, the SourcePartyID for that party is placed in the context of the message as the originator of the message.</span></span>  

 <span data-ttu-id="7bf03-110">若要启用参与方解析管道组件以验证 Windows 用户，必须向参与方添加"WindowsUser"别名。</span><span class="sxs-lookup"><span data-stu-id="7bf03-110">To enable the Party Resolution pipeline component to validate a Windows user, you must add the "WindowsUser" alias to a party.</span></span> <span data-ttu-id="7bf03-111">在名称和限定符字段中键入"WindowsUser"，并将值设置为中的格式的用户名\<域 \ 用户名\>(例如 SOMEDOMAIN\someuser)。</span><span class="sxs-lookup"><span data-stu-id="7bf03-111">Type "WindowsUser" in the Name and Qualifier fields and set the Value to a user name in format of \<domain\user name\> (e.g. SOMEDOMAIN\someuser).</span></span> <span data-ttu-id="7bf03-112">在独立方案中，用于配置参与方的 WindowsUser 值应与接收适配器设置的值匹配。</span><span class="sxs-lookup"><span data-stu-id="7bf03-112">In a stand-alone scenario, the WindowsUser value used to configure the party should match the value that is set by the receive adapter.</span></span>  

 <span data-ttu-id="7bf03-113">如果消息到达具有这两个标记的属性的参与方解析组件，参与方解析组件首先尝试通过证书解析参与方 (假设**通过证书解析参与方**属性设置为 **，则返回 True**)。</span><span class="sxs-lookup"><span data-stu-id="7bf03-113">If the message arrives at the Party Resolution component with both of the properties stamped, the Party Resolution component first tries to resolve the party by the certificate (assuming the **Resolve Party By Certificate** property is set to **True**).</span></span> <span data-ttu-id="7bf03-114">如果解析参与方后，该参与方的 SourcePartyID 将放在消息的上下文作为消息的 OriginatorPID 如果运行管道的主机进程标记为**受信任验证**由管道。</span><span class="sxs-lookup"><span data-stu-id="7bf03-114">If the party is resolved, the SourcePartyID for that party is placed in the context of the message as the OriginatorPID of the message if the host process running the pipeline is marked as **Authentication Trusted** by the pipeline.</span></span> <span data-ttu-id="7bf03-115">如果不能使用该证书完成参与方解析，对消息的 OriginatorPID 值均被标记为"s-1-5-7"，这是匿名用户的 SID。</span><span class="sxs-lookup"><span data-stu-id="7bf03-115">If the party resolution cannot be completed by using the certificate, the OriginatorPID value on the message is stamped with "s-1-5-7", which is the SID of an anonymous user.</span></span> <span data-ttu-id="7bf03-116">有关 OriginatorPID 属性的详细信息，请参阅[如何确保管道](../core/how-to-secure-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="7bf03-116">For more information about the OriginatorPID property, see [How to Secure Pipelines](../core/how-to-secure-pipelines.md).</span></span>  

## <a name="resolve-the-party"></a><span data-ttu-id="7bf03-117">解析参与方</span><span class="sxs-lookup"><span data-stu-id="7bf03-117">Resolve the party</span></span>  
 <span data-ttu-id="7bf03-118">下表显示了如何尝试解析该参与方的参与方解析管道组件。</span><span class="sxs-lookup"><span data-stu-id="7bf03-118">The following table shows how the Party Resolution pipeline component attempts to resolve the party.</span></span>  

|<span data-ttu-id="7bf03-119">通过 SID</span><span class="sxs-lookup"><span data-stu-id="7bf03-119">By SID</span></span>|<span data-ttu-id="7bf03-120">由证书</span><span class="sxs-lookup"><span data-stu-id="7bf03-120">By certificate</span></span>|<span data-ttu-id="7bf03-121">WindowsUser</span><span class="sxs-lookup"><span data-stu-id="7bf03-121">WindowsUser</span></span>|<span data-ttu-id="7bf03-122">SignatureCertificate</span><span class="sxs-lookup"><span data-stu-id="7bf03-122">SignatureCertificate</span></span>|<span data-ttu-id="7bf03-123">结果</span><span class="sxs-lookup"><span data-stu-id="7bf03-123">Result</span></span>|  
|------------|--------------------|-----------------|--------------------------|------------|  
|<span data-ttu-id="7bf03-124">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-124">True</span></span>|<span data-ttu-id="7bf03-125">False</span><span class="sxs-lookup"><span data-stu-id="7bf03-125">False</span></span>|<span data-ttu-id="7bf03-126">可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-126">Available</span></span>|<span data-ttu-id="7bf03-127">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-127">Available or unavailable</span></span>|<span data-ttu-id="7bf03-128">解析参与方。</span><span class="sxs-lookup"><span data-stu-id="7bf03-128">Party is resolved.</span></span>|  
|<span data-ttu-id="7bf03-129">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-129">True</span></span>|<span data-ttu-id="7bf03-130">False</span><span class="sxs-lookup"><span data-stu-id="7bf03-130">False</span></span>|<span data-ttu-id="7bf03-131">不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-131">Unavailable</span></span>|<span data-ttu-id="7bf03-132">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-132">Available or unavailable</span></span>|<span data-ttu-id="7bf03-133">参与方未得到解决，但将其标记为匿名。</span><span class="sxs-lookup"><span data-stu-id="7bf03-133">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="7bf03-134">False</span><span class="sxs-lookup"><span data-stu-id="7bf03-134">False</span></span>|<span data-ttu-id="7bf03-135">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-135">True</span></span>|<span data-ttu-id="7bf03-136">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-136">Available or unavailable</span></span>|<span data-ttu-id="7bf03-137">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-137">Available or unavailable</span></span>|<span data-ttu-id="7bf03-138">参与方未得到解决，但将其标记为匿名。</span><span class="sxs-lookup"><span data-stu-id="7bf03-138">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="7bf03-139">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-139">True</span></span>|<span data-ttu-id="7bf03-140">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-140">True</span></span>|<span data-ttu-id="7bf03-141">可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-141">Available</span></span>|<span data-ttu-id="7bf03-142">可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-142">Available</span></span>|<span data-ttu-id="7bf03-143">解析参与方。</span><span class="sxs-lookup"><span data-stu-id="7bf03-143">Party is resolved.</span></span>|  
|<span data-ttu-id="7bf03-144">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-144">True</span></span>|<span data-ttu-id="7bf03-145">True</span><span class="sxs-lookup"><span data-stu-id="7bf03-145">True</span></span>|<span data-ttu-id="7bf03-146">不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-146">Unavailable</span></span>|<span data-ttu-id="7bf03-147">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-147">Available or unavailable</span></span>|<span data-ttu-id="7bf03-148">参与方未得到解决，但将其标记为匿名。</span><span class="sxs-lookup"><span data-stu-id="7bf03-148">Party is not resolved and is stamped as anonymous.</span></span>|  
|<span data-ttu-id="7bf03-149">False</span><span class="sxs-lookup"><span data-stu-id="7bf03-149">False</span></span>|<span data-ttu-id="7bf03-150">False</span><span class="sxs-lookup"><span data-stu-id="7bf03-150">False</span></span>|<span data-ttu-id="7bf03-151">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-151">Available or unavailable</span></span>|<span data-ttu-id="7bf03-152">可用或不可用</span><span class="sxs-lookup"><span data-stu-id="7bf03-152">Available or unavailable</span></span>|<span data-ttu-id="7bf03-153">参与方未得到解决，但将其标记为匿名。</span><span class="sxs-lookup"><span data-stu-id="7bf03-153">Party is not resolved and is stamped as anonymous.</span></span>|  

 <span data-ttu-id="7bf03-154">有关配置参与方解析管道组件的信息，请参阅[如何配置参与方解析管道组件](../core/how-to-configure-the-party-resolution-pipeline-component.md)。</span><span class="sxs-lookup"><span data-stu-id="7bf03-154">For information about configuring the Party Resolution pipeline component, see [How to Configure the Party Resolution Pipeline Component](../core/how-to-configure-the-party-resolution-pipeline-component.md).</span></span>  

## <a name="see-also"></a><span data-ttu-id="7bf03-155">请参阅</span><span class="sxs-lookup"><span data-stu-id="7bf03-155">See Also</span></span>  
- <span data-ttu-id="7bf03-156">**消息上下文属性** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span><span class="sxs-lookup"><span data-stu-id="7bf03-156">**Message Context Properties** [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]</span></span>   
- [<span data-ttu-id="7bf03-157">管道组件</span><span class="sxs-lookup"><span data-stu-id="7bf03-157">Pipeline Components</span></span>](../core/pipeline-components.md)   
- [<span data-ttu-id="7bf03-158">自定义参与方解析（BizTalk Server 示例）</span><span class="sxs-lookup"><span data-stu-id="7bf03-158">Custom Party Resolution (BizTalk Server Sample)</span></span>](../core/custom-party-resolution-biztalk-server-sample.md)   
- [<span data-ttu-id="7bf03-159">进程间的消息验证</span><span class="sxs-lookup"><span data-stu-id="7bf03-159">Authentication of Messages Between Processes</span></span>](../core/authentication-of-messages-between-processes.md)
