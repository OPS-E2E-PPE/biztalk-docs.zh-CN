---
title: 主机实例服务中的服务属性 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8b317161-83a9-42d5-b24f-48ff1e54b94a
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bd58a240ec2be9c2b61cdb52d0c6461ffb99f5cd
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65344242"
---
# <a name="host-instance-service-properties-in-services"></a><span data-ttu-id="25c6f-102">在服务中的主机实例服务属性</span><span class="sxs-lookup"><span data-stu-id="25c6f-102">Host Instance Service Properties in Services</span></span>
## <a name="host-instance-service-properties-in-services"></a><span data-ttu-id="25c6f-103">在服务中的主机实例服务属性</span><span class="sxs-lookup"><span data-stu-id="25c6f-103">Host Instance Service Properties in Services</span></span>  
 <span data-ttu-id="25c6f-104">创建 BizTalk 主机实例时，还创建中服务的服务。</span><span class="sxs-lookup"><span data-stu-id="25c6f-104">When a BizTalk host instance is created, a service in Services is also created.</span></span> <span data-ttu-id="25c6f-105">下表讨论了最常见属性。</span><span class="sxs-lookup"><span data-stu-id="25c6f-105">The table below discusses the most common properties.</span></span>  
  
|<span data-ttu-id="25c6f-106">Option</span><span class="sxs-lookup"><span data-stu-id="25c6f-106">Option</span></span>|<span data-ttu-id="25c6f-107">Description</span><span class="sxs-lookup"><span data-stu-id="25c6f-107">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="25c6f-108">常规：**启动类型**</span><span class="sxs-lookup"><span data-stu-id="25c6f-108">General: **Startup Type**</span></span>|<span data-ttu-id="25c6f-109">默认设置为**自动**以允许主机实例重新启动计算机时自动启动。</span><span class="sxs-lookup"><span data-stu-id="25c6f-109">Default is set to **Automatic** to allow the host instance to automatically start when the computer is restarted.</span></span> <span data-ttu-id="25c6f-110">在生产环境中，此属性通常始终设置为**自动**。</span><span class="sxs-lookup"><span data-stu-id="25c6f-110">In a Production environment, this property is normally always set to **Automatic**.</span></span>|  
|<span data-ttu-id="25c6f-111">登录：**帐户**</span><span class="sxs-lookup"><span data-stu-id="25c6f-111">Log On: **Account**</span></span>|<span data-ttu-id="25c6f-112">配置了 BizTalk 或创建新的主机实例时，将指定设置为用户帐户。</span><span class="sxs-lookup"><span data-stu-id="25c6f-112">Set to the user account specified when BizTalk is configured or when a new host instance is created.</span></span> <span data-ttu-id="25c6f-113">当 BizTalk 和 SQL Server 位于不同计算机上时，帐户必须是域帐户。</span><span class="sxs-lookup"><span data-stu-id="25c6f-113">When BizTalk and SQL Server are on different computers, the account must be a domain account.</span></span> <span data-ttu-id="25c6f-114">如果 BizTalk 和 SQL Server 位于同一台计算机上，帐户可以是域帐户或本地帐户。</span><span class="sxs-lookup"><span data-stu-id="25c6f-114">If BizTalk and SQL Server are on the same computer, the account can be a domain account or a local account.</span></span>|  
|<span data-ttu-id="25c6f-115">恢复：**第一次失败**</span><span class="sxs-lookup"><span data-stu-id="25c6f-115">Recovery: **First failure**</span></span>|<span data-ttu-id="25c6f-116">默认设置为**重新启动服务**。</span><span class="sxs-lookup"><span data-stu-id="25c6f-116">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="25c6f-117">如果主机实例第一次意外停止，则此设置将尝试重新启动主机实例。</span><span class="sxs-lookup"><span data-stu-id="25c6f-117">If the host instance stops unexpectedly the first time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="25c6f-118">如果主机实例成功启动后立即停止，则**失败的第二个**应用属性。</span><span class="sxs-lookup"><span data-stu-id="25c6f-118">If the host instance starts successfully and then immediately stops, then the **Second failure** property is applied.</span></span><br /><br /> <span data-ttu-id="25c6f-119">如果主机实例无法启动，则**失败的第二个**属性将不适用。</span><span class="sxs-lookup"><span data-stu-id="25c6f-119">If the host instance fails to start, then the **Second failure** property will not apply.</span></span> <span data-ttu-id="25c6f-120">会不进行任何其他的重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-120">No additional restart attempts will be made.</span></span> <span data-ttu-id="25c6f-121">主机实例将保持停止状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-121">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="25c6f-122">恢复：**第二次失败**</span><span class="sxs-lookup"><span data-stu-id="25c6f-122">Recovery: **Second failure**</span></span>|<span data-ttu-id="25c6f-123">默认设置为**重新启动服务**。</span><span class="sxs-lookup"><span data-stu-id="25c6f-123">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="25c6f-124">如果主机实例第二次意外停止，则此设置将尝试重新启动主机实例。</span><span class="sxs-lookup"><span data-stu-id="25c6f-124">If the host instance stops unexpectedly the second time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="25c6f-125">如果主机实例成功启动后立即停止，则**后续失败**应用属性。</span><span class="sxs-lookup"><span data-stu-id="25c6f-125">If the host instance starts successfully and then immediately stops, then the **Subsequent failures** property is applied.</span></span><br /><br /> <span data-ttu-id="25c6f-126">如果主机实例无法启动，则**后续失败**属性将不适用。</span><span class="sxs-lookup"><span data-stu-id="25c6f-126">If the host instance fails to start, then the **Subsequent failure** property will not apply.</span></span> <span data-ttu-id="25c6f-127">会不进行任何其他的重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-127">No additional restart attempts will be made.</span></span> <span data-ttu-id="25c6f-128">主机实例将保持停止状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-128">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="25c6f-129">恢复：**后续的失败**</span><span class="sxs-lookup"><span data-stu-id="25c6f-129">Recovery: **Subsequent failures**</span></span>|<span data-ttu-id="25c6f-130">默认设置为**重新启动服务**。</span><span class="sxs-lookup"><span data-stu-id="25c6f-130">Default is set to **Restart the Service**.</span></span> <span data-ttu-id="25c6f-131">如果主机实例第三次意外停止，则此设置将尝试重新启动主机实例。</span><span class="sxs-lookup"><span data-stu-id="25c6f-131">If the host instance stops unexpectedly the third time, then this setting will attempt to restart the host instance.</span></span><br /><br /> <span data-ttu-id="25c6f-132">如果主机实例成功启动后立即停止，则**后续失败**属性将继续应用。</span><span class="sxs-lookup"><span data-stu-id="25c6f-132">If the host instance starts successfully and then immediately stops, then the **Subsequent failures** property will continue to be applied.</span></span><br /><br /> <span data-ttu-id="25c6f-133">如果主机实例无法启动，则**后续失败**属性将不适用。</span><span class="sxs-lookup"><span data-stu-id="25c6f-133">If the host instance fails to start, then the **Subsequent failure** property will not apply.</span></span> <span data-ttu-id="25c6f-134">会不进行任何其他的重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-134">No additional restart attempts will be made.</span></span> <span data-ttu-id="25c6f-135">主机实例将保持停止状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-135">The host instance will remain stopped.</span></span>|  
|<span data-ttu-id="25c6f-136">恢复：**之后重新启动服务**</span><span class="sxs-lookup"><span data-stu-id="25c6f-136">Recovery: **Restart service after**</span></span>|<span data-ttu-id="25c6f-137">默认值为 1 分钟，并且可以根据需要增大该值。</span><span class="sxs-lookup"><span data-stu-id="25c6f-137">Default is 1 minute and can be increased if needed.</span></span>|  
|<span data-ttu-id="25c6f-138">依存关系</span><span class="sxs-lookup"><span data-stu-id="25c6f-138">Dependencies</span></span>|<span data-ttu-id="25c6f-139">**所有**BizTalk 主机实例将开始之前，必须启动列出的组件。</span><span class="sxs-lookup"><span data-stu-id="25c6f-139">**All** the listed components must be started before the BizTalk host instance will start.</span></span> <span data-ttu-id="25c6f-140">这包括企业单一登录。</span><span class="sxs-lookup"><span data-stu-id="25c6f-140">This includes Enterprise Single Sign-On.</span></span> <span data-ttu-id="25c6f-141">如果使用 Windows Server 2008，请参阅以下知识库文章：</span><span class="sxs-lookup"><span data-stu-id="25c6f-141">If using Windows Server 2008, refer to the following KB article:</span></span><br /><br /> <span data-ttu-id="25c6f-142">[942284](http://support.microsoft.com/kb/942284) BizTalk Service 服务可能无法正常启动时重新启动正在运行 Windows Vista 或 Windows Server 2008 的计算机</span><span class="sxs-lookup"><span data-stu-id="25c6f-142">[942284](http://support.microsoft.com/kb/942284) A BizTalk Service service may not start as expected when you restart a computer that is running Windows Vista or Windows Server 2008</span></span>|  
  
 <span data-ttu-id="25c6f-143">**请注意**服务中的 BizTalk 主机实例属性也存储在 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BTSSvc$*BizTalkHostName*注册表项。</span><span class="sxs-lookup"><span data-stu-id="25c6f-143">**Note** The BizTalk host instances properties in Services are also stored in the HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BTSSvc$*BizTalkHostName* registry key.</span></span>  
  
### <a name="recovery"></a><span data-ttu-id="25c6f-144">恢复</span><span class="sxs-lookup"><span data-stu-id="25c6f-144">Recovery</span></span>  
 <span data-ttu-id="25c6f-145">当主机实例服务启动失败时，在服务中的恢复功能不提供无限制的服务重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-145">The Recovery capability in Services does not provide indefinite service restart attempts when the host instance service fails to start.</span></span> <span data-ttu-id="25c6f-146">通过修改恢复属性，就可以改进 BizTalk 主机实例的正常运行时间。</span><span class="sxs-lookup"><span data-stu-id="25c6f-146">By modifying the Recovery properties, it is possible to improve uptime of a BizTalk host instance.</span></span> <span data-ttu-id="25c6f-147">将导致停止的 BizTalk 主机实例的最常见方案包括：</span><span class="sxs-lookup"><span data-stu-id="25c6f-147">The most common scenarios that would cause a BizTalk host instance to stop include:</span></span>  
  
- <span data-ttu-id="25c6f-148">与 SQL Server 的网络连接中断</span><span class="sxs-lookup"><span data-stu-id="25c6f-148">Loss of network connectivity with the SQL Server</span></span>  
  
- <span data-ttu-id="25c6f-149">内存不足异常</span><span class="sxs-lookup"><span data-stu-id="25c6f-149">Out Of Memory exception</span></span>  
  
- <span data-ttu-id="25c6f-150">访问冲突</span><span class="sxs-lookup"><span data-stu-id="25c6f-150">Access Violation</span></span>  
  
  <span data-ttu-id="25c6f-151">**可能的方案**</span><span class="sxs-lookup"><span data-stu-id="25c6f-151">**Potential Scenarios**</span></span>  
  
- <span data-ttu-id="25c6f-152">SQL Server 意外关闭。</span><span class="sxs-lookup"><span data-stu-id="25c6f-152">The SQL Server goes down unexpectedly.</span></span> <span data-ttu-id="25c6f-153">在此情况下，**第一次失败**属性将应用。</span><span class="sxs-lookup"><span data-stu-id="25c6f-153">In this situation, the **First Failure** property will apply.</span></span> <span data-ttu-id="25c6f-154">默认值**第一次失败**并**之后重新启动服务**1 分钟之后进行设置，次重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-154">With the default **First Failure** and **Restart service after** settings, a single restart attempt is made after 1 minute.</span></span> <span data-ttu-id="25c6f-155">如果 SQL Server 在 1 分钟后仍不可用，将不进行任何其他的重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-155">If the SQL Server is still not available after 1 minute, no additional restart attempts will be made.</span></span> <span data-ttu-id="25c6f-156">主机实例将保持停止状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-156">The host instance will remain stopped.</span></span>  
  
- <span data-ttu-id="25c6f-157">SQL Server 已群集化且发生故障转移。</span><span class="sxs-lookup"><span data-stu-id="25c6f-157">SQL Server is clustered and a failover occurs.</span></span> <span data-ttu-id="25c6f-158">在故障转移多个在 5 分钟。</span><span class="sxs-lookup"><span data-stu-id="25c6f-158">The failover takes more than 5 minutes.</span></span> <span data-ttu-id="25c6f-159">在此方案中，默认值**第一次失败**并**之后重新启动服务**设置将尝试之后 1 分钟一次重新启动。</span><span class="sxs-lookup"><span data-stu-id="25c6f-159">In this scenario, the default **First Failure** and **Restart service after** settings will attempt a single restart after 1 minute.</span></span> <span data-ttu-id="25c6f-160">在重新启动将失败，因为 SQL Server 是仍处于脱机状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-160">The restart will fail because SQL Server is still offline.</span></span> <span data-ttu-id="25c6f-161">因此，将不进行任何其他的重新启动尝试。</span><span class="sxs-lookup"><span data-stu-id="25c6f-161">As a result, no additional restart attempts will be made.</span></span> <span data-ttu-id="25c6f-162">主机实例将保持停止状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-162">The host instance will remain stopped.</span></span>  
  
  <span data-ttu-id="25c6f-163">**建议**</span><span class="sxs-lookup"><span data-stu-id="25c6f-163">**Recommendations**</span></span>  
  
- <span data-ttu-id="25c6f-164">当停止 SQL Server 或故障转移 SQL 群集，手动停止 BizTalk 主机实例。</span><span class="sxs-lookup"><span data-stu-id="25c6f-164">When stopping the SQL Server or failing over a SQL cluster, manually stop the BizTalk host instances.</span></span> <span data-ttu-id="25c6f-165">SQL Server 联机后，重新启动主机实例。</span><span class="sxs-lookup"><span data-stu-id="25c6f-165">After the SQL Server is online, restart the host instances.</span></span>  
  
- <span data-ttu-id="25c6f-166">如果它是一种常见情况的 SQL 群集故障转移时间长于 1 分钟时间，提高**之后重新启动服务**值，使 SQL 群集处于联机状态。</span><span class="sxs-lookup"><span data-stu-id="25c6f-166">If it is a common occurrence for a SQL cluster failover to take longer than 1 minute, increase the **Restart service after** value to however long it takes the SQL cluster to be online.</span></span>  
  
- <span data-ttu-id="25c6f-167">在 SQL Server 维护由非 BizTalk 管理员，请考虑提高**之后重新启动服务**值。</span><span class="sxs-lookup"><span data-stu-id="25c6f-167">When SQL Server is maintained by a non-BizTalk Administrator, consider increasing the **Restart service after** value.</span></span> <span data-ttu-id="25c6f-168">非 BizTalk 管理员可能会停止/启动 SQL Server 却没有意识到 biztalk 的影响。</span><span class="sxs-lookup"><span data-stu-id="25c6f-168">Non-BizTalk Administrators tend to stop/start SQL Server without realizing the impact on BizTalk.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="25c6f-169">请参阅</span><span class="sxs-lookup"><span data-stu-id="25c6f-169">See Also</span></span>  
 [<span data-ttu-id="25c6f-170">管理 BizTalk 主机和主机实例</span><span class="sxs-lookup"><span data-stu-id="25c6f-170">Managing BizTalk Hosts and Host Instances</span></span>](../core/managing-biztalk-hosts-and-host-instances.md)