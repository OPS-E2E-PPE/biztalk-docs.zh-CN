---
title: 有关消息和实例数据跟踪的安全注意事项 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- permissions, HAT
- MessageBox database, HAT
- Tracking database, HAT
- security, HAT
- HAT, permissions
- HAT, security
- Management database, HAT
ms.assetid: 83e47dc2-c8e2-42a2-9c85-d511e7dae83f
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4cce159d9012b3fd52405114898f1a2b257a2297
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65280307"
---
# <a name="security-considerations-for-message-and-instance-data-tracking"></a><span data-ttu-id="2f5bf-102">有关消息和实例数据跟踪的安全注意事项</span><span class="sxs-lookup"><span data-stu-id="2f5bf-102">Security Considerations for Message and Instance Data Tracking</span></span>
<span data-ttu-id="2f5bf-103">出于安全原因，消息和服务实例跟踪不使用浏览器或 Url 与以前版本的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-103">For security reasons, message and service instance tracking does not use browsers or URLs as in previous releases of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="2f5bf-104">此监视选项包含在 BizTalk Server 管理控制台中的组概述页的一部分。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-104">This monitoring option is included as a part of the Group Overview page in the BizTalk Server Administration Console.</span></span>  <span data-ttu-id="2f5bf-105">为了向后兼容，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]仍在出于安全原因 shell 内承载 Microsoft Internet Explorer。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-105">For backward compatibility, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] still hosts Microsoft Internet Explorer inside a shell for security reasons.</span></span>  

 <span data-ttu-id="2f5bf-106">通过跟踪消息和服务实例数据，您可以访问故障排除和优化所需的技术详细信息在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-106">By tracking message and service instance data, you can access the technical details necessary to troubleshoot and optimize your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span> <span data-ttu-id="2f5bf-107">因为此跟踪数据的功能强大，应限制在生产环境中的访问权限，以便恶意或未经授权的用户不会造成损害。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-107">Because this tracking data is powerful, you should limit access to it in your production environment so that malicious or unauthorized users do not cause damage.</span></span> <span data-ttu-id="2f5bf-108">建议您遵循这些准则以保护和环境中使用 BizTalk Server 管理控制台。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-108">It is recommended you follow these guidelines for securing and using the BizTalk Server Administration Console in your environment.</span></span>  

- <span data-ttu-id="2f5bf-109">必须以成员的身份登录[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Operators 组使用 BizTalk Server 管理控制台查看数据。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-109">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators group to view data using the BizTalk Server Administration Console.</span></span> <span data-ttu-id="2f5bf-110">访问消息正文中的组概述部分[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，您必须作为的成员登录[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 组。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-110">To access message bodies in the Group Overview section of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, you must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  

   <span data-ttu-id="2f5bf-111">当使用消息和服务实例跟踪时，可以访问以下数据库：</span><span class="sxs-lookup"><span data-stu-id="2f5bf-111">When you use message and service instance tracking, you can access the following databases:</span></span>  


  |               <span data-ttu-id="2f5bf-112">“数据库”</span><span class="sxs-lookup"><span data-stu-id="2f5bf-112">Database</span></span>               |                                                                                                   <span data-ttu-id="2f5bf-113">用户组/权限</span><span class="sxs-lookup"><span data-stu-id="2f5bf-113">User Group/Permissions</span></span>                                                                                                   |
  |--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |  <span data-ttu-id="2f5bf-114">BizTalk 管理 (BizTalkMgmtDb)</span><span class="sxs-lookup"><span data-stu-id="2f5bf-114">BizTalk Management (BizTalkMgmtDb)</span></span>  |              [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="2f5bf-115">管理员、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运算符</span><span class="sxs-lookup"><span data-stu-id="2f5bf-115">Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators</span></span>               |
  | <span data-ttu-id="2f5bf-116">BizTalk MessageBox (BizTalkMsgBoxDb)</span><span class="sxs-lookup"><span data-stu-id="2f5bf-116">BizTalk MessageBox (BizTalkMsgBoxDb)</span></span> | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="2f5bf-117">管理员、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作员或读写权限</span><span class="sxs-lookup"><span data-stu-id="2f5bf-117">Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators, or read-write permissions</span></span> |
  |   <span data-ttu-id="2f5bf-118">BizTalk 跟踪 (BizTalkDTADb)</span><span class="sxs-lookup"><span data-stu-id="2f5bf-118">BizTalk Tracking (BizTalkDTADb)</span></span>    | [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="2f5bf-119">管理员、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作员或只读权限</span><span class="sxs-lookup"><span data-stu-id="2f5bf-119">Administrators, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operators, or read-only permissions</span></span>  |


- <span data-ttu-id="2f5bf-120">消息和服务实例跟踪生成有关中的所有主机报告[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]环境基于查询的参数。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-120">Message and service instance tracking generates reports about all hosts in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment based on the parameters of a query.</span></span> <span data-ttu-id="2f5bf-121">若要仅成员的信息泄露的可能性降到最低[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理员组可以使用 BizTalk Server 管理控制台来执行这些查询。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-121">To minimize the potential of information disclosure, only members of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group can use the BizTalk Server Administration Console to execute these querries.</span></span> <span data-ttu-id="2f5bf-122">但是，如果不希望所有[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理员具有对数据的访问此跟踪进程生成，您可以通过添加/删除用户从 BizTalk 中的 HM_EVENT_WRITER 和 BAM_EVENT_WRITER SQL Server 角色来限制其访问的数据跟踪 (BizTalkDTADb) 数据库。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-122">However, if you do not want all [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators to have access to the data this tracking process produces, you can limit their access to the data by adding/removing users from the HM_EVENT_WRITER and BAM_EVENT_WRITER SQL Server roles in the BizTalk Tracking (BizTalkDTADb) database.</span></span>  

- <span data-ttu-id="2f5bf-123">BizTalk 使用 BAM_EVENT_WRITER 和 hm_event_writer 这两个 SQL Server 角色来授予/拒绝其成员的权限读取/写入跟踪数据在跟踪数据库中，但不能通过角色成员身份。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-123">BizTalk uses the BAM_EVENT_WRITER and HM_EVENT_WRITER SQL Server roles to grant/deny their members permissions to read/write the tracking data in the Tracking database, but not through role membership.</span></span> <span data-ttu-id="2f5bf-124">不要删除这些 SQL Server 角色。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-124">Do not remove these SQL Server roles.</span></span> <span data-ttu-id="2f5bf-125">当你更改从承载为非跟踪主机 （或相反），调用 adm_ChangeHostTrackingPrivilege 存储过程。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-125">When you change a host from hosting to not hosting tracking (or vice versa), the adm_ChangeHostTrackingPrivilege stored procedure is called.</span></span> <span data-ttu-id="2f5bf-126">此存储的过程将读取 BAM_EVENT_WRITER 和 hm_event_writer 这两个 SQL Server 角色的定义，并将相应的 GRANT/DENY 语句应用于主机 Windows 组。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-126">This stored procedure reads the definition of the BAM_EVENT_WRITER and HM_EVENT_WRITER SQL Server roles and apply the corresponding GRANT/DENY statements to the Host Windows group.</span></span> <span data-ttu-id="2f5bf-127">这实现了相同的效果与将主机 Windows 组添加到这些 SQL 角色。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-127">This achieves the same effect as adding the Host Windows group to these SQL roles.</span></span>  

- <span data-ttu-id="2f5bf-128">在配置 BizTalk Server 管理控制台首选项以从存档数据库查看数据时，在这种情况下，跟踪查询连接到存放存档的数据，不适用于当前处于活动状态 BizTalk 跟踪 (BizTalkDTADb) 的数据库数据库。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-128">When you configure the BizTalk Server Administration Console preferences to view data from an archived database, In this case the tracking queries connect to the databases that hold the archived data, not to the currently active BizTalk Tracking (BizTalkDTADb) database.</span></span>  

- <span data-ttu-id="2f5bf-129">您不能跨网络地址转换 (NAT) 防火墙调试实时业务流程。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-129">You cannot debug live orchestrations across Network Address Translation (NAT) firewalls.</span></span> <span data-ttu-id="2f5bf-130">若要调试实时业务流程，必须在处理域具有一台管理计算机。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-130">You must have an administration computer on the Processing domain in order to debug live orchestrations.</span></span>  

- <span data-ttu-id="2f5bf-131">具体取决于如何配置跟踪和管道，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可能会将存储在消息上下文中包含的敏感信息。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-131">Depending on how you configure tracking and the pipelines, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] may store sensitive information contained in the message context.</span></span> <span data-ttu-id="2f5bf-132">如果您使用 WMI 或跟踪消息正文保存到文件位置，请确保该位置具有加强的任意访问控制列表 (DACL) 以便仅[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 才具有读取这些消息正文的权限。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-132">If you use WMI or tracking to save message bodies to a file location, ensure that the location has a strong discretionary access control list (DACL) so that only [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators have read permissions to these message bodies.</span></span> <span data-ttu-id="2f5bf-133">适用于任何保存消息正文，包括非 BizTalk 数据库可能会在此存档，并将其还原的位置相同的 DACL。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-133">Apply the same DACL to any location you save the message bodies, including non-BizTalk databases where you may archive and restore them.</span></span>  

- <span data-ttu-id="2f5bf-134">您必须手动授予权限[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 组访问跟踪分析服务器数据库 (BizTalkAnalysisDb); 默认情况下，只有 OLAP 管理员才具有这种权限。</span><span class="sxs-lookup"><span data-stu-id="2f5bf-134">You must manually grant permissions to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to access the Tracking Analysis Server (BizTalkAnalysisDb) database; by default, only OLAP administrators have permissions to it.</span></span>  

## <a name="see-also"></a><span data-ttu-id="2f5bf-135">请参阅</span><span class="sxs-lookup"><span data-stu-id="2f5bf-135">See Also</span></span>  
 <span data-ttu-id="2f5bf-136">[规划消息和实例跟踪](../core/planning-for-message-and-instance-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="2f5bf-136">[Planning for Message and Instance Tracking](../core/planning-for-message-and-instance-tracking.md) </span></span>  
 [<span data-ttu-id="2f5bf-137">查看跟踪的消息和实例数据</span><span class="sxs-lookup"><span data-stu-id="2f5bf-137">Viewing Tracked Message and Instance Data</span></span>](../core/viewing-tracked-message-and-instance-data.md)