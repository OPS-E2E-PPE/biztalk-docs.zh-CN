---
title: 演练： 使用 Wcf-nettcp 适配器使用消息安全模式 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c7f6e892-34ce-4132-8867-54cc3bbfe507
caps.latest.revision: 47
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce117c852cc9ed2993c30f5c915d8ad5e11f73b6
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36990614"
---
# <a name="walkthrough-using-the-message-security-mode-with-the-wcf-nettcp-adapter"></a><span data-ttu-id="3c737-102">演练： 使用 Wcf-nettcp 适配器使用消息安全模式</span><span class="sxs-lookup"><span data-stu-id="3c737-102">Walkthrough: Using the Message Security Mode with the WCF-NetTcp Adapter</span></span>

> [!NOTE]
>  <span data-ttu-id="3c737-103">有关适配器的详细信息，请参阅[BizTalk Server 中的适配器](../core/adapters-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="3c737-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  

## <a name="introduction"></a><span data-ttu-id="3c737-104">简介</span><span class="sxs-lookup"><span data-stu-id="3c737-104">Introduction</span></span>

 <span data-ttu-id="3c737-105">本演练显示如何配置 WCF-NetTcp 适配器以使用 [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] 消息安全模式，该模式使用 WS-Security 规范来帮助保护适配器传输的消息。</span><span class="sxs-lookup"><span data-stu-id="3c737-105">This walkthrough shows how to configure the WCF-NetTcp adapter to use the [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] Message security mode, which uses the WS-Security specification to help secure messages that the adapter transmits.</span></span> <span data-ttu-id="3c737-106">此规范描述 SOAP 邮件协议的增强功能，以实现机密性、完整性，以及在 SOAP 消息级别进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="3c737-106">This specification describes enhancements to the SOAP messaging protocol to accomplish confidentiality, integrity, and authentication at the SOAP message level.</span></span> <span data-ttu-id="3c737-107">消息安全模式需要指定服务证书才能进行加密/解密和签名/验证等操作，具体取决于安全模式组合。</span><span class="sxs-lookup"><span data-stu-id="3c737-107">Message security mode requires the service certificate to be specified for operations such as encryption/decryption and signing/verification purposes depending on the security mode combinations.</span></span>  

 <span data-ttu-id="3c737-108">WCF-NetTcp 适配器使用 NetTcpBinding 绑定在 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 客户端和 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 远程服务之间通信。</span><span class="sxs-lookup"><span data-stu-id="3c737-108">The WCF-NetTcp adapter uses the NetTcpBinding binding to communicate between [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] clients and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] remote services.</span></span> <span data-ttu-id="3c737-109">它提供了对 SOAP 安全性、可靠性和事务功能的完全访问权限。</span><span class="sxs-lookup"><span data-stu-id="3c737-109">It provides full access to SOAP security, reliability, and transaction features.</span></span> <span data-ttu-id="3c737-110">允许业务流程和架构发布为 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服务，同时为业务流程提供使用外部 WCF 服务的能力。</span><span class="sxs-lookup"><span data-stu-id="3c737-110">It allows orchestrations and schemas to be published as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services, and also provides the ability for an orchestration to consume external WCF services.</span></span> <span data-ttu-id="3c737-111">此适配器使用 TCP 传输，消息采用二进制编码。</span><span class="sxs-lookup"><span data-stu-id="3c737-111">This adapter uses the TCP transport, and messages have binary encoding.</span></span> <span data-ttu-id="3c737-112">WCF-NetTcp 适配器由一个发送适配器和一个接收适配器组成。</span><span class="sxs-lookup"><span data-stu-id="3c737-112">The WCF-NetTcp adapter consists of both a send adapter and a receive adapter.</span></span>  

 <span data-ttu-id="3c737-113">本演练显示如何使用 Active Directory 证书服务为消息安全模式创建证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-113">This walkthrough shows how to create certificates for Message security mode by using the Active Directory Certificate Service.</span></span> <span data-ttu-id="3c737-114">您将为服务器和客户端创建证书，然后配置 WCF-NetTcp 接收位置以在消息安全模式下使用证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-114">You will create certificates for the server and the client, and then configure a WCF-NetTcp receive location to use the certificates in Message security mode.</span></span> <span data-ttu-id="3c737-115">通过使用 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 客户端，您将按照 XML 加密语法和处理将消息发送到处于已加密状态的该接收位置。</span><span class="sxs-lookup"><span data-stu-id="3c737-115">By using a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client, you will send messages to that receive location in an encrypted state according to XML Encryption Syntax and Processing.</span></span>  

 <span data-ttu-id="3c737-116">在完成本演练后，你将了解如何执行以下任务：</span><span class="sxs-lookup"><span data-stu-id="3c737-116">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  

- <span data-ttu-id="3c737-117">使用 Active Directory 证书服务创建证书申请，并通过颁发证书完成该过程。</span><span class="sxs-lookup"><span data-stu-id="3c737-117">Use the Active Directory Certificate Service to create a certificate request and complete the process by issuing the certificate.</span></span>  

- <span data-ttu-id="3c737-118">从 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台，配置 WCF NetTcp 适配器以使用消息安全模式。</span><span class="sxs-lookup"><span data-stu-id="3c737-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the WCF-NetTcp adapter to use the Message security mode.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="3c737-119">必要條件</span><span class="sxs-lookup"><span data-stu-id="3c737-119">Prerequisites</span></span>  
 <span data-ttu-id="3c737-120">要执行此示例中的步骤，请确保您的环境安装了以下必备组件；</span><span class="sxs-lookup"><span data-stu-id="3c737-120">To perform the steps in this sample ensure that your environment installs the following prerequisites;</span></span>  

- <span data-ttu-id="3c737-121">运行本示例的计算机和生成程序集和运行部署过程的计算机需要 Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]，Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]，与 Microsoft BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="3c737-121">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="3c737-122">用于构建程序集和运行部署过程的计算机需要安装 Microsoft Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="3c737-122">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  

- <span data-ttu-id="3c737-123">运行示例的计算机需要 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 适配器和 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 管理工具。</span><span class="sxs-lookup"><span data-stu-id="3c737-123">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="3c737-124">这些是用于安装 Microsoft BizTalk Server 安装过程的选项。</span><span class="sxs-lookup"><span data-stu-id="3c737-124">These are options to install during setup of Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="3c737-125">在用于执行管理任务的计算机上，你必须使用作为 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理员组成员的用户帐户运行，才能在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台内配置 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 应用程序设置。</span><span class="sxs-lookup"><span data-stu-id="3c737-125">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="3c737-126">此用户帐户还必须是本地管理员组的成员，才能部署应用程序，管理主机实例以及其他可能需要的任务。</span><span class="sxs-lookup"><span data-stu-id="3c737-126">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  

- <span data-ttu-id="3c737-127">需要的任何计算机上[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]功能，完成的一次性安装过程[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]在示例[ http://go.microsoft.com/fwlink/?LinkId=135510 ](http://go.microsoft.com/fwlink/?LinkId=135510)。</span><span class="sxs-lookup"><span data-stu-id="3c737-127">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  

- <span data-ttu-id="3c737-128">在运行示例并将绑定或 .msi 文件导入 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的计算机上，确保主机不是受信任主机，否则导入将失败。</span><span class="sxs-lookup"><span data-stu-id="3c737-128">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  

- <span data-ttu-id="3c737-129">在运行示例的计算机上确保已安装 Active Directory 证书服务。</span><span class="sxs-lookup"><span data-stu-id="3c737-129">On the computer that runs the sample ensure that Active Directory Certificate Services is installed.</span></span>  

- <span data-ttu-id="3c737-130">你必须下载演练代码并将其解压缩到您的计算机。</span><span class="sxs-lookup"><span data-stu-id="3c737-130">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="3c737-131">本演练是整个的一部分[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]适配器演练包。</span><span class="sxs-lookup"><span data-stu-id="3c737-131">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="3c737-132">您可以下载文件**WCFAdapterWalkthroughs.exe**从[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]开发人员中心， [ http://go.microsoft.com/fwlink/?LinkId=194140 ](http://go.microsoft.com/fwlink/?LinkId=194140)。</span><span class="sxs-lookup"><span data-stu-id="3c737-132">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  

## <a name="create-the-certificates-for-this-walkthrough"></a><span data-ttu-id="3c737-133">为本演练创建证书</span><span class="sxs-lookup"><span data-stu-id="3c737-133">Create the certificates for this walkthrough</span></span>  

1. <span data-ttu-id="3c737-134">在本部分中，您将请求服务和客户端证书，颁发这些证书，并将其安装到适当的存储中。</span><span class="sxs-lookup"><span data-stu-id="3c737-134">In this section you will request service and client certificates, issue the certificates, and install them into the appropriate stores.</span></span> <span data-ttu-id="3c737-135">Active Directory 证书服务用于创建具有受信任证书链的证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-135">Active Directory Certificate Services is used to create a certificate with a trusted certificate chain.</span></span> <span data-ttu-id="3c737-136">如果没有将 Active Directory 证书服务作为必备组件的一部分安装，则在计算机上安装 Active Directory 证书服务。</span><span class="sxs-lookup"><span data-stu-id="3c737-136">If you did not install Active Directory Certificate Services as part of the Prerequisites, then install Active Directory Certificate Services on your computer.</span></span> <span data-ttu-id="3c737-137">如果已安装，则转到步骤 2。</span><span class="sxs-lookup"><span data-stu-id="3c737-137">If it is already installed, go to step 2.</span></span>  

   1.  <span data-ttu-id="3c737-138">单击**启动**，依次指向**管理工具**，然后单击**服务器管理器**。</span><span class="sxs-lookup"><span data-stu-id="3c737-138">Click **Start**, point to **Administrative Tools**, and then click **Server Manager**.</span></span>  

   2.  <span data-ttu-id="3c737-139">下**服务器管理器**节点中，单击**添加**，然后单击**角色**。</span><span class="sxs-lookup"><span data-stu-id="3c737-139">Under the **Server Manager** node, click **Add**, and then click **Roles**.</span></span>  

   3.  <span data-ttu-id="3c737-140">这将显示**在开始之前**对话框**添加角色向导**。</span><span class="sxs-lookup"><span data-stu-id="3c737-140">This brings up the **Before you begin** dialog for the **Add Roles Wizard**.</span></span> <span data-ttu-id="3c737-141">单击“下一步” 。</span><span class="sxs-lookup"><span data-stu-id="3c737-141">Click **Next**.</span></span>  

   4.  <span data-ttu-id="3c737-142">上**选择服务器角色**页上，选择**Active Directory 证书服务**，单击**下一步**，然后按照屏幕说明完成安装。</span><span class="sxs-lookup"><span data-stu-id="3c737-142">On the **Select Server Roles** page, select **Active Directory Certificate Services**, click **Next**, and then follow the on-screen instructions to complete the installation.</span></span>  

2. <span data-ttu-id="3c737-143">创建服务验证的证书申请，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c737-143">Create a certificate request for the service authentication as follows:</span></span>  

   1. <span data-ttu-id="3c737-144">在 Internet Explorer 中，请访问网站`http://localhost/certsrv`。</span><span class="sxs-lookup"><span data-stu-id="3c737-144">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="3c737-145">上**欢迎**页上，单击**申请一个证书**，然后单击**高级的证书申请**上**申请一个证书**页。</span><span class="sxs-lookup"><span data-stu-id="3c737-145">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  

      > [!NOTE]
      >  <span data-ttu-id="3c737-146">使用时[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]作为证书颁发机构并请求从一个证书申请[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]计算机，可能会收到错误 **"若要完成证书注册，CA 的网站必须将配置为使用 HTTPS身份验证"**。</span><span class="sxs-lookup"><span data-stu-id="3c737-146">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] as the certificate authority and requesting a certificate request from a [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] computer, you may get the error **“In order to complete certificate enrollment, the Web site for the CA must be configured to use HTTPS authentication”**.</span></span> <span data-ttu-id="3c737-147">如果发生此错误，注册网站需要使用 Web 证书 (SSL) 进行配置。</span><span class="sxs-lookup"><span data-stu-id="3c737-147">If this error occurs, the enrollment website needs to be configured with a Web Certificate (SSL).</span></span> <span data-ttu-id="3c737-148">有关完成此任务的详细信息，请参阅以下链接：</span><span class="sxs-lookup"><span data-stu-id="3c737-148">Refer to these links for details in accomplishing this task:</span></span>  
      > 
      >  [<span data-ttu-id="3c737-149">AD CS: Web 注册</span><span class="sxs-lookup"><span data-stu-id="3c737-149">AD CS: Web Enrollment</span></span>](http://technet.microsoft.com/library/cc732517.aspx)  
      > 
      >  [<span data-ttu-id="3c737-150">IIS 服务器证书安装说明</span><span class="sxs-lookup"><span data-stu-id="3c737-150">IIS Server Certificate Installation Instructions</span></span>](http://msdn.microsoft.com/library/ms751408.aspx)  

   2. <span data-ttu-id="3c737-151">上**高级证书申请**页上，单击**创建并向此 CA 提交一个申请**。</span><span class="sxs-lookup"><span data-stu-id="3c737-151">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  

   3. <span data-ttu-id="3c737-152">上**高级证书申请**页上，键入`localhost`中**名称**文本框中，选择**服务器身份验证证书**从**需要的证书类型**下拉列表，再单击**提交**。</span><span class="sxs-lookup"><span data-stu-id="3c737-152">On the **Advanced Certificate Request** page, type `localhost` in the **Name** text box, select **Server Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  

3. <span data-ttu-id="3c737-153">创建客户端验证的证书申请，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c737-153">Create a certificate request for client authentication as follows:</span></span>  

   1.  <span data-ttu-id="3c737-154">在 Internet Explorer 中，请访问网站`http://localhost/certsrv`。</span><span class="sxs-lookup"><span data-stu-id="3c737-154">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="3c737-155">上**欢迎**页上，单击**申请一个证书**，然后单击**高级的证书申请**上**申请一个证书**页。</span><span class="sxs-lookup"><span data-stu-id="3c737-155">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  

   2.  <span data-ttu-id="3c737-156">上**高级证书申请**页上，单击**创建并向此 CA 提交一个申请**。</span><span class="sxs-lookup"><span data-stu-id="3c737-156">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  

   3.  <span data-ttu-id="3c737-157">上**高级证书申请**页上，键入`contoso`中**名称**文本框中，选择**客户端身份验证证书**从**需要的证书类型**下拉列表，再单击**提交**。</span><span class="sxs-lookup"><span data-stu-id="3c737-157">On the **Advanced Certificate Request** page, type `contoso` in the **Name** text box, select **Client Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="3c737-158">如果在域控制器以外的计算机上运行 BizTalk Server，则使用客户端身份验证证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-158">The client authentication certificate is used if you are running BizTalk Server on machine other than the Domain Controller.</span></span> <span data-ttu-id="3c737-159">这将在适配器的属性对话框中配置。</span><span class="sxs-lookup"><span data-stu-id="3c737-159">This will be configured in the adapter’s property dialog.</span></span>  

4. <span data-ttu-id="3c737-160">使用证书颁发机构管理控制台颁发证书，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c737-160">Issue the certificates by using the Certification Authority management console as follows:</span></span>  

   1.  <span data-ttu-id="3c737-161">单击**启动**，依次指向**管理工具**，然后单击**证书颁发机构**。</span><span class="sxs-lookup"><span data-stu-id="3c737-161">Click **Start**, point to **Administrative Tools**, and then click **Certification Authority**.</span></span>  

   2.  <span data-ttu-id="3c737-162">在中**证书颁发机构**管理控制台中，展开证书颁发机构的名称，然后双击**挂起的申请**。</span><span class="sxs-lookup"><span data-stu-id="3c737-162">In the **Certification Authority** management console, expand your certification authority's name, and then double-click **Pending Request**.</span></span>  

   3.  <span data-ttu-id="3c737-163">在右窗格中**证书颁发机构**管理控制台中，右键单击服务身份验证证书的申请，指向**的所有任务**，然后单击**问题**.</span><span class="sxs-lookup"><span data-stu-id="3c737-163">In the right pane of the **Certification Authority** management console, right-click the request for the service authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  

   4.  <span data-ttu-id="3c737-164">在右窗格中**证书颁发机构**管理控制台中，右键单击客户端身份验证证书的申请，指向**的所有任务**，然后单击**问题**.</span><span class="sxs-lookup"><span data-stu-id="3c737-164">In the right pane of the **Certification Authority** management console, right-click the request for the client authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  

   5.  <span data-ttu-id="3c737-165">关闭**证书颁发机构**管理控制台。</span><span class="sxs-lookup"><span data-stu-id="3c737-165">Close the **Certification Authority** management console.</span></span>  

5. <span data-ttu-id="3c737-166">在您的计算机上安装颁发的证书，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c737-166">Install the issued certificates on your computer as follows:</span></span>  

   1.  <span data-ttu-id="3c737-167">在 Internet Explorer 中，请访问网站`http://localhost/certsrv`。</span><span class="sxs-lookup"><span data-stu-id="3c737-167">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  

   2.  <span data-ttu-id="3c737-168">上**欢迎**页上，单击**查看挂起的证书申请的状态**。</span><span class="sxs-lookup"><span data-stu-id="3c737-168">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  

   3.  <span data-ttu-id="3c737-169">上**查看挂起的证书申请的状态**页上，单击服务器身份验证证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-169">On the **View the Status of a Pending Certificate Request** page, click the server authentication certificate.</span></span>  

   4.  <span data-ttu-id="3c737-170">上**证书颁发**页上，单击**安装此证书**。</span><span class="sxs-lookup"><span data-stu-id="3c737-170">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  

   5.  <span data-ttu-id="3c737-171">在 Internet Explorer 中，请访问网站`http://localhost/certsrv`。</span><span class="sxs-lookup"><span data-stu-id="3c737-171">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  

   6.  <span data-ttu-id="3c737-172">上**欢迎**页上，单击**查看挂起的证书申请的状态**。</span><span class="sxs-lookup"><span data-stu-id="3c737-172">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  

   7.  <span data-ttu-id="3c737-173">上**查看挂起的证书申请的状态**页上，单击客户端身份验证证书。</span><span class="sxs-lookup"><span data-stu-id="3c737-173">On the **View the Status of a Pending Certificate Request** page, click the client authentication certificate.</span></span>  

   8.  <span data-ttu-id="3c737-174">上**证书颁发**页上，单击**安装此证书**。</span><span class="sxs-lookup"><span data-stu-id="3c737-174">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  

6. <span data-ttu-id="3c737-175">按如下方式确保已正确安装颁发的证书：</span><span class="sxs-lookup"><span data-stu-id="3c737-175">Make sure that the issued certificates are installed properly as follows:</span></span>  

   1.  <span data-ttu-id="3c737-176">打开 Microsoft 管理控制台 (MMC)。</span><span class="sxs-lookup"><span data-stu-id="3c737-176">Open Microsoft Management Console (MMC).</span></span> <span data-ttu-id="3c737-177">若要执行此操作，请单击**启动**，单击**运行**，类型`mmc`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="3c737-177">To do so, click **Start**, click **Run**, type `mmc`, and then click **OK**.</span></span>  

   2.  <span data-ttu-id="3c737-178">在 MMC 中，在**文件**菜单上，单击**添加/删除管理单元中**。</span><span class="sxs-lookup"><span data-stu-id="3c737-178">In the MMC, on the **File** menu, click **Add/Remove Snap-in**.</span></span>  

   3.  <span data-ttu-id="3c737-179">在“添加/删除管理单元”对话框中，单击“添加”。</span><span class="sxs-lookup"><span data-stu-id="3c737-179">In the **Add/Remove Snap-in** dialog box, click **Add**.</span></span>  

   4.  <span data-ttu-id="3c737-180">在中**添加独立管理单元**对话框中，选择**证书**从**可用的独立管理单元中**列表，并单击**添加**.</span><span class="sxs-lookup"><span data-stu-id="3c737-180">In the **Add Standalone Snap-in** dialog box, select **Certificates** from the **Available standalone snap-in** list, and then click **Add**.</span></span>  

   5.  <span data-ttu-id="3c737-181">在中**管理单元中的证书**对话框中，选择**我的用户帐户**选项，并单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="3c737-181">In the **Certificate snap-in** dialog box, select the **My user account** option, and then click **Finish**.</span></span>  

   6.  <span data-ttu-id="3c737-182">关闭所有打开的对话框。</span><span class="sxs-lookup"><span data-stu-id="3c737-182">Close all of the open dialog boxes.</span></span>  

   7.  <span data-ttu-id="3c737-183">在 MMC 中，在控制台根目录窗口中，展开**证书-当前用户**，展开**个人**，展开**证书**，并请务必证书，安装在上一步中显示。</span><span class="sxs-lookup"><span data-stu-id="3c737-183">In the MMC, in the Console Root window, expand **Certificates - Current User**, expand **Personal**, expand **Certificates**, and then make sure that the certificates that you installed in the previous step are displayed.</span></span>  

## <a name="create-the-biztalk-application-for-this-walkthrough"></a><span data-ttu-id="3c737-184">创建在本演练中的 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="3c737-184">Create the BizTalk application for this walkthrough</span></span>  

1. <span data-ttu-id="3c737-185">单击**启动**，依次指向**所有程序**，指向[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]，然后单击**BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="3c737-185">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  

2. <span data-ttu-id="3c737-186">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**BizTalk 组**，右键单击**应用程序**，指向**新建**，然后单击**应用程序**.</span><span class="sxs-lookup"><span data-stu-id="3c737-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, right-click **Applications**, point to **New**, and then click **Application**.</span></span>  

3. <span data-ttu-id="3c737-187">在中**应用程序属性**对话框中，在**常规**选项卡上，键入`WcfMessageSecurity`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="3c737-187">In the **Application Properties** dialog box, on the **General** tab, type `WcfMessageSecurity`, and then click **OK**.</span></span>  

4. <span data-ttu-id="3c737-188">为 BizTalk 应用程序创建使用 WCF-NetTcp 适配器的接收位置，如下所示：</span><span class="sxs-lookup"><span data-stu-id="3c737-188">Create a receive location using the WCF-NetTcp adapter for the BizTalk application as follows:</span></span>  

   1. <span data-ttu-id="3c737-189">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**WcfMessageSecurity**，右键单击**接收端口**，指向**新建**，然后单击**单向接收端口。**</span><span class="sxs-lookup"><span data-stu-id="3c737-189">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  

   2. <span data-ttu-id="3c737-190">在中**接收端口属性**对话框中**名称**文本框中，键入`WcfMessageSecurity.OrderRequest.Receive`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="3c737-190">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive`, and then click **OK**.</span></span> <span data-ttu-id="3c737-191">此接收端口的名称是任意的，但此名称具有逻辑意义。</span><span class="sxs-lookup"><span data-stu-id="3c737-191">The name of this receive port is strictly arbitrary but this name makes logical sense.</span></span>  

   3. <span data-ttu-id="3c737-192">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，右键单击**接收位置**，单击**新建**，然后单击**单向接收位置**。</span><span class="sxs-lookup"><span data-stu-id="3c737-192">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **Receive Locations**, click **New**, and then click **One-way Receive Location**.</span></span> <span data-ttu-id="3c737-193">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 客户端将向此接收位置发送一条 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 消息。</span><span class="sxs-lookup"><span data-stu-id="3c737-193">The [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client will send a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message to this receive location.</span></span> <span data-ttu-id="3c737-194">选择**WcfMessageSecurity.OrderRequest.Receive**接收端口，并单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="3c737-194">Select the **WcfMessageSecurity.OrderRequest.Receive** recive port, and then click **OK**.</span></span>  

   4. <span data-ttu-id="3c737-195">在中**接收位置属性**对话框中**名称**文本框中，键入`WcfMessageSecurity.OrderRequest.Receive.NetTcp`。</span><span class="sxs-lookup"><span data-stu-id="3c737-195">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span></span> <span data-ttu-id="3c737-196">此接收位置的名称是任意的，但此名称具有逻辑意义。</span><span class="sxs-lookup"><span data-stu-id="3c737-196">The name of this receive location is strictly arbitrary but this name makes logical sense.</span></span>  

   5. <span data-ttu-id="3c737-197">在中**接收位置属性**对话框中**传输**部分旁边**类型**，选择**WCF NetTcp**从下拉列表列表中，然后依次**配置**。</span><span class="sxs-lookup"><span data-stu-id="3c737-197">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetTcp** from the drop-down list, and then click **Configure**.</span></span>  

   6. <span data-ttu-id="3c737-198">在中**Wcf-nettcp 传输属性**对话框中，在**常规**选项卡上，在**地址 (URI)** 文本框中，键入`net.tcp://localhost/WcfMessageSecurity`。</span><span class="sxs-lookup"><span data-stu-id="3c737-198">In the **WCF-NetTcp Transport Properties** dialog box, on the **General** tab, in the **Address (URI)** text box, type `net.tcp://localhost/WcfMessageSecurity`.</span></span>  

   7. <span data-ttu-id="3c737-199">在中**Wcf-nettcp 传输属性**对话框中，在**安全**选项卡上，选择**消息**从**安全模式**下拉列表列表，并选择**证书**从**消息客户端凭据类型**下拉列表。</span><span class="sxs-lookup"><span data-stu-id="3c737-199">In the **WCF-NetTcp Transport Properties** dialog box, on the **Security** tab, select **Message** from the **Security mode** drop-down list, and then select **Certificate** from the **Message client credential type** drop-down list.</span></span> <span data-ttu-id="3c737-200">将配置 WCF-NetTcp 适配器以使用消息安全模式。</span><span class="sxs-lookup"><span data-stu-id="3c737-200">This configures the WCF-NetTcp adapter to use the Message security mode.</span></span>  

   8. <span data-ttu-id="3c737-201">配置服务证书以在消息安全模式下使用。</span><span class="sxs-lookup"><span data-stu-id="3c737-201">Configure the service certificate to use with Message security mode.</span></span> <span data-ttu-id="3c737-202">在中**Wcf-nettcp 传输属性**对话框中**服务认证**部分中，单击**浏览**。</span><span class="sxs-lookup"><span data-stu-id="3c737-202">In the **WCF-NetTcp Transport Properties** dialog box, in the **Service certification** section, click **Browse**.</span></span> <span data-ttu-id="3c737-203">在中**选择服务证书**对话框中，选择在上一过程中，安装的服务器身份验证证书，然后单击**确定**关闭对话框并保存所做的更改。</span><span class="sxs-lookup"><span data-stu-id="3c737-203">In the **Select service certificate** dialog box, select the server authentication certificate you installed in the previous procedure, and then click **OK** to close the dialog box and save the changes.</span></span>  

   9. <span data-ttu-id="3c737-204">关闭所有打开的对话框。</span><span class="sxs-lookup"><span data-stu-id="3c737-204">Close all of the open dialog boxes.</span></span>  

      > [!NOTE]
      >  <span data-ttu-id="3c737-205">若要向 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 接收适配器验证客户端证书，必须将客户端证书的 CA 证书链安装到运行 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 适配器的主机实例的计算机的“受信任根证书颁发机构”证书存储中。</span><span class="sxs-lookup"><span data-stu-id="3c737-205">To authenticate the client certificates with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapters, the CA certificate chain for the client certificates must be installed in the Trusted Root Certification Authorities certificate store of the computer running the host instances for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="3c737-206">由于本演练假设证书服务和 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 客户端以及 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 适配器安装在同一计算机上，因此，您无需在您的计算机上安装 CA 证书链。</span><span class="sxs-lookup"><span data-stu-id="3c737-206">Because this walkthrough assumes that the certificate service is installed on the same computer as the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters, you do not have to install the CA certificate chain on your computer.</span></span>  

5. <span data-ttu-id="3c737-207">为 BizTalk 应用程序创建 FILE 发送端口。</span><span class="sxs-lookup"><span data-stu-id="3c737-207">Create a FILE send port for the BizTalk application.</span></span> <span data-ttu-id="3c737-208">此位置是代表 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 服务的业务流程将发送订单请求输出消息的位置。</span><span class="sxs-lookup"><span data-stu-id="3c737-208">This is the location where the order request output message will be sent by the orchestration representing the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  

   1. <span data-ttu-id="3c737-209">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**WcfMessageSecurity**，右键单击**发送端口**，指向**新建**，然后单击**静态单向发送端口。**</span><span class="sxs-lookup"><span data-stu-id="3c737-209">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port.**</span></span>  

   2. <span data-ttu-id="3c737-210">在中**发送端口属性**对话框中，在**常规**选项卡上，在**名称**文本框中，键入`WcfMessageSecurity.OrderRequest.Send.FILE`。</span><span class="sxs-lookup"><span data-stu-id="3c737-210">In the **Send Port Properties** dialog box, on the **General**  tab, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Send.FILE`.</span></span>  

   3. <span data-ttu-id="3c737-211">在**发送端口属性**对话框中**传输**部分旁边**类型**，选择**文件**从下拉列表中，然后单击**配置**。</span><span class="sxs-lookup"><span data-stu-id="3c737-211">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  

   4. <span data-ttu-id="3c737-212">在中**FILE 传输属性**对话框中，在**常规**选项卡上，键入`C:\WCFMessageSecurity\OrderRequestOut`中**目标文件夹**文本框中，，然后单击**确定**.</span><span class="sxs-lookup"><span data-stu-id="3c737-212">In the **FILE Transport Properties** dialog box, on the **General**  tab, type `C:\WCFMessageSecurity\OrderRequestOut` in the **Destination folder** text box, and then click **OK**.</span></span>  

   5. <span data-ttu-id="3c737-213">在中**发送端口属性**对话框中，在**筛选器**选项卡上，选择**BTS。ReceivePortName**有关**属性**字段中，输入`WcfMessageSecurity.OrderRequest.Receive`有关**值**字段，，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="3c737-213">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** for the **Property** field, enter `WcfMessageSecurity.OrderRequest.Receive` for the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="3c737-214">此筛选器表达式将路由传入[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]到客户端的消息**WcfMessageSecurity.OrderRequest.Receive**接收到此发送端口的端口。</span><span class="sxs-lookup"><span data-stu-id="3c737-214">This filter expression routes the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the client into the **WcfMessageSecurity.OrderRequest.Receive** receive port to this send port.</span></span>  

## <a name="test-the-wcf-client-against-the-biztalk-application"></a><span data-ttu-id="3c737-215">测试 WCF 客户端对 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="3c737-215">Test the WCF client against the BizTalk application</span></span>  

1. <span data-ttu-id="3c737-216">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，右键单击**WcfMessageSecurity**，然后单击**启动**。</span><span class="sxs-lookup"><span data-stu-id="3c737-216">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WcfMessageSecurity**, and then click **Start**.</span></span> <span data-ttu-id="3c737-217">在中**启动**对话框中，单击**启动**。</span><span class="sxs-lookup"><span data-stu-id="3c737-217">In the **Start** dialog box, click **Start**.</span></span>  

2. <span data-ttu-id="3c737-218">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开**平台设置**，展开**主机实例**，右键单击**BizTalkServerApplication**或另一个相应的主机实例，然后依次**重新启动**。</span><span class="sxs-lookup"><span data-stu-id="3c737-218">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  

3. <span data-ttu-id="3c737-219">创建名为的文件夹**C:\WCFMessageSecurity**文件夹对于此演练的工作文件夹。</span><span class="sxs-lookup"><span data-stu-id="3c737-219">Create a folder named **C:\WCFMessageSecurity** for the working folder for this walkthrough.</span></span> <span data-ttu-id="3c737-220">将演练文件解压缩到此文件夹。</span><span class="sxs-lookup"><span data-stu-id="3c737-220">Extract the walkthrough files to this folder.</span></span>  

4. <span data-ttu-id="3c737-221">在中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，打开**WcfMessageSecurity.sln**中的文件**C:\WCFMessageSecurity**文件夹。</span><span class="sxs-lookup"><span data-stu-id="3c737-221">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], open the **WcfMessageSecurity.sln** file in the **C:\WCFMessageSecurity** folder.</span></span>  

5. <span data-ttu-id="3c737-222">在中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，在解决方案资源管理器，展开**WcfClient**，然后打开**Program.cs**查看。</span><span class="sxs-lookup"><span data-stu-id="3c737-222">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, expand **WcfClient**, and then open **Program.cs** to review.</span></span>  

   - <span data-ttu-id="3c737-223">客户端将消息发送到您在前面过程中创建的 WCF-NetTcp 接收位置。</span><span class="sxs-lookup"><span data-stu-id="3c737-223">The client sends a message to the WCF-NetTcp receive location that you created in the previous procedure.</span></span>  

   - <span data-ttu-id="3c737-224">客户端创建与通道**NetTcpBinding**，然后配置要使用证书进行客户端凭据类型的绑定。</span><span class="sxs-lookup"><span data-stu-id="3c737-224">The client creates a channel with the **NetTcpBinding**, and then configures the binding to use certificates for the client credential type.</span></span>  

   - <span data-ttu-id="3c737-225">客户端配置终结点行为，以便使用在前面过程中安装的客户端验证证书，从而进行客户端验证。</span><span class="sxs-lookup"><span data-stu-id="3c737-225">The client configures the endpoint behavior to use the client authentication certificate that you installed in the previous procedure for the client authentication.</span></span>  

   - <span data-ttu-id="3c737-226">类中，**程序**，实现**IClientMessageInspector**并**IEndpointBehavior**接口，以便显示传出[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]从此消息在命令提示符下的客户端。</span><span class="sxs-lookup"><span data-stu-id="3c737-226">The class, **Program**, implements the **IClientMessageInspector** and **IEndpointBehavior** interfaces to display outgoing [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from this client at a command prompt.</span></span>  

6. <span data-ttu-id="3c737-227">在中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，在解决方案资源管理器中右键单击**WcfMessageSecurity**解决方案，，然后单击**重新生成**。</span><span class="sxs-lookup"><span data-stu-id="3c737-227">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, right-click the **WcfMessageSecurity** solution, and then click **Rebuild**.</span></span>  

7. <span data-ttu-id="3c737-228">在中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，然后在**调试**菜单中，单击**启动但不调试**以运行 WcfClient，从而发送消息到 Wcf-nettcp 接收位置。</span><span class="sxs-lookup"><span data-stu-id="3c737-228">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], on the **Debug** menu, click **Start Without Debugging** to run the WcfClient to send a message to the WCF-NetTcp receive locations.</span></span> <span data-ttu-id="3c737-229">此时将出现一个命令提示符窗口，显示执行结果。</span><span class="sxs-lookup"><span data-stu-id="3c737-229">A command prompt appears to show the execution result.</span></span>  

   1. <span data-ttu-id="3c737-230">在命令提示符下，查看订单请求消息。</span><span class="sxs-lookup"><span data-stu-id="3c737-230">At the command prompt, review the order request message.</span></span> <span data-ttu-id="3c737-231">注意**OrderId**字段和消息的结构。</span><span class="sxs-lookup"><span data-stu-id="3c737-231">Pay attention to the **OrderId** field and the structure of the message.</span></span>  

   2. <span data-ttu-id="3c737-232">在命令提示符处，转至`C:\WCFMessageSecurity\OrderRequestOut`文件夹，然后确保订单请求消息发送的[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]客户端将出现。</span><span class="sxs-lookup"><span data-stu-id="3c737-232">At the command prompt, go to the `C:\WCFMessageSecurity\OrderRequestOut` folder, and then make sure the order request message sent by the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client appears.</span></span>  

   3. <span data-ttu-id="3c737-233">关闭命令提示符。</span><span class="sxs-lookup"><span data-stu-id="3c737-233">Close the command prompt.</span></span>
