---
title: "证书疑难解答方面 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b7013db6-ebf7-4294-a072-e9b5b0ad0de2
caps.latest.revision: "26"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 963dfdd55937fd3e41fa50a5e2a609dd591f728f
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/28/2017
---
# <a name="troubleshooting-certificates"></a><span data-ttu-id="7a9a4-102">证书疑难解答</span><span class="sxs-lookup"><span data-stu-id="7a9a4-102">Troubleshooting Certificates</span></span>
<span data-ttu-id="7a9a4-103">Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可以使用的公钥基础结构 (PKI) 数字证书进行文档加密和解密，文档签名和验证 （不可否认性），并参与方解析。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can make use of public key infrastructure (PKI) digital certificates for purposes of document encryption and decryption, document signing and verification (non-repudiation) and for party resolution.</span></span> <span data-ttu-id="7a9a4-104">本主题介绍各种证书使用情况和配置选项，并提供有关使用与数字证书的一些通用准则[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-104">This topic describes various certification usage scenarios and configuration options and provides some general guidelines for using digital certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="certificate-usage-scenarios-and-configuration-options"></a><span data-ttu-id="7a9a4-105">证书使用方案和配置选项</span><span class="sxs-lookup"><span data-stu-id="7a9a4-105">Certificate Usage Scenarios and Configuration Options</span></span>  
 <span data-ttu-id="7a9a4-106">使用证书时出现的大多数问题[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]是不正确或不完整配置的结果。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-106">Most problems that occur while using certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are a result of incorrect or incomplete configuration.</span></span> <span data-ttu-id="7a9a4-107">例如，将正确的证书导入错误的证书存储、将错误的证书导入正确的证书存储或者未能将适当的信息输入 BizTalk 管理控制台都会导致在使用证书时发生运行时错误。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-107">For example importing the correct certificate into the wrong certificate store, the incorrect certificate into the correct store, or failure to enter the appropriate information into the BizTalk Administration console will cause run-time errors to occur when using certificates.</span></span>  
  
 <span data-ttu-id="7a9a4-108">使用下表作为参考有关证书的使用方案和中可用的配置选项[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="7a9a4-108">Use the following table as a reference for the certificate usage scenarios and configuration options available in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  
  
|<span data-ttu-id="7a9a4-109">**证书使用情况**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-109">**Certificate Usage**</span></span>|<span data-ttu-id="7a9a4-110">**用户上下文**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-110">**User Context**</span></span>|<span data-ttu-id="7a9a4-111">**证书存储位置**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-111">**Certificate Store Location**</span></span>|<span data-ttu-id="7a9a4-112">**证书类型**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-112">**Certificate Type**</span></span>|<span data-ttu-id="7a9a4-113">**使用的管道组件**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-113">**Pipeline Component Used**</span></span>|<span data-ttu-id="7a9a4-114">**BizTalk Server 管理控制台中配置参数**</span><span class="sxs-lookup"><span data-stu-id="7a9a4-114">**Configuration Parameters in the BizTalk Server Administration Console**</span></span>|  
|---------------------------|----------------------|------------------------------------|--------------------------|---------------------------------|-------------------------------------------------------------------------------|  
|<span data-ttu-id="7a9a4-115">加密（发送）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-115">Encryption (Sending)</span></span>|<span data-ttu-id="7a9a4-116">与发送处理程序相关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-116">Account used by the host instance associated with the send handler</span></span>|<span data-ttu-id="7a9a4-117">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载 S/MIME 编码器管道并导入到的加密证书**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-117">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines and import the encryption certificate into the **Local Computer \ Other People** store.</span></span>|<span data-ttu-id="7a9a4-118">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-118">Trading partner public certificate</span></span>|<span data-ttu-id="7a9a4-119">MIME/SMIME 编码器</span><span class="sxs-lookup"><span data-stu-id="7a9a4-119">MIME/SMIME encoder</span></span>|<span data-ttu-id="7a9a4-120">-指定值的加密证书**公用名**和**指纹**上**证书**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-120">-   Specify values for the encryption certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="7a9a4-121">-指定管道**编码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-121">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="7a9a4-122">**配置管道**对话框中将显示单击的按钮旁边**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-122">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>|  
|<span data-ttu-id="7a9a4-123">解密（接收）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-123">Decryption (Receiving)</span></span>|<span data-ttu-id="7a9a4-124">与接收处理程序关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-124">Account used by the host instance associated with the receive handler</span></span>|<span data-ttu-id="7a9a4-125">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载 S/MIME 解码器管道，如每个主机实例的服务帐户，并导入到解密证书**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-125">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines as each host instance service account, and import the decryption certificate to the **Current User \ Personal** store.</span></span> <span data-ttu-id="7a9a4-126">**注意：**对于在 IIS 7.0 的计算机上成功的管道解密，请确保为 IIS 应用程序池帐户和与接收处理程序关联的主机实例所使用的帐户是相同，并且此帐户是的成员\<machineName\>\IIS_WPG 组。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-126">**Note:**  For pipeline decryption to succeed on an IIS 7.0 computer, ensure that the account for the IIS application pool and the account used by the host instance associated with the receive handler are the same and that this account is a member of the \<machineName\>\IIS_WPG group.</span></span> <span data-ttu-id="7a9a4-127">关于设置的 IIS 7.0 的 IIS 进程标识的详细信息，请参阅[解决 IIS 权限问题的指导原则](../core/guidelines-for-resolving-iis-permissions-problems.md)。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-127">For more information about setting IIS process identity for IIS 7.0, see [Guidelines for Resolving IIS Permissions Problems](../core/guidelines-for-resolving-iis-permissions-problems.md).</span></span> <span data-ttu-id="7a9a4-128">这些进程必须以相同的帐户运行，以便确保加载的帐户配置文件还加载了在管道中执行解密所需的注册表项。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-128">These processes must run under the same account to ensure that the account profile is loaded which in turns loads the registry keys required to perform decryption in the pipeline.</span></span> <span data-ttu-id="7a9a4-129">出于性能原因，IIS 6.0 不会加载将帐户配置文件启动关联的 w3wp.exe 进程时因此[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]主机实例必须使用相同的帐户进行配置以便[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将加载帐户配置文件和注册表项。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-129">For performance reasons, IIS 6.0 does not load the account profile when starting the associated w3wp.exe process so the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instance must be configured with the same account so that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will load the account profile and registry keys.</span></span>|<span data-ttu-id="7a9a4-130">私人证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-130">Own private certificate</span></span>|<span data-ttu-id="7a9a4-131">MIME/SMIME 解码器</span><span class="sxs-lookup"><span data-stu-id="7a9a4-131">MIME/SMIME decoder</span></span>|<span data-ttu-id="7a9a4-132">-指定的解密证书值**公用名**和**指纹**上**证书**每个页**主机属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-132">-   Specify values for the decryption certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="7a9a4-133">-指定管道**解码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-133">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="7a9a4-134">**配置管道**对话框中将显示单击的按钮旁边**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-134">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span>|  
|<span data-ttu-id="7a9a4-135">签名（发送）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-135">Signature (Sending)</span></span>|<span data-ttu-id="7a9a4-136">与发送处理程序相关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-136">Account used by the host instance associated with the send handler</span></span>|<span data-ttu-id="7a9a4-137">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载 S/MIME 编码器管道，如每个主机实例的服务帐户，并导入到的签名证书**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-137">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines as each host instance service account, and import the signature certificate to the **Current User \ Personal** store.</span></span>|<span data-ttu-id="7a9a4-138">私人证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-138">Own private certificate</span></span>|<span data-ttu-id="7a9a4-139">MIME/SMIME 编码器</span><span class="sxs-lookup"><span data-stu-id="7a9a4-139">MIME/SMIME encoder</span></span>|<span data-ttu-id="7a9a4-140">-指定值的签名证书**公用名**和**指纹**上**证书**页**BizTalk 组属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-140">-   Specify values for the signature certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **BizTalk Group Properties** dialog box.</span></span> <span data-ttu-id="7a9a4-141">**注意：**可以按每个指定只有一个签名证书[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-141">**Note:**      Only one signature certificate can be specified per each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span><br /><span data-ttu-id="7a9a4-142">-指定管道**编码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-142">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="7a9a4-143">**配置管道**对话框中将显示单击的按钮旁边**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-143">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>|  
|<span data-ttu-id="7a9a4-144">签名验证（接收）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-144">Signature Verification (Receiving)</span></span>|<span data-ttu-id="7a9a4-145">与接收处理程序关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-145">Account used by the host instance associated with the receive handler</span></span>|<span data-ttu-id="7a9a4-146">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载 S/MIME 解码器管道并导入到的签名证书**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-146">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines and import the signature certificate to the **Local Computer \ Other People** store.</span></span>|<span data-ttu-id="7a9a4-147">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-147">Trading partner public certificate</span></span>|<span data-ttu-id="7a9a4-148">MIME/SMIME 解码器</span><span class="sxs-lookup"><span data-stu-id="7a9a4-148">MIME/SMIME decoder</span></span>|<span data-ttu-id="7a9a4-149">-指定验证证书的值**公用名**和**指纹**上**证书**每个页**参与方属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-149">-   Specify values for the verification certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Party Properties** dialog box.</span></span><br /><span data-ttu-id="7a9a4-150">-指定管道**解码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-150">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="7a9a4-151">**配置管道**对话框中将显示单击的按钮旁边**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-151">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="7a9a4-152">**注意：**配置**解码**选项需要部署与 MIME/SMIME 解码器组件的管道。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-152">**Note:**      Configuration of the **Decode** option requires that a pipeline with the MIME/SMIME decoder component is deployed.</span></span>|  
|<span data-ttu-id="7a9a4-153">参与方解析（接收）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-153">Party Resolution (Receiving)</span></span>|<span data-ttu-id="7a9a4-154">与接收处理程序关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-154">Account used by the host instance associated with the receive handler</span></span>|<span data-ttu-id="7a9a4-155">登录到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]计算机从哪方解析为其配置，和导入证书**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-155">Log on to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer from which party resolution is being configured, and import the certificate into the **Local Computer \ Other People** store.</span></span>|<span data-ttu-id="7a9a4-156">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-156">Trading partner public certificate</span></span>|<span data-ttu-id="7a9a4-157">参与方解析</span><span class="sxs-lookup"><span data-stu-id="7a9a4-157">Party resolution</span></span>|<span data-ttu-id="7a9a4-158">-指定证书的值**公用名**和**指纹**上**证书**每个页**主机属性**对话框.</span><span class="sxs-lookup"><span data-stu-id="7a9a4-158">-   Specify values for the certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="7a9a4-159">-指定**ResolveParty**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-159">-   Specify **ResolveParty** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="7a9a4-160">**配置管道**对话框中将显示单击的按钮旁边**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-160">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="7a9a4-161">**注意：**配置此选项需要包含的管道使用**方解析**组件。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-161">**Note:**      Configuration of this option requires the use of a pipeline that contains the **Party resolution** component.</span></span> <span data-ttu-id="7a9a4-162">**XMLReceive**管道包含**方解析**组件。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-162">The **XMLReceive** pipeline contains the **Party resolution** component.</span></span>|  
|<span data-ttu-id="7a9a4-163">HTTPS（发送）</span><span class="sxs-lookup"><span data-stu-id="7a9a4-163">HTTPS (Sending)</span></span>|<span data-ttu-id="7a9a4-164">与发送处理程序相关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="7a9a4-164">Account used by the host instance associated with the send handler</span></span>|<span data-ttu-id="7a9a4-165">SSL 通信无需客户端证书。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-165">SSL communication does not require a client certificate.</span></span> <span data-ttu-id="7a9a4-166">是否要求客户端证书由目标 Web 服务器管理员决定。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-166">Whether a client certificate is required is at the discretion of the destination Web server administrator.</span></span> <span data-ttu-id="7a9a4-167">如果目标 Web 服务器要求客户端证书，则执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="7a9a4-167">If the destination Web server requires a client certificate then follow these steps:</span></span><br /><br /> <span data-ttu-id="7a9a4-168">-从贸易合作伙伴获取的公用证书。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-168">-   Obtain the public certificate from the trading partner.</span></span><br /><span data-ttu-id="7a9a4-169">-登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]作为发送处理程序与关联的主机实例所使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-169">-   Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as the account used by the host instance associated with the send handler.</span></span><br /><span data-ttu-id="7a9a4-170">-导入证书**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-170">-   Import the certificate into the **Current User \ Personal** store.</span></span><br /><br /> <span data-ttu-id="7a9a4-171">有关如何使用 Windows Server 2008 证书服务 Web pages 获取证书的信息，请参阅[请求证书通过 Web](http://go.microsoft.com/fwlink/?LinkId=129628)。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-171">For information about how to obtain a certificate using Windows Server 2008 Certificate Services Web pages, see [Request a Certificate Over the Web](http://go.microsoft.com/fwlink/?LinkId=129628).</span></span>|<span data-ttu-id="7a9a4-172">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-172">Trading partner public certificate</span></span>|<span data-ttu-id="7a9a4-173">不适用</span><span class="sxs-lookup"><span data-stu-id="7a9a4-173">NA</span></span>|<span data-ttu-id="7a9a4-174">-   **HTTP 传输**-设置**SSL 客户端证书指纹**选项**身份验证**选项卡**HTTP 传输属性**对话框.</span><span class="sxs-lookup"><span data-stu-id="7a9a4-174">-   **HTTP Transport** - Set the **SSL client certificate thumbprint** option on the **Authentication** tab of the **HTTP Transport Properties** dialog box.</span></span> <span data-ttu-id="7a9a4-175">**HTTP 传输属性**对话框中将显示通过单击**配置**按钮上**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-175">The **HTTP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="7a9a4-176">-   **SOAP 传输**-设置**客户端证书指纹**选项**常规**选项卡**SOAP 传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-176">-   **SOAP Transport** - Set the **Client certificate thumbprint** option on the **General** tab of the **SOAP Transport Properties** dialog box.</span></span> <span data-ttu-id="7a9a4-177">**SOAP 传输属性**对话框中将显示通过单击**配置**按钮上**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-177">The **SOAP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span>|  
  
#### <a name="to-display-the-certificates-management-console-interface-for-local-computer-and-current-user"></a><span data-ttu-id="7a9a4-178">显示“本地计算机”和“当前用户”的“证书管理控制台”界面</span><span class="sxs-lookup"><span data-stu-id="7a9a4-178">To display the Certificates Management Console interface for Local Computer and Current User</span></span>  
  
1.  <span data-ttu-id="7a9a4-179">单击**启动**，单击**运行**，类型**MMC**，然后单击**确定**以打开**Microsoft 管理控制台**.</span><span class="sxs-lookup"><span data-stu-id="7a9a4-179">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the **Microsoft Management Console**.</span></span>  
  
2.  <span data-ttu-id="7a9a4-180">单击**文件**菜单，，然后单击**添加/删除管理单元中**以显示**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-180">Click the **File** menu, and then click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  
  
3.  <span data-ttu-id="7a9a4-181">选择**证书**从列表中可用的管理单元，然后单击**添加**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-181">Select **Certificates** from the list of available snap-ins and click **Add**.</span></span>  
  
4.  <span data-ttu-id="7a9a4-182">选择**计算机帐户**，单击**下一步**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-182">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="7a9a4-183">这将添加**证书管理控制台**接口**本地计算机**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-183">This will add the **Certificates Management Console** interface for **Local Computer**.</span></span>  
  
5.  <span data-ttu-id="7a9a4-184">确保**证书**从管理单元的列表仍处于选中状态，然后单击**添加**试。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-184">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  
  
6.  <span data-ttu-id="7a9a4-185">选择**我的用户帐户**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-185">Select **My user account** and then click **Finish**.</span></span> <span data-ttu-id="7a9a4-186">这将添加**证书管理控制台**接口**当前用户**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-186">This will add the **Certificates Management Console** interface for **Current User**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="7a9a4-187">此时将显示**证书管理控制台**当前作为登录的帐户。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-187">This displays the **Certificates Management Console** for the account that you are currently logged on as.</span></span> <span data-ttu-id="7a9a4-188">如果您需要为某一服务帐户将证书导入个人存储，则应首先使用该服务帐户的凭据登录。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-188">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  
  
7.  <span data-ttu-id="7a9a4-189">单击**确定**按钮上**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-189">Click the **OK** button on the **Add/Remove Snap-in** dialog box.</span></span>  
  
## <a name="general-guidelines"></a><span data-ttu-id="7a9a4-190">通用指导原则</span><span class="sxs-lookup"><span data-stu-id="7a9a4-190">General Guidelines</span></span>  
  
-   <span data-ttu-id="7a9a4-191">**确保导入的证书针对预期用途使用**： 若要执行此操作，请双击中的证书**证书管理控制台**接口，然后单击**详细信息**选项卡**证书**对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-191">**Ensure that the imported certificate is being used for its intended purpose**: To do this, double-click the certificate in the **Certificates Management Console** interface and then click the **Details** tab of the **Certificate** dialog box.</span></span> <span data-ttu-id="7a9a4-192">然后单击**所有**选项**显示**下拉列表，然后单击以选择**密钥用法**和/或**增强型密钥用法**字段若要验证的预期的用途。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-192">Then click the **All** option for the **Show** drop-down list and then click to select the **Key Usage** and/or **Enhanced Key Usage** fields to verify the intended purpose.</span></span> <span data-ttu-id="7a9a4-193">如果[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]会尝试使用证书为以外其预期用途的运行时错误。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-193">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] attempts to use a certificate for other than its intended purpose a runtime error will occur.</span></span>  
  
-   <span data-ttu-id="7a9a4-194">**测试目标 Web 站点的连接**： 如果你使用 SSL，确保你可以连接到目标 Web 站点使用 Internet Explorer 在尝试连接到目标 Web 站点使用的 HTTP 或 SOAP 传输之前。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-194">**Test your connection to the target Web site**: If you are using SSL, ensure that you can connect to the target Web site with Internet Explorer before attempting to connect to the target Web site with the HTTP or SOAP transports.</span></span> <span data-ttu-id="7a9a4-195">验证连接到目标 Web 站点时，在 Internet Explorer 中显示任何对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-195">Verify that no dialog boxes are displayed in Internet Explorer when you connect to the target Web site.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="7a9a4-196">不具有任何机制进行连接与连接到目标 web 站点时，可能会显示任何对话框。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-196"> has no mechanism for interfacing with any dialog boxes that might be displayed when connecting to the target web site.</span></span> <span data-ttu-id="7a9a4-197">可能由 Internet Explorer 显示一个对话框，如果目标网站名称不匹配的 SSL 证书中的 web 站点为指定的名称或 SSL 证书的根证书颁发机构不在相应**受信任的根证书颁发机构**存储。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-197">A dialog box may be displayed by Internet Explorer if the target web site name does not match the name specified for the web site in the SSL certificate or if the Root Certificate Authority for the SSL certificate is not in the appropriate **Trusted Root Certification Authorities** store.</span></span>  
  
-   <span data-ttu-id="7a9a4-198">**使用 SSL 诊断工具分析 SSL 连接问题：** SSL 诊断工具是 IIS 诊断工具包的可选组件。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-198">**Use the SSL Diagnostics tool to analyze SSL connection issues:** The SSL Diagnostics tool is an optional component of the IIS Diagnostics Toolkit.</span></span>  <span data-ttu-id="7a9a4-199">下载 IIS 诊断工具包从[Internet 信息服务诊断工具](http://go.microsoft.com/fwlink/?LinkId=64426)。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-199">Download the IIS Diagnostics Toolkit from [Internet Information Services Diagnostic Tools](http://go.microsoft.com/fwlink/?LinkId=64426).</span></span>  
  
-   <span data-ttu-id="7a9a4-200">**请确保证书有效**。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-200">**Ensure that the certificate is valid**.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="7a9a4-201">如果证书已过期，不会提示你。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-201"> does not prompt you if the certificate has expired.</span></span> <span data-ttu-id="7a9a4-202">但 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 会挂起消息。</span><span class="sxs-lookup"><span data-stu-id="7a9a4-202">Instead, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will suspend the message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a9a4-203">另请参阅</span><span class="sxs-lookup"><span data-stu-id="7a9a4-203">See Also</span></span>  
 [<span data-ttu-id="7a9a4-204">加密和签名证书</span><span class="sxs-lookup"><span data-stu-id="7a9a4-204">Encryption and Signing Certificates</span></span>](../core/encryption-and-signing-certificates.md)