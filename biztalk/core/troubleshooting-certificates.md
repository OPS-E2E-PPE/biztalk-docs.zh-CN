---
title: 证书疑难解答 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b7013db6-ebf7-4294-a072-e9b5b0ad0de2
caps.latest.revision: 26
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e9db2898f2d40103ed31f4da417d390dc0132dd2
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65296654"
---
# <a name="troubleshooting-certificates"></a><span data-ttu-id="0c8a6-102">证书疑难解答</span><span class="sxs-lookup"><span data-stu-id="0c8a6-102">Troubleshooting Certificates</span></span>
<span data-ttu-id="0c8a6-103">Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可以进行针对进行文档加密和解密，文档签名和验证 （不可否认性） 和参与方解析使用的公钥基础结构 (PKI) 数字证书。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can make use of public key infrastructure (PKI) digital certificates for purposes of document encryption and decryption, document signing and verification (non-repudiation) and for party resolution.</span></span> <span data-ttu-id="0c8a6-104">本主题介绍了各种证书使用方案和配置选项和有关将数字证书用于提供一些通用准则[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-104">This topic describes various certification usage scenarios and configuration options and provides some general guidelines for using digital certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  

## <a name="certificate-usage-scenarios-and-configuration-options"></a><span data-ttu-id="0c8a6-105">证书使用方案和配置选项</span><span class="sxs-lookup"><span data-stu-id="0c8a6-105">Certificate Usage Scenarios and Configuration Options</span></span>  
 <span data-ttu-id="0c8a6-106">使用证书时出现的大多数问题[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]是不正确或不完整配置的结果。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-106">Most problems that occur while using certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are a result of incorrect or incomplete configuration.</span></span> <span data-ttu-id="0c8a6-107">例如导入错误的证书存储的正确的证书，到正确的存储或未能在 BizTalk 管理控制台中输入相应信息不正确的证书将导致出现运行时错误时使用证书。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-107">For example importing the correct certificate into the wrong certificate store, the incorrect certificate into the correct store, or failure to enter the appropriate information into the BizTalk Administration console will cause run-time errors to occur when using certificates.</span></span>  

 <span data-ttu-id="0c8a6-108">使用下表作为参考的证书使用方案和配置选项中提供的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="0c8a6-108">Use the following table as a reference for the certificate usage scenarios and configuration options available in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  


|       <span data-ttu-id="0c8a6-109">**证书使用情况**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-109">**Certificate Usage**</span></span>        |                           <span data-ttu-id="0c8a6-110">**用户上下文**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-110">**User Context**</span></span>                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="0c8a6-111">**证书存储位置**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-111">**Certificate Store Location**</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |        <span data-ttu-id="0c8a6-112">**证书类型**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-112">**Certificate Type**</span></span>        | <span data-ttu-id="0c8a6-113">**使用的管道组件**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-113">**Pipeline Component Used**</span></span> |                                                                                                                                                                                                                                                                                         <span data-ttu-id="0c8a6-114">**在 BizTalk Server 管理控制台中的配置参数**</span><span class="sxs-lookup"><span data-stu-id="0c8a6-114">**Configuration Parameters in the BizTalk Server Administration Console**</span></span>                                                                                                                                                                                                                                                                                         |
|------------------------------------|-----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|        <span data-ttu-id="0c8a6-115">加密 （发送）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-115">Encryption (Sending)</span></span>        |  <span data-ttu-id="0c8a6-116">使用与发送处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-116">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="0c8a6-117">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 编码器管道的宿主，并将加密证书导入**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-117">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines and import the encryption certificate into the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | <span data-ttu-id="0c8a6-118">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-118">Trading partner public certificate</span></span> |     <span data-ttu-id="0c8a6-119">MIME/SMIME 编码器</span><span class="sxs-lookup"><span data-stu-id="0c8a6-119">MIME/SMIME encoder</span></span>      |                                                                                                      <span data-ttu-id="0c8a6-120">-为指定值的加密证书**公用名**并**指纹**上**证书**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-120">-   Specify values for the encryption certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="0c8a6-121">-指定管道**编码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-121">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="0c8a6-122">**配置管道**通过单击下一步按钮将显示对话框**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-122">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>                                                                                                       |
|       <span data-ttu-id="0c8a6-123">解密 （接收）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-123">Decryption (Receiving)</span></span>       | <span data-ttu-id="0c8a6-124">使用与接收处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-124">Account used by the host instance associated with the receive handler</span></span> | <span data-ttu-id="0c8a6-125">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 解码器管道的宿主为每个主机实例服务帐户，并将解密证书导入**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-125">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines as each host instance service account, and import the decryption certificate to the **Current User \ Personal** store.</span></span> <span data-ttu-id="0c8a6-126">**注意：** 在 IIS 7.0 的计算机上成功执行管道解密，请确保为 IIS 应用程序池帐户和与接收处理程序关联的主机实例使用的帐户是相同的并且此帐户是属于\<machineName\>\IIS_WPG 组。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-126">**Note:**  For pipeline decryption to succeed on an IIS 7.0 computer, ensure that the account for the IIS application pool and the account used by the host instance associated with the receive handler are the same and that this account is a member of the \<machineName\>\IIS_WPG group.</span></span> <span data-ttu-id="0c8a6-127">有关为 IIS 7.0 设置 IIS 进程标识的详细信息，请参阅[解决 IIS 权限疑难问题的准则](../core/guidelines-for-resolving-iis-permissions-problems.md)。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-127">For more information about setting IIS process identity for IIS 7.0, see [Guidelines for Resolving IIS Permissions Problems](../core/guidelines-for-resolving-iis-permissions-problems.md).</span></span> <span data-ttu-id="0c8a6-128">这些进程必须以确保在加载管道中执行解密所需的注册表项加载帐户配置文件的同一帐户下运行。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-128">These processes must run under the same account to ensure that the account profile is loaded which in turns loads the registry keys required to perform decryption in the pipeline.</span></span> <span data-ttu-id="0c8a6-129">出于性能原因，IIS 6.0 不加载帐户配置文件启动关联的 w3wp.exe 进程时，因此[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]必须使用相同的帐户配置主机实例，以便[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将一起加载帐户配置文件和注册表项。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-129">For performance reasons, IIS 6.0 does not load the account profile when starting the associated w3wp.exe process so the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instance must be configured with the same account so that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will load the account profile and registry keys.</span></span> |      <span data-ttu-id="0c8a6-130">私人证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-130">Own private certificate</span></span>       |     <span data-ttu-id="0c8a6-131">MIME/SMIME 解码器</span><span class="sxs-lookup"><span data-stu-id="0c8a6-131">MIME/SMIME decoder</span></span>      |                                                                                                   <span data-ttu-id="0c8a6-132">-指定的解密证书值**公用名**并**指纹**上**证书**的每个页**主机属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-132">-   Specify values for the decryption certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="0c8a6-133">-指定管道**解码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-133">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="0c8a6-134">**配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-134">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span>                                                                                                   |
|        <span data-ttu-id="0c8a6-135">签名 （发送）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-135">Signature (Sending)</span></span>         |  <span data-ttu-id="0c8a6-136">使用与发送处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-136">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="0c8a6-137">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 编码器管道的宿主为每个主机实例服务帐户，并为签名证书导入**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-137">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines as each host instance service account, and import the signature certificate to the **Current User \ Personal** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |      <span data-ttu-id="0c8a6-138">私人证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-138">Own private certificate</span></span>       |     <span data-ttu-id="0c8a6-139">MIME/SMIME 编码器</span><span class="sxs-lookup"><span data-stu-id="0c8a6-139">MIME/SMIME encoder</span></span>      |                    <span data-ttu-id="0c8a6-140">-指定值的签名证书**公用名**并**指纹**上**证书**页**BizTalk 组属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-140">-   Specify values for the signature certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **BizTalk Group Properties** dialog box.</span></span> <span data-ttu-id="0c8a6-141">**注意：**     可以按每个指定只有一个签名证书[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-141">**Note:**      Only one signature certificate can be specified per each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span><br /><span data-ttu-id="0c8a6-142">-指定管道**编码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-142">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="0c8a6-143">**配置管道**通过单击下一步按钮将显示对话框**发送管道**上的下拉列表**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-143">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>                    |
| <span data-ttu-id="0c8a6-144">签名验证 （接收）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-144">Signature Verification (Receiving)</span></span> | <span data-ttu-id="0c8a6-145">使用与接收处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-145">Account used by the host instance associated with the receive handler</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="0c8a6-146">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将 S/MIME 解码器管道的宿主并导入到的签名证书**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-146">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines and import the signature certificate to the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="0c8a6-147">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-147">Trading partner public certificate</span></span> |     <span data-ttu-id="0c8a6-148">MIME/SMIME 解码器</span><span class="sxs-lookup"><span data-stu-id="0c8a6-148">MIME/SMIME decoder</span></span>      |                                <span data-ttu-id="0c8a6-149">-指定用于验证证书的值**公用名**并**指纹**上**证书**的每个页**参与方属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-149">-   Specify values for the verification certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Party Properties** dialog box.</span></span><br /><span data-ttu-id="0c8a6-150">-指定管道**解码**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-150">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="0c8a6-151">**配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-151">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="0c8a6-152">**注意：**     配置**解码**选项要求部署具有 MIME/SMIME 解码器组件的管道。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-152">**Note:**      Configuration of the **Decode** option requires that a pipeline with the MIME/SMIME decoder component is deployed.</span></span>                                 |
|    <span data-ttu-id="0c8a6-153">参与方解析 （接收）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-153">Party Resolution (Receiving)</span></span>    | <span data-ttu-id="0c8a6-154">使用与接收处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-154">Account used by the host instance associated with the receive handler</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="0c8a6-155">登录到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]哪个参与方解析为其配置和将证书导入计算机**本地计算机 \ 其他人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-155">Log on to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer from which party resolution is being configured, and import the certificate into the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="0c8a6-156">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-156">Trading partner public certificate</span></span> |      <span data-ttu-id="0c8a6-157">参与方解析</span><span class="sxs-lookup"><span data-stu-id="0c8a6-157">Party resolution</span></span>       |       <span data-ttu-id="0c8a6-158">-指定证书的值**公用名**并**指纹**上**证书**的每个页**主机属性**对话框.</span><span class="sxs-lookup"><span data-stu-id="0c8a6-158">-   Specify values for the certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="0c8a6-159">-指定**解析参与方**中的选项**配置管道**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-159">-   Specify **ResolveParty** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="0c8a6-160">**配置管道**通过单击下一步按钮将显示对话框**接收管道**上的下拉列表**常规**页**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-160">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="0c8a6-161">**注意：**     此选项的配置需要使用包含的管道**参与方解析**组件。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-161">**Note:**      Configuration of this option requires the use of a pipeline that contains the **Party resolution** component.</span></span> <span data-ttu-id="0c8a6-162">**XMLReceive**管道包含**参与方解析**组件。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-162">The **XMLReceive** pipeline contains the **Party resolution** component.</span></span>       |
|          <span data-ttu-id="0c8a6-163">HTTPS （发送）</span><span class="sxs-lookup"><span data-stu-id="0c8a6-163">HTTPS (Sending)</span></span>           |  <span data-ttu-id="0c8a6-164">使用与发送处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="0c8a6-164">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                     <span data-ttu-id="0c8a6-165">SSL 通信不需要客户端证书。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-165">SSL communication does not require a client certificate.</span></span> <span data-ttu-id="0c8a6-166">客户端证书是否需要是目标 Web 服务器管理员决定。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-166">Whether a client certificate is required is at the discretion of the destination Web server administrator.</span></span> <span data-ttu-id="0c8a6-167">如果目标 Web 服务器要求客户端证书，则执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="0c8a6-167">If the destination Web server requires a client certificate then follow these steps:</span></span><br /><br /> <span data-ttu-id="0c8a6-168">-从贸易合作伙伴获取公共证书。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-168">-   Obtain the public certificate from the trading partner.</span></span><br /><span data-ttu-id="0c8a6-169">-登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]作为与发送处理程序关联的主机实例使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-169">-   Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as the account used by the host instance associated with the send handler.</span></span><br /><span data-ttu-id="0c8a6-170">-将证书导入**当前用户 \ 个人**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-170">-   Import the certificate into the **Current User \ Personal** store.</span></span><br /><br /> <span data-ttu-id="0c8a6-171">有关如何使用 Windows Server 2008 证书服务网页获取证书的信息，请参阅[请求证书通过 Web](http://go.microsoft.com/fwlink/?LinkId=129628)。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-171">For information about how to obtain a certificate using Windows Server 2008 Certificate Services Web pages, see [Request a Certificate Over the Web](http://go.microsoft.com/fwlink/?LinkId=129628).</span></span>                                                                                                                                                                                                                                                                      | <span data-ttu-id="0c8a6-172">贸易合作伙伴公共证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-172">Trading partner public certificate</span></span> |             <span data-ttu-id="0c8a6-173">不适用</span><span class="sxs-lookup"><span data-stu-id="0c8a6-173">NA</span></span>              | <span data-ttu-id="0c8a6-174">-   **HTTP 传输**-设置**SSL 客户端证书指纹**选项卡上**身份验证**选项卡**HTTP 传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-174">-   **HTTP Transport** - Set the **SSL client certificate thumbprint** option on the **Authentication** tab of the **HTTP Transport Properties** dialog box.</span></span> <span data-ttu-id="0c8a6-175">**HTTP 传输属性**通过单击显示对话框**配置**按钮**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-175">The **HTTP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="0c8a6-176">-   **SOAP 传输**-设置**客户端证书指纹**选项卡上**常规**选项卡**SOAP 传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-176">-   **SOAP Transport** - Set the **Client certificate thumbprint** option on the **General** tab of the **SOAP Transport Properties** dialog box.</span></span> <span data-ttu-id="0c8a6-177">**SOAP 传输属性**通过单击显示对话框**配置**按钮**常规**页**发送端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-177">The **SOAP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span> |

#### <a name="to-display-the-certificates-management-console-interface-for-local-computer-and-current-user"></a><span data-ttu-id="0c8a6-178">若要显示本地计算机和当前用户证书管理控制台接口</span><span class="sxs-lookup"><span data-stu-id="0c8a6-178">To display the Certificates Management Console interface for Local Computer and Current User</span></span>  

1.  <span data-ttu-id="0c8a6-179">单击**启动**，单击**运行**，类型**MMC**，然后单击**确定**打开**Microsoft 管理控制台**.</span><span class="sxs-lookup"><span data-stu-id="0c8a6-179">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the **Microsoft Management Console**.</span></span>  

2.  <span data-ttu-id="0c8a6-180">单击**文件**菜单，并单击**添加/删除管理单元中**以显示**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-180">Click the **File** menu, and then click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  

3.  <span data-ttu-id="0c8a6-181">选择**证书**从列表中可用的管理单元，然后单击**添加**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-181">Select **Certificates** from the list of available snap-ins and click **Add**.</span></span>  

4.  <span data-ttu-id="0c8a6-182">选择**计算机帐户**，单击**下一步**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-182">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="0c8a6-183">这将添加**证书管理控制台**接口**本地计算机**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-183">This will add the **Certificates Management Console** interface for **Local Computer**.</span></span>  

5.  <span data-ttu-id="0c8a6-184">絋粄**证书**从管理单元的列表仍处于选中状态，然后单击**添加**试。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-184">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  

6.  <span data-ttu-id="0c8a6-185">选择**我的用户帐户**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-185">Select **My user account** and then click **Finish**.</span></span> <span data-ttu-id="0c8a6-186">这将添加**证书管理控制台**接口**当前用户**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-186">This will add the **Certificates Management Console** interface for **Current User**.</span></span>  

    > [!NOTE]
    >  <span data-ttu-id="0c8a6-187">这将显示**证书管理控制台**当前以登录的帐户。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-187">This displays the **Certificates Management Console** for the account that you are currently logged on as.</span></span> <span data-ttu-id="0c8a6-188">如果你需要将证书导入的服务帐户的个人存储然后您应该登录使用服务帐户凭据第一次。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-188">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  

7.  <span data-ttu-id="0c8a6-189">单击**确定**按钮**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-189">Click the **OK** button on the **Add/Remove Snap-in** dialog box.</span></span>  

## <a name="general-guidelines"></a><span data-ttu-id="0c8a6-190">通用指导原则</span><span class="sxs-lookup"><span data-stu-id="0c8a6-190">General Guidelines</span></span>  

- <span data-ttu-id="0c8a6-191">**请确保导入的证书，用于其预期目的**:若要执行此操作，请双击中的证书**证书管理控制台**接口，然后单击**详细信息**选项卡**证书**对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-191">**Ensure that the imported certificate is being used for its intended purpose**: To do this, double-click the certificate in the **Certificates Management Console** interface and then click the **Details** tab of the **Certificate** dialog box.</span></span> <span data-ttu-id="0c8a6-192">然后单击**所有**选项**显示**下拉列表，然后单击此项可选择**密钥用法**和/或**增强型密钥用法**字段若要验证的预期的用途。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-192">Then click the **All** option for the **Show** drop-down list and then click to select the **Key Usage** and/or **Enhanced Key Usage** fields to verify the intended purpose.</span></span> <span data-ttu-id="0c8a6-193">如果[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]尝试将证书用于其预期用途的运行时错误而不会发生。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-193">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] attempts to use a certificate for other than its intended purpose a runtime error will occur.</span></span>  

- <span data-ttu-id="0c8a6-194">**测试连接到目标 Web 站点**:如果在使用 SSL，确保你可以连接到目标 Web 站点使用 Internet Explorer 然后再尝试连接到目标网站，使用 HTTP 或 SOAP 传输。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-194">**Test your connection to the target Web site**: If you are using SSL, ensure that you can connect to the target Web site with Internet Explorer before attempting to connect to the target Web site with the HTTP or SOAP transports.</span></span> <span data-ttu-id="0c8a6-195">验证连接到目标网站时无对话框显示在 Internet Explorer 中。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-195">Verify that no dialog boxes are displayed in Internet Explorer when you connect to the target Web site.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="0c8a6-196">不已连接的任何机制与连接到目标网站时可能会显示任何对话框。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-196">has no mechanism for interfacing with any dialog boxes that might be displayed when connecting to the target web site.</span></span> <span data-ttu-id="0c8a6-197">Internet Explorer 可能会显示一个对话框，如果目标网站名称不匹配的 SSL 证书中的 web 站点为指定的名称，或如果 SSL 证书的根证书颁发机构不在相应**受信任的根证书颁发机构**存储。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-197">A dialog box may be displayed by Internet Explorer if the target web site name does not match the name specified for the web site in the SSL certificate or if the Root Certificate Authority for the SSL certificate is not in the appropriate **Trusted Root Certification Authorities** store.</span></span>  

- <span data-ttu-id="0c8a6-198">**使用 SSL 诊断工具可以分析 SSL 连接问题：** SSL 诊断工具是 IIS 诊断工具包的可选组件。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-198">**Use the SSL Diagnostics tool to analyze SSL connection issues:** The SSL Diagnostics tool is an optional component of the IIS Diagnostics Toolkit.</span></span>  <span data-ttu-id="0c8a6-199">下载 IIS 诊断工具包从[Internet 信息服务诊断工具](http://go.microsoft.com/fwlink/?LinkId=64426)。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-199">Download the IIS Diagnostics Toolkit from [Internet Information Services Diagnostic Tools](http://go.microsoft.com/fwlink/?LinkId=64426).</span></span>  

- <span data-ttu-id="0c8a6-200">**请确保证书有效**。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-200">**Ensure that the certificate is valid**.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="0c8a6-201">如果该证书已过期，不会提示您。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-201">does not prompt you if the certificate has expired.</span></span> <span data-ttu-id="0c8a6-202">相反，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将挂起该消息。</span><span class="sxs-lookup"><span data-stu-id="0c8a6-202">Instead, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will suspend the message.</span></span>  

## <a name="see-also"></a><span data-ttu-id="0c8a6-203">请参阅</span><span class="sxs-lookup"><span data-stu-id="0c8a6-203">See Also</span></span>  
 [<span data-ttu-id="0c8a6-204">加密和签名证书</span><span class="sxs-lookup"><span data-stu-id="0c8a6-204">Encryption and Signing Certificates</span></span>](../core/encryption-and-signing-certificates.md)