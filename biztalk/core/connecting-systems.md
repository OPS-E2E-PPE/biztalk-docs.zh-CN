---
title: 连接系统 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 4c4895e5-7272-415f-a0de-905256fa0a43
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 949627c621dcedc26be98a175eae890193f61ac4
ms.sourcegitcommit: bab8f4abca27edc45f9f4601ada6f3fc6a2b87cd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/18/2019
ms.locfileid: "67189088"
---
# <a name="connecting-systems"></a><span data-ttu-id="bdd1e-102">连接系统</span><span class="sxs-lookup"><span data-stu-id="bdd1e-102">Connecting Systems</span></span>
<span data-ttu-id="bdd1e-103">有效的不同计算机上的不同软件之间的消息交换是绝对必需的集成。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-103">The effective exchange of messages across different software on different machines is an absolute requirement for integration.</span></span> <span data-ttu-id="bdd1e-104">考虑到现有通信方式多种多样，BizTalk Server 必须支持各种协议和消息格式。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-104">Given the diversity of communication styles that exist, BizTalk Server must support a variety of protocols and message formats.</span></span> <span data-ttu-id="bdd1e-105">按下文所述，该引擎的重要部分专门介绍实现此通信。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-105">As described next, a significant portion of the engine is devoted to making this communication work.</span></span> <span data-ttu-id="bdd1e-106">要记住，一个重要事实，但该引擎内部只使用 XML 文档。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-106">One important fact to keep in mind, however, is that the engine works only with XML documents internally.</span></span> <span data-ttu-id="bdd1e-107">在任何格式一条消息到达时，必须转换为 XML 文档是收到。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-107">Whatever format a message arrives in, it must be converted to an XML document after it is received.</span></span> <span data-ttu-id="bdd1e-108">同样，如果文档的收件人不能接受该文档为 XML，则引擎将其转换为目标所需的格式。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-108">Similarly, if the recipient of a document can’t accept that document as XML, the engine converts it into the format expected by the target.</span></span>  
  
## <a name="sending-and-receiving-messages-adapters"></a><span data-ttu-id="bdd1e-109">发送和接收消息：适配器</span><span class="sxs-lookup"><span data-stu-id="bdd1e-109">Sending and Receiving Messages: Adapters</span></span>  
 <span data-ttu-id="bdd1e-110">BizTalk Server 必须与各种其他软件进行通信，因为它依赖适配器来实现此类。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-110">Because BizTalk Server must talk to a variety of other software, it relies on adapters to make this possible.</span></span> <span data-ttu-id="bdd1e-111">适配器是一种通信机制，例如特定的协议的实现。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-111">An adapter is an implementation of a communication mechanism, such as a particular protocol.</span></span> <span data-ttu-id="bdd1e-112">开发人员确定要在给定情况下使用的适配器。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-112">A developer determines which adapters to use in a given situation.</span></span> <span data-ttu-id="bdd1e-113">它们可能会选择 BizTalk Server 提供，例如，内置适配器之一或使用为诸如 Windows SharePoint Services 之类的常用产品创建的适配器或甚至可以创建自定义适配器。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-113">They might choose one of the built-in adapters BizTalk Server provides, for example, or use an adapter created for a popular product such as Windows SharePoint Services, or even create a custom adapter.</span></span> <span data-ttu-id="bdd1e-114">在每个这种情况下，适配器是基于名为适配器框架的标准结构。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-114">In each of these cases, the adapter is built on a standard base called the Adapter Framework.</span></span> <span data-ttu-id="bdd1e-115">此框架提供一种方式来创建和运行适配器的支持，并且它还支持相同的工具用于管理所有适配器类型。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-115">This framework provides a common way to create and run adapters, and it also supports the same tools used to manage all of the adapter types.</span></span>  
  
 <span data-ttu-id="bdd1e-116">Microsoft BizTalk Server 包含以下本地适配器：</span><span class="sxs-lookup"><span data-stu-id="bdd1e-116">Microsoft BizTalk Server includes the following native adapters:</span></span>  
  
- <span data-ttu-id="bdd1e-117">文件适配器： 支持读取和写入到文件中的 Windows 文件系统。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-117">File adapter: supports reading from and writing to files in the Windows file system.</span></span> <span data-ttu-id="bdd1e-118">由于业务流程中所涉及的应用程序通常可以访问相同的文件系统，本地或网络中，通过文件交换消息可以是一个方便的选项。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-118">Because the applications involved in a business process can often access the same file system, either locally or across a network, exchanging messages through files can be a convenient option.</span></span>  
  
- <span data-ttu-id="bdd1e-119">FTP 适配器： 支持发送和接收文件传输协议 (FTP) 服务器与 BizTalk Server 之间的信息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-119">FTP adapter: supports sending and receiving information between a File Transport Protocol (FTP) Server and BizTalk Server.</span></span>  
  
- <span data-ttu-id="bdd1e-120">HTTP 适配器： 支持发送和接收使用 HTTP 的信息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-120">HTTP adapter: supports sending and receiving information using HTTP.</span></span> <span data-ttu-id="bdd1e-121">BizTalk Server 公开一个或多个 Url，以便其他应用程序以将数据发送到它，并且它可以使用此适配器将数据发送到其他 Url。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-121">BizTalk Server exposes one or more URLs to allow other applications to send data to it, and it can use this adapter to send data to other URLs.</span></span>  
  
- <span data-ttu-id="bdd1e-122">MSMQ 适配器： 支持发送和接收消息使用 Microsoft 消息队列 (MSMQ)。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-122">MSMQ adapter: supports sending and receiving messages using Microsoft Message Queuing (MSMQ).</span></span>  
  
- <span data-ttu-id="bdd1e-123">WebSphere MQ 适配器： 支持发送和接收消息使用 IBM 的 WebSphere MQ （以前称为 MQSeries）。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-123">WebSphere MQ adapter: supports sending and receiving messages using IBM’s WebSphere MQ (formerly known as MQSeries).</span></span>  
  
- <span data-ttu-id="bdd1e-124">POP3 适配器： 支持接收电子邮件及其附件使用邮局协议 (POP3) 的第三版。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-124">POP3 adapter: supports receiving e-mail messages and their attachments using version three of the Post Office Protocol (POP3).</span></span>  
  
- <span data-ttu-id="bdd1e-125">SMTP 适配器： 支持使用 SMTP 发送消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-125">SMTP adapter: supports sending messages using SMTP.</span></span> <span data-ttu-id="bdd1e-126">标准电子邮件地址用于标识参与方。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-126">Standard e-mail addresses are used to identify the parties.</span></span>  
  
- <span data-ttu-id="bdd1e-127">SOAP 适配器： 支持发送和接收 Web 服务请求，以使 BizTalk Server 要连接到 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-127">SOAP adapter: supports sending and receiving Web service requests to enable BizTalk Server to connect to Web Services.</span></span>  
  
- <span data-ttu-id="bdd1e-128">WCF 适配器： 支持发送和接收使用 Windows Communication Foundation 的信息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-128">WCF adapters: supports sending and receiving information using Windows Communication Foundation.</span></span>  
  
- <span data-ttu-id="bdd1e-129">Windows SharePoint Services (WSS) 适配器： 支持访问和发布在 Microsoft Windows SharePoint 文档库中存储的文档。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-129">Windows SharePoint Services (WSS) adapter: supports accessing and publishing documents stored in Microsoft Windows SharePoint document libraries.</span></span>  
  
  <span data-ttu-id="bdd1e-130">适配器用于常用商业软件也是 Microsoft 提供的其中包括：</span><span class="sxs-lookup"><span data-stu-id="bdd1e-130">Adapters for commonly-used business software are also available from Microsoft, these include:</span></span>  
  
- <span data-ttu-id="bdd1e-131">Microsoft BizTalk Adapter for JD Edwards OneWorld</span><span class="sxs-lookup"><span data-stu-id="bdd1e-131">Microsoft BizTalk Adapter for JD Edwards OneWorld</span></span>  
  
- <span data-ttu-id="bdd1e-132">Microsoft BizTalk Adapter for JD Edwards EnterpriseOne</span><span class="sxs-lookup"><span data-stu-id="bdd1e-132">Microsoft BizTalk Adapter for JD Edwards EnterpriseOne</span></span>  
  
- <span data-ttu-id="bdd1e-133">Microsoft BizTalk Adapter for PeopleSoft Enterprise</span><span class="sxs-lookup"><span data-stu-id="bdd1e-133">Microsoft BizTalk Adapter for PeopleSoft Enterprise</span></span>  
  
- <span data-ttu-id="bdd1e-134">Microsoft BizTalk Adapter for TIBCO Rendezvous</span><span class="sxs-lookup"><span data-stu-id="bdd1e-134">Microsoft BizTalk Adapter for TIBCO Rendezvous</span></span>  
  
- <span data-ttu-id="bdd1e-135">用于 TIBCO Enterprise Message Service 的 Microsoft BizTalk 适配器</span><span class="sxs-lookup"><span data-stu-id="bdd1e-135">Microsoft BizTalk Adapter for TIBCO Enterprise Message Service</span></span>  
  
  <span data-ttu-id="bdd1e-136">有关与这些适配器相关的详细信息，请参阅[BizTalk Server 中的适配器](../core/adapters-in-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-136">For more information about these adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
  <span data-ttu-id="bdd1e-137">无论适配器用于接收数据，它们可以访问由业务流程之前，通常必须处理它接收的消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-137">Whichever adapter is used to receive data, the messages it receives must commonly be processed before they can be accessed by an orchestration.</span></span> <span data-ttu-id="bdd1e-138">同样，传出消息生成的业务流程通常需要通过适配器发送前处理。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-138">Similarly, outgoing messages produced by an orchestration often need to be processed before they are sent by an adapter.</span></span>  
  
## <a name="processing-messages-pipelines"></a><span data-ttu-id="bdd1e-139">处理消息：管道</span><span class="sxs-lookup"><span data-stu-id="bdd1e-139">Processing Messages: Pipelines</span></span>  
 <span data-ttu-id="bdd1e-140">业务流程中涉及的应用程序通过交换各种文档进行通信： 例如，采购订单和发票。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-140">The applications underlying a business process communicate by exchanging various kinds of documents: for examples, purchase orders and  invoices.</span></span> <span data-ttu-id="bdd1e-141">BizTalk Server 应用程序执行业务流程，它必须能够正确处理包含这些文档的消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-141">For a BizTalk Server application to execute a business process, it must be able to correctly deal with the messages that contain these documents.</span></span> <span data-ttu-id="bdd1e-142">此处理过程可能涉及到多个步骤，并因此通过消息管道来执行。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-142">This processing can involve multiple steps, and hence is performed by a message pipeline.</span></span> <span data-ttu-id="bdd1e-143">处理传入消息时由接收管道，而传出消息通过发送管道。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-143">Incoming messages are processed through a receive pipeline, while outgoing messages go through a send pipeline.</span></span>  
  
 <span data-ttu-id="bdd1e-144">例如，即使更多应用程序已设计为可理解 XML 文档，很多，很可能是大多数目前 — 不能。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-144">For example, even though more applications are being designed to understand XML documents, many—probably the majority today—cannot.</span></span> <span data-ttu-id="bdd1e-145">由于 BizTalk Server 内部只使用 XML 文档，它必须提供一种方法，以其他格式与 XML 之间相互转换。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-145">Because BizTalk Server works only with XML documents internally, it must provide a way to convert other formats to and from XML.</span></span> <span data-ttu-id="bdd1e-146">其他服务也可能是必需的例如进行身份验证消息的发件人。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-146">Other services may also be required, such as authenticating the sender of a message.</span></span> <span data-ttu-id="bdd1e-147">若要处理这些任务和其他任务的模块化且可自定义方式，来构造管道，通过一定数量的阶段，其中每个包含一个或多个。NET 启用或组件对象模型 (COM) 组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-147">To handle these and other tasks in a modular, yet customizable way, a pipeline is constructed from some number of stages, each of which contains one or more .NET-enabled or Component Object Model (COM) components.</span></span> <span data-ttu-id="bdd1e-148">每个组件处理特定消息处理的部分。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-148">Each component handles a particular part of message processing.</span></span> <span data-ttu-id="bdd1e-149">BizTalk Server 提供了几个标准组件，用于解决最常见的情况。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-149">BizTalk Server provides several standard components that address the most common cases.</span></span> <span data-ttu-id="bdd1e-150">如果这些无法满足需要，开发人员还可以创建自定义两个组件接收和发送管道。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-150">If these aren’t sufficient, developers can also create custom components for both receive and send pipelines.</span></span>  
  
 <span data-ttu-id="bdd1e-151">![](../core/media/understandingbts-05-pipelinereceive.gif "UnderstandingBTS_05_PipelineReceive")</span><span class="sxs-lookup"><span data-stu-id="bdd1e-151">![](../core/media/understandingbts-05-pipelinereceive.gif "UnderstandingBTS_05_PipelineReceive")</span></span>  
  
 <span data-ttu-id="bdd1e-152">如上图所示的接收管道，以及为每个提供的标准组件中的阶段。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-152">The figure above illustrates the stages in a receive pipeline, along with the standard components provided for each one.</span></span> <span data-ttu-id="bdd1e-153">这些阶段和及其关联的组件是：</span><span class="sxs-lookup"><span data-stu-id="bdd1e-153">Those stages and their associated components are:</span></span>  
  
- <span data-ttu-id="bdd1e-154">解码：为此阶段，即 MIME/SMIME 解码器，BizTalk Server 提供一个标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-154">Decode: BizTalk Server provides one standard component for this stage, the MIME/SMIME Decoder.</span></span> <span data-ttu-id="bdd1e-155">此组件可以处理消息并在 MIME 或 Secure MIME (S/MIME) 中包含的任何附件设置格式。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-155">This component can handle messages and any attachments they contain in either MIME or Secure MIME (S/MIME) format.</span></span> <span data-ttu-id="bdd1e-156">该组件将这两种类型的消息转换成 XML，并还可以解密 S/MIME 消息，并验证其数字签名。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-156">The component converts both types of messages into XML, and it can also decrypt S/MIME messages and verify their digital signatures.</span></span>  
  
- <span data-ttu-id="bdd1e-157">反汇编：提供了三个标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-157">Disassemble: Three standard components are provided.</span></span> <span data-ttu-id="bdd1e-158">平面文件拆装器组件将平面文件转换 XML 文档。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-158">The Flat File Disassembler component turns flat files into XML documents.</span></span> <span data-ttu-id="bdd1e-159">这些文件可以是位置，其中每条记录的相同的长度和结构，或带分隔符，使用指定的字符用于分隔文件中的记录。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-159">These files can be positional, where each record has the same length and structure, or delimited, with a designated character used to separate records in the file.</span></span> <span data-ttu-id="bdd1e-160">第二个标准组件，XML 拆装器将分析已使用 XML 描述的传入消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-160">The second standard component, the XML Disassembler, parses incoming messages that are already described using XML.</span></span> <span data-ttu-id="bdd1e-161">第三个标准组件，其中一个已不常使用今天，是 BizTalk 框架拆装器。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-161">The third standard component, one that’s not often used today, is the BizTalk Framework Disassembler.</span></span> <span data-ttu-id="bdd1e-162">它接受使用由 BizTalk 框架在 BizTalk Server 2000 中实现定义的可靠消息传递机制发送消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-162">It accepts messages sent using the reliable messaging mechanism defined by the BizTalk Framework, which was implemented in BizTalk Server 2000.</span></span>  
  
- <span data-ttu-id="bdd1e-163">验证：BizTalk Server 为此阶段提供 XML 验证器组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-163">Validate: BizTalk Server provides an XML Validator component for this stage.</span></span> <span data-ttu-id="bdd1e-164">顾名思义，此组件验证由对指定的架构或架构，如果文档不符合这些架构之一，则返回错误组的拆装阶段生成的 XML 文档。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-164">As its name suggests, this component validates an XML document produced by the Disassemble stage against a specified schema or group of schemas, returning an error if the document doesn’t conform to one of those schemas.</span></span>  
  
- <span data-ttu-id="bdd1e-165">解析参与方： 此阶段，参与方解析的唯一标准组件尝试确定此消息的发件人的标识。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-165">Resolve Party: the only standard component for this stage, Party Resolution, attempts to determine an identity for this message’s sender.</span></span> <span data-ttu-id="bdd1e-166">如果已对消息进行数字签名，签名用于查找 BizTalk Server 中的管理数据库中的 Windows 标识。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-166">If the message was digitally signed, the signature is used to look up a Windows identity in the Management database in BizTalk Server.</span></span> <span data-ttu-id="bdd1e-167">（如下文所述，使用此数据库还由 BizTalk Server 管理工具。）如果该消息还包含 Windows 用户的已经过身份验证的安全标识符 (SID)，则使用此标识。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-167">(As described later, this database is also used by BizTalk Server’s management tools.) If the message carries the authenticated security identifier (SID) of a Windows user, this identity is used.</span></span> <span data-ttu-id="bdd1e-168">如果成功这两种机制，消息的发件人分配默认的匿名标识。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-168">If neither mechanism succeeds, the message’s sender is assigned a default anonymous identity.</span></span>  
  
  <span data-ttu-id="bdd1e-169">![](../core/media/understandingbts-06-pipelinesend.gif "UnderstandingBTS_06_PipelineSend")</span><span class="sxs-lookup"><span data-stu-id="bdd1e-169">![](../core/media/understandingbts-06-pipelinesend.gif "UnderstandingBTS_06_PipelineSend")</span></span>  
  
  <span data-ttu-id="bdd1e-170">传出消息可能也要经历多个阶段定义的发送管道中使用。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-170">Outgoing messages can also go through multiple stages, as defined by the send pipeline in use.</span></span> <span data-ttu-id="bdd1e-171">上图显示了阶段和发送管道的标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-171">The figure above shows the stages and standard components for a send pipeline.</span></span> <span data-ttu-id="bdd1e-172">它们分别是：</span><span class="sxs-lookup"><span data-stu-id="bdd1e-172">They are:</span></span>  
  
- <span data-ttu-id="bdd1e-173">预组装：不提供了任何标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-173">Pre-assemble: No standard components are provided.</span></span> <span data-ttu-id="bdd1e-174">相反，可以根据需要在此处插入自定义组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-174">Instead, custom components can be inserted here as needed.</span></span>  
  
- <span data-ttu-id="bdd1e-175">组合：并行接收管道中的拆装阶段，此阶段还具有三个标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-175">Assemble: Paralleling the Disassemble stage in a receive pipeline, this stage also has three standard components.</span></span> <span data-ttu-id="bdd1e-176">平面文件组装器将 XML 消息转换到的位置或分隔平面文件和 XML 组装器支持添加信封以及对传出 XML 消息进行其他更改。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-176">The Flat File Assembler converts an XML message into a positional or delimited flat file, and the XML Assembler supports adding an envelope and making other changes to an outgoing XML message.</span></span> <span data-ttu-id="bdd1e-177">第三个选项，BizTalk 框架组装器，包使用 BizTalk 框架消息传送技术的可靠传输的消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-177">The third option, the BizTalk Framework Assembler, packages messages for reliable transmission using the BizTalk Framework messaging technology.</span></span>  
  
- <span data-ttu-id="bdd1e-178">进行编码：BizTalk Server 定义为此阶段，即 MIME/SMIME 编码器只能有一个标准组件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-178">Encode: BizTalk Server defines only one standard component for this stage, the MIME/SMIME Encoder.</span></span> <span data-ttu-id="bdd1e-179">此组件打包传出消息中 MIME 或 S/MIME 格式。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-179">This component packages outgoing messages in either MIME or S/MIME format.</span></span> <span data-ttu-id="bdd1e-180">如果使用 S/MIME，则该消息可以还会进行数字签名和/或加密。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-180">If S/MIME is used, the message can also be digitally signed and/or encrypted.</span></span>  
  
  <span data-ttu-id="bdd1e-181">BizTalk Server 定义了一些默认管道，其中包括可用于处理已经以 XML 表示的消息的简单接收/发送对。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-181">BizTalk Server defines some default pipelines, including a simple receive/send pair that can be used for handling messages that are already expressed in XML.</span></span> <span data-ttu-id="bdd1e-182">开发人员还可以创建自定义管道使用管道设计器。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-182">A developer can also create custom pipelines using the Pipeline Designer.</span></span> <span data-ttu-id="bdd1e-183">此工具，它在内部运行[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，提供一个图形界面，开发人员可以拖放组件以使用任何所需行为创建管道。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-183">This tool, which runs inside [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], provides a graphical interface that enables the developer to drag and drop components to create pipelines with whatever behavior is required.</span></span>  
  
## <a name="choosing-messages-subscriptions"></a><span data-ttu-id="bdd1e-184">选择消息：订阅</span><span class="sxs-lookup"><span data-stu-id="bdd1e-184">Choosing Messages: Subscriptions</span></span>  
 <span data-ttu-id="bdd1e-185">一条消息已通过适配器和接收管道后下, 一步是确定它应在哪里。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-185">After a message has made its way through an adapter and a receive pipeline, the next step is to determine where it should go.</span></span> <span data-ttu-id="bdd1e-186">一条消息通常以业务流程中，目标但还可以直接转到发送管道，从而将 BizTalk Server 要用作纯粹的消息传送系统的消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-186">A message is most often targeted to an orchestration, but it’s also possible for a message to go directly to a send pipeline, allowing BizTalk Server to be used as purely a messaging system.</span></span> <span data-ttu-id="bdd1e-187">在任一情况下，完成此匹配的消息与其目标使用的订阅。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-187">In either case, this matching of messages with their destinations is done using subscriptions.</span></span>  
  
 <span data-ttu-id="bdd1e-188">一条消息由接收管道处理时，消息上下文被创建包含消息的各种属性。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-188">When a message is processed by a receive pipeline, a message context is created that contains various properties of the message.</span></span> <span data-ttu-id="bdd1e-189">业务流程或发送管道可以基于这些属性的值的消息订阅。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-189">An orchestration or a send pipeline can subscribe to messages based on the values of these properties.</span></span> <span data-ttu-id="bdd1e-190">例如，业务流程可能会创建与类型"发票"的所有消息或从 QwickBank 公司接收到"发票"类型的所有消息或从 QwickBank 公司接收到"发票"类型的所有消息匹配的订阅是用于超过 10,000 美元。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-190">For example, an orchestration might create a subscription that matches all messages of the type “Invoice”, or all messages of the type “Invoice” received from the QwickBank corporation, or all messages of the type “Invoice” received from the QwickBank corporation that are for more than $10,000.</span></span> <span data-ttu-id="bdd1e-191">但指定了它，则订阅其订阅服务器中返回与订阅定义的条件匹配的那些消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-191">However it is specified, a subscription returns to its subscriber only those messages that match the criteria that the subscription defines.</span></span> <span data-ttu-id="bdd1e-192">收到的消息可能会通过实例化某些业务流程启动业务流程或也可以激活另一个步骤中已运行业务流程。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-192">A received message might initiate a business process by instantiating some orchestration or it might activate another step in an already running business process.</span></span> <span data-ttu-id="bdd1e-193">同样，当业务流程发送一条消息，则该消息匹配到基于订阅的发送管道管道已建立的。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-193">Similarly, when an orchestration sends a message, that message is matched to a send pipeline based on a subscription that pipeline has established.</span></span>  
  
-   <span data-ttu-id="bdd1e-194">在 BizTalk Server 中，也很有可能订阅特定错误条件。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-194">In BizTalk Server, it is also possible to subscribe to specific error conditions.</span></span> <span data-ttu-id="bdd1e-195">可以按特定方式处理或路由到特定目标，例如 Windows SharePoint Services 文件夹一条错误消息。</span><span class="sxs-lookup"><span data-stu-id="bdd1e-195">An error message can be processed in a particular way or routed to a specific destination, such as a Windows SharePoint Services folder.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bdd1e-196">请参阅</span><span class="sxs-lookup"><span data-stu-id="bdd1e-196">See Also</span></span>  
 <span data-ttu-id="bdd1e-197">[BizTalk Server 消息引擎](../core/the-biztalk-server-messaging-engine.md) </span><span class="sxs-lookup"><span data-stu-id="bdd1e-197">[The BizTalk Server Messaging Engine](../core/the-biztalk-server-messaging-engine.md) </span></span>  
 <span data-ttu-id="bdd1e-198">[发布和订阅体系结构](../core/publish-and-subscribe-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="bdd1e-198">[Publish and Subscribe Architecture](../core/publish-and-subscribe-architecture.md) </span></span>  
 <span data-ttu-id="bdd1e-199">[适配器](../core/adapters.md) </span><span class="sxs-lookup"><span data-stu-id="bdd1e-199">[Adapters](../core/adapters.md) </span></span>  
 [<span data-ttu-id="bdd1e-200">管道</span><span class="sxs-lookup"><span data-stu-id="bdd1e-200">Pipelines</span></span>](../core/pipelines.md)
