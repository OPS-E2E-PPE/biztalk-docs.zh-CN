---
title: X12 997 确认 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 62a352fb-635c-4f0e-9844-4b250159333d
caps.latest.revision: 15
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e1868c6c644940c49f854282980efc09c631b2cd
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22290885"
---
# <a name="x12-997-acknowledgment"></a>X12 997 确认
X12 997 功能确认报告收到的交换的状态。 它报告在处理接收的文档时遇到的每个错误。 BizTalk EDI 接收管道始终生成 4010 符合 997;但是，EDI 接收管道和 EDI 发送管道还可以验证 5010 符合 997。  
  
 与所有的 X12 事务集一样，997 确认也是在 GS/GE 信封内部发送的。 ST 和 SE 与任何其他事务集没有任何区别。  
  
 下表显示了 997 确认事务集内部的分段。  
  
|位置|段<br />ID|Name|要求<br />Des。|最大值。 改用|循环<br />重复|  
|--------------|-----------------|----------|----------------|--------------|------------------|  
|010|ST|事务集标头（用于确认）|M|1|-|  
|020|AK1|功能组响应标头|M|1|-|  
|030|AK2|事务集响应标头|O|1|999999 <br />(循环 ID = AK2)|  
|040|AK3|数据分段注释|O|1|999999 <br />(循环 ID = AK2/AK3)|  
|050|AK4|数据元素注释|O|99|-|  
|060|AK5|事务集响应尾部|M|1|-|  
|070|AK9|功能组响应尾部|M|1|-|  
|080|SE|事务集尾部（用于确认）|M|1|-|  
  
-   要求Des。 = Requirement Designation（缩写为 Req. Des.）  
  
-   M = 必需  
  
-   O = 可选  
  
 下面介绍 AK 段。 AK2 到 AK5 循环中的段提供有关事务集的错误信息。  
  
## <a name="ak1"></a>AK1  
 必需的 AK1 分段用以下数据元素标识要确认的功能组：  
  
-   AK101 是要确认的功能组的功能组 ID (GS01)。  
  
-   AK102 是要确认的功能组的组控制编号（GS06 和 GE02）。  
  
-   AK103 可选，是在原始事务的 GS08 中发送的 EDI 实现版本。 AK103 支持入站的符合 5010 的 997。  
  
## <a name="ak2"></a>AK2  
 可选的 AK2 分段中包含一个对于所接收功能组内部的事务集的确认。 如果有多个 AK2 分段，它们将以一系列循环的形式发送。 每个 AK2 循环都按照事务集的接收顺序来标识事务集。 AK2 分段用以下两个数据元素标识事务集：  
  
-   AK201 是要确认的事务集的事务集 ID (ST01)。  
  
-   AK202 是要确认的事务集的事务集控制编号（ST02 和 SE02）。  
  
-   AK203 可选，是在原始事务的 ST03 中发送的 EDI 实现版本。 AK203 支持入站的符合 5010 的 997。  
  
 如果事务集出错，AK2 循环将包含 AK3、AK4 和 AK5 分段。 有关详细信息，请参阅下面对这些分段的说明。  
  
 您可以指定是为所有事务集（无论是已接受的还是已拒绝的事务集）生成 AK2 分段，还是仅针对拒绝的事务集生成 AK2 分段。 BizTalk Server 将生成 AK2 段，用来接受的事务集 (其中 AK501 = = A) 如果你选择**包括 AK2 循环，用于接受的事务集**中的复选框**确认**页协议两个业务配置文件之间的协议的属性对话框 (或**确认**X12 页商业版配置文件的设置选项卡)。 否则，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 将仅为拒绝的事务集生成 AK2 循环。 如果没有为响应的交换解析协议，则 997 生成设置默认使用后备协议设置，并且不会为接受的事务集生成 AK2 分段。  
  
## <a name="ak3"></a>AK3  
 可选的 AK3 分段报告数据分段中的错误并标识数据分段的位置。 对于事务集内每个存在一个或多个错误的分段都会创建一个 AK3 分段。 如果有多个 AK3 分段，它们将以一系列循环（每个循环一个分段）的形式发送。 AK3 分段包含四个数据元素用于指定每个存在错误的分段的位置，并且还将报告在该位置找到的语法错误的类型：  
  
-   AK301 用其 X12 分段 ID（例如 NM1）来标识存在错误的分段。  
  
-   AK302 是存在错误的分段的计数。 ST 分段的计数是“1”，其他每个分段的计数按一递增。  
  
-   AK303 用于标识绑定循环（即，由一个 LS 分段和一个 LE 分段包围的循环）。 AK303 包含与存在错误的分段绑定的 LS 和 LE 分段的值。  
  
-   AK304 是数据分段中所存在错误的错误代码。 AK304 是可选的，但是，如果标识段中存在错误，则它是必需的。 AK304 错误代码的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="ak4"></a>AK4  
 可选的 AK4 分段报告数据元素或复合数据结构中的错误，并确定数据元素的位置。 当 AK304 数据元素是“8”时，会发送“段有数据元素错误”。 它可在每个 AK3 分段内最多重复 99 次。 AK4 分段包含四个数据元素用于指定每个存在错误的数据元素或复合数据结构的位置，并且会报告在该位置找到的语法错误的类型。  
  
-   AK401 是字段 AK41.1、 AK41.2 和 AK41.3 的复合数据元素。 AK401-1 用数值计数标识存在错误的数据元素或复合数据结构。 例如，如果分段中的第二个数据元素存在错误，则 AK401 等于“2”。 AK401-2 标识复合数据结构中存在错误的组件数据元素的数值计数。 当 AK401 报告非复合数据结构有错误时，不会向 AK401-2 赋值。  
  
     AK41.3 可选，它是重复的数据元素位置。 AK41.3 支持入站的符合 5010 的 997。  
  
-   AK402 是可选的，它标识存在错误的简单 X12 数据元素的编号。 例如，NM101 是简单 X12 数据元素的编号 (98)。  
  
-   AK403 是必需的，它报告标识元素中存在的错误。 AK403 错误代码的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK404 是可选的，其中包含存在错误的标识数据元素的副本。 如果该错误指示存在无效字符，则将不使用 AK404。  
  
## <a name="ak5"></a>AK5  
 AK5 分段报告是否接受在 AK2 分段中标识的事务集以及接受或拒绝的原因。 如果确认中包含可选 AK2 循环，则 AK5 分段是必需的。 AK4 分段有一个必需的数据元素（指定事务集的状态）和一到五个可选的数据元素（基于事务集的语法编辑结果提供错误代码）。  
  
-   AK501 指定是否接受标识的事务集。 AK501 错误代码的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK502 至 AK506 指示错误的性质。 AK501 错误代码的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="ak9"></a>AK9  
 必需的 AK9 分段指示是否接受在 AK1 分段中标识的功能组以及接受或拒绝的原因。 AK9 分段有四个必需的数据元素（指定事务集的状态和任何错误的性质）和一到五个可选的元素（指定所标出的任何错误）。  
  
-   AK901 是必需的，它指定接受或拒绝在 AK1 中标识的功能组。 AK901 错误代码的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
-   AK902 指定标识功能组尾部中所包括的事务集的数量 (GE01)。  
  
-   AK903 指定所接收的事务集的数量。  
  
-   AK904 指定在标识功能组中接受的事务集的数量。  
  
-   AK905 至 AK909 可以指示在标识功能组中标出的一到五个错误。 有关通过 AK909 错误代码 AK905 的列表，请参阅[X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)。  
  
## <a name="see-also"></a>另请参阅  
 [X12 997 确认错误代码](../core/x12-997-acknowledgment-error-codes.md)