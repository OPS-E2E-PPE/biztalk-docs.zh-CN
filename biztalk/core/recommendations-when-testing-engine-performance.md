---
title: 建议在测试时引擎性能 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- maximum sustainable throughput (MST), best practices
ms.assetid: 0aa9d833-0e7d-4347-a6ca-8d658749b4f2
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 06fc2d81ca8121fe625a30258070281d2b3ff4bc
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="recommendations-when-testing-engine-performance"></a>测试引擎性能时的建议
在测试 BizTalk 引擎性能时应当遵循以下准则：  
  
 **知道负载行为配置文件**如三个负载测试具有所示，它知道至关重要的消息所进行随着时间的推移处理负载的配置文件。  对这一点理解越深，就越能准确地测试和调整系统容量。 若只知道峰值吞吐量要求，则最保守的办法是调整系统大小，以便使最大可承受吞吐量等于或大于峰值负载。 但是，如果可预测负载峰值和低谷，则可更好地优化系统以在峰值之间恢复正常，从而使总体部署规模更小、开销更低。  
  
 **测试性能尽早**避免落在投资中设计和测试你的解决方案的功能，但是等待一分钟的大量精力，来测试生产硬件上的性能的陷阱。 在开发周期中，应尽可能早地在系统上运行模拟预期负载状况的性能测试。 如果必须对设计或体系结构做出更改才能达到您的要求，则尽早了解这一点将有助于您争取时间再次进行调整和测试。  
  
 **模拟你的预期的负载配置文件，测试性能时**到这两个主组件：  
  
1.  模拟负载随时间变化的状况。  
  
2.  尽可能长时间运行测试以评估性能的可持续性。  
  
 通常情况下，如果您的周期实际为一天，则应计划至少运行性能测试一天，以验证可承受性。 运行测试的时间越长越好。  
  
 **模拟生产配置**示例、 数量和类型的端口，在主机和主机实例配置、 数据库配置和适配器安装程序。 不要认为配置更改不会对性能造成很大影响。  
  
 **使用实际消息**消息大小和消息复杂性会影响性能，因此在一定的并且使用相同的消息架构和你打算在生产中看到的实例进行测试。  
  
 **性能测试中模拟正常操作**尽管负载测试不包括它们的标准操作活动，例如定期数据库查询，备份，并清除将影响你可持续吞吐量，因此请确保你在性能和容量测试运行期间执行这些任务。 若要在生产中使用这些操作，那么这将同时包括 DTA 和 BAM 跟踪。  
  
 **MessageBox 的 I/O 子系统的速度是关键成功因素**执行的负载测试所做的专用于此生成扩展 MessageBox 数据库文件使用的快速存储区域网络。甚至在这种情况下，清除作业也能够使 SQL 数据文件的空闲时间接近零。 大多数情况下，I/O 子系统是生产系统中的瓶颈。 优化 SQL I/O 的常规策略是：如果可能，则将数据库数据文件和日志文件分别放于单独的物理驱动器上。  
  
 **请确保 SQL 代理运行所有 MessageBox 服务器上**很明显，清理作业将永远不会运行如果 SQL 代理未运行，因此请确保它们运行。  
  
 **假脱机深度是关键指标**而不考虑其他指示器，此度量值将为你提供快速方便地评估是否或不在输出过度你的系统。