---
title: 引擎性能测试时的建议 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- maximum sustainable throughput (MST), best practices
ms.assetid: 0aa9d833-0e7d-4347-a6ca-8d658749b4f2
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a34bf5db6186eac521f0a74542cfe4c6cc8429dc
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36972470"
---
# <a name="recommendations-when-testing-engine-performance"></a>测试引擎性能时的建议
在测试 BizTalk 引擎性能时应当遵循以下准则：  
  
 **了解加载行为配置文件**三个负载测试所示，如有必要了解随着时间的推移处理消息负载的配置文件。  对这一点理解越深，就越能准确地测试和调整系统容量。 若只知道峰值吞吐量要求，则最保守的办法是调整系统大小，以便使最大可承受吞吐量等于或大于峰值负载。 但是，如果可预测负载峰值和低谷，则可更好地优化系统以在峰值之间恢复正常，从而使总体部署规模更小、开销更低。  
  
 **测试性能尽早**避免将大量精力在设计和测试解决方案的功能而应等到最后一分钟，若要测试生产硬件上的性能陷阱。 在开发周期中，应尽可能早地在系统上运行模拟预期负载状况的性能测试。 如果必须对设计或体系结构做出更改才能达到您的要求，则尽早了解这一点将有助于您争取时间再次进行调整和测试。  
  
 **测试性能时模拟预期的负载状况**有这两个主要组件：  
  
1. 模拟负载随时间变化的状况。  
  
2. 尽可能长时间运行测试以评估性能的可持续性。  
  
   通常情况下，如果您的周期实际为一天，则应计划至少运行性能测试一天，以验证可承受性。 运行测试的时间越长越好。  
  
   **模拟生产配置**示例、 数量和类型的端口，在主机和主机实例配置、 数据库配置和适配器安装程序。 不要认为配置更改不会对性能造成很大影响。  
  
   **使用真实消息**消息大小和消息复杂性会影响性能，因此务必，测试具有相同的消息架构和计划以查看在生产环境中的实例。  
  
   **性能测试期间模拟正常操作**尽管负载测试不包括它们的标准操作活动，例如定期数据库查询、 备份和清除将会影响可承受吞吐量，因此请确保你在性能和容量测试运行期间执行这些任务。 若要在生产中使用这些操作，那么这将同时包括 DTA 和 BAM 跟踪。  
  
   **MessageBox 的 I/O 子系统的速度是成功的关键因素**执行负载测试所做的快速存储区域网络专用于此扩展的 MessageBox 数据库文件使用。甚至在这种情况下，清除作业也能够使 SQL 数据文件的空闲时间接近零。 大多数情况下，I/O 子系统是生产系统中的瓶颈。 优化 SQL I/O 的常规策略是：如果可能，则将数据库数据文件和日志文件分别放于单独的物理驱动器上。  
  
   **请确保所有 MessageBox 服务器上正在运行 SQL 代理**很明显，清除作业将永远不会运行如果未运行 SQL 代理，因此请确保它们运行。  
  
   **后台处理深度是关键指标**而不考虑其他指标，此度量值将可让你快速且轻松地评估您的系统超负荷运行或不。