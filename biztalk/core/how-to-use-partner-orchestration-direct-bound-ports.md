---
title: 如何使用合作伙伴业务流程直接绑定端口 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 19f9987f-79fb-4cb6-bf6e-542f6eea9ce0
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 48f60aa1f8c1ca9e101b99bddc260d81c0366896
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65333311"
---
# <a name="how-to-use-partner-orchestration-direct-bound-ports"></a>如何使用合作伙伴业务流程直接绑定端口
合作伙伴业务流程直接绑定的端口提供通过端口业务流程间通信的能力。 您可以创建两种通信模式： 正向合作伙伴业务流程直接绑定和反向合作伙伴业务流程直接绑定。 这两种模式提供显式的业务流程间通信，这意味着使用反向合作伙伴时使用正向合作伙伴业务流程直接绑定和预期的发送方业务流程时没有预期的接收方业务流程业务流程直接绑定。  
  
 此外可以通过执行以下任一操作来设计隐式的合作伙伴业务流程直接绑定：  
  
- 使接收方成为 MessageBox 直接绑定的端口，并创建将接受来自特定的发送业务流程的消息的筛选器。  
  
- 使 MessageBox 直接绑定的端口的发送方，并且升级将与接收业务流程订阅匹配的属性。  
  
  若要配置合作伙伴业务流程直接绑定的端口，端口配置向导中，指定**直接**有关**端口绑定**，然后选择**从其他业务流程接收消息选择此端口，这些业务流程在此处以及**或**若要将消息发送到其他业务流程中，选择此端口这些业务流程在此处以及**具体取决于是否要接收或发送的消息此端口。 然后选择从端口**合作伙伴业务流程上的端口**下拉列表。 这两个端口的端口类型必须是相同的这意味着消息类型还必须是相同。 此外，为了能够直接绑定到合作伙伴业务流程端口**的类型修饰符**端口的类型必须为**内部**为同一程序集中的业务流程或**公共**以允许来自其他程序集绑定到该业务流程。 端口的极性必须相反。 例如，如果一方是发送端口另一侧必须是接收端口。  
  
  有关如何使用合作伙伴业务流程直接绑定的端口的示例，请参阅 SDK 示例"直接绑定到业务流程"网址[ http://go.microsoft.com/fwlink/?LinkId=73703 ](http://go.microsoft.com/fwlink/?LinkId=73703)。  
  
## <a name="forward-partner-orchestration-direct-binding"></a>正向合作伙伴业务流程直接绑定  
 这是用于合作伙伴业务流程直接绑定的典型通信模式。 此类型的正向合作伙伴业务流程绑定可以具有多个发送方绑定到同一接收方。  
  
 **若要配置正向合作伙伴业务流程直接绑定，请执行以下操作：**  
  
1. 在业务流程 A 中，选择**端口**形状在业务流程工具箱中的。 这将启动端口配置向导。  
  
2. 上**端口属性**页上，在**名称**字段中，键入`MyReceivePort`。 单击“下一步” 。  
  
3. 上**选择端口类型**页上，选择**创建新的端口类型**。 在中**端口类型名称**字段中，键入`MyPartnerPortType`。 单击“下一步” 。  
  
4. 上**端口绑定**页上，在**端口通信方向**下拉列表中，选择**我始终在接收消息，此端口上的**。 在中**端口绑定**下拉列表中，选择**直接**。  
  
5. 选择**若要从其他业务流程接收消息，请在此处以及对应业务流程中选择该端口**，然后在**合作伙伴业务流程上的端口**下拉列表中，选择**OrchestrationA.MyReceivePort**。 单击“下一步” 。  
  
6. 上**完成端口向导**页上，单击**完成**。  
  
7. 在业务流程 B 中，选择**端口**形状在业务流程工具箱中的。 这将启动端口配置向导。  
  
8. 上**端口属性**页上，在**名称**字段中，键入`MySendPort`。 单击“下一步” 。  
  
9. 在“选择端口类型”  页上，选择“使用现有端口类型” 。 下**可用端口类型**，选择**MyPartnerPortType**，然后单击**下一步**。  
  
10. 上**端口绑定**页上，在**端口通信方向**下拉列表中，选择**我始终在发送消息此端口上**。 在中**端口绑定**下拉列表中，选择**直接**。  
  
11. 选择**若要向其他业务流程发送消息，请在此处以及对应业务流程中选择该端口**，然后在**合作伙伴业务流程上的端口**下拉列表中，选择**OrchestrationA.MyReceivePort**。 单击“下一步” 。  
  
12. 上**完成端口向导**页上，单击**完成**。  
  
    > [!NOTE]
    >  没有从发送方业务流程到接收方业务流程的强绑定。 因此，如果你想要修改接收方业务流程，或者你想要更改接收方业务流程的版本，必须更新发送方合作伙伴业务流程直接绑定端口的设计时配置。 但是，因为接收方业务流程具有不显式了解发送方业务流程，可以更新发送方业务流程，而不会影响接收方业务流程。  
  
    在前述配置中，业务流程 A 是接收方和业务流程 B 是发件人。 配置使业务流程 B 可以将消息发送到**OrchestrationA.MyReceivePort**，并使业务流程 A 可以接收发送到任何消息**OrchestrationA.MyReceivePort**。 此外，您可以添加业务流程 C 作为第二个发送方，添加业务流程 D 作为第三个发件人使用相同的配置与业务流程 b。  
  
## <a name="inverse-partner-orchestration-direct-binding"></a>反向合作伙伴业务流程直接绑定  
 这不是用于合作伙伴业务流程直接绑定的典型通信模式。 在此模式下方向是方向的绑定的通信相反。 此类型的反向合作伙伴业务流程绑定可以具有单个发送方与多个接收方通信。  
  
> [!NOTE]
>  如果将双向端口类型用于反向合作伙伴业务流程直接绑定，然后你必须设置您的接收筛选器以确保仅有一个接收方将使用该消息。 这是因为要求-响应端口要求单个响应。 如果多个收件人会收到消息，然后要求响应端口接受第一个响应和所有后续响应都将挂起且不可恢复。 消息引擎将引发异常，当你尝试这种情况下发送消息时，并指示有多个收件人的要求响应端口。  
  
 **若要配置反向合作伙伴业务流程直接绑定，请执行以下操作：**  
  
1. 在业务流程 A 中，选择**端口**形状在业务流程工具箱中的。 这将启动端口配置向导。  
  
2. 上**端口属性**页上，在**名称**字段中，键入`MySendPort`。 单击“下一步” 。  
  
3. 上**选择端口类型**页上，选择**创建新的端口类型**。 在中**端口类型名称**字段中，键入`MyPartnerPortType`。 单击“下一步” 。  
  
4. 上**端口绑定**页上，在**端口通信方向**下拉列表中，选择**我始终在发送消息此端口上**。 在中**端口绑定**下拉列表中，选择**直接**。  
  
5. 选择**若要向其他业务流程发送消息，请在此处以及对应业务流程中选择该端口**，然后在**合作伙伴业务流程上的端口**下拉列表中，选择**OrchestrationA.MySendPort**。 单击“下一步” 。  
  
6. 上**完成端口向导**页上，单击**完成**。  
  
7. 在业务流程 B 中，选择**端口**形状在业务流程工具箱中的。 这将启动端口配置向导。  
  
8. 上**端口属性**页上，在**名称**字段中，输入`MyReceivePort`。 单击“下一步” 。  
  
9. 在“选择端口类型”  页上，选择“使用现有端口类型” 。 下**可用端口类型**，选择**MyPartnerPortType**，然后单击**下一步**。  
  
10. 上**端口绑定**页上，在**端口通信方向**下拉列表中，选择**我始终在接收消息，此端口上的**。 在中**端口绑定**下拉列表中，选择**直接**。  
  
11. 选择**若要从其他业务流程接收消息，请在此处以及对应业务流程中选择该端口**，然后在**合作伙伴业务流程上的端口**下拉列表中，选择**OrchestrationA.MySendPort**。 单击“下一步” 。  
  
12. 上**完成端口向导**页上，单击**完成**。  
  
    > [!NOTE]
    >  接收方业务流程将强行绑定到发送方业务流程。 因此，如果你想要修改接收方业务流程或更新接收方业务流程的版本，则必须更新发件人的端口配置。 发送方业务流程具有不显式了解接收方业务流程，以便您能够更新而不会影响发送方业务流程的接收方业务流程。  
  
    在前述配置中，业务流程 A 是发送方和业务流程 B 是接收方。 配置使业务流程 A 将消息发送到业务流程 B，通过**OrchestrationA.MySendPort**，并使业务流程 B 可以接收来自消息**OrchestrationA.MySendPort**. 此外，您可以添加业务流程 C 作为第二个接收方，添加业务流程 D 作为第三个接收方使用相同的配置与业务流程 b。  
  
## <a name="see-also"></a>请参阅  
 [如何使用 MessageBox 直接绑定端口](../core/how-to-use-messagebox-direct-bound-ports.md)   
 [如何使用自相关直接绑定端口](../core/how-to-use-self-correlating-direct-bound-ports.md)