---
title: 示例 BizTalk Server 高可用性方案 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- architecture, small distributions
- examples, high availability
- architecture, examples
- high availability, examples
- examples, architecture
- databases, clustering
- architecture, medium distributions
- scaling
- architecture, large distributions
ms.assetid: ad9e3f57-1a23-41c2-82c9-dc8e1b29ed4d
caps.latest.revision: 30
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ff4db96e89dc91ee96aaf5f0b60f0de34ce83425
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22271661"
---
# <a name="sample-biztalk-server-high-availability-scenarios"></a><span data-ttu-id="14e27-102">BizTalk Server 高可用性示例方案</span><span class="sxs-lookup"><span data-stu-id="14e27-102">Sample BizTalk Server High Availability Scenarios</span></span>
<span data-ttu-id="14e27-103">本主题介绍了 Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中通过对主机的各层进行扩展提供高可用性的方案。</span><span class="sxs-lookup"><span data-stu-id="14e27-103">This topic describes the scenarios in Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that provide high availability through scaled-out tiers of hosts.</span></span> <span data-ttu-id="14e27-104">分隔各个区域的功能分为不同的主机和中的层[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，管理员可以为每个主机提供冗余和缩放它们独立于其他主机。</span><span class="sxs-lookup"><span data-stu-id="14e27-104">By separating areas of functionality into different hosts and tiers in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], administrators can provide redundancy for each host and scale them independently of other hosts.</span></span> <span data-ttu-id="14e27-105">若要为每个功能区域提供高可用性，应创建单独的主机，为每个主函数-接收、 处理、 发送和跟踪-和群集[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库和企业单一登录的主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="14e27-105">To provide high availability for each functional area, you create separate hosts for each primary function—receiving, processing, sending, and tracking—and cluster the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and the Enterprise Single Sign-On master secret server.</span></span>  
  
## <a name="small-biztalk-server-deployments"></a><span data-ttu-id="14e27-106">小型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="14e27-106">Small BizTalk Server Deployments</span></span>  
 <span data-ttu-id="14e27-107">为 SQL Server 和 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 提供高可用性的最小 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署是由两台具有 SQL Server 的主动/主动群集配置的计算机组成。</span><span class="sxs-lookup"><span data-stu-id="14e27-107">The smallest [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the both SQL Server and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is made up of two computers that have an active/active cluster configuration for SQL Server.</span></span> <span data-ttu-id="14e27-108">这两台计算机包含了该环境中所有 BizTalk 主机的实例。</span><span class="sxs-lookup"><span data-stu-id="14e27-108">Both computers contain instances of all the BizTalk Hosts in the environment.</span></span> <span data-ttu-id="14e27-109">如果其中一台计算机失败或遇到错误，另一台计算机将同时维护 SQL Server 和 BizTalk Server 的服务可用性。</span><span class="sxs-lookup"><span data-stu-id="14e27-109">If one computer fails or encounters errors, the other computer maintains service availability for both SQL Server and BizTalk Server.</span></span> <span data-ttu-id="14e27-110">此配置并不具有高可用性，因为由于 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 主机实例将不会在群集企业单一登录资源处于被动的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 计算机上启动，从而它不会提供群集的主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="14e27-110">This configuration is not highly available because it does not accommodate clustering the master secret server, since [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instances will not start on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer where the clustered Enterprise Single Sign-On resource is passive.</span></span> <span data-ttu-id="14e27-111">有关群集的主密钥服务器的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="14e27-111">For more information about clustering the master secret server, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
 <span data-ttu-id="14e27-112">对于小型[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]包含少于 5 台计算机的部署，我们建议，在包含 BizTalk Server 数据库的 SQL Server 群集运行单独的计算机上从 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="14e27-112">For small [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that contain fewer than five computers, we recommend that the SQL Server cluster that contains the BizTalk Server databases runs on separate computers from the BizTalk Server computers.</span></span> <span data-ttu-id="14e27-113">BizTalk Server 计算机可以运行所有 BizTalk 主机（接收、处理和发送）。</span><span class="sxs-lookup"><span data-stu-id="14e27-113">The BizTalk Server computers can run all the BizTalk Hosts (receive, process, and send).</span></span> <span data-ttu-id="14e27-114">为确保此部署高度可用，请群集 SQL Server 和企业单一登录主密钥服务器，并使用两个 BizTalk Server，分别用来在您的环境中运行每个主机的实例。</span><span class="sxs-lookup"><span data-stu-id="14e27-114">To make this deployment highly available, cluster the SQL Server and the Enterprise Single Sign-On master secret server, and have two BizTalk Servers, each running an instance of each host in your environment.</span></span>  
  
 <span data-ttu-id="14e27-115">下图显示了高度可用的小型 BizTalk Server 部署：</span><span class="sxs-lookup"><span data-stu-id="14e27-115">The following figure shows a small BizTalk Server deployment that is highly available.</span></span>  
  
 <span data-ttu-id="14e27-116">![Small BizTalk Server 部署](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span><span class="sxs-lookup"><span data-stu-id="14e27-116">![Small BizTalk Server Deployment](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span></span>  
  
## <a name="medium-sized-biztalk-server-deployments"></a><span data-ttu-id="14e27-117">中型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="14e27-117">Medium-Sized BizTalk Server Deployments</span></span>  
 <span data-ttu-id="14e27-118">对于包含五台至十台计算机的中型部署，建议您对包含 BizTalk Server 数据库的 SQL Server 和企业单一登录主密钥服务器进行群集。</span><span class="sxs-lookup"><span data-stu-id="14e27-118">For medium-sized deployments that contain five to ten computers, we recommend that you cluster the SQL Server that contains the BizTalk Server databases and the Enterprise Single Sign-On master secret server.</span></span> <span data-ttu-id="14e27-119">如果您的方案需要进行大量接收，您可能希望将两台 BizTalk Server 专用于运行接收主机实例，以便提供高度可用的解决方案。</span><span class="sxs-lookup"><span data-stu-id="14e27-119">If your scenario is receive-intensive, you may want to dedicate two BizTalk Servers to run the receiving host instances to provide a highly available solution.</span></span> <span data-ttu-id="14e27-120">然后，您就可以具有两台以上既运行处理主机实例又运行发送主机实例的计算机。</span><span class="sxs-lookup"><span data-stu-id="14e27-120">You can then have two more computers that are running both the processing and send host instances.</span></span> <span data-ttu-id="14e27-121">为确保此部署高度可用，请在两台 BizTalk Server 上创建处理主机和发送主机的实例。</span><span class="sxs-lookup"><span data-stu-id="14e27-121">To make this a highly available deployment, create host instances of both the processing and send hosts on two BizTalk Servers.</span></span> <span data-ttu-id="14e27-122">同样，如果您的方案需要进行大量处理，您可能希望将两台 BizTalk Server 专用于运行处理主机实例，并使用其余两台 BizTalk Server 运行接收主机和发送主机的实例。</span><span class="sxs-lookup"><span data-stu-id="14e27-122">Similarly, if you have a processing-intensive scenario, you may want to dedicate two BizTalk Servers to run the processing host instances, and have the remaining two BizTalk Servers running instances of both the receive and send hosts.</span></span>  
  
 <span data-ttu-id="14e27-123">下图显示了高度可用的中型 BizTalk Server 部署，其中包含两台专用于接收操作的 BizTalk Server：</span><span class="sxs-lookup"><span data-stu-id="14e27-123">The following figure shows a highly available medium-sized BizTalk Server deployment with two BizTalk Servers dedicated to receiving operations.</span></span>  
  
 <span data-ttu-id="14e27-124">![中等 &#45;大小 BizTalk Server 部署](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span><span class="sxs-lookup"><span data-stu-id="14e27-124">![Medium&#45;Sized BizTalk Server Deployment](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span></span>  
  
 <span data-ttu-id="14e27-125">为企业单一登录高可用性的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="14e27-125">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="large-scale-biztalk-server-deployments"></a><span data-ttu-id="14e27-126">大规模 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="14e27-126">Large-Scale BizTalk Server Deployments</span></span>  
 <span data-ttu-id="14e27-127">对于包含十台或更多台计算机的大型部署，请将单独的 BizTalk Server 计算机分别专用于接收、处理和发送功能。</span><span class="sxs-lookup"><span data-stu-id="14e27-127">For large-scale deployments that contain 10 or more computers, dedicate separate BizTalk Server computers for the receiving, processing, and sending functions.</span></span> <span data-ttu-id="14e27-128">此外，如果组中具有多台 BizTalk Server 计算机，您可以包括其他 MessageBox 数据库计算机以提高性能。</span><span class="sxs-lookup"><span data-stu-id="14e27-128">Also, if you have many BizTalk Server computers in a group, you can include additional MessageBox database computers to increase performance.</span></span> <span data-ttu-id="14e27-129">在这种情况下，群集 MessageBox 数据库和主密钥服务器可确保高可用性。</span><span class="sxs-lookup"><span data-stu-id="14e27-129">In this case, cluster the MessageBox databases and the master secret server to provide high availability.</span></span>  
  
 <span data-ttu-id="14e27-130">此类分布式的配置演示的灵活性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]因为这样可以评估和确定特定部署中的故障点，然后从战略角度将分配资源以减少系统中的这些时间点。</span><span class="sxs-lookup"><span data-stu-id="14e27-130">Such a distributed configuration demonstrates the flexibility of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] because it lets you to evaluate and identify specific points of failure in your deployment, and then strategically allocate resources to reduce those points in the system.</span></span> <span data-ttu-id="14e27-131">当今瞬息万变的业务环境需要这种灵活性以应对工作负荷波动和业务需求的日常变化。</span><span class="sxs-lookup"><span data-stu-id="14e27-131">Today's dynamic business environment demands such flexibility because workload fluctuations and business requirements can change daily.</span></span>  
  
 <span data-ttu-id="14e27-132">您可以将资源从资源使用量较少的计算机中移至需要大量资源的计算机中，从而使用现有资源来实现高可用性，而不用另外花费资金进行升级或采购新硬件。</span><span class="sxs-lookup"><span data-stu-id="14e27-132">Instead of spending additional money to upgrade or acquire new hardware, you can use existing resources to achieve high availability by moving resources from computers that consume few resources to computers that are resource-intensive.</span></span>  
  
 <span data-ttu-id="14e27-133">下图显示了大规模[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]部署。</span><span class="sxs-lookup"><span data-stu-id="14e27-133">The following figure shows a large-scale [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment.</span></span>  
  
 <span data-ttu-id="14e27-134">![大型 &#45;缩放 BizTalk Server 部署](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span><span class="sxs-lookup"><span data-stu-id="14e27-134">![Large&#45;Scale BizTalk Server Deployment](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span></span>  
  
 <span data-ttu-id="14e27-135">为企业单一登录高可用性的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="14e27-135">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="providing-high-availability-using-hyper-v-and-failover-clustering"></a><span data-ttu-id="14e27-136">使用 Hyper-V 和故障转移群集提供高可用性</span><span class="sxs-lookup"><span data-stu-id="14e27-136">Providing High Availability using Hyper-V and Failover Clustering</span></span>  
 <span data-ttu-id="14e27-137">Windows® Server 2008 Hyper-V 角色和 Windows Server 2008 故障转移群集功能可以一起用来为虚拟化的服务器计算环境提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="14e27-137">The Windows® Server 2008 Hyper-V role and the Windows Server 2008 Failover Clustering feature can be used together to provide high availability for a virtualized server computing environment.</span></span> <span data-ttu-id="14e27-138">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 部署中使用的 BizTalk Server 计算机和 SQL Server 计算机可以安装在 Hyper-V 虚拟化环境中，然后通过故障转移群集使其具有高可用性。</span><span class="sxs-lookup"><span data-stu-id="14e27-138">The BizTalk Server computers and the SQL Server computers used in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment can be installed in a Hyper-V virtualized environment and then made highly available through failover clustering.</span></span> <span data-ttu-id="14e27-139">由于在 Hyper-V 上运行来宾操作系统涉及到系统资源成本，因此建议在将此解决方案部署到生产之前执行详细性能测试。</span><span class="sxs-lookup"><span data-stu-id="14e27-139">Because there is a system resource cost associated with running a guest operating system on Hyper-V, we recommend that thorough performance testing is performed before deploying such a solution into production.</span></span> <span data-ttu-id="14e27-140">有关使用 HYPER-V 和故障转移群集在一起的详细信息来为虚拟机提供高可用性，请参阅"HYPER-V 分步指南:: HYPER-V 和故障转移群集"在[http://go.microsoft.com/fwlink/?LinkID=129113](http://go.microsoft.com/fwlink/?LinkID=129113)。</span><span class="sxs-lookup"><span data-stu-id="14e27-140">For more information about using Hyper-V and Failover clustering together to provide high availability for virtual machines, see “Hyper-V Step-by-Step Guide: Hyper-V and Failover Clustering” at [http://go.microsoft.com/fwlink/?LinkID=129113](http://go.microsoft.com/fwlink/?LinkID=129113).</span></span> <span data-ttu-id="14e27-141">有关部署的详细信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]到 HYPER-V 虚拟化环境中，请参阅 BizTalk Server HYPER-V 指南下载[http://go.microsoft.com/fwlink/?LinkId=189706](http://go.microsoft.com/fwlink/?LinkId=189706)。</span><span class="sxs-lookup"><span data-stu-id="14e27-141">For more information about deploying a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] into a Hyper-V virtualized environment, see the BizTalk Server Hyper-V Guide available for download at [http://go.microsoft.com/fwlink/?LinkId=189706](http://go.microsoft.com/fwlink/?LinkId=189706).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="14e27-142">另请参阅</span><span class="sxs-lookup"><span data-stu-id="14e27-142">See Also</span></span>  
 <span data-ttu-id="14e27-143">[为 BizTalk 主机提供高可用性](../core/providing-high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="14e27-143">[Providing High Availability for BizTalk Hosts](../core/providing-high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="14e27-144">[为 BizTalk Server 数据库提供高可用性](../core/providing-high-availability-for-biztalk-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="14e27-144">[Providing High Availability for BizTalk Server Databases](../core/providing-high-availability-for-biztalk-server-databases.md) </span></span>  
 [<span data-ttu-id="14e27-145">为企业单一登录的高可用性</span><span class="sxs-lookup"><span data-stu-id="14e27-145">High Availability for Enterprise Single Sign-On</span></span>](../core/high-availability-for-enterprise-single-sign-on.md)