---
title: 示例 BizTalk Server 高可用性方案 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- architecture, small distributions
- examples, high availability
- architecture, examples
- high availability, examples
- examples, architecture
- databases, clustering
- architecture, medium distributions
- scaling
- architecture, large distributions
ms.assetid: ad9e3f57-1a23-41c2-82c9-dc8e1b29ed4d
caps.latest.revision: 30
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 950f82a57c1f0be599fa9fbcceb4b6a590a0576e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65393919"
---
# <a name="sample-biztalk-server-high-availability-scenarios"></a><span data-ttu-id="25b4d-102">BizTalk Server 高可用性示例方案</span><span class="sxs-lookup"><span data-stu-id="25b4d-102">Sample BizTalk Server High Availability Scenarios</span></span>
<span data-ttu-id="25b4d-103">本主题介绍 Microsoft 中的方案[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]提供通过向外扩展的主机的各层的高可用性。</span><span class="sxs-lookup"><span data-stu-id="25b4d-103">This topic describes the scenarios in Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that provide high availability through scaled-out tiers of hosts.</span></span> <span data-ttu-id="25b4d-104">通过分隔到不同的主机的功能和层中的区域[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，管理员可以为每个主机提供冗余和缩放其独立于其他主机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-104">By separating areas of functionality into different hosts and tiers in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], administrators can provide redundancy for each host and scale them independently of other hosts.</span></span> <span data-ttu-id="25b4d-105">若要为每个功能区域中提供高可用性，请创建单独的主机的每个主要功能 — 接收、 处理、 发送和跟踪，以及群集[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]数据库和企业单一登录主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="25b4d-105">To provide high availability for each functional area, you create separate hosts for each primary function—receiving, processing, sending, and tracking—and cluster the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and the Enterprise Single Sign-On master secret server.</span></span>  
  
## <a name="small-biztalk-server-deployments"></a><span data-ttu-id="25b4d-106">小型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="25b4d-106">Small BizTalk Server Deployments</span></span>  
 <span data-ttu-id="25b4d-107">最小[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]部署为这两个 SQL Server 提供高可用性和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]具有适用于 SQL Server 的主动/被动群集配置的两台计算机组成。</span><span class="sxs-lookup"><span data-stu-id="25b4d-107">The smallest [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the both SQL Server and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is made up of two computers that have an active/active cluster configuration for SQL Server.</span></span> <span data-ttu-id="25b4d-108">这两台计算机包含在环境中的所有 BizTalk 主机的实例。</span><span class="sxs-lookup"><span data-stu-id="25b4d-108">Both computers contain instances of all the BizTalk Hosts in the environment.</span></span> <span data-ttu-id="25b4d-109">如果一台计算机失败或遇到错误，另一台计算机维护服务可用性的 SQL Server 和 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="25b4d-109">If one computer fails or encounters errors, the other computer maintains service availability for both SQL Server and BizTalk Server.</span></span> <span data-ttu-id="25b4d-110">此配置不具有高可用性，因为它不适用于聚类分析主密钥服务器，因为[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]主机实例将不会启动上[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]被动群集的企业单一登录资源的计算机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-110">This configuration is not highly available because it does not accommodate clustering the master secret server, since [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instances will not start on a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer where the clustered Enterprise Single Sign-On resource is passive.</span></span> <span data-ttu-id="25b4d-111">有关群集主密钥服务器的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="25b4d-111">For more information about clustering the master secret server, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
 <span data-ttu-id="25b4d-112">对于小型[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]包含少于五台计算机的部署，我们建议，包含 BizTalk Server 数据库的 SQL Server 群集运行单独的计算机上从 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-112">For small [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that contain fewer than five computers, we recommend that the SQL Server cluster that contains the BizTalk Server databases runs on separate computers from the BizTalk Server computers.</span></span> <span data-ttu-id="25b4d-113">BizTalk Server 计算机可以运行所有 BizTalk 主机 （接收、 处理和发送）。</span><span class="sxs-lookup"><span data-stu-id="25b4d-113">The BizTalk Server computers can run all the BizTalk Hosts (receive, process, and send).</span></span> <span data-ttu-id="25b4d-114">若要使此部署高度可用，群集 SQL Server 和企业单一登录主密钥服务器，并有两个 BizTalk 服务器，每个环境中运行的每个主机实例。</span><span class="sxs-lookup"><span data-stu-id="25b4d-114">To make this deployment highly available, cluster the SQL Server and the Enterprise Single Sign-On master secret server, and have two BizTalk Servers, each running an instance of each host in your environment.</span></span>  
  
 <span data-ttu-id="25b4d-115">下图显示了高度可用的小型 BizTalk Server 部署。</span><span class="sxs-lookup"><span data-stu-id="25b4d-115">The following figure shows a small BizTalk Server deployment that is highly available.</span></span>  
  
 <span data-ttu-id="25b4d-116">![小型 BizTalk Server 部署](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span><span class="sxs-lookup"><span data-stu-id="25b4d-116">![Small BizTalk Server Deployment](../core/media/tdi-highava-smalldepl.gif "TDI_HighAva_SmallDepl")</span></span>  
  
## <a name="medium-sized-biztalk-server-deployments"></a><span data-ttu-id="25b4d-117">中型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="25b4d-117">Medium-Sized BizTalk Server Deployments</span></span>  
 <span data-ttu-id="25b4d-118">对于包含五到十台计算机的中型部署，我们建议您群集包含 BizTalk Server 数据库的 SQL 服务器和企业单一登录主密钥服务器。</span><span class="sxs-lookup"><span data-stu-id="25b4d-118">For medium-sized deployments that contain five to ten computers, we recommend that you cluster the SQL Server that contains the BizTalk Server databases and the Enterprise Single Sign-On master secret server.</span></span> <span data-ttu-id="25b4d-119">如果你的方案是接收密集型的可能想要将专用两台 BizTalk Server 运行接收主机实例以提供高度可用的解决方案。</span><span class="sxs-lookup"><span data-stu-id="25b4d-119">If your scenario is receive-intensive, you may want to dedicate two BizTalk Servers to run the receiving host instances to provide a highly available solution.</span></span> <span data-ttu-id="25b4d-120">然后，您可以运行这两个处理和发送主机实例的两个多个计算机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-120">You can then have two more computers that are running both the processing and send host instances.</span></span> <span data-ttu-id="25b4d-121">若要使此高度可用的部署，创建的这两个处理主机实例并发送两台 BizTalk 服务器上的主机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-121">To make this a highly available deployment, create host instances of both the processing and send hosts on two BizTalk Servers.</span></span> <span data-ttu-id="25b4d-122">同样，如果您有一个需要进行大量处理的方案，你可能想要将两个 BizTalk Server 运行处理主机实例，并有剩余的两个 BizTalk Server 正在运行的实例的两个接收和发送主机专用于。</span><span class="sxs-lookup"><span data-stu-id="25b4d-122">Similarly, if you have a processing-intensive scenario, you may want to dedicate two BizTalk Servers to run the processing host instances, and have the remaining two BizTalk Servers running instances of both the receive and send hosts.</span></span>  
  
 <span data-ttu-id="25b4d-123">下图显示了高度可用中型 BizTalk Server 部署具有两个 BizTalk 服务器专用于接收操作。</span><span class="sxs-lookup"><span data-stu-id="25b4d-123">The following figure shows a highly available medium-sized BizTalk Server deployment with two BizTalk Servers dedicated to receiving operations.</span></span>  
  
 <span data-ttu-id="25b4d-124">![中等&#45;调整大小的 BizTalk Server 部署](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span><span class="sxs-lookup"><span data-stu-id="25b4d-124">![Medium&#45;Sized BizTalk Server Deployment](../core/media/tdi-highava-meddepl.gif "TDI_HighAva_MedDepl")</span></span>  
  
 <span data-ttu-id="25b4d-125">企业单一登录的高可用性的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="25b4d-125">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="large-scale-biztalk-server-deployments"></a><span data-ttu-id="25b4d-126">大型 BizTalk Server 部署</span><span class="sxs-lookup"><span data-stu-id="25b4d-126">Large-Scale BizTalk Server Deployments</span></span>  
 <span data-ttu-id="25b4d-127">对于包含 10 个或多台计算机的大规模部署，将专用于接收、 处理和发送功能不同的 BizTalk Server 计算机。</span><span class="sxs-lookup"><span data-stu-id="25b4d-127">For large-scale deployments that contain 10 or more computers, dedicate separate BizTalk Server computers for the receiving, processing, and sending functions.</span></span> <span data-ttu-id="25b4d-128">此外，如果您有很多 BizTalk Server 计算机组中，可以包括其他 MessageBox 数据库计算机以提高性能。</span><span class="sxs-lookup"><span data-stu-id="25b4d-128">Also, if you have many BizTalk Server computers in a group, you can include additional MessageBox database computers to increase performance.</span></span> <span data-ttu-id="25b4d-129">在这种情况下，群集 MessageBox 数据库和主密钥服务器以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="25b4d-129">In this case, cluster the MessageBox databases and the master secret server to provide high availability.</span></span>  
  
 <span data-ttu-id="25b4d-130">此类分布式的配置展示的灵活性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]因为它允许您评估和确定你的部署中的失败的特定点并然后策略性地分配资源，以减少系统中的这些时间点。</span><span class="sxs-lookup"><span data-stu-id="25b4d-130">Such a distributed configuration demonstrates the flexibility of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] because it lets you to evaluate and identify specific points of failure in your deployment, and then strategically allocate resources to reduce those points in the system.</span></span> <span data-ttu-id="25b4d-131">当今业务环境需要这种灵活性，因为工作负荷波动和业务要求可以每日更改。</span><span class="sxs-lookup"><span data-stu-id="25b4d-131">Today's dynamic business environment demands such flexibility because workload fluctuations and business requirements can change daily.</span></span>  
  
 <span data-ttu-id="25b4d-132">而不是不用另外花费资金进行升级或采购新硬件，您可以使用现有资源来通过将资源从资源使用量较少的是占用大量资源的计算机的计算机实现高可用性。</span><span class="sxs-lookup"><span data-stu-id="25b4d-132">Instead of spending additional money to upgrade or acquire new hardware, you can use existing resources to achieve high availability by moving resources from computers that consume few resources to computers that are resource-intensive.</span></span>  
  
 <span data-ttu-id="25b4d-133">下图显示了大规模[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]部署。</span><span class="sxs-lookup"><span data-stu-id="25b4d-133">The following figure shows a large-scale [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment.</span></span>  
  
 <span data-ttu-id="25b4d-134">![大型&#45;BizTalk Server 部署规模](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span><span class="sxs-lookup"><span data-stu-id="25b4d-134">![Large&#45;Scale BizTalk Server Deployment](../core/media/tdi-highava-largedepl.gif "TDI_HighAva_LargeDepl")</span></span>  
  
 <span data-ttu-id="25b4d-135">企业单一登录的高可用性的详细信息，请参阅[为企业单一登录的高可用性](../core/high-availability-for-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="25b4d-135">For more information about high availability for Enterprise Single Sign-On, see [High Availability for Enterprise Single Sign-On](../core/high-availability-for-enterprise-single-sign-on.md).</span></span>  
  
## <a name="providing-high-availability-using-hyper-v-and-failover-clustering"></a><span data-ttu-id="25b4d-136">提供使用 HYPER-V 和故障转移群集实现高可用性</span><span class="sxs-lookup"><span data-stu-id="25b4d-136">Providing High Availability using Hyper-V and Failover Clustering</span></span>  
 <span data-ttu-id="25b4d-137">Windows® Server 2008 HYPER-V 角色和 Windows Server 2008 故障转移群集功能可一起为虚拟化的服务器计算环境提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="25b4d-137">The Windows® Server 2008 Hyper-V role and the Windows Server 2008 Failover Clustering feature can be used together to provide high availability for a virtualized server computing environment.</span></span> <span data-ttu-id="25b4d-138">BizTalk Server 计算机中使用的 SQL Server 计算机和[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]可以安装在 HYPER-V 虚拟化环境中部署，然后进行故障转移群集在高度可用。</span><span class="sxs-lookup"><span data-stu-id="25b4d-138">The BizTalk Server computers and the SQL Server computers used in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment can be installed in a Hyper-V virtualized environment and then made highly available through failover clustering.</span></span> <span data-ttu-id="25b4d-139">由于没有与 HYPER-V 上运行来宾操作系统相关的系统资源成本，我们建议，此解决方案部署到生产环境之前执行详细性能测试。</span><span class="sxs-lookup"><span data-stu-id="25b4d-139">Because there is a system resource cost associated with running a guest operating system on Hyper-V, we recommend that thorough performance testing is performed before deploying such a solution into production.</span></span> <span data-ttu-id="25b4d-140">有关使用 HYPER-V 和故障转移群集的详细信息一起若要为虚拟机提供高可用性，请参阅"HYPER-V 循序渐进指南：HYPER-V 和故障转移群集"处[ http://go.microsoft.com/fwlink/?LinkID=129113 ](http://go.microsoft.com/fwlink/?LinkID=129113)。</span><span class="sxs-lookup"><span data-stu-id="25b4d-140">For more information about using Hyper-V and Failover clustering together to provide high availability for virtual machines, see “Hyper-V Step-by-Step Guide: Hyper-V and Failover Clustering” at [http://go.microsoft.com/fwlink/?LinkID=129113](http://go.microsoft.com/fwlink/?LinkID=129113).</span></span> <span data-ttu-id="25b4d-141">有关部署的详细信息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]到 HYPER-V 虚拟化环境中，请参阅 BizTalk Server HYPER-V 指南下载[ http://go.microsoft.com/fwlink/?LinkId=189706 ](http://go.microsoft.com/fwlink/?LinkId=189706)。</span><span class="sxs-lookup"><span data-stu-id="25b4d-141">For more information about deploying a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] into a Hyper-V virtualized environment, see the BizTalk Server Hyper-V Guide available for download at [http://go.microsoft.com/fwlink/?LinkId=189706](http://go.microsoft.com/fwlink/?LinkId=189706).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="25b4d-142">请参阅</span><span class="sxs-lookup"><span data-stu-id="25b4d-142">See Also</span></span>  
 <span data-ttu-id="25b4d-143">[为 BizTalk 主机提供高可用性](../core/providing-high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="25b4d-143">[Providing High Availability for BizTalk Hosts](../core/providing-high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="25b4d-144">[为 BizTalk Server 数据库提供高可用性](../core/providing-high-availability-for-biztalk-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="25b4d-144">[Providing High Availability for BizTalk Server Databases](../core/providing-high-availability-for-biztalk-server-databases.md) </span></span>  
 [<span data-ttu-id="25b4d-145">企业单一登录的高可用性</span><span class="sxs-lookup"><span data-stu-id="25b4d-145">High Availability for Enterprise Single Sign-On</span></span>](../core/high-availability-for-enterprise-single-sign-on.md)