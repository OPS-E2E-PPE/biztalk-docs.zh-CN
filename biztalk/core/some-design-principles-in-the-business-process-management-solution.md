---
title: 一些设计原则在业务流程管理解决方案 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- business processes, design principals
- designing, design principals
- process management solution tutorial, dividing business processes
- patterns [process management solutions], design principals
ms.assetid: 688b970f-8e64-4a47-bcc5-bdb9c5195902
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c7c7a6b614e9836f9536c6446a209a83aa764f29
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36970038"
---
# <a name="some-design-principles-in-the-business-process-management-solution"></a><span data-ttu-id="449f6-102">业务流程管理解决方案中的一些设计原则</span><span class="sxs-lookup"><span data-stu-id="449f6-102">Some Design Principles in the Business Process Management Solution</span></span>
<span data-ttu-id="449f6-103">本主题将首先介绍有关将业务流程划分为若干阶段的一般准则。</span><span class="sxs-lookup"><span data-stu-id="449f6-103">This topic begins with general guidelines about dividing business processes into stages.</span></span> <span data-ttu-id="449f6-104">然后将对与这些准则和业务需求有关的该解决方案的某些业务流程、程序集和应用程序的结构进行说明。</span><span class="sxs-lookup"><span data-stu-id="449f6-104">It then goes on to consider the structure of some of the solution's orchestrations, assemblies, and applications in connection with these guidelines and the business requirements.</span></span> <span data-ttu-id="449f6-105">有关业务要求的详细信息，请参阅"业务需求"中[了解业务流程管理解决方案](../core/understanding-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-105">For more information about the business requirements, see "Business Requirements" in [Understanding the Business Process Management Solution](../core/understanding-the-business-process-management-solution.md).</span></span>  
  
## <a name="dividing-business-processes"></a><span data-ttu-id="449f6-106">划分业务流程</span><span class="sxs-lookup"><span data-stu-id="449f6-106">Dividing Business Processes</span></span>  
 <span data-ttu-id="449f6-107">通常，在考虑业务流程时，首先会将业务流程视为单个整体流程。</span><span class="sxs-lookup"><span data-stu-id="449f6-107">Often when considering a business process, the first impulse is to treat it as a single, monolithic process.</span></span> <span data-ttu-id="449f6-108">这并非总是最佳设计。</span><span class="sxs-lookup"><span data-stu-id="449f6-108">This is not always the best design.</span></span> <span data-ttu-id="449f6-109">对于 Southridge Video，订单是长时间运行的业务流程，即可能需要花费一年时间才能完成的流程。</span><span class="sxs-lookup"><span data-stu-id="449f6-109">For Southridge Video, an order is a long running business process, a process that may take up to a year to complete.</span></span> <span data-ttu-id="449f6-110">同时，业务流程本身也可能发生更改。</span><span class="sxs-lookup"><span data-stu-id="449f6-110">In the meantime, the business process itself may change.</span></span> <span data-ttu-id="449f6-111">为允许在不中断正在处理的订单的情况下对业务流程进行更新，可以将 Southridge Video 订单处理划分为若干个阶段。</span><span class="sxs-lookup"><span data-stu-id="449f6-111">To allow updates to the business process without disrupting in-process orders, the Southridge Video order processing is divided into stages.</span></span>  
  
 <span data-ttu-id="449f6-112">在何处划分该流程，这对于可以确定版本的流程部分和允许对未完成的订单进行中断的类型十分重要。</span><span class="sxs-lookup"><span data-stu-id="449f6-112">Where you divide the process is critical to which parts of the process you can version, and to the types of disruptions that you allow to outstanding orders.</span></span> <span data-ttu-id="449f6-113">Southridge Video 解决方案使用四个常规条件来确定各个阶段：</span><span class="sxs-lookup"><span data-stu-id="449f6-113">The Southridge Video solution uses four general criteria to determine the stages:</span></span>  
  
- <span data-ttu-id="449f6-114">业务流程中步骤的逻辑分组。</span><span class="sxs-lookup"><span data-stu-id="449f6-114">The logical grouping of steps in the business process.</span></span>  
  
- <span data-ttu-id="449f6-115">业务流程中操作的作用域。</span><span class="sxs-lookup"><span data-stu-id="449f6-115">The scope of operations within an orchestration.</span></span>  
  
- <span data-ttu-id="449f6-116">在给定业务流程的情况下，可用于确定版本的流程元素。</span><span class="sxs-lookup"><span data-stu-id="449f6-116">The elements of the process that would be useful to version, given the business process.</span></span>  
  
- <span data-ttu-id="449f6-117">完成长期操作后，应该结束业务流程。</span><span class="sxs-lookup"><span data-stu-id="449f6-117">An orchestration should end after completing a long-term operation.</span></span>  
  
  <span data-ttu-id="449f6-118">在以上四个条件中，第一个和第三个是最关键的条件，因为这两个条件适用的操作作用域通常比逻辑分组或要确定版本的明显元素更为广泛。</span><span class="sxs-lookup"><span data-stu-id="449f6-118">Of the four, the first and third are the most critical because there will usually be far more scopes of operations than logical groupings or obvious elements to version.</span></span> <span data-ttu-id="449f6-119">但是，请注意，不需要在作用域中结束业务流程。</span><span class="sxs-lookup"><span data-stu-id="449f6-119">Notice, however, that you do not want to end an orchestration in the middle of a scope.</span></span>  
  
  <span data-ttu-id="449f6-120">如果您看一下第一阶段，该业务流程**CableOrder1.odx**，可以看到它有效地以对功能系统的请求-响应序列结尾。</span><span class="sxs-lookup"><span data-stu-id="449f6-120">If you look at the orchestration for the first stage, **CableOrder1.odx**, you'll see that it effectively ends with the request-response sequence to the facilities system.</span></span> <span data-ttu-id="449f6-121">这是结束该阶段的适当位置，因为它是涉及完成此订单的实际物理工作的流程的一部分。</span><span class="sxs-lookup"><span data-stu-id="449f6-121">This is a good place for the stage to end because it is the part of the process that involves the actual physical work of completing the order.</span></span> <span data-ttu-id="449f6-122">将较长的处理步骤放置到接近业务流程末尾处，则可以保证在解除对这些步骤的冻结后将快速结束该业务流程。</span><span class="sxs-lookup"><span data-stu-id="449f6-122">Having the long processing steps near the end of the orchestration guarantees that, when rehydrated, the orchestration ends quickly.</span></span> <span data-ttu-id="449f6-123">这样可以加速将该解决方案整体移至业务流程的更高版本。</span><span class="sxs-lookup"><span data-stu-id="449f6-123">This speeds up the movement of the solution as a whole to newer versions of the orchestrations.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="449f6-124">尽管该解决方案将流程拆分为若干个不连续的阶段，但利用解决方案监视功能，您可以使用 BAM 将其作为连续的视图进行查看。</span><span class="sxs-lookup"><span data-stu-id="449f6-124">Although the solution splits the process into discontinuous stages, the solution monitoring enables you to see things a continuous view through the use of BAM.</span></span>  
  
## <a name="order-action-broker-and-manager-orchestrations"></a><span data-ttu-id="449f6-125">订单操作、OrderBroker 和 OrderManager 业务流程</span><span class="sxs-lookup"><span data-stu-id="449f6-125">Order Action, Broker, and Manager Orchestrations</span></span>  
 <span data-ttu-id="449f6-126">除了将订单处理划分为若干阶段，您还会注意到，每个订单操作（例如分析订单、订单验证和订单取消）都位于单独的业务流程中。</span><span class="sxs-lookup"><span data-stu-id="449f6-126">In addition to breaking the order processing into stages, you will also notice that each of the order actions—for example, analyzing the order, order validation, order cancellation—is in a separate orchestration.</span></span> <span data-ttu-id="449f6-127">将每个操作放置在单独的业务流程中可以将这些操作与阶段的结构相分离。</span><span class="sxs-lookup"><span data-stu-id="449f6-127">Putting each action in a separate orchestration decouples the actions from the structure of the stages.</span></span> <span data-ttu-id="449f6-128">因此，这样为设计订单处理阶段并确定其版本提供了更大的灵活性。</span><span class="sxs-lookup"><span data-stu-id="449f6-128">This in turn enables greater flexibility in designing and versioning the order processing stages.</span></span>  
  
 <span data-ttu-id="449f6-129">出于类似原因，OrderBroker 和 OrderManager 也位于单独的业务流程中。</span><span class="sxs-lookup"><span data-stu-id="449f6-129">The order broker and order manager are in separate orchestrations for similar reasons.</span></span> <span data-ttu-id="449f6-130">该解决方案的设计允许使用多个 OrderManager 来处理其他类型的订单。</span><span class="sxs-lookup"><span data-stu-id="449f6-130">The solution design enables use of multiple order managers to handle other kinds of orders.</span></span> <span data-ttu-id="449f6-131">通过将 Broker 与 Manager 相分离，它们也可以位于不同的位置。</span><span class="sxs-lookup"><span data-stu-id="449f6-131">The decoupling of the broker and manager also allows for these to be in different locations.</span></span> <span data-ttu-id="449f6-132">有关 orderbroker 设计的其他详细信息，请参阅"为什么 orderbroker？"</span><span class="sxs-lookup"><span data-stu-id="449f6-132">For additional details about the order broker's design, see "Why and Order Broker?"</span></span> <span data-ttu-id="449f6-133">在中[在 OrderBroker 业务流程中处理](../core/processing-in-the-orderbroker-orchestration.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-133">in [Processing in the OrderBroker Orchestration](../core/processing-in-the-orderbroker-orchestration.md).</span></span> <span data-ttu-id="449f6-134">订单管理器的详细信息，请参阅[进程管理器逻辑](../core/process-manager-logic.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-134">For the details of the order manager, see [Process Manager Logic](../core/process-manager-logic.md).</span></span>  
  
## <a name="assemblies"></a><span data-ttu-id="449f6-135">程序集</span><span class="sxs-lookup"><span data-stu-id="449f6-135">Assemblies</span></span>  
 <span data-ttu-id="449f6-136">对该解决方案中的程序集进行组织以支持确定组件的版本以及将组件移至其他服务器。</span><span class="sxs-lookup"><span data-stu-id="449f6-136">The assemblies in the solution are organized to support versioning of components and to support moving components to other servers.</span></span> <span data-ttu-id="449f6-137">例如，各架构位于单独的程序集中。</span><span class="sxs-lookup"><span data-stu-id="449f6-137">For example, schemas are in separate assemblies.</span></span> <span data-ttu-id="449f6-138">特别是，OrderBroker 的架构位于其自身的程序集中。</span><span class="sxs-lookup"><span data-stu-id="449f6-138">In particular, the schemas for the order broker are in their own  assembly.</span></span> <span data-ttu-id="449f6-139">这样就可以确定这些架构的版本，而无需更改该解决方案的其他元素。</span><span class="sxs-lookup"><span data-stu-id="449f6-139">This allows them to be versioned without changing other elements of the solution.</span></span> <span data-ttu-id="449f6-140">同时，还可以更便捷地将 OrderBroker 移至单独的组或服务器。</span><span class="sxs-lookup"><span data-stu-id="449f6-140">It also makes it simpler to move the order broker to a separate group or server.</span></span> <span data-ttu-id="449f6-141">有关版本控制应用程序和架构程序集的详细信息，请参阅[业务流程管理解决方案进行版本控制](../core/versioning-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-141">For more information about versioning the application and schema assemblies, see [Versioning the Business Process Management Solution](../core/versioning-the-business-process-management-solution.md).</span></span>  
  
## <a name="applications"></a><span data-ttu-id="449f6-142">应用程序</span><span class="sxs-lookup"><span data-stu-id="449f6-142">Applications</span></span>  
 <span data-ttu-id="449f6-143">如果您在 BizTalk 管理控制台中查看，可以看到生成的解决方案包含三个单独的应用程序：</span><span class="sxs-lookup"><span data-stu-id="449f6-143">If you look in the BizTalk Administration Console, you can see that the built solution consists of three separate applications:</span></span>  
  
- <span data-ttu-id="449f6-144">**BTSScn.BPM.OrderBrokerApp**包含 orderbroker 的应用程序</span><span class="sxs-lookup"><span data-stu-id="449f6-144">**BTSScn.BPM.OrderBrokerApp**, the application containing the order broker</span></span>  
  
- <span data-ttu-id="449f6-145">**BTSScn.BPM.CableOrderApp**包含订单处理组件的应用程序</span><span class="sxs-lookup"><span data-stu-id="449f6-145">**BTSScn.BPM.CableOrderApp**, the application containing the order processing components</span></span>  
  
- <span data-ttu-id="449f6-146">**BTSScn.BPM.MessagingApp**，收集共享的其他两个应用程序项目的应用程序</span><span class="sxs-lookup"><span data-stu-id="449f6-146">**BTSScn.BPM.MessagingApp**, an application that collects artifacts shared by the other two applications</span></span>  
  
  <span data-ttu-id="449f6-147">该解决方案的结构可以由三部分组成，因为 BizTalk 应用程序能够使用同一 BizTalk 组内其他应用程序中的项目。</span><span class="sxs-lookup"><span data-stu-id="449f6-147">The tripartite structure of the solution is possible because of the ability of BizTalk applications to use artifacts in other applications within the same BizTalk group.</span></span> <span data-ttu-id="449f6-148">若要使用其他应用程序的项目，请添加从引用应用程序指向其他应用程序的引用。</span><span class="sxs-lookup"><span data-stu-id="449f6-148">To use another application's artifacts, you add a reference to the other application from the referring application.</span></span> <span data-ttu-id="449f6-149">有关引用其他应用程序的信息，请参阅[如何添加对另一个应用程序的引用](../core/how-to-add-a-reference-to-another-application.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-149">For information about referencing other applications, see [How to Add a Reference to Another Application](../core/how-to-add-a-reference-to-another-application.md).</span></span>  
  
  <span data-ttu-id="449f6-150">通过将常见项目放置在单独的应用程序中，您可能只需在一个位置中更新组件。</span><span class="sxs-lookup"><span data-stu-id="449f6-150">Putting the common artifacts in a separate application enables you, potentially, to update components in only one place.</span></span> <span data-ttu-id="449f6-151">共享组件可以是包括端口在内的任何组件。</span><span class="sxs-lookup"><span data-stu-id="449f6-151">The shared components can be anything, including ports.</span></span> <span data-ttu-id="449f6-152">例如，该解决方案中的业务流程可以将错误发送到错误报告端口。</span><span class="sxs-lookup"><span data-stu-id="449f6-152">For example, the orchestrations in the solution send errors to an error reporting port.</span></span> <span data-ttu-id="449f6-153">该端口位于消息传送应用程序 BTSScn.BPM.MessagingApp 中，在该应用程序中，整个解决方案都可使用该端口。</span><span class="sxs-lookup"><span data-stu-id="449f6-153">That port is in the messaging application, BTSScn.BPM.MessagingApp, where the entire solution can use it.</span></span>  
  
  <span data-ttu-id="449f6-154">将解决方案的结构设置为由三个应用程序组成，这样也可以更便捷地将解决方案的各个部分移至其他服务器上。</span><span class="sxs-lookup"><span data-stu-id="449f6-154">Structuring the solution as three applications also makes it easier to move parts of the solution onto other servers.</span></span> <span data-ttu-id="449f6-155">可以将每个应用程序及其引用的应用程序转换为 MSI 文件。</span><span class="sxs-lookup"><span data-stu-id="449f6-155">You can convert each application and its referenced applications into an MSI file.</span></span> <span data-ttu-id="449f6-156">然后可以将该 MSI 文件安装在其他计算机上。</span><span class="sxs-lookup"><span data-stu-id="449f6-156">You can then install that MSI file on another machine.</span></span> <span data-ttu-id="449f6-157">有关将应用程序转换到 MSI 文件的信息，请参阅[如何导出 BizTalk 应用程序](../core/how-to-export-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="449f6-157">For information about converting applications into MSI files, see [How to Export a BizTalk Application](../core/how-to-export-a-biztalk-application.md).</span></span>  
  
### <a name="the-test-solution"></a><span data-ttu-id="449f6-158">测试解决方案</span><span class="sxs-lookup"><span data-stu-id="449f6-158">The Test Solution</span></span>  
 <span data-ttu-id="449f6-159">将 BizTalk 管理控制台中的还三个测试应用程序： **BTSScn.BPM.OrderBrokerApp.Test**， **BTSScn.BPM.CableOrderApp.Test**，和**BTSScn.BPM.MessagingApp.Test**。</span><span class="sxs-lookup"><span data-stu-id="449f6-159">You will also three test applications in the BizTalk Administration Console: **BTSScn.BPM.OrderBrokerApp.Test**, **BTSScn.BPM.CableOrderApp.Test**, and **BTSScn.BPM.MessagingApp.Test**.</span></span> <span data-ttu-id="449f6-160">这三个应用程序只包含用于测试应用程序的端口，主应用程序将引用这些测试应用程序。</span><span class="sxs-lookup"><span data-stu-id="449f6-160">These three applications contain only the ports for the test application and are referenced by the main applications.</span></span> <span data-ttu-id="449f6-161">使用这种结构，主应用程序使用的测试端口可以构造测试解决方案，同时允许将这些测试端口与该解决方案相分离。</span><span class="sxs-lookup"><span data-stu-id="449f6-161">This structure allows for the test ports to be used by the main applications to construct a test solution while at the same time decoupling the test ports from the solution.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="449f6-162">请参阅</span><span class="sxs-lookup"><span data-stu-id="449f6-162">See Also</span></span>  
 <span data-ttu-id="449f6-163">[业务流程管理解决方案的实施要点](../core/implementation-highlights-of-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="449f6-163">[Implementation Highlights of the Business Process Management Solution](../core/implementation-highlights-of-the-business-process-management-solution.md) </span></span>  
 [<span data-ttu-id="449f6-164">业务流程管理解决方案中的模式</span><span class="sxs-lookup"><span data-stu-id="449f6-164">Patterns in the Business Process Management Solution</span></span>](../core/patterns-in-the-business-process-management-solution.md)