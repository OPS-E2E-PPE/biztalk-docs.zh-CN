---
title: "使用时的注意事项 Web 服务 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ea7038dc-4740-4c0a-b6a1-08bc22f42bc2
caps.latest.revision: "31"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0c5cbef60d968119950b6c426a45c94d2e9ab60a
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="considerations-when-consuming-web-services"></a><span data-ttu-id="c1ce6-102">使用 Web Services 时的注意事项</span><span class="sxs-lookup"><span data-stu-id="c1ce6-102">Considerations When Consuming Web Services</span></span>
<span data-ttu-id="c1ce6-103">本部分说明在使用 Web Services 时应注意的事项。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-103">This section provides information that you should take into consideration when consuming Web services.</span></span>  
  
## <a name="using-two-underscore-characters-in-a-parameter-name"></a><span data-ttu-id="c1ce6-104">在参数名称中使用两条下划线</span><span class="sxs-lookup"><span data-stu-id="c1ce6-104">Using two underscore characters in a parameter name</span></span>  
 <span data-ttu-id="c1ce6-105">Web 方法的参数名称不能以“__”（两条下划线）开始。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-105">Parameter names for Web methods cannot begin with "__" (two underscore characters).</span></span> <span data-ttu-id="c1ce6-106">以两条下划线开始的名称可以创建 XLANG/s 不支持（无法使用）的 Web 消息部分。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-106">Names that begin with two underscore characters may create Web message parts that are unsupported (unusable) by XLANG/s.</span></span>  
  
## <a name="the-any-element-and-the-anyattribute-attributes-are-not-supported-in-web-methods"></a><span data-ttu-id="c1ce6-107">在 Web 方法中不支持 any 元素和 anyAttribute 属性。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-107">The any element and the anyAttribute attributes are not supported in Web methods</span></span>  
 <span data-ttu-id="c1ce6-108">不能使用**任何**元素或**anyAttribute** Web 方法的架构中的属性。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-108">You cannot use the **any** element or **anyAttribute** attribute in the schema for a Web method.</span></span>  
  
## <a name="using-xlangs-keywords"></a><span data-ttu-id="c1ce6-109">使用 XLANG/s 关键字</span><span class="sxs-lookup"><span data-stu-id="c1ce6-109">Using XLANG/s keywords</span></span>  
 <span data-ttu-id="c1ce6-110">Web 服务名称或 Web 方法名称不能为 XLANG/s 中的关键字。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-110">A Web service name or a Web method name cannot be a keyword in an XLANG/s.</span></span> <span data-ttu-id="c1ce6-111">如果在使用中的 Web 服务名称或 Web 方法名称 XLANG/s 关键字，你将收到编译错误，当你将添加 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-111">If you use an XLANG/s keyword in the Web service name or Web method name, you will get a compilation error when you add the Web service.</span></span> <span data-ttu-id="c1ce6-112">有关保留字 XLANG/s 语言的列表，请参阅[XLANG-s 保留字](../core/xlang-s-reserved-words.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-112">For a list of reserved words for the XLANG/s language, see [XLANG-s Reserved Words](../core/xlang-s-reserved-words.md).</span></span>  
  
## <a name="required-xlangs-support-for-parameter-types"></a><span data-ttu-id="c1ce6-113">参数类型所需的 XLANG/s 支持</span><span class="sxs-lookup"><span data-stu-id="c1ce6-113">Required XLANG/s support for parameter types</span></span>  
 <span data-ttu-id="c1ce6-114">使用非 XLANG/s 支持的 Web 方法参数类型会导致编译错误。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-114">Using non-XLANG/s supported Web method parameter type will cause compilation errors.</span></span> <span data-ttu-id="c1ce6-115">例如，BizTalk Server 不支持由架构类型的一维数组组成的参数。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-115">For example, BizTalk Server does not support a parameter that consists of a single dimensional array of schema types.</span></span> <span data-ttu-id="c1ce6-116">另外，BizTalk Server 不支持多维数组。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-116">In addition, BizTalk Server does not support multi-dimensional arrays.</span></span> <span data-ttu-id="c1ce6-117">XLANG/s 语言保留在 BizTalk Server 中的单词列表，请参阅[XLANG-s 保留字](../core/xlang-s-reserved-words.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-117">For a list of words that XLANG/s language reserves in BizTalk Server, see [XLANG-s Reserved Words](../core/xlang-s-reserved-words.md).</span></span>  
  
## <a name="avoiding-compilation-errors-caused-by-adding-web-references-containing-c-keywords-or-identifiers"></a><span data-ttu-id="c1ce6-118">避免由添加包含 C# 关键字或标识符的 Web 引用导致的编译错误</span><span class="sxs-lookup"><span data-stu-id="c1ce6-118">Avoiding compilation errors caused by adding Web references containing C# keywords or identifiers</span></span>  
 <span data-ttu-id="c1ce6-119">当你使用**添加服务引用**服务将引用添加到 BizTalk 项目，BizTalk Server，将转换所需调用到架构的每个 Web 方法的架构类型。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-119">When you use the **Add Service Reference** to add service references to BizTalk projects, BizTalk Server converts the schema types that are required to call each Web method to schemas.</span></span> <span data-ttu-id="c1ce6-120">BizTalk Server 将这些架构添加到 Reference.xsd。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-120">BizTalk Server adds these schemas to Reference.xsd.</span></span> <span data-ttu-id="c1ce6-121">如果你的架构包含都是 C# 关键字的元素名称或元素名称与 C# 标识符无效，则可能获得运行时错误。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-121">If your schemas contain element names that are C# keywords or the element name is not valid as a C# identifier, you may get a run-time error.</span></span> <span data-ttu-id="c1ce6-122">要避免运行时错误，请确保您使用的 Web Services 不包含属于 C# 关键字或无效 C# 标识符的元素名称。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-122">To avoid run-time errors, ensure that the Web service you consume does not contain element names that are C# keywords or invalid C# identifiers.</span></span>  
  
## <a name="multiple-serviceport-type-definitions-are-unsupported"></a><span data-ttu-id="c1ce6-123">不支持多个服务/端口类型定义</span><span class="sxs-lookup"><span data-stu-id="c1ce6-123">Multiple service/port type definitions are unsupported</span></span>  
 <span data-ttu-id="c1ce6-124">BizTalk Server 支持添加具有单个服务和端口类型定义的 Web Services 文件。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-124">BizTalk Server supports adding a Web service file with a single service and port type definition.</span></span> <span data-ttu-id="c1ce6-125">若要添加具有多个服务或端口类型定义的 WSDL 文件，则可能产生下列错误：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-125">If you add a WSDL file with multiple service or port type definitions, you may receive the following error:</span></span>  
  
 <span data-ttu-id="c1ce6-126">无法生成 BizTalk 文件。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-126">Could not generate BizTalk files.</span></span> <span data-ttu-id="c1ce6-127">对象引用未设置为某个对象的实例。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-127">Object reference not set to an instance of an object.</span></span>  
  
## <a name="support-for-consuming-arrays-exposed-by-web-services"></a><span data-ttu-id="c1ce6-128">对使用 Web Services 提供的数组的支持</span><span class="sxs-lookup"><span data-stu-id="c1ce6-128">Support for consuming arrays exposed by Web services</span></span>  
 <span data-ttu-id="c1ce6-129">BizTalk Server 可以使用由 Web Services 提供的不是 BizTalk 的一维和交错数组。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-129">BizTalk Server can consume one dimensional and jagged arrays exposed by Web services that are not BizTalk Web services.</span></span> <span data-ttu-id="c1ce6-130">有关如何使用 Web 服务数组的详细信息，请参阅[如何使用 Web 服务数组](../core/how-to-consume-web-service-arrays.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-130">For more information about how to consume Web service arrays, see [How to Consume Web Service Arrays](../core/how-to-consume-web-service-arrays.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1ce6-131">不支持多维数组语法。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-131">Multi dimensional array syntax is not supported.</span></span> <span data-ttu-id="c1ce6-132">例如， `MyArray[1,5]`。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-132">For example, `MyArray[1,5]`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1ce6-133">BizTalk Server 不支持使用的数组**数据集**由 Web 服务公开的对象。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-133">BizTalk Server does not support consuming an array of **DataSet** objects exposed by a Web service.</span></span> <span data-ttu-id="c1ce6-134">XLANG/s 子服务本身支持 .NET 数据集类，但是如果您创建的 BizTalk 项目包含对 Web Services 的 Web 引用，而该 Web Services 提供 .NET 数据集对象的数组，那么在您尝试编译该项目时将出错。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-134">The XLANG/s subservice does natively support the .NET DataSet class but if you create a BizTalk project that contains a Web reference to a Web service that exposes an array of .NET DataSet objects you will get errors when you attempt to compile the project.</span></span>  
  
## <a name="web-method-parameters-must-be-xml-serializable"></a><span data-ttu-id="c1ce6-135">Web 方法参数必须执行 Xml 序列化</span><span class="sxs-lookup"><span data-stu-id="c1ce6-135">Web method parameters must be Xml Serializable</span></span>  
 <span data-ttu-id="c1ce6-136">已使用的 Web Services 中的所有参数都必须执行 Xml 序列化。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-136">All parameters in a consumed Web service must be Xml Serializable.</span></span> <span data-ttu-id="c1ce6-137">若所添加的 Web 方法包含未执行 Xml 序列化的参数，则可能会收到以下错误消息：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-137">If you add a Web method that contains a parameter that is not Xml Serializable, you may receive the following error message:</span></span>  
  
 <span data-ttu-id="c1ce6-138">必须对 System.Xml.Element 执行 Xml 序列化，才能使其成为消息部分类型。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-138">System.Xml.Element must be Xml Seralizeable to be a message part type.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1ce6-139">数据类型， **XmlDocument**和**数据集**，同时不 Xml 可序列化，支持。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-139">The data types, **XmlDocument** and **DataSet**, while not Xml Serializable, are supported.</span></span>  
  
## <a name="consuming-messaging-only-web-services"></a><span data-ttu-id="c1ce6-140">使用仅进行消息传送的 Web Services</span><span class="sxs-lookup"><span data-stu-id="c1ce6-140">Consuming Messaging only Web services</span></span>  
 <span data-ttu-id="c1ce6-141">在使用仅进行消息传送的 Web Services 时，所有 BizTalk 消息正文的部分名都必须与 Web 方法的参数名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-141">When consuming messaging only Web services, all BizTalk message body part names must match the Web method parameter names.</span></span> <span data-ttu-id="c1ce6-142">例如，如果 Web 服务的签名是`WebMethod(MyType1 type1, MyType2 type2)`，部分组成的名称必须是 type1 和 type2，可能会收到以下运行时错误：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-142">For example, if the signature of the Web service is `WebMethod(MyType1 type1, MyType2 type2)`, the part name must be type1 and type2, you may get the following runtime error:</span></span>  
  
 <span data-ttu-id="c1ce6-143">未能检索参数 %1 的消息部分</span><span class="sxs-lookup"><span data-stu-id="c1ce6-143">Failed to retrieve the message part for parameter %1</span></span>  
  
 <span data-ttu-id="c1ce6-144">有关详细信息，请参阅[如何在仅消息传递方案中使用 Web 服务](../core/how-to-consume-web-services-in-a-messaging-only-scenario.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-144">For more information, see [How to Consume Web Services in a Messaging Only Scenario](../core/how-to-consume-web-services-in-a-messaging-only-scenario.md).</span></span>  
  
## <a name="configuring-a-soap-send-port-programmatically"></a><span data-ttu-id="c1ce6-145">以编程方式配置 SOAP 发送端口</span><span class="sxs-lookup"><span data-stu-id="c1ce6-145">Configuring a SOAP Send Port Programmatically</span></span>  
 <span data-ttu-id="c1ce6-146">可以在消息上下文中以编程方式设置配置属性。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-146">It is possible to set configuration properties programmatically on the message context.</span></span> <span data-ttu-id="c1ce6-147">无论发送端口为静态还是动态，您都可以在业务流程或自定义管道组件中设置这些属性。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-147">You can set these properties in an orchestration or a custom pipeline component whether or not the send port is static or dynamic.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c1ce6-148">若要配置**MethodName**静态 SOAP 属性以编程方式发送端口，你需要设置**方法名称**到**[指定更高版本]**中**Web服务**选项卡**SOAP 传输属性**BizTalk Server 管理控制台中的对话框。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-148">To configure the **MethodName** property for the static SOAP send port programmatically, you need to set **Method name** to **[Specify Later]** in the **Web Service** tab of the **SOAP Transport Properties** dialog box in the BizTalk Server Administration Console.</span></span>  
>   
>  <span data-ttu-id="c1ce6-149">有关详细信息**MethodName**属性，请参阅[如何动态设置使用的 Web 服务的 URI](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-149">For more information about the **MethodName** property, see [How to Dynamically Set the URI of a Consumed Web Service](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md).</span></span>  
>   
>  <span data-ttu-id="c1ce6-150">有关详细信息**SOAP 传输属性**对话框中，请参阅**SOAP 传输属性对话框中，Web 服务**选项卡[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-150">For more information about **SOAP Transport Properties** dialog box, see the **SOAP Transport Properties Dialog Box, Web service** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>
  
## <a name="property-rules"></a><span data-ttu-id="c1ce6-151">属性规则</span><span class="sxs-lookup"><span data-stu-id="c1ce6-151">Property Rules</span></span>  
 <span data-ttu-id="c1ce6-152">如果在业务流程或接收管道的自定义管道组件中设置配置属性，则需遵循下列规则：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-152">If the configuration property is set in an orchestration or in a custom pipeline component in a receive pipeline, then the following rules are applied:</span></span>  
  
-   <span data-ttu-id="c1ce6-153">如果消息发送到一个静态发送端口，将被覆盖发送端口的值为配置的属性值。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-153">If a message is sent to a static send port, the property value will be overwritten with the value configured for that send port.</span></span>  
  
-   <span data-ttu-id="c1ce6-154">如果一条消息发送到动态发送端口，则属性值不会被覆盖。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-154">If a message is sent to a dynamic send port, the property value will not be overwritten.</span></span>  
  
 <span data-ttu-id="c1ce6-155">如果在发送管道的自定义管道组件中设置配置属性，则需遵循下列规则：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-155">If a configuration property is set in a custom pipeline component in a send pipeline, then the following rule is applied:</span></span>  
  
-   <span data-ttu-id="c1ce6-156">无论将消息发送到静态发送端口还是动态发送端口，都不会覆盖属性值。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-156">The value will not be overwritten regardless of whether the message is sent to a static or dynamic send port.</span></span> <span data-ttu-id="c1ce6-157">换言之，无论在哪里设置配置属性，发送管道组件都会将其覆盖。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-157">In other words, send pipeline components overwrite the configuration property no matter where it was set.</span></span>  
  
-   <span data-ttu-id="c1ce6-158">有关自定义管道组件的详细信息，请参阅[开发自定义管道组件](../core/developing-custom-pipeline-components.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-158">For more information about custom pipeline components, see [Developing Custom Pipeline Components](../core/developing-custom-pipeline-components.md).</span></span>  
  
-   <span data-ttu-id="c1ce6-159">有关 SOAP 发送适配器的配置属性的详细信息，请参阅[如何动态设置使用的 Web 服务的 URI](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md)。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-159">For more information about the configuration properties of the SOAP send adapter, see [How to Dynamically Set the URI of a Consumed Web Service](../core/how-to-dynamically-set-the-uri-of-a-consumed-web-service.md).</span></span>  
  
## <a name="adding-a-web-reference-to-a-consumed-web-service-that-contains-a-multi-rooted-schema-will-cause-a-compilation-error"></a><span data-ttu-id="c1ce6-160">向已使用的包含多个根架构的 Web Services 添加 Web 引用将导致编译错误</span><span class="sxs-lookup"><span data-stu-id="c1ce6-160">Adding a Web reference to a consumed Web service that contains a multi-rooted schema will cause a compilation error</span></span>  
 <span data-ttu-id="c1ce6-161">如果给 Web Services 项目添加的 Web 引用派生自已发布的 BizTalk 业务流程，并且该业务流程包含具有多个根的架构，则在编译该项目时会出错。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-161">If you add a Web reference to your project for a Web service that was derived from a published BizTalk orchestration and the orchestration contains a schema with multiple roots then an error will occur when the project is compiled.</span></span> <span data-ttu-id="c1ce6-162">如果给项目添加的 Web 引用派生自已发布的 BizTalk 业务流程，需确保业务流程不包含任何多根架构。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-162">If you add a Web reference to your project that was derived from a published BizTalk orchestration, ensure that the orchestration does not contain any multi-rooted schemas.</span></span>  
  
## <a name="using-typeddatasets-as-parameters-to-web-methods"></a><span data-ttu-id="c1ce6-163">将 TypedDataSets 用作 Web 方法的参数</span><span class="sxs-lookup"><span data-stu-id="c1ce6-163">Using TypedDataSets as parameters to Web methods</span></span>  
 <span data-ttu-id="c1ce6-164">为支持将 TypedDataSets 用作 Web 方法的参数，需要执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-164">The following is what you need to do to support using TypedDataSets as parameters to Web methods:</span></span>  
  
1.  <span data-ttu-id="c1ce6-165">将 Web 引用添加到 C# 项目，然后生成代理。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-165">Add the Web reference to a C# project and then generate the proxy.</span></span>  
  
2.  <span data-ttu-id="c1ce6-166">创建 SOAP 发送端口并在发送端口上指定该代理，然后选择方法。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-166">Create a SOAP send port and specify the proxy on the send port and choose the method.</span></span>  
  
3.  <span data-ttu-id="c1ce6-167">在业务流程中定义后期绑定端口和消息类型。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-167">In the orchestration, define a late bound port and define the message types.</span></span> <span data-ttu-id="c1ce6-168">有关其中任何属性提升或可分辨的字段访问所需的大多数情况下，类型可以定义为**XMLDocument**。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-168">For most cases where no property promotion or distinguished field access is needed, the type can be defined as **XMLDocument**.</span></span> <span data-ttu-id="c1ce6-169">为该类型选择直通管道。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-169">Select PassThrough pipelines with this type.</span></span>  
  
4.  <span data-ttu-id="c1ce6-170">在 BizTalk Server 管理控制台中，在**Web 服务**选项卡中**SOAP 传输属性**对话框中的 SOAP 发送端口，指定你想要使用你创建该代理。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-170">In BizTalk Server Administration console, in the **Web Service** tab in the **SOAP Transport Properties** dialog box of the SOAP send port, specify that you want to use that proxy that you created.</span></span> <span data-ttu-id="c1ce6-171">您还需要指定程序集、类型和方法。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-171">You will also need to specify assembly, type, and method.</span></span> <span data-ttu-id="c1ce6-172">有关详细信息，请参阅**SOAP 传输属性对话框中，Web 服务**选项卡[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-172">For more information, see the **SOAP Transport Properties Dialog Box, Web service** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>
  
## <a name="adding-a-web-reference-to-a-consumed-web-service-that-contains-a-web-method-expecting-generic-based-parameters-will-cause-a-compilation-error"></a><span data-ttu-id="c1ce6-173">如果已使用的 Web Services 所包含的 Web 方法需要基于泛型的参数，那么在将 Web 引用添加到这样的 Web Services 时，将导致编译错误</span><span class="sxs-lookup"><span data-stu-id="c1ce6-173">Adding a Web reference to a consumed Web service that contains a Web method expecting generic based parameters will cause a compilation error</span></span>  
 <span data-ttu-id="c1ce6-174">如果给 Web Services 项目添加的 Web 引用所包含的 Web 方法需要基于泛型的参数，例如空参数，则在编译此项目时会出错。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-174">If you add a Web reference to your project for a Web service that contains a Web method expecting generic based parameters such as nullable parameters, an error will occur when the project is compiled.</span></span> <span data-ttu-id="c1ce6-175">不支持此设置。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-175">This is not supported.</span></span> <span data-ttu-id="c1ce6-176">您必须使用显式专用化从 XLANG/s 中调用泛型类。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-176">You must use explicit specialization to call the generic class from XLANG/s.</span></span>  
  
## <a name="biztalk-schema-generation-using-the-add-service-reference"></a><span data-ttu-id="c1ce6-177">使用“添加服务引用”生成 BizTalk 架构</span><span class="sxs-lookup"><span data-stu-id="c1ce6-177">BizTalk Schema Generation using the Add Service Reference</span></span>  
 <span data-ttu-id="c1ce6-178">当你使用**添加服务引用**服务将引用添加到 BizTalk 项目，BizTalk Server，将转换所需调用到架构的每个 Web 方法的架构类型。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-178">When you use the **Add Service Reference** to add service references to BizTalk projects, BizTalk Server converts the schema types that are required to call each Web method to schemas.</span></span> <span data-ttu-id="c1ce6-179">BizTalk Server 将这些架构添加到 Reference.xsd。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-179">BizTalk Server adds these schemas to Reference.xsd.</span></span> <span data-ttu-id="c1ce6-180">若要确保**添加服务引用**生成 BizTalk 架构是否正确，Web 服务必须遵循以下指导原则：</span><span class="sxs-lookup"><span data-stu-id="c1ce6-180">To ensure that the **Add Service Reference** generates the BizTalk schemas correctly, the Web services must conform to the following guidelines:</span></span>  
  
-   <span data-ttu-id="c1ce6-181">Web 方法应具有**SoapDocumentMethodAttribute**而不是**SoapRpcMethodAttribute**。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-181">Web methods should have **SoapDocumentMethodAttribute** instead of **SoapRpcMethodAttribute**.</span></span>  
  
-   <span data-ttu-id="c1ce6-182">Web 服务和方法必须使用**文本**绑定而不**编码**如**[SoapDocumentMethod(Use=SoapBindingUse.Literal)]**。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-182">Web services and methods must use the **Literal** binding instead of **Encoded** such as **[SoapDocumentMethod(Use=SoapBindingUse.Literal)]**.</span></span>  
  
-   <span data-ttu-id="c1ce6-183">Web 方法参数和返回类型必须具有**XmlRootAttribute**使用一个有效**Namespace**属性除非它们是本机的 XSD 类型和 XmlNode 类型。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-183">Web method parameters and return types must have **XmlRootAttribute** with a valid **Namespace** property unless they are native XSD types and the XmlNode type.</span></span>  
  
-   <span data-ttu-id="c1ce6-184">Web 方法不得使用**RequestNamespace**和**ResponseNamespace**中的属性**SoapDocumentMethodAttribute**。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-184">Web methods must not use the **RequestNamespace** and **ResponseNamespace** properties in **SoapDocumentMethodAttribute**.</span></span>  
  
-   <span data-ttu-id="c1ce6-185">Web Services 必须符合 Web Services 互操作性 (WSI) 基本配置文件版本 1.1。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-185">Web services must be compliant with the Web services interoperability (WSI) Basic Profile version 1.1.</span></span>  
  
## <a name="xsd-will-not-contain-nodes-for-simple-parameter-types"></a><span data-ttu-id="c1ce6-186">XSD 将不包含简单参数类型的节点</span><span class="sxs-lookup"><span data-stu-id="c1ce6-186">XSD will not contain nodes for simple parameter types</span></span>  
 <span data-ttu-id="c1ce6-187">当您添加 Web 应用且 Web 方法具有一个简单类型的参数时，生成的 XSD 将不包含该参数的节点。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-187">When you add a Web reference and the Web method has a parameter that is a simple type, the generated XSD will not contain nodes for that parameter.</span></span> <span data-ttu-id="c1ce6-188">而生成的多部分消息将包含属于简单类型的参数。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-188">Instead, the multipart message that is generated will contain a part that is of the simple type.</span></span> <span data-ttu-id="c1ce6-189">业务流程应适当地处理此消息部分。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-189">The orchestration should handle this message part appropriately.</span></span> <span data-ttu-id="c1ce6-190">如果它属于到 Web 服务的请求，则将值手动分配到具有消息赋值形状的消息部分。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-190">If it is a part of the request to the Web service, manually assign the value to that part with a message assignment shape.</span></span> <span data-ttu-id="c1ce6-191">如果它属于来自 Web 服务的响应，则对表达式形状的消息部分进行手动访问来查看值。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-191">If it is a part of the response from the Web service, manually access that part in an expression shape to see the value.</span></span>  
  
## <a name="the-add-service-reference-do-not-support-the-web-services-description-language-wsdl-import-element"></a><span data-ttu-id="c1ce6-192">“添加服务引用”不支持 Web Services 描述语言 (WSDL) 导入元素</span><span class="sxs-lookup"><span data-stu-id="c1ce6-192">The Add Service Reference do not support the Web Services Description Language (WSDL) import element</span></span>  
 <span data-ttu-id="c1ce6-193">为具有导入元素的 WSDL 文件添加服务引用时，“添加服务引用”会失败。</span><span class="sxs-lookup"><span data-stu-id="c1ce6-193">The Add Service Reference fails when you add service references for the WSDL file with the import element.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c1ce6-194">另请参阅</span><span class="sxs-lookup"><span data-stu-id="c1ce6-194">See Also</span></span>  
 [<span data-ttu-id="c1ce6-195">构造 Web 消息</span><span class="sxs-lookup"><span data-stu-id="c1ce6-195">Constructing Web Messages</span></span>](../core/constructing-web-messages.md)