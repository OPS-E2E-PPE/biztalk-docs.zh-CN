---
title: "将证书安装适用于这些 WCF 适配器 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- tools, Certificates Management Console
- certificates, installing [WCF adapters]
- certificates, Certificates Management Console
- certificates, WCF adapters
- WCF adapters, send locations
- receive locations, WCF adapters
- send locations, WCF adapters
- WCF adapters, receive locations
- WCF adapters, certificates
ms.assetid: 04dc065f-a6e8-4359-8696-2a3de24d531d
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 654e5300c253bbf4cede2113c9282b6a2f02862c
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="installing-certificates-for-the-wcf-adapters"></a><span data-ttu-id="ca951-102">安装 WCF 适配器的证书</span><span class="sxs-lookup"><span data-stu-id="ca951-102">Installing Certificates for the WCF Adapters</span></span>
<span data-ttu-id="ca951-103">WCF 适配器可以利用公钥基础结构 (PKI) 数字证书来进行消息加密和解密、消息签名和验证（不可否认性）以及客户端验证。</span><span class="sxs-lookup"><span data-stu-id="ca951-103">The WCF adapters can use public key infrastructure (PKI) digital certificates for purposes of message encryption and decryption, message signing and verification (non-repudiation), and client authentication.</span></span> <span data-ttu-id="ca951-104">本主题介绍将数字证书用于 WCF 适配器的不同证书使用方案和配置选项准则。</span><span class="sxs-lookup"><span data-stu-id="ca951-104">This topic describes various certification usage scenarios and configuration option guidelines for using digital certificates with the WCF adapters.</span></span>  
  
## <a name="certificate-usage-scenarios-for-the-wcf-receive-locations"></a><span data-ttu-id="ca951-105">WCF 接收位置的证书使用方案</span><span class="sxs-lookup"><span data-stu-id="ca951-105">Certificate Usage Scenarios for the WCF Receive Locations</span></span>  
 <span data-ttu-id="ca951-106">下表显示如何安装 WCF 接收位置的证书。</span><span class="sxs-lookup"><span data-stu-id="ca951-106">The following table shows how to install the certificates for the WCF receive locations.</span></span>  
  
|<span data-ttu-id="ca951-107">证书使用</span><span class="sxs-lookup"><span data-stu-id="ca951-107">Certificate usage</span></span>|<span data-ttu-id="ca951-108">用户上下文</span><span class="sxs-lookup"><span data-stu-id="ca951-108">User context</span></span>|<span data-ttu-id="ca951-109">证书存储位置</span><span class="sxs-lookup"><span data-stu-id="ca951-109">Certificate store location</span></span>|<span data-ttu-id="ca951-110">证书类型</span><span class="sxs-lookup"><span data-stu-id="ca951-110">Certificate type</span></span>|<span data-ttu-id="ca951-111">安装证书的时间</span><span class="sxs-lookup"><span data-stu-id="ca951-111">When to install the certificates</span></span>|  
|-----------------------|------------------|--------------------------------|----------------------|--------------------------------------|  
|<span data-ttu-id="ca951-112">解密和签名取决于接收位置的安全设置。</span><span class="sxs-lookup"><span data-stu-id="ca951-112">Decryption and signing depending on the security settings of the receive location</span></span>|<span data-ttu-id="ca951-113">与接收处理程序关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="ca951-113">Account used by the host instance associated with the receive handler</span></span>|<span data-ttu-id="ca951-114">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载接收位置，如每个主机实例的服务帐户，并导入到的服务证书**当前用户 \ 个人 （我）**存储。</span><span class="sxs-lookup"><span data-stu-id="ca951-114">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as each host instance service account, and import the service certificate to the **Current User \ Personal (My)** store.</span></span>|<span data-ttu-id="ca951-115">私人证书</span><span class="sxs-lookup"><span data-stu-id="ca951-115">Own private certificate</span></span>|<span data-ttu-id="ca951-116">指定的值**服务证书的指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="ca951-116">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="ca951-117">-**安全模式**WCF BasicHttp 属性接收位置设置为**消息**。</span><span class="sxs-lookup"><span data-stu-id="ca951-117">-   The **Security mode** property of the WCF-BasicHttp receive location is set to **Message**.</span></span><br /><span data-ttu-id="ca951-118">-**传输客户端凭据类型**WCF BasicHttp 属性接收位置设置为**证书**为**TransportCredentialOnly**安全模式。</span><span class="sxs-lookup"><span data-stu-id="ca951-118">-   The **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate** for the **TransportCredentialOnly** security mode.</span></span><br /><span data-ttu-id="ca951-119">-**消息客户端凭据类型**WCF WSHttp 属性接收位置设置为**无**，**证书**，或**用户名**有关**消息**安全模式。</span><span class="sxs-lookup"><span data-stu-id="ca951-119">-   The **Message client credential type** property of the WCF-WSHttp receive location is set to **None**, **Certificate**, or **UserName** for the **Message** security mode.</span></span><br /><span data-ttu-id="ca951-120">-**传输客户端凭据类型**WCF NetTcp 属性接收位置设置为**无**或**证书**为**传输**安全模式。</span><span class="sxs-lookup"><span data-stu-id="ca951-120">-   The **Transport client credential type** property of the WCF-NetTcp receive location is set to **None** or **Certificate** for the **Transport** security mode.</span></span><br /><span data-ttu-id="ca951-121">-**消息客户端凭据类型**WCF NetTcp 属性接收位置设置为**无**，**用户名**，或**证书**有关**消息**安全模式。</span><span class="sxs-lookup"><span data-stu-id="ca951-121">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **None**, **UserName**, or **Certificate** for the **Message** security mode.</span></span><br /><span data-ttu-id="ca951-122">-**消息客户端凭据类型**WCF NetTcp 属性接收位置设置为**Windows**，**用户名**，或**证书**为**TransportWithMessageCredential**安全模式。</span><span class="sxs-lookup"><span data-stu-id="ca951-122">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **Windows**, **UserName**, or **Certificate** for the **TransportWithMessageCredential** security mode.</span></span><br /><span data-ttu-id="ca951-123">-**安全模式**WCF NetMsmq 属性设置为**消息**或**同时**。</span><span class="sxs-lookup"><span data-stu-id="ca951-123">-   The **Security mode** property of the WCF-NetMsmq is set to **Message** or **Both**.</span></span>|  
|<span data-ttu-id="ca951-124">客户端身份验证</span><span class="sxs-lookup"><span data-stu-id="ca951-124">Client authentication</span></span>|<span data-ttu-id="ca951-125">N/A</span><span class="sxs-lookup"><span data-stu-id="ca951-125">N/A</span></span>|<span data-ttu-id="ca951-126">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载接收位置为管理员，并导入 CA 证书链，客户端 X.509 证书到计算机的受信任根证书颁发机构证书存储区因此可以向此身份验证客户端接收位置。</span><span class="sxs-lookup"><span data-stu-id="ca951-126">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the clients can be authenticated to this receive location.</span></span>|<span data-ttu-id="ca951-127">客户端 X.509 证书的 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="ca951-127">The CA certificate chain for the client X.509 certificates</span></span>|<span data-ttu-id="ca951-128">将客户端 X.509 证书的 CA 证书链安装到下列配置中的“受信任的根证书颁发机构”证书存储中。</span><span class="sxs-lookup"><span data-stu-id="ca951-128">Install the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="ca951-129">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF BasicHttp 属性接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-129">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-130">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF WSHttp 属性接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-130">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-131">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF NetTcp 属性接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-131">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-132">-**消息客户端凭据类型**或**MSMQ 身份验证模式**WCF NetMsmq 属性接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-132">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq receive location is set to **Certificate**.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="ca951-133">由于标准 WCF 收到适配器使用[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式下，若要验证客户端证书，必须安装客户端 X.509 证书的 CA 证书链。</span><span class="sxs-lookup"><span data-stu-id="ca951-133">Because the standard WCF receive adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the client certificates, you must install the CA certificate chain for the client X.509 certificates.</span></span> <span data-ttu-id="ca951-134">你可以使用 WCF 自定义或 WCF CustomIsolated 适配器 cange 到此默认行为。</span><span class="sxs-lookup"><span data-stu-id="ca951-134">You can use the WCF-Custom or the WCF-CustomIsolated adapters to cange this default behavior.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-135">对于独立的 WCF 接收适配器，您需要在独立主机实例和相应应用程序池之间匹配用户帐户。</span><span class="sxs-lookup"><span data-stu-id="ca951-135">For the isolated WCF receive adapters, you need to match the user account between an isolated host instance and the corresponding application pools.</span></span> <span data-ttu-id="ca951-136">有关 BizTalk 隔离主机的详细信息，请参阅[启用 Web 服务](../core/enabling-web-services.md)。</span><span class="sxs-lookup"><span data-stu-id="ca951-136">For more information about the BizTalk isolated hosts, see [Enabling Web Services](../core/enabling-web-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-137">WCF 自定义和 WCF CustomIsolated 接收位置、 用户上下文、 证书存储位置，并且要安装证书的证书类型而异**serviceCredentials**和**clientCredentials**行为元素设置。</span><span class="sxs-lookup"><span data-stu-id="ca951-137">For the WCF-Custom and WCF-CustomIsolated receive locations, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-138">如果接收位置使用的证书元素**终结点标识**属性，你还必须将已发布的服务标识的证书安装到中指定的证书存储区**终结点标识**属性。</span><span class="sxs-lookup"><span data-stu-id="ca951-138">If the receive location uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the published service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-139">除了使用主机实例服务帐户或管理员帐户登录到该计算机外，您还可使用适当的帐户通过“Run As”命令执行相同的操作。</span><span class="sxs-lookup"><span data-stu-id="ca951-139">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  
  
## <a name="certificate-usage-scenarios-for-the-wcf-send-ports"></a><span data-ttu-id="ca951-140">WCF 发送端口的证书使用方案</span><span class="sxs-lookup"><span data-stu-id="ca951-140">Certificate Usage Scenarios for the WCF Send Ports</span></span>  
 <span data-ttu-id="ca951-141">下表显示如何安装 WCF 发送端口的证书。</span><span class="sxs-lookup"><span data-stu-id="ca951-141">The following table shows how to install the certificates for the WCF send ports.</span></span>  
  
|<span data-ttu-id="ca951-142">证书使用</span><span class="sxs-lookup"><span data-stu-id="ca951-142">Certificate usage</span></span>|<span data-ttu-id="ca951-143">用户上下文</span><span class="sxs-lookup"><span data-stu-id="ca951-143">User context</span></span>|<span data-ttu-id="ca951-144">证书存储位置</span><span class="sxs-lookup"><span data-stu-id="ca951-144">Certificate store location</span></span>|<span data-ttu-id="ca951-145">证书类型</span><span class="sxs-lookup"><span data-stu-id="ca951-145">Certificate type</span></span>|<span data-ttu-id="ca951-146">安装证书的时间</span><span class="sxs-lookup"><span data-stu-id="ca951-146">When to install the certificates</span></span>|  
|-----------------------|------------------|--------------------------------|----------------------|--------------------------------------|  
|<span data-ttu-id="ca951-147">客户端身份验证</span><span class="sxs-lookup"><span data-stu-id="ca951-147">Client authentication</span></span>|<span data-ttu-id="ca951-148">与发送端口相关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="ca951-148">Account used by the host instance associated with the send port</span></span>|<span data-ttu-id="ca951-149">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载发送端口，如每个主机实例的服务帐户，并导入到的客户端证书**当前用户 \ 个人 （我）**存储。</span><span class="sxs-lookup"><span data-stu-id="ca951-149">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as each host instance service account, and import the client certificate to the **Current User \ Personal (My)** store.</span></span>|<span data-ttu-id="ca951-150">私人证书</span><span class="sxs-lookup"><span data-stu-id="ca951-150">Own private certificate</span></span>|<span data-ttu-id="ca951-151">指定的值**客户端证书的指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="ca951-151">Specify the value for the **Client certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="ca951-152">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF BasicHttp 发送端口属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-152">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-153">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF WSHttp 发送端口属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-153">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-154">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF NetTcp 发送端口属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-154">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-155">-**消息客户端凭据类型**或**MSMQ 身份验证模式**WCF NetMsmq 发送端口属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-155">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq send port is set to **Certificate**.</span></span>|  
|<span data-ttu-id="ca951-156">服务验证、签名验证和加密取决于发送端口的安全设置</span><span class="sxs-lookup"><span data-stu-id="ca951-156">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span>|<span data-ttu-id="ca951-157">N/A</span><span class="sxs-lookup"><span data-stu-id="ca951-157">N/A</span></span>|<span data-ttu-id="ca951-158">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，它会承载作为管理员，发送端口并导入到的服务证书**本地计算机 \ （通讯簿） 的其他人员**存储。</span><span class="sxs-lookup"><span data-stu-id="ca951-158">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as Administrators, and import the service certificate to the **Local Computer \ Other people (AddressBook)** store.</span></span> <span data-ttu-id="ca951-159">您还必须将服务证书的 CA 证书链安装到该计算机的“受信任的根证书颁发机构”证书存储中。</span><span class="sxs-lookup"><span data-stu-id="ca951-159">You also have to install the CA certificate chain for the service certificates to the Trusted Root Certification Authorities certificate store of the computer.</span></span>|<span data-ttu-id="ca951-160">服务的公共证书</span><span class="sxs-lookup"><span data-stu-id="ca951-160">-   Service public certificate</span></span><br /><span data-ttu-id="ca951-161">的服务证书 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="ca951-161">-   The CA certificate chain for the service certificate</span></span>|<span data-ttu-id="ca951-162">指定的值**服务证书的指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="ca951-162">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="ca951-163">-**消息客户端凭据类型**或**传输客户端凭据类型**WCF BasicHttp 发送端口属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-163">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="ca951-164">-**消息客户端凭据类型**WCF WSHttp 发送端口属性设置为**无**，**用户名**，或**证书**时**协商服务凭据**选项处于未选中状态。</span><span class="sxs-lookup"><span data-stu-id="ca951-164">-   The **Message client credential type** property of the WCF-WSHttp send port is set to **None**, **UserName**, or **Certificate** when the **Negotiate service credential** option is cleared.</span></span><br /><span data-ttu-id="ca951-165">-**安全模式**WCF NetMsmq 发送端口设置为**消息**或**同时**。</span><span class="sxs-lookup"><span data-stu-id="ca951-165">-   The **Security mode** of the WCF-NetMsmq send port is set to **Message** or **Both**.</span></span>|  
|<span data-ttu-id="ca951-166">服务验证、签名验证和加密取决于发送端口的安全设置</span><span class="sxs-lookup"><span data-stu-id="ca951-166">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span>|<span data-ttu-id="ca951-167">N/A</span><span class="sxs-lookup"><span data-stu-id="ca951-167">N/A</span></span>|<span data-ttu-id="ca951-168">以管理员身份登录到将作为发送端口宿主的运行 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的每台计算机，将客户端 X.509 证书的 CA 证书链导入到该计算机的“受信任的根证书颁发机构”证书存储中，以便向此发送端口验证服务。</span><span class="sxs-lookup"><span data-stu-id="ca951-168">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send port as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the service can be authenticated to this send port.</span></span>|<span data-ttu-id="ca951-169">服务证书的 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="ca951-169">The CA certificate chain for the service certificate</span></span>|<span data-ttu-id="ca951-170">如果你未显式指定的服务证书**服务证书的指纹**属性，安装 CA 证书链中的服务 X.509 证书向受信任的根证书颁发机构证书证书存储中的以下配置：</span><span class="sxs-lookup"><span data-stu-id="ca951-170">If you do not explicitly specify the service certificate for the **Service certificate - Thumbprint** property, install the CA certificate chain for the service X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="ca951-171">-**安全模式**WCF BasicHttp 发送端口设置为**传输**或**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="ca951-171">-   The **Security mode** of the WCF-BasicHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="ca951-172">-**安全模式**WCF WSHttp 发送端口设置为**传输**或**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="ca951-172">-   The **Security mode** of the WCF-WSHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="ca951-173">-**安全模式**WCF NetTcp 发送端口设置为**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="ca951-173">-   The **Security mode** of the WCF-NetTcp send port is set to **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="ca951-174">-**传输客户端凭据类型**WCF NetTcp 发送端口属性设置为**无**或**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-174">-   The **Transport client credential type** property of the WCF-NetTcp send port is set to **None** or **Certificate**.</span></span><br /><span data-ttu-id="ca951-175">-**消息客户端凭据类型**WCF NetTcp 发送端口属性设置为**无**，**用户名**，或**证书**。</span><span class="sxs-lookup"><span data-stu-id="ca951-175">-   The **Message client credential type** property of the WCF-NetTcp send port is set to **None**, **UserName**, or **Certificate**.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="ca951-176">因为标准 WCF 发送适配器使用[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式下，若要验证服务证书，必须安装的服务 X.509 证书的 CA 证书链。</span><span class="sxs-lookup"><span data-stu-id="ca951-176">Because the standard WCF send adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the service certificates, you must install the CA certificate chain for the service X.509 certificates.</span></span> <span data-ttu-id="ca951-177">您可使用 WCF-Custom 或 WCF-CustomIsolated 适配器来更改此默认行为。</span><span class="sxs-lookup"><span data-stu-id="ca951-177">You can use the WCF-Custom or the WCF-CustomIsolated adapters to change this default behavior.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-178">WCF 自定义和 WCF CustomIsolated 发送端口、 用户上下文、 证书存储位置和要安装证书的证书类型而异**serviceCredentials**和**clientCredentials**行为元素设置。</span><span class="sxs-lookup"><span data-stu-id="ca951-178">For the WCF-Custom and WCF-CustomIsolated send ports, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-179">如果发送端口使用的证书元素**终结点标识**属性，你还必须将正确的服务标识的证书安装到中指定的证书存储区**终结点标识**属性。</span><span class="sxs-lookup"><span data-stu-id="ca951-179">If the send port uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the expected service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ca951-180">除了使用主机实例服务帐户或管理员帐户登录到该计算机外，您还可使用适当的帐户通过“Run As”命令执行相同的操作。</span><span class="sxs-lookup"><span data-stu-id="ca951-180">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  
  
## <a name="displaying-the-certificates-management-console"></a><span data-ttu-id="ca951-181">显示证书管理控制台</span><span class="sxs-lookup"><span data-stu-id="ca951-181">Displaying the Certificates Management Console</span></span>  
 <span data-ttu-id="ca951-182">若要显示“本地计算机”和“当前用户”的“证书管理控制台”界面，请按下列步骤操作：</span><span class="sxs-lookup"><span data-stu-id="ca951-182">To display the Certificates Management Console interface for Local Computer and Current User, perform the following steps:</span></span>  
  
1.  <span data-ttu-id="ca951-183">单击**启动**，单击**运行**，类型**MMC**，然后单击**确定**以打开 Microsoft 管理控制台。</span><span class="sxs-lookup"><span data-stu-id="ca951-183">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the Microsoft Management Console.</span></span>  
  
2.  <span data-ttu-id="ca951-184">上**文件**菜单上，单击**添加/删除管理单元中**以显示**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="ca951-184">On the **File** menu, click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  
  
3.  <span data-ttu-id="ca951-185">单击**添加**以显示**添加独立管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="ca951-185">Click **Add** to display the **Add Standalone Snap-in** dialog box.</span></span>  
  
4.  <span data-ttu-id="ca951-186">选择**证书**从管理单元，然后单击列表**添加**。</span><span class="sxs-lookup"><span data-stu-id="ca951-186">Select **Certificates** from the list of snap-ins, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="ca951-187">选择**计算机帐户**，单击**下一步**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="ca951-187">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="ca951-188">这将为“本地计算机”添加“证书管理控制台”界面。</span><span class="sxs-lookup"><span data-stu-id="ca951-188">This adds the Certificates Management Console interface for Local Computer.</span></span>  
  
6.  <span data-ttu-id="ca951-189">确保**证书**从管理单元的列表仍处于选中状态，然后单击**添加**试。</span><span class="sxs-lookup"><span data-stu-id="ca951-189">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  
  
7.  <span data-ttu-id="ca951-190">选择**我的用户帐户**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="ca951-190">Select **My user account**, and then click **Finish**.</span></span> <span data-ttu-id="ca951-191">这将为“当前用户”添加“证书管理控制台”界面。</span><span class="sxs-lookup"><span data-stu-id="ca951-191">This adds the Certificates Management Console interface for Current User.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="ca951-192">这将为您当前使用的登录帐户显示“证书管理控制台”。</span><span class="sxs-lookup"><span data-stu-id="ca951-192">This displays the Certificates Management Console for the account that you are currently logged on as.</span></span> <span data-ttu-id="ca951-193">如果您需要为某一服务帐户将证书导入个人存储，则应首先使用该服务帐户的凭据登录。</span><span class="sxs-lookup"><span data-stu-id="ca951-193">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  
  
8.  <span data-ttu-id="ca951-194">单击**关闭**中**独立管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="ca951-194">Click **Close** in the **Standalone Snap-in** dialog box.</span></span>  
  
9. <span data-ttu-id="ca951-195">单击**确定**中**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="ca951-195">Click **OK** in the **Add/Remove Snap-in** dialog box.</span></span>