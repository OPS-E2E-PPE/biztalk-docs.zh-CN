---
title: 安装用于 WCF 适配器的证书 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- tools, Certificates Management Console
- certificates, installing [WCF adapters]
- certificates, Certificates Management Console
- certificates, WCF adapters
- WCF adapters, send locations
- receive locations, WCF adapters
- send locations, WCF adapters
- WCF adapters, receive locations
- WCF adapters, certificates
ms.assetid: 04dc065f-a6e8-4359-8696-2a3de24d531d
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e4e9e108c9ecb37ddd086778330c764de20fc47c
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65331938"
---
# <a name="installing-certificates-for-the-wcf-adapters"></a><span data-ttu-id="b98aa-102">用于 WCF 适配器安装证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-102">Installing Certificates for the WCF Adapters</span></span>
<span data-ttu-id="b98aa-103">WCF 适配器可将公钥基础结构 (PKI) 数字证书用于进行消息加密和解密、 消息签名和验证 （不可否认），并客户端身份验证。</span><span class="sxs-lookup"><span data-stu-id="b98aa-103">The WCF adapters can use public key infrastructure (PKI) digital certificates for purposes of message encryption and decryption, message signing and verification (non-repudiation), and client authentication.</span></span> <span data-ttu-id="b98aa-104">本主题介绍各种证书使用方案和 WCF 适配器使用数字证书的配置选项准则。</span><span class="sxs-lookup"><span data-stu-id="b98aa-104">This topic describes various certification usage scenarios and configuration option guidelines for using digital certificates with the WCF adapters.</span></span>  

## <a name="certificate-usage-scenarios-for-the-wcf-receive-locations"></a><span data-ttu-id="b98aa-105">证书使用方案，为 WCF 接收位置</span><span class="sxs-lookup"><span data-stu-id="b98aa-105">Certificate Usage Scenarios for the WCF Receive Locations</span></span>  
 <span data-ttu-id="b98aa-106">下表显示了如何为 WCF 接收位置中安装的证书。</span><span class="sxs-lookup"><span data-stu-id="b98aa-106">The following table shows how to install the certificates for the WCF receive locations.</span></span>  


|                                 <span data-ttu-id="b98aa-107">证书使用情况</span><span class="sxs-lookup"><span data-stu-id="b98aa-107">Certificate usage</span></span>                                 |                             <span data-ttu-id="b98aa-108">用户上下文</span><span class="sxs-lookup"><span data-stu-id="b98aa-108">User context</span></span>                              |                                                                                                                                                                                     <span data-ttu-id="b98aa-109">证书存储位置</span><span class="sxs-lookup"><span data-stu-id="b98aa-109">Certificate store location</span></span>                                                                                                                                                                                      |                      <span data-ttu-id="b98aa-110">证书类型</span><span class="sxs-lookup"><span data-stu-id="b98aa-110">Certificate type</span></span>                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="b98aa-111">何时安装证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-111">When to install the certificates</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b98aa-112">解密和签名取决于接收位置的安全设置</span><span class="sxs-lookup"><span data-stu-id="b98aa-112">Decryption and signing depending on the security settings of the receive location</span></span> | <span data-ttu-id="b98aa-113">使用与接收处理程序关联的主机实例帐户</span><span class="sxs-lookup"><span data-stu-id="b98aa-113">Account used by the host instance associated with the receive handler</span></span> |                                                          <span data-ttu-id="b98aa-114">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将每个主机实例服务帐户，托管接收位置并导入到的服务证书**当前用户 \ 个人 （我）** 存储。</span><span class="sxs-lookup"><span data-stu-id="b98aa-114">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as each host instance service account, and import the service certificate to the **Current User \ Personal (My)** store.</span></span>                                                           |                  <span data-ttu-id="b98aa-115">私人证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-115">Own private certificate</span></span>                   | <span data-ttu-id="b98aa-116">指定的值**服务证书-指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="b98aa-116">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="b98aa-117">-**安全模式**属性的 Wcf-basichttp 接收位置设置为**消息**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-117">-   The **Security mode** property of the WCF-BasicHttp receive location is set to **Message**.</span></span><br /><span data-ttu-id="b98aa-118">-**传输客户端凭据类型**属性的 Wcf-basichttp 接收位置设置为**证书**有关**TransportCredentialOnly**安全模式。</span><span class="sxs-lookup"><span data-stu-id="b98aa-118">-   The **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate** for the **TransportCredentialOnly** security mode.</span></span><br /><span data-ttu-id="b98aa-119">-**消息客户端凭据类型**属性的 Wcf-wshttp 接收位置设置为**None**，**证书**，或者**用户名**有关**消息**安全模式。</span><span class="sxs-lookup"><span data-stu-id="b98aa-119">-   The **Message client credential type** property of the WCF-WSHttp receive location is set to **None**, **Certificate**, or **UserName** for the **Message** security mode.</span></span><br /><span data-ttu-id="b98aa-120">-**传输客户端凭据类型**属性的 Wcf-nettcp 接收位置设置为**None**或**证书**为**传输**安全模式。</span><span class="sxs-lookup"><span data-stu-id="b98aa-120">-   The **Transport client credential type** property of the WCF-NetTcp receive location is set to **None** or **Certificate** for the **Transport** security mode.</span></span><br /><span data-ttu-id="b98aa-121">-**消息客户端凭据类型**属性的 Wcf-nettcp 接收位置设置为**None**，**用户名**，或者**证书**有关**消息**安全模式。</span><span class="sxs-lookup"><span data-stu-id="b98aa-121">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **None**, **UserName**, or **Certificate** for the **Message** security mode.</span></span><br /><span data-ttu-id="b98aa-122">-**消息客户端凭据类型**属性的 Wcf-nettcp 接收位置设置为**Windows**，**用户名**，或**证书**对于**TransportWithMessageCredential**安全模式。</span><span class="sxs-lookup"><span data-stu-id="b98aa-122">-   The **Message client credential type** property of the WCF-NetTcp receive location is set to **Windows**, **UserName**, or **Certificate** for the **TransportWithMessageCredential** security mode.</span></span><br /><span data-ttu-id="b98aa-123">-**安全模式**Wcf-netmsmq 属性设置为**消息**或**同时**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-123">-   The **Security mode** property of the WCF-NetMsmq is set to **Message** or **Both**.</span></span> |
|                               <span data-ttu-id="b98aa-124">客户端身份验证</span><span class="sxs-lookup"><span data-stu-id="b98aa-124">Client authentication</span></span>                               |                                  <span data-ttu-id="b98aa-125">不可用</span><span class="sxs-lookup"><span data-stu-id="b98aa-125">N/A</span></span>                                  | <span data-ttu-id="b98aa-126">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将托管接收位置作为管理员，并导入的 CA 证书链的客户端 X.509 证书到受信任的根证书颁发机构证书存储的计算机的因此，客户端可以进行身份验证与此接收位置。</span><span class="sxs-lookup"><span data-stu-id="b98aa-126">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the receive locations as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the clients can be authenticated to this receive location.</span></span> | <span data-ttu-id="b98aa-127">客户端 X.509 证书的 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="b98aa-127">The CA certificate chain for the client X.509 certificates</span></span> |                                                                                                                                                                                                               <span data-ttu-id="b98aa-128">将客户端 X.509 证书的 CA 证书链安装到受信任的根证书颁发机构证书存储中的以下配置：</span><span class="sxs-lookup"><span data-stu-id="b98aa-128">Install the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="b98aa-129">-**消息客户端凭据类型**或**传输客户端凭据类型**属性 Wcf-basichttp 接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-129">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-130">-**消息客户端凭据类型**或**传输客户端凭据类型**属性 Wcf-wshttp 接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-130">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-131">-**消息客户端凭据类型**或**传输客户端凭据类型**属性的 Wcf-nettcp 接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-131">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp receive location is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-132">-**消息客户端凭据类型**或**MSMQ 身份验证模式**属性 Wcf-netmsmq 接收位置设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-132">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq receive location is set to **Certificate**.</span></span>                                                                                                                                                                                                                |

> [!NOTE]
>  <span data-ttu-id="b98aa-133">由于标准 WCF 接收适配器使用[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式来验证客户端证书，必须安装客户端 X.509 证书的 CA 证书链。</span><span class="sxs-lookup"><span data-stu-id="b98aa-133">Because the standard WCF receive adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the client certificates, you must install the CA certificate chain for the client X.509 certificates.</span></span> <span data-ttu-id="b98aa-134">可以使用 Wcf-custom 或 Wcf-customisolated 适配器 cange 到此默认行为。</span><span class="sxs-lookup"><span data-stu-id="b98aa-134">You can use the WCF-Custom or the WCF-CustomIsolated adapters to cange this default behavior.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-135">为独立 WCF 接收适配器，你需要匹配独立主机实例和相应的应用程序池之间的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="b98aa-135">For the isolated WCF receive adapters, you need to match the user account between an isolated host instance and the corresponding application pools.</span></span> <span data-ttu-id="b98aa-136">有关独立 BizTalk 主机的详细信息，请参阅[启用 Web 服务](../core/enabling-web-services.md)。</span><span class="sxs-lookup"><span data-stu-id="b98aa-136">For more information about the BizTalk isolated hosts, see [Enabling Web Services](../core/enabling-web-services.md).</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-137">Wcf-custom 和 Wcf-customisolated 接收位置、 用户上下文、 证书存储位置和要安装证书的证书类型而异**serviceCredentials**和**clientCredentials**行为元素设置。</span><span class="sxs-lookup"><span data-stu-id="b98aa-137">For the WCF-Custom and WCF-CustomIsolated receive locations, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-138">如果接收位置使用的证书元素**终结点标识**属性，您还必须安装到证书存储中指定的已发布的服务标识的证书的**终结点标识**属性。</span><span class="sxs-lookup"><span data-stu-id="b98aa-138">If the receive location uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the published service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-139">而不是登录到使用主机实例服务帐户或管理员帐户的计算机，或者可用运行方式命令与适当的帐户来执行相同操作。</span><span class="sxs-lookup"><span data-stu-id="b98aa-139">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  

## <a name="certificate-usage-scenarios-for-the-wcf-send-ports"></a><span data-ttu-id="b98aa-140">WCF 发送端口的证书使用方案</span><span class="sxs-lookup"><span data-stu-id="b98aa-140">Certificate Usage Scenarios for the WCF Send Ports</span></span>  
 <span data-ttu-id="b98aa-141">下表显示了如何安装用于 WCF 发送端口的证书。</span><span class="sxs-lookup"><span data-stu-id="b98aa-141">The following table shows how to install the certificates for the WCF send ports.</span></span>  


|                                                 <span data-ttu-id="b98aa-142">证书使用情况</span><span class="sxs-lookup"><span data-stu-id="b98aa-142">Certificate usage</span></span>                                                  |                          <span data-ttu-id="b98aa-143">用户上下文</span><span class="sxs-lookup"><span data-stu-id="b98aa-143">User context</span></span>                           |                                                                                                                                                                                                      <span data-ttu-id="b98aa-144">证书存储位置</span><span class="sxs-lookup"><span data-stu-id="b98aa-144">Certificate store location</span></span>                                                                                                                                                                                                      |                                       <span data-ttu-id="b98aa-145">证书类型</span><span class="sxs-lookup"><span data-stu-id="b98aa-145">Certificate type</span></span>                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="b98aa-146">何时安装证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-146">When to install the certificates</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                               <span data-ttu-id="b98aa-147">客户端身份验证</span><span class="sxs-lookup"><span data-stu-id="b98aa-147">Client authentication</span></span>                                                | <span data-ttu-id="b98aa-148">与发送端口关联的主机实例使用的帐户</span><span class="sxs-lookup"><span data-stu-id="b98aa-148">Account used by the host instance associated with the send port</span></span> |                                                                               <span data-ttu-id="b98aa-149">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将发送端口宿主的每个主机实例服务帐户，并导入到客户端证书**当前用户 \ 个人 （我）** 存储。</span><span class="sxs-lookup"><span data-stu-id="b98aa-149">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as each host instance service account, and import the client certificate to the **Current User \ Personal (My)** store.</span></span>                                                                               |                                   <span data-ttu-id="b98aa-150">私人证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-150">Own private certificate</span></span>                                    |                                                                                              <span data-ttu-id="b98aa-151">指定的值**客户端证书-指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="b98aa-151">Specify the value for the **Client certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="b98aa-152">-**消息客户端凭据类型**或**传输客户端凭据类型**Wcf-basichttp 发送端口的属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-152">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-153">-**消息客户端凭据类型**或**传输客户端凭据类型**Wcf-wshttp 发送端口的属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-153">-   The **Message client credential type** or **Transport client credential type** property of the WCF-WSHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-154">-**消息客户端凭据类型**或**传输客户端凭据类型**Wcf-nettcp 发送端口的属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-154">-   The **Message client credential type** or **Transport client credential type** property of the WCF-NetTcp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-155">-**消息客户端凭据类型**或**MSMQ 身份验证模式**Wcf-netmsmq 发送端口的属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-155">-   The **Message client credential type** or **MSMQ authentication mode** property of the WCF-NetMsmq send port is set to **Certificate**.</span></span>                                                                                              |
| <span data-ttu-id="b98aa-156">服务身份验证、 签名验证和发送端口根据安全设置加密</span><span class="sxs-lookup"><span data-stu-id="b98aa-156">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span> |                               <span data-ttu-id="b98aa-157">不可用</span><span class="sxs-lookup"><span data-stu-id="b98aa-157">N/A</span></span>                               | <span data-ttu-id="b98aa-158">登录到运行的每台计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将发送端口宿主的作为管理员，并导入到的服务证书**本地计算机 \ 其他人 （通讯簿）** 存储。</span><span class="sxs-lookup"><span data-stu-id="b98aa-158">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send ports as Administrators, and import the service certificate to the **Local Computer \ Other people (AddressBook)** store.</span></span> <span data-ttu-id="b98aa-159">您还需要将服务证书的 CA 证书链安装到计算机的受信任的根证书颁发机构证书存储。</span><span class="sxs-lookup"><span data-stu-id="b98aa-159">You also have to install the CA certificate chain for the service certificates to the Trusted Root Certification Authorities certificate store of the computer.</span></span> | <span data-ttu-id="b98aa-160">-服务公用证书</span><span class="sxs-lookup"><span data-stu-id="b98aa-160">-   Service public certificate</span></span><br /><span data-ttu-id="b98aa-161">的服务证书 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="b98aa-161">-   The CA certificate chain for the service certificate</span></span> |                                                                                                                                                                           <span data-ttu-id="b98aa-162">指定的值**服务证书-指纹**下列配置中的属性：</span><span class="sxs-lookup"><span data-stu-id="b98aa-162">Specify the value for the **Service certificate - Thumbprint** property in the following configurations:</span></span><br /><br /> <span data-ttu-id="b98aa-163">-**消息客户端凭据类型**或**传输客户端凭据类型**Wcf-basichttp 发送端口的属性设置为**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-163">-   The **Message client credential type** or **Transport client credential type** property of the WCF-BasicHttp send port is set to **Certificate**.</span></span><br /><span data-ttu-id="b98aa-164">-**消息客户端凭据类型**Wcf-wshttp 发送端口的属性设置为**None**，**用户名**，或者**证书**时**协商服务凭据**选项已被清除。</span><span class="sxs-lookup"><span data-stu-id="b98aa-164">-   The **Message client credential type** property of the WCF-WSHttp send port is set to **None**, **UserName**, or **Certificate** when the **Negotiate service credential** option is cleared.</span></span><br /><span data-ttu-id="b98aa-165">-**安全模式**Wcf-netmsmq 发送端口设置为**消息**或**同时**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-165">-   The **Security mode** of the WCF-NetMsmq send port is set to **Message** or **Both**.</span></span>                                                                                                                                                                           |
| <span data-ttu-id="b98aa-166">服务身份验证、 签名验证和发送端口根据安全设置加密</span><span class="sxs-lookup"><span data-stu-id="b98aa-166">Service authentication, signature verification, and encryption depending on the security settings of the send port</span></span> |                               <span data-ttu-id="b98aa-167">不可用</span><span class="sxs-lookup"><span data-stu-id="b98aa-167">N/A</span></span>                               |                         <span data-ttu-id="b98aa-168">登录到运行每个计算机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，将作为管理员，承载发送端口并导入的 CA 证书链的客户端 X.509 证书到受信任的根证书颁发机构证书存储的计算机的因此，该服务可以进行身份验证此发送端口。</span><span class="sxs-lookup"><span data-stu-id="b98aa-168">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host the send port as Administrators, and import the CA certificate chain for the client X.509 certificates to the Trusted Root Certification Authorities certificate store of the computer so that the service can be authenticated to this send port.</span></span>                         |                     <span data-ttu-id="b98aa-169">服务证书的 CA 证书链</span><span class="sxs-lookup"><span data-stu-id="b98aa-169">The CA certificate chain for the service certificate</span></span>                     | <span data-ttu-id="b98aa-170">如果未显式指定的服务证书**服务证书-指纹**属性中，安装服务 X.509 CA 证书链证书到受信任的根证书颁发机构证书存储中的以下配置：</span><span class="sxs-lookup"><span data-stu-id="b98aa-170">If you do not explicitly specify the service certificate for the **Service certificate - Thumbprint** property, install the CA certificate chain for the service X.509 certificates to the Trusted Root Certification Authorities certificate store in the following configurations:</span></span><br /><br /> <span data-ttu-id="b98aa-171">-**安全模式**Wcf-basichttp 发送端口设置为**传输**或**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-171">-   The **Security mode** of the WCF-BasicHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="b98aa-172">-**安全模式**Wcf-wshttp 发送端口设置为**传输**或**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-172">-   The **Security mode** of the WCF-WSHttp send port is set to **Transport** or **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="b98aa-173">-**安全模式**的 Wcf-nettcp 发送端口设置为**TransportWithMessageCredential**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-173">-   The **Security mode** of the WCF-NetTcp send port is set to **TransportWithMessageCredential**.</span></span><br /><span data-ttu-id="b98aa-174">-**传输客户端凭据类型**Wcf-nettcp 发送端口的属性设置为**None**或**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-174">-   The **Transport client credential type** property of the WCF-NetTcp send port is set to **None** or **Certificate**.</span></span><br /><span data-ttu-id="b98aa-175">-**消息客户端凭据类型**Wcf-nettcp 发送端口的属性设置为**None**，**用户名**，或者**证书**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-175">-   The **Message client credential type** property of the WCF-NetTcp send port is set to **None**, **UserName**, or **Certificate**.</span></span> |

> [!NOTE]
>  <span data-ttu-id="b98aa-176">由于标准 WCF 发送适配器使用[ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)模式来验证服务证书，必须安装服务 X.509 证书的 CA 证书链。</span><span class="sxs-lookup"><span data-stu-id="b98aa-176">Because the standard WCF send adapters use the [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960) mode to validate the service certificates, you must install the CA certificate chain for the service X.509 certificates.</span></span> <span data-ttu-id="b98aa-177">可以使用 Wcf-custom 或 Wcf-customisolated 适配器来更改此默认行为。</span><span class="sxs-lookup"><span data-stu-id="b98aa-177">You can use the WCF-Custom or the WCF-CustomIsolated adapters to change this default behavior.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-178">对于 Wcf-custom 和 Wcf-customisolated 发送端口、 用户上下文、 证书存储区位置和要安装证书的证书类型而异**serviceCredentials**和**clientCredentials**行为元素设置。</span><span class="sxs-lookup"><span data-stu-id="b98aa-178">For the WCF-Custom and WCF-CustomIsolated send ports, the user context, certificate store location, and certificate type for the certificates to install varies between the **serviceCredentials** and **clientCredentials** behavior element settings.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-179">如果发送端口使用的证书元素**终结点标识**属性，还必须安装正确的服务标识的证书中指定的证书存储中**终结点标识**属性。</span><span class="sxs-lookup"><span data-stu-id="b98aa-179">If the send port uses the certificate element for the **Endpoint Identity** property, you also have to install the certificate for the expected service identity into the certificate store specified in the **Endpoint Identity** property.</span></span>  

> [!NOTE]
>  <span data-ttu-id="b98aa-180">而不是登录到使用主机实例服务帐户或管理员帐户的计算机，或者可用运行方式命令与适当的帐户来执行相同操作。</span><span class="sxs-lookup"><span data-stu-id="b98aa-180">Instead of log on to the computer using host instance service account or administrator account, you can alternatively use Run As command with applicable accounts to perform the same action.</span></span>  

## <a name="displaying-the-certificates-management-console"></a><span data-ttu-id="b98aa-181">显示证书管理控制台</span><span class="sxs-lookup"><span data-stu-id="b98aa-181">Displaying the Certificates Management Console</span></span>  
 <span data-ttu-id="b98aa-182">若要显示有关本地计算机和当前用户的证书管理控制台界面，请执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="b98aa-182">To display the Certificates Management Console interface for Local Computer and Current User, perform the following steps:</span></span>  

1.  <span data-ttu-id="b98aa-183">单击**启动**，单击**运行**，类型**MMC**，然后单击**确定**以打开 Microsoft 管理控制台。</span><span class="sxs-lookup"><span data-stu-id="b98aa-183">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the Microsoft Management Console.</span></span>  

2.  <span data-ttu-id="b98aa-184">上**文件**菜单上，单击**添加/删除管理单元中**以显示**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="b98aa-184">On the **File** menu, click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  

3.  <span data-ttu-id="b98aa-185">单击**外**以显示**添加独立管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="b98aa-185">Click **Add** to display the **Add Standalone Snap-in** dialog box.</span></span>  

4.  <span data-ttu-id="b98aa-186">选择**证书**从列表中的管理单元，然后单击**添加**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-186">Select **Certificates** from the list of snap-ins, and then click **Add**.</span></span>  

5.  <span data-ttu-id="b98aa-187">选择**计算机帐户**，单击**下一步**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-187">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="b98aa-188">这将为本地计算机添加证书管理控制台界面。</span><span class="sxs-lookup"><span data-stu-id="b98aa-188">This adds the Certificates Management Console interface for Local Computer.</span></span>  

6.  <span data-ttu-id="b98aa-189">絋粄**证书**从管理单元的列表仍处于选中状态，然后单击**添加**试。</span><span class="sxs-lookup"><span data-stu-id="b98aa-189">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  

7.  <span data-ttu-id="b98aa-190">选择**我的用户帐户**，然后单击**完成**。</span><span class="sxs-lookup"><span data-stu-id="b98aa-190">Select **My user account**, and then click **Finish**.</span></span> <span data-ttu-id="b98aa-191">这将为当前用户添加证书管理控制台界面。</span><span class="sxs-lookup"><span data-stu-id="b98aa-191">This adds the Certificates Management Console interface for Current User.</span></span>  

    > [!NOTE]
    >  <span data-ttu-id="b98aa-192">此时将显示证书管理控制台当前以登录的帐户。</span><span class="sxs-lookup"><span data-stu-id="b98aa-192">This displays the Certificates Management Console for the account that you are currently logged on as.</span></span> <span data-ttu-id="b98aa-193">如果你需要将证书导入的服务帐户的个人存储然后您应该登录使用服务帐户凭据第一次。</span><span class="sxs-lookup"><span data-stu-id="b98aa-193">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  

8.  <span data-ttu-id="b98aa-194">单击**关闭**中**独立管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="b98aa-194">Click **Close** in the **Standalone Snap-in** dialog box.</span></span>  

9. <span data-ttu-id="b98aa-195">单击**确定**中**添加/删除管理单元中**对话框。</span><span class="sxs-lookup"><span data-stu-id="b98aa-195">Click **OK** in the **Add/Remove Snap-in** dialog box.</span></span>