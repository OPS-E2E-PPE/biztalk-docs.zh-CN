---
title: 如何导入策略 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- policies, requirements
- importing, policies
- policies, importing
- managing [policies], importing
ms.assetid: 92f6ef18-279f-416d-b13e-8b9642539d27
caps.latest.revision: 29
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a994cfdf8ab98f13b86ff586d0d6517ea38e13df
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65337059"
---
# <a name="how-to-import-a-policy"></a><span data-ttu-id="cedb4-102">如何导入策略</span><span class="sxs-lookup"><span data-stu-id="cedb4-102">How to Import a Policy</span></span>
<span data-ttu-id="cedb4-103">本主题介绍如何使用 BizTalk Server 管理控制台将策略导入 BizTalk 组或 BTSTask 命令行工具将策略导入到 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="cedb4-103">This topic describes how to use the BizTalk Server Administration console to import a policy into a BizTalk group or the BTSTask command-line tool to import a policy into a BizTalk application.</span></span>  
  
 <span data-ttu-id="cedb4-104">可以通过使用业务规则编辑器中，创建策略，如中所述[使用业务规则编辑器创建业务规则](../core/creating-business-rules-using-the-business-rule-composer.md)，并直接，然后导入或如中所述，可以从其他 BizTalk 组，导出策略[如何导出策略](../core/how-to-export-a-policy.md)然后导入它。</span><span class="sxs-lookup"><span data-stu-id="cedb4-104">You can create a policy by using the Business Rule Composer, as described in [Creating Business Rules Using the Business Rule Composer](../core/creating-business-rules-using-the-business-rule-composer.md), and then import it directly, or you can export a policy from another BizTalk group, as described in [How to Export a Policy](../core/how-to-export-a-policy.md) and then import it.</span></span>  
  
 <span data-ttu-id="cedb4-105">导入策略可将其注册为 BizTalk 组的规则引擎数据库中。</span><span class="sxs-lookup"><span data-stu-id="cedb4-105">Importing a policy registers it in the Rule Engine database for the BizTalk group.</span></span> <span data-ttu-id="cedb4-106">将策略导入后，您可以在 BizTalk Server 管理控制台中查看它。</span><span class="sxs-lookup"><span data-stu-id="cedb4-106">After you import the policy, you can view it in the BizTalk Server Administration console.</span></span> <span data-ttu-id="cedb4-107">如果使用 BizTalk Server 管理控制台来导入策略，它将以显示\<的所有项目\>BizTalk 组节点。</span><span class="sxs-lookup"><span data-stu-id="cedb4-107">If you use the BizTalk Server Administration console to import a policy, it will display in the \<All Artifacts\> node for the BizTalk group.</span></span> <span data-ttu-id="cedb4-108">然后可以发布它，使其能够将其添加到 BizTalk 应用程序，如中所述[如何发布策略](../core/how-to-publish-a-policy.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-108">You can then publish it to make it available to add it to a BizTalk application, as described in [How to Publish a Policy](../core/how-to-publish-a-policy.md).</span></span> <span data-ttu-id="cedb4-109">如果使用 BTSTask 命令行工具来导入策略，策略将自动发布，并且将显示在导入的应用程序的策略文件夹中。</span><span class="sxs-lookup"><span data-stu-id="cedb4-109">If you use the BTSTask command-line tool to import a policy, the policy will be automatically published and will display in the Policies folder of the application into which you imported it.</span></span>  
  
 <span data-ttu-id="cedb4-110">在导入策略，请记住以下重要事项：</span><span class="sxs-lookup"><span data-stu-id="cedb4-110">When importing a policy, bear in mind the following important points:</span></span>  
  
- <span data-ttu-id="cedb4-111">即使你指定要使用导入的策略覆盖现有策略选项，无法导入已在组的规则引擎数据库中存在并已部署的策略。</span><span class="sxs-lookup"><span data-stu-id="cedb4-111">Even if you specify the option to overwrite an existing policy with the imported policy, you cannot import a policy that already exists in the Rule Engine database for the group and has been deployed.</span></span> <span data-ttu-id="cedb4-112">导入操作将失败。</span><span class="sxs-lookup"><span data-stu-id="cedb4-112">The import operation will fail.</span></span>  
  
- <span data-ttu-id="cedb4-113">即使策略已处于已部署的状态从其他 BizTalk 组导出时，它将处于取消状态时导入。</span><span class="sxs-lookup"><span data-stu-id="cedb4-113">Even if the policy was in a deployed state when exported from another BizTalk group, it will be in an undeployed state when imported.</span></span>  
  
- <span data-ttu-id="cedb4-114">BTSTask 不为导入策略; 提供特定的命令但是可以使用 BTSTask 的 ExportApp 命令有选择地导出仅在想，包括任何其他应用程序项目的应用程序中的策略。</span><span class="sxs-lookup"><span data-stu-id="cedb4-114">BTSTask does not provide a specific command for importing policies; however you can use the ExportApp command of BTSTask to selectively export only the policies in an application that you want, including no other application artifacts.</span></span> <span data-ttu-id="cedb4-115">然后可以使用 ImportApp 命令.msi 文件导入到不同的 BizTalk 组中的应用程序。</span><span class="sxs-lookup"><span data-stu-id="cedb4-115">Then you can use the ImportApp command to import the .msi file into an application in a different BizTalk group.</span></span> <span data-ttu-id="cedb4-116">这是本主题中介绍的方法。</span><span class="sxs-lookup"><span data-stu-id="cedb4-116">This is the approach described in this topic.</span></span> <span data-ttu-id="cedb4-117">当执行此操作时，该策略是自动导入和 BizTalk 组中发布并添加到指定的应用程序。</span><span class="sxs-lookup"><span data-stu-id="cedb4-117">When you do this, the policy is automatically imported and published in the BizTalk group and added to the specified application.</span></span>  
  
  <span data-ttu-id="cedb4-118">有关使用策略的详细信息，请参阅[管理策略](../core/managing-policies.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-118">For more information about working with policies, see [Managing Policies](../core/managing-policies.md).</span></span> <span data-ttu-id="cedb4-119">将策略添加到应用程序的最佳实践，请参阅[部署 BizTalk 应用程序的最佳做法](../core/best-practices-for-deploying-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-119">For best practices on adding policies to applications, see [Best Practices for Deploying a BizTalk Application](../core/best-practices-for-deploying-a-biztalk-application.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="cedb4-120">解决方案开发人员可以创建策略并将其导入规则引擎数据库组的使用规则引擎部署向导，如中所述[如何部署和取消部署策略及词汇](../core/how-to-deploy-and-undeploy-policies-and-vocabularies.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-120">The solution developer can create policies and then import them into the Rule Engine database for the group by using the Rule Engine Deployment Wizard, as described in [How to Deploy and Undeploy Policies and Vocabularies](../core/how-to-deploy-and-undeploy-policies-and-vocabularies.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="cedb4-121">先决条件</span><span class="sxs-lookup"><span data-stu-id="cedb4-121">Prerequisites</span></span>  
 <span data-ttu-id="cedb4-122">以下是执行本主题中的过程的先决条件：</span><span class="sxs-lookup"><span data-stu-id="cedb4-122">The following are prerequisites for performing the procedures in this topic:</span></span>  
  
-   <span data-ttu-id="cedb4-123">您必须是 BizTalk Server Administrators 组的成员的帐户登录。</span><span class="sxs-lookup"><span data-stu-id="cedb4-123">You must be logged on with an account that is a member of the BizTalk Server Administrators group.</span></span> <span data-ttu-id="cedb4-124">有关详细的权限的信息，请参阅[用于部署和管理 BizTalk 应用程序所需权限](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-124">For more detailed information on permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md).</span></span>  
  
-   <span data-ttu-id="cedb4-125">必须安装业务规则引擎。</span><span class="sxs-lookup"><span data-stu-id="cedb4-125">The Business Rule Engine must be installed.</span></span> <span data-ttu-id="cedb4-126">有关详细信息，请参阅[BizTalk Server 2013 和 2013 R2 安装概述](http://msdn.microsoft.com/library/8041926c-cfc9-4eaf-9c28-a2c6e8015bc5)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-126">For more information, see [Installation Overview for BizTalk Server 2013 and 2013 R2](http://msdn.microsoft.com/library/8041926c-cfc9-4eaf-9c28-a2c6e8015bc5).</span></span>  
  
-   <span data-ttu-id="cedb4-127">如果你想要使用 BizTalk Server 管理控制台来导入策略，则必须提供包含要导入的策略的.xml 文件。</span><span class="sxs-lookup"><span data-stu-id="cedb4-127">If you want to use the BizTalk Server Administration console to import a policy, you must have available an .xml file containing the policy that you want to import.</span></span> <span data-ttu-id="cedb4-128">可以通过将策略导出从另一个 BizTalk 组或应用程序，生成一个.xml 文件，此类，如中所述[如何导出策略](../core/how-to-export-a-policy.md)，或通过使用业务规则编辑器，如中所述[如何导入和导出策略和词汇](../core/how-to-import-and-export-policies-and-vocabularies.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-128">You can generate such an .xml file by exporting a policy from another BizTalk group or application, as described in [How to Export a Policy](../core/how-to-export-a-policy.md), or by using the Business Rule Composer, as described in [How to Import and Export Policies and Vocabularies](../core/how-to-import-and-export-policies-and-vocabularies.md).</span></span>  
  
-   <span data-ttu-id="cedb4-129">如果你想要使用 BTSTask 来导入策略，必须具有某一.msi 文件包含要导入的策略。</span><span class="sxs-lookup"><span data-stu-id="cedb4-129">If you want to use BTSTask to import a policy, you must have an .msi file containing the policy to import.</span></span> <span data-ttu-id="cedb4-130">有关说明，请参阅[如何导出策略](../core/how-to-export-a-policy.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-130">For instructions, see [How to Export a Policy](../core/how-to-export-a-policy.md).</span></span>  
  
## <a name="to-import-a-policy"></a><span data-ttu-id="cedb4-131">若要导入策略</span><span class="sxs-lookup"><span data-stu-id="cedb4-131">To import a policy</span></span>  
  
#### <a name="using-the-biztalk-server-administration-console"></a><span data-ttu-id="cedb4-132">使用 BizTalk Server 管理控制台</span><span class="sxs-lookup"><span data-stu-id="cedb4-132">Using the BizTalk Server Administration console</span></span>  
  
1. <span data-ttu-id="cedb4-133">单击**启动**，单击**所有程序**，单击[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]，然后单击**BizTalk Server 管理**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-133">Click **Start**, click **All Programs**, click [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2. <span data-ttu-id="cedb4-134">在控制台树中，展开[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，展开您要向其中导入策略中，展开 BizTalk 组**应用程序**，然后展开**\<的所有项目\>**.</span><span class="sxs-lookup"><span data-stu-id="cedb4-134">In the console tree, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand the BizTalk group into which you want to import the policy, expand **Applications**, and then expand **\<All Artifacts\>**.</span></span>  
  
3. <span data-ttu-id="cedb4-135">右键单击**策略**，然后单击**导入**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-135">Right-click **Policies**, and then click **Import**.</span></span>  
  
4. <span data-ttu-id="cedb4-136">浏览到包含该策略并单击的.xml 文件**打开**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-136">Browse to the .xml file containing the policy and click **Open**.</span></span>  
  
    <span data-ttu-id="cedb4-137">策略导入到组，并显示在**策略**的文件夹**\<的所有项目\>**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-137">The policy is imported into the group and displays in the **Policies** folder of **\<All Artifacts\>**.</span></span>  
  
#### <a name="using-the-command-line"></a><span data-ttu-id="cedb4-138">使用命令行</span><span class="sxs-lookup"><span data-stu-id="cedb4-138">Using the command line</span></span>  
  
1. <span data-ttu-id="cedb4-139">打开命令提示符，如下所示：单击**启动**，单击**运行**，类型`cmd`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-139">Open a command prompt as follows: Click **Start**, click **Run**, type `cmd`, and then click **OK**.</span></span>  
  
2. <span data-ttu-id="cedb4-140">键入以下命令，替换适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="cedb4-140">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
    <span data-ttu-id="cedb4-141">**BTSTask ImportApp /Package:** *value* [**/ApplicationName:**<em>value</em>] [**/Overwrite**] [**/Server:**<em>value</em>] [**/Database:**<em>value</em>]</span><span class="sxs-lookup"><span data-stu-id="cedb4-141">**BTSTask ImportApp /Package:** *value* [**/ApplicationName:**<em>value</em>] [**/Overwrite**] [**/Server:**<em>value</em>] [**/Database:**<em>value</em>]</span></span>  
  
    <span data-ttu-id="cedb4-142">例如：</span><span class="sxs-lookup"><span data-stu-id="cedb4-142">Example:</span></span>  
  
    <span data-ttu-id="cedb4-143">**BTSTask ImportApp /Package:"C:\MSI Files\MyApplication.msi"  /Environment:Test /ApplicationName:MyApplication /Overwrite**</span><span class="sxs-lookup"><span data-stu-id="cedb4-143">**BTSTask ImportApp /Package:"C:\MSI Files\MyApplication.msi"  /Environment:Test /ApplicationName:MyApplication /Overwrite**</span></span>  
  
   |<span data-ttu-id="cedb4-144">参数</span><span class="sxs-lookup"><span data-stu-id="cedb4-144">Parameter</span></span>|<span data-ttu-id="cedb4-145">ReplTest1</span><span class="sxs-lookup"><span data-stu-id="cedb4-145">Value</span></span>|  
   |---------------|-----------|  
   |<span data-ttu-id="cedb4-146">**/Package**</span><span class="sxs-lookup"><span data-stu-id="cedb4-146">**/Package**</span></span>|<span data-ttu-id="cedb4-147">包含要导入的策略的.msi 文件的完整路径。</span><span class="sxs-lookup"><span data-stu-id="cedb4-147">Full path of the .msi file containing the policy to import.</span></span> <span data-ttu-id="cedb4-148">如果路径包含空格，则必须将其括在引号 （"）。</span><span class="sxs-lookup"><span data-stu-id="cedb4-148">If the path includes spaces, you must enclose it in quotation marks (").</span></span>|  
   |<span data-ttu-id="cedb4-149">**/ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="cedb4-149">**/ApplicationName**</span></span>|<span data-ttu-id="cedb4-150">要将策略导入到其中的 BizTalk 应用程序的名称。</span><span class="sxs-lookup"><span data-stu-id="cedb4-150">Name of the BizTalk application into which to import the policy.</span></span> <span data-ttu-id="cedb4-151">如果未指定，是应用程序名称指定使用导出.msi 文件时。</span><span class="sxs-lookup"><span data-stu-id="cedb4-151">If not specified, the application name that was specified when exporting the .msi file is used.</span></span> <span data-ttu-id="cedb4-152">如果指定的应用程序不存在，将创建它。</span><span class="sxs-lookup"><span data-stu-id="cedb4-152">If the specified application does not exist, it will be created.</span></span> <span data-ttu-id="cedb4-153">包含空格的应用程序名必须括在双引号 （"）。</span><span class="sxs-lookup"><span data-stu-id="cedb4-153">Application names that include spaces must be enclosed with double quotation marks (").</span></span>|  
   |<span data-ttu-id="cedb4-154">**/Overwrite**</span><span class="sxs-lookup"><span data-stu-id="cedb4-154">**/Overwrite**</span></span>|<span data-ttu-id="cedb4-155">若要覆盖应用程序中的策略与.msi 文件中具有相同名称和版本数量的项目的选项。</span><span class="sxs-lookup"><span data-stu-id="cedb4-155">Option to overwrite policies in the application with artifacts in the .msi file that have the same name and version number.</span></span> <span data-ttu-id="cedb4-156">如果未指定此选项，并且有一个或多个策略中应用程序的.msi 文件中的策略具有相同的名称和版本号，导入失败。</span><span class="sxs-lookup"><span data-stu-id="cedb4-156">If this option is not specified, and there are one or more policies in the application that have the same name and version number as policies in the .msi file, the import fails.</span></span> <span data-ttu-id="cedb4-157">可以通过应用程序中查看策略的名称和版本数目[ListApp 命令](../core/listapp-command.md)。</span><span class="sxs-lookup"><span data-stu-id="cedb4-157">You can view the name and version number of the policies in an application by using the [ListApp Command](../core/listapp-command.md).</span></span>|  
   |<span data-ttu-id="cedb4-158">**/Server**</span><span class="sxs-lookup"><span data-stu-id="cedb4-158">**/Server**</span></span>|<span data-ttu-id="cedb4-159">承载 BizTalk 管理数据库，在窗体 ServerName\InstanceName，端口中的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="cedb4-159">Name of the SQL Server instance hosting the BizTalk Management database, in the form ServerName\InstanceName,Port.</span></span><br /><br /> <span data-ttu-id="cedb4-160">实例名称仅是所需的实例名称不同于服务器名称时。</span><span class="sxs-lookup"><span data-stu-id="cedb4-160">Instance name is only required when the instance name is different than the server name.</span></span> <span data-ttu-id="cedb4-161">端口是仅在 SQL Server 使用的端口号而不是默认 (1433) 时所需。</span><span class="sxs-lookup"><span data-stu-id="cedb4-161">Port is only required when SQL Server uses a port number other than the default (1433).</span></span><br /><br /> <span data-ttu-id="cedb4-162">示例：</span><span class="sxs-lookup"><span data-stu-id="cedb4-162">Examples:</span></span><br /><br /> <span data-ttu-id="cedb4-163">Server=MyServer</span><span class="sxs-lookup"><span data-stu-id="cedb4-163">Server=MyServer</span></span><br /><br /> <span data-ttu-id="cedb4-164">Server=MyServer\MySQLServer,1533</span><span class="sxs-lookup"><span data-stu-id="cedb4-164">Server=MyServer\MySQLServer,1533</span></span><br /><br /> <span data-ttu-id="cedb4-165">如果未提供，则使用本地计算机上运行的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="cedb4-165">If not provided, the name of the SQL Server instance running on the local computer is used.</span></span>|  
   |<span data-ttu-id="cedb4-166">**/Database**</span><span class="sxs-lookup"><span data-stu-id="cedb4-166">**/Database**</span></span>|<span data-ttu-id="cedb4-167">BizTalk 管理数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="cedb4-167">Name of the BizTalk Management database.</span></span> <span data-ttu-id="cedb4-168">如果未指定，使用 SQL Server 的本地实例中运行的 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="cedb4-168">If not specified, the BizTalk Management database running in the local instance of SQL Server is used.</span></span>|  
  
   > [!NOTE]
   >  <span data-ttu-id="cedb4-169">在支持用户帐户控制 (UAC) 的系统上，可能需要具有管理权限才能运行该工具。</span><span class="sxs-lookup"><span data-stu-id="cedb4-169">On a system that supports User Account Control (UAC), you may need to run the tool with Administrative privileges.</span></span> <span data-ttu-id="cedb4-170">要执行此操作，右键单击该应用程序，并选择**以管理员身份运行**。</span><span class="sxs-lookup"><span data-stu-id="cedb4-170">To do this, right-click the application, and then select **Run as administrator**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cedb4-171">请参阅</span><span class="sxs-lookup"><span data-stu-id="cedb4-171">See Also</span></span>  
 <span data-ttu-id="cedb4-172">[导入 BizTalk 应用程序、 绑定和策略](../core/importing-biztalk-applications-bindings-and-policies.md) </span><span class="sxs-lookup"><span data-stu-id="cedb4-172">[Importing BizTalk Applications, Bindings, and Policies](../core/importing-biztalk-applications-bindings-and-policies.md) </span></span>  
 <span data-ttu-id="cedb4-173">[导出 BizTalk 应用程序、 绑定和策略](../core/exporting-biztalk-applications-bindings-and-policies.md) </span><span class="sxs-lookup"><span data-stu-id="cedb4-173">[Exporting BizTalk Applications, Bindings, and Policies](../core/exporting-biztalk-applications-bindings-and-policies.md) </span></span>  
 [<span data-ttu-id="cedb4-174">管理策略</span><span class="sxs-lookup"><span data-stu-id="cedb4-174">Managing Policies</span></span>](../core/managing-policies.md)