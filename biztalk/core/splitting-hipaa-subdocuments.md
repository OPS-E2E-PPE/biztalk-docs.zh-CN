---
title: 拆分 HIPAA 子文档 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 66d9badd-00c6-43a3-807e-0ad313983adc
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2ea3ceaf708db8620915337de5133644b6eafe87
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65258625"
---
# <a name="splitting-hipaa-subdocuments"></a><span data-ttu-id="bfdc1-102">拆分 HIPAA 子文档</span><span class="sxs-lookup"><span data-stu-id="bfdc1-102">Splitting HIPAA Subdocuments</span></span>
<span data-ttu-id="bfdc1-103">HIPAA 的 EDI 交换通常具有单个事务集内的多个子文档受限于 ST/SE 标头。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-103">EDI interchanges for HIPAA commonly have multiple child/sub documents within a single transaction set, as bounded by the ST/SE headers.</span></span> <span data-ttu-id="bfdc1-104">EDI 接收管道支持单独的 HIPAA 子文档创建从这样的事务集。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-104">The EDI receive pipeline supports creation of separate HIPAA subdocuments from such an transaction set.</span></span> <span data-ttu-id="bfdc1-105">这是不同于非 HIPAA EDI 交换，在其中一个事务集被处理为一条消息。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-105">This is different from non-HIPAA EDI interchanges, in which a single transaction set is processed as a single message.</span></span>  
  
## <a name="subdocument-splitting-schemas"></a><span data-ttu-id="bfdc1-106">子文档拆分架构</span><span class="sxs-lookup"><span data-stu-id="bfdc1-106">Subdocument Splitting Schemas</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="bfdc1-107">支持通过本机架构下列 HIPAA 文档类型的拆分：</span><span class="sxs-lookup"><span data-stu-id="bfdc1-107">supports splitting of the following HIPAA document types through native schemas:</span></span>  
  
- <span data-ttu-id="bfdc1-108">HIPAA 版本 4010 文档：834 登记、 835 索赔付款和 837 索赔的三个变体</span><span class="sxs-lookup"><span data-stu-id="bfdc1-108">HIPAA version 4010 documents: 834 Enrollment, 835 Claim Payment and three variants of 837 Claim</span></span>  
  
- <span data-ttu-id="bfdc1-109">HIPAA 版本 5010 文档：276/277 索赔状态-请求和响应、 834 登记和 837 索赔的三个变体</span><span class="sxs-lookup"><span data-stu-id="bfdc1-109">HIPAA version 5010 documents: 276/277 Claim Status – Request and Response, 834 Enrollment and three variants of 837 Claim</span></span>  
  
  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="bfdc1-110">这三种文档类型的每个提供两个版本的架构。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-110">provides two versions of schemas for each of these three document types.</span></span> <span data-ttu-id="bfdc1-111">对于每个文档类型，由文件名称中的多个标记标识支持拆分的架构。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-111">For each document type, the schema supporting splitting is identified by the ‘Multiple’ tag in the file name.</span></span> <span data-ttu-id="bfdc1-112">其他架构不支持子文档拆分。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-112">The other schema does not support subdocument splitting.</span></span>  
  
  <span data-ttu-id="bfdc1-113">在某些情况下，可能需要拆分和非拆分架构。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-113">In some scenarios, both splitting and non splitting schemas may be required.</span></span> <span data-ttu-id="bfdc1-114">将通过使用自定义目标命名空间的架构的一种变体支持此功能。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-114">This will be supported through the use of a custom target namespace for one variant of the schema.</span></span>  
  
## <a name="how-subdocument-splitting-is-enabled"></a><span data-ttu-id="bfdc1-115">如何启用子文档拆分</span><span class="sxs-lookup"><span data-stu-id="bfdc1-115">How Subdocument Splitting Is Enabled</span></span>  
 <span data-ttu-id="bfdc1-116">通过的 HIPAA 架构中的三个批注项启用 HIPAA 子文档的拆分。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-116">The splitting of HIPAA subdocuments is enabled by three annotation entries in the HIPAA schema.</span></span> <span data-ttu-id="bfdc1-117">前两个架构必须设置为在 appinfo 批注中的条目**是**:</span><span class="sxs-lookup"><span data-stu-id="bfdc1-117">The first two are  entries for the schema in the appinfo annotation, which must be set to **yes**:</span></span>  
  
```  
subdocument_break = "yes" Split_Without_Sibling_Data = "Yes"  
```  
  
 <span data-ttu-id="bfdc1-118">第三个批注项位于 HIPAA 架构中的相应记录级别。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-118">The third annotation entry is located at the appropriate record levels within the HIPAA schema.</span></span> <span data-ttu-id="bfdc1-119">此属性还必须设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-119">This property must also be set to **yes**.</span></span>  
  
```  
subdocument_creation_break = "yes"  
```  
  
 <span data-ttu-id="bfdc1-120">仅当 HIPAA 架构中的子文档创建中断批注设置为"yes"，并且入站的批处理选项参与方属性设置为"交换拆分为事务集"，HIPAA 交换将拆分为子文档。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-120">A HIPAA interchange will be split into subdocuments only if the subdocument creation break annotation within the HIPAA schema is set to "yes", and the Inbound batch processing option party property is set to "Split Interchange as Transaction Sets".</span></span> <span data-ttu-id="bfdc1-121">如果入站的批处理选项参与方属性设置为保留交换，EDI 拆装器将不会拆分为子文档交换。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-121">If the Inbound batch processing option party property is set to preserve the interchange, the EDI disassembler will not split the interchange into subdocuments.</span></span> <span data-ttu-id="bfdc1-122">在这种情况下，EDI 拆装器将忽略该批注。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-122">In this case, the EDI disassembler will ignore the annotation.</span></span> <span data-ttu-id="bfdc1-123">如果此查看器发生的事件中，将会不引发任何警告。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-123">No warning will be raised in the event viewer if this occurs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="bfdc1-124">子文档创建中断批注不能嵌套。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-124">Subdocument creation break annotations cannot be nested.</span></span> <span data-ttu-id="bfdc1-125">如果架构包含对其应用了子文档批注的循环，该循环不能包含对其应用了子文档批注的另一个循环。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-125">If a schema includes a loop that has a subdocument annotation applied to it, that loop cannot contain another loop that has a subdocument annotation applied to it.</span></span>  
  
## <a name="how-subdocuments-are-processed"></a><span data-ttu-id="bfdc1-126">如何处理子文档</span><span class="sxs-lookup"><span data-stu-id="bfdc1-126">How Subdocuments are Processed</span></span>  
 <span data-ttu-id="bfdc1-127">EDI 拆装器在 EDI 接收管道拆分为子文档。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-127">The EDI disassembler in the EDI receive pipeline splits the subdocuments.</span></span> <span data-ttu-id="bfdc1-128">接收管道将验证传入的交换并生成相应确认之后，它将每个单独的子文档路由到 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-128">After the receive pipeline validates the incoming interchange and generates the appropriate acknowledgments, it routes each separate subdocument to the MessageBox.</span></span> <span data-ttu-id="bfdc1-129">每个子文档是结构和语法上都有效，则为但是，业务级别摘要、 事务集总计和事务集控制编号都将是不同步。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-129">Each subdocument is structurally and syntactically valid; however, business level summaries, transaction set totals, and transaction set control numbers are expected to be out of synchronization.</span></span> <span data-ttu-id="bfdc1-130">发送管道将覆盖在每个子文档的 （它来自原始事务集） 的子文档中包括的段计数的 SE01 中现有段计数的值。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-130">The send pipeline will overwrite the value of the existing segment count in SE01 of each subdocument (which came from the original transaction set) to the count of included segments in the subdocument.</span></span> <span data-ttu-id="bfdc1-131">接收管道还将重置每个子文档中的事务集控制编号，以便为子文档没有重复的控制编号。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-131">The receive pipeline will also reset the transaction set control numbers in each subdocument so that the subdocument do not have duplicate control numbers.</span></span> <span data-ttu-id="bfdc1-132">这可确保发送端处理不会失败。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-132">This ensures that send-side processing will not fail.</span></span>  
  
 <span data-ttu-id="bfdc1-133">如果事务集未能通过 EDI 或扩展验证在子文档拆分期间，单个失败的事务集被挂起。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-133">If a transaction set fails EDI or extended validation during subdocument splitting, the individual failing transaction set is suspended.</span></span>  
  
 <span data-ttu-id="bfdc1-134">订阅子文档的发送端口将从 MessageBox 获取每个子文档，序列化 XML 子文档，批处理 （如果启用），验证它们，并发送它们。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-134">A send port that subscribes to the subdocuments will pick up each subdocument from MessageBox, serialize the XML subdocuments, batch them (if enabled), validate them, and send them.</span></span> <span data-ttu-id="bfdc1-135">发送管道会更新段数据元素 (SE01) 的计数。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-135">The send pipeline updates the count of segments data element (SE01).</span></span>  
  
## <a name="how-subdocuments-are-split"></a><span data-ttu-id="bfdc1-136">如何拆分子文档</span><span class="sxs-lookup"><span data-stu-id="bfdc1-136">How Subdocuments Are Split</span></span>  
 <span data-ttu-id="bfdc1-137">子文档创建中断批注通常应用于包含 HIPAA 架构中的一个或多个元素的循环。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-137">A subdocument creation break annotation is commonly applied to a loop that encompasses one or more elements within a HIPAA schema.</span></span> <span data-ttu-id="bfdc1-138">在每个多个子文档中复制其他元素之前和之后在架构中位于中断循环。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-138">Other elements before and after the break loop in the schema are replicated in each of the multiple subdocuments.</span></span>  
  
 <span data-ttu-id="bfdc1-139">下表显示了子文档拆分的示例。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-139">The following table shows an example of subdocument splitting.</span></span> <span data-ttu-id="bfdc1-140">在此示例中，子文档创建中断批注设置为"是"对于 CC 元素循环。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-140">In this example, the subdocument creation break annotation is set to "yes" for the CC element loop.</span></span> <span data-ttu-id="bfdc1-141">因此，事务集中的 CC 元素被分割单独文档，同时 AA、 BB 和 DD 元素中的事务集都包含在每个单独的子文档。</span><span class="sxs-lookup"><span data-stu-id="bfdc1-141">As a result, the CC elements in the transaction set are separated into separate subdocuments, while the AA, BB, and DD elements in the transaction set are all included in each separate subdocument.</span></span>  
  
|<span data-ttu-id="bfdc1-142">架构 （最小值和最大出现次数）</span><span class="sxs-lookup"><span data-stu-id="bfdc1-142">Schema(min and max occurrences)</span></span>|<span data-ttu-id="bfdc1-143">原始实例</span><span class="sxs-lookup"><span data-stu-id="bfdc1-143">Original Instance</span></span>|<span data-ttu-id="bfdc1-144">子文档 #1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-144">Subdocument #1</span></span>|<span data-ttu-id="bfdc1-145">子文档 #2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-145">Subdocument #2</span></span>|<span data-ttu-id="bfdc1-146">子文档 #3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-146">Subdocument #3</span></span>|  
|---------------------------------------|-----------------------|---------------------|---------------------|---------------------|  
|<span data-ttu-id="bfdc1-147">ST (1，0)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-147">ST (1,0)</span></span>|<span data-ttu-id="bfdc1-148">ST</span><span class="sxs-lookup"><span data-stu-id="bfdc1-148">ST</span></span>|<span data-ttu-id="bfdc1-149">ST</span><span class="sxs-lookup"><span data-stu-id="bfdc1-149">ST</span></span>|<span data-ttu-id="bfdc1-150">ST</span><span class="sxs-lookup"><span data-stu-id="bfdc1-150">ST</span></span>|<span data-ttu-id="bfdc1-151">ST</span><span class="sxs-lookup"><span data-stu-id="bfdc1-151">ST</span></span>|  
|<span data-ttu-id="bfdc1-152">AA (1,1)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-152">AA (1,1)</span></span>|<span data-ttu-id="bfdc1-153">AA</span><span class="sxs-lookup"><span data-stu-id="bfdc1-153">AA</span></span>|<span data-ttu-id="bfdc1-154">AA</span><span class="sxs-lookup"><span data-stu-id="bfdc1-154">AA</span></span>|<span data-ttu-id="bfdc1-155">AA</span><span class="sxs-lookup"><span data-stu-id="bfdc1-155">AA</span></span>|<span data-ttu-id="bfdc1-156">AA</span><span class="sxs-lookup"><span data-stu-id="bfdc1-156">AA</span></span>|  
|<span data-ttu-id="bfdc1-157">BB 循环 (1，n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-157">BB loop (1,n)</span></span><br /><br /> <span data-ttu-id="bfdc1-158">BB1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-158">BB1 (1,n)</span></span><br /><br /> <span data-ttu-id="bfdc1-159">抄送循环 (1，n)-subdocument_break ="yes"</span><span class="sxs-lookup"><span data-stu-id="bfdc1-159">CC loop (1,n) - subdocument_break = "yes"</span></span><br /><br /> <span data-ttu-id="bfdc1-160">CC1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-160">CC1 (1,n)</span></span><br /><br /> <span data-ttu-id="bfdc1-161">CC2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-161">CC2 (0,n)</span></span><br /><br /> <span data-ttu-id="bfdc1-162">BB2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-162">BB2 (0,n)</span></span>|<span data-ttu-id="bfdc1-163">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-163">BB1\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-164">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-164">CC1\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-165">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-165">CC2\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-166">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-166">BB2\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-167">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-167">BB1\*2</span></span><br /><br /> <span data-ttu-id="bfdc1-168">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-168">CC1\*2</span></span><br /><br /> <span data-ttu-id="bfdc1-169">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-169">CC2\*2</span></span><br /><br /> <span data-ttu-id="bfdc1-170">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-170">BB1\*3</span></span><br /><br /> <span data-ttu-id="bfdc1-171">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-171">CC1\*3</span></span><br /><br /> <span data-ttu-id="bfdc1-172">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-172">CC2\*3</span></span>|<span data-ttu-id="bfdc1-173">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-173">BB1\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-174">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-174">CC1\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-175">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-175">CC2\*1</span></span><br /><br /> <span data-ttu-id="bfdc1-176">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="bfdc1-176">BB2\*1</span></span>|<span data-ttu-id="bfdc1-177">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-177">BB1\*2</span></span><br /><br /> <span data-ttu-id="bfdc1-178">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-178">CC1\*2</span></span><br /><br /> <span data-ttu-id="bfdc1-179">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="bfdc1-179">CC2\*2</span></span>|<span data-ttu-id="bfdc1-180">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-180">BB1\*3</span></span><br /><br /> <span data-ttu-id="bfdc1-181">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-181">CC1\*3</span></span><br /><br /> <span data-ttu-id="bfdc1-182">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="bfdc1-182">CC2\*3</span></span>|  
|<span data-ttu-id="bfdc1-183">DD (0，n)</span><span class="sxs-lookup"><span data-stu-id="bfdc1-183">DD (0,n)</span></span>|<span data-ttu-id="bfdc1-184">DD</span><span class="sxs-lookup"><span data-stu-id="bfdc1-184">DD</span></span>|<span data-ttu-id="bfdc1-185">DD</span><span class="sxs-lookup"><span data-stu-id="bfdc1-185">DD</span></span>|<span data-ttu-id="bfdc1-186">DD</span><span class="sxs-lookup"><span data-stu-id="bfdc1-186">DD</span></span>|<span data-ttu-id="bfdc1-187">DD</span><span class="sxs-lookup"><span data-stu-id="bfdc1-187">DD</span></span>|  
|<span data-ttu-id="bfdc1-188">SE</span><span class="sxs-lookup"><span data-stu-id="bfdc1-188">SE</span></span>|<span data-ttu-id="bfdc1-189">SE</span><span class="sxs-lookup"><span data-stu-id="bfdc1-189">SE</span></span>|<span data-ttu-id="bfdc1-190">SE</span><span class="sxs-lookup"><span data-stu-id="bfdc1-190">SE</span></span>|<span data-ttu-id="bfdc1-191">SE</span><span class="sxs-lookup"><span data-stu-id="bfdc1-191">SE</span></span>|<span data-ttu-id="bfdc1-192">SE</span><span class="sxs-lookup"><span data-stu-id="bfdc1-192">SE</span></span>|