---
title: 拆分 HIPAA 子文档 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 66d9badd-00c6-43a3-807e-0ad313983adc
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8cd5c202539a86479b397a7c8417b20aeea32542
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36971478"
---
# <a name="splitting-hipaa-subdocuments"></a><span data-ttu-id="c5b32-102">拆分 HIPAA 子文档</span><span class="sxs-lookup"><span data-stu-id="c5b32-102">Splitting HIPAA Subdocuments</span></span>
<span data-ttu-id="c5b32-103">正如 ST/SE 标头所限定的，用于 HIPAA 的 EDI 交换通常在单个事务集内具有多个子文档。</span><span class="sxs-lookup"><span data-stu-id="c5b32-103">EDI interchanges for HIPAA commonly have multiple child/sub documents within a single transaction set, as bounded by the ST/SE headers.</span></span> <span data-ttu-id="c5b32-104">EDI 接收管道支持从这样的事务集创建单独的 HIPAA 子文档。</span><span class="sxs-lookup"><span data-stu-id="c5b32-104">The EDI receive pipeline supports creation of separate HIPAA subdocuments from such an transaction set.</span></span> <span data-ttu-id="c5b32-105">这不同于将单个事务集作为单个消息进行处理的非 HIPAA EDI 交换。</span><span class="sxs-lookup"><span data-stu-id="c5b32-105">This is different from non-HIPAA EDI interchanges, in which a single transaction set is processed as a single message.</span></span>  
  
## <a name="subdocument-splitting-schemas"></a><span data-ttu-id="c5b32-106">子文档拆分架构</span><span class="sxs-lookup"><span data-stu-id="c5b32-106">Subdocument Splitting Schemas</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="c5b32-107"> 支持通过本机架构对下列 HIPAA 文档类型进行拆分：</span><span class="sxs-lookup"><span data-stu-id="c5b32-107"> supports splitting of the following HIPAA document types through native schemas:</span></span>  
  
- <span data-ttu-id="c5b32-108">HIPAA 版本 4010 文档： 834 登记、 835 索赔付款和 837 索赔的三个变体</span><span class="sxs-lookup"><span data-stu-id="c5b32-108">HIPAA version 4010 documents: 834 Enrollment, 835 Claim Payment and three variants of 837 Claim</span></span>  
  
- <span data-ttu-id="c5b32-109">HIPAA 版本 5010 文档： 276/277 索赔状态-请求和响应、 834 登记和 837 索赔的三个变体</span><span class="sxs-lookup"><span data-stu-id="c5b32-109">HIPAA version 5010 documents: 276/277 Claim Status – Request and Response, 834 Enrollment and three variants of 837 Claim</span></span>  
  
  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="c5b32-110"> 为这三种文档类型的每一种都提供了两个版本的架构。</span><span class="sxs-lookup"><span data-stu-id="c5b32-110"> provides two versions of schemas for each of these three document types.</span></span> <span data-ttu-id="c5b32-111">对于每一种文档类型，通过文件名中的“Mulitple”标签对支持拆分的架构进行标识。</span><span class="sxs-lookup"><span data-stu-id="c5b32-111">For each document type, the schema supporting splitting is identified by the ‘Multiple’ tag in the file name.</span></span> <span data-ttu-id="c5b32-112">其他架构不支持子文档拆分。</span><span class="sxs-lookup"><span data-stu-id="c5b32-112">The other schema does not support subdocument splitting.</span></span>  
  
  <span data-ttu-id="c5b32-113">在某些情况下，拆分和非拆分架构可能都是必需的。</span><span class="sxs-lookup"><span data-stu-id="c5b32-113">In some scenarios, both splitting and non splitting schemas may be required.</span></span> <span data-ttu-id="c5b32-114">通过为架构的一种变体使用自定义目标命名空间可以对此提供支持。</span><span class="sxs-lookup"><span data-stu-id="c5b32-114">This will be supported through the use of a custom target namespace for one variant of the schema.</span></span>  
  
## <a name="how-subdocument-splitting-is-enabled"></a><span data-ttu-id="c5b32-115">如何启用子文档拆分</span><span class="sxs-lookup"><span data-stu-id="c5b32-115">How Subdocument Splitting Is Enabled</span></span>  
 <span data-ttu-id="c5b32-116">可以通过 HIPAA 架构中的三个批注项启用 HIPAA 子文档的拆分。</span><span class="sxs-lookup"><span data-stu-id="c5b32-116">The splitting of HIPAA subdocuments is enabled by three annotation entries in the HIPAA schema.</span></span> <span data-ttu-id="c5b32-117">前两个架构必须设置为在 appinfo 批注中的条目**是**:</span><span class="sxs-lookup"><span data-stu-id="c5b32-117">The first two are  entries for the schema in the appinfo annotation, which must be set to **yes**:</span></span>  
  
```  
subdocument_break = "yes" Split_Without_Sibling_Data = "Yes"  
```  
  
 <span data-ttu-id="c5b32-118">第三个批注项位于 HIPAA 架构内的相应记录级别。</span><span class="sxs-lookup"><span data-stu-id="c5b32-118">The third annotation entry is located at the appropriate record levels within the HIPAA schema.</span></span> <span data-ttu-id="c5b32-119">此属性还必须设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="c5b32-119">This property must also be set to **yes**.</span></span>  
  
```  
subdocument_creation_break = "yes"  
```  
  
 <span data-ttu-id="c5b32-120">仅当 HIPAA 架构中的子文档创建中断批注设置为“yes”，并且入站批处理选项参与方属性设置为“将交换拆分为事务集”时，HIPAA 交换才会拆分为子文档。</span><span class="sxs-lookup"><span data-stu-id="c5b32-120">A HIPAA interchange will be split into subdocuments only if the subdocument creation break annotation within the HIPAA schema is set to "yes", and the Inbound batch processing option party property is set to "Split Interchange as Transaction Sets".</span></span> <span data-ttu-id="c5b32-121">如果入站批处理选项参与方属性设置为保留该交换，EDI 拆装器将不会把交换拆分为子文档。</span><span class="sxs-lookup"><span data-stu-id="c5b32-121">If the Inbound batch processing option party property is set to preserve the interchange, the EDI disassembler will not split the interchange into subdocuments.</span></span> <span data-ttu-id="c5b32-122">在此情况下，EDI 拆装器将忽略该批注。</span><span class="sxs-lookup"><span data-stu-id="c5b32-122">In this case, the EDI disassembler will ignore the annotation.</span></span> <span data-ttu-id="c5b32-123">如果发生此情况，事件查看器中不会产生任何警告。</span><span class="sxs-lookup"><span data-stu-id="c5b32-123">No warning will be raised in the event viewer if this occurs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c5b32-124">子文档创建中断批注不能进行嵌套。</span><span class="sxs-lookup"><span data-stu-id="c5b32-124">Subdocument creation break annotations cannot be nested.</span></span> <span data-ttu-id="c5b32-125">如果架构包括一个已对其应用了子文档批注的循环，该循环不能包含应用了子文档批注的另一个循环。</span><span class="sxs-lookup"><span data-stu-id="c5b32-125">If a schema includes a loop that has a subdocument annotation applied to it, that loop cannot contain another loop that has a subdocument annotation applied to it.</span></span>  
  
## <a name="how-subdocuments-are-processed"></a><span data-ttu-id="c5b32-126">如何处理子文档</span><span class="sxs-lookup"><span data-stu-id="c5b32-126">How Subdocuments are Processed</span></span>  
 <span data-ttu-id="c5b32-127">由 EDI 接收管道中的 EDI 拆装器对子文档进行拆分。</span><span class="sxs-lookup"><span data-stu-id="c5b32-127">The EDI disassembler in the EDI receive pipeline splits the subdocuments.</span></span> <span data-ttu-id="c5b32-128">在接收管道验证了传入的交换并生成相应确认之后，它将每个单独的子文档路由至 MessageBox。</span><span class="sxs-lookup"><span data-stu-id="c5b32-128">After the receive pipeline validates the incoming interchange and generates the appropriate acknowledgments, it routes each separate subdocument to the MessageBox.</span></span> <span data-ttu-id="c5b32-129">每个子文档在结构和语法上都是有效的；但是，可以预期的是，业务级别摘要、事务集总计和事务集控制编号是不同步的。</span><span class="sxs-lookup"><span data-stu-id="c5b32-129">Each subdocument is structurally and syntactically valid; however, business level summaries, transaction set totals, and transaction set control numbers are expected to be out of synchronization.</span></span> <span data-ttu-id="c5b32-130">发送管道将覆盖每个子文档的 SE01 中现有段计数的值（来自原始事务集），将其改写为子文档中所包含的段的计数。</span><span class="sxs-lookup"><span data-stu-id="c5b32-130">The send pipeline will overwrite the value of the existing segment count in SE01 of each subdocument (which came from the original transaction set) to the count of included segments in the subdocument.</span></span> <span data-ttu-id="c5b32-131">接收管道还将重置每个子文档中的事务集控制编号，以免子文档具有重复的控制编号。</span><span class="sxs-lookup"><span data-stu-id="c5b32-131">The receive pipeline will also reset the transaction set control numbers in each subdocument so that the subdocument do not have duplicate control numbers.</span></span> <span data-ttu-id="c5b32-132">这样可确保发送端的处理工作不会失败。</span><span class="sxs-lookup"><span data-stu-id="c5b32-132">This ensures that send-side processing will not fail.</span></span>  
  
 <span data-ttu-id="c5b32-133">如果事务集在子文档拆分期间未能通过 EDI 或扩展验证，则单个未通过的事务集将被挂起。</span><span class="sxs-lookup"><span data-stu-id="c5b32-133">If a transaction set fails EDI or extended validation during subdocument splitting, the individual failing transaction set is suspended.</span></span>  
  
 <span data-ttu-id="c5b32-134">订阅子文档的发送端口将从 MessageBox 获取每个子文档，序列化 XML 子文档，对它们进行批处理（如果启用），验证它们，然后发送它们。</span><span class="sxs-lookup"><span data-stu-id="c5b32-134">A send port that subscribes to the subdocuments will pick up each subdocument from MessageBox, serialize the XML subdocuments, batch them (if enabled), validate them, and send them.</span></span> <span data-ttu-id="c5b32-135">发送管道会更新段数据元素 (SE01) 的计数。</span><span class="sxs-lookup"><span data-stu-id="c5b32-135">The send pipeline updates the count of segments data element (SE01).</span></span>  
  
## <a name="how-subdocuments-are-split"></a><span data-ttu-id="c5b32-136">如何拆分子文档</span><span class="sxs-lookup"><span data-stu-id="c5b32-136">How Subdocuments Are Split</span></span>  
 <span data-ttu-id="c5b32-137">子文档创建中断批注通常应用于包含 HIPAA 架构内的一个或多个元素的循环。</span><span class="sxs-lookup"><span data-stu-id="c5b32-137">A subdocument creation break annotation is commonly applied to a loop that encompasses one or more elements within a HIPAA schema.</span></span> <span data-ttu-id="c5b32-138">架构中位于中断循环之前和之后的其他元素复制到每个子文档中。</span><span class="sxs-lookup"><span data-stu-id="c5b32-138">Other elements before and after the break loop in the schema are replicated in each of the multiple subdocuments.</span></span>  
  
 <span data-ttu-id="c5b32-139">下表显示了子文档拆分的一个例子。</span><span class="sxs-lookup"><span data-stu-id="c5b32-139">The following table shows an example of subdocument splitting.</span></span> <span data-ttu-id="c5b32-140">在本例中，子文档创建中断批注对于 CC 元素循环设置为“yes”。</span><span class="sxs-lookup"><span data-stu-id="c5b32-140">In this example, the subdocument creation break annotation is set to "yes" for the CC element loop.</span></span> <span data-ttu-id="c5b32-141">因此，事务集中的 CC 元素被分割为多个单独的子文档，同时每个单独的子文档中都包括了事务集中的 AA、BB 和 DD 元素。</span><span class="sxs-lookup"><span data-stu-id="c5b32-141">As a result, the CC elements in the transaction set are separated into separate subdocuments, while the AA, BB, and DD elements in the transaction set are all included in each separate subdocument.</span></span>  
  
|<span data-ttu-id="c5b32-142">架构（最小/最大出现次数）</span><span class="sxs-lookup"><span data-stu-id="c5b32-142">Schema(min and max occurrences)</span></span>|<span data-ttu-id="c5b32-143">原始实例</span><span class="sxs-lookup"><span data-stu-id="c5b32-143">Original Instance</span></span>|<span data-ttu-id="c5b32-144">子文档 #1</span><span class="sxs-lookup"><span data-stu-id="c5b32-144">Subdocument #1</span></span>|<span data-ttu-id="c5b32-145">子文档 #2</span><span class="sxs-lookup"><span data-stu-id="c5b32-145">Subdocument #2</span></span>|<span data-ttu-id="c5b32-146">子文档 #3</span><span class="sxs-lookup"><span data-stu-id="c5b32-146">Subdocument #3</span></span>|  
|---------------------------------------|-----------------------|---------------------|---------------------|---------------------|  
|<span data-ttu-id="c5b32-147">ST (1,0)</span><span class="sxs-lookup"><span data-stu-id="c5b32-147">ST (1,0)</span></span>|<span data-ttu-id="c5b32-148">ST</span><span class="sxs-lookup"><span data-stu-id="c5b32-148">ST</span></span>|<span data-ttu-id="c5b32-149">ST</span><span class="sxs-lookup"><span data-stu-id="c5b32-149">ST</span></span>|<span data-ttu-id="c5b32-150">ST</span><span class="sxs-lookup"><span data-stu-id="c5b32-150">ST</span></span>|<span data-ttu-id="c5b32-151">ST</span><span class="sxs-lookup"><span data-stu-id="c5b32-151">ST</span></span>|  
|<span data-ttu-id="c5b32-152">AA (1,1)</span><span class="sxs-lookup"><span data-stu-id="c5b32-152">AA (1,1)</span></span>|<span data-ttu-id="c5b32-153">AA</span><span class="sxs-lookup"><span data-stu-id="c5b32-153">AA</span></span>|<span data-ttu-id="c5b32-154">AA</span><span class="sxs-lookup"><span data-stu-id="c5b32-154">AA</span></span>|<span data-ttu-id="c5b32-155">AA</span><span class="sxs-lookup"><span data-stu-id="c5b32-155">AA</span></span>|<span data-ttu-id="c5b32-156">AA</span><span class="sxs-lookup"><span data-stu-id="c5b32-156">AA</span></span>|  
|<span data-ttu-id="c5b32-157">BB loop (1,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-157">BB loop (1,n)</span></span><br /><br /> <span data-ttu-id="c5b32-158">BB1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-158">BB1 (1,n)</span></span><br /><br /> <span data-ttu-id="c5b32-159">CC loop (1,n) - subdocument_break = "yes"</span><span class="sxs-lookup"><span data-stu-id="c5b32-159">CC loop (1,n) - subdocument_break = "yes"</span></span><br /><br /> <span data-ttu-id="c5b32-160">CC1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-160">CC1 (1,n)</span></span><br /><br /> <span data-ttu-id="c5b32-161">CC2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-161">CC2 (0,n)</span></span><br /><br /> <span data-ttu-id="c5b32-162">BB2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-162">BB2 (0,n)</span></span>|<span data-ttu-id="c5b32-163">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-163">BB1\*1</span></span><br /><br /> <span data-ttu-id="c5b32-164">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-164">CC1\*1</span></span><br /><br /> <span data-ttu-id="c5b32-165">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-165">CC2\*1</span></span><br /><br /> <span data-ttu-id="c5b32-166">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-166">BB2\*1</span></span><br /><br /> <span data-ttu-id="c5b32-167">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-167">BB1\*2</span></span><br /><br /> <span data-ttu-id="c5b32-168">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-168">CC1\*2</span></span><br /><br /> <span data-ttu-id="c5b32-169">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-169">CC2\*2</span></span><br /><br /> <span data-ttu-id="c5b32-170">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-170">BB1\*3</span></span><br /><br /> <span data-ttu-id="c5b32-171">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-171">CC1\*3</span></span><br /><br /> <span data-ttu-id="c5b32-172">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-172">CC2\*3</span></span>|<span data-ttu-id="c5b32-173">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-173">BB1\*1</span></span><br /><br /> <span data-ttu-id="c5b32-174">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-174">CC1\*1</span></span><br /><br /> <span data-ttu-id="c5b32-175">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-175">CC2\*1</span></span><br /><br /> <span data-ttu-id="c5b32-176">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="c5b32-176">BB2\*1</span></span>|<span data-ttu-id="c5b32-177">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-177">BB1\*2</span></span><br /><br /> <span data-ttu-id="c5b32-178">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-178">CC1\*2</span></span><br /><br /> <span data-ttu-id="c5b32-179">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="c5b32-179">CC2\*2</span></span>|<span data-ttu-id="c5b32-180">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-180">BB1\*3</span></span><br /><br /> <span data-ttu-id="c5b32-181">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-181">CC1\*3</span></span><br /><br /> <span data-ttu-id="c5b32-182">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="c5b32-182">CC2\*3</span></span>|  
|<span data-ttu-id="c5b32-183">DD (0,n)</span><span class="sxs-lookup"><span data-stu-id="c5b32-183">DD (0,n)</span></span>|<span data-ttu-id="c5b32-184">DD</span><span class="sxs-lookup"><span data-stu-id="c5b32-184">DD</span></span>|<span data-ttu-id="c5b32-185">DD</span><span class="sxs-lookup"><span data-stu-id="c5b32-185">DD</span></span>|<span data-ttu-id="c5b32-186">DD</span><span class="sxs-lookup"><span data-stu-id="c5b32-186">DD</span></span>|<span data-ttu-id="c5b32-187">DD</span><span class="sxs-lookup"><span data-stu-id="c5b32-187">DD</span></span>|  
|<span data-ttu-id="c5b32-188">SE</span><span class="sxs-lookup"><span data-stu-id="c5b32-188">SE</span></span>|<span data-ttu-id="c5b32-189">SE</span><span class="sxs-lookup"><span data-stu-id="c5b32-189">SE</span></span>|<span data-ttu-id="c5b32-190">SE</span><span class="sxs-lookup"><span data-stu-id="c5b32-190">SE</span></span>|<span data-ttu-id="c5b32-191">SE</span><span class="sxs-lookup"><span data-stu-id="c5b32-191">SE</span></span>|<span data-ttu-id="c5b32-192">SE</span><span class="sxs-lookup"><span data-stu-id="c5b32-192">SE</span></span>|