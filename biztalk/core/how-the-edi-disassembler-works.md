---
title: "EDI 反汇编程序的工作原理 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8da91ba4-e1c9-4e6b-bbd1-fe71ea880118
caps.latest.revision: "43"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4edf1353a9f06103205e1e6e4296c2aa77e74dc6
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
---
# <a name="how-the-edi-disassembler-works"></a><span data-ttu-id="87746-102">EDI 拆装器的工作方式</span><span class="sxs-lookup"><span data-stu-id="87746-102">How the EDI Disassembler Works</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="87746-103"> 执行 EDI 接收管道 (`Microsoft.BizTalk.DefaultPipelines.EDIReceivePipeline`) 中接收的 EDI 编码交换的大多数处理。</span><span class="sxs-lookup"><span data-stu-id="87746-103"> performs most processing for received EDI-encoded interchanges in the EDI Receive Pipeline (`Microsoft.BizTalk.DefaultPipelines.EDIReceivePipeline`).</span></span> <span data-ttu-id="87746-104">此管道包括用于执行下列处理的 EDI 拆装器管道组件：</span><span class="sxs-lookup"><span data-stu-id="87746-104">This pipeline includes the EDI disassembler pipeline component, which performs the following processing:</span></span>  
  
-   <span data-ttu-id="87746-105">将单个消息中的多个交换拆分为单独的交换（条件是接收位置的“DetectMID”管道属性设置为 True）。</span><span class="sxs-lookup"><span data-stu-id="87746-105">Splits multiple interchanges in a single message into separate interchanges (if the "DetectMID" pipeline property for the receive location is set to True).</span></span> <span data-ttu-id="87746-106">EDI 拆装器执行此操作的方法是：即使在遇到交换控制尾部（IEA 或 UNZ）之后，也仍将搜索交换控制标头（ISA、UNA 或 UNB）。</span><span class="sxs-lookup"><span data-stu-id="87746-106">The EDI Disassembler does so by searching for an interchange control header (ISA, UNA, or UNB) even after an interchange control trailer (IEA or UNZ) has been encountered.</span></span>  
  
-   <span data-ttu-id="87746-107">验证信封。</span><span class="sxs-lookup"><span data-stu-id="87746-107">Validates the envelope.</span></span>  
  
-   <span data-ttu-id="87746-108">反汇编交换。</span><span class="sxs-lookup"><span data-stu-id="87746-108">Disassembles the interchange.</span></span>  
  
-   <span data-ttu-id="87746-109">处理 HIPAA 交换的触发字段。</span><span class="sxs-lookup"><span data-stu-id="87746-109">Processes trigger fields for HIPAA interchanges.</span></span>  
  
-   <span data-ttu-id="87746-110">根据需要验证 EDI 和特定于合作伙伴的属性。</span><span class="sxs-lookup"><span data-stu-id="87746-110">Validates EDI and partner-specific properties, as applicable.</span></span> <span data-ttu-id="87746-111">这包括 EDI 架构验证、X12 编码消息的跨字段验证（如果已配置）、EDI 结构验证和扩展架构验证（如果此架构是使用具有非 EDI 数据类型的节点自定义的）。</span><span class="sxs-lookup"><span data-stu-id="87746-111">This includes EDI schema validation, cross-field validation for X12-encoded messages (if configured), EDI structural validation, and extended schema validation (if the schema was customized with a node that has a non-EDI data type).</span></span> <span data-ttu-id="87746-112">有关详细信息，请参阅[验证的接收 EDI 消息](../core/validation-of-received-edi-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="87746-112">For more information, see [Validation of Received EDI Messages](../core/validation-of-received-edi-messages.md).</span></span>  
  
-   <span data-ttu-id="87746-113">验证交换、 组和事务集控制编号是否不存在重复项，如果在启用了检查**验证**页 (下**交换设置**) 的双向语言协议选项卡**协议属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="87746-113">Verifies that the interchange, group, and transaction set control numbers are not duplicates, if the checks are enabled in the **Validation** page (under **Interchange Settings**) of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="87746-114">根据以前收到的交换检查交换控制编号。</span><span class="sxs-lookup"><span data-stu-id="87746-114">Check the interchange control number against previously received interchanges.</span></span> <span data-ttu-id="87746-115">根据交换中的其他组控制编号检查组控制编号。</span><span class="sxs-lookup"><span data-stu-id="87746-115">Checks the group control number against other group control numbers in the interchange.</span></span> <span data-ttu-id="87746-116">根据该组中的其他事务集控制编号检查事务集控制编号。</span><span class="sxs-lookup"><span data-stu-id="87746-116">Checks the transaction set control number against other transaction set control numbers in that group.</span></span> <span data-ttu-id="87746-117">如果发现重复项，状态报告将指示存在重复记录。</span><span class="sxs-lookup"><span data-stu-id="87746-117">If a duplicate is discovered, the status report will indicate that a duplicate record exists.</span></span>  
  
-   <span data-ttu-id="87746-118">为每个事务集生成一个 XML 文档。</span><span class="sxs-lookup"><span data-stu-id="87746-118">Generates an XML document for each transaction set.</span></span> <span data-ttu-id="87746-119">在每个 XML 文件中，升级 BTS.MessageType 上下文属性，将其设置为带有命名空间的架构名称。</span><span class="sxs-lookup"><span data-stu-id="87746-119">On each XML file, promotes the context property of BTS.MessageType, setting it to the schema name with namespace.</span></span>  
  
-   <span data-ttu-id="87746-120">将整个交换转换为 XML，如果**入站批处理选项**属性设置为两种状态之一**保留交换**值。</span><span class="sxs-lookup"><span data-stu-id="87746-120">Converts the entire interchange to XML if the **Inbound batch processing option** property is set to one of the two **Preserve Interchange** values.</span></span> <span data-ttu-id="87746-121">此属性可以设置从**本地主机设置**下页上**交换设置**的双向协议选项卡**协议属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="87746-121">This property can is set from the **Local Host Settings** page under **Interchange Settings** of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="87746-122">接收管道将升级 ReuseEnvelope 属性以将交换标识为保留。</span><span class="sxs-lookup"><span data-stu-id="87746-122">The receive pipeline promotes the property ReuseEnvelope to identify the interchange as preserved.</span></span>  
  
-   <span data-ttu-id="87746-123">生成技术确认和/或功能确认（如果已配置）。</span><span class="sxs-lookup"><span data-stu-id="87746-123">Generates a Technical and/or Functional acknowledgment (if configured).</span></span> <span data-ttu-id="87746-124">这包括对确认进行批处理（如果已配置）。</span><span class="sxs-lookup"><span data-stu-id="87746-124">This can include batching the acknowledgments (if configured).</span></span> <span data-ttu-id="87746-125">提升 BTS 的上下文属性。MessageType，将其设置等于 http://schemas.microsoft.com/EDI/ 中的控件模式\<X12 或 EDIFACT\> （例如，对于 997 确认 X12_997_Root） 的命名空间。</span><span class="sxs-lookup"><span data-stu-id="87746-125">Promotes the context property of BTS.MessageType, setting it equal to the control schema in the http://schemas.microsoft.com/EDI/\<X12 or EDIFACT\> namespace (for example, X12_997_Root for a 997 acknowledgment).</span></span> <span data-ttu-id="87746-126">同时，还将升级 EDI.DestinationPartyName 上下文属性，此属性可确保提取确认以便发送。</span><span class="sxs-lookup"><span data-stu-id="87746-126">Also promotes the EDI.DestinationPartyName context property, which ensures that the acknowledgment will be picked up for sending.</span></span> <span data-ttu-id="87746-127">有关详细信息，请参阅[发送 EDI 确认](../core/sending-an-edi-acknowledgment.md)。</span><span class="sxs-lookup"><span data-stu-id="87746-127">For more information, see [Sending an EDI Acknowledgment](../core/sending-an-edi-acknowledgment.md).</span></span>  
  
-   <span data-ttu-id="87746-128">执行 HIPAA 276/277（仅版本 5010 ）834、835（仅版本 4010）和 837 文档拆分（如果适用）。</span><span class="sxs-lookup"><span data-stu-id="87746-128">Performs HIPAA 276/277 (version 5010 only) 834, 835 (version 4010 only) and 837 document splitting, if applicable.</span></span>  
  
-   <span data-ttu-id="87746-129">将属性升级或写入到消息上下文（请参阅下一部分）。</span><span class="sxs-lookup"><span data-stu-id="87746-129">Promotes or writes properties to the message context (see next section).</span></span>  
  
## <a name="promoting-or-writing-properties-to-the-context"></a><span data-ttu-id="87746-130">将属性升级或写入到上下文</span><span class="sxs-lookup"><span data-stu-id="87746-130">Promoting or Writing Properties to the Context</span></span>  
 <span data-ttu-id="87746-131">当 EDI 拆装器处理收到的消息时，该拆装器会将下列属性升级或写入到消息上下文：</span><span class="sxs-lookup"><span data-stu-id="87746-131">When the EDI Disassembler processes a received message, it promotes or writes the following properties to the message context:</span></span>  
  
-   <span data-ttu-id="87746-132">对于 X12 编码 unbatched 消息中，将以下属性提升从信封： ISA06、 ISA08、 ISA15;GS01、 GS02、 GS03，GS08;ST03 和 ST01。</span><span class="sxs-lookup"><span data-stu-id="87746-132">For an X12-encoded unbatched message, promotes the following properties from the envelope: ISA06, ISA08, ISA15; GS01, GS02, GS03, GS08; ST03 and ST01.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="87746-133">为传入的 HIPAA 837 交换，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]支持三个 HIPAA 837 架构： 声明 Dental_837D、 声明 Institutional_837I 和声明 Professional_837P。</span><span class="sxs-lookup"><span data-stu-id="87746-133">For an incoming HIPAA 837 interchange, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports three HIPAA 837 schemas: Claim-Dental_837D, Claim-Institutional_837I, and Claim-Professional_837P.</span></span> <span data-ttu-id="87746-134">其中每项的 ST01 是"837"。这三个架构版本 5010 中具有不同的值为 GS08: 837I、 837 d"005010X224A1"和"005010 X 222"为 837 P."005010X223A1"</span><span class="sxs-lookup"><span data-stu-id="87746-134">The ST01 for each of these is “837".These three schemas have different values for GS08 in version 5010: "005010X223A1" for 837I, "005010X224A1" for 837D, and "005010X222" for 837P.</span></span> <span data-ttu-id="87746-135">架构版本 4010 中为 GS08 具有不同的值:"004010X096A1"为 837I、 837 d"004010X097A1"和"004010X098A1"为 837 P.</span><span class="sxs-lookup"><span data-stu-id="87746-135">The schemas have different values for GS08 in version 4010: "004010X096A1" for 837I, "004010X097A1" for 837D, and "004010X098A1" for 837P.</span></span>  
  
-   <span data-ttu-id="87746-136">对于 EDIFACT 编码 unbatched 消息中，将以下属性提升从信封： UNB2.1、 UNB2.3、 UNB3.1、 UNB11;UNG1，UNG2.1，UNG3.1;UNH2.1，UNH2.2，UNH2.3。</span><span class="sxs-lookup"><span data-stu-id="87746-136">For an EDIFACT-encoded unbatched message, promotes the following properties from the envelope: UNB2.1, UNB2.3, UNB3.1, UNB11; UNG1, UNG2.1, UNG3.1; UNH2.1, UNH2.2, UNH2.3.</span></span>  
  
-   <span data-ttu-id="87746-137">如果拆分批交换，请将 ISA_Segment 和 GS_Segment 写入到 X12 编码消息的上下文，或者将 UNA_Segment、UNB_Segment 和 UNG_Segment 写入到 EDIFACT 编码消息的上下文。</span><span class="sxs-lookup"><span data-stu-id="87746-137">If a batched interchange is split, writes ISA_Segment and GS_Segment to the context for X12-encoded messages, or writes UNA_Segment, UNB_Segment, and UNG_Segment to the context for EDIFACT-encoded messages.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="87746-138">上述各段将被写入到上下文中，</span><span class="sxs-lookup"><span data-stu-id="87746-138">The above segments are written to the context.</span></span> <span data-ttu-id="87746-139">而不是升级。</span><span class="sxs-lookup"><span data-stu-id="87746-139">They are not promoted to the context.</span></span> <span data-ttu-id="87746-140">但是，您可以使用消息收集示例将这些段附加到事务集中。</span><span class="sxs-lookup"><span data-stu-id="87746-140">You can, however, append these segments to a transaction set using the Message Enrichment sample.</span></span> <span data-ttu-id="87746-141">您还可以采用附加示例的代码将其添加到自定义管道组件中。</span><span class="sxs-lookup"><span data-stu-id="87746-141">You can also take the code that appends the samples and add it to a custom pipeline component.</span></span> <span data-ttu-id="87746-142">有关详细信息，请参阅[消息扩充示例 （BizTalk Server 示例）](../core/message-enrichment-sample-biztalk-server-sample.md)。</span><span class="sxs-lookup"><span data-stu-id="87746-142">For more information, see [Message Enrichment Sample (BizTalk Server Sample)](../core/message-enrichment-sample-biztalk-server-sample.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="87746-143">升级的 ISA_Segment 属性包含安全/授权信息（ISA02 包含授权信息，ISA04 包含安全信息），这可能导致信息泄漏。</span><span class="sxs-lookup"><span data-stu-id="87746-143">The ISA_Segment promoted property contains security/authorization information (ISA02, Authorization Information, and ISA04, Security Information) that may lead to information disclosure.</span></span> <span data-ttu-id="87746-144">你可以使用**屏蔽上下文属性中的安全/授权/密码信息属性**(在**本地主机设置**页面**交换设置**为双向协议属性） 来将替换 # 字符 ISA02 和 ISA04 字段中的每个字符。</span><span class="sxs-lookup"><span data-stu-id="87746-144">You can use the **Mask security/authorization/password information property in context property** (in **Local Host Settings** page for **Interchange Settings** for bi-directional agreement properties) to replace the each character in the ISA02 and ISA04 fields with a ‘#’ character.</span></span> <span data-ttu-id="87746-145">这是一个单向过程： 无法将 '#' 字符转换为实际字符。</span><span class="sxs-lookup"><span data-stu-id="87746-145">This is a one-way process: the ‘#’ characters cannot be converted to actual characters.</span></span>  
  
-   <span data-ttu-id="87746-146">对于 X12 和 EDIFACT 编码的消息，升级 ReuseEnvelope，该属性指示拆分或保留批交换。</span><span class="sxs-lookup"><span data-stu-id="87746-146">For X12- and EDIFACT-encoded messages, promotes ReuseEnvelope, which indicates whether a batched interchange is split or preserved.</span></span>  
  
-   <span data-ttu-id="87746-147">如果批交换得以保留，请升级下列属性：</span><span class="sxs-lookup"><span data-stu-id="87746-147">If a batched interchange is preserved, promotes the following properties:</span></span>  
  
    -   <span data-ttu-id="87746-148">InboundTransportatLocation</span><span class="sxs-lookup"><span data-stu-id="87746-148">InboundTransportatLocation</span></span>  
  
    -   <span data-ttu-id="87746-149">InboundTransportType</span><span class="sxs-lookup"><span data-stu-id="87746-149">InboundTransportType</span></span>  
  
    -   <span data-ttu-id="87746-150">ISA05</span><span class="sxs-lookup"><span data-stu-id="87746-150">ISA05</span></span>  
  
    -   <span data-ttu-id="87746-151">ISA07</span><span class="sxs-lookup"><span data-stu-id="87746-151">ISA07</span></span>  
  
    -   <span data-ttu-id="87746-152">ISA06</span><span class="sxs-lookup"><span data-stu-id="87746-152">ISA06</span></span>  
  
    -   <span data-ttu-id="87746-153">ISA08</span><span class="sxs-lookup"><span data-stu-id="87746-153">ISA08</span></span>  
  
    -   <span data-ttu-id="87746-154">ISA15</span><span class="sxs-lookup"><span data-stu-id="87746-154">ISA15</span></span>  
  
    -   <span data-ttu-id="87746-155">LastInterchangeMessage = {True &#124;False}</span><span class="sxs-lookup"><span data-stu-id="87746-155">LastInterchangeMessage = {True&#124;False}</span></span>  
  
    -   <span data-ttu-id="87746-156">MessageType</span><span class="sxs-lookup"><span data-stu-id="87746-156">MessageType</span></span>  
  
    -   <span data-ttu-id="87746-157">ReceivePortID</span><span class="sxs-lookup"><span data-stu-id="87746-157">ReceivePortID</span></span>  
  
    -   <span data-ttu-id="87746-158">ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="87746-158">ReceivePortName</span></span>  
  
    -   <span data-ttu-id="87746-159">ReuseEnvelope</span><span class="sxs-lookup"><span data-stu-id="87746-159">ReuseEnvelope</span></span>  
  
## <a name="parsing-the-envelope"></a><span data-ttu-id="87746-160">解析信封</span><span class="sxs-lookup"><span data-stu-id="87746-160">Parsing the Envelope</span></span>  
 <span data-ttu-id="87746-161">EDI 接收管道使用标头控制架构解析收到的 EDI 消息的信封，并使用 EDI 文档架构解析交换中的事务集/消息。</span><span class="sxs-lookup"><span data-stu-id="87746-161">The EDI receive pipeline uses the header control schema to parse the envelope of a received EDI message and the EDI document schema to parse the transaction sets/messages in the interchange.</span></span>  
  
 <span data-ttu-id="87746-162">如果 EDIINT/AS2 编码消息是通过 HTTP/HTTPS 传输接收的，EDI 拆装器将检查 BTS.MessageDestination 上下文属性。</span><span class="sxs-lookup"><span data-stu-id="87746-162">If an EDIINT/AS2-encoded message was received via HTTP/HTTPS transport, the EDI disassembler will inspect the context property BTS.MessageDestination.</span></span> <span data-ttu-id="87746-163">如果该属性设置为 SuspendQueue，指示在 AS2 处理过程中发生错误并且消息将挂起，那么 EDI 拆装器将充当直通管道组件，并且该消息将在 MessageBox 中挂起。</span><span class="sxs-lookup"><span data-stu-id="87746-163">If that property is set to SuspendQueue, indicating that an error occurred in AS2 processing and the message is to be suspended, the EDI disassembler will act as a passthrough pipeline component, and will suspend the message to the MessageBox.</span></span>  
  
 <span data-ttu-id="87746-164">在解析 EDIFACT 交换期间，EDI 接收管道将删除用于转义字符的转义指示器。</span><span class="sxs-lookup"><span data-stu-id="87746-164">During parsing of EDIFACT interchanges, the EDI receive pipeline removes the release indicator used to escape characters.</span></span> <span data-ttu-id="87746-165">转义指示器不包括在 EDI 验证中。</span><span class="sxs-lookup"><span data-stu-id="87746-165">The release indicator is not included in EDI validation.</span></span> <span data-ttu-id="87746-166">EDI 接收管道在计算长度限制时不包括转义指示器。</span><span class="sxs-lookup"><span data-stu-id="87746-166">The EDI receive pipeline does not include the release indicator when it computes length restrictions.</span></span>  
  
 <span data-ttu-id="87746-167">**字符集**</span><span class="sxs-lookup"><span data-stu-id="87746-167">**Character Set**</span></span>  
  
 <span data-ttu-id="87746-168">对于 X12 交换，“管道组件属性”确定在处理交换时 EDI 拆装器将使用的字符集。</span><span class="sxs-lookup"><span data-stu-id="87746-168">For X12 interchanges, the Pipeline Component Properties determine the character set that the EDI Disassembler will use when processing the interchange.</span></span> <span data-ttu-id="87746-169">字符集可以是“基本”、“扩展”或“UTF8/Unicode”。</span><span class="sxs-lookup"><span data-stu-id="87746-169">It can Basic, Extended, or UTF8/Unicode.</span></span> <span data-ttu-id="87746-170">EDIFACT 交换的默认值是 UTF8，UNB1.1 字段决定该字符集。</span><span class="sxs-lookup"><span data-stu-id="87746-170">The default value is UTF8 For EDIFACT interchanges, the UNB1.1 field determines the character set.</span></span>  
  
 <span data-ttu-id="87746-171">**动态分隔符发现**</span><span class="sxs-lookup"><span data-stu-id="87746-171">**Dynamic Separator Discovery**</span></span>  
  
 <span data-ttu-id="87746-172">当 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 接收 EDI 交换时，没有任何协议属性指示应在交换中使用哪些分隔符。</span><span class="sxs-lookup"><span data-stu-id="87746-172">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI interchange, no agreement properties indicate what the separators in the interchange should be.</span></span> <span data-ttu-id="87746-173">EDI 拆装器而是在运行时发现应使用哪些分隔符（对于 X12 或 EDIFACT）。</span><span class="sxs-lookup"><span data-stu-id="87746-173">Instead, the EDI Disassembler discovers what the delimiters are (for either X12 or EDIFACT) at runtime.</span></span>  
  
 <span data-ttu-id="87746-174">对于 X12 消息，EDI 拆装器使用来自交换内部的下列字符：</span><span class="sxs-lookup"><span data-stu-id="87746-174">For X12 messages, the EDI Disassembler uses the following characters from within the interchange:</span></span>  
  
|<span data-ttu-id="87746-175">分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-175">Separator</span></span>|<span data-ttu-id="87746-176">字符</span><span class="sxs-lookup"><span data-stu-id="87746-176">Character</span></span>|  
|---------------|---------------|  
|<span data-ttu-id="87746-177">数据元素分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-177">Data Element Separator</span></span>|<span data-ttu-id="87746-178">ISA 的第 4 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-178">4th character of ISA</span></span>|  
|<span data-ttu-id="87746-179">组件元素分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-179">Component Element Separator</span></span>|<span data-ttu-id="87746-180">ISA16</span><span class="sxs-lookup"><span data-stu-id="87746-180">ISA16</span></span>|  
|<span data-ttu-id="87746-181">段分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-181">Segment Separator</span></span>|<span data-ttu-id="87746-182">ISA 的第 106 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-182">106th character of ISA</span></span>|  
|<span data-ttu-id="87746-183">段终止符后缀</span><span class="sxs-lookup"><span data-stu-id="87746-183">Segment Terminator Suffix</span></span>|<span data-ttu-id="87746-184">ISA 段和 GS 段之间的字符</span><span class="sxs-lookup"><span data-stu-id="87746-184">Character between ISA segment and GS segment</span></span><br /><br /> <span data-ttu-id="87746-185">**值：**无、 CR、 LF 或 CRLF**注意：**分隔符可以采用仅上面的值。</span><span class="sxs-lookup"><span data-stu-id="87746-185">**Values:** None, CR, LF, or CRLF **Note:**  The separator can take only the above values.</span></span>|  
|<span data-ttu-id="87746-186">重复分隔符或标准标识符</span><span class="sxs-lookup"><span data-stu-id="87746-186">Repetition Separator or Standard Identifier</span></span><br /><br /> <span data-ttu-id="87746-187">(具体取决于上的"ISA11 用法"协议属性**包络线**双向协议选项卡页)</span><span class="sxs-lookup"><span data-stu-id="87746-187">(depending on the "ISA11 usage" agreement property on the **Envelopes** page of the bi-directional agreement tab)</span></span>|<span data-ttu-id="87746-188">ISA11</span><span class="sxs-lookup"><span data-stu-id="87746-188">ISA11</span></span>|  
  
 <span data-ttu-id="87746-189">对于 EDIFACT 交换，EDI 拆装器将检查在交换中定义分隔符的 UNA 段。</span><span class="sxs-lookup"><span data-stu-id="87746-189">For EDIFACT interchanges, the EDI Disassembler checks the UNA segment that defines the separators in the interchange.</span></span> <span data-ttu-id="87746-190">如果交换没有 UNA 段（可选），拆装器将使用在管道组件属性中定义的默认值。</span><span class="sxs-lookup"><span data-stu-id="87746-190">If the interchange does not have a UNA segment, which is optional, the Disassembler will use the default values defined in the pipeline component properties.</span></span>  
  
|<span data-ttu-id="87746-191">分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-191">Separator</span></span>|<span data-ttu-id="87746-192">UNA 的字符</span><span class="sxs-lookup"><span data-stu-id="87746-192">Character of UNA</span></span>|  
|---------------|----------------------|  
|<span data-ttu-id="87746-193">组件元素分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-193">Component Element Separator</span></span>|<span data-ttu-id="87746-194">第 4 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-194">4th</span></span>|  
|<span data-ttu-id="87746-195">数据元素分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-195">Data Element Separator</span></span>|<span data-ttu-id="87746-196">第 5 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-196">5th</span></span>|  
|<span data-ttu-id="87746-197">十进制符号</span><span class="sxs-lookup"><span data-stu-id="87746-197">Decimal Notation</span></span>|<span data-ttu-id="87746-198">第 6 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-198">6th</span></span>|  
|<span data-ttu-id="87746-199">转义符</span><span class="sxs-lookup"><span data-stu-id="87746-199">Release Character</span></span>|<span data-ttu-id="87746-200">第 7 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-200">7th</span></span>|  
|<span data-ttu-id="87746-201">重复字符</span><span class="sxs-lookup"><span data-stu-id="87746-201">Repetition Character</span></span>|<span data-ttu-id="87746-202">第 8 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-202">8th</span></span>|  
|<span data-ttu-id="87746-203">段分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-203">Segment Separator</span></span>|<span data-ttu-id="87746-204">第 9 个字符</span><span class="sxs-lookup"><span data-stu-id="87746-204">9th</span></span>|  
|<span data-ttu-id="87746-205">段分隔符后缀</span><span class="sxs-lookup"><span data-stu-id="87746-205">Segment Separator Suffix</span></span>|<span data-ttu-id="87746-206">UNA 段和 UNB 段之间的字符</span><span class="sxs-lookup"><span data-stu-id="87746-206">Character between UNA segment and UNB segment</span></span><br /><br /> <span data-ttu-id="87746-207">**值：**无、 CR、 LF 或 CRLF**注意：**分隔符可以采用仅上面的值。</span><span class="sxs-lookup"><span data-stu-id="87746-207">**Values:** None, CR, LF, or CRLF **Note:**  The separator can take only the above values.</span></span>|  
  
 <span data-ttu-id="87746-208">UNA 字符串是可选的。</span><span class="sxs-lookup"><span data-stu-id="87746-208">The UNA string is optional.</span></span> <span data-ttu-id="87746-209">如果存在，它定义文件的所有分隔符。</span><span class="sxs-lookup"><span data-stu-id="87746-209">If it is present, it defined all the delimiters for the file.</span></span> <span data-ttu-id="87746-210">如果不存在，EDI 拆装器将使用 EfactDelimiters 管道组件属性确定分隔符。</span><span class="sxs-lookup"><span data-stu-id="87746-210">If it is not present, the EDI Disassembler will use the EfactDelimiters pipeline component property to determine the delimiters.</span></span> <span data-ttu-id="87746-211">有关详细信息，请参阅[配置 EDI 管道属性](../core/configuring-edi-pipeline-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="87746-211">For more information, see [Configuring EDI Pipeline Properties](../core/configuring-edi-pipeline-properties.md).</span></span>  
  
 <span data-ttu-id="87746-212">**发布错误**</span><span class="sxs-lookup"><span data-stu-id="87746-212">**Posting Errors**</span></span>  
  
 <span data-ttu-id="87746-213">如果 EDI 拆装器遇到 EDI 处理错误，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 将在事件查看器中发布以下两个错误（如果已启用此发布功能）：</span><span class="sxs-lookup"><span data-stu-id="87746-213">If the EDI disassembler encounters an EDI processing error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] posts the following two errors in the Event Viewer (if such posting is enabled):</span></span>  
  
-   <span data-ttu-id="87746-214">源 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 挂起消息时记录的错误。</span><span class="sxs-lookup"><span data-stu-id="87746-214">An error logged by the source [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] while it suspends the message.</span></span> <span data-ttu-id="87746-215">该错误是与 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 处理相关的必需错误。</span><span class="sxs-lookup"><span data-stu-id="87746-215">This is a required error relating to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processing.</span></span>  
  
-   <span data-ttu-id="87746-216">源 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI 记录的报告事务集中的问题的错误。</span><span class="sxs-lookup"><span data-stu-id="87746-216">An error reporting problems in the transaction set, as logged by the source [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI.</span></span> <span data-ttu-id="87746-217">该错误特定于 EDI。</span><span class="sxs-lookup"><span data-stu-id="87746-217">This error is EDI-specific.</span></span>  
  
## <a name="using-agreement-properties"></a><span data-ttu-id="87746-218">使用协议属性</span><span class="sxs-lookup"><span data-stu-id="87746-218">Using Agreement Properties</span></span>  
 <span data-ttu-id="87746-219">如果它可以确定该协议，EDI 反汇编程序将使用协议属性 (请参阅[协议解析、 架构发现和接收 EDI 消息的授权](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md))。</span><span class="sxs-lookup"><span data-stu-id="87746-219">The EDI Disassembler will use agreement properties if it can identify the agreement (see [Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md)).</span></span> <span data-ttu-id="87746-220">如果找不到匹配的协议和相应的值不可用回退协议中，在设置了 EDI 反汇编程序属性**属性**将使用 Visual Studio 窗口。</span><span class="sxs-lookup"><span data-stu-id="87746-220">If a matching agreement cannot be found and the corresponding values are not available in the fallback agreement as well, the EDI Disassembler properties set in the **Properties** window of Visual Studio will be used.</span></span> <span data-ttu-id="87746-221">但是，此回退不会发生如果身份验证需要在接收端口属性 (如果**丢弃的消息，如果身份验证失败**或**身份验证失败时保留消息**选择).</span><span class="sxs-lookup"><span data-stu-id="87746-221">However, this fallback will not occur if authentication is required in receive port properties (if either **Drop messages if authentication fails** or **Keep messages if authentication fails** are selected).</span></span> <span data-ttu-id="87746-222">在这种情况下，必须配置协议；否则，交换将挂起。</span><span class="sxs-lookup"><span data-stu-id="87746-222">In this case, an agreement must be configured; if not, the interchange will be suspended.</span></span>  
  
 <span data-ttu-id="87746-223">当 EDI 拆装器使用协议属性时，需要设置下列协议属性：</span><span class="sxs-lookup"><span data-stu-id="87746-223">When the EDI Disassembler uses agreement properties, it requires that the following agreement properties be set:</span></span>  
  
|<span data-ttu-id="87746-224">属性</span><span class="sxs-lookup"><span data-stu-id="87746-224">Property</span></span>|<span data-ttu-id="87746-225">协议属性页</span><span class="sxs-lookup"><span data-stu-id="87746-225">Agreement Properties Page</span></span>|  
|--------------|-------------------------------|  
|<span data-ttu-id="87746-226">重复分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-226">Repetition separator</span></span>|<span data-ttu-id="87746-227">**包络线**页 (下**交换设置**) 中的双向协议选项卡</span><span class="sxs-lookup"><span data-stu-id="87746-227">**Envelopes** page (under **Interchange Settings**) in the bi-directional agreement tab</span></span>|  
|<span data-ttu-id="87746-228">执行 EDI 数据类型验证</span><span class="sxs-lookup"><span data-stu-id="87746-228">Perform EDI Data Type Validation</span></span>|<span data-ttu-id="87746-229">**验证**下页上**事务设置设置**在双向协议选项卡中 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-229">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-230">扩展验证</span><span class="sxs-lookup"><span data-stu-id="87746-230">Extended Validation</span></span>|<span data-ttu-id="87746-231">**验证**下页上**事务设置设置**在双向协议选项卡中 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-231">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-232">允许前导和尾随零和空间</span><span class="sxs-lookup"><span data-stu-id="87746-232">Allow leading and trailing zeroes and spaces</span></span>|<span data-ttu-id="87746-233">**验证**下页上**事务设置设置**在双向协议选项卡中 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-233">**Validation** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-234">创建空 XML 标记（如果尾部分隔符允许）</span><span class="sxs-lookup"><span data-stu-id="87746-234">Create empty XML Tags if trailing separators allowed</span></span>|<span data-ttu-id="87746-235">**本地主机设置**下页上**事务设置设置**在双向协议选项卡中 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-235">**Local Host Settings** page under **Transaction Set Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-236">入站批处理选项</span><span class="sxs-lookup"><span data-stu-id="87746-236">Inbound batch processing option</span></span>|<span data-ttu-id="87746-237">**本地主机设置**页 (下**交换设置**) 中的双向协议选项卡 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-237">**Local Host Settings** page (under **Interchange Settings**) in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-238">默认 EDIFACT 分隔符</span><span class="sxs-lookup"><span data-stu-id="87746-238">Default EDIFACT Separators</span></span>|-|  
|<span data-ttu-id="87746-239">屏蔽安全/授权/密码信息</span><span class="sxs-lookup"><span data-stu-id="87746-239">Mask security/authorization/password information</span></span>|<span data-ttu-id="87746-240">**本地主机设置**页 (下**交换设置**) 中的双向协议选项卡 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-240">**Local Host Settings** page (under **Interchange Settings**) in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-241">将隐式小数格式 Nn 转换为十进制数值</span><span class="sxs-lookup"><span data-stu-id="87746-241">Convert implied decimal format Nn to base 10 numeric value</span></span>|<span data-ttu-id="87746-242">**本地主机设置**下页上**事务设置设置**双向协议选项卡中 (对于 X12 协议)</span><span class="sxs-lookup"><span data-stu-id="87746-242">**Local Host Settings** page under **Transaction Set Settings** in the bi-directional agreement tab (for X12 agreements)</span></span>|  
|<span data-ttu-id="87746-243">将确认路由到请求-响应接收端口的发送管道</span><span class="sxs-lookup"><span data-stu-id="87746-243">Route ACK to send pipeline on request-response receive port</span></span>|<span data-ttu-id="87746-244">**本地主机设置**页 (**接收方设置**部分) 下**交换设置**在双向协议选项卡中 （对于 X12 和 EDIFACT 协议）</span><span class="sxs-lookup"><span data-stu-id="87746-244">**Local Host Settings** page (**Receiver’s Settings** section) under **Interchange Settings** in the bi-directional agreement tab (for both X12 and EDIFACT agreements)</span></span>|  
|<span data-ttu-id="87746-245">X12 字符集</span><span class="sxs-lookup"><span data-stu-id="87746-245">X12 character set</span></span>|<span data-ttu-id="87746-246">X12 交换信封生成**注意：**此设置仅用于验证输入的协议属性的值。</span><span class="sxs-lookup"><span data-stu-id="87746-246">X12 Interchange Envelope Generation **Note:**  This setting is only used to validate the values entered for the agreement properties.</span></span> <span data-ttu-id="87746-247">用于运行时处理的 X12 字符集在管道属性中选择。</span><span class="sxs-lookup"><span data-stu-id="87746-247">The X12 character set used for runtime processing is selected in the pipeline properties.</span></span> <span data-ttu-id="87746-248">有关详细信息，请参阅[EDI 字符集](../core/edi-character-sets.md)。</span><span class="sxs-lookup"><span data-stu-id="87746-248">For more information, see [EDI Character Sets](../core/edi-character-sets.md).</span></span>|  
  
## <a name="using-hipaa-trigger-fields"></a><span data-ttu-id="87746-249">使用 HIPAA 触发器字段</span><span class="sxs-lookup"><span data-stu-id="87746-249">Using HIPAA Trigger Fields</span></span>  
 <span data-ttu-id="87746-250">EDI 段通常包含修改段含义的限定符值。</span><span class="sxs-lookup"><span data-stu-id="87746-250">EDI segments often contain qualifier values that modify the meaning of the segment.</span></span> <span data-ttu-id="87746-251">例如，N1 段可包含一个限定元素“BT”，表示“帐单收件人名字”，或可能包含一个限定元素“ST”，表示“收货方名字”。</span><span class="sxs-lookup"><span data-stu-id="87746-251">For example, an N1 segment can contain a qualifying element of “BT” to signify a “bill-to name,” or it may contain a qualifying element of “ST” to indicate a “ship-to name.”</span></span> <span data-ttu-id="87746-252">通常它从左到业务逻辑来确定如何解释这些字段并拆装器将 N1 段的所有实例都解析为相同的 XML 记录名称;但是，BizTalk 服务器随附的 HIPAA 架构包含允许 EDI 反汇编程序，创建基于是否存在限定值的唯一 XML 记录的批注 (请参阅[HIPAA 架构触发器字段批注](../core/hipaa-schema-trigger-field-annotations.md))。</span><span class="sxs-lookup"><span data-stu-id="87746-252">Normally it is left to business logic to determine how to interpret these fields and the disassembler resolves all instances of the N1 segment to the same XML record name; however, the HIPAA schemas shipped with BizTalk Server contain annotations that allow the EDI disassembler to create unique XML records based on the presence of a qualifying value (see [HIPAA Schema Trigger Field Annotations](../core/hipaa-schema-trigger-field-annotations.md)).</span></span>  
  
 <span data-ttu-id="87746-253">当收到一个 HIPAA 事务集时，如果 EDI 拆装器遇到一个包含触发器字段的段，它将使用触发器信息来生成一个特定于该段和触发器组合的 XML 记录。</span><span class="sxs-lookup"><span data-stu-id="87746-253">When receiving a HIPAA transaction set, if the EDI Disassembler encounters a segment that contains a trigger field, it uses the trigger information to generate an XML record specific to the segment and trigger combination.</span></span>  
  
 <span data-ttu-id="87746-254">下表显示了 N1 段是如何基于 N101 值转化成 XML 记录的：</span><span class="sxs-lookup"><span data-stu-id="87746-254">The following table shows how an N1 segment will be translated into an XML record based on the value of N101:</span></span>  
  
|<span data-ttu-id="87746-255">N1 段</span><span class="sxs-lookup"><span data-stu-id="87746-255">N1 Segment</span></span>|<span data-ttu-id="87746-256">生成的 XML 数据</span><span class="sxs-lookup"><span data-stu-id="87746-256">Resulting XML Data</span></span>|  
|----------------|------------------------|  
|<span data-ttu-id="87746-257">N1 * PR\*Contoso\*XV\*0000000 ~</span><span class="sxs-lookup"><span data-stu-id="87746-257">N1*PR\*Contoso\*XV\*0000000~</span></span>|`<ns0:TS835W1_1000A_Loop>  <N1_PayerIdentification_TS835W1_1000A>   <N101__EntityIdentifierCode>PR</N101__EntityIdentifierCode>    <N102__PayerName>Contoso</N102__PayerName>    <N103__IdentificationCodeQualifier>XV</N103__IdentificationCodeQualifier>    <N104__PayerIdentifier>0000000</N104__PayerIdentifier>   </N1_PayerIdentification_TS835W1_1000A>`|  
|<span data-ttu-id="87746-258">N1 * PE\*Fabrikam\*FI\*9999999 ~</span><span class="sxs-lookup"><span data-stu-id="87746-258">N1*PE\*Fabrikam\*FI\*9999999~</span></span>|`<TS835W1_1000B_Loop>   <N1_PayeeIdentification_TS835W1_1000B>    <N101__EntityIdentifierCode>PE</N101__EntityIdentifierCode>    <N102__PayeeName>Fabrikam</N102__PayeeName>    <N103__IdentificationCodeQualifier>FI</N103__IdentificationCodeQualifier>    <N104__PayeeIdentificationCode>9999999</N104__PayeeIdentificationCode>   </N1_PayeeIdentification_TS835W1_1000B>`|  
  
## <a name="see-also"></a><span data-ttu-id="87746-259">另请参阅</span><span class="sxs-lookup"><span data-stu-id="87746-259">See Also</span></span>  
 [<span data-ttu-id="87746-260">BizTalk Server 如何接收 EDI 消息</span><span class="sxs-lookup"><span data-stu-id="87746-260">How BizTalk Server Receives EDI Messages</span></span>](../core/how-biztalk-server-receives-edi-messages.md)