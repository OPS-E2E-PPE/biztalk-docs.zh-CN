---
title: 向外扩展接收主机 |Microsoft 文档
ms.custom: ''
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- adapters, receive adapters
- high availability
- HTTP adapters, scaling
- receive adapters, scaling
- POP3 adapters, scaling
- MSMQ adapters, scaling
- EDI adapters, scaling
- Web services, scaling
- hosts, multiple
- MQSeries adapters, scaling
- adapters, Windows SharePoint Services
- scaling, hosts
- scaling, adapters
- SAP adapters
- FTP adapters
- scaling, receive adapters
- hosts, receiving
- adapters, Web services
- hosts, scaling
- SOAP adapters, scaling
- adapters, scaling
- SQL adapters, scaling
- Web services, adapters
- File adapters, scaling
- clustering
ms.assetid: 94f35426-37fa-4ad2-8e35-d82fdca02262
caps.latest.revision: 54
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b9bc048de978a6dfd7c28505c54cdaaaef64064
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22272549"
---
# <a name="scaled-out-receiving-hosts"></a><span data-ttu-id="24893-102">向外扩展接收主机</span><span class="sxs-lookup"><span data-stu-id="24893-102">Scaled-Out Receiving Hosts</span></span>
<span data-ttu-id="24893-103">当主机包含接收项（例如接收位置或管道）时，该主机将充当安全边界，而且消息的解码和解密都将发生在主机内的管道中。</span><span class="sxs-lookup"><span data-stu-id="24893-103">When a host contains a receiving item, such as a receive location or pipeline, it acts as a security boundary, and the message decoding and decrypting occurs in a pipeline within the host.</span></span> <span data-ttu-id="24893-104">为确保接收主机高度可用，必须有两台或更多 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 计算机运行所有接收主机的实例。</span><span class="sxs-lookup"><span data-stu-id="24893-104">To make the receiving hosts highly available, you must have two or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers that are running instances of each receiving host.</span></span> <span data-ttu-id="24893-105">可以通过扩展接收主机来保证可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]消息传递需要进行大量的部署。</span><span class="sxs-lookup"><span data-stu-id="24893-105">By scaling out the receiving hosts you can guarantee availability for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that are messaging intensive.</span></span> <span data-ttu-id="24893-106">尽管这些部署可能很少处理业务流程，但仍可快速和可靠地路由许多不同类型的消息。</span><span class="sxs-lookup"><span data-stu-id="24893-106">While these deployments might perform minimal processing for orchestrations, they can route many messages of varying types with great speed and reliability.</span></span>  
  
 <span data-ttu-id="24893-107">通过将接收主机与处理业务流程和发送消息的主机分隔开来，您可增强您的环境的安全性和可伸缩性，因为可以独立于其他主机来保护和扩展每个主机。</span><span class="sxs-lookup"><span data-stu-id="24893-107">You can enhance security and scalability in your environment by separating the receiving host from the hosts that process orchestrations and send messages because you can secure and scale each host independently of other hosts.</span></span> <span data-ttu-id="24893-108">例如，您可以将两台计算机（主机实例）添加到接收主机，而无需向处理主机或发送主机添加任何计算机。</span><span class="sxs-lookup"><span data-stu-id="24893-108">For example, you can add two computers (host instances) to the receiving host without adding any computers to the processing or sending hosts.</span></span>  
  
## <a name="multiple-hosts-for-receiving-messages"></a><span data-ttu-id="24893-109">使用多个主机接收消息</span><span class="sxs-lookup"><span data-stu-id="24893-109">Multiple Hosts for Receiving Messages</span></span>  
 <span data-ttu-id="24893-110">下图显示[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通过在两台计算机正在运行的接收主机实例接收主机提供高可用性的部署。</span><span class="sxs-lookup"><span data-stu-id="24893-110">The following figure shows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the receiving host by having two computers that are running instances of the receiving host.</span></span> <span data-ttu-id="24893-111">请注意，此图中的处理主机和发送主机并不高度可用。</span><span class="sxs-lookup"><span data-stu-id="24893-111">Note that in this figure the processing and sending hosts are not highly available.</span></span>  
  
 <span data-ttu-id="24893-112">![用于接收消息的多个主机](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span><span class="sxs-lookup"><span data-stu-id="24893-112">![Multiple Host for Receiving Messages](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span></span>  
  
 <span data-ttu-id="24893-113">在进行大型部署、与多个贸易合作伙伴打交道以及使用不同的协议时，您可以采用多个接收主机来分担接收功能。</span><span class="sxs-lookup"><span data-stu-id="24893-113">For large deployments, for scenarios dealing with multiple trading partners, and for scenarios when you use different protocols, you can spread out the receiving functionality across multiple receiving hosts.</span></span> <span data-ttu-id="24893-114">例如，您可以创建一个主机来接收每个适配器的消息，也可以创建不同主机来接收来自不同合作伙伴的消息。</span><span class="sxs-lookup"><span data-stu-id="24893-114">For example, you can create a host for receiving messages for each adapter, or different hosts for receiving messages from different partners.</span></span> <span data-ttu-id="24893-115">在创建多个接收主机后，您可以创建安全边界来提高您的环境的可管理性和可伸缩性；但是，这并不能确保环境高度可用。</span><span class="sxs-lookup"><span data-stu-id="24893-115">When you create multiple receiving hosts you can create security boundaries and ease the manageability and scalability of your environment; however, it does not make your environment highly available.</span></span>  
  
 <span data-ttu-id="24893-116">为确保环境高度可用，您必须为创建的每个接收主机创建两个或更多主机实例。</span><span class="sxs-lookup"><span data-stu-id="24893-116">To make your environment highly available, you must create two or more host instances for each receiving host that you create.</span></span> <span data-ttu-id="24893-117">例如，您可以创建三个不同的接收主机（A、B 和 C）来接收来自三家不同公司的消息。</span><span class="sxs-lookup"><span data-stu-id="24893-117">For example, you can create three different receive hosts (A, B, and C) to receive messages from three different companies.</span></span> <span data-ttu-id="24893-118">为确保所有这些主机高度可用，随后还需要在两台或更多计算机中创建所有这些主机的实例。</span><span class="sxs-lookup"><span data-stu-id="24893-118">To make each of these hosts highly available you then create host instances of each of these hosts in two or more computers.</span></span> <span data-ttu-id="24893-119">请注意，您可以在一台计算机上创建每个主机的实例，而不会影响安全边界、可管理性或可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="24893-119">Note that you can have instances of each host on one computer without losing the security boundary, manageability, or scalability.</span></span>  
  
 <span data-ttu-id="24893-120">下图显示了具有三台计算机的高度可用的 BizTalk Server 环境（其中不同的主机专用于接收来自不同公司的消息）：</span><span class="sxs-lookup"><span data-stu-id="24893-120">The following figure shows a highly available three-computer BizTalk Server environment with hosts dedicated to receiving messages from different companies.</span></span>  
  
 <span data-ttu-id="24893-121">![接收实例](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span><span class="sxs-lookup"><span data-stu-id="24893-121">![Receive Instances](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span></span>  
  
 <span data-ttu-id="24893-122">为确保此配置的高可用性，每台计算机都运行三个主机实例：三家公司中的每一个家都对应一个实例。</span><span class="sxs-lookup"><span data-stu-id="24893-122">To provide high availability in this configuration, each computer runs three host instances: one instance for each of the three companies.</span></span> <span data-ttu-id="24893-123">每家公司的主机实例都包含用来与该公司进行通信的接收位置和管道。</span><span class="sxs-lookup"><span data-stu-id="24893-123">The host instances for each company contain the receive locations and pipelines to communicate with that company.</span></span> <span data-ttu-id="24893-124">在常规操作过程中，只要您完成了在接收适配器前扩展所需的工作（例如，为 HTTP 配置网络负载平衡时），则消息传送负载将分布在每个主机的三个主机实例中。</span><span class="sxs-lookup"><span data-stu-id="24893-124">During typical operations, as long as you have done the necessary work for scale out in front of the receive adapters (for example, if you configure network load balancing for HTTP), the messaging load is distributed among the three host instances for each host.</span></span> <span data-ttu-id="24893-125">如果一台计算机上的主机实例失败，则在其他两台计算机上运行的主机实例将提供冗余，以保持服务可用。</span><span class="sxs-lookup"><span data-stu-id="24893-125">If a host instance on one computer fails, the host instances running on the other two computers provide redundancy and maintain service availability.</span></span>  
  
## <a name="scaling-the-biztalk-server-receive-adapters"></a><span data-ttu-id="24893-126">扩展 BizTalk Server 接收适配器</span><span class="sxs-lookup"><span data-stu-id="24893-126">Scaling the BizTalk Server Receive Adapters</span></span>  
 <span data-ttu-id="24893-127">除了主机实例外，扩展接收主机并提高其可用性的过程还取决于在部署中实施的特定适配器。</span><span class="sxs-lookup"><span data-stu-id="24893-127">Besides host instances, the process of scaling and providing high availability for the receive hosts also depends on the specific adapters that you implement in your deployment.</span></span> <span data-ttu-id="24893-128">每个适配器都具有与协议有关的特性，所以在协议不同的情况下规划和部署也会有所不同。</span><span class="sxs-lookup"><span data-stu-id="24893-128">Each adapter has protocol-specific characteristics that make planning and deployment different in each case.</span></span> <span data-ttu-id="24893-129">但是，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使你能够应用所有适配器的支持，主要通过其他计算机和主机实例相同的高可用性解决方案。</span><span class="sxs-lookup"><span data-stu-id="24893-129">However, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] lets you apply the same high-availability solution for all adapters, primarily through additional computers and host instances.</span></span>  
  
 <span data-ttu-id="24893-130">根据所用的具体协议，某些接收适配器需要采用在多台主机计算机中分布传入消息的附加机制，才能确保高可用性。</span><span class="sxs-lookup"><span data-stu-id="24893-130">Depending on the specific protocol being used, some receive adapters require an additional mechanism for distributing incoming messages among multiple host computers to provide high availability.</span></span> <span data-ttu-id="24893-131">例如，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用 HTTP 或 SOAP 适配器 （也称为 Web 服务适配器） 的解决方案需要负载平衡器如网络负载平衡 (NLB) 分配接收工作负荷。</span><span class="sxs-lookup"><span data-stu-id="24893-131">For example, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solutions that use the HTTP or SOAP adapter (otherwise known as the Web services adapter) require a load balancer such as Network Load Balancing (NLB) to distribute the receiving workload.</span></span> <span data-ttu-id="24893-132">下表总结了中的最常见适配器的高可用性准则[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="24893-132">The following table summarizes the high-availability guidelines for the most common adapters in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
|<span data-ttu-id="24893-133">**适配器**</span><span class="sxs-lookup"><span data-stu-id="24893-133">**Adapter**</span></span>|<span data-ttu-id="24893-134">**高可用性准则**</span><span class="sxs-lookup"><span data-stu-id="24893-134">**High-availability guidelines**</span></span>|  
|-----------------|---------------------------------------|  
|<span data-ttu-id="24893-135">HTTP</span><span class="sxs-lookup"><span data-stu-id="24893-135">HTTP</span></span>|<span data-ttu-id="24893-136">将多台计算机添加到接收主机并配置 NLB 以将传入消息分配给多个主机计算机。</span><span class="sxs-lookup"><span data-stu-id="24893-136">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="24893-137">SOAP</span><span class="sxs-lookup"><span data-stu-id="24893-137">SOAP</span></span>|<span data-ttu-id="24893-138">将多台计算机添加到接收主机并配置 NLB 以将传入消息分配给多个主机计算机。</span><span class="sxs-lookup"><span data-stu-id="24893-138">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="24893-139">文件</span><span class="sxs-lookup"><span data-stu-id="24893-139">File</span></span>|<span data-ttu-id="24893-140">向接收主机添加多台计算机，其中每台主机计算机上的接收位置都引用同一文件夹或通用命名约定 (UNC) 路径。</span><span class="sxs-lookup"><span data-stu-id="24893-140">Add multiple computers to the receive host with the receive location on each host computer referencing the same file folder or Universal Naming Convention (UNC) path.</span></span> <span data-ttu-id="24893-141">对于完整的高可用性解决方案，必须确保 UNC 路径指向的文件位置是高度可用的（或者至少是可靠的）。</span><span class="sxs-lookup"><span data-stu-id="24893-141">For a complete highly available solution, you must make sure that the file location to which the UNC path points is highly available (or at least reliable).</span></span>|  
|<span data-ttu-id="24893-142">FTP</span><span class="sxs-lookup"><span data-stu-id="24893-142">FTP</span></span>|<span data-ttu-id="24893-143">将 FTP 接收适配器配置为在群集 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="24893-143">Configure the FTP receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="24893-144">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-144">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="24893-145">POP3</span><span class="sxs-lookup"><span data-stu-id="24893-145">POP3</span></span>|<span data-ttu-id="24893-146">将 POP3 接收适配器配置为在群集 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="24893-146">Configure the POP3 receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="24893-147">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-147">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="24893-148">MSMQ</span><span class="sxs-lookup"><span data-stu-id="24893-148">MSMQ</span></span>|<span data-ttu-id="24893-149">配置 MSMQ 接收适配器在 Windows 群集 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="24893-149">Configure the MSMQ receive adapter to run in a Windows-clustered BizTalk host.</span></span> <span data-ttu-id="24893-150">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-150">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span> <span data-ttu-id="24893-151">如果 MSMQ 接收位置要在远程 MSMQ 服务器上使用队列，你不需要群集 BizTalk 主机。</span><span class="sxs-lookup"><span data-stu-id="24893-151">If the MSMQ receive locations are using queues on a remote MSMQ server, you do not need to cluster the BizTalk host.</span></span>  <span data-ttu-id="24893-152">在此方案中，运行 MSMQ 接收主机组中的多个 BizTalk 计算机上。</span><span class="sxs-lookup"><span data-stu-id="24893-152">In this scenario, run the MSMQ receive host on multiple BizTalk computers in the group.</span></span>|  
|<span data-ttu-id="24893-153">MQSeries</span><span class="sxs-lookup"><span data-stu-id="24893-153">MQSeries</span></span>|<span data-ttu-id="24893-154">向此适配器的接收主机添加多台计算机，在 MQSeries for Windows 中使用群集队列管理器，并群集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="24893-154">Add multiple computers to the receive host for this adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span>|  
|<span data-ttu-id="24893-155">Windows Sharepoint Services</span><span class="sxs-lookup"><span data-stu-id="24893-155">Windows Sharepoint Services</span></span>|<span data-ttu-id="24893-156">将多台计算机添加到接收主机并配置 NLB 以将传入消息分配给多个主机计算机。</span><span class="sxs-lookup"><span data-stu-id="24893-156">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="24893-157">-WCF NetTcp</span><span class="sxs-lookup"><span data-stu-id="24893-157">-   WCF-NetTcp</span></span><br /><span data-ttu-id="24893-158">基于 WCF 的自定义项</span><span class="sxs-lookup"><span data-stu-id="24893-158">-   WCF-Custom</span></span>|<span data-ttu-id="24893-159">向接收主机添加多台计算机，并配置 NLB 以在这些主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="24893-159">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span><br /><br /> <span data-ttu-id="24893-160">-或者-</span><span class="sxs-lookup"><span data-stu-id="24893-160">-or -</span></span><br /><br /> <span data-ttu-id="24893-161">群集适配器接收处理程序使用的主机。</span><span class="sxs-lookup"><span data-stu-id="24893-161">Cluster the host used by the adapter receive handler.</span></span>|  
|<span data-ttu-id="24893-162">-WCF NetNamedPipe</span><span class="sxs-lookup"><span data-stu-id="24893-162">-   WCF-NetNamedPipe</span></span><br /><span data-ttu-id="24893-163">-WCF BasicHttp</span><span class="sxs-lookup"><span data-stu-id="24893-163">-   WCF-BasicHttp</span></span><br /><span data-ttu-id="24893-164">-WCF WSHttp</span><span class="sxs-lookup"><span data-stu-id="24893-164">-   WCF-WSHttp</span></span><br /><span data-ttu-id="24893-165">-WCF CustomIsolated</span><span class="sxs-lookup"><span data-stu-id="24893-165">-   WCF-CustomIsolated</span></span>|<span data-ttu-id="24893-166">向接收主机添加多台计算机，并配置 NLB 以在这些主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="24893-166">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span>|  
|<span data-ttu-id="24893-167">WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="24893-167">WCF-NetMsmq</span></span>|<span data-ttu-id="24893-168">群集适配器接收处理程序使用的主机。</span><span class="sxs-lookup"><span data-stu-id="24893-168">Cluster the host used by the adapter receive handler.</span></span>|  
  
### <a name="http-adapter"></a><span data-ttu-id="24893-169">HTTP 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-169">HTTP Adapter</span></span>  
 <span data-ttu-id="24893-170">HTTP 接收中的适配器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]是在每个接收主机计算机作为主机实例运行的 Internet 服务器 API (ISAPI) 扩展 (BTSHTTPReceive.dll)。</span><span class="sxs-lookup"><span data-stu-id="24893-170">The HTTP receive adapter in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is an Internet Server API (ISAPI) extension (BTSHTTPReceive.dll) that runs as a host instance on each receive host computer.</span></span> <span data-ttu-id="24893-171">当合作伙伴通过 HTTP 协议将消息发送到 BizTalk Server 时，该消息通常会送达安装有 Internet 信息服务 (IIS) 的 BizTalk Server 计算机上的特定 URL。</span><span class="sxs-lookup"><span data-stu-id="24893-171">When a partner sends a message to BizTalk Server through the HTTP protocol, the message typically arrives at a specific URL on a BizTalk Server computer with Internet Information Services (IIS) installed.</span></span> <span data-ttu-id="24893-172">您可在 BizTalk Server 中创建接收位置订阅此 URL 的主机实例。</span><span class="sxs-lookup"><span data-stu-id="24893-172">You create a host instance in BizTalk Server with a receive location that subscribes to this URL.</span></span> <span data-ttu-id="24893-173">在消息送达此 URL 后，BizTalk Server 将对这些消息进行检索，然后将其保存在 MessageBox 数据库中。</span><span class="sxs-lookup"><span data-stu-id="24893-173">When messages arrive at the URL, BizTalk Server retrieves them and persists them in the MessageBox database.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24893-174">为 HTTP 提供高可用性通过让你创建多个相同的接收主机的主机实例接收适配器。</span><span class="sxs-lookup"><span data-stu-id="24893-174"> provides high availability for the HTTP receive adapter by letting you create multiple host instances of the same receive host.</span></span> <span data-ttu-id="24893-175">如果您使用 NLB 在多个接收主机中分发传入消息，则这些主机实例订阅的具体 URL 可以是共享的群集 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="24893-175">These host instances subscribe to a specific URL that can be a shared, cluster IP address if you are using NLB to distribute incoming messages across multiple receive hosts.</span></span> <span data-ttu-id="24893-176">这些主机都可为群集的虚拟 IP 地址提供服务，这样，在一个群集成员发生故障时，其他成员仍可以为此 IP 地址提供服务。</span><span class="sxs-lookup"><span data-stu-id="24893-176">These hosts all function to serve the virtual IP address of the cluster, so that if one cluster member fails, others can still serve this IP address.</span></span>  
  
### <a name="soap-adapter-web-services-adapter"></a><span data-ttu-id="24893-177">SOAP 适配器 （Web 服务适配器）</span><span class="sxs-lookup"><span data-stu-id="24893-177">SOAP Adapter (Web Services Adapter)</span></span>  
 <span data-ttu-id="24893-178">与 HTTP 接收适配器不同，Web Services 的接收适配器不包括 ISAPI 扩展功能。</span><span class="sxs-lookup"><span data-stu-id="24893-178">Unlike the HTTP receive adapter, the receive adapter for Web services does not involve an ISAPI extension.</span></span> <span data-ttu-id="24893-179">该适配器通过使用 BizTalk Web Services 发布向导指定的 URL 接收传入消息。</span><span class="sxs-lookup"><span data-stu-id="24893-179">It receives incoming messages through a URL that you specify by using the BizTalk Web Services Publishing Wizard.</span></span> <span data-ttu-id="24893-180">此向导可导出 Web Services 并创建充当接收位置的虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="24893-180">This wizard exports a Web service and creates a virtual directory that functions as the receive location.</span></span>  
  
 <span data-ttu-id="24893-181">为确保 Web Services 适配器的高可用性，请向接收主机添加多台计算机，并使用 NLB 分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="24893-181">To provide high availability for the Web services adapter, add multiple computers to the receive host and use NLB to distribute incoming messages.</span></span> <span data-ttu-id="24893-182">在客户端通过 Web Services 适配器将消息发送到 BizTalk Server 时，NLB 将利用这些接收主机之一来平衡消息负载，然后该主机上运行的相应主机实例将消息存储到 MessageBox 数据库中。</span><span class="sxs-lookup"><span data-stu-id="24893-182">When a client sends a message to BizTalk Server through the Web services adapter, NLB load balances the message to one of the receiving hosts, and the appropriate host instance running on the host persists the message to the MessageBox database.</span></span>  
  
### <a name="file-adapter"></a><span data-ttu-id="24893-183">文件适配器</span><span class="sxs-lookup"><span data-stu-id="24893-183">File Adapter</span></span>  
 <span data-ttu-id="24893-184">文件接收适配器可从文件夹或 UNC 路径检索消息。</span><span class="sxs-lookup"><span data-stu-id="24893-184">The File receive adapter retrieves messages from a file folder or UNC path.</span></span> <span data-ttu-id="24893-185">此适配器通常在公司内使用，而不是在企业对企业方案中使用，因为双方均需要访问该路径的权限，而不同公司通常不能共享文件系统。</span><span class="sxs-lookup"><span data-stu-id="24893-185">This adapter is frequently used within companies instead of in business-to-business scenarios because both parties require permissions to the path, and companies do not typically share file systems.</span></span> <span data-ttu-id="24893-186">您可将文件接收处理程序配置为订阅路径，以便在消息到达接收位置时 BizTalk Server 可检索这些消息。</span><span class="sxs-lookup"><span data-stu-id="24893-186">You configure the File receive handler to subscribe to the path so that BizTalk Server retrieves the message when it arrives at the receive location.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24893-187">为 file 接收适配器通过让你在多个订阅的相同的 UNC 路径的主机计算机上创建主机实例提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="24893-187"> provides high availability for the file receive adapter by letting you create host instances on multiple host computers that subscribe to the same UNC path.</span></span> <span data-ttu-id="24893-188">如果在一台主机计算机上运行的主机实例遇到错误或失败，则在其他主机计算机上运行的同一主机实例仍可检索消息，并将其存储到 MessageBox 数据库中。</span><span class="sxs-lookup"><span data-stu-id="24893-188">If a host instance running on one host computer encounters errors or fails, the same host instance running on another host computer can retrieve the message and persist it to the MessageBox database.</span></span>  
  
### <a name="ftp-adapter"></a><span data-ttu-id="24893-189">FTP 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-189">FTP Adapter</span></span>  
 <span data-ttu-id="24893-190">不应将 FTP 接收适配器配置为在多个主机中运行，因为 FTP 接收适配器使用 FTP 协议从目标系统检索文件，而 FTP 协议没有任何文件锁定概念，不能确保在运行 FTP 接收适配器的多个实例时不会同时检索同一文件的多个副本。</span><span class="sxs-lookup"><span data-stu-id="24893-190">The FTP receive adapter should not be configured to run in multiple hosts because the FTP receive adapter uses the FTP protocol to retrieve files from the target system and the FTP protocol does not have any notion of file locking to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP receive adapter.</span></span> <span data-ttu-id="24893-191">FTP 接收适配器应配置为在群集的 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="24893-191">The FTP receive adapter should be configured to run in a clustered BizTalk host.</span></span> <span data-ttu-id="24893-192">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-192">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="pop3-adapter"></a><span data-ttu-id="24893-193">POP3 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-193">POP3 Adapter</span></span>  
 <span data-ttu-id="24893-194">除非 POP3 适配器从中进行读取的 POP3 服务器允许对同一邮箱进行多个并行连接，否则 POP3 接收适配器可配置为在多个主机中运行。</span><span class="sxs-lookup"><span data-stu-id="24893-194">The POP3 receive adapter can be configured to run in multiple hosts unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="24893-195">如果 POP3 适配器连接到的 POP3 服务器允许对其邮箱进行多个并行连接，则必须通过将 POP3 适配器接收处理程序配置为在已经群集的 BizTalk 主机实例中运行，来确保 POP3 适配器的高可用性。</span><span class="sxs-lookup"><span data-stu-id="24893-195">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes then high availability for the POP3 adapter must be achieved by configuring POP3 adapter receive handlers to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="24893-196">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-196">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="msmq-adapter"></a><span data-ttu-id="24893-197">MSMQ 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-197">MSMQ Adapter</span></span>  
 <span data-ttu-id="24893-198">若要实现高可用性，运行 MSMQ，请在为群集的 MSMQ 资源相同的群集组中的 Windows 群集 BizTalk 主机中接收适配器。</span><span class="sxs-lookup"><span data-stu-id="24893-198">To achieve high availability, run the MSMQ receive adapter in a Windows-clustered BizTalk host that is in the same cluster group as the clustered MSMQ resource.</span></span> <span data-ttu-id="24893-199">有关详细信息，请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="24893-199">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
 <span data-ttu-id="24893-200">如果 MSMQ 接收位置是**仅**接收来自 MSMQ 队列在远程 MSMQ 服务器上，则可以通过运行 MSMQ 实现高可用性接收 BizTalk 组中的多个 BizTalk 计算机上的主机。</span><span class="sxs-lookup"><span data-stu-id="24893-200">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="24893-201">若要为了使 MSMQ 提供高可用性，你必须确保远程 MSMQ 服务器使用故障转移群集在 Windows 中。</span><span class="sxs-lookup"><span data-stu-id="24893-201">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="24893-202">如果使用事务性队列时，必须运行远程 MSMQ 服务器 MSMQ 4.0 (Windows Server 2008) 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="24893-202">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
### <a name="mqseries-adapter"></a><span data-ttu-id="24893-203">MQSeries 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-203">MQSeries Adapter</span></span>  
 <span data-ttu-id="24893-204">Microsoft BizTalk Adapter for MQSeries 用作之间的桥梁[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和 IBM MQSeries 服务器。</span><span class="sxs-lookup"><span data-stu-id="24893-204">The Microsoft BizTalk Adapter for MQSeries serves as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and IBM MQSeries servers.</span></span> <span data-ttu-id="24893-205">为确保在使用此适配器时实现高度可用的解决方案，必须有多个运行 MQSeries 适配器的主机的实例，在 MQSeries for Windows 中使用群集队列管理器，并群集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="24893-205">To provide a highly available solution when you use this adapter, you must have multiple instances of the host running the MQSeries adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span> <span data-ttu-id="24893-206">有关群集队列管理器和群集 MQSeries 服务器的详细信息，请参阅 IBM WebSphere MQ 文档。</span><span class="sxs-lookup"><span data-stu-id="24893-206">For more information about clustering the queue manager and clustering the MQSeries Server, see the IBM WebSphere MQ documentation.</span></span> <span data-ttu-id="24893-207">有关确保 MQSeries 适配器高度可用的详细信息，请参阅用于 MQSeries 的 Microsoft BizTalk 适配器的帮助中的“高可用性”。</span><span class="sxs-lookup"><span data-stu-id="24893-207">For more information about making the MQSeries adapter highly available, see "High Availability" in Microsoft BizTalk Adapter for MQSeries Help.</span></span>  
  
### <a name="windows-sharepoint-services-adapter"></a><span data-ttu-id="24893-208">Windows SharePoint Services 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-208">Windows SharePoint Services Adapter</span></span>  
 <span data-ttu-id="24893-209">Windows SharePoint Services 适配器通过调入 BizTalk 安装在 SharePoint 计算机上的 Windows SharePoint Services Web Services 从 SharePoint 中检索消息。</span><span class="sxs-lookup"><span data-stu-id="24893-209">The Windows SharePoint Services adapter retrieves messages from SharePoint by calling into the Windows SharePoint Services web service installed by BizTalk on the SharePoint machine.</span></span> <span data-ttu-id="24893-210">该适配器使用签出机制，以便确保不同的主机实例不会处理同一消息。</span><span class="sxs-lookup"><span data-stu-id="24893-210">The adapter uses a checkout mechanism in order to ensure that different host instances will not process the same message.</span></span> <span data-ttu-id="24893-211">这允许接收适配器，可以通过添加更多的主机实例扩展。</span><span class="sxs-lookup"><span data-stu-id="24893-211">This allows the receive adapter to scale out by adding more host instances.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="24893-212">用于 SharePoint 接收适配器通过让你提供高可用性运行相同接收相同的 HTTP URL 指向 SharePoint NLB 安装订阅的多个主机实例上的位置。</span><span class="sxs-lookup"><span data-stu-id="24893-212"> provides high availability for the SharePoint receive adapter by letting you run the same receive locations on multiple host instances that subscribe to the same HTTP URL pointing to a SharePoint NLB installation.</span></span>  
  
### <a name="wcf-nettcp-adapter"></a><span data-ttu-id="24893-213">WCF NetTcp 适配器</span><span class="sxs-lookup"><span data-stu-id="24893-213">WCF-NetTcp Adapter</span></span>  
 <span data-ttu-id="24893-214">可以使用 IP 层负载平衡技术平衡 NetTcpBinding 的负载。</span><span class="sxs-lookup"><span data-stu-id="24893-214">The NetTcpBinding can be load balanced using IP-layer load balancing techniques.</span></span> <span data-ttu-id="24893-215">但是，默认情况下，NetTcpBinding 合并 TCP 连接会降低连接延迟。</span><span class="sxs-lookup"><span data-stu-id="24893-215">However, the NetTcpBinding pools TCP connections by default to reduce connection latency.</span></span> <span data-ttu-id="24893-216">这是影响负载平衡基本机制的优化设置。</span><span class="sxs-lookup"><span data-stu-id="24893-216">This is an optimization that interferes with the basic mechanism of load balancing.</span></span> <span data-ttu-id="24893-217">优化 NetTcpBinding 的主要配置值是租约超时时间，该值为连接池设置的一部分。</span><span class="sxs-lookup"><span data-stu-id="24893-217">The primary configuration value for optimizing the NetTcpBinding is the lease timeout, which is part of the Connection Pool Settings.</span></span> <span data-ttu-id="24893-218">连接池使得客户端连接与场内特定服务器相关联。</span><span class="sxs-lookup"><span data-stu-id="24893-218">Connection pooling causes client connections to become associated to specific servers within the farm.</span></span> <span data-ttu-id="24893-219">由于这些连接的生存期增长（租约超时设置控制的因素），场中各个服务器的负载分布变得不平衡。</span><span class="sxs-lookup"><span data-stu-id="24893-219">As the lifetime of those connections increase (a factor controlled by the lease timeout setting), the load distribution across various servers in the farm becomes unbalanced.</span></span> <span data-ttu-id="24893-220">进而平均调用时间增加。</span><span class="sxs-lookup"><span data-stu-id="24893-220">As a result the average call time increases.</span></span> <span data-ttu-id="24893-221">从而当在负载平衡方案中使用 NetTcpBinding 时，请考虑缩短绑定使用的默认租约超时。</span><span class="sxs-lookup"><span data-stu-id="24893-221">So when using the NetTcpBinding in load-balanced scenarios, consider reducing the default lease timeout used by the binding.</span></span> <span data-ttu-id="24893-222">对于负载平衡方案，30 秒租约超时是比较合理的起点，尽管优化值依赖于应用程序。</span><span class="sxs-lookup"><span data-stu-id="24893-222">A 30-second lease timeout is a reasonable starting point for load-balanced scenarios, although the optimal value is application-dependent.</span></span> <span data-ttu-id="24893-223">有关通道租约超时和其他传输配额的详细信息，请参阅“传输配额”。</span><span class="sxs-lookup"><span data-stu-id="24893-223">For more information about the channel lease timeout and other transport quotas, see Transport Quotas.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="24893-224">另请参阅</span><span class="sxs-lookup"><span data-stu-id="24893-224">See Also</span></span>  
 [<span data-ttu-id="24893-225">为 BizTalk 主机提供高可用性</span><span class="sxs-lookup"><span data-stu-id="24893-225">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)