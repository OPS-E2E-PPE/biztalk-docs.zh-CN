---
title: 向外扩展接收主机 |Microsoft Docs
ms.custom: ''
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- adapters, receive adapters
- high availability
- HTTP adapters, scaling
- receive adapters, scaling
- POP3 adapters, scaling
- MSMQ adapters, scaling
- EDI adapters, scaling
- Web services, scaling
- hosts, multiple
- MQSeries adapters, scaling
- adapters, Windows SharePoint Services
- scaling, hosts
- scaling, adapters
- SAP adapters
- FTP adapters
- scaling, receive adapters
- hosts, receiving
- adapters, Web services
- hosts, scaling
- SOAP adapters, scaling
- adapters, scaling
- SQL adapters, scaling
- Web services, adapters
- File adapters, scaling
- clustering
ms.assetid: 94f35426-37fa-4ad2-8e35-d82fdca02262
caps.latest.revision: 54
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5f66b1966814be2784b2372135ac0c042a0746a7
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65309324"
---
# <a name="scaled-out-receiving-hosts"></a><span data-ttu-id="1456b-102">向外扩展接收主机</span><span class="sxs-lookup"><span data-stu-id="1456b-102">Scaled-Out Receiving Hosts</span></span>
<span data-ttu-id="1456b-103">当主机包含接收项时，如接收位置或管道，它充当安全边界，并在主机内的管道中出现消息解码和解密。</span><span class="sxs-lookup"><span data-stu-id="1456b-103">When a host contains a receiving item, such as a receive location or pipeline, it acts as a security boundary, and the message decoding and decrypting occurs in a pipeline within the host.</span></span> <span data-ttu-id="1456b-104">若要确保接收主机高度可用，必须具有两个或多个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运行的每个接收主机实例的计算机。</span><span class="sxs-lookup"><span data-stu-id="1456b-104">To make the receiving hosts highly available, you must have two or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers that are running instances of each receiving host.</span></span> <span data-ttu-id="1456b-105">可以通过横向扩展接收主机保证可用性[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]消息传递需要进行大量的部署。</span><span class="sxs-lookup"><span data-stu-id="1456b-105">By scaling out the receiving hosts you can guarantee availability for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that are messaging intensive.</span></span> <span data-ttu-id="1456b-106">尽管这些部署可能很少处理业务流程，它们可以将不同类型的快速和可靠地的许多消息路由。</span><span class="sxs-lookup"><span data-stu-id="1456b-106">While these deployments might perform minimal processing for orchestrations, they can route many messages of varying types with great speed and reliability.</span></span>  
  
 <span data-ttu-id="1456b-107">通过将接收主机与处理业务流程和发送消息，因为你可以保护并扩展独立于其他主机的每个主机的主机环境中，可以增强安全性和可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="1456b-107">You can enhance security and scalability in your environment by separating the receiving host from the hosts that process orchestrations and send messages because you can secure and scale each host independently of other hosts.</span></span> <span data-ttu-id="1456b-108">例如，可以向接收主机而不将任何计算机添加到处理或发送主机添加两台计算机 （主机实例）。</span><span class="sxs-lookup"><span data-stu-id="1456b-108">For example, you can add two computers (host instances) to the receiving host without adding any computers to the processing or sending hosts.</span></span>  
  
## <a name="multiple-hosts-for-receiving-messages"></a><span data-ttu-id="1456b-109">多个主机接收消息</span><span class="sxs-lookup"><span data-stu-id="1456b-109">Multiple Hosts for Receiving Messages</span></span>  
 <span data-ttu-id="1456b-110">下图显示[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通过在两台计算机上运行的接收主机实例以确保接收主机提供高可用性的部署。</span><span class="sxs-lookup"><span data-stu-id="1456b-110">The following figure shows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the receiving host by having two computers that are running instances of the receiving host.</span></span> <span data-ttu-id="1456b-111">请注意，在此图中处理和发送主机并不高度可用。</span><span class="sxs-lookup"><span data-stu-id="1456b-111">Note that in this figure the processing and sending hosts are not highly available.</span></span>  
  
 <span data-ttu-id="1456b-112">![多个主机接收消息](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span><span class="sxs-lookup"><span data-stu-id="1456b-112">![Multiple Host for Receiving Messages](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span></span>  
  
 <span data-ttu-id="1456b-113">对于大型部署，用于处理多个贸易合作伙伴的方案以及方案使用不同的协议时，可以跨多个接收主机来分散接收功能。</span><span class="sxs-lookup"><span data-stu-id="1456b-113">For large deployments, for scenarios dealing with multiple trading partners, and for scenarios when you use different protocols, you can spread out the receiving functionality across multiple receiving hosts.</span></span> <span data-ttu-id="1456b-114">例如，您可以用于接收消息的每个适配器或从其他合作伙伴接收消息的不同主机创建主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-114">For example, you can create a host for receiving messages for each adapter, or different hosts for receiving messages from different partners.</span></span> <span data-ttu-id="1456b-115">创建多个接收主机时可以创建安全边界并简化可管理性和可伸缩性的您的环境;但是，它会使您的环境高度可用。</span><span class="sxs-lookup"><span data-stu-id="1456b-115">When you create multiple receiving hosts you can create security boundaries and ease the manageability and scalability of your environment; however, it does not make your environment highly available.</span></span>  
  
 <span data-ttu-id="1456b-116">若要使您的环境高度可用，必须为你创建每个接收主机创建两个或多个主机实例。</span><span class="sxs-lookup"><span data-stu-id="1456b-116">To make your environment highly available, you must create two or more host instances for each receiving host that you create.</span></span> <span data-ttu-id="1456b-117">例如，您可以创建三个不同接收主机 （A、 B 和 C） 以接收来自三家不同公司的消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-117">For example, you can create three different receive hosts (A, B, and C) to receive messages from three different companies.</span></span> <span data-ttu-id="1456b-118">若要使每个这些主机高度可用您然后创建每个这些主机的主机实例在两个或多台计算机中。</span><span class="sxs-lookup"><span data-stu-id="1456b-118">To make each of these hosts highly available you then create host instances of each of these hosts in two or more computers.</span></span> <span data-ttu-id="1456b-119">请注意，您可以具有的每个主机实例在一台计算机上而不会丢失安全边界、 可管理性或可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="1456b-119">Note that you can have instances of each host on one computer without losing the security boundary, manageability, or scalability.</span></span>  
  
 <span data-ttu-id="1456b-120">下图显示与专用于接收来自不同公司的消息的主机高度可用的包含三台计算机 BizTalk Server 环境。</span><span class="sxs-lookup"><span data-stu-id="1456b-120">The following figure shows a highly available three-computer BizTalk Server environment with hosts dedicated to receiving messages from different companies.</span></span>  
  
 <span data-ttu-id="1456b-121">![接收实例](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span><span class="sxs-lookup"><span data-stu-id="1456b-121">![Receive Instances](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span></span>  
  
 <span data-ttu-id="1456b-122">若要提供此配置中的高可用性，每台计算机都运行三个主机实例： 为每个三家公司的一个实例。</span><span class="sxs-lookup"><span data-stu-id="1456b-122">To provide high availability in this configuration, each computer runs three host instances: one instance for each of the three companies.</span></span> <span data-ttu-id="1456b-123">每个公司的主机实例包含接收位置和管道，以便与该公司进行通信。</span><span class="sxs-lookup"><span data-stu-id="1456b-123">The host instances for each company contain the receive locations and pipelines to communicate with that company.</span></span> <span data-ttu-id="1456b-124">在典型操作期间，只要您曾经所需的 （例如，如果你配置网络负载平衡 HTTP），接收适配器前扩展工作消息传送负载将分布在三个主机实例为每个主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-124">During typical operations, as long as you have done the necessary work for scale out in front of the receive adapters (for example, if you configure network load balancing for HTTP), the messaging load is distributed among the three host instances for each host.</span></span> <span data-ttu-id="1456b-125">如果一台计算机上的主机实例失败，其他两台计算机上运行的主机实例提供冗余和维护服务可用性。</span><span class="sxs-lookup"><span data-stu-id="1456b-125">If a host instance on one computer fails, the host instances running on the other two computers provide redundancy and maintain service availability.</span></span>  
  
## <a name="scaling-the-biztalk-server-receive-adapters"></a><span data-ttu-id="1456b-126">扩展 BizTalk Server 接收适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-126">Scaling the BizTalk Server Receive Adapters</span></span>  
 <span data-ttu-id="1456b-127">除了主机实例外缩放并确保接收主机高度可用的过程还取决于在部署中实施的特定适配器。</span><span class="sxs-lookup"><span data-stu-id="1456b-127">Besides host instances, the process of scaling and providing high availability for the receive hosts also depends on the specific adapters that you implement in your deployment.</span></span> <span data-ttu-id="1456b-128">每个适配器都具有特定于协议的特性可以使规划和部署在每种情况不同。</span><span class="sxs-lookup"><span data-stu-id="1456b-128">Each adapter has protocol-specific characteristics that make planning and deployment different in each case.</span></span> <span data-ttu-id="1456b-129">但是， [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ，你可将所有适配器的支持，主要通过其他计算机和主机实例相同的高可用性解决方案。</span><span class="sxs-lookup"><span data-stu-id="1456b-129">However, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] lets you apply the same high-availability solution for all adapters, primarily through additional computers and host instances.</span></span>  
  
 <span data-ttu-id="1456b-130">具体取决于所使用的特定协议，某些接收适配器需要额外的机制分布在多台主机计算机之间的传入消息，以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="1456b-130">Depending on the specific protocol being used, some receive adapters require an additional mechanism for distributing incoming messages among multiple host computers to provide high availability.</span></span> <span data-ttu-id="1456b-131">例如，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用 HTTP 或 SOAP 适配器 （也称为 Web services 适配器） 的解决方案需要如网络负载平衡 (NLB) 来分布接收工作负荷的负载均衡器。</span><span class="sxs-lookup"><span data-stu-id="1456b-131">For example, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solutions that use the HTTP or SOAP adapter (otherwise known as the Web services adapter) require a load balancer such as Network Load Balancing (NLB) to distribute the receiving workload.</span></span> <span data-ttu-id="1456b-132">下表总结了中的最常见的适配器的高可用性指南[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="1456b-132">The following table summarizes the high-availability guidelines for the most common adapters in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
|<span data-ttu-id="1456b-133">**适配器**</span><span class="sxs-lookup"><span data-stu-id="1456b-133">**Adapter**</span></span>|<span data-ttu-id="1456b-134">**高可用性指南**</span><span class="sxs-lookup"><span data-stu-id="1456b-134">**High-availability guidelines**</span></span>|  
|-----------------|---------------------------------------|  
|<span data-ttu-id="1456b-135">HTTP</span><span class="sxs-lookup"><span data-stu-id="1456b-135">HTTP</span></span>|<span data-ttu-id="1456b-136">向接收主机添加多台计算机并配置 NLB 以在多台主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-136">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="1456b-137">SOAP</span><span class="sxs-lookup"><span data-stu-id="1456b-137">SOAP</span></span>|<span data-ttu-id="1456b-138">向接收主机添加多台计算机并配置 NLB 以在多台主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-138">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="1456b-139">文件</span><span class="sxs-lookup"><span data-stu-id="1456b-139">File</span></span>|<span data-ttu-id="1456b-140">向引用相同文件的文件夹或通用命名约定 (UNC) 路径每台主机计算机上的接收位置的接收主机添加多台计算机。</span><span class="sxs-lookup"><span data-stu-id="1456b-140">Add multiple computers to the receive host with the receive location on each host computer referencing the same file folder or Universal Naming Convention (UNC) path.</span></span> <span data-ttu-id="1456b-141">对于完整的高可用性解决方案，必须确保 UNC 路径指向的文件位置是高度可用 （或至少是可靠）。</span><span class="sxs-lookup"><span data-stu-id="1456b-141">For a complete highly available solution, you must make sure that the file location to which the UNC path points is highly available (or at least reliable).</span></span>|  
|<span data-ttu-id="1456b-142">FTP</span><span class="sxs-lookup"><span data-stu-id="1456b-142">FTP</span></span>|<span data-ttu-id="1456b-143">配置 FTP 接收适配器在群集 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="1456b-143">Configure the FTP receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="1456b-144">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-144">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="1456b-145">POP3</span><span class="sxs-lookup"><span data-stu-id="1456b-145">POP3</span></span>|<span data-ttu-id="1456b-146">配置 POP3 接收适配器在群集 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="1456b-146">Configure the POP3 receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="1456b-147">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-147">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="1456b-148">MSMQ</span><span class="sxs-lookup"><span data-stu-id="1456b-148">MSMQ</span></span>|<span data-ttu-id="1456b-149">配置 MSMQ 接收适配器运行在 Windows 群集 BizTalk 主机中。</span><span class="sxs-lookup"><span data-stu-id="1456b-149">Configure the MSMQ receive adapter to run in a Windows-clustered BizTalk host.</span></span> <span data-ttu-id="1456b-150">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-150">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span> <span data-ttu-id="1456b-151">如果与 MSMQ 接收位置远程 MSMQ 服务器上使用队列，不需要群集 BizTalk 主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-151">If the MSMQ receive locations are using queues on a remote MSMQ server, you do not need to cluster the BizTalk host.</span></span>  <span data-ttu-id="1456b-152">在此方案中，运行 MSMQ 的接收主机组中的多个 BizTalk 计算机上。</span><span class="sxs-lookup"><span data-stu-id="1456b-152">In this scenario, run the MSMQ receive host on multiple BizTalk computers in the group.</span></span>|  
|<span data-ttu-id="1456b-153">MQSeries</span><span class="sxs-lookup"><span data-stu-id="1456b-153">MQSeries</span></span>|<span data-ttu-id="1456b-154">添加多个计算机连接到此适配器的接收主机在 MQSeries 的 Windows 中使用群集的队列管理器和群集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="1456b-154">Add multiple computers to the receive host for this adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span>|  
|<span data-ttu-id="1456b-155">Windows Sharepoint Services</span><span class="sxs-lookup"><span data-stu-id="1456b-155">Windows Sharepoint Services</span></span>|<span data-ttu-id="1456b-156">向接收主机添加多台计算机并配置 NLB 以在多台主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-156">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="1456b-157">-   WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="1456b-157">-   WCF-NetTcp</span></span><br /><span data-ttu-id="1456b-158">-自定义 WCF</span><span class="sxs-lookup"><span data-stu-id="1456b-158">-   WCF-Custom</span></span>|<span data-ttu-id="1456b-159">向接收主机添加多台计算机并配置 NLB 以在这些主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-159">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span><br /><br /> <span data-ttu-id="1456b-160">-或者-</span><span class="sxs-lookup"><span data-stu-id="1456b-160">-or -</span></span><br /><br /> <span data-ttu-id="1456b-161">群集主机适配器所用的接收处理程序。</span><span class="sxs-lookup"><span data-stu-id="1456b-161">Cluster the host used by the adapter receive handler.</span></span>|  
|<span data-ttu-id="1456b-162">-   WCF-NetNamedPipe</span><span class="sxs-lookup"><span data-stu-id="1456b-162">-   WCF-NetNamedPipe</span></span><br /><span data-ttu-id="1456b-163">-   WCF-BasicHttp</span><span class="sxs-lookup"><span data-stu-id="1456b-163">-   WCF-BasicHttp</span></span><br /><span data-ttu-id="1456b-164">-   WCF-WSHttp</span><span class="sxs-lookup"><span data-stu-id="1456b-164">-   WCF-WSHttp</span></span><br /><span data-ttu-id="1456b-165">-WCF CustomIsolated</span><span class="sxs-lookup"><span data-stu-id="1456b-165">-   WCF-CustomIsolated</span></span>|<span data-ttu-id="1456b-166">向接收主机添加多台计算机并配置 NLB 以在这些主机计算机间分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-166">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span>|  
|<span data-ttu-id="1456b-167">WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="1456b-167">WCF-NetMsmq</span></span>|<span data-ttu-id="1456b-168">群集主机适配器所用的接收处理程序。</span><span class="sxs-lookup"><span data-stu-id="1456b-168">Cluster the host used by the adapter receive handler.</span></span>|  
  
### <a name="http-adapter"></a><span data-ttu-id="1456b-169">HTTP 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-169">HTTP Adapter</span></span>  
 <span data-ttu-id="1456b-170">HTTP 接收适配器中的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]是作为主机实例在每个接收主机计算机运行的 Internet 服务器 API (ISAPI) 扩展 (BTSHTTPReceive.dll)。</span><span class="sxs-lookup"><span data-stu-id="1456b-170">The HTTP receive adapter in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is an Internet Server API (ISAPI) extension (BTSHTTPReceive.dll) that runs as a host instance on each receive host computer.</span></span> <span data-ttu-id="1456b-171">当合作伙伴通过 HTTP 协议向 BizTalk Server 发送一条消息时，消息通常会送达的特定 url 的 BizTalk Server 计算机上使用 Internet 信息服务 (IIS) 安装。</span><span class="sxs-lookup"><span data-stu-id="1456b-171">When a partner sends a message to BizTalk Server through the HTTP protocol, the message typically arrives at a specific URL on a BizTalk Server computer with Internet Information Services (IIS) installed.</span></span> <span data-ttu-id="1456b-172">使用订阅此 URL 的接收位置在 BizTalk Server 中创建主机实例。</span><span class="sxs-lookup"><span data-stu-id="1456b-172">You create a host instance in BizTalk Server with a receive location that subscribes to this URL.</span></span> <span data-ttu-id="1456b-173">当消息到达的 URL 上时，BizTalk Server 对其进行检索，并将其保留在 MessageBox 数据库中。</span><span class="sxs-lookup"><span data-stu-id="1456b-173">When messages arrive at the URL, BizTalk Server retrieves them and persists them in the MessageBox database.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="1456b-174">提供高可用性的 HTTP 接收适配器通过让你创建同一接收主机的多个主机实例。</span><span class="sxs-lookup"><span data-stu-id="1456b-174">provides high availability for the HTTP receive adapter by letting you create multiple host instances of the same receive host.</span></span> <span data-ttu-id="1456b-175">这些主机实例订阅可以是共享的特定 URL、 群集 IP 地址，如果您使用 NLB 分发传入消息跨多个接收主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-175">These host instances subscribe to a specific URL that can be a shared, cluster IP address if you are using NLB to distribute incoming messages across multiple receive hosts.</span></span> <span data-ttu-id="1456b-176">这些主机都可提供在群集的虚拟 IP 地址，以便如果在一个群集成员出现故障，其他人仍可提供此 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="1456b-176">These hosts all function to serve the virtual IP address of the cluster, so that if one cluster member fails, others can still serve this IP address.</span></span>  
  
### <a name="soap-adapter-web-services-adapter"></a><span data-ttu-id="1456b-177">SOAP 适配器 （Web Services 适配器）</span><span class="sxs-lookup"><span data-stu-id="1456b-177">SOAP Adapter (Web Services Adapter)</span></span>  
 <span data-ttu-id="1456b-178">与 HTTP 接收适配器，不同的 Web 服务接收适配器不涉及的 ISAPI 扩展。</span><span class="sxs-lookup"><span data-stu-id="1456b-178">Unlike the HTTP receive adapter, the receive adapter for Web services does not involve an ISAPI extension.</span></span> <span data-ttu-id="1456b-179">它接收通过使用 BizTalk Web Services 发布向导指定 URL 的传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-179">It receives incoming messages through a URL that you specify by using the BizTalk Web Services Publishing Wizard.</span></span> <span data-ttu-id="1456b-180">此向导导出 Web 服务，并为接收位置创建虚拟目录的函数。</span><span class="sxs-lookup"><span data-stu-id="1456b-180">This wizard exports a Web service and creates a virtual directory that functions as the receive location.</span></span>  
  
 <span data-ttu-id="1456b-181">若要为 Web services 适配器提供高可用性，向接收主机添加多台计算机，并使用 NLB 分发传入消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-181">To provide high availability for the Web services adapter, add multiple computers to the receive host and use NLB to distribute incoming messages.</span></span> <span data-ttu-id="1456b-182">当客户端通过 Web 服务适配器将消息发送到 BizTalk Server 时，NLB 负载平衡到接收主机之一的消息和在主机上运行的合适的主机实例将消息保存在 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="1456b-182">When a client sends a message to BizTalk Server through the Web services adapter, NLB load balances the message to one of the receiving hosts, and the appropriate host instance running on the host persists the message to the MessageBox database.</span></span>  
  
### <a name="file-adapter"></a><span data-ttu-id="1456b-183">文件适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-183">File Adapter</span></span>  
 <span data-ttu-id="1456b-184">文件接收适配器检索消息文件文件夹或 UNC 路径。</span><span class="sxs-lookup"><span data-stu-id="1456b-184">The File receive adapter retrieves messages from a file folder or UNC path.</span></span> <span data-ttu-id="1456b-185">因为这两个参与方需要对该路径的权限，并且公司通常不能共享文件系统中而不是企业到企业方案中的公司通常使用此适配器。</span><span class="sxs-lookup"><span data-stu-id="1456b-185">This adapter is frequently used within companies instead of in business-to-business scenarios because both parties require permissions to the path, and companies do not typically share file systems.</span></span> <span data-ttu-id="1456b-186">配置文件接收处理程序来订阅路径，以便 BizTalk Server 可检索消息到达接收位置时。</span><span class="sxs-lookup"><span data-stu-id="1456b-186">You configure the File receive handler to subscribe to the path so that BizTalk Server retrieves the message when it arrives at the receive location.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="1456b-187">文件接收适配器通过让你在订阅同一 UNC 路径的多台主机计算机上创建主机实例提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="1456b-187">provides high availability for the file receive adapter by letting you create host instances on multiple host computers that subscribe to the same UNC path.</span></span> <span data-ttu-id="1456b-188">如果在一台主机计算机上运行的主机实例遇到错误或失败，另一台主机计算机上运行的同一主机实例可以检索消息并将其保存到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="1456b-188">If a host instance running on one host computer encounters errors or fails, the same host instance running on another host computer can retrieve the message and persist it to the MessageBox database.</span></span>  
  
### <a name="ftp-adapter"></a><span data-ttu-id="1456b-189">FTP 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-189">FTP Adapter</span></span>  
 <span data-ttu-id="1456b-190">FTP 接收适配器不应配置为在多个主机中运行，因为 FTP 接收适配器使用 FTP 协议从目标系统检索文件和 FTP 协议没有任何文件锁定以确保多个概念的相同副本文件不会同时检索正在运行的多个实例的 FTP 接收适配器时。</span><span class="sxs-lookup"><span data-stu-id="1456b-190">The FTP receive adapter should not be configured to run in multiple hosts because the FTP receive adapter uses the FTP protocol to retrieve files from the target system and the FTP protocol does not have any notion of file locking to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP receive adapter.</span></span> <span data-ttu-id="1456b-191">FTP 接收适配器应配置为群集的 BizTalk 主机中运行。</span><span class="sxs-lookup"><span data-stu-id="1456b-191">The FTP receive adapter should be configured to run in a clustered BizTalk host.</span></span> <span data-ttu-id="1456b-192">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-192">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="pop3-adapter"></a><span data-ttu-id="1456b-193">POP3 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-193">POP3 Adapter</span></span>  
 <span data-ttu-id="1456b-194">POP3 接收适配器可以配置为在多个主机中运行，除非适配器从中进行读取的 POP3 服务器允许对同一邮箱进行多个并发连接。</span><span class="sxs-lookup"><span data-stu-id="1456b-194">The POP3 receive adapter can be configured to run in multiple hosts unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="1456b-195">如果 POP3 适配器连接到的 POP3 服务器允许对其邮箱进行多个并发连接然后 POP3 适配器的高可用性而必须实现通过配置的 POP3 适配器接收处理程序已被 BizTalk 主机实例中运行群集。</span><span class="sxs-lookup"><span data-stu-id="1456b-195">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes then high availability for the POP3 adapter must be achieved by configuring POP3 adapter receive handlers to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="1456b-196">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-196">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="msmq-adapter"></a><span data-ttu-id="1456b-197">MSMQ 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-197">MSMQ Adapter</span></span>  
 <span data-ttu-id="1456b-198">若要实现高可用性，运行 MSMQ 接收适配器中为群集 MSMQ 资源同一个群集组的 Windows 群集 BizTalk 主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-198">To achieve high availability, run the MSMQ receive adapter in a Windows-clustered BizTalk host that is in the same cluster group as the clustered MSMQ resource.</span></span> <span data-ttu-id="1456b-199">有关详细信息，请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="1456b-199">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
 <span data-ttu-id="1456b-200">MSMQ 接收位置是否**仅**接收来自远程 MSMQ 服务器上的 MSMQ 队列，则可以通过运行 MSMQ 实现高可用性 BizTalk 组中接收多个 BizTalk 计算机上的主机。</span><span class="sxs-lookup"><span data-stu-id="1456b-200">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="1456b-201">若要为 MSMQ 提供高可用性，必须确保远程 MSMQ 服务器正在使用中 Windows 故障转移群集。</span><span class="sxs-lookup"><span data-stu-id="1456b-201">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="1456b-202">如果使用的事务性队列，必须运行远程 MSMQ 服务器 MSMQ 4.0 (Windows Server 2008) 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="1456b-202">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
### <a name="mqseries-adapter"></a><span data-ttu-id="1456b-203">MQSeries 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-203">MQSeries Adapter</span></span>  
 <span data-ttu-id="1456b-204">用于 MQSeries 的 Microsoft BizTalk 适配器用作之间的桥梁[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]和 IBM MQSeries 服务器。</span><span class="sxs-lookup"><span data-stu-id="1456b-204">The Microsoft BizTalk Adapter for MQSeries serves as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and IBM MQSeries servers.</span></span> <span data-ttu-id="1456b-205">若要使用此适配器时，提供高度可用的解决方案，必须运行 MQSeries 适配器的主机的多个实例、 在 MQSeries 的 Windows 中使用群集的队列管理器和群集 MQSeries Server for Windows。</span><span class="sxs-lookup"><span data-stu-id="1456b-205">To provide a highly available solution when you use this adapter, you must have multiple instances of the host running the MQSeries adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span> <span data-ttu-id="1456b-206">有关群集队列管理器和群集 MQSeries 服务器的详细信息，请参阅 IBM WebSphere MQ 文档。</span><span class="sxs-lookup"><span data-stu-id="1456b-206">For more information about clustering the queue manager and clustering the MQSeries Server, see the IBM WebSphere MQ documentation.</span></span> <span data-ttu-id="1456b-207">有关确保 MQSeries 适配器高度可用的详细信息，请参阅有关 MQSeries 的帮助的 Microsoft BizTalk 适配器中的"高可用性"。</span><span class="sxs-lookup"><span data-stu-id="1456b-207">For more information about making the MQSeries adapter highly available, see "High Availability" in Microsoft BizTalk Adapter for MQSeries Help.</span></span>  
  
### <a name="windows-sharepoint-services-adapter"></a><span data-ttu-id="1456b-208">Windows SharePoint Services 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-208">Windows SharePoint Services Adapter</span></span>  
 <span data-ttu-id="1456b-209">Windows SharePoint Services 适配器通过调入 SharePoint 计算机上安装 BizTalk 的 Windows SharePoint Services web 服务从 SharePoint 中检索消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-209">The Windows SharePoint Services adapter retrieves messages from SharePoint by calling into the Windows SharePoint Services web service installed by BizTalk on the SharePoint machine.</span></span> <span data-ttu-id="1456b-210">适配器使用签出机制，以确保不同的主机实例不会处理同一消息。</span><span class="sxs-lookup"><span data-stu-id="1456b-210">The adapter uses a checkout mechanism in order to ensure that different host instances will not process the same message.</span></span> <span data-ttu-id="1456b-211">这样，接收适配器若要横向扩展添加更多主机实例。</span><span class="sxs-lookup"><span data-stu-id="1456b-211">This allows the receive adapter to scale out by adding more host instances.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="1456b-212">提供高可用性，SharePoint 通过让你接收适配器的相同接收位置在订阅同一 HTTP URL 指向 SharePoint NLB 安装的多个主机实例上运行。</span><span class="sxs-lookup"><span data-stu-id="1456b-212">provides high availability for the SharePoint receive adapter by letting you run the same receive locations on multiple host instances that subscribe to the same HTTP URL pointing to a SharePoint NLB installation.</span></span>  
  
### <a name="wcf-nettcp-adapter"></a><span data-ttu-id="1456b-213">Wcf-nettcp 适配器</span><span class="sxs-lookup"><span data-stu-id="1456b-213">WCF-NetTcp Adapter</span></span>  
 <span data-ttu-id="1456b-214">NetTcpBinding 可使用 IP 层负载平衡技术平衡负载。</span><span class="sxs-lookup"><span data-stu-id="1456b-214">The NetTcpBinding can be load balanced using IP-layer load balancing techniques.</span></span> <span data-ttu-id="1456b-215">但是，nettcpbinding 合并 TCP 连接默认情况下以减少连接延迟。</span><span class="sxs-lookup"><span data-stu-id="1456b-215">However, the NetTcpBinding pools TCP connections by default to reduce connection latency.</span></span> <span data-ttu-id="1456b-216">这是一种优化方式会干扰的负载平衡的基本机制。</span><span class="sxs-lookup"><span data-stu-id="1456b-216">This is an optimization that interferes with the basic mechanism of load balancing.</span></span> <span data-ttu-id="1456b-217">优化 NetTcpBinding 的主要配置值是租约超时，它是连接池设置的一部分。</span><span class="sxs-lookup"><span data-stu-id="1456b-217">The primary configuration value for optimizing the NetTcpBinding is the lease timeout, which is part of the Connection Pool Settings.</span></span> <span data-ttu-id="1456b-218">连接池使得客户端连接成为场中的特定服务器相关联。</span><span class="sxs-lookup"><span data-stu-id="1456b-218">Connection pooling causes client connections to become associated to specific servers within the farm.</span></span> <span data-ttu-id="1456b-219">这些连接的生存期的增加 （由租约超时设置控制的因素），场中的不同服务器上的负载分布变得不平衡。</span><span class="sxs-lookup"><span data-stu-id="1456b-219">As the lifetime of those connections increase (a factor controlled by the lease timeout setting), the load distribution across various servers in the farm becomes unbalanced.</span></span> <span data-ttu-id="1456b-220">因此平均调用时间增加。</span><span class="sxs-lookup"><span data-stu-id="1456b-220">As a result the average call time increases.</span></span> <span data-ttu-id="1456b-221">因此，当在负载平衡方案中，使用 NetTcpBinding，请考虑减少由绑定使用的默认租约超时。</span><span class="sxs-lookup"><span data-stu-id="1456b-221">So when using the NetTcpBinding in load-balanced scenarios, consider reducing the default lease timeout used by the binding.</span></span> <span data-ttu-id="1456b-222">30 秒租约超时是比较合理的起点的负载平衡方案，尽管最佳值与应用程序相关。</span><span class="sxs-lookup"><span data-stu-id="1456b-222">A 30-second lease timeout is a reasonable starting point for load-balanced scenarios, although the optimal value is application-dependent.</span></span> <span data-ttu-id="1456b-223">有关通道租约超时和其他传输配额的详细信息，请参阅传输配额。</span><span class="sxs-lookup"><span data-stu-id="1456b-223">For more information about the channel lease timeout and other transport quotas, see Transport Quotas.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1456b-224">请参阅</span><span class="sxs-lookup"><span data-stu-id="1456b-224">See Also</span></span>  
 [<span data-ttu-id="1456b-225">为 BizTalk 主机提供高可用性</span><span class="sxs-lookup"><span data-stu-id="1456b-225">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)