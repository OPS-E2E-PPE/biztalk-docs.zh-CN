---
title: "程序集安装在 gac 中 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 3b12d00c-8750-4c6d-8244-e613f955a478
caps.latest.revision: "17"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e48ec0dddcf17be70b915d2beb058f1ab2f6f576
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="assembly-installation-in-the-gac"></a><span data-ttu-id="ef888-102">程序集安装在 gac 中</span><span class="sxs-lookup"><span data-stu-id="ef888-102">Assembly Installation in the GAC</span></span>
<span data-ttu-id="ef888-103">每台计算机都包含全局程序集缓存 (GAC)，其中包含该计算机上的一个或多个应用程序所使用的程序集。</span><span class="sxs-lookup"><span data-stu-id="ef888-103">Each computer contains a global assembly cache (GAC) that contains the assemblies that are used by one or more applications on that computer.</span></span> <span data-ttu-id="ef888-104">为使 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 能够在运行时处理消息，BizTalk 应用程序中包括的程序集必须位于运行该应用程序的计算机的 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-104">For [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to process messages during run time, the assemblies included in a BizTalk application must be present in the GACs of the computers that run the application.</span></span>  
  
 <span data-ttu-id="ef888-105">如果您的应用程序单独放置在一台服务器上，则程序集只需位于该服务器的 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-105">If your application is isolated to one server, then assemblies need only be present in the GAC of that server.</span></span> <span data-ttu-id="ef888-106">不过，如果该应用程序有多个宿主服务器，那么该应用程序中的程序集必须位于需要访问程序集所含项目的所有计算机的 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-106">However if multiple servers host the application, then the assemblies in that application must exist in the GAC of each computer that requires access to the artifacts contained in the assembly.</span></span> <span data-ttu-id="ef888-107">例如，如果将 Assembly_A 部署到 Server_1，，然后在服务器 2 上的主机中登记 Assembly_A Assembly_A 必须安装在服务器 2 上的 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-107">For example, if you deploy Assembly_A to Server_1, and then enlist Assembly_A in a host on Server_2, Assembly_A must be installed in the GAC on Server_2.</span></span> <span data-ttu-id="ef888-108">如果不是这样，服务器 2 不能在运行时访问 Assembly_A。</span><span class="sxs-lookup"><span data-stu-id="ef888-108">If it is not, Server_2 will not be able to access Assembly_A during run time.</span></span>  
  
 <span data-ttu-id="ef888-109">特别是，如果程序集包含业务流程以及它们所依赖的任何程序集，则必须始终在运行特定主机（与业务流程绑定）实例的服务器的 GAC 中安装这些程序集。</span><span class="sxs-lookup"><span data-stu-id="ef888-109">In particular, assemblies containing orchestrations and any assemblies that they depend on must always be installed in the GAC on servers that run instances of the host to which the orchestration is bound.</span></span> <span data-ttu-id="ef888-110">此外，如果程序集包含供某端口使用的映射和管道，则必须在运行特定主机（充当该端口的适配器处理程序）实例的服务器上安装这些程序集。</span><span class="sxs-lookup"><span data-stu-id="ef888-110">In addition, assemblies containing the maps and pipelines used by a port must be installed on servers that run instances of the host serving as the adapter handler for the port.</span></span>  
  
 <span data-ttu-id="ef888-111">您可以为各个程序集指定部署选项，在从 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 部署程序集时将其安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-111">You can specify a deployment option for each assembly to install it in the GAC when you deploy the assembly from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="ef888-112">或者，也可以将程序集手动安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-112">Alternatively, you can install an assembly in the GAC manually.</span></span> <span data-ttu-id="ef888-113">此外，您可以指定部署选项，在将程序集部署到 BizTalk 应用程序中后将该程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-113">In addition, you can specify deployment options to install the assembly in the GAC after it is deployed into a BizTalk application.</span></span>  
  
 <span data-ttu-id="ef888-114">下文汇总了将程序集安装到 GAC 中时可供使用的工具和方法：</span><span class="sxs-lookup"><span data-stu-id="ef888-114">The following summarizes the tools and methods available to install an assembly in the GAC:</span></span>  
  
-   <span data-ttu-id="ef888-115">**Microsoft Visual Studio。**</span><span class="sxs-lookup"><span data-stu-id="ef888-115">**Microsoft Visual Studio.**</span></span> <span data-ttu-id="ef888-116">如前所述，你可以设置项目属性以程序集在 GAC 中自动安装时将它们，部署中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-116">As previously mentioned, you can set project properties to install assemblies in the GAC automatically when you deploy them, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="ef888-117">你还可以手动安装的程序集在 GAC 中使用 Gacutil 命令行工具附带[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]中所述，[如何将程序集安装在 GAC 中](../core/how-to-install-an-assembly-in-the-gac.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-117">You can also manually install assemblies in the GAC by using the Gacutil command-line tool included with [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], as described in [How to Install an Assembly in the GAC](../core/how-to-install-an-assembly-in-the-gac.md).</span></span>  
  
-   <span data-ttu-id="ef888-118">**BTSTask 命令行工具。**</span><span class="sxs-lookup"><span data-stu-id="ef888-118">**BTSTask command-line tool.**</span></span> <span data-ttu-id="ef888-119">使用 BTSTask 向 BizTalk 应用程序添加程序集后，可以指定选项，在导入或安装包含该程序集的应用程序时将该程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-119">When you add an assembly to a BizTalk application by using BTSTask, you can specify options to install the assembly in the GAC when the application that contains it is imported or installed.</span></span> <span data-ttu-id="ef888-120">有关详细信息，请参阅[AddResource 命令： BizTalk 程序集](../core/addresource-command-biztalk-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-120">For more information, see [AddResource Command: BizTalk Assembly](../core/addresource-command-biztalk-assembly.md).</span></span> <span data-ttu-id="ef888-121">另请参阅[AddResource 命令：.NET 程序集](../core/addresource-command-net-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-121">Also see [AddResource Command: .NET Assembly](../core/addresource-command-net-assembly.md).</span></span>  
  
-   <span data-ttu-id="ef888-122">**BizTalk Server 管理控制台。**</span><span class="sxs-lookup"><span data-stu-id="ef888-122">**BizTalk Server Administration console.**</span></span> <span data-ttu-id="ef888-123">与 BTSTask 的方式相同，使用管理控制台向某个应用程序添加程序集后，可以指定选项，在导入或安装包含该程序集的应用程序时将该程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-123">In the same manner as BTSTask, when you add an assembly to an application by using the Administration console, you can specify options to install an assembly in the GAC when the application that contains it is imported or installed.</span></span> <span data-ttu-id="ef888-124">有关详细信息，请参阅[如何将 BizTalk 程序集添加到应用程序](../core/how-to-add-a-biztalk-assembly-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-124">For more information, see [How to Add a BizTalk Assembly to an Application](../core/how-to-add-a-biztalk-assembly-to-an-application.md).</span></span> <span data-ttu-id="ef888-125">另请参阅[如何将.NET 程序集添加到应用程序](../core/how-to-add-a-net-assembly-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-125">Also see [How to Add a .NET Assembly to an Application](../core/how-to-add-a-net-assembly-to-an-application.md).</span></span>  
  
     <span data-ttu-id="ef888-126">此外，你可以配置部署选项在任何时间之后部署到程序集或将其添加到应用程序中所述[如何修改 BizTalk 程序集的部署选项](../core/how-to-modify-the-deployment-options-of-a-biztalk-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="ef888-126">In addition, you can configure deployment options at any time after an assembly has been deployed into or added to an application, as described in [How to Modify the Deployment Options of a BizTalk Assembly](../core/how-to-modify-the-deployment-options-of-a-biztalk-assembly.md).</span></span> <span data-ttu-id="ef888-127">当将程序集部署到[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]从[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]第一次，在管理控制台中的部署选项设置，如下所示： 启用 GAC 上安装并导入 GAC 已禁用。</span><span class="sxs-lookup"><span data-stu-id="ef888-127">When assemblies are deployed into [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] for the first time, the deployment options in the Administration console are set as follows: GAC on installation is enabled and GAC on import is disabled.</span></span> <span data-ttu-id="ef888-128">如果对这些设置进行更改，所做的更改仍将有效如果程序集从重新部署[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ef888-128">If you make changes to these settings, your changes will still be in effect if the assembly is redeployed from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="ef888-129">**拖放。**</span><span class="sxs-lookup"><span data-stu-id="ef888-129">**Drag and drop.**</span></span> <span data-ttu-id="ef888-130">使用 Windows 资源管理器，你可以拖放到的程序集文件\< *Windows 文件夹*> \assembly。</span><span class="sxs-lookup"><span data-stu-id="ef888-130">Using Windows Explorer, you can drag and drop the assembly file into the \<*Windows folder*>\assembly.</span></span>  
  
-   <span data-ttu-id="ef888-131">**其他方法。**</span><span class="sxs-lookup"><span data-stu-id="ef888-131">**Other methods.**</span></span> <span data-ttu-id="ef888-132">还可以选择其他工具和方法，包括使用 Windows Installer 或第三方厂商开发的工具，将程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="ef888-132">There are other tools and methods, including using Windows installer or tools created by third-party vendors, to install an assembly in the GAC.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ef888-133">为使您的应用程序正常工作，应确保 BizTalk 管理数据库和 GAC 中的程序集具有相同版本。</span><span class="sxs-lookup"><span data-stu-id="ef888-133">So that your application functions properly, ensure that the same versions of assemblies are in the BizTalk Management database as in the GAC.</span></span> <span data-ttu-id="ef888-134">如果部署程序集时并不总是将其安装到 GAC 中，GAC 和 BizTalk 管理数据库中的程序集版本可能有所不同，从而导致运行时出现处理错误。</span><span class="sxs-lookup"><span data-stu-id="ef888-134">If you do not always install an assembly in the GAC when you deploy it, you might have different versions in the GAC and the BizTalk Management database, which will cause processing errors during run time.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ef888-135">有关版本编号的信息，请参阅 Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] 提供的 .NET Framework 帮助中的“程序集版本控制”。</span><span class="sxs-lookup"><span data-stu-id="ef888-135">For information about version numbering, see "Assembly Versioning" in the .NET Framework help available from Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="ef888-136">请注意，不支持的.NET 策略文件的使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ef888-136">Note that the use of .NET policy files is not supported by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ef888-137">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ef888-137">See Also</span></span>  
 <span data-ttu-id="ef888-138">[部署到 BizTalk 应用程序从 Visual Studio BizTalk 程序集](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md) </span><span class="sxs-lookup"><span data-stu-id="ef888-138">[Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md) </span></span>  
 [<span data-ttu-id="ef888-139">了解 BizTalk 应用程序部署和管理</span><span class="sxs-lookup"><span data-stu-id="ef888-139">Understanding BizTalk Application Deployment and Management</span></span>](../core/understanding-biztalk-application-deployment-and-management.md)