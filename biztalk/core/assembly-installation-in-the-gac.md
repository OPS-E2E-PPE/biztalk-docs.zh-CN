---
title: 程序集位于 GAC 中的安装 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3b12d00c-8750-4c6d-8244-e613f955a478
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6d59825ae6ee7d9fd93111580a61ed670d86b95e
ms.sourcegitcommit: d27732e569b0897361dfaebca8352aa97bb7efe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/10/2019
ms.locfileid: "65528893"
---
# <a name="assembly-installation-in-the-gac"></a><span data-ttu-id="7836c-102">程序集安装在 GAC 中</span><span class="sxs-lookup"><span data-stu-id="7836c-102">Assembly Installation in the GAC</span></span>
<span data-ttu-id="7836c-103">每台计算机包含包含由该计算机上的一个或多个应用程序使用的程序集的全局程序集缓存 (GAC)。</span><span class="sxs-lookup"><span data-stu-id="7836c-103">Each computer contains a global assembly cache (GAC) that contains the assemblies that are used by one or more applications on that computer.</span></span> <span data-ttu-id="7836c-104">有关[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]若要在运行时处理消息，BizTalk 应用程序中包含的程序集必须位于运行应用程序的计算机的 Gac 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-104">For [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to process messages during run time, the assemblies included in a BizTalk application must be present in the GACs of the computers that run the application.</span></span>  
  
 <span data-ttu-id="7836c-105">如果你的应用程序隔离到一台服务器，然后程序集只需要该服务器上的 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-105">If your application is isolated to one server, then assemblies need only be present in the GAC of that server.</span></span> <span data-ttu-id="7836c-106">但是如果多个服务器承载应用程序，该应用程序中的程序集必须在需要在程序集中所含项目的访问权限的每台计算机的 GAC 中存在。</span><span class="sxs-lookup"><span data-stu-id="7836c-106">However if multiple servers host the application, then the assemblies in that application must exist in the GAC of each computer that requires access to the artifacts contained in the assembly.</span></span> <span data-ttu-id="7836c-107">例如，如果将 Assembly_A 部署到 Server_1，然后在服务器 2 上的主机中登记 Assembly_A，必须在 Server_2 的 GAC 中安装 Assembly_A。</span><span class="sxs-lookup"><span data-stu-id="7836c-107">For example, if you deploy Assembly_A to Server_1, and then enlist Assembly_A in a host on Server_2, Assembly_A must be installed in the GAC on Server_2.</span></span> <span data-ttu-id="7836c-108">如果不是这样，Server_2 将无法在运行时访问 Assembly_A。</span><span class="sxs-lookup"><span data-stu-id="7836c-108">If it is not, Server_2 will not be able to access Assembly_A during run time.</span></span>  
  
 <span data-ttu-id="7836c-109">具体而言，始终必须在运行该业务流程绑定到主机的实例的服务器上的 GAC 中安装包含业务流程和它们所依赖的任何程序集的程序集。</span><span class="sxs-lookup"><span data-stu-id="7836c-109">In particular, assemblies containing orchestrations and any assemblies that they depend on must always be installed in the GAC on servers that run instances of the host to which the orchestration is bound.</span></span> <span data-ttu-id="7836c-110">此外，必须在运行作为端口的适配器处理程序主机的实例的服务器上安装包含的映射和管道供某端口使用的程序集。</span><span class="sxs-lookup"><span data-stu-id="7836c-110">In addition, assemblies containing the maps and pipelines used by a port must be installed on servers that run instances of the host serving as the adapter handler for the port.</span></span>  
  
 <span data-ttu-id="7836c-111">可以指定要在部署中的程序集时在 GAC 中安装每个程序集的部署选项[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7836c-111">You can specify a deployment option for each assembly to install it in the GAC when you deploy the assembly from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="7836c-112">或者，您可以将程序集安装到 GAC 中手动。</span><span class="sxs-lookup"><span data-stu-id="7836c-112">Alternatively, you can install an assembly in the GAC manually.</span></span> <span data-ttu-id="7836c-113">此外，您可以指定部署选项部署到 BizTalk 应用程序后，将程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-113">In addition, you can specify deployment options to install the assembly in the GAC after it is deployed into a BizTalk application.</span></span>  
  
 <span data-ttu-id="7836c-114">下面汇总的工具和方法可用于将程序集安装到 GAC 中：</span><span class="sxs-lookup"><span data-stu-id="7836c-114">The following summarizes the tools and methods available to install an assembly in the GAC:</span></span>  
  
- <span data-ttu-id="7836c-115">**Microsoft Visual Studio.**</span><span class="sxs-lookup"><span data-stu-id="7836c-115">**Microsoft Visual Studio.**</span></span> <span data-ttu-id="7836c-116">正如前面提到，可以设置项目属性以程序集在 GAC 中自动部署时将安装它们，如中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-116">As previously mentioned, you can set project properties to install assemblies in the GAC automatically when you deploy them, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="7836c-117">您还可以手动安装的程序集在 GAC 中通过使用附带的 Gacutil 命令行工具[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，如中所述[如何将程序集安装到 GAC 中](../core/how-to-install-an-assembly-in-the-gac.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-117">You can also manually install assemblies in the GAC by using the Gacutil command-line tool included with [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], as described in [How to Install an Assembly in the GAC](../core/how-to-install-an-assembly-in-the-gac.md).</span></span>  
  
- <span data-ttu-id="7836c-118">**BTSTask 命令行工具。**</span><span class="sxs-lookup"><span data-stu-id="7836c-118">**BTSTask command-line tool.**</span></span> <span data-ttu-id="7836c-119">使用 BTSTask 将程序集添加到 BizTalk 应用程序时可以指定选项导入或安装包含它的应用程序时，将程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-119">When you add an assembly to a BizTalk application by using BTSTask, you can specify options to install the assembly in the GAC when the application that contains it is imported or installed.</span></span> <span data-ttu-id="7836c-120">有关详细信息，请参阅[AddResource 命令：BizTalk 程序集](../core/addresource-command-biztalk-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-120">For more information, see [AddResource Command: BizTalk Assembly](../core/addresource-command-biztalk-assembly.md).</span></span> <span data-ttu-id="7836c-121">另请参阅[AddResource 命令：.NET 程序集](../core/addresource-command-net-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-121">Also see [AddResource Command: .NET Assembly](../core/addresource-command-net-assembly.md).</span></span>  
  
- <span data-ttu-id="7836c-122">**BizTalk Server 管理控制台。**</span><span class="sxs-lookup"><span data-stu-id="7836c-122">**BizTalk Server Administration console.**</span></span> <span data-ttu-id="7836c-123">在与 BTSTask 相同的方式，当你通过使用管理控制台中，向应用程序添加程序集时可以指定选项导入或安装包含它的应用程序时，将程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-123">In the same manner as BTSTask, when you add an assembly to an application by using the Administration console, you can specify options to install an assembly in the GAC when the application that contains it is imported or installed.</span></span> <span data-ttu-id="7836c-124">有关详细信息，请参阅[如何将 BizTalk 程序集添加到应用程序](../core/how-to-add-a-biztalk-assembly-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-124">For more information, see [How to Add a BizTalk Assembly to an Application](../core/how-to-add-a-biztalk-assembly-to-an-application.md).</span></span> <span data-ttu-id="7836c-125">另请参阅[如何将.NET 程序集添加到应用程序](../core/how-to-add-a-net-assembly-to-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-125">Also see [How to Add a .NET Assembly to an Application](../core/how-to-add-a-net-assembly-to-an-application.md).</span></span>  
  
   <span data-ttu-id="7836c-126">此外，你可以配置部署选项在任何时间之后部署程序集或将其添加到应用程序，如中所述[如何修改 BizTalk 程序集的部署选项](../core/how-to-modify-the-deployment-options-of-a-biztalk-assembly.md)。</span><span class="sxs-lookup"><span data-stu-id="7836c-126">In addition, you can configure deployment options at any time after an assembly has been deployed into or added to an application, as described in [How to Modify the Deployment Options of a BizTalk Assembly](../core/how-to-modify-the-deployment-options-of-a-biztalk-assembly.md).</span></span> <span data-ttu-id="7836c-127">当将程序集部署到[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]从[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]第一次，在管理控制台中的部署选项设置，如下所示：安装上的 GAC 启用和禁用关于导入的 gac。</span><span class="sxs-lookup"><span data-stu-id="7836c-127">When assemblies are deployed into [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] for the first time, the deployment options in the Administration console are set as follows: GAC on installation is enabled and GAC on import is disabled.</span></span> <span data-ttu-id="7836c-128">如果更改这些设置时，所做的更改仍将有效从重新部署程序集如果[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7836c-128">If you make changes to these settings, your changes will still be in effect if the assembly is redeployed from [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span>  
  
- <span data-ttu-id="7836c-129">**拖放。**</span><span class="sxs-lookup"><span data-stu-id="7836c-129">**Drag and drop.**</span></span> <span data-ttu-id="7836c-130">使用 Windows 资源管理器，可以将拖放到的程序集文件\< *Windows 文件夹*\>\assembly。</span><span class="sxs-lookup"><span data-stu-id="7836c-130">Using Windows Explorer, you can drag and drop the assembly file into the \<*Windows folder*\>\assembly.</span></span>  
  
- <span data-ttu-id="7836c-131">**其他方法。**</span><span class="sxs-lookup"><span data-stu-id="7836c-131">**Other methods.**</span></span> <span data-ttu-id="7836c-132">有其他工具和方法，包括使用 Windows 安装程序或由第三方供应商创建的工具将程序集安装到 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-132">There are other tools and methods, including using Windows installer or tools created by third-party vendors, to install an assembly in the GAC.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="7836c-133">以便你的应用程序正常工作，请确保程序集的相同版本并在 BizTalk 管理数据库和 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="7836c-133">So that your application functions properly, ensure that the same versions of assemblies are in the BizTalk Management database as in the GAC.</span></span> <span data-ttu-id="7836c-134">如果您做不始终将程序集安装到 GAC 中时将其部署，您可能必须在 GAC 和 BizTalk 管理数据库，这将导致在运行时处理错误的不同版本。</span><span class="sxs-lookup"><span data-stu-id="7836c-134">If you do not always install an assembly in the GAC when you deploy it, you might have different versions in the GAC and the BizTalk Management database, which will cause processing errors during run time.</span></span>  
> 
> [!IMPORTANT]
>  <span data-ttu-id="7836c-135">有关版本编号的信息，请参阅"程序集版本控制"可从 Microsoft.NET Framework 帮助中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7836c-135">For information about version numbering, see "Assembly Versioning" in the .NET Framework help available from Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="7836c-136">请注意，不支持使用.NET 策略文件[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7836c-136">Note that the use of .NET policy files is not supported by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7836c-137">请参阅</span><span class="sxs-lookup"><span data-stu-id="7836c-137">See Also</span></span>  
 <span data-ttu-id="7836c-138">[部署 BizTalk 程序集从 Visual Studio 到 BizTalk 应用程序](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md) </span><span class="sxs-lookup"><span data-stu-id="7836c-138">[Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md) </span></span>  
 [<span data-ttu-id="7836c-139">了解 BizTalk 应用程序的部署和管理</span><span class="sxs-lookup"><span data-stu-id="7836c-139">Understanding BizTalk Application Deployment and Management</span></span>](../core/understanding-biztalk-application-deployment-and-management.md)