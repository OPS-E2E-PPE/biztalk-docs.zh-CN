---
title: 异常处理 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 00a9125c-7c7c-4d2a-ae04-c923cd89683c
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 520f4eb47fb98bf497753a8348031f7c2ab93d29
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22245925"
---
# <a name="exception-handling"></a><span data-ttu-id="a02e5-102">异常处理</span><span class="sxs-lookup"><span data-stu-id="a02e5-102">Exception Handling</span></span>
<span data-ttu-id="a02e5-103">**RuleEngine**类具有属性**CompensationHandlerInfo**，该子元素又具有两个属性： **CompensationHandler**和**UserData**.</span><span class="sxs-lookup"><span data-stu-id="a02e5-103">The **RuleEngine** class has the property **CompensationHandlerInfo**, which in turn has two properties: **CompensationHandler** and **UserData**.</span></span> <span data-ttu-id="a02e5-104">**CompensationHandler**属性属于类型**RuleEngineCompensationHandler**，和**UserData**属性属于类型**对象**.</span><span class="sxs-lookup"><span data-stu-id="a02e5-104">The **CompensationHandler** property is of type **RuleEngineCompensationHandler**, and the **UserData** property is of type **Object**.</span></span> <span data-ttu-id="a02e5-105">定义**RuleEngineCompensationHandler**如下：</span><span class="sxs-lookup"><span data-stu-id="a02e5-105">The definition for the **RuleEngineCompensationHandler** is as follows:</span></span>  
  
```  
public delegate bool RuleEngineCompensationHandler(  
   Exception ex,  
   object userData  
);  
```  
  
 <span data-ttu-id="a02e5-106">规则引擎使用者通过指定处理程序和用户数据的规则引擎**CompensationHandlerInfo**属性**RuleEngine**类。</span><span class="sxs-lookup"><span data-stu-id="a02e5-106">The rule engine consumer specifies the handler and the user data to the rule engine by using the **CompensationHandlerInfo** property of the **RuleEngine** class.</span></span> <span data-ttu-id="a02e5-107">处理程序必须具有相同的签名**RuleEngineCompensationHandler**委托。</span><span class="sxs-lookup"><span data-stu-id="a02e5-107">The handler must have the same signature as the **RuleEngineCompensationHandler** delegate.</span></span> <span data-ttu-id="a02e5-108">如果出现运行时异常，则引擎将调用处理程序并将异常和预定义用户数据作为参数传递给处理程序。</span><span class="sxs-lookup"><span data-stu-id="a02e5-108">If there is a run-time exception, the engine calls the handler and passes the exception and the predefined user data as parameters to the handler.</span></span> <span data-ttu-id="a02e5-109">如果处理程序返回`true`，则规则引擎会继续处理。</span><span class="sxs-lookup"><span data-stu-id="a02e5-109">If the handler returns `true`, then the rule engine continues processing.</span></span> <span data-ttu-id="a02e5-110">否则，规则引擎中止处理并将原始异常返回给用户。</span><span class="sxs-lookup"><span data-stu-id="a02e5-110">Otherwise, the rule engine aborts processing and returns to the user with the original exception.</span></span> <span data-ttu-id="a02e5-111">如你所见，仅当通过调用该策略，您可以使用此异常处理机制**RuleEngine.Execute**方法。</span><span class="sxs-lookup"><span data-stu-id="a02e5-111">As you can see, you can use this exception-handling mechanism only if you invoke the policy by using the **RuleEngine.Execute** method.</span></span>  
  
 <span data-ttu-id="a02e5-112">如果你使用**Policy.Execute**方法以执行策略，你将需要使用 try catch 块来捕获执行策略时生成的规则引擎对任何异常。</span><span class="sxs-lookup"><span data-stu-id="a02e5-112">If you use the **Policy.Execute** method to execute a policy, you will need to use a try-catch block to catch any exceptions generated by the rule engine while executing the policy.</span></span>  
  
 <span data-ttu-id="a02e5-113">如果你使用**调用规则**形状以执行策略，请使用**捕获异常**阻止**作用域**形状来捕捉由规则引擎在执行时引发的异常策略。</span><span class="sxs-lookup"><span data-stu-id="a02e5-113">If you use the **Call Rules** shape to execute a policy, use the **Catch Exception** block for the **Scope** shape to catch an exception raised by the rule engine while executing the policy.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a02e5-114">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a02e5-114">See Also</span></span>  
 [<span data-ttu-id="a02e5-115">如何添加 Catch 异常块</span><span class="sxs-lookup"><span data-stu-id="a02e5-115">How to Add a Catch Exception Block</span></span>](../core/how-to-add-a-catch-exception-block3.md)