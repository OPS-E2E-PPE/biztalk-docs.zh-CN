---
title: SubmitDirect （BizTalk Server 示例） |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- adapters, receive adapters
- receive adapters, examples
- examples, receive adapters
ms.assetid: 3540368b-cf46-4c83-a87b-94aec9cd1b36
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: dce1313fd851d04a490a31b602611072ade2242d
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65396057"
---
# <a name="submitdirect-biztalk-server-sample"></a><span data-ttu-id="6f6ca-102">SubmitDirect （BizTalk Server 示例）</span><span class="sxs-lookup"><span data-stu-id="6f6ca-102">SubmitDirect (BizTalk Server Sample)</span></span>
<span data-ttu-id="6f6ca-103">SubmitDirect 示例演示如何以编程方式提交单向和请求/响应消息，向 Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]从。基于 NET 的应用程序。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-103">The SubmitDirect sample demonstrates how to programmatically submit one-way and request/response messages to Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] from .NET-based applications.</span></span> <span data-ttu-id="6f6ca-104">此示例演示如何使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Api，可用于适配器。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-104">The sample demonstrates the use of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] APIs for adapters.</span></span> <span data-ttu-id="6f6ca-105">它还提供了一个接收适配器，名为 Submit 的可用于将消息提交给[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-105">It also provides a receive adapter, named Submit, that can be used to submit messages to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="6f6ca-106">先决条件</span><span class="sxs-lookup"><span data-stu-id="6f6ca-106">Prerequisites</span></span>  
 <span data-ttu-id="6f6ca-107">运行此示例之前，请确保为属于 BizTalk Isolated Host Users 组的用户身份登录。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-107">Before running this sample, ensure you are logged on as a user who belongs to BizTalk Isolated Host Users group.</span></span>  

## <a name="what-this-sample-does"></a><span data-ttu-id="6f6ca-108">本示例的用途</span><span class="sxs-lookup"><span data-stu-id="6f6ca-108">What This Sample Does</span></span>  
 <span data-ttu-id="6f6ca-109">此示例演示如何执行与 BizTalk 适配器相关的各种任务。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-109">This sample shows how to perform various tasks related to BizTalk adapters.</span></span> <span data-ttu-id="6f6ca-110">具体而言，它显示如何：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-110">Specifically, it shows how to:</span></span>  

- <span data-ttu-id="6f6ca-111">使用外部运行的独立适配器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]过程。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-111">Work with isolated adapters that run outside of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process.</span></span> <span data-ttu-id="6f6ca-112">Submit 适配器是一个独立的适配器，因为外部创建的进程[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]（您启动它与.NET 应用程序） 的过程。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-112">The Submit adapter is an isolated adapter because it is created by a process external to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process (you start it as a .NET application).</span></span>  

- <span data-ttu-id="6f6ca-113">提交到消息批[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-113">Submit batches of messages to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-114">Submit 适配器使用批消息提交功能同时提交多条消息。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-114">The Submit adapter uses batch message submittal functionality to submit several messages at once.</span></span>  

- <span data-ttu-id="6f6ca-115">将消息以同步方式使用请求/响应范例，以及使用单向范例异步提交。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-115">Submit messages synchronously using a request/response paradigm, as well as asynchronously using a one-way paradigm.</span></span>  

- <span data-ttu-id="6f6ca-116">注册适配器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-116">Register an adapter with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-117">此示例演示了如何注册适配器，并提供注册可执行文件，可自动注册适配器。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-117">This sample shows how to register an adapter and provides a registration executable that automates the registration of an adapter.</span></span>  

  <span data-ttu-id="6f6ca-118">此示例实际上有两个示例中，如下所示：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-118">This sample is actually two samples in one, as follows:</span></span>  

- <span data-ttu-id="6f6ca-119">**单向消息批的提交。**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-119">**Submission of a batch of one-way messages.**</span></span> <span data-ttu-id="6f6ca-120">控制台应用程序 SubmitMessages.exe 获取从其命令行字符串并将作为单独的消息为每个[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-120">The console application SubmitMessages.exe takes the strings from its command line and submits each one as a separate message to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-121">每个提交的接收位置处拾取消息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、 通过直通接收和发送管道发送，然后写入到文本文件。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-121">Each of these submitted messages is picked up at the receive location by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], sent through pass-through receive and send pipelines, and then written to a text file.</span></span>  

- <span data-ttu-id="6f6ca-122">**提交请求/响应消息。**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-122">**Submission of request/response message.**</span></span> <span data-ttu-id="6f6ca-123">控制台应用程序 SubmitRequest.exe 获取在其命令行上指定的.xml 文件，并将其提交到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-123">The console application SubmitRequest.exe takes the .xml file specified on its command line and submits it to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-124">此.xml 文件的架构定义包含两个整数字段的元素。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-124">The schema of this .xml file defines elements that contain two integer fields.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="6f6ca-125">提取的.xml 文件，并与业务流程 （使用一个请求/响应端口） 对其进行处理。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-125">picks up the .xml file and processes it with an orchestration (with one request/response port).</span></span> <span data-ttu-id="6f6ca-126">它使用映射来生成 XML 响应消息返回一个整数，是在请求中的两个整数的乘积。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-126">It uses a map to produce an XML response message that returns an integer that is the product of the two integers in the request.</span></span> <span data-ttu-id="6f6ca-127">当控制台应用程序收到响应时，它将显示结果。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-127">When the console application receives the response, it displays the result.</span></span>  

## <a name="where-to-find-this-sample"></a><span data-ttu-id="6f6ca-128">本示例所在的位置</span><span class="sxs-lookup"><span data-stu-id="6f6ca-128">Where to Find This Sample</span></span>  
 <span data-ttu-id="6f6ca-129">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\\</span><span class="sxs-lookup"><span data-stu-id="6f6ca-129">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\\</span></span>  

 <span data-ttu-id="6f6ca-130">下表列出了在此示例中的文件，并描述其用途。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-130">The following table lists the files in this sample and describes their purpose.</span></span>  


|                                                                                                                     <span data-ttu-id="6f6ca-131">文件</span><span class="sxs-lookup"><span data-stu-id="6f6ca-131">File(s)</span></span>                                                                                                                      |                                                                                              <span data-ttu-id="6f6ca-132">Description</span><span class="sxs-lookup"><span data-stu-id="6f6ca-132">Description</span></span>                                                                                               |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                   <span data-ttu-id="6f6ca-133">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="6f6ca-133">Cleanup.bat</span></span>                                                                                                                    |    <span data-ttu-id="6f6ca-134">取消部署程序集，并将其从全局程序集缓存 (GAC) 中;删除发送和接收端口;根据需要删除 Microsoft Internet 信息服务 (IIS) 虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-134">Undeploys assemblies and removes them from the global assembly cache (GAC); removes send and receive ports; removes Microsoft Internet Information Services (IIS) virtual directories as needed.</span></span>    |
|                                                                                                                    <span data-ttu-id="6f6ca-135">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="6f6ca-135">Setup.bat</span></span>                                                                                                                     |                                                                                  <span data-ttu-id="6f6ca-136">生成并初始化本示例。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-136">Builds and initializes this sample.</span></span>                                                                                   |
|                                                                                                                 <span data-ttu-id="6f6ca-137">SubmitDirect.sln</span><span class="sxs-lookup"><span data-stu-id="6f6ca-137">SubmitDirect.sln</span></span>                                                                                                                 |                                <span data-ttu-id="6f6ca-138">包括 ProcessRequest 文件夹和其他文件夹中的 Microsoft Visual C# 项目中的 BizTalk 项目的解决方案文件。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-138">Solution file that includes the BizTalk project in the ProcessRequest folder and the Microsoft Visual C# projects in the other folders.</span></span>                                 |
|                                                                                               <span data-ttu-id="6f6ca-139">SubmitMessagesBinding.xml, SubmitRequestBinding.xml</span><span class="sxs-lookup"><span data-stu-id="6f6ca-139">SubmitMessagesBinding.xml, SubmitRequestBinding.xml</span></span>                                                                                                |                                                                             <span data-ttu-id="6f6ca-140">用于如端口绑定之类的自动化设置。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-140">Used for automated setup such as port binding.</span></span>                                                                             |
|                                                              <span data-ttu-id="6f6ca-141">\ProcessRequest 文件夹的位置：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-141">In the \ProcessRequest folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-142">DocIn.xsd、 DocOut.xsd、 Multiplier.odx、 Multiply.btm、 ProcessRequest.btproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-142">DocIn.xsd, DocOut.xsd, Multiplier.odx, Multiply.btm, ProcessRequest.btproj</span></span>                                                               |                                               <span data-ttu-id="6f6ca-143">提供了在请求/响应方案中执行整数乘法的 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-143">Provides a BizTalk project that performs the multiplication of integers in the request/response scenario.</span></span>                                                |
|                                                                       <span data-ttu-id="6f6ca-144">\SubmitMessages 文件夹的位置：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-144">In the \SubmitMessages folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-145">AssemblyInfo.cs、 SubmitMessages.cs、 SubmitMessages.csproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-145">AssemblyInfo.cs, SubmitMessages.cs, SubmitMessages.csproj</span></span>                                                                       |                                <span data-ttu-id="6f6ca-146">提供了用于将其命令行字符串参数传递作为单独的消息的批处理的控制台应用程序的 Visual C# 项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-146">Provides a Visual C# project for the console application that passes its command line string parameters as a batch of separate messages.</span></span>                                |
|                                                                <span data-ttu-id="6f6ca-147">\SubmitRequest 文件夹的位置：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-147">In the \SubmitRequest folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-148">AssemblyInfo.cs、 DocInstance.xml、 SubmitRequest.cs、 SubmitRequest.csproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-148">AssemblyInfo.cs, DocInstance.xml, SubmitRequest.cs, SubmitRequest.csproj</span></span>                                                                |                                 <span data-ttu-id="6f6ca-149">传递一个包含两个整数相乘的.xml 文件 (DocInstance.xml) 的控制台应用程序提供了一个 C# 项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-149">Provides a C# project for the console application that passes an .xml file (DocInstance.xml) containing two integers to be multiplied.</span></span>                                 |
| <span data-ttu-id="6f6ca-150">在 \TransportProxyUtils 文件夹中：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-150">In the \TransportProxyUtils folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-151">AssemblyInfo.cs、 MessageHelper.cs、 MessagingAPIInterface.cs、 MessagingAPIs.cs、 ResponseCallBack.cs、 TpBatchAsyncCallback.cs、 TpBatchAsyncResult.cs、 TpBatchStatus.cs、 TransportProxyUtils.csproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-151">AssemblyInfo.cs, MessageHelper.cs, MessagingAPIInterface.cs, MessagingAPIs.cs, ResponseCallBack.cs, TpBatchAsyncCallback.cs, TpBatchAsyncResult.cs, TpBatchStatus.cs, TransportProxyUtils.csproj</span></span> | <span data-ttu-id="6f6ca-152">提供了用于实现方法的同步和异步消息提交和用于批处理和单个请求消息提交 Submit 适配器的运行时部分的 C# 项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-152">Provides a C# project for the run-time portion of the Submit adapter that implements methods for synchronous and asynchronous message submission, and for batch and single request message submission.</span></span> |
|                                                              <span data-ttu-id="6f6ca-153">在 \TransportProxyUtilsReg 文件夹中：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-153">In the \TransportProxyUtilsReg folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-154">AssemblyInfo.cs、 RegisterAdapter.cs，TransportProxyUtilsReg.csproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-154">AssemblyInfo.cs, RegisterAdapter.cs, TransportProxyUtilsReg.csproj</span></span>                                                               |           <span data-ttu-id="6f6ca-155">提供了一个演示了可用于注册适配器使用的代码的 Visual C# 项目[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-155">Provides a Visual C# project that demonstrates code that you can use to register adapters with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>           |
|                                                           <span data-ttu-id="6f6ca-156">在 \TransportProxyUtilsUI 文件夹中：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-156">In the \TransportProxyUtilsUI folder:</span></span><br /><br /> <span data-ttu-id="6f6ca-157">AssemblyInfo.cs、 TransportProxyUtilsMgmt.cs，TransportProxyUtilsUI.csproj</span><span class="sxs-lookup"><span data-stu-id="6f6ca-157">AssemblyInfo.cs, TransportProxyUtilsMgmt.cs, TransportProxyUtilsUI.csproj</span></span>                                                            |                                                           <span data-ttu-id="6f6ca-158">提供了用于 Submit 适配器的用户界面部分的 Visual C# 项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-158">Provides a Visual C# project for the user interface portion of the Submit adapter.</span></span>                                                           |

## <a name="building-and-initializing-the-sample"></a><span data-ttu-id="6f6ca-159">生成并初始化示例</span><span class="sxs-lookup"><span data-stu-id="6f6ca-159">Building and Initializing the Sample</span></span>  

#### <a name="to-build-and-initialize-the-submitdirect-sample"></a><span data-ttu-id="6f6ca-160">若要生成并初始化 SubmitDirect 示例</span><span class="sxs-lookup"><span data-stu-id="6f6ca-160">To build and initialize the SubmitDirect sample</span></span>  

1. <span data-ttu-id="6f6ca-161">在命令窗口中，导航到以下文件夹：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-161">In a command window, navigate to the following folder:</span></span>  

    <span data-ttu-id="6f6ca-162">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect</span><span class="sxs-lookup"><span data-stu-id="6f6ca-162">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect</span></span>  

2. <span data-ttu-id="6f6ca-163">运行文件 Setup.bat，以执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-163">Run the file Setup.bat, which performs the following actions:</span></span>  

   - <span data-ttu-id="6f6ca-164">创建此示例的批处理提交部分的以下输出文件夹。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-164">Creates the following output folder for the batch submission portion of this sample.</span></span>  

      <span data-ttu-id="6f6ca-165">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\Out</span><span class="sxs-lookup"><span data-stu-id="6f6ca-165">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\Out</span></span>  

   - <span data-ttu-id="6f6ca-166">编译的各种[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]本示例项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-166">Compiles the various [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] projects for this sample.</span></span>  

   - <span data-ttu-id="6f6ca-167">注册 Submit 适配器使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-167">Registers the Submit adapter with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  

   - <span data-ttu-id="6f6ca-168">创建并绑定[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收位置和发送端口和接收端口。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-168">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive locations, and the send and receive ports.</span></span>  

     > [!NOTE]
     >  <span data-ttu-id="6f6ca-169">此示例将显示以下警告时创建并绑定端口：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-169">This sample displays the following warnings when creating and binding the ports:</span></span>  
     >   
     >  `Warning: Receive handler not specified for receive location "SubmitDirectRL"; updating with first receive handler with matching transport type.`  
     >   
     >  `Warning: Host not specified for orchestration "Microsoft.Samples.BizTalk.ProcessRequest.Multiplier"; updating with first available host.`  
     >   
     >  <span data-ttu-id="6f6ca-170">您可以放心地忽略这些警告。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-170">You can safely ignore these warnings.</span></span> <span data-ttu-id="6f6ca-171">（若要应对可能的命名差异在用户安装中，主机名和接收处理程序中已省略绑定文件。）</span><span class="sxs-lookup"><span data-stu-id="6f6ca-171">(To accommodate for possible naming differences in user installations, the host name and receive handler have been omitted from the binding file.)</span></span>  

   - <span data-ttu-id="6f6ca-172">启用接收位置，并启动发送端口和业务流程。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-172">Enables the receive locations, and starts the send ports and orchestration.</span></span>  

     > [!NOTE]
     >  <span data-ttu-id="6f6ca-173">您应确认[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]未报告任何错误在生成和初始化过程中尝试运行此示例之前。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-173">You should confirm that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] did not report any errors during the build and initialization process before attempting to run this sample.</span></span>  
     > 
     > [!NOTE]
     >  <span data-ttu-id="6f6ca-174">如果你选择打开并生成此示例中的项目，而无需运行 Setup.bat 文件，必须首先创建强名称密钥对使用.NET Framework 强名称实用工具 (sn.exe)。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-174">If you choose to open and build the projects in this sample without running the file Setup.bat, you must first create a strong name key pair using the .NET Framework Strong Name Utility (sn.exe).</span></span> <span data-ttu-id="6f6ca-175">使用此密钥对生成程序集进行签名。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-175">Use this key pair to sign the resulting assemblies.</span></span>  
     > 
     > [!NOTE]
     >  <span data-ttu-id="6f6ca-176">若要撤消 Setup.bat 所做的更改，请运行 Cleanup.bat。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-176">To undo changes made by Setup.bat, run Cleanup.bat.</span></span> <span data-ttu-id="6f6ca-177">必须运行 Setup.bat 前运行 Cleanup.bat 时间。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-177">You must run Cleanup.bat before running Setup.bat a second time.</span></span>  

## <a name="running-the-sample"></a><span data-ttu-id="6f6ca-178">运行示例</span><span class="sxs-lookup"><span data-stu-id="6f6ca-178">Running the Sample</span></span>  
 <span data-ttu-id="6f6ca-179">由于此示例使用文件适配器，必须在运行 BizTalk 主机 (BizTalkServerApplication)。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-179">Because this sample uses File adapter, the BizTalk host (BizTalkServerApplication) must be running.</span></span> <span data-ttu-id="6f6ca-180">使用以下过程运行 SubmitDirect 示例。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-180">Use the following procedures to run the SubmitDirect sample.</span></span>  

#### <a name="to-run-the-batch-submission-portion-of-the-submitdirect-sample"></a><span data-ttu-id="6f6ca-181">若要运行 SubmitDirect 示例的批处理提交部分</span><span class="sxs-lookup"><span data-stu-id="6f6ca-181">To run the batch submission portion of the SubmitDirect sample</span></span>  

1.  <span data-ttu-id="6f6ca-182">在命令窗口中，导航到以下文件夹：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-182">In a command window, navigate to the following folder:</span></span>  

     <span data-ttu-id="6f6ca-183">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\SubmitMessages\bin\Debug</span><span class="sxs-lookup"><span data-stu-id="6f6ca-183">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\SubmitMessages\bin\Debug</span></span>  

2.  <span data-ttu-id="6f6ca-184">运行文件 SubmitMessages.exe，在命令行上传递多个字符串。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-184">Run the file SubmitMessages.exe, passing multiple strings on the command line.</span></span>  

     <span data-ttu-id="6f6ca-185">例如：SubmitMessages msg1 msg2 msg3</span><span class="sxs-lookup"><span data-stu-id="6f6ca-185">Example: SubmitMessages msg1 msg2 msg3</span></span>  

3.  <span data-ttu-id="6f6ca-186">查看在 Out 输出文件夹中创建的多个文本文件。这些文件包含传递的命令行中，每个文件的其中一个字符串。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-186">Observe the multiple text files created in the output folder Out. These files contain the strings passed on the command line, one per file.</span></span>  

#### <a name="to-run-the-requestresponse-portion-of-the-submitdirect-sample"></a><span data-ttu-id="6f6ca-187">若要运行的请求/响应一部分 SubmitDirect 示例</span><span class="sxs-lookup"><span data-stu-id="6f6ca-187">To run the request/response portion of the SubmitDirect sample</span></span>  

1.  <span data-ttu-id="6f6ca-188">在命令窗口中，导航到以下文件夹：</span><span class="sxs-lookup"><span data-stu-id="6f6ca-188">In a command window, navigate to the following folder:</span></span>  

     <span data-ttu-id="6f6ca-189">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\SubmitRequest\bin\Debug</span><span class="sxs-lookup"><span data-stu-id="6f6ca-189">\<*Samples Path*\>\AdaptersDevelopment\SubmitDirect\SubmitRequest\bin\Debug</span></span>  

2.  <span data-ttu-id="6f6ca-190">运行文件 SubmitRequest.exe，在命令行上传递相应的.xml 文件的名称。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-190">Run the file SubmitRequest.exe, passing an appropriate .xml file name on the command line.</span></span>  

     <span data-ttu-id="6f6ca-191">例如：SubmitRequest ..\\..\DocInstance.xml</span><span class="sxs-lookup"><span data-stu-id="6f6ca-191">Example: SubmitRequest ..\\..\DocInstance.xml</span></span>  

3.  <span data-ttu-id="6f6ca-192">观察包含乘法运算，向控制台显示的结果的响应 XML 消息。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-192">Observe the response XML message, containing the result of the multiplication operation, displayed to the console.</span></span>  

## <a name="comments"></a><span data-ttu-id="6f6ca-193">注释</span><span class="sxs-lookup"><span data-stu-id="6f6ca-193">Comments</span></span>  
 <span data-ttu-id="6f6ca-194">其他应用程序中，可以使用 Submit 适配器。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-194">You can use the Submit adapter in other applications.</span></span> <span data-ttu-id="6f6ca-195">可以从任何使用它。基于 NET 的代码，以将消息提交给你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]以编程方式。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-195">You can use it from any .NET-based code to submit messages to your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] programmatically.</span></span> <span data-ttu-id="6f6ca-196">若要使用此适配器与您的代码，使用以下过程。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-196">To use this adapter with your code, use the following procedure.</span></span>  

#### <a name="to-use-the-sample-adapter-with-your-code"></a><span data-ttu-id="6f6ca-197">若要使用与您的代码示例适配器</span><span class="sxs-lookup"><span data-stu-id="6f6ca-197">To use the sample adapter with your code</span></span>  

1. <span data-ttu-id="6f6ca-198">注册 Submit 适配器与你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-198">Register the Submit adapter with your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-199">如果您运行此示例随附的 Setup.bat 文件，适配器应已注册并可供使用。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-199">If you have run the file Setup.bat provided with this sample, the adapter should be registered and ready to use.</span></span> <span data-ttu-id="6f6ca-200">否则，您可以通过生成项目 TransportProxyUtils.csproj、 TransportProxyUtilsUI.csproj 和 TransportProxyUtilsReg.csproj，然后运行可执行文件生成的后一种的项目中，RegisterAdapter.exe 注册它。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-200">Otherwise, you can register it by building the projects TransportProxyUtils.csproj, TransportProxyUtilsUI.csproj, and TransportProxyUtilsReg.csproj, and then running the executable produced by the latter project, RegisterAdapter.exe.</span></span>  

   > [!IMPORTANT]
   >  <span data-ttu-id="6f6ca-201">如果在 64 位计算机上安装 BizTalk，将 HKEY_CLASSES_ROOT\CLSID\ 注册表项的所有实例都更改为 hkey_classes_root\wow6432node\clsid \ 中**RegisterAdapter.cs**文件。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-201">If you install BizTalk on a 64 bit machine, change all instances of the HKEY_CLASSES_ROOT\CLSID\ registry entry to HKEY_CLASSES_ROOT\Wow6432Node\CLSID\ in the **RegisterAdapter.cs** file.</span></span>  

2. <span data-ttu-id="6f6ca-202">与使用 Submit 适配器的接收位置创建一个接收端口。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-202">Create a receive port with a receive location that uses the Submit adapter.</span></span> <span data-ttu-id="6f6ca-203">指定接收位置的地址。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-203">Specify the address of the receive location.</span></span> <span data-ttu-id="6f6ca-204">地址可以是任何字符串都使用此适配器的接收位置中是唯一的。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-204">The address can be any string that is unique within the receive locations that use this adapter.</span></span>  

3. <span data-ttu-id="6f6ca-205">引用程序集 Microsoft.BizTalk.SDKSamples.AdaptersDevelopment.TransportProxyUtils.dll 中你[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]项目。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-205">Reference the assembly Microsoft.BizTalk.SDKSamples.AdaptersDevelopment.TransportProxyUtils.dll in your [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] project.</span></span>  

4. <span data-ttu-id="6f6ca-206">将消息提交给你[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用一个或多个以下方法提供的此程序集。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-206">Submit messages to your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] by using one or more of the following methods provided by this assembly.</span></span>  


   |                                                <span data-ttu-id="6f6ca-207">方法</span><span class="sxs-lookup"><span data-stu-id="6f6ca-207">Method(s)</span></span>                                                |                                                                                                                                                                                       <span data-ttu-id="6f6ca-208">Description</span><span class="sxs-lookup"><span data-stu-id="6f6ca-208">Description</span></span>                                                                                                                                                                                       |
   |---------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |       <span data-ttu-id="6f6ca-209">**SubmitMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-209">**SubmitMessage()**</span></span><br /><br /> <span data-ttu-id="6f6ca-210">**BeginSubmitMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-210">**BeginSubmitMessage()**</span></span><br /><br /> <span data-ttu-id="6f6ca-211">**EndSubmitMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-211">**EndSubmitMessage()**</span></span>       |              <span data-ttu-id="6f6ca-212">同步和异步方法以单向消息提交到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-212">Synchronous and asynchronous methods to submit a one-way message to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-213">必须在消息上下文设置接收位置提交消息时的地址。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-213">The address of the receive location where the message is submitted must be set on the message context.</span></span><br /><br /> <span data-ttu-id="6f6ca-214">返回一个布尔值，该值提交 （成功/失败） 的状态。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-214">A Boolean value indicating the status of submission (success/failure) is returned.</span></span>              |
   |     <span data-ttu-id="6f6ca-215">**SubmitMessages()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-215">**SubmitMessages()**</span></span><br /><br /> <span data-ttu-id="6f6ca-216">**BeginSubmitMessages()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-216">**BeginSubmitMessages()**</span></span><br /><br /> <span data-ttu-id="6f6ca-217">**EndSubmitMessages()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-217">**EndSubmitMessages()**</span></span>      | <span data-ttu-id="6f6ca-218">同步和异步方法的单向消息数组提交[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-218">Synchronous and asynchronous methods to submit an array of one-way messages to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-219">应在消息上下文上设置位置提交消息的接收位置的地址。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-219">The addresses of the receive locations where the messages are submitted should be set on the context of the messages.</span></span><br /><br /> <span data-ttu-id="6f6ca-220">返回一个布尔值，该值提交 （成功/失败） 的状态。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-220">A Boolean value indicating the status of submission (success/failure) is returned.</span></span> |
   | <span data-ttu-id="6f6ca-221">**SubmitSyncMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-221">**SubmitSyncMessage()**</span></span><br /><br /> <span data-ttu-id="6f6ca-222">**BeginSubmitSyncMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-222">**BeginSubmitSyncMessage()**</span></span><br /><br /> <span data-ttu-id="6f6ca-223">**EndSubmitSyncMessage()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-223">**EndSubmitSyncMessage()**</span></span> |                                     <span data-ttu-id="6f6ca-224">同步和异步方法来提交请求消息到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-224">Synchronous and asynchronous methods to submit a request message to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6f6ca-225">应在消息上下文设置接收位置提交消息时的地址。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-225">The address of the receive location where the message is submitted should be set on the message context.</span></span><br /><br /> <span data-ttu-id="6f6ca-226">返回响应消息。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-226">The response message is returned.</span></span>                                      |
   |                                      <span data-ttu-id="6f6ca-227">**CreateMessageFromString()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-227">**CreateMessageFromString()**</span></span>                                      |                                                                     <span data-ttu-id="6f6ca-228">创建[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]从字符串的消息对象和消息上下文中设定接收位置地址属性。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-228">Creates a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] message object from a string and sets the receive location address property on the message context.</span></span><br /><br /> <span data-ttu-id="6f6ca-229">返回一个 BizTalk 消息对象。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-229">Returns a BizTalk message object.</span></span>                                                                      |
   |                                      <span data-ttu-id="6f6ca-230">**CreateMessageFromStream()**</span><span class="sxs-lookup"><span data-stu-id="6f6ca-230">**CreateMessageFromStream()**</span></span>                                      |                                <span data-ttu-id="6f6ca-231">创建[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]从流的消息对象和消息上下文中设定接收位置地址属性。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-231">Creates a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] message object from a stream and sets the receive location address property on the message context.</span></span><br /><br /> <span data-ttu-id="6f6ca-232">返回[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]消息对象。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-232">Returns a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] message object.</span></span>                                |

    <span data-ttu-id="6f6ca-233">有关参数和这些方法的返回类型的详细信息，请参阅 MessagingAPIInterface.cs TransportProxyUtils 文件夹中的文件。</span><span class="sxs-lookup"><span data-stu-id="6f6ca-233">For details about the parameter and return types for these methods, see the file MessagingAPIInterface.cs in the TransportProxyUtils folder.</span></span>  

## <a name="see-also"></a><span data-ttu-id="6f6ca-234">请参阅</span><span class="sxs-lookup"><span data-stu-id="6f6ca-234">See Also</span></span>  
 <span data-ttu-id="6f6ca-235">[适配器示例-开发](../core/adapter-samples-development.md) </span><span class="sxs-lookup"><span data-stu-id="6f6ca-235">[Adapter Samples - Development](../core/adapter-samples-development.md) </span></span>  
 [<span data-ttu-id="6f6ca-236">注册适配器</span><span class="sxs-lookup"><span data-stu-id="6f6ca-236">Registering an Adapter</span></span>](../core/registering-an-adapter.md)