---
title: "使用独立的 WCF 发布 WCF 服务接收适配器 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- receive adapters, WCF services
- publishing, WCF services
- WCF services, receive adapters
- WCF services, publishing
ms.assetid: 62ebf373-075c-4c98-8130-ac2cf06e4a70
caps.latest.revision: "18"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2c5305560713771e7279eb013d26ff267aa21a74
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="publishing-wcf-services-with-the-isolated-wcf-receive-adapters"></a><span data-ttu-id="0441d-102">通过独立 WCF 接收适配器发布 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0441d-102">Publishing WCF Services with the Isolated WCF Receive Adapters</span></span>
<span data-ttu-id="0441d-103">BizTalk Windows Communication Foundation (WCF) 适配器允许[!INCLUDE[btsCoName](../includes/btsconame-md.md)][!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]与基于 WCF 的应用程序进行通信。</span><span class="sxs-lookup"><span data-stu-id="0441d-103">The BizTalk Windows Communication Foundation (WCF) adapters allow [!INCLUDE[btsCoName](../includes/btsconame-md.md)][!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to communicate with WCF-based applications.</span></span> <span data-ttu-id="0441d-104">BizTalk WCF 适配器包含七个物理适配器。</span><span class="sxs-lookup"><span data-stu-id="0441d-104">The BizTalk WCF adapters include seven physical adapters.</span></span> <span data-ttu-id="0441d-105">除 WCF CustomIsolated 适配器之外，每个适配器包含发送和接收适配器。</span><span class="sxs-lookup"><span data-stu-id="0441d-105">Each adapter, except the WCF-CustomIsolated adapter, consists of send and receive adapters.</span></span>  
  
 <span data-ttu-id="0441d-106">WCF 接收适配器提供以下两种类型的适配器：独立 WCF 适配器和进程内 WCF 适配器。</span><span class="sxs-lookup"><span data-stu-id="0441d-106">The WCF receive adapters are provided in two types of adapters: isolated WCF adapters and in-process WCF adapters.</span></span> <span data-ttu-id="0441d-107">尽管由进程内适配器[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，隔离的适配器未实例化由[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="0441d-107">While in-process adapters are managed by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], isolated adapters are not instantiated by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="0441d-108">而是在另一个进程中实例化并以此进程为宿主。</span><span class="sxs-lookup"><span data-stu-id="0441d-108">Rather, they are instantiated and hosted in another process.</span></span> <span data-ttu-id="0441d-109">独立 WCF 适配器承载在运行于 Internet 信息服务 (IIS) 中的 Web 应用程序中。</span><span class="sxs-lookup"><span data-stu-id="0441d-109">The isolated WCF adapters are hosted in Web applications running in Internet Information Services (IIS).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0441d-110">在使用独立 WCF 适配器发布 WCF 服务之前，您应当了解如何在 Internet 信息服务 (IIS) 中承载 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0441d-110">Before you publish a WCF service with the isolated WCF adapters, you should have an understanding of how to host WCF services in Internet Information Services (IIS).</span></span> <span data-ttu-id="0441d-111">有关在 IIS 中承载的 WCF 服务的详细信息，请参阅"在 IIS 上承载"网址[http://go.microsoft.com/fwlink/?LinkID=75700](http://go.microsoft.com/fwlink/?LinkID=75700)。</span><span class="sxs-lookup"><span data-stu-id="0441d-111">For more information about the WCF services that are hosted in IIS, see "Hosting in IIS" at [http://go.microsoft.com/fwlink/?LinkID=75700](http://go.microsoft.com/fwlink/?LinkID=75700).</span></span>  
  
 <span data-ttu-id="0441d-112">**版本的 IIS**</span><span class="sxs-lookup"><span data-stu-id="0441d-112">**Versions of IIS**</span></span>  
  
 <span data-ttu-id="0441d-113">三个独立 WCF 适配器（WCF-CustomIsolated、WCF-BasicHttp 和 WCF-WSHttp）可以承载在下列操作系统中如下版本的 IIS 上：</span><span class="sxs-lookup"><span data-stu-id="0441d-113">The three isolated WCF adapters (WCF-CustomIsolated, WCF-BasicHttp, and WCF-WSHttp) can be hosted on the following versions of IIS on the following operating systems:</span></span>  
  
-   <span data-ttu-id="0441d-114">**在 Windows Vista 和 Windows Server 2008 中的 IIS 7.0/7.5。**</span><span class="sxs-lookup"><span data-stu-id="0441d-114">**IIS 7.0/7.5 on Windows Vista and Windows Server 2008.**</span></span> <span data-ttu-id="0441d-115">IIS 7.0/7.5 提供 IIS 6.0 相同的高级的进程模型。</span><span class="sxs-lookup"><span data-stu-id="0441d-115">IIS 7.0/7.5 provides the same advanced process model as IIS 6.0.</span></span> <span data-ttu-id="0441d-116">发布的 BizTalk WCF 服务必须在 IIS 7.0/7.5 的 ASP.NET 兼容模式下运行。</span><span class="sxs-lookup"><span data-stu-id="0441d-116">The published BizTalk WCF services must run in ASP.NET Compatibility Mode of IIS 7.0/7.5.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0441d-117">即使 IIS 7.0/7.5 中的 Windows 进程激活服务 (WAS) 允许通过 HTTP 以外的协议进行激活和网络通信，独立 WCF 适配器也仅支持 HTTP 传输。</span><span class="sxs-lookup"><span data-stu-id="0441d-117">Even though Windows Process Activation Service (WAS) in IIS 7.0/7.5 allows activation and network communication over protocols other than HTTP, the isolated WCF adapters support only the HTTP transport.</span></span>  
  
 <span data-ttu-id="0441d-118">**独立的 WCF 适配器**</span><span class="sxs-lookup"><span data-stu-id="0441d-118">**Isolated WCF adapters**</span></span>  
  
 <span data-ttu-id="0441d-119">下面是独立 WCF 适配器的列表：</span><span class="sxs-lookup"><span data-stu-id="0441d-119">The following is the list of the isolated WCF adapters:</span></span>  
  
-   <span data-ttu-id="0441d-120">**WCF WSHttp 适配器**。</span><span class="sxs-lookup"><span data-stu-id="0441d-120">**WCF-WSHttp adapter**.</span></span> <span data-ttu-id="0441d-121">通过 HTTP 传输提供对于 WS-* 标准的支持。</span><span class="sxs-lookup"><span data-stu-id="0441d-121">Provides the WS-* standards support over the HTTP transport.</span></span> <span data-ttu-id="0441d-122">WCF-WSHttp 适配器实现了下列规范：WS-Transaction（用来在外部应用程序和 MessageBox 数据库之间进行事务性交互）和 WS-Security（用来实现消息安全和身份验证）。</span><span class="sxs-lookup"><span data-stu-id="0441d-122">The WCF-WSHttp adapter implements the following specifications: WS-Transaction for the transactional interactions between external applications and the MessageBox database, and WS-Security for message security and authentication.</span></span> <span data-ttu-id="0441d-123">传输协议是 HTTP 或 HTTPS，消息编码是文本或消息传输优化机制 (MTOM) 编码。</span><span class="sxs-lookup"><span data-stu-id="0441d-123">The transport is HTTP or HTTPS, and message encoding is a Text or Message Transmission Optimization Mechanism (MTOM) encoding.</span></span>  
  
-   <span data-ttu-id="0441d-124">**WCF BasicHttp 适配器**。</span><span class="sxs-lookup"><span data-stu-id="0441d-124">**WCF-BasicHttp adapter**.</span></span> <span data-ttu-id="0441d-125">与基于 ASMX 的 Web Services 和客户端以及符合 WS-I 基本配置文件 1.1 的其他服务进行通信。</span><span class="sxs-lookup"><span data-stu-id="0441d-125">Communicates with ASMX-based Web services and clients and with other services that conform to the WS-I Basic Profile 1.1.</span></span> <span data-ttu-id="0441d-126">传输采用 HTTP 或 HTTPS，并且消息编码采用文本或 MTOM 编码。</span><span class="sxs-lookup"><span data-stu-id="0441d-126">The transport is HTTP or HTTPS, and message encoding is a Text or MTOM encoding.</span></span>  
  
-   <span data-ttu-id="0441d-127">**WCF CustomIsolated 适配器**。</span><span class="sxs-lookup"><span data-stu-id="0441d-127">**WCF-CustomIsolated adapter**.</span></span> <span data-ttu-id="0441d-128">允许通过 HTTP 传输使用 WCF 扩展功能。</span><span class="sxs-lookup"><span data-stu-id="0441d-128">Enables the use of WCF extensibility features over the HTTP transport.</span></span> <span data-ttu-id="0441d-129">使用该适配器，可以为运行于独立主机上的接收位置选择和配置 WCF 绑定和行为信息。</span><span class="sxs-lookup"><span data-stu-id="0441d-129">The adapter allows you to select and configure a WCF binding and the behavior information for the receive location running in an isolated host.</span></span>  
  
 <span data-ttu-id="0441d-130">**具有独立的 WCF 适配器的 WCF 服务发布**</span><span class="sxs-lookup"><span data-stu-id="0441d-130">**Publishing WCF services with the isolated WCF adapters**</span></span>  
  
 <span data-ttu-id="0441d-131">若要通过独立 WCF 接收适配器发布 WCF 服务，必须使用 BizTalk WCF 服务发布向导来创建用来承载独立 WCF 适配器的 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="0441d-131">To publish WCF services with the isolated WCF receive adapters, you must use the BizTalk WCF Service Publishing Wizard to create a Web application to host the isolated WCF adapters.</span></span> <span data-ttu-id="0441d-132">另外，BizTalk WCF 服务发布向导还在所创建的 Web 应用程序的根文件夹中生成下列文件：</span><span class="sxs-lookup"><span data-stu-id="0441d-132">Additionally, the BizTalk WCF Service Publishing Wizard generates the following files in the root folder of the created Web application:</span></span>  
  
|<span data-ttu-id="0441d-133">文件</span><span class="sxs-lookup"><span data-stu-id="0441d-133">File</span></span>|<span data-ttu-id="0441d-134">文件夹</span><span class="sxs-lookup"><span data-stu-id="0441d-134">Folder</span></span>|<span data-ttu-id="0441d-135">Description</span><span class="sxs-lookup"><span data-stu-id="0441d-135">Description</span></span>|  
|----------|------------|-----------------|  
|<span data-ttu-id="0441d-136">WCF 服务（.svc 文件）</span><span class="sxs-lookup"><span data-stu-id="0441d-136">WCF services (.svc files)</span></span>|\|<span data-ttu-id="0441d-137">通过独立 WCF 适配器发布的针对 WCF 接收位置的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0441d-137">WCF services for the WCF receive locations published with the isolated WCF adapters.</span></span>|  
|<span data-ttu-id="0441d-138">Web.config</span><span class="sxs-lookup"><span data-stu-id="0441d-138">Web.config</span></span>|\|<span data-ttu-id="0441d-139">ASP.NET 配置文件，其中包含有关 ASP.NET Web 应用程序行为、已发布 WCF 服务行为、元数据终结点和 BizTalk 特有设置的信息。</span><span class="sxs-lookup"><span data-stu-id="0441d-139">ASP.NET configuration file that contains information for the ASP.NET Web application behaviors, the published WCF service behaviors, the metadata endpoint, and the BizTalk-specific settings.</span></span> <span data-ttu-id="0441d-140">由 BizTalk WCF 发布向导生成的默认元数据绑定是不安全的，因为它允许对元数据进行匿名访问。</span><span class="sxs-lookup"><span data-stu-id="0441d-140">The default metadata binding generated by the BizTalk WCF Publishing Wizard is not secure and it allows anonymous access to the metadata.</span></span> <span data-ttu-id="0441d-141">服务元数据中包含有关服务的详细说明，可能会有意或无意地包含敏感信息。</span><span class="sxs-lookup"><span data-stu-id="0441d-141">The service metadata contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="0441d-142">为了防止服务元数据受到未经授权的访问，可以修改 Web.config，使其针对元数据终结点使用安全绑定。</span><span class="sxs-lookup"><span data-stu-id="0441d-142">To protect service metadata from unauthorized access, you can modify Web.config to use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="0441d-143">**注意：**的元数据终结点绑定，以及服务终结点绑定并非所有组合都都有效。</span><span class="sxs-lookup"><span data-stu-id="0441d-143">**Note:**  Not all combinations of metadata endpoint bindings and service endpoint bindings are valid.</span></span> <span data-ttu-id="0441d-144">在某些情况下，元数据终结点的绑定配置必须与其服务终结点的绑定配置一致。</span><span class="sxs-lookup"><span data-stu-id="0441d-144">In some cases, the binding configurations for a metadata endpoint must be in agreement with the binding configurations of its service endpoint.</span></span> <span data-ttu-id="0441d-145">例如，当服务终结点依赖于 HTTPS 时，其相应的元数据终结点不能在要求使用 HTTP 传输的安全模式下进行配置。</span><span class="sxs-lookup"><span data-stu-id="0441d-145">For example, the metadata endpoint cannot be configured with a security mode requiring the HTTP transport when the security mode of its service endpoint relies on HTTPS.</span></span>|  
|<span data-ttu-id="0441d-146">ServiceDescription.xml</span><span class="sxs-lookup"><span data-stu-id="0441d-146">ServiceDescription.xml</span></span>|\|<span data-ttu-id="0441d-147">用于描述包含消息类型的已发布 WCF 服务约定的 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="0441d-147">XML file that describes the published WCF service contracts including the message types.</span></span>|  
|<span data-ttu-id="0441d-148">BizTalk 架构（.xsd 文件）</span><span class="sxs-lookup"><span data-stu-id="0441d-148">BizTalk schemas (.xsd files)</span></span>|<span data-ttu-id="0441d-149">\App_Data</span><span class="sxs-lookup"><span data-stu-id="0441d-149">\App_Data</span></span>|<span data-ttu-id="0441d-150">XML 架构，用于定义通过独立 WCF 适配器发布的 XML 实例消息的结构。</span><span class="sxs-lookup"><span data-stu-id="0441d-150">XML schemas defining the structure of XML instance messages, which are published with the isolated WCF adapters.</span></span>|  
|<span data-ttu-id="0441d-151">SchemaIndex.xml</span><span class="sxs-lookup"><span data-stu-id="0441d-151">SchemaIndex.xml</span></span>|<span data-ttu-id="0441d-152">\App_Data</span><span class="sxs-lookup"><span data-stu-id="0441d-152">\App_Data</span></span>|<span data-ttu-id="0441d-153">指示在已发布 WCF 服务中使用的 XML 架构文件的 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="0441d-153">XML file that indicates the XML schema files used in the published WCF services.</span></span>|  
|<span data-ttu-id="0441d-154">Serialization.xsd</span><span class="sxs-lookup"><span data-stu-id="0441d-154">Serialization.xsd</span></span>|<span data-ttu-id="0441d-155">\App_Data</span><span class="sxs-lookup"><span data-stu-id="0441d-155">\App_Data</span></span>|<span data-ttu-id="0441d-156">通过导出 XML 架构[DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722)有关类型、 元素和命名空间中, 属性 http://schemas.microsoft.com/2003/10/Serialization/。</span><span class="sxs-lookup"><span data-stu-id="0441d-156">XML schema exported by [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) for the types, elements, and attributes from the namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span>|  
|<span data-ttu-id="0441d-157">BindingInfo.xml</span><span class="sxs-lookup"><span data-stu-id="0441d-157">BindingInfo.xml</span></span>|<span data-ttu-id="0441d-158">\App_Data\Temp</span><span class="sxs-lookup"><span data-stu-id="0441d-158">\App_Data\Temp</span></span>|<span data-ttu-id="0441d-159">用来创建与已发布的 WCF 服务对应的 WCF 接收位置的 BizTalk 绑定文件。</span><span class="sxs-lookup"><span data-stu-id="0441d-159">BizTalk binding file to create the WCF receive locations that correspond to the published WCF services.</span></span> <span data-ttu-id="0441d-160">BindingInfo.xml 文件可以通过开发命令行工具或向导导入，以创建所需接收位置。</span><span class="sxs-lookup"><span data-stu-id="0441d-160">The BindingInfo.xml file can be imported by the development command-line tool or wizard to create the necessary receive locations.</span></span> <span data-ttu-id="0441d-161">已发布的 WCF 服务在运行时不使用此文件和 Temp 文件夹。</span><span class="sxs-lookup"><span data-stu-id="0441d-161">The published WCF services do not use this file and the Temp folder at run time.</span></span>|  
|<span data-ttu-id="0441d-162">WcfServiceDescription.xml</span><span class="sxs-lookup"><span data-stu-id="0441d-162">WcfServiceDescription.xml</span></span>|<span data-ttu-id="0441d-163">\App_Data\Temp</span><span class="sxs-lookup"><span data-stu-id="0441d-163">\App_Data\Temp</span></span>|<span data-ttu-id="0441d-164">XML 文件，概述与 BizTalk WCF 服务发布向导一起用来创建此 Web 应用程序的设置。</span><span class="sxs-lookup"><span data-stu-id="0441d-164">XML file that summarizes the settings that you used with the BizTalk WCF Service Publishing Wizard to create this Web application.</span></span> <span data-ttu-id="0441d-165">已发布的 WCF 服务在运行时不使用此文件和 Temp 文件夹。</span><span class="sxs-lookup"><span data-stu-id="0441d-165">The published WCF services do not use this file and the Temp folder at run time.</span></span>|  
  
 <span data-ttu-id="0441d-166">您还可以使用 BizTalk WCF 服务发布向导为运行于独立 WCF 适配器中的接收位置创建 WCF 接收位置和服务元数据。</span><span class="sxs-lookup"><span data-stu-id="0441d-166">You can also use the BizTalk WCF Service Publishing Wizard to create WCF receive locations and service metadata for the receive locations running the isolated WCF adapters.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="0441d-167">本节内容</span><span class="sxs-lookup"><span data-stu-id="0441d-167">In This Section</span></span>  
  
-   [<span data-ttu-id="0441d-168">如何使用发布向导的 BizTalk WCF 服务发布作为 WCF 服务的业务流程</span><span class="sxs-lookup"><span data-stu-id="0441d-168">How to Use the BizTalk WCF Service Publishing Wizard to Publish Orchestrations as WCF Services</span></span>](../core/publish-orchestrations-as-wcf-services--biztalk-wcf-service-publishing-wizard.md)  
  
-   [<span data-ttu-id="0441d-169">如何使用发布向导的 BizTalk WCF 服务发布作为 WCF 服务的架构</span><span class="sxs-lookup"><span data-stu-id="0441d-169">How to Use the BizTalk WCF Service Publishing Wizard to Publish Schemas as WCF Services</span></span>](../core/publish-schemas-as-wcf-services--use-the-biztalk-wcf-service-publishing-wizard.md)  
  
-   [<span data-ttu-id="0441d-170">配置 IIS 的独立 WCF 接收适配器</span><span class="sxs-lookup"><span data-stu-id="0441d-170">Configuring IIS for the Isolated WCF Receive Adapters</span></span>](../core/configuring-iis-for-the-isolated-wcf-receive-adapters.md)  
  
-   [<span data-ttu-id="0441d-171">如何配置与 BizTalk WCF 服务发布向导发布的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0441d-171">How to Configure WCF Services Published with the BizTalk WCF Service Publishing Wizard</span></span>](../core/configure-wcf-services-published-with-the-biztalk-wcf-service-publishing-wizard.md)  
  
-   [<span data-ttu-id="0441d-172">如何创建.NET 应用程序来测试与 BizTalk WCF 服务发布向导发布的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0441d-172">How to Create a .NET Application to Test a WCF Service Published with the BizTalk WCF Service Publishing Wizard</span></span>](../core/use-net-application-to-test-wcf-service-published-with-wcf-service-publishing.md)  
  
## <a name="see-also"></a><span data-ttu-id="0441d-173">另请参阅</span><span class="sxs-lookup"><span data-stu-id="0441d-173">See Also</span></span>  
 [<span data-ttu-id="0441d-174">演练： 使用 WCF BasicHttp 适配器的 WCF 服务发布</span><span class="sxs-lookup"><span data-stu-id="0441d-174">Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter</span></span>](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md)