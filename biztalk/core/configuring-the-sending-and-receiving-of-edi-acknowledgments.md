---
title: 配置发送和接收的 EDI 确认的 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3db1c9f7-bafa-4659-a3c4-0faa56606081
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f8b1ea4b228a4cc69d02184a4e70557d378cc2f
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65390720"
---
# <a name="configuring-the-sending-and-receiving-of-edi-acknowledgments"></a><span data-ttu-id="e5418-102">配置 EDI 确认的发送和接收</span><span class="sxs-lookup"><span data-stu-id="e5418-102">Configuring the Sending and Receiving of EDI Acknowledgments</span></span>
<span data-ttu-id="e5418-103">若要配置 EDI 确认以响应接收交换的发送，需要执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e5418-103">To configure the sending of an EDI acknowledgment in response to a received interchange, you need to do the following:</span></span>  
  
-   <span data-ttu-id="e5418-104">启用确认收到的交换解析为协议中。</span><span class="sxs-lookup"><span data-stu-id="e5418-104">Enable the acknowledgment in the agreement that the received interchange resolved to.</span></span> <span data-ttu-id="e5418-105">通过执行此操作，您可以声明发送交换的参与方期望确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-105">By doing this, you declare that the party that sent the interchange expects an acknowledgement.</span></span>  
  
-   <span data-ttu-id="e5418-106">如果需要使用特定的属性集，如启用 CR LF、 重新发送确认的分隔符是不同的等等，其他单向协议选项卡中设置这些属性。通过执行此操作，可以配置如何，该参与方发回确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-106">If the acknowledgement needs to be send back with specific properties set, such as CR LF enabled, separator characters to be different, etc., set those properties in the other one-way agreement tab. By doing this, you configure how the party sends back the acknowledgement.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="e5418-107">如果交换解析为协议中定义**PartyA-> 参与**选项卡上，应如何生成确认相关的属性中配置**参与-> PartyA**选项卡。这是必需的因为确认上下文属性发送方和接收方限定符设置为在指定的值相反**PartyA-> 参与**选项卡。例如，如果发送方和接收方标识符在交换消息解析成，则发送方和接收方上下文属性将设置为 US 和 THEM 在确认消息的协议被设置为 THEM 和 US。</span><span class="sxs-lookup"><span data-stu-id="e5418-107">If an interchange resolved to an agreement defined in the **PartyA->PartyB** tab, the properties related to how the acknowledgement should be generated are configured in the **PartyB->PartyA** tab. This is required because the acknowledgement context properties for the sender and receiver qualifiers are set to the opposite of the values you specified in the **PartyA->PartyB** tab. For example, if sender and receiver identifiers are set to THEM and US in the agreement to which the interchange message resolved to, the sender and receiver context properties will be set to US and THEM in the acknowledgement.</span></span> <span data-ttu-id="e5418-108">通常情况下，其他单向协议选项卡还会发送方和接收方的标识符分别设置为 US 和 THEM。</span><span class="sxs-lookup"><span data-stu-id="e5418-108">Typically, the other one-way agreement tab would also have the sender and receiver identifiers set to US and THEM respectively.</span></span> <span data-ttu-id="e5418-109">因此，确认消息将解析为该协议并将有选择地设置的属性。</span><span class="sxs-lookup"><span data-stu-id="e5418-109">Hence, the acknowledgement message would resolve to that agreement and the properties setting will be picked.</span></span> <span data-ttu-id="e5418-110">因此，如果你想要让确认使用不同的元素分隔符或如果想要让确认使用 CR LF，指定的属性中**参与-> PartyA**选项卡。</span><span class="sxs-lookup"><span data-stu-id="e5418-110">So, if you want to have the acknowledgement to use different element separators or if you want to have the acknowledgement to use CR LF, specify the properties in the **PartyB->PartyA** tab.</span></span>  
  
     <span data-ttu-id="e5418-111">从概念上讲，确认属性将有选择地从任何单向协议选项卡中具有相同的发送方和接收方限定符的确认上下文属性中设置。</span><span class="sxs-lookup"><span data-stu-id="e5418-111">Conceptually, the properties for the acknowledgement will be picked from any one-way agreement tab that has the same sender and receiver qualifiers as set in the acknowledgement’s context properties.</span></span> <span data-ttu-id="e5418-112">但是，对于便于实际使用，可以将通常设置这在您创建该交换将解析到协议的其他单向协议选项卡中。</span><span class="sxs-lookup"><span data-stu-id="e5418-112">However, for ease of practical use, you would typically set this in the other one-way agreement tab of the agreement that you created to which the interchange would have resolved.</span></span>  
  
-   <span data-ttu-id="e5418-113">如果不将 EDI 确认发送回发送原始交换的参与方的参与方，设置一个单向发送端口以选择该确认并发送或双向接收端口以发送确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-113">If you are a party that is sending an EDI acknowledgement back to the party that sent the original interchange, set up a one-way send port to pick up the acknowledgment and send or a two-way receive port to send the acknowledgment.</span></span> <span data-ttu-id="e5418-114">有关详细信息，请参阅[配置为发送 EDI 交换和确认的静态发送端口](../core/configuring-a-static-send-port-to-send-edi-interchanges-and-acknowledgments.md)。</span><span class="sxs-lookup"><span data-stu-id="e5418-114">For more information, see [Configuring a Static Send Port to Send EDI Interchanges and Acknowledgments](../core/configuring-a-static-send-port-to-send-edi-interchanges-and-acknowledgments.md).</span></span>  
  
-   <span data-ttu-id="e5418-115">如果你是需要 EDI 确认的参与方，设置一个双向发送端口或一个单向接收端口以接收确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-115">If you are a party that is expecting an EDI acknowledgement, set up a two-way send port or a one-way receive port to receive the acknowledgment.</span></span> <span data-ttu-id="e5418-116">有关详细信息，请参阅[配置为接收 EDI 消息和确认的端口](../core/configuring-a-port-to-receive-edi-messages-and-acknowledgments.md)。</span><span class="sxs-lookup"><span data-stu-id="e5418-116">For more information, see [Configuring a Port to Receive EDI Messages and Acknowledgments](../core/configuring-a-port-to-receive-edi-messages-and-acknowledgments.md).</span></span>  
  
-   <span data-ttu-id="e5418-117">BizTalk EDI 应用程序包含控制架构。</span><span class="sxs-lookup"><span data-stu-id="e5418-117">The BizTalk EDI Application contains the control schemas.</span></span> <span data-ttu-id="e5418-118">因此，包含 EDI 解决方案的应用程序必须包含对 BizTalk EDI 应用程序的引用。</span><span class="sxs-lookup"><span data-stu-id="e5418-118">As a result, the application containing your EDI solution must contain a reference to BizTalk EDI Application.</span></span> <span data-ttu-id="e5418-119">有关详细信息，请参阅[如何添加对 BizTalk Server EDI 应用程序的引用](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782)。</span><span class="sxs-lookup"><span data-stu-id="e5418-119">For more information, see [How to Add a Reference to the BizTalk Server EDI Application](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e5418-120">先决条件</span><span class="sxs-lookup"><span data-stu-id="e5418-120">Prerequisites</span></span>  
 <span data-ttu-id="e5418-121">必须以成员的身份登录[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理员或[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]B2B Operators 组。</span><span class="sxs-lookup"><span data-stu-id="e5418-121">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators group.</span></span>  
  
### <a name="to-request-an-acknowledgment-for-the-party-that-sent-the-original-interchange"></a><span data-ttu-id="e5418-122">若要为发送原始交换的参与方请求确认</span><span class="sxs-lookup"><span data-stu-id="e5418-122">To request an acknowledgment for the party that sent the original interchange</span></span>  
  
1. > [!NOTE]
   >  <span data-ttu-id="e5418-123">通过在此过程中执行的步骤，可以配置发送交换的参与方期望返回确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-123">By performing the steps in this procedure, you configure that the party that sends the interchange expects an acknowledgement back.</span></span>  
  
    <span data-ttu-id="e5418-124">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，单击**方**节点。</span><span class="sxs-lookup"><span data-stu-id="e5418-124">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, click the **Parties** node.</span></span> <span data-ttu-id="e5418-125">在中**参与方和业务配置文件**页上，单击具有您需要为其启用确认的协议的参与方。</span><span class="sxs-lookup"><span data-stu-id="e5418-125">In the **Parties and Business Profiles** page, click the party that has the agreement for which you need to enable acknowledgement.</span></span> <span data-ttu-id="e5418-126">在中**协议**部分中的页上，右键单击该协议，然后单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="e5418-126">In the **Agreement** section of the page, right-click the agreement and click **Properties**.</span></span> <span data-ttu-id="e5418-127">在中**协议属性**对话框单向协议选项卡 （向其入站的交换将解析） 中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e5418-127">In the **Agreement Properties** dialog box, in the one-way agreement tab (to which the inbound interchange will resolve), do the following:</span></span>  
  
   1. <span data-ttu-id="e5418-128">在中**标识符**页上，输入的值在发送方和接收方限定符。</span><span class="sxs-lookup"><span data-stu-id="e5418-128">In the **Identifiers** page, enter the values for the sender and receiver qualifiers.</span></span>  
  
       <span data-ttu-id="e5418-129">对于 X12 编码的确认，ISA5、 ISA6、 ISA7 和 ISA8 输入值。</span><span class="sxs-lookup"><span data-stu-id="e5418-129">For an X12-encoded acknowledgment, enter values for ISA5, ISA6, ISA7, and ISA8.</span></span> <span data-ttu-id="e5418-130">对于 ISA5 和 ISA6，输入将发送交换的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-130">For ISA5 and ISA6, enter the values for the party that will send the interchange.</span></span> <span data-ttu-id="e5418-131">对于 ISA7 和 ISA8，输入将接收交换的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-131">For ISA7 and ISA8, enter the values for the party that will receive the interchange.</span></span>  
  
       <span data-ttu-id="e5418-132">对于 EDIFACT 编码的确认，UNB2.1、 UNB2.2、 UNB3.1 和 UNB3.2 输入值。</span><span class="sxs-lookup"><span data-stu-id="e5418-132">For an EDIFACT-encoded acknowledgment, enter values for UNB2.1, UNB2.2, UNB3.1, and UNB3.2.</span></span> <span data-ttu-id="e5418-133">对于 UNB2.1 和 UNB2.2，输入将发送交换的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-133">For UNB2.1 and UNB2.2, enter the values for the party that will send the interchange.</span></span> <span data-ttu-id="e5418-134">对于 UNB3.1 和 UNB3.2，输入将接收交换的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-134">For UNB3.1 and UNB3.2, enter the values for the party that will receive the interchange.</span></span>  
  
   2. <span data-ttu-id="e5418-135">在中**确认**页上，选择属性定义的发送方预期确认种类：</span><span class="sxs-lookup"><span data-stu-id="e5418-135">In the **Acknowledgements** page, select properties defining the kind of acknowledgement that the sender party expects:</span></span>  
  
       <span data-ttu-id="e5418-136">对于 X12 确认，选择**预期的 TA1**和/或**预期的 997**根据确认预期。</span><span class="sxs-lookup"><span data-stu-id="e5418-136">For X12 acknowledgements, select **TA1 Expected** and/or **997 Expected** depending on which acknowledgements are expected.</span></span> <span data-ttu-id="e5418-137">对于每个确认类型，选择**进行批处理\<ACK 类型\>** 如果需要确认作为单独的交换发送的每个实例。</span><span class="sxs-lookup"><span data-stu-id="e5418-137">For each acknowledgement type, select **Do not batch \<ACK type\>** if you want each instance of an acknowledgment to be sent as a separate interchange.</span></span>  
  
       <span data-ttu-id="e5418-138">对于 EDIFACT 确认，请选择**预期接收消息 (CONTRL)** 和/或**确认 (CONTRL) 预期**根据确认预期。</span><span class="sxs-lookup"><span data-stu-id="e5418-138">For EDIFACT acknowledgements, select **Receipt of message (CONTRL) expected** and/or **Acknowledgement (CONTRL) expected** depending on which acknowledgements are expected.</span></span> <span data-ttu-id="e5418-139">对于每个确认类型，选择**进行批处理\<ACK 类型\>** 如果需要确认作为单独的交换发送的每个实例。</span><span class="sxs-lookup"><span data-stu-id="e5418-139">For each acknowledgement type, select **Do not batch \<ACK type\>** if you want each instance of an acknowledgment to be sent as a separate interchange.</span></span>  
  
   3. <span data-ttu-id="e5418-140">在中**本地主机设置**页**交换设置**部分中，清除**确认路由到发送管道请求-响应接收端口**返回以异步方式通过单向发送端口的确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-140">In the **Local Host Settings** page under the **Interchange Settings** section, clear the **Route ACK to send pipeline on request-response receive port** to return the acknowledgment asynchronously over a one-way send port.</span></span> <span data-ttu-id="e5418-141">保持选中此属性返回确认同步通过双向接收端口。</span><span class="sxs-lookup"><span data-stu-id="e5418-141">Keep this property as selected to return the acknowledgment synchronously over a two-way receive port.</span></span>  
  
   4. <span data-ttu-id="e5418-142">在中**发送端口**页上，在**名称**的列**发送端口**网格中，选择已设置为发送确认的发送端口。</span><span class="sxs-lookup"><span data-stu-id="e5418-142">In the **Send Ports** page, in the **Name** column of the **Send ports** grid, select the send port that you have set up to send the acknowledgment.</span></span>  
  
      > [!NOTE]
      >  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="e5418-143">使用此发送端口设置来确定处理消息时要使用的参与方。</span><span class="sxs-lookup"><span data-stu-id="e5418-143">uses this send port setting to determine the party to use when processing the message.</span></span> <span data-ttu-id="e5418-144">有关详细信息，请参阅[协议解析和架构确定传出 EDI 消息的](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="e5418-144">For more information, see [Agreement Resolution and Schema Determination for Outgoing EDI Messages](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md).</span></span>  
      > 
      > [!NOTE]
      >  <span data-ttu-id="e5418-145">如果未设置发送端口，可能需要更高版本执行此步骤。</span><span class="sxs-lookup"><span data-stu-id="e5418-145">If you have not set up the send port, you may have to perform this step later.</span></span>  
  
### <a name="to-configure-how-the-party-sends-the-acknowledgement-back"></a><span data-ttu-id="e5418-146">若要配置参与方如何发回确认</span><span class="sxs-lookup"><span data-stu-id="e5418-146">To configure how the party sends the acknowledgement back</span></span>  
  
1. > [!NOTE]
   >  <span data-ttu-id="e5418-147">通过在此过程中执行的步骤，可以配置接收交换的参与方如何发回确认。</span><span class="sxs-lookup"><span data-stu-id="e5418-147">By performing the steps in this procedure, you configure how the party that received the interchange sends an acknowledgement back.</span></span>  
  
    <span data-ttu-id="e5418-148">在同一**协议属性**对话框中的，其他单向协议选项卡中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e5418-148">In the same **Agreement Properties** dialog box, in the other one-way agreement tab, do the following:</span></span>  
  
   1. <span data-ttu-id="e5418-149">在中**标识符**页上，输入的值在发送方和接收方限定符。</span><span class="sxs-lookup"><span data-stu-id="e5418-149">In the **Identifiers** page, enter the values for the sender and receiver qualifiers.</span></span>  
  
      > [!NOTE]
      >  <span data-ttu-id="e5418-150">尽管发送确认，接收原始交换的参与方将成为发送方和发送原始交换的参与方变为接收端。</span><span class="sxs-lookup"><span data-stu-id="e5418-150">While sending the acknowledgement, the party that received the original interchange becomes the sender and the party that sent the original interchange becomes the receiver.</span></span> <span data-ttu-id="e5418-151">因此，您现在输入在标识符页中的值是相反的上一步中的单向协议选项卡中输入的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-151">Hence, the values that you enter in the Identifiers page now are opposite of the values that you entered in the one-way agreement tab in the previous step.</span></span> <span data-ttu-id="e5418-152">这有两个用途：</span><span class="sxs-lookup"><span data-stu-id="e5418-152">This serves two purposes:</span></span>  
      > 
      > - <span data-ttu-id="e5418-153">要发回的确认将解析为因为确认的发送方和接收方上下文属性将匹配发送方和接收输入的值在标识符页上现在要创建此单向协议。</span><span class="sxs-lookup"><span data-stu-id="e5418-153">The acknowledgement being sent back will resolve to this one-way agreement that you are creating because the sender and receiver context properties on the acknowledgement will match the sender and receiver values you enter on the Identifiers page now.</span></span>  
      >   -   <span data-ttu-id="e5418-154">此协议选项卡上，可以配置想要包括在确认消息进行任何自的定义。例如，可以使用其他分隔符，你可以选择允许启用 CR LF，等等。</span><span class="sxs-lookup"><span data-stu-id="e5418-154">Any customization you want to include in the acknowledgement can be configured on this agreement tab. For example, you can use other separators, you can choose to have CR LF enabled, etc.</span></span>  
  
       <span data-ttu-id="e5418-155">对于 X12 编码的确认，ISA5、 ISA6、 ISA7 和 ISA8 输入值。</span><span class="sxs-lookup"><span data-stu-id="e5418-155">For an X12-encoded acknowledgment, enter values for ISA5, ISA6, ISA7, and ISA8.</span></span> <span data-ttu-id="e5418-156">对于 ISA5 和 ISA6，输入将发送的确认 （将接收原始交换的参与方相同） 的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-156">For ISA5 and ISA6, enter the values for the party that will send the acknowledgement (this will be same as the party that received the original interchange).</span></span> <span data-ttu-id="e5418-157">对于 ISA7 和 ISA8，输入将接收的确认 （将发送原始交换的参与方相同） 的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-157">For ISA7 and ISA8, enter the values for the party that will receive the acknowledgement (this will be same as the party that sent the original interchange).</span></span>  
  
       <span data-ttu-id="e5418-158">对于 EDIFACT 编码的确认，UNB2.1、 UNB2.2、 UNB3.1 和 UNB3.2 输入值。</span><span class="sxs-lookup"><span data-stu-id="e5418-158">For an EDIFACT-encoded acknowledgment, enter values for UNB2.1, UNB2.2, UNB3.1, and UNB3.2.</span></span> <span data-ttu-id="e5418-159">对于 UNB2.1 和 UNB2.2，输入将发送的确认 （将接收原始交换的参与方相同） 的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-159">For UNB2.1 and UNB2.2, enter the values for the party that will send the acknowledgement (this will be same as the party that received the original interchange).</span></span> <span data-ttu-id="e5418-160">对于 UNB3.1 和 UNB3.2，输入将接收的确认 （将发送原始交换的参与方相同） 的参与方的值。</span><span class="sxs-lookup"><span data-stu-id="e5418-160">For UNB3.1 and UNB3.2, enter the values for the party that will receive the acknowledgement (this will be same as the party that sent the original interchange).</span></span>  
  
   2. <span data-ttu-id="e5418-161">对于 X12 或 EDIFACT 确认，如果需要，在**字符集和分隔符**页上，指定你想要在确认中使用的分隔符。</span><span class="sxs-lookup"><span data-stu-id="e5418-161">For an X12 or EDIFACT acknowledgment, if required, on the **Charset and Separators** page, specify separators that you want to use in the acknowledgement.</span></span> <span data-ttu-id="e5418-162">此外可以指定确认必须使用 CR LF 后缀。</span><span class="sxs-lookup"><span data-stu-id="e5418-162">You can also specify if the acknowledgement must use a CR LF suffix.</span></span>  
  
   3. <span data-ttu-id="e5418-163">对于 EDIFACT 确认，如果需要，在**信封**页**交换设置**部分中，指定是否确认将包含 UNA 或 UNG 段通过选择相应的选项。</span><span class="sxs-lookup"><span data-stu-id="e5418-163">For an EDIFACT acknowledgment, if required, on the **Envelopes** page under the **Interchange Settings** section, specify whether the acknowledgement would include a UNA or a UNG segment by selecting the appropriate options.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e5418-164">请参阅</span><span class="sxs-lookup"><span data-stu-id="e5418-164">See Also</span></span>  
 <span data-ttu-id="e5418-165">[配置 EDI 确认](../core/configuring-edi-acknowledgments.md) </span><span class="sxs-lookup"><span data-stu-id="e5418-165">[Configuring EDI Acknowledgments](../core/configuring-edi-acknowledgments.md) </span></span>  
 <span data-ttu-id="e5418-166">[EDI 服务和控制架构](../core/edi-service-and-control-schemas.md) </span><span class="sxs-lookup"><span data-stu-id="e5418-166">[EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md) </span></span>  
 <span data-ttu-id="e5418-167">[发送 EDI 确认](../core/sending-an-edi-acknowledgment.md) </span><span class="sxs-lookup"><span data-stu-id="e5418-167">[Sending an EDI Acknowledgment](../core/sending-an-edi-acknowledgment.md) </span></span>  
 <span data-ttu-id="e5418-168">[如何创建接收端口](../core/how-to-create-a-receive-port.md) </span><span class="sxs-lookup"><span data-stu-id="e5418-168">[How to Create a Receive Port](../core/how-to-create-a-receive-port.md) </span></span>  
 [<span data-ttu-id="e5418-169">如何创建发送端口</span><span class="sxs-lookup"><span data-stu-id="e5418-169">How to Create a Send Port</span></span>](../core/how-to-create-a-send-port2.md)