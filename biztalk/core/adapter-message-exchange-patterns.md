---
title: 适配器消息交换模式 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 54a3fc8f-33d0-4b7e-ad4c-b00912dc3328
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f42368d8687bbed4cbce60243a3b8528364b5fda
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22230173"
---
# <a name="adapter-message-exchange-patterns"></a><span data-ttu-id="6ef47-102">适配器消息交换模式</span><span class="sxs-lookup"><span data-stu-id="6ef47-102">Adapter Message Exchange Patterns</span></span>
<span data-ttu-id="6ef47-103">在许多功能强大的消息传递方案中，BizTalk 适配器框架支持一组丰富的适配器可以使用的消息交换模式。</span><span class="sxs-lookup"><span data-stu-id="6ef47-103">The BizTalk Adapter Framework supports a rich set of message exchange patterns that adapters can use in many powerful messaging scenarios.</span></span>  
  
## <a name="one-way-asynchronous"></a><span data-ttu-id="6ef47-104">单向 （异步）</span><span class="sxs-lookup"><span data-stu-id="6ef47-104">One-Way (Asynchronous)</span></span>  
 <span data-ttu-id="6ef47-105">此处的关键概念在于消息按一个方向流动。</span><span class="sxs-lookup"><span data-stu-id="6ef47-105">The key concept here is that messages flow in one direction.</span></span>  
  
 <span data-ttu-id="6ef47-106">此消息交换模式，在消息流到一种方法[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通过适配器。</span><span class="sxs-lookup"><span data-stu-id="6ef47-106">In this message exchange pattern, messages flow one way into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] through an adapter.</span></span> <span data-ttu-id="6ef47-107">The Messaging Engine 将消息发布到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="6ef47-107">The Messaging Engine publishes the message into the MessageBox database.</span></span> <span data-ttu-id="6ef47-108">如果业务流程具有该类型的一条消息的有效订阅，则会将消息路由到该业务流程。</span><span class="sxs-lookup"><span data-stu-id="6ef47-108">If an orchestration has an active subscription to a message of that type, the message is routed to that orchestration.</span></span>  
  
 <span data-ttu-id="6ef47-109">处理消息之后, 业务流程将发布该消息回 MessageBox 数据库之前将它路由到适配器，将传输到特定终结点。</span><span class="sxs-lookup"><span data-stu-id="6ef47-109">After processing the message, the orchestration publishes the message back into the MessageBox database before it is routed to an adapter to be transmitted to the specific endpoint.</span></span>  
  
 <span data-ttu-id="6ef47-110">当消息提交至引擎时，预期无响应。</span><span class="sxs-lookup"><span data-stu-id="6ef47-110">When the message is submitted to the engine, no response is expected.</span></span> <span data-ttu-id="6ef47-111">在出站端，当传输消息时，都应无响应。</span><span class="sxs-lookup"><span data-stu-id="6ef47-111">On the outbound side, when the message is transmitted, no response is expected.</span></span> <span data-ttu-id="6ef47-112">这通常称为异步消息传送和在许多方面基本构建基块由引擎应用于所有消息传递方案。</span><span class="sxs-lookup"><span data-stu-id="6ef47-112">This is typically referred to as asynchronous messaging and is in many ways the basic building block used by the engine for all messaging scenarios.</span></span>  
  
## <a name="request-response-style-protocols-sync-on-async"></a><span data-ttu-id="6ef47-113">请求-响应样式协议 （同步上异步）</span><span class="sxs-lookup"><span data-stu-id="6ef47-113">Request-Response Style Protocols (Sync-on-Async)</span></span>  
 <span data-ttu-id="6ef47-114">请求-响应方案由收到的请求消息，处理它，并将发送响应消息。</span><span class="sxs-lookup"><span data-stu-id="6ef47-114">A request-response scenario consists of receiving a request message, processing it, and sending a response message.</span></span> <span data-ttu-id="6ef47-115">它也称为同步上异步 （同步上-异步） 因为基础[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]体系结构是异步的可伸缩性原因。</span><span class="sxs-lookup"><span data-stu-id="6ef47-115">It is also referred to as synchronous-on-asynchronous (sync-on-async) because the underlying [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] architecture is asynchronous for scalability reasons.</span></span> <span data-ttu-id="6ef47-116">但是，BizTalk 消息引擎的体系结构使公开这些异步交换之上的同步消息交换模式。</span><span class="sxs-lookup"><span data-stu-id="6ef47-116">However, the architecture of the BizTalk Messaging Engine enables exposing a synchronous message exchange pattern on top of these asynchronous exchanges.</span></span> <span data-ttu-id="6ef47-117">若要执行此操作，引擎处理关联跨向外扩展体系结构的请求和响应消息，通过将大量的异步消息交换来公开同步接口链接在一起的复杂任务。</span><span class="sxs-lookup"><span data-stu-id="6ef47-117">To do this, the engine handles the complex task of correlating the request and response messages across a scaled-out architecture by linking together a number of asynchronous message exchanges to expose a synchronous interface.</span></span>  
  
 <span data-ttu-id="6ef47-118">例如，一个网页，检查清单可能会使 SOAP 调用 BizTalk SOAP 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="6ef47-118">For example, a Web page that checks inventory might make a SOAP call to a BizTalk SOAP receive adapter.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="6ef47-119">安排一系列的聚合信息并将其返回一个 SOAP 响应中的 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="6ef47-119"> orchestrates a series of Web services that aggregate the information and return it in one SOAP response.</span></span> <span data-ttu-id="6ef47-120">到客户端，这似乎是同步的 SOAP 调用，但事实上引擎 knits 一起大量的异步消息交换。</span><span class="sxs-lookup"><span data-stu-id="6ef47-120">To the client this appears to be a synchronous SOAP call, but in actuality the engine knits together a number of asynchronous message exchanges.</span></span>  
  
## <a name="solicit-response-style-protocols"></a><span data-ttu-id="6ef47-121">请求作出响应样式协议</span><span class="sxs-lookup"><span data-stu-id="6ef47-121">Solicit-Response Style Protocols</span></span>  
 <span data-ttu-id="6ef47-122">这种情况下是由发送的请求消息启动和完成通过接收响应消息。</span><span class="sxs-lookup"><span data-stu-id="6ef47-122">This scenario is initiated by sending a solicit message and completed by receiving a response message.</span></span> <span data-ttu-id="6ef47-123">它被称为请求作出响应因为发送初始消息请求的响应消息的终结点。</span><span class="sxs-lookup"><span data-stu-id="6ef47-123">It is referred to as solicit-response because the initial message sent is soliciting an endpoint for a response message.</span></span> <span data-ttu-id="6ef47-124">使用此消息交换模式的方案可能涉及业务流程进行出站 HTTP 调用 （响应要求），并等待响应。</span><span class="sxs-lookup"><span data-stu-id="6ef47-124">A scenario using this message exchange pattern might involve an orchestration making an outbound HTTP call (a solicit for a response) and waiting for the response.</span></span>  
  
## <a name="request-multiresponse"></a><span data-ttu-id="6ef47-125">请求 Multiresponse</span><span class="sxs-lookup"><span data-stu-id="6ef47-125">Request-Multiresponse</span></span>  
 <span data-ttu-id="6ef47-126">这种情况下是请求-响应方案类似。</span><span class="sxs-lookup"><span data-stu-id="6ef47-126">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="6ef47-127">但是，在此方案中的多个响应可能返回针对给定请求。</span><span class="sxs-lookup"><span data-stu-id="6ef47-127">However, in this scenario multiple responses may be returned for a given request.</span></span> <span data-ttu-id="6ef47-128">使用 Api，一个超时值以指定数据类型，并在超时期限内收到的所有响应都返回到接收适配器。</span><span class="sxs-lookup"><span data-stu-id="6ef47-128">The APIs allow a time-out value to be specified, and all responses received within the time-out period are returned to the receive adapter.</span></span>  
  
## <a name="loop-back"></a><span data-ttu-id="6ef47-129">循环后</span><span class="sxs-lookup"><span data-stu-id="6ef47-129">Loop-Back</span></span>  
 <span data-ttu-id="6ef47-130">这种情况下是请求-响应方案类似。</span><span class="sxs-lookup"><span data-stu-id="6ef47-130">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="6ef47-131">请求消息将像往常一样，发布但引擎可以确保响应消息返回到同一个适配器实例已发布的请求消息。</span><span class="sxs-lookup"><span data-stu-id="6ef47-131">The request message is published as usual, but the engine ensures that the response message is routed back to the same adapter instance the published the request message.</span></span> <span data-ttu-id="6ef47-132">因为请求消息发布到 MessageBox 数据库，则可以确保跟踪基础结构请求和响应消息进行跟踪。</span><span class="sxs-lookup"><span data-stu-id="6ef47-132">Because the request message is published to the MessageBox database, the tracking infrastructure ensures that both the request and response messages are tracked.</span></span> <span data-ttu-id="6ef47-133">这也是一种好方法，以调用发送管道处理消息，然后立即返回输出消息发送到以进行后续处理的适配器。</span><span class="sxs-lookup"><span data-stu-id="6ef47-133">This is also a good way to invoke a send pipeline processing on message then immediately get the output message send back to the adapter for subsequent processing.</span></span>  
  
 <span data-ttu-id="6ef47-134">此方案的一个示例是需要回执的消息的客户端。</span><span class="sxs-lookup"><span data-stu-id="6ef47-134">An example of this scenario is a client that requires a receipt for a message.</span></span> <span data-ttu-id="6ef47-135">入站的消息发布到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="6ef47-135">The inbound message is published to the MessageBox database.</span></span> <span data-ttu-id="6ef47-136">此消息和接收返回到同一个批处理中的适配器。</span><span class="sxs-lookup"><span data-stu-id="6ef47-136">Both this message and the receipt are returned to the adapter in the same batch.</span></span> <span data-ttu-id="6ef47-137">在这种情况下，与返回到客户端和其他正在处理以正常方式的一个实例复制入站的消息。</span><span class="sxs-lookup"><span data-stu-id="6ef47-137">In this case, the inbound message is copied with one instance being returned to the client, and the other being processed in the normal manner.</span></span> <span data-ttu-id="6ef47-138">此特定方案还需要自定义的 XML 反汇编程序要写入。</span><span class="sxs-lookup"><span data-stu-id="6ef47-138">This specific scenario also requires a custom XML disassembler to be written.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ef47-139">另请参阅</span><span class="sxs-lookup"><span data-stu-id="6ef47-139">See Also</span></span>  
 [<span data-ttu-id="6ef47-140">什么是适配器 Framework？</span><span class="sxs-lookup"><span data-stu-id="6ef47-140">What Is the Adapter Framework?</span></span>](../core/what-is-the-adapter-framework.md)