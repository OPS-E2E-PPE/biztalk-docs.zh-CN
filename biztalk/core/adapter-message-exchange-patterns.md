---
title: 适配器消息交换模式 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 54a3fc8f-33d0-4b7e-ad4c-b00912dc3328
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e15afa09234b046b0cd4388a03e5d4fc92480eaf
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65361379"
---
# <a name="adapter-message-exchange-patterns"></a><span data-ttu-id="489bd-102">适配器消息交换模式</span><span class="sxs-lookup"><span data-stu-id="489bd-102">Adapter Message Exchange Patterns</span></span>
<span data-ttu-id="489bd-103">BizTalk 适配器框架支持许多功能强大的消息传递方案中的一组丰富的适配器可以使用的消息交换模式。</span><span class="sxs-lookup"><span data-stu-id="489bd-103">The BizTalk Adapter Framework supports a rich set of message exchange patterns that adapters can use in many powerful messaging scenarios.</span></span>  
  
## <a name="one-way-asynchronous"></a><span data-ttu-id="489bd-104">单向 （异步）</span><span class="sxs-lookup"><span data-stu-id="489bd-104">One-Way (Asynchronous)</span></span>  
 <span data-ttu-id="489bd-105">此处的关键概念是消息按一个方向流动。</span><span class="sxs-lookup"><span data-stu-id="489bd-105">The key concept here is that messages flow in one direction.</span></span>  
  
 <span data-ttu-id="489bd-106">此消息交换模式，在消息流到的一种方法[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]通过适配器。</span><span class="sxs-lookup"><span data-stu-id="489bd-106">In this message exchange pattern, messages flow one way into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] through an adapter.</span></span> <span data-ttu-id="489bd-107">消息引擎将消息发布到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="489bd-107">The Messaging Engine publishes the message into the MessageBox database.</span></span> <span data-ttu-id="489bd-108">如果业务流程具有一条消息的该类型的有效订阅，则会将消息路由到该业务流程。</span><span class="sxs-lookup"><span data-stu-id="489bd-108">If an orchestration has an active subscription to a message of that type, the message is routed to that orchestration.</span></span>  
  
 <span data-ttu-id="489bd-109">处理消息之后, 该业务流程将消息发布回 MessageBox 数据库之前将它路由到适配器以传输到特定终结点。</span><span class="sxs-lookup"><span data-stu-id="489bd-109">After processing the message, the orchestration publishes the message back into the MessageBox database before it is routed to an adapter to be transmitted to the specific endpoint.</span></span>  
  
 <span data-ttu-id="489bd-110">将消息提交到引擎，预期无响应。</span><span class="sxs-lookup"><span data-stu-id="489bd-110">When the message is submitted to the engine, no response is expected.</span></span> <span data-ttu-id="489bd-111">在出站端，当传输消息时，都应无响应。</span><span class="sxs-lookup"><span data-stu-id="489bd-111">On the outbound side, when the message is transmitted, no response is expected.</span></span> <span data-ttu-id="489bd-112">这通常称为异步消息传送和在许多方面基本的构建基块引擎使用的所有消息传送方案。</span><span class="sxs-lookup"><span data-stu-id="489bd-112">This is typically referred to as asynchronous messaging and is in many ways the basic building block used by the engine for all messaging scenarios.</span></span>  
  
## <a name="request-response-style-protocols-sync-on-async"></a><span data-ttu-id="489bd-113">请求-响应样式协议 （同步上异步）</span><span class="sxs-lookup"><span data-stu-id="489bd-113">Request-Response Style Protocols (Sync-on-Async)</span></span>  
 <span data-ttu-id="489bd-114">请求-响应方案包括接收请求消息、 处理它和发送响应消息。</span><span class="sxs-lookup"><span data-stu-id="489bd-114">A request-response scenario consists of receiving a request message, processing it, and sending a response message.</span></span> <span data-ttu-id="489bd-115">它也称为同步上异步 （同步-上的异步） 因为基础[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]体系结构是异步的可伸缩性原因。</span><span class="sxs-lookup"><span data-stu-id="489bd-115">It is also referred to as synchronous-on-asynchronous (sync-on-async) because the underlying [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] architecture is asynchronous for scalability reasons.</span></span> <span data-ttu-id="489bd-116">但是，BizTalk 消息引擎的体系结构可公开基于这些异步交换的同步消息交换模式。</span><span class="sxs-lookup"><span data-stu-id="489bd-116">However, the architecture of the BizTalk Messaging Engine enables exposing a synchronous message exchange pattern on top of these asynchronous exchanges.</span></span> <span data-ttu-id="489bd-117">若要执行此操作，引擎处理将请求和响应消息向外扩展体系结构相关联的链接在一起的异步消息交换以将同步接口公开大量的复杂任务。</span><span class="sxs-lookup"><span data-stu-id="489bd-117">To do this, the engine handles the complex task of correlating the request and response messages across a scaled-out architecture by linking together a number of asynchronous message exchanges to expose a synchronous interface.</span></span>  
  
 <span data-ttu-id="489bd-118">例如，一个网页，检查清单可能会使 SOAP 调用对 BizTalk SOAP 接收适配器。</span><span class="sxs-lookup"><span data-stu-id="489bd-118">For example, a Web page that checks inventory might make a SOAP call to a BizTalk SOAP receive adapter.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="489bd-119">协调一系列的聚合信息并将其返回一个 SOAP 响应中的 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="489bd-119">orchestrates a series of Web services that aggregate the information and return it in one SOAP response.</span></span> <span data-ttu-id="489bd-120">到客户端，这似乎是同步的 SOAP 调用，但实际上，引擎 knits 一起异步消息交换的数量。</span><span class="sxs-lookup"><span data-stu-id="489bd-120">To the client this appears to be a synchronous SOAP call, but in actuality the engine knits together a number of asynchronous message exchanges.</span></span>  
  
## <a name="solicit-response-style-protocols"></a><span data-ttu-id="489bd-121">要求响应样式协议</span><span class="sxs-lookup"><span data-stu-id="489bd-121">Solicit-Response Style Protocols</span></span>  
 <span data-ttu-id="489bd-122">这种情况下是通过发送要求消息来启动并完成接收的响应消息。</span><span class="sxs-lookup"><span data-stu-id="489bd-122">This scenario is initiated by sending a solicit message and completed by receiving a response message.</span></span> <span data-ttu-id="489bd-123">它被称为要求-响应因为发送初始消息请求的响应消息的终结点。</span><span class="sxs-lookup"><span data-stu-id="489bd-123">It is referred to as solicit-response because the initial message sent is soliciting an endpoint for a response message.</span></span> <span data-ttu-id="489bd-124">使用此消息交换模式的方案可能涉及到业务流程进行出站 HTTP 调用 （对于响应要求），并等待响应。</span><span class="sxs-lookup"><span data-stu-id="489bd-124">A scenario using this message exchange pattern might involve an orchestration making an outbound HTTP call (a solicit for a response) and waiting for the response.</span></span>  
  
## <a name="request-multiresponse"></a><span data-ttu-id="489bd-125">请求 Multiresponse</span><span class="sxs-lookup"><span data-stu-id="489bd-125">Request-Multiresponse</span></span>  
 <span data-ttu-id="489bd-126">此方案中是类似于请求-响应方案。</span><span class="sxs-lookup"><span data-stu-id="489bd-126">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="489bd-127">但是，在此方案中多个响应可能会返回针对给定的请求。</span><span class="sxs-lookup"><span data-stu-id="489bd-127">However, in this scenario multiple responses may be returned for a given request.</span></span> <span data-ttu-id="489bd-128">使用 Api，必须指定一个超时值和超时期间内收到的所有响应都返回到接收适配器。</span><span class="sxs-lookup"><span data-stu-id="489bd-128">The APIs allow a time-out value to be specified, and all responses received within the time-out period are returned to the receive adapter.</span></span>  
  
## <a name="loop-back"></a><span data-ttu-id="489bd-129">环回</span><span class="sxs-lookup"><span data-stu-id="489bd-129">Loop-Back</span></span>  
 <span data-ttu-id="489bd-130">此方案中是类似于请求-响应方案。</span><span class="sxs-lookup"><span data-stu-id="489bd-130">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="489bd-131">请求消息已发布，像往常一样，但该引擎可确保响应消息将路由回同一适配器实例已发布的请求消息。</span><span class="sxs-lookup"><span data-stu-id="489bd-131">The request message is published as usual, but the engine ensures that the response message is routed back to the same adapter instance the published the request message.</span></span> <span data-ttu-id="489bd-132">由于请求消息发布到 MessageBox 数据库，可确保跟踪基础结构会跟踪请求和响应消息。</span><span class="sxs-lookup"><span data-stu-id="489bd-132">Because the request message is published to the MessageBox database, the tracking infrastructure ensures that both the request and response messages are tracked.</span></span> <span data-ttu-id="489bd-133">这也是一种很好的方法来调用发送管道处理消息立即得到的输出消息发送到适配器进行后续处理。</span><span class="sxs-lookup"><span data-stu-id="489bd-133">This is also a good way to invoke a send pipeline processing on message then immediately get the output message send back to the adapter for subsequent processing.</span></span>  
  
 <span data-ttu-id="489bd-134">此方案的一个示例是需要回执的消息的客户端。</span><span class="sxs-lookup"><span data-stu-id="489bd-134">An example of this scenario is a client that requires a receipt for a message.</span></span> <span data-ttu-id="489bd-135">入站的消息发布到 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="489bd-135">The inbound message is published to the MessageBox database.</span></span> <span data-ttu-id="489bd-136">此消息并接收返回到在同一批中适配器。</span><span class="sxs-lookup"><span data-stu-id="489bd-136">Both this message and the receipt are returned to the adapter in the same batch.</span></span> <span data-ttu-id="489bd-137">在这种情况下，入站的消息返回到客户端和其他正在处理以正常方式的一个实例复制。</span><span class="sxs-lookup"><span data-stu-id="489bd-137">In this case, the inbound message is copied with one instance being returned to the client, and the other being processed in the normal manner.</span></span> <span data-ttu-id="489bd-138">此特定方案还需要编写自定义 XML 拆装器。</span><span class="sxs-lookup"><span data-stu-id="489bd-138">This specific scenario also requires a custom XML disassembler to be written.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="489bd-139">请参阅</span><span class="sxs-lookup"><span data-stu-id="489bd-139">See Also</span></span>  
 [<span data-ttu-id="489bd-140">适配器框架概述</span><span class="sxs-lookup"><span data-stu-id="489bd-140">What Is the Adapter Framework?</span></span>](../core/what-is-the-adapter-framework.md)