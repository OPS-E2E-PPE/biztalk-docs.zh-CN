---
title: 如何配置 MSMQ 发送端口 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- MSMQ adapters, send ports
- send ports, MSMQ adapters
- configuring [MSMQ adapters], send ports
ms.assetid: 37313d45-8148-4aaf-a3f2-ea05b3b8b448
caps.latest.revision: 29
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: aad4a63a11f415c57778db726af0559858eab05c
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36992014"
---
# <a name="how-to-configure-an-msmq-send-port"></a><span data-ttu-id="eaafe-102">如何配置 MSMQ 发送端口</span><span class="sxs-lookup"><span data-stu-id="eaafe-102">How to Configure an MSMQ Send Port</span></span>
<span data-ttu-id="eaafe-103">可以在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台中设置 MSMQ 发送端口适配器变量。</span><span class="sxs-lookup"><span data-stu-id="eaafe-103">You can set MSMQ send port adapter variables in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="eaafe-104">如果未设置发送端口的属性，则使用在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台中设置的默认发送处理程序值。</span><span class="sxs-lookup"><span data-stu-id="eaafe-104">If properties are not set for the send port, the default send handler values set in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console are used.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="eaafe-105">如果主机实例与 MSMQ 发送端口或接收位置相关联，则请验证该 MSMQ 服务正在该计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="eaafe-105">If a host instance is associated with an MSMQ send port or receive location, verify the MSMQ service is running on that machine.</span></span> <span data-ttu-id="eaafe-106">如果该服务未运行，则 MSMQ 接收端口在启动后将随即关闭，并将发送到 MSMQ 发送端口的消息挂起。</span><span class="sxs-lookup"><span data-stu-id="eaafe-106">If the service is not running, the MSMQ receive ports will shut down shortly after they are started, and messages sent to the MSMQ send ports will be suspended.</span></span>  
>   
>  <span data-ttu-id="eaafe-107">在群集方案中，不仅需要运行群集 MSMQ 实例，还应在每个群集计算机上运行本地 MSMQ 服务。</span><span class="sxs-lookup"><span data-stu-id="eaafe-107">In a clustered scenario, not only does the clustered MSMQ instance need to be running, but the local MSMQ service on each cluster machine should be running, as well.</span></span>  

## <a name="to-configure-variables-for-an-msmq-send-port"></a><span data-ttu-id="eaafe-108">若要配置 msmq 发送端口的变量</span><span class="sxs-lookup"><span data-stu-id="eaafe-108">To configure variables for an MSMQ send port</span></span>  
 <span data-ttu-id="eaafe-109">按照下列步骤为 MSMQ 发送端口配置变量：</span><span class="sxs-lookup"><span data-stu-id="eaafe-109">Follow these steps to configure variables for an MSMQ send port:</span></span>  

1. <span data-ttu-id="eaafe-110">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台中，创建一个新的发送端口或双击某个现有发送端口以对其进行修改。</span><span class="sxs-lookup"><span data-stu-id="eaafe-110">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="eaafe-111">请参阅[如何创建发送端口](../core/how-to-create-a-send-port2.md)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="eaafe-111">See [How to Create a Send Port](../core/how-to-create-a-send-port2.md) for more information.</span></span> <span data-ttu-id="eaafe-112">配置所有发送端口选项。</span><span class="sxs-lookup"><span data-stu-id="eaafe-112">Configure all of the send port options.</span></span> <span data-ttu-id="eaafe-113">上**常规**选项卡上，在**传输**部分中，指定**MSMQ**有关**类型**选项。</span><span class="sxs-lookup"><span data-stu-id="eaafe-113">On the **General** tab, in the **Transport** section, specify **MSMQ** for the **Type** option.</span></span>  

2. <span data-ttu-id="eaafe-114">上**常规**选项卡上，在**传输**部分中，单击**配置**旁边**类型**。</span><span class="sxs-lookup"><span data-stu-id="eaafe-114">On the **General** tab, in the **Transport** section, click the **Configure** button next to **Type**.</span></span>  

3. <span data-ttu-id="eaafe-115">在中**MSMQ 传输属性**对话框框中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="eaafe-115">In the **MSMQ Transport Properties** dialog box, do the following:</span></span>  


   |            <span data-ttu-id="eaafe-116">使用此属性</span><span class="sxs-lookup"><span data-stu-id="eaafe-116">Use this property</span></span>            |                                                                                                                            <span data-ttu-id="eaafe-117">执行的操作</span><span class="sxs-lookup"><span data-stu-id="eaafe-117">To do this</span></span>                                                                                                                            |  <span data-ttu-id="eaafe-118">数据类型</span><span class="sxs-lookup"><span data-stu-id="eaafe-118">Data type</span></span>  | <span data-ttu-id="eaafe-119">默认值</span><span class="sxs-lookup"><span data-stu-id="eaafe-119">Default value</span></span> |
   |-----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------|
   |              <span data-ttu-id="eaafe-120">**密码**</span><span class="sxs-lookup"><span data-stu-id="eaafe-120">**Password**</span></span>               |                                                                                                 <span data-ttu-id="eaafe-121">指定远程队列的密码。</span><span class="sxs-lookup"><span data-stu-id="eaafe-121">Specify the password for a remote queue.</span></span> <span data-ttu-id="eaafe-122">使用具有**用户名**。</span><span class="sxs-lookup"><span data-stu-id="eaafe-122">Use with **User Name**.</span></span>                                                                                                 |   <span data-ttu-id="eaafe-123">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-123">String</span></span>    |     <span data-ttu-id="eaafe-124">空白</span><span class="sxs-lookup"><span data-stu-id="eaafe-124">Blank</span></span>     |
   |              <span data-ttu-id="eaafe-125">**用户名**</span><span class="sxs-lookup"><span data-stu-id="eaafe-125">**User Name**</span></span>              |                                                             <span data-ttu-id="eaafe-126">指定远程队列的用户名。</span><span class="sxs-lookup"><span data-stu-id="eaafe-126">Specify the user name for a remote queue.</span></span> <span data-ttu-id="eaafe-127">使用具有**密码**。</span><span class="sxs-lookup"><span data-stu-id="eaafe-127">Use with **Password**.</span></span> <span data-ttu-id="eaafe-128">不能使用远程计算机的本地用户作为该用户名。</span><span class="sxs-lookup"><span data-stu-id="eaafe-128">You cannot use the local user of the remote computer for the user name.</span></span>                                                             |   <span data-ttu-id="eaafe-129">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-129">String</span></span>    |     <span data-ttu-id="eaafe-130">空白</span><span class="sxs-lookup"><span data-stu-id="eaafe-130">Blank</span></span>     |
   |        <span data-ttu-id="eaafe-131">**确认类型**</span><span class="sxs-lookup"><span data-stu-id="eaafe-131">**Acknowledgement Type**</span></span>         | <span data-ttu-id="eaafe-132">指定消息队列返回给发送方应用程序的确认消息的类型。</span><span class="sxs-lookup"><span data-stu-id="eaafe-132">Specify the type of acknowledgement message for Message Queuing to return to the sending application.</span></span> <span data-ttu-id="eaafe-133">您可以选择多个确认类型。</span><span class="sxs-lookup"><span data-stu-id="eaafe-133">You can select more than one acknowledgment type.</span></span> <span data-ttu-id="eaafe-134">在确认类型的任何**System.Messaging.AcknowledgeTypes**枚举都可用。</span><span class="sxs-lookup"><span data-stu-id="eaafe-134">Any of the acknowledgement types in the **System.Messaging.AcknowledgeTypes** enumeration are available.</span></span> |   <span data-ttu-id="eaafe-135">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-135">String</span></span>    |     <span data-ttu-id="eaafe-136">InclusionThresholdSetting</span><span class="sxs-lookup"><span data-stu-id="eaafe-136">None</span></span>      |
   |        <span data-ttu-id="eaafe-137">**管理队列**</span><span class="sxs-lookup"><span data-stu-id="eaafe-137">**Administration Queue**</span></span>         |                                                                                                <span data-ttu-id="eaafe-138">指定接收确认消息的队列名称。</span><span class="sxs-lookup"><span data-stu-id="eaafe-138">Specify the queue name that receives the acknowledgement message.</span></span>                                                                                                 |   <span data-ttu-id="eaafe-139">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-139">String</span></span>    |     <span data-ttu-id="eaafe-140">空白</span><span class="sxs-lookup"><span data-stu-id="eaafe-140">Blank</span></span>     |
   |              <span data-ttu-id="eaafe-141">**正文类型**</span><span class="sxs-lookup"><span data-stu-id="eaafe-141">**Body Type**</span></span>              |                                                                               <span data-ttu-id="eaafe-142">指定 MSMQ 中的消息正文类型。</span><span class="sxs-lookup"><span data-stu-id="eaafe-142">Specify the message body type in MSMQ.</span></span> <span data-ttu-id="eaafe-143">有效值为.NET 成员**VarEnum**枚举。</span><span class="sxs-lookup"><span data-stu-id="eaafe-143">Valid values are members of the .NET **VarEnum** enumeration.</span></span>                                                                               |     <span data-ttu-id="eaafe-144">smallint</span><span class="sxs-lookup"><span data-stu-id="eaafe-144">Int</span></span>     |     <span data-ttu-id="eaafe-145">8209</span><span class="sxs-lookup"><span data-stu-id="eaafe-145">8209</span></span>      |
   |       <span data-ttu-id="eaafe-146">**证书指纹**</span><span class="sxs-lookup"><span data-stu-id="eaafe-146">**Certificate Thumbprint**</span></span>        |    <span data-ttu-id="eaafe-147">指定用于消息验证的证书的指纹。</span><span class="sxs-lookup"><span data-stu-id="eaafe-147">Specify the thumbprint of the certificate to use for message authentication.</span></span> <span data-ttu-id="eaafe-148">将此属性与结合**使用身份验证**属性对消息进行验证。</span><span class="sxs-lookup"><span data-stu-id="eaafe-148">Use this property in combination with the **Use Authentication** property to verify the message.</span></span> <span data-ttu-id="eaafe-149">使用**用户名**并**密码**属性，以访问队列。</span><span class="sxs-lookup"><span data-stu-id="eaafe-149">Use the **User Name** and **Password** properties to gain access to queues.</span></span>     |   <span data-ttu-id="eaafe-150">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-150">String</span></span>    |     <span data-ttu-id="eaafe-151">空白</span><span class="sxs-lookup"><span data-stu-id="eaafe-151">Blank</span></span>     |
   |          <span data-ttu-id="eaafe-152">**目标队列**</span><span class="sxs-lookup"><span data-stu-id="eaafe-152">**Destination Queue**</span></span>          |                     <span data-ttu-id="eaafe-153">指定目标队列。</span><span class="sxs-lookup"><span data-stu-id="eaafe-153">Specify the destination queue.</span></span> <span data-ttu-id="eaafe-154">有关队列的详细信息，请参阅[消息队列队列](../core/message-queuing-queues.md)。</span><span class="sxs-lookup"><span data-stu-id="eaafe-154">For more information about queues, see [Message Queuing Queues](../core/message-queuing-queues.md).</span></span> <span data-ttu-id="eaafe-155">**注意：** 的 URI 发送端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="eaafe-155">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>                      |   <span data-ttu-id="eaafe-156">String</span><span class="sxs-lookup"><span data-stu-id="eaafe-156">String</span></span>    |     <span data-ttu-id="eaafe-157">空白</span><span class="sxs-lookup"><span data-stu-id="eaafe-157">Blank</span></span>     |
   |        <span data-ttu-id="eaafe-158">**加密算法**</span><span class="sxs-lookup"><span data-stu-id="eaafe-158">**Encryption Algorithm**</span></span>         |                                                                                                <span data-ttu-id="eaafe-159">选择**RC2**， **RC4**，或**None**加密算法。</span><span class="sxs-lookup"><span data-stu-id="eaafe-159">Select **RC2**, **RC4**, or **None** for the encryption algorithm.</span></span>                                                                                                |    <span data-ttu-id="eaafe-160">Enum</span><span class="sxs-lookup"><span data-stu-id="eaafe-160">Enum</span></span>     |     <span data-ttu-id="eaafe-161">InclusionThresholdSetting</span><span class="sxs-lookup"><span data-stu-id="eaafe-161">None</span></span>      |
   | <span data-ttu-id="eaafe-162">**最大消息大小 （以千字节为单位）**</span><span class="sxs-lookup"><span data-stu-id="eaafe-162">**Maximum Message Size (in kilobytes)**</span></span> |                                                                                       <span data-ttu-id="eaafe-163">指定发送到指定的队列的消息的最大消息大小。</span><span class="sxs-lookup"><span data-stu-id="eaafe-163">Specify the maximum message size for messages that you send to the specified queue.</span></span>                                                                                        | <span data-ttu-id="eaafe-164">UnsignedInt</span><span class="sxs-lookup"><span data-stu-id="eaafe-164">UnsignedInt</span></span> |     <span data-ttu-id="eaafe-165">1024</span><span class="sxs-lookup"><span data-stu-id="eaafe-165">1024</span></span>      |
   |          <span data-ttu-id="eaafe-166">**消息优先级**</span><span class="sxs-lookup"><span data-stu-id="eaafe-166">**Message Priority**</span></span>           |                                                                                                                    <span data-ttu-id="eaafe-167">设置消息优先级。</span><span class="sxs-lookup"><span data-stu-id="eaafe-167">Set the message priority.</span></span>                                                                                                                     |    <span data-ttu-id="eaafe-168">Enum</span><span class="sxs-lookup"><span data-stu-id="eaafe-168">Enum</span></span>     |    <span data-ttu-id="eaafe-169">Normal</span><span class="sxs-lookup"><span data-stu-id="eaafe-169">Normal</span></span>     |
   |             <span data-ttu-id="eaafe-170">**可恢复**</span><span class="sxs-lookup"><span data-stu-id="eaafe-170">**Recoverable**</span></span>             |                                                                                                  <span data-ttu-id="eaafe-171">指定是否确保消息的可恢复性。</span><span class="sxs-lookup"><span data-stu-id="eaafe-171">Specify whether to guarantee the recoverability of a message.</span></span>                                                                                                   |   <span data-ttu-id="eaafe-172">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-172">Boolean</span></span>   |     <span data-ttu-id="eaafe-173">False</span><span class="sxs-lookup"><span data-stu-id="eaafe-173">False</span></span>     |
   |        <span data-ttu-id="eaafe-174">**支持分段**</span><span class="sxs-lookup"><span data-stu-id="eaafe-174">**Support Segmentation**</span></span>         |                                                                                        <span data-ttu-id="eaafe-175">将此布尔属性值设置为 **，则返回 True**到大于 4 MB 的消息分段。</span><span class="sxs-lookup"><span data-stu-id="eaafe-175">Set this Boolean property value to **True** to segment messages larger than 4 MB.</span></span>                                                                                         |   <span data-ttu-id="eaafe-176">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-176">Boolean</span></span>   |     <span data-ttu-id="eaafe-177">False</span><span class="sxs-lookup"><span data-stu-id="eaafe-177">False</span></span>     |
   |               <span data-ttu-id="eaafe-178">**超时**</span><span class="sxs-lookup"><span data-stu-id="eaafe-178">**Timeout**</span></span>               |                                                                    <span data-ttu-id="eaafe-179">指定等待消息到达目标队列的最长时间。</span><span class="sxs-lookup"><span data-stu-id="eaafe-179">Specify the maximum time to wait for the messages to reach the destination queue.</span></span> <span data-ttu-id="eaafe-180">只有当使用事务时才适用。</span><span class="sxs-lookup"><span data-stu-id="eaafe-180">Applies only when you use transactions.</span></span>                                                                     |     <span data-ttu-id="eaafe-181">smallint</span><span class="sxs-lookup"><span data-stu-id="eaafe-181">Int</span></span>     |       <span data-ttu-id="eaafe-182">0</span><span class="sxs-lookup"><span data-stu-id="eaafe-182">0</span></span>       |
   |            <span data-ttu-id="eaafe-183">**超时单位**</span><span class="sxs-lookup"><span data-stu-id="eaafe-183">**Timeout Unit**</span></span>             |                                                                      <span data-ttu-id="eaafe-184">设置要用于单元**超时**属性。</span><span class="sxs-lookup"><span data-stu-id="eaafe-184">Set the unit to use for the **Timeout** property.</span></span><br /><br /> <span data-ttu-id="eaafe-185">选择**天**，**小时**，**分钟**，或者**秒**。</span><span class="sxs-lookup"><span data-stu-id="eaafe-185">Select **Days**, **Hours**, **Minutes**, or **Seconds**.</span></span>                                                                      |    <span data-ttu-id="eaafe-186">Enum</span><span class="sxs-lookup"><span data-stu-id="eaafe-186">Enum</span></span>     |     <span data-ttu-id="eaafe-187">Days</span><span class="sxs-lookup"><span data-stu-id="eaafe-187">Days</span></span>      |
   |            <span data-ttu-id="eaafe-188">**事务性**</span><span class="sxs-lookup"><span data-stu-id="eaafe-188">**Transactional**</span></span>            |                                                                                               <span data-ttu-id="eaafe-189">将此值设置为 **，则返回 True**发送消息，如果使用的事务。</span><span class="sxs-lookup"><span data-stu-id="eaafe-189">Set this value to **True** to send messages if you use transactions.</span></span>                                                                                               |   <span data-ttu-id="eaafe-190">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-190">Boolean</span></span>   |     <span data-ttu-id="eaafe-191">False</span><span class="sxs-lookup"><span data-stu-id="eaafe-191">False</span></span>     |
   |         <span data-ttu-id="eaafe-192">**使用身份验证**</span><span class="sxs-lookup"><span data-stu-id="eaafe-192">**Use Authentication**</span></span>          |     <span data-ttu-id="eaafe-193">将此布尔属性值设置为 **，则返回 True**到控制身份验证。</span><span class="sxs-lookup"><span data-stu-id="eaafe-193">Set this Boolean property value to **True** to control authentication.</span></span> <span data-ttu-id="eaafe-194">将此属性与结合**证书指纹**属性对消息进行验证。</span><span class="sxs-lookup"><span data-stu-id="eaafe-194">Use this property in combination with the **Certificate Thumbprint** property to verify the message.</span></span> <span data-ttu-id="eaafe-195">使用**用户名**并**密码**属性，以访问队列。</span><span class="sxs-lookup"><span data-stu-id="eaafe-195">Use the **User Name** and **Password** properties to gain access to queues.</span></span>      |   <span data-ttu-id="eaafe-196">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-196">Boolean</span></span>   |     <span data-ttu-id="eaafe-197">False</span><span class="sxs-lookup"><span data-stu-id="eaafe-197">False</span></span>     |
   |        <span data-ttu-id="eaafe-198">**使用死信队列**</span><span class="sxs-lookup"><span data-stu-id="eaafe-198">**Use Dead Letter Queue**</span></span>        |                                                                                    <span data-ttu-id="eaafe-199">将此值设置为 **，则返回 True**将消息发送到死信队列，如果发生故障。</span><span class="sxs-lookup"><span data-stu-id="eaafe-199">Set this value to **True** to send messages to the dead letter queue if a failure occurs.</span></span>                                                                                     |   <span data-ttu-id="eaafe-200">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-200">Boolean</span></span>   |     <span data-ttu-id="eaafe-201">True</span><span class="sxs-lookup"><span data-stu-id="eaafe-201">True</span></span>      |
   |          <span data-ttu-id="eaafe-202">**使用日志队列**</span><span class="sxs-lookup"><span data-stu-id="eaafe-202">**Use Journal Queue**</span></span>          |                                                                                   <span data-ttu-id="eaafe-203">将此值设置为 **，则返回 True**处理消息时保存消息的副本。</span><span class="sxs-lookup"><span data-stu-id="eaafe-203">Set this value to **True** to save a copy of the message whenever the message is processed.</span></span>                                                                                    |   <span data-ttu-id="eaafe-204">Boolean</span><span class="sxs-lookup"><span data-stu-id="eaafe-204">Boolean</span></span>   |     <span data-ttu-id="eaafe-205">False</span><span class="sxs-lookup"><span data-stu-id="eaafe-205">False</span></span>     |


4. <span data-ttu-id="eaafe-206">单击**确定**并**确定**次以保存设置。</span><span class="sxs-lookup"><span data-stu-id="eaafe-206">Click **OK** and **OK** again to save settings.</span></span>  

## <a name="see-also"></a><span data-ttu-id="eaafe-207">请参阅</span><span class="sxs-lookup"><span data-stu-id="eaafe-207">See Also</span></span>  
 <span data-ttu-id="eaafe-208">[如何配置 MSMQ 接收位置](../core/how-to-configure-an-msmq-receive-location.md) </span><span class="sxs-lookup"><span data-stu-id="eaafe-208">[How to Configure an MSMQ Receive Location](../core/how-to-configure-an-msmq-receive-location.md) </span></span>  
 [<span data-ttu-id="eaafe-209">配置 MSMQ 适配器</span><span class="sxs-lookup"><span data-stu-id="eaafe-209">Configuring the MSMQ Adapter</span></span>](../core/configuring-the-msmq-adapter.md)