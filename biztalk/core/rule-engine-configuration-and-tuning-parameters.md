---
title: 规则引擎配置和优化参数 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- troubleshooting, registry keys
- registry keys
- Business Rules Engine, registry keys
- troubleshooting, business rules
- validating, business rules
- business rules, validating
ms.assetid: cb0bcffe-bbc6-4495-84d2-2a822c3413b3
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e6d2acc5b70f7a2be120db5159f893922135a429
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22270333"
---
# <a name="rule-engine-configuration-and-tuning-parameters"></a><span data-ttu-id="57dbf-102">规则引擎的配置和优化参数</span><span class="sxs-lookup"><span data-stu-id="57dbf-102">Rule Engine Configuration and Tuning Parameters</span></span>
<span data-ttu-id="57dbf-103">下表包含的注册表项列表对于配置验证和疑难解答可能非常有用。</span><span class="sxs-lookup"><span data-stu-id="57dbf-103">The following table contains a list of registry keys that may be useful for configuration validation and troubleshooting.</span></span> <span data-ttu-id="57dbf-104">这些注册表项存储在下**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\BusinessRules\3.0**。</span><span class="sxs-lookup"><span data-stu-id="57dbf-104">These registry keys are stored under **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\BusinessRules\3.0**.</span></span>  
  
 <span data-ttu-id="57dbf-105">除了前三项之外，这些注册表项都用于允许产品（而不是用户）自定义规则引擎。</span><span class="sxs-lookup"><span data-stu-id="57dbf-105">With the exception of the first three keys listed, these keys are intended to allow products—and not users—to customize the rule engine.</span></span> <span data-ttu-id="57dbf-106">所有这些注册表项都是在安装时创建的。但是，没有提供任何界面来设置这些值。</span><span class="sxs-lookup"><span data-stu-id="57dbf-106">All of them are created upon installation; however, no interface is provided to set any of these values.</span></span>  
  
 <span data-ttu-id="57dbf-107">表列的定义如下：</span><span class="sxs-lookup"><span data-stu-id="57dbf-107">The definitions for the table columns are as follows:</span></span>  
  
-   <span data-ttu-id="57dbf-108">**名称**。</span><span class="sxs-lookup"><span data-stu-id="57dbf-108">**Name**.</span></span> <span data-ttu-id="57dbf-109">注册表项的名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-109">Name of the registry key.</span></span>  
  
-   <span data-ttu-id="57dbf-110">**说明**。</span><span class="sxs-lookup"><span data-stu-id="57dbf-110">**Description**.</span></span> <span data-ttu-id="57dbf-111">关于注册项的位置或用法的简短说明。</span><span class="sxs-lookup"><span data-stu-id="57dbf-111">A brief description about the location or use of the key.</span></span>  
  
-   <span data-ttu-id="57dbf-112">**配置默认**。</span><span class="sxs-lookup"><span data-stu-id="57dbf-112">**Config default**.</span></span> <span data-ttu-id="57dbf-113">该注册项不存在时返回的值。</span><span class="sxs-lookup"><span data-stu-id="57dbf-113">Value returned if the key does not exist.</span></span>  
  
-   <span data-ttu-id="57dbf-114">**安装默认**。</span><span class="sxs-lookup"><span data-stu-id="57dbf-114">**Install default**.</span></span> <span data-ttu-id="57dbf-115">在安装规则引擎时由 BizTalk Server 设置的值。</span><span class="sxs-lookup"><span data-stu-id="57dbf-115">Value set by BizTalk Server when installing the rule engine.</span></span>  
  
|<span data-ttu-id="57dbf-116">Name</span><span class="sxs-lookup"><span data-stu-id="57dbf-116">Name</span></span>|<span data-ttu-id="57dbf-117">Description</span><span class="sxs-lookup"><span data-stu-id="57dbf-117">Description</span></span>|<span data-ttu-id="57dbf-118">配置默认值</span><span class="sxs-lookup"><span data-stu-id="57dbf-118">Config default</span></span>|<span data-ttu-id="57dbf-119">安装默认值</span><span class="sxs-lookup"><span data-stu-id="57dbf-119">Install default</span></span>|  
|----------|-----------------|--------------------|---------------------|  
|<span data-ttu-id="57dbf-120">InstallPath</span><span class="sxs-lookup"><span data-stu-id="57dbf-120">InstallPath</span></span>|<span data-ttu-id="57dbf-121">配置时使用的 BRE 文件的位置。</span><span class="sxs-lookup"><span data-stu-id="57dbf-121">Location of BRE files that is used at the configuration time.</span></span>|<span data-ttu-id="57dbf-122">(null)</span><span class="sxs-lookup"><span data-stu-id="57dbf-122">(null)</span></span>|<span data-ttu-id="57dbf-123">C:\Program Files\Common Files\Microsoft BizTalk（或 64 位操作系统上的 C:\Program Files (x86)\Common Files\Microsoft BizTalk）</span><span class="sxs-lookup"><span data-stu-id="57dbf-123">C:\Program Files\Common Files\Microsoft BizTalk (or C:\Program Files (x86)\Common Files\Microsoft BizTalk on a 64-bit operating system)</span></span>|  
|<span data-ttu-id="57dbf-124">DatabaseServer</span><span class="sxs-lookup"><span data-stu-id="57dbf-124">DatabaseServer</span></span>|<span data-ttu-id="57dbf-125">所使用的数据库服务器。</span><span class="sxs-lookup"><span data-stu-id="57dbf-125">Database server used.</span></span>|<span data-ttu-id="57dbf-126">(空字符串)</span><span class="sxs-lookup"><span data-stu-id="57dbf-126">(empty string)</span></span>|<span data-ttu-id="57dbf-127">配置 BRE 过程中指定的数据库服务器的名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-127">Name of the database server specified during configuration of BRE.</span></span>|  
|<span data-ttu-id="57dbf-128">DatabaseName</span><span class="sxs-lookup"><span data-stu-id="57dbf-128">DatabaseName</span></span>|<span data-ttu-id="57dbf-129">要使用的数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-129">Name of database to be used.</span></span>|<span data-ttu-id="57dbf-130">(空字符串)</span><span class="sxs-lookup"><span data-stu-id="57dbf-130">(empty string)</span></span>|<span data-ttu-id="57dbf-131">配置 BRE 过程中指定的数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-131">Name of the database specified during configuration of BRE.</span></span> <span data-ttu-id="57dbf-132">通常为 BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="57dbf-132">Typically, it is BizTalkRuleEngineDb</span></span>|  
|<span data-ttu-id="57dbf-133">PubSubAdapterAssembly</span><span class="sxs-lookup"><span data-stu-id="57dbf-133">PubSubAdapterAssembly</span></span>|<span data-ttu-id="57dbf-134">发布/订阅适配器的程序集名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-134">Assembly name of pub/sub adapter.</span></span>|<span data-ttu-id="57dbf-135">Microsoft.RuleEngine</span><span class="sxs-lookup"><span data-stu-id="57dbf-135">Microsoft.RuleEngine</span></span>|<span data-ttu-id="57dbf-136">Microsoft.RuleEngine</span><span class="sxs-lookup"><span data-stu-id="57dbf-136">Microsoft.RuleEngine</span></span>|  
|<span data-ttu-id="57dbf-137">PubSubAdapterClass</span><span class="sxs-lookup"><span data-stu-id="57dbf-137">PubSubAdapterClass</span></span>|<span data-ttu-id="57dbf-138">发布/订阅适配器的类名。</span><span class="sxs-lookup"><span data-stu-id="57dbf-138">Class name of pub/sub adapter.</span></span>|<span data-ttu-id="57dbf-139">Microsoft.RuleEngine.PubSubAdapter</span><span class="sxs-lookup"><span data-stu-id="57dbf-139">Microsoft.RuleEngine.PubSubAdapter</span></span>|<span data-ttu-id="57dbf-140">Microsoft.RuleEngine.PubSubAdapter</span><span class="sxs-lookup"><span data-stu-id="57dbf-140">Microsoft.RuleEngine.PubSubAdapter</span></span>|  
|<span data-ttu-id="57dbf-141">DeploymentDriverAssembly</span><span class="sxs-lookup"><span data-stu-id="57dbf-141">DeploymentDriverAssembly</span></span>|<span data-ttu-id="57dbf-142">部署驱动程序的程序集名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-142">Assembly name of deployment driver.</span></span>|<span data-ttu-id="57dbf-143">Microsoft.RuleEngine</span><span class="sxs-lookup"><span data-stu-id="57dbf-143">Microsoft.RuleEngine</span></span>|<span data-ttu-id="57dbf-144">Microsoft.BizTalk.RuleEngineExtensions</span><span class="sxs-lookup"><span data-stu-id="57dbf-144">Microsoft.BizTalk.RuleEngineExtensions</span></span>|  
|<span data-ttu-id="57dbf-145">DeploymentDriverClass</span><span class="sxs-lookup"><span data-stu-id="57dbf-145">DeploymentDriverClass</span></span>|<span data-ttu-id="57dbf-146">部署驱动程序的类名。</span><span class="sxs-lookup"><span data-stu-id="57dbf-146">Class name of deployment driver.</span></span>|<span data-ttu-id="57dbf-147">Microsoft.RuleEngine.RuleSetDeploymentDriver</span><span class="sxs-lookup"><span data-stu-id="57dbf-147">Microsoft.RuleEngine.RuleSetDeploymentDriver</span></span>|<span data-ttu-id="57dbf-148">Microsoft.BizTalk.RuleEngineExtensions.RuleSetDeploymentDriver</span><span class="sxs-lookup"><span data-stu-id="57dbf-148">Microsoft.BizTalk.RuleEngineExtensions.RuleSetDeploymentDriver</span></span>|  
|<span data-ttu-id="57dbf-149">TrackingInterceptorAssembly</span><span class="sxs-lookup"><span data-stu-id="57dbf-149">TrackingInterceptorAssembly</span></span>|<span data-ttu-id="57dbf-150">跟踪侦听器的程序集名称。</span><span class="sxs-lookup"><span data-stu-id="57dbf-150">Assembly name of tracking interceptor.</span></span>|<span data-ttu-id="57dbf-151">(空字符串)</span><span class="sxs-lookup"><span data-stu-id="57dbf-151">(empty string)</span></span>|<span data-ttu-id="57dbf-152">Microsoft.BizTalk.RuleEngineExtensions</span><span class="sxs-lookup"><span data-stu-id="57dbf-152">Microsoft.BizTalk.RuleEngineExtensions</span></span>|  
|<span data-ttu-id="57dbf-153">TrackingInterceptorClass</span><span class="sxs-lookup"><span data-stu-id="57dbf-153">TrackingInterceptorClass</span></span>|<span data-ttu-id="57dbf-154">跟踪侦听器的类名。</span><span class="sxs-lookup"><span data-stu-id="57dbf-154">Class name of tracking interceptor.</span></span>|<span data-ttu-id="57dbf-155">(空字符串)</span><span class="sxs-lookup"><span data-stu-id="57dbf-155">(empty string)</span></span>|<span data-ttu-id="57dbf-156">Microsoft.BizTalk.RuleEngineExtensions.RuleSetTrackingInterceptor</span><span class="sxs-lookup"><span data-stu-id="57dbf-156">Microsoft.BizTalk.RuleEngineExtensions.RuleSetTrackingInterceptor</span></span>|  
|<span data-ttu-id="57dbf-157">TranslationTimeout</span><span class="sxs-lookup"><span data-stu-id="57dbf-157">TranslationTimeout</span></span>|<span data-ttu-id="57dbf-158">可用于翻译规则集的最长时间（以毫秒计）。</span><span class="sxs-lookup"><span data-stu-id="57dbf-158">Maximum time in milliseconds that can be used to translate a ruleset.</span></span> <span data-ttu-id="57dbf-159">**注意：** 这可以每个 ruleset 的基础上覆盖，通过使用 RuleSetConfiguration)。</span><span class="sxs-lookup"><span data-stu-id="57dbf-159">**Note:**  This can be overridden on a per-ruleset basis by using the RuleSetConfiguration).</span></span>|<span data-ttu-id="57dbf-160">60000（1 分钟）</span><span class="sxs-lookup"><span data-stu-id="57dbf-160">60000 (1 minute)</span></span>|<span data-ttu-id="57dbf-161">60000</span><span class="sxs-lookup"><span data-stu-id="57dbf-161">60000</span></span>|  
|<span data-ttu-id="57dbf-162">UpdateServiceName</span><span class="sxs-lookup"><span data-stu-id="57dbf-162">UpdateServiceName</span></span>|<span data-ttu-id="57dbf-163">更新服务的名称，.NET 远程处理将使用该名称来查找服务。</span><span class="sxs-lookup"><span data-stu-id="57dbf-163">Name of the Update service, used by .NET remoting to locate the service.</span></span>|<span data-ttu-id="57dbf-164">RemoteUpdateService</span><span class="sxs-lookup"><span data-stu-id="57dbf-164">RemoteUpdateService</span></span>|<span data-ttu-id="57dbf-165">RemoteUpdateService</span><span class="sxs-lookup"><span data-stu-id="57dbf-165">RemoteUpdateService</span></span>|  
|<span data-ttu-id="57dbf-166">UpdateServiceHost</span><span class="sxs-lookup"><span data-stu-id="57dbf-166">UpdateServiceHost</span></span>|<span data-ttu-id="57dbf-167">承载更新服务的计算机，.NET 远程处理将使用该计算机来查找服务。</span><span class="sxs-lookup"><span data-stu-id="57dbf-167">Computer hosting the Update service, used by .NET remoting to locate the service.</span></span> <span data-ttu-id="57dbf-168">**注意：** 服务当前限制到同一台计算机的传入消息。</span><span class="sxs-lookup"><span data-stu-id="57dbf-168">**Note:**  The service currently restricts incoming messages to same machine only.</span></span>|<span data-ttu-id="57dbf-169">localhost</span><span class="sxs-lookup"><span data-stu-id="57dbf-169">localhost</span></span>|<span data-ttu-id="57dbf-170">localhost</span><span class="sxs-lookup"><span data-stu-id="57dbf-170">localhost</span></span>|  
|<span data-ttu-id="57dbf-171">UpdateServicePort</span><span class="sxs-lookup"><span data-stu-id="57dbf-171">UpdateServicePort</span></span>|<span data-ttu-id="57dbf-172">更新服务所使用的 TCP 端口号，.NET 远程处理将使用该端口号来查找服务。</span><span class="sxs-lookup"><span data-stu-id="57dbf-172">TCP port number used by the Update service, used by .NET remoting to locate the service.</span></span>|<span data-ttu-id="57dbf-173">3132</span><span class="sxs-lookup"><span data-stu-id="57dbf-173">3132</span></span>|<span data-ttu-id="57dbf-174">3132</span><span class="sxs-lookup"><span data-stu-id="57dbf-174">3132</span></span>|  
|<span data-ttu-id="57dbf-175">CacheEntries</span><span class="sxs-lookup"><span data-stu-id="57dbf-175">CacheEntries</span></span>|<span data-ttu-id="57dbf-176">更新服务缓存的规则集的最大数目。</span><span class="sxs-lookup"><span data-stu-id="57dbf-176">Maximum number of rulesets cached by the Update service.</span></span>|<span data-ttu-id="57dbf-177">32</span><span class="sxs-lookup"><span data-stu-id="57dbf-177">32</span></span>|<span data-ttu-id="57dbf-178">32</span><span class="sxs-lookup"><span data-stu-id="57dbf-178">32</span></span>|  
|<span data-ttu-id="57dbf-179">CacheTimeout</span><span class="sxs-lookup"><span data-stu-id="57dbf-179">CacheTimeout</span></span>|<span data-ttu-id="57dbf-180">条目在更新服务缓存中保存的时间（以秒计）。</span><span class="sxs-lookup"><span data-stu-id="57dbf-180">Time in seconds for entries to age out of the Update service cache.</span></span>|<span data-ttu-id="57dbf-181">3600（1 小时）</span><span class="sxs-lookup"><span data-stu-id="57dbf-181">3600 (1 hour)</span></span>|<span data-ttu-id="57dbf-182">3600</span><span class="sxs-lookup"><span data-stu-id="57dbf-182">3600</span></span>|  
|<span data-ttu-id="57dbf-183">PollingInterval</span><span class="sxs-lookup"><span data-stu-id="57dbf-183">PollingInterval</span></span>|<span data-ttu-id="57dbf-184">更新服务检查 SqlRuleStore 以查找更新的时间（以秒计）。</span><span class="sxs-lookup"><span data-stu-id="57dbf-184">Time in seconds for the Update service to check SqlRuleStore for updates.</span></span>|<span data-ttu-id="57dbf-185">60 （1 分钟）</span><span class="sxs-lookup"><span data-stu-id="57dbf-185">60 (1 minute)</span></span>|<span data-ttu-id="57dbf-186">60</span><span class="sxs-lookup"><span data-stu-id="57dbf-186">60</span></span>|  
|<span data-ttu-id="57dbf-187">SqlTimeout</span><span class="sxs-lookup"><span data-stu-id="57dbf-187">SqlTimeout</span></span>|<span data-ttu-id="57dbf-188">访问 SQL 规则存储的 SQL 命令的超时值。</span><span class="sxs-lookup"><span data-stu-id="57dbf-188">Timeout value for SQL commands that access the SQL rule store.</span></span> <span data-ttu-id="57dbf-189">此键的值解释如下：</span><span class="sxs-lookup"><span data-stu-id="57dbf-189">The value for this key is interpreted as follows:</span></span><br /><br /> <span data-ttu-id="57dbf-190">< 0-使用.NET 默认值 （30 秒）</span><span class="sxs-lookup"><span data-stu-id="57dbf-190">< 0 - Uses the .NET default value (30 seconds)</span></span><br /><br /> <span data-ttu-id="57dbf-191">= 0 - 无超时限制</span><span class="sxs-lookup"><span data-stu-id="57dbf-191">= 0 - Unlimited timeout</span></span><br /><br /> <span data-ttu-id="57dbf-192">查询超时之前的 > 0 的最长时间</span><span class="sxs-lookup"><span data-stu-id="57dbf-192">> 0 - Maximum time for a query before it times out</span></span>|<span data-ttu-id="57dbf-193">-1</span><span class="sxs-lookup"><span data-stu-id="57dbf-193">-1</span></span>|<span data-ttu-id="57dbf-194">-1</span><span class="sxs-lookup"><span data-stu-id="57dbf-194">-1</span></span>|  
  
 <span data-ttu-id="57dbf-195">你还可以添加注册表项中所述，名为 StaticSupport[调用的类的静态成员](../core/invoking-static-members-of-a-class.md)。</span><span class="sxs-lookup"><span data-stu-id="57dbf-195">You can also add a registry key named StaticSupport as mentioned in [Invoking Static Members of a Class](../core/invoking-static-members-of-a-class.md).</span></span>  
  
 <span data-ttu-id="57dbf-196">注册表设置对承载规则引擎实例的所有应用程序是全局的。</span><span class="sxs-lookup"><span data-stu-id="57dbf-196">The registry settings are global for all applications that host a rule engine instance.</span></span> <span data-ttu-id="57dbf-197">通过使用应用程序配置文件，可以在应用程序级别重写这些注册表设置。</span><span class="sxs-lookup"><span data-stu-id="57dbf-197">You can override these registry settings at an application level by using the application configuration file.</span></span> <span data-ttu-id="57dbf-198">有关[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]应用程序，主机应用程序是 BTSNTSvc.exe，配置文件是 BTSNTSvc.exe.config，你可以在找到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]安装目录。</span><span class="sxs-lookup"><span data-stu-id="57dbf-198">For [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] applications, the host application is the BTSNTSvc.exe and the configuration file is the BTSNTSvc.exe.config, which you can find in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] installation directory.</span></span>  <span data-ttu-id="57dbf-199">您需要为希望在应用程序配置文件中重写的配置参数指定值，如下所示：</span><span class="sxs-lookup"><span data-stu-id="57dbf-199">You need to specify the values for the configuration parameters that you want to override in the application configuration file as show below:</span></span>  
  
```  
<configuration>  
    <configSections>  
        <section name="Microsoft.RuleEngine" type="System.Configuration.SingleTagSectionHandler" />  
    </configSections>  
    <Microsoft.RuleEngine  
        UpdateServiceHost="localhost"  
        UpdateServicePort="3132"  
        UpdateServiceName="RemoteUpdateService"  
        CacheEntries="32"  
        CacheTimeout="3600"  
        PollingInterval="60"  
        TranslationTimeout="3600"  
        CachePruneInterval="60"  
        DatabaseServer="(localhost)"  
        DatabaseName="BizTalkRuleEngineDb"  
        SqlTimeout="-1"  
        StaticSupport="1"  
    />  
</configuration>  
```