---
title: "WCF NetTcpRelay 适配器 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 7f6c6afc-6aa9-4962-91e6-1fcd92744534
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4ba664facca73dc95093ee52c1026967191a58c2
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="wcf-nettcprelay-adapter"></a><span data-ttu-id="d4b10-102">WCF-NetTcpRelay 适配器</span><span class="sxs-lookup"><span data-stu-id="d4b10-102">WCF-NetTcpRelay Adapter</span></span>
<span data-ttu-id="d4b10-103">Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用**WCF NetTcpRelay**适配器接收和发送通过 WCF 服务请求[NetTcpRelayBinding 类](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses the **WCF-NetTcpRelay** adapter to receive and send WCF service requests through the [NetTcpRelayBinding class](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx).</span></span>  

<span data-ttu-id="d4b10-104">本主题列出了配置的步骤**WCF NetTcpRelay**接收位置和发送端口使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="d4b10-104">This topic lists the steps to configure a **WCF-NetTcpRelay** receive location and send port using the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  

## <a name="before-you-begin"></a><span data-ttu-id="d4b10-105">开始之前</span><span class="sxs-lookup"><span data-stu-id="d4b10-105">Before you begin</span></span>

<span data-ttu-id="d4b10-106">从开始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]，此适配器可以用于服务总线使用访问控制服务 (ACS) 或共享访问签名 (SAS) 到 athenticate。</span><span class="sxs-lookup"><span data-stu-id="d4b10-106">Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)], this adapter can use Access Control Service (ACS) or the Shared Access Signature (SAS) to athenticate with Service Bus.</span></span> <span data-ttu-id="d4b10-107">我们建议使用服务总线进行身份验证时使用共享访问签名 (SAS)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-107">We recommend using the Shared Access Signature (SAS) when authenticating with Service Bus.</span></span> 

<span data-ttu-id="d4b10-108">当你创建了服务总线命名空间时，不自动创建 Access Control (ACS) 命名空间。</span><span class="sxs-lookup"><span data-stu-id="d4b10-108">When you create a Service Bus namespace, the Access Control (ACS) namespace is not automatically created.</span></span> <span data-ttu-id="d4b10-109">如果使用 ACS 进行身份验证，你可能需要创建一个新的 ACS 命名空间。</span><span class="sxs-lookup"><span data-stu-id="d4b10-109">If you use ACS to authenticate, then you may need to create a new ACS namespace.</span></span> <span data-ttu-id="d4b10-110">请参阅[SB 消息适配器](../core/sb-messaging-adapter.md)更多详细信息，包括检索 ACS 密钥值的步骤。</span><span class="sxs-lookup"><span data-stu-id="d4b10-110">See [SB-Messaging adapter](../core/sb-messaging-adapter.md) for more detailed information, including the steps to retrieve the ACS key values.</span></span>
  
## <a name="create-the-receive-location"></a><span data-ttu-id="d4b10-111">创建接收位置</span><span class="sxs-lookup"><span data-stu-id="d4b10-111">Create the receive location</span></span>
 
> [!NOTE]
>  <span data-ttu-id="d4b10-112">之前完成以下过程，你必须已添加单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="d4b10-112">Before completing the following procedure, you must have already added a one-way receive port.</span></span> <span data-ttu-id="d4b10-113">请参阅[如何创建接收端口](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-113">See [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
1.  <span data-ttu-id="d4b10-114">在 BizTalk 管理控制台中，展开**BizTalk Server 管理**，展开**BizTalk 组**，展开**应用程序**，然后展开应用程序你想要创建中的接收位置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-114">In the BizTalk Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to create a receive location in.</span></span>  
  
2.  <span data-ttu-id="d4b10-115">在 BizTalk 管理控制台的左窗格中，单击“接收端口”  节点。</span><span class="sxs-lookup"><span data-stu-id="d4b10-115">In the BizTalk Administration console, in the left pane, click the **Receive Port** node.</span></span> <span data-ttu-id="d4b10-116">随后，在右窗格中右键单击与现有接收位置关联的接收端口或要与新接收位置关联的接收端口，然后单击“属性” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-116">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="d4b10-117">在“接收端口属性”  对话框的左窗格中，选择“接收位置” ，然后在右窗格中双击现有的接收位置或单击“新建”  以创建新的接收位置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-117">In the **Receive Port Properties** dialog box, in the left pane, select **Receive Locations**, and then in the right pane, double-click an existing receive location or click **New** to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="d4b10-118">在“接收位置属性”  对话框的“传输”  部分中，从“类型”  下拉列表中选择“WCF-NetTcpRelay”  ，然后单击“配置”  以配置接收位置的传输属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-118">In the **Receive Location Properties** dialog box, in the **Transport** section, select **WCF-NetTcpRelay** from the **Type** drop-down list, and then click **Configure** to configure the transport properties for the receive location.</span></span>  
  
5.  <span data-ttu-id="d4b10-119">在“WCF-NetTcpRelay 传输属性”  对话框中的“常规”  选项卡上，为 WCF-NetTcpRelay 接收位置配置终结点地址和终结点标识。</span><span class="sxs-lookup"><span data-stu-id="d4b10-119">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **General** tab, configure the endpoint address and the endpoint identity for the WCF-NetTcpRelay receive location.</span></span>  
  
    |<span data-ttu-id="d4b10-120">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-120">Use this</span></span>|<span data-ttu-id="d4b10-121">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-121">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-122">**地址 (URI)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-122">**Address (URI)**</span></span>|<span data-ttu-id="d4b10-123">必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-123">Required.</span></span> <span data-ttu-id="d4b10-124">指定此接收位置的完全限定 URI。</span><span class="sxs-lookup"><span data-stu-id="d4b10-124">Specify the fully qualified URI for this receive location.</span></span> <span data-ttu-id="d4b10-125">此 URI 通常采用以下格式：</span><span class="sxs-lookup"><span data-stu-id="d4b10-125">This will typically be in the following format:</span></span><br /><br /> `sb://<Namespace>.servicebus.windows.net/`|  
    |<span data-ttu-id="d4b10-126">**终结点标识**</span><span class="sxs-lookup"><span data-stu-id="d4b10-126">**Endpoint Identity**</span></span>|<span data-ttu-id="d4b10-127">可选。</span><span class="sxs-lookup"><span data-stu-id="d4b10-127">Optional.</span></span> <span data-ttu-id="d4b10-128">指定终结点标识。</span><span class="sxs-lookup"><span data-stu-id="d4b10-128">Specify the endpoint identity.</span></span> <span data-ttu-id="d4b10-129">通过这些设置，终结点可对此接收位置进行验证。</span><span class="sxs-lookup"><span data-stu-id="d4b10-129">These settings enable the endpoint to authenticate this receive location.</span></span> <span data-ttu-id="d4b10-130">在终结点与接收位置进行握手的过程中，Windows Communication Foundation (WCF) 基础结构将确保终结点的标识与此元素的值保持一致。</span><span class="sxs-lookup"><span data-stu-id="d4b10-130">In the handshake process between the endpoint and the receive location, the Windows Communication Foundation (WCF) infrastructure will ensure that the identity of the endpoint matches the values of this element.</span></span><br /><br /> <span data-ttu-id="d4b10-131">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-131">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-132">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-132">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-133">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-133">The default is an empty string.</span></span>|  
  
6.  <span data-ttu-id="d4b10-134">在“WCF-NetTcpRelay 传输属性”  对话框中的“绑定”  选项卡上，配置超时和事务属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-134">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Binding** tab, configure the time-out and transaction properties.</span></span>  
  
    |<span data-ttu-id="d4b10-135">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-135">Use this</span></span>|<span data-ttu-id="d4b10-136">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-136">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-137">**打开超时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-137">**Open timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-138">指定一个时间跨度值来表示为完成信道打开操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-138">Specify a time span value that indicates the interval of time provided for a channel open operation to complete.</span></span> <span data-ttu-id="d4b10-139">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-139">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span><br /><br /> <span data-ttu-id="d4b10-140">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-140">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-141">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-141">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-142">**发送超时时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-142">**Send timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-143">指定一个时间跨度值来表示为完成发送操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-143">Specify a time span value that indicates the interval of time provided for a send operation to complete.</span></span> <span data-ttu-id="d4b10-144">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-144">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span> <span data-ttu-id="d4b10-145">如果使用请求-响应接收端口，则此值指定完成整个交互的时间跨度（即使客户端返回一条大消息）。</span><span class="sxs-lookup"><span data-stu-id="d4b10-145">If you use a request-response receive port, this value specifies a time span for the whole interaction to complete, even if the client returns a large message.</span></span><br /><br /> <span data-ttu-id="d4b10-146">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-146">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-147">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-147">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-148">**关闭超时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-148">**Close timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-149">指定一个时间跨度值来表示为完成信道关闭操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-149">Specify a time span value that indicates the interval of time provided for a channel close operation to complete.</span></span> <span data-ttu-id="d4b10-150">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-150">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span><br /><br /> <span data-ttu-id="d4b10-151">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-151">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-152">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-152">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-153">**收到的最大消息大小 （字节）**</span><span class="sxs-lookup"><span data-stu-id="d4b10-153">**Maximum received message size (bytes)**</span></span>|<span data-ttu-id="d4b10-154">指定网络上可接收的消息的最大大小（包括标头），以字节表示。</span><span class="sxs-lookup"><span data-stu-id="d4b10-154">Specify the maximum size, in bytes, for a message including headers, which can be received on the wire.</span></span> <span data-ttu-id="d4b10-155">消息的大小受为每条消息分配的内存量的限制。</span><span class="sxs-lookup"><span data-stu-id="d4b10-155">The size of the messages is bounded by the amount of memory allocated for each message.</span></span> <span data-ttu-id="d4b10-156">你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-156">You can use this property to limit exposure to denial of service (DoS) attacks.</span></span><br /><br /> <span data-ttu-id="d4b10-157">WCF NetTcpRelay 适配器利用[NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx)在缓冲的传输模式中与终结点进行通信的类。</span><span class="sxs-lookup"><span data-stu-id="d4b10-157">The WCF-NetTcpRelay adapter leverages the [NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx) class in the buffered transfer mode to communicate with an endpoint.</span></span> <span data-ttu-id="d4b10-158">对于缓冲的传输模式中， [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx)属性也始终等于此属性的值。</span><span class="sxs-lookup"><span data-stu-id="d4b10-158">For the buffered transport mode, the [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx) property is always equal to the value of this property.</span></span><br /><br /> <span data-ttu-id="d4b10-159">默认值：65536</span><span class="sxs-lookup"><span data-stu-id="d4b10-159">Default value: 65536</span></span><br /><br /> <span data-ttu-id="d4b10-160">最大值：2147483647</span><span class="sxs-lookup"><span data-stu-id="d4b10-160">Maximum value: 2147483647</span></span>|  
    |<span data-ttu-id="d4b10-161">**最大并发调用**</span><span class="sxs-lookup"><span data-stu-id="d4b10-161">**Maximum concurrent calls**</span></span>|<span data-ttu-id="d4b10-162">指定针对单个服务实例的并发调用的数目。</span><span class="sxs-lookup"><span data-stu-id="d4b10-162">Specify the number of concurrent calls to a single service instance.</span></span> <span data-ttu-id="d4b10-163">超出此限制的调用将在队列中排队。</span><span class="sxs-lookup"><span data-stu-id="d4b10-163">Calls in excess of the limit are queued.</span></span> <span data-ttu-id="d4b10-164">将该值设置为 0 等效于将它设置为 **Int32.MaxValue**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-164">Setting this value to 0 is equivalent to setting it to **Int32.MaxValue**.</span></span><br /><br /> <span data-ttu-id="d4b10-165">默认值：200</span><span class="sxs-lookup"><span data-stu-id="d4b10-165">Default value: 200</span></span>|  
  
7.  <span data-ttu-id="d4b10-166">在“WCF-NetTcpRelay 传输属性”  对话框中的“安全性”  选项卡上，定义 WCF-NetTcpRelay 接收位置的安全功能。</span><span class="sxs-lookup"><span data-stu-id="d4b10-166">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Security** tab, define the security capabilities of the WCF-NetTcpRelay receive location.</span></span>  
  
    |<span data-ttu-id="d4b10-167">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-167">Use this</span></span>|<span data-ttu-id="d4b10-168">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-168">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-169">**安全模式**</span><span class="sxs-lookup"><span data-stu-id="d4b10-169">**Security mode**</span></span>|<span data-ttu-id="d4b10-170">指定使用的安全类型。</span><span class="sxs-lookup"><span data-stu-id="d4b10-170">Specify the type of security that is used.</span></span> <span data-ttu-id="d4b10-171">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-171">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-172">-                          **无**： 在传输过程不保护消息。</span><span class="sxs-lookup"><span data-stu-id="d4b10-172">-                          **None**: Messages are not secured during transfer.</span></span><br /><br /> <span data-ttu-id="d4b10-173">- **传输**： 使用传输安全提供**TLS over TCP**或**SPNego**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-173">- **Transport**: Transport security is provided using **TLS over TCP** or **SPNego**.</span></span> <span data-ttu-id="d4b10-174">可以使用此模式控制保护级别。</span><span class="sxs-lookup"><span data-stu-id="d4b10-174">It is possible to control the protection level with this mode.</span></span> <span data-ttu-id="d4b10-175">如果在此安全模式中为“传输客户端凭据类型”  属性选择“无”  或“证书”  ，则需要通过“服务证书 - 指纹”  属性提供此接收位置的服务证书。</span><span class="sxs-lookup"><span data-stu-id="d4b10-175">If you select **None** or **Certificate** for the **Transport client credential type** property in this security mode, you must supply the service certificate for this receive location through the **Service certificate - Thumbprint** property.</span></span><br /><br /> <span data-ttu-id="d4b10-176">- **消息**： 使用 SOAP 消息安全提供安全性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-176">- **Message**: Security is provided using SOAP message security.</span></span> <span data-ttu-id="d4b10-177">默认情况下，SOAP“正文”  已加密和签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-177">By default, the SOAP **Body** is encrypted and signed.</span></span> <span data-ttu-id="d4b10-178">这种模式提供了多种功能，例如，服务凭据是否可用于带外客户端以及要使用的算法套件。</span><span class="sxs-lookup"><span data-stu-id="d4b10-178">This mode offers a variety of features, such as whether the service credentials are available at the client out of band, and the algorithm suite to use.</span></span> <span data-ttu-id="d4b10-179">如果在此安全模式中为“消息客户端凭据类型” 属性选择“无” 、“用户名”  或“证书”  ，则必须通过“服务证书 - 指纹”  属性提供此接收位置的服务证书。</span><span class="sxs-lookup"><span data-stu-id="d4b10-179">If you select **None**, **UserName**, or **Certificate** for the **Message client credential type** property in this security mode, you must supply the service certificate for this receive location through the **Service certificate - Thumbprint** property.</span></span><br /><br /> <span data-ttu-id="d4b10-180">-                          **TransportWithMessageCredential**： 与消息安全性结合使用传输安全。</span><span class="sxs-lookup"><span data-stu-id="d4b10-180">-                          **TransportWithMessageCredential**: Transport security is coupled with message security.</span></span> <span data-ttu-id="d4b10-181">传输安全性是通过使用 **TLS over TCP** 或 **SPNego** 来提供的，可确保完整性、机密性以及服务器验证。</span><span class="sxs-lookup"><span data-stu-id="d4b10-181">Transport security is provided by **TLS over TCP** or **SPNego** and ensures integrity, confidentiality, and server authentication.</span></span> <span data-ttu-id="d4b10-182">如果在此安全模式中为“消息客户端凭据类型” 属性选择“Windows” 、“用户名”  或“证书”  ，则需要通过“服务证书 - 指纹”  属性提供此接收位置的服务证书。</span><span class="sxs-lookup"><span data-stu-id="d4b10-182">If you select **Windows**, **UserName**, or **Certificate** for the **Message client credential type** property in this security mode, you must supply the service certificate for this receive location through the **Service certificate - Thumbprint** property.</span></span><br /><br /> <span data-ttu-id="d4b10-183">**注意：**此安全模式不能与使用**传输客户端凭据类型**属性，**无**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-183">**Note:** This security mode cannot be used with the **Transport client credential type** property, **None**.</span></span><br /><br /> <span data-ttu-id="d4b10-184">默认值为“传输” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-184">The default is **Transport**.</span></span>|  
    |<span data-ttu-id="d4b10-185">**传输保护级别**</span><span class="sxs-lookup"><span data-stu-id="d4b10-185">**Transport protection level**</span></span>|<span data-ttu-id="d4b10-186">定义 TCP 传输一级的安全性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-186">Define security at the level of the TCP transport.</span></span> <span data-ttu-id="d4b10-187">消息签名降低了在消息传输过程中第三方对消息进行篡改的风险。</span><span class="sxs-lookup"><span data-stu-id="d4b10-187">Signing messages mitigates the risk of a third party tampering with the message while it is being transferred.</span></span> <span data-ttu-id="d4b10-188">加密为传输过程提供了数据级保密功能。</span><span class="sxs-lookup"><span data-stu-id="d4b10-188">Encryption provides data-level privacy during transport.</span></span> <span data-ttu-id="d4b10-189">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-189">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-190">-                          **无**： 无保护。</span><span class="sxs-lookup"><span data-stu-id="d4b10-190">-                          **None**: No protection.</span></span><br /><br /> <span data-ttu-id="d4b10-191">- **登录**： 对消息进行签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-191">- **Sign**: Messages are signed.</span></span><br /><br /> <span data-ttu-id="d4b10-192">- **EncryptAndSign**： 消息进行加密和签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-192">- **EncryptAndSign**: Messages are encrypted and signed.</span></span><br /><br /> <span data-ttu-id="d4b10-193">默认值为“EncryptAndSign” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-193">The default value is **EncryptAndSign**.</span></span>|  
    |<span data-ttu-id="d4b10-194">**消息客户端凭据类型**</span><span class="sxs-lookup"><span data-stu-id="d4b10-194">**Message client credential type**</span></span>|<span data-ttu-id="d4b10-195">指定使用基于消息的安全性对客户端执行验证时所用的凭据类型。</span><span class="sxs-lookup"><span data-stu-id="d4b10-195">Specify the type of credential to be used when performing client authentication using message-based security.</span></span> <span data-ttu-id="d4b10-196">仅当“安全模式”  设置为 **消息** 或 **TransportWithMessageCredential**时，才需执行此步骤。</span><span class="sxs-lookup"><span data-stu-id="d4b10-196">This is required only if the **Security mode** is set to **Message** or **TransportWithMessageCredential**.</span></span> <span data-ttu-id="d4b10-197">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-197">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-198">-                          **无**： 这允许服务与匿名客户端交互。</span><span class="sxs-lookup"><span data-stu-id="d4b10-198">-                          **None**: This allows the service to interact with anonymous clients.</span></span> <span data-ttu-id="d4b10-199">这表示此客户端不提供任何客户端凭据。</span><span class="sxs-lookup"><span data-stu-id="d4b10-199">This indicates that this client does not provide any client credential.</span></span><br /><br /> <span data-ttu-id="d4b10-200">- **Windows**： 允许 SOAP 交换在已通过身份验证的 Windows 凭据上下文。</span><span class="sxs-lookup"><span data-stu-id="d4b10-200">- **Windows**: Allow the SOAP exchanges to be under the authenticated context of a Windows credential.</span></span> <span data-ttu-id="d4b10-201">客户端凭据是使用 **WSS SOAP Message Security Kerberos Token Profile 1.0** 协议通过 SOAP“标头”  元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-201">The client credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security Kerberos Token Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-202">你必须创建与客户端凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="d4b10-202">You must create the domain or local user accounts corresponding to client credentials.</span></span> <span data-ttu-id="d4b10-203">此外，必须使用运行此接收处理程序的用户帐户名配置客户端的 **userPrincipalName** 元素。</span><span class="sxs-lookup"><span data-stu-id="d4b10-203">In addition, the client's **userPrincipalName** element must be configured with the user account name running this receive handler.</span></span><br /><br /> <span data-ttu-id="d4b10-204">- **用户名**： 客户端进行身份验证到此接收位置使用**用户名**凭据。</span><span class="sxs-lookup"><span data-stu-id="d4b10-204">- **UserName**: Clients are authenticated to this receive location with a **UserName** credential.</span></span> <span data-ttu-id="d4b10-205">此凭据是使用 **WSS SOAP Message Security UsernameToken Profile 1.0** 协议通过 SOAP **Header** 元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-205">The credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security UsernameToken Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-206">你必须创建与客户端凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="d4b10-206">You must create the domain or local user accounts corresponding to client credentials.</span></span><br /><br /> <span data-ttu-id="d4b10-207">-**证书**： 客户端进行身份验证到此接收位置使用通过指定的客户端证书**服务证书的指纹**属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-207">-**Certificate**: Clients are authenticated to this receive location using the client certificate specified through the **Service certificate - Thumbprint** property.</span></span> <span data-ttu-id="d4b10-208">此凭据是使用 **WSS SOAP Message Security X509 Token Profile 1.0** 协议通过 SOAP **Header** 元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-208">The credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security X509 Token Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-209">若要验证客户端证书，必须将客户端证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储区中。</span><span class="sxs-lookup"><span data-stu-id="d4b10-209">To authenticate the client certificates, the CA certificate chain for the client certificates must be installed in the Trusted Root Certification Authorities certificate store of this computer.</span></span> <span data-ttu-id="d4b10-210">此外，你必须通过“服务证书 - 指纹”  属性为此位置提供服务证书。</span><span class="sxs-lookup"><span data-stu-id="d4b10-210">In addition, you must provide the service certificate for this location through the **Service certificate - Thumbprint** property.</span></span><br /><br /> <span data-ttu-id="d4b10-211">默认值为“Windows” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-211">The default is **Windows**.</span></span>|  
    |<span data-ttu-id="d4b10-212">**算法套件**</span><span class="sxs-lookup"><span data-stu-id="d4b10-212">**Algorithm suite**</span></span>|<span data-ttu-id="d4b10-213">指定消息加密和密钥包装算法。</span><span class="sxs-lookup"><span data-stu-id="d4b10-213">Specify the message encryption and key-wrap algorithms.</span></span> <span data-ttu-id="d4b10-214">这些算法与“安全策略语言”(WS-SecurityPolicy) 规范中指定的算法一致。</span><span class="sxs-lookup"><span data-stu-id="d4b10-214">These algorithms map to those specified in the Security Policy Language (WS-SecurityPolicy) specification.</span></span> <span data-ttu-id="d4b10-215">可能的值有：</span><span class="sxs-lookup"><span data-stu-id="d4b10-215">Possible values are:</span></span><br /><br /> <span data-ttu-id="d4b10-216">-                          **Basic128**： 使用 Aes128 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-216">-                          **Basic128**: Use Aes128 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-217">-                          **Basic128Rsa15**： 对消息加密使用 Aes128，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-217">-                          **Basic128Rsa15**: Use Aes128 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-218">-                          **Basic128Sha256**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-218">-                          **Basic128Sha256**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-219">-                          **Basic128Sha256Rsa15**： 对消息加密使用 Aes128，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-219">-                          **Basic128Sha256Rsa15**: Use Aes128 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-220">- **Basic192**： 使用 Aes192 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-220">- **Basic192**: Use Aes192 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-221">- **Basic192Rsa15**： 对消息加密使用 Aes192，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-221">- **Basic192Rsa15**: Use Aes192 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-222">-                          **Basic192Sha256**： 对消息加密使用 Aes192，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-222">-                          **Basic192Sha256**: Use Aes192 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-223">-                          **Basic192Sha256Rsa15**： 对消息加密使用 Aes192，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-223">-                          **Basic192Sha256Rsa15**: Use Aes192 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-224">- **Basic256**： 使用 Aes256 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-224">- **Basic256**: Use Aes256 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-225">-                          **Basic256Rsa15**： 对消息加密使用 Aes256，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-225">-                          **Basic256Rsa15**: Use Aes256 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-226">- **Basic256Sha256**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-226">- **Basic256Sha256**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-227">- **Basic256Sha256Rsa15**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-227">- **Basic256Sha256Rsa15**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-228">- **TripleDes**： 使用 TripleDes 加密，对消息摘要，Rsa oaep-mgf1p 对密钥包装 Sha1。</span><span class="sxs-lookup"><span data-stu-id="d4b10-228">- **TripleDes**: Use TripleDes encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-229">-                          **TripleDesRsa15**： 使用 TripleDes 加密，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-229">-                          **TripleDesRsa15**: Use TripleDes encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-230">- **TripleDesSha256**： 对消息加密使用 TripleDes，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-230">- **TripleDesSha256**: Use TripleDes for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-231">-                          **TripleDesSha256Rsa15**： 对消息加密使用 TripleDes，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-231">-                          **TripleDesSha256Rsa15**: Use TripleDes for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-232">默认值为“Basic256” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-232">The default value is **Basic256**.</span></span>|  
    |<span data-ttu-id="d4b10-233">**服务证书的指纹**</span><span class="sxs-lookup"><span data-stu-id="d4b10-233">**Service certificate -Thumbprint**</span></span>|<span data-ttu-id="d4b10-234">为此接收位置指定 X.509 证书的指纹，客户端利用该指纹验证服务。</span><span class="sxs-lookup"><span data-stu-id="d4b10-234">Specify the thumbprint of the X.509 certificate for this receive location that the clients use to authenticate the service.</span></span> <span data-ttu-id="d4b10-235">使用“浏览”  按钮，导航到“当前用户”  位置中“我的”  存储，然后即可选择指纹。</span><span class="sxs-lookup"><span data-stu-id="d4b10-235">The thumbprint can be selected by navigating the **My** store in the **Current User** location with the **Browse** button.</span></span><br /><br /> <span data-ttu-id="d4b10-236">**注意：**必须安装到的服务证书**当前用户**承载此接收位置接收处理程序的用户帐户的位置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-236">**Note:** You must install the service certificate into the **Current User** location of the user account for the receive handler hosting this receive location.</span></span><br /><br /> <span data-ttu-id="d4b10-237">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-237">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-238">最大长度：40</span><span class="sxs-lookup"><span data-stu-id="d4b10-238">Maximum length: 40</span></span><br /><br /> <span data-ttu-id="d4b10-239">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-239">The default is an empty string.</span></span>|  
    |<span data-ttu-id="d4b10-240">**中继客户端身份验证类型**</span><span class="sxs-lookup"><span data-stu-id="d4b10-240">**Relay client authentication type**</span></span>|<span data-ttu-id="d4b10-241">指定对 Service Bus 中继终结点（可通过其接收消息）进行身份验证的选项。</span><span class="sxs-lookup"><span data-stu-id="d4b10-241">Specify the option to authenticate with the Service Bus relay endpoint from where the message is received.</span></span> <span data-ttu-id="d4b10-242">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-242">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-243">-                          **无**： 无身份验证是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-243">-                          **None**: No authentication is required.</span></span><br /><br /> <span data-ttu-id="d4b10-244">-                          **RelayAccessToken**： 指定此选项可使用的安全令牌以授权与 Service Bus 中继终结点。</span><span class="sxs-lookup"><span data-stu-id="d4b10-244">-                          **RelayAccessToken**: Specify this to use a security token to authorize with the Service Bus Relay endpoint.</span></span><br /><br /> <span data-ttu-id="d4b10-245">默认值为“RelayAccessToken” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-245">The default value is **RelayAccessToken**.</span></span>|  
    |<span data-ttu-id="d4b10-246">**启用服务发现**</span><span class="sxs-lookup"><span data-stu-id="d4b10-246">**Enable service discovery**</span></span>|<span data-ttu-id="d4b10-247">选中此复选框可指定是否在服务注册表中发布服务的行为。</span><span class="sxs-lookup"><span data-stu-id="d4b10-247">Select this check box to specify whether the behavior of the service is published in the Service Registry.</span></span><br /><br /> <span data-ttu-id="d4b10-248">-                          **显示名称**– 指定与该服务发布到服务注册表的名称。</span><span class="sxs-lookup"><span data-stu-id="d4b10-248">-                          **Display name** – Specify the name with which the service is published to the Service Registry.</span></span><br /><br /> <span data-ttu-id="d4b10-249">- **发现模式**– 设置在服务注册表中发布的服务的发现模式。</span><span class="sxs-lookup"><span data-stu-id="d4b10-249">- **Discovery mode** – Set the discovery mode for the service published in the Service Registry.</span></span> <span data-ttu-id="d4b10-250">有关发现模式的详细信息，请参阅[https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx](https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-250">For more information about the discovery modes, see [https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx](https://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx).</span></span>|  
    |<span data-ttu-id="d4b10-251">**访问控制服务**</span><span class="sxs-lookup"><span data-stu-id="d4b10-251">**Access control service**</span></span>|<span data-ttu-id="d4b10-252">适用于[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]和[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]2013年。</span><span class="sxs-lookup"><span data-stu-id="d4b10-252">Applies to [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] and [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 2013.</span></span><br/><br/><span data-ttu-id="d4b10-253">如果将“中继客户端身份验证类型”  设置为“RelayAccessToken” ，请单击“编辑”  按钮，然后指定以下详细信息：</span><span class="sxs-lookup"><span data-stu-id="d4b10-253">If you set the **Relay client authentication type** to **RelayAccessToken**, click the **Edit** button and specify the following details:</span></span><br /><br /> <span data-ttu-id="d4b10-254">- **访问控制服务 STS Uri** – 设置为`https://<Namespace>-sb.accesscontrol.windows.net/`，其中\<命名空间 > 是你的服务总线命名空间。</span><span class="sxs-lookup"><span data-stu-id="d4b10-254">- **Access Control Service STS Uri** – Set this to `https://<Namespace>-sb.accesscontrol.windows.net/`, where \<namespace> is your Service Bus namespace.</span></span><br /><br /> <span data-ttu-id="d4b10-255">- **颁发者名称**– 指定的颁发者名称。</span><span class="sxs-lookup"><span data-stu-id="d4b10-255">- **Issuer Name** – Specify the issuer name.</span></span> <span data-ttu-id="d4b10-256">通常将此值设置为 owner。</span><span class="sxs-lookup"><span data-stu-id="d4b10-256">Typically this is set to owner.</span></span><br /><br /> <span data-ttu-id="d4b10-257">- **颁发者密钥**– 指定的颁发者密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-257">- **Issuer Key** – Specify the issuer key.</span></span><br /><br /> |  
        |<span data-ttu-id="d4b10-258">**服务总线连接信息**</span><span class="sxs-lookup"><span data-stu-id="d4b10-258">**Service Bus connection information**</span></span> | <span data-ttu-id="d4b10-259">新开头[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d4b10-259">New starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span><br/><br/><span data-ttu-id="d4b10-260">选择使用共享访问签名 (SAS) 或 Service Bus 命名空间的访问控制服务 (ACS)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-260">Choose to use the Shared Access Signature (SAS) or Access Control Service (ACS) of the Service Bus namespace.</span></span> <br/><br/><span data-ttu-id="d4b10-261">选择一个选项，然后选择**编辑**输入的密钥信息：</span><span class="sxs-lookup"><span data-stu-id="d4b10-261">Select an option, and then select **Edit** to enter the key information:</span></span><br/><br/> <span data-ttu-id="d4b10-262">- **共享访问签名**： 输入访问密钥名称和访问密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-262">- **Shared Access Signature** : Enter the access key name, and the access key.</span></span> <span data-ttu-id="d4b10-263">这两个值中列出[Azure 门户](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-263">Both values are listed in the [Azure portal](https://portal.azure.com).</span></span><br/> <span data-ttu-id="d4b10-264">- **访问控制服务**： 输入 STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)，颁发者名称和颁发者密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-264">- **Access Control Service** : Enter the STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), Issuer name, and Issuer key.</span></span> <span data-ttu-id="d4b10-265">使用 Windows PowerShell 检索这些值中所述[SB 消息适配器](../core/sb-messaging-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-265">Use Windows PowerShell to retrieve these values, as described in [SB-Messaging adapter](../core/sb-messaging-adapter.md).</span></span> |
  
8.  <span data-ttu-id="d4b10-266">在“WCF-NetTcpRelay 传输属性”  对话框中的“消息”  选项卡上，为 SOAP **Body** 元素指定数据选择。</span><span class="sxs-lookup"><span data-stu-id="d4b10-266">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Messages** tab, specify the data selection for the SOAP **Body** element.</span></span>  
  
    |<span data-ttu-id="d4b10-267">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-267">Use this</span></span>|<span data-ttu-id="d4b10-268">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-268">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-269">**信封--完整\<soap： 信封 >**</span><span class="sxs-lookup"><span data-stu-id="d4b10-269">**Envelope -- entire \<soap:Envelope>**</span></span>|<span data-ttu-id="d4b10-270">从传入消息的整个 SOAP **Envelope** 创建 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-270">Create the BizTalk message body part from the entire SOAP **Envelope** of an incoming message.</span></span><br /><br /> <span data-ttu-id="d4b10-271">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-271">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-272">**正文--内容\<soap： 正文 > 元素**</span><span class="sxs-lookup"><span data-stu-id="d4b10-272">**Body -- contents of \<soap:Body> element**</span></span>|<span data-ttu-id="d4b10-273">使用传入消息的 SOAP **Body** 元素的内容创建 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-273">Use the content of the SOAP **Body** element of an incoming message to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-274">如果 **Body** 元素具有多个子元素，则只有第一个元素将成为 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-274">If the **Body** element has more than one child element, only the first element becomes the BizTalk message body part.</span></span><br /><br /> <span data-ttu-id="d4b10-275">这是默认设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-275">This is the default setting.</span></span>|  
    |<span data-ttu-id="d4b10-276">**路径--由正文路径定位的内容**</span><span class="sxs-lookup"><span data-stu-id="d4b10-276">**Path -- content located by body path**</span></span>|<span data-ttu-id="d4b10-277">使用“正文路径表达式”  文本框中的正文路径表达式创建 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-277">Use the body path expression in the **Body path expression** text box to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-278">针对传入消息的 SOAP **Body** 元素的直接子元素计算正文路径表达式。</span><span class="sxs-lookup"><span data-stu-id="d4b10-278">The body path expression is evaluated against the immediate child element of the SOAP **Body** element of an incoming message.</span></span><br /><br /> <span data-ttu-id="d4b10-279">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-279">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-280">**正文路径表达式**</span><span class="sxs-lookup"><span data-stu-id="d4b10-280">**Body path expression**</span></span>|<span data-ttu-id="d4b10-281">键入正文路径表达式以标识传入消息中用于创建 BizTalk 消息正文部分的特定部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-281">Type the body path expression to identify a specific part of an incoming message used to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-282">针对传入消息的 SOAP **Body** 元素的直接子元素计算此正文路径表达式。</span><span class="sxs-lookup"><span data-stu-id="d4b10-282">This body path expression is evaluated against the immediate child element of the SOAP **Body** element of an incoming message.</span></span> <span data-ttu-id="d4b10-283">如果此正文路径表达式返回多个节点，则只选择第一个节点作为 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-283">If this body path expression returns more than one node, only the first node is chosen for the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-284">如果选择了“路径 -- 按正文路径定位内容”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-284">This property is required if the **Path -- content located by body path** option is selected.</span></span><br /><br /> <span data-ttu-id="d4b10-285">类型：字符串</span><span class="sxs-lookup"><span data-stu-id="d4b10-285">Type: String</span></span><br /><br /> <span data-ttu-id="d4b10-286">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-286">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-287">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-287">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-288">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-288">The default is an empty string.</span></span>|  
    |<span data-ttu-id="d4b10-289">**节点编码**</span><span class="sxs-lookup"><span data-stu-id="d4b10-289">**Node encoding**</span></span>|<span data-ttu-id="d4b10-290">指定 WCF-NetTcpRelay 接收适配器为“正文路径表达式”  文本框中正文路径表达式标识的节点进行解码所采用的编码类型。</span><span class="sxs-lookup"><span data-stu-id="d4b10-290">Specify the type of encoding that the WCF-NetTcpRelay receive adapter uses to decode for the node identified by the body path expression in the **Body path expression** text box.</span></span> <span data-ttu-id="d4b10-291">如果选择了“路径 -- 按正文路径定位内容”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-291">This property is required if the **Path -- content located by body path** option is selected.</span></span> <span data-ttu-id="d4b10-292">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-292">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-293">- **Base64**: Base64 编码。</span><span class="sxs-lookup"><span data-stu-id="d4b10-293">- **Base64**: Base64 encoding.</span></span><br /><br /> <span data-ttu-id="d4b10-294">- **十六进制**： 十六进制编码。</span><span class="sxs-lookup"><span data-stu-id="d4b10-294">- **Hex**: Hexadecimal encoding.</span></span><br /><br /> <span data-ttu-id="d4b10-295">-                          **字符串**： 文本编码的 utf-8</span><span class="sxs-lookup"><span data-stu-id="d4b10-295">-                          **String**: Text encoding - UTF-8</span></span><br /><br /> <span data-ttu-id="d4b10-296">-                          **XML**: WCF 适配器使用由正文路径表达式中所选节点的外部 XML 创建 BizTalk 消息正文**正文路径表达式**文本框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-296">-                          **XML**: The WCF adapters create the BizTalk message body with the outer XML of the node selected by the body path expression in the **Body path expression** text box.</span></span><br /><br /> <span data-ttu-id="d4b10-297">默认值为“XML” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-297">The default is **XML**.</span></span>|  
    |<span data-ttu-id="d4b10-298">**正文--BizTalk 响应消息正文**</span><span class="sxs-lookup"><span data-stu-id="d4b10-298">**Body -- BizTalk response message body**</span></span>|<span data-ttu-id="d4b10-299">使用 BizTalk 消息正文部分创建传出响应消息的 SOAP **Body** 元素的内容。</span><span class="sxs-lookup"><span data-stu-id="d4b10-299">Use the BizTalk message body part to create the content of the SOAP **Body** element of an outgoing response message.</span></span> <span data-ttu-id="d4b10-300">此属性仅对请求响应接收位置有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-300">This property is valid only for request-response receive locations.</span></span><br /><br /> <span data-ttu-id="d4b10-301">这是默认设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-301">This is the default setting.</span></span>|  
    |<span data-ttu-id="d4b10-302">**指定模板的模板--内容**</span><span class="sxs-lookup"><span data-stu-id="d4b10-302">**Template -- content specified by template**</span></span>|<span data-ttu-id="d4b10-303">使用在“XML”  文本框中提供的模板创建传出消息的 SOAP **Body** 元素的内容。</span><span class="sxs-lookup"><span data-stu-id="d4b10-303">Use the template supplied in the **XML** text box to create the content of the SOAP **Body** element for an outgoing message.</span></span> <span data-ttu-id="d4b10-304">此属性仅对请求响应接收位置有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-304">This property is valid only for request-response receive locations.</span></span><br /><br /> <span data-ttu-id="d4b10-305">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-305">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-306">**XML**</span><span class="sxs-lookup"><span data-stu-id="d4b10-306">**XML**</span></span>|<span data-ttu-id="d4b10-307">为传出消息的 SOAP **Body** 元素的内容键入 XML 格式的模板。</span><span class="sxs-lookup"><span data-stu-id="d4b10-307">Type the XML-formatted template for the content of the SOAP **Body** element of an outgoing message.</span></span> <span data-ttu-id="d4b10-308">如果选择了“模板 -- BizTalk 响应消息正文”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-308">This property is required if the **Template -- BizTalk response message body** option is selected.</span></span> <span data-ttu-id="d4b10-309">此属性仅对请求响应接收位置有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-309">This property is valid only for request-response receive locations.</span></span><br /><br /> <span data-ttu-id="d4b10-310">类型：字符串</span><span class="sxs-lookup"><span data-stu-id="d4b10-310">Type: String</span></span><br /><br /> <span data-ttu-id="d4b10-311">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-311">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-312">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-312">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-313">默认值是 **\<bts 消息正文 xmlns ="http://www.microsoft.com/schemas/bts2007"编码 ="xml"/ >**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-313">The default is **\<bts-msg-body xmlns="http://www.microsoft.com/schemas/bts2007" encoding="xml"/>**.</span></span>|
    |<span data-ttu-id="d4b10-314">**挂起失败的请求消息**</span><span class="sxs-lookup"><span data-stu-id="d4b10-314">**Suspend request message on failure**</span></span>|<span data-ttu-id="d4b10-315">指定是否将由于接收管道故障或路由故障而导致入站处理失败的请求消息挂起。</span><span class="sxs-lookup"><span data-stu-id="d4b10-315">Specify whether to suspend the request message that fails inbound processing due to a receive pipeline failure or a routing failure.</span></span><br /><br /> <span data-ttu-id="d4b10-316">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-316">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-317">**错误中包括异常详细信息**</span><span class="sxs-lookup"><span data-stu-id="d4b10-317">**Include exception detail in faults**</span></span>|<span data-ttu-id="d4b10-318">指定发生错误时是否返回 SOAP 错误以方便进行调试。</span><span class="sxs-lookup"><span data-stu-id="d4b10-318">Specify whether to return SOAP faults when an error occurs to easy debugging.</span></span><br /><br /> <span data-ttu-id="d4b10-319">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-319">The default value is cleared.</span></span>|  
  
9. <span data-ttu-id="d4b10-320">单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-320">Click **OK**.</span></span>  
  
10. <span data-ttu-id="d4b10-321">在“接收位置属性”  对话框中输入相应的值，完成对接收位置的配置，然后单击“确定”  保存设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-321">Enter the appropriate values in the **Receive Location Properties** dialog box to complete the configuration of the receive location and click **OK** to save settings.</span></span> <span data-ttu-id="d4b10-322">璝惠**接收位置属性**对话框中，请参阅[如何创建接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-322">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span> 
  
## <a name="create-the-send-port"></a><span data-ttu-id="d4b10-323">创建发送端口</span><span class="sxs-lookup"><span data-stu-id="d4b10-323">Create the send port</span></span>
  
1.  <span data-ttu-id="d4b10-324">在 BizTalk 管理控制台中，创建一个新的发送端口或双击某个现有发送端口以对其进行修改。</span><span class="sxs-lookup"><span data-stu-id="d4b10-324">In the BizTalk Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="d4b10-325">有关详细信息，请参阅[如何创建发送端口](../core/how-to-create-a-send-port2.md)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-325">For more information, see [How to Create a Send Port](../core/how-to-create-a-send-port2.md).</span></span> <span data-ttu-id="d4b10-326">配置所有发送端口选项并指定**WCF NetTcpRelay**为**类型**选项**传输**部分**常规**选项卡。</span><span class="sxs-lookup"><span data-stu-id="d4b10-326">Configure all of the send port options and specify **WCF-NetTcpRelay** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  
  
2.  <span data-ttu-id="d4b10-327">上**常规**选项卡上，在**传输**部分中，单击**配置**按钮。</span><span class="sxs-lookup"><span data-stu-id="d4b10-327">On the **General** tab, in the **Transport** section, click the **Configure** button.</span></span>  
  
3.  <span data-ttu-id="d4b10-328">在**WCF NetTcpRelay 传输属性**对话框中，在**常规**选项卡上，指定下列各项：</span><span class="sxs-lookup"><span data-stu-id="d4b10-328">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **General** tab, specify the following:</span></span>  
  
    |<span data-ttu-id="d4b10-329">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-329">Use this</span></span>|<span data-ttu-id="d4b10-330">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-330">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-331">**地址 (URI)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-331">**Address (URI)**</span></span>|<span data-ttu-id="d4b10-332">必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-332">Required.</span></span> <span data-ttu-id="d4b10-333">指定发送端口的完全限定 URI。</span><span class="sxs-lookup"><span data-stu-id="d4b10-333">Specify the fully qualified URI for the send port.</span></span> <span data-ttu-id="d4b10-334">此 URI 通常采用以下格式：</span><span class="sxs-lookup"><span data-stu-id="d4b10-334">This will typically be in the following format:</span></span><br /><br /> `sb://<Namespace>.servicebus.windows.net/`<br /><br /> <span data-ttu-id="d4b10-335">最大长度： 255</span><span class="sxs-lookup"><span data-stu-id="d4b10-335">Maximum length: 255</span></span><br /><br /> <span data-ttu-id="d4b10-336">默认值： net.tcp://localhost/</span><span class="sxs-lookup"><span data-stu-id="d4b10-336">Default value: net.tcp://localhost/</span></span>|  
    |<span data-ttu-id="d4b10-337">**终结点标识**</span><span class="sxs-lookup"><span data-stu-id="d4b10-337">**Endpoint Identity**</span></span>|<span data-ttu-id="d4b10-338">可选。</span><span class="sxs-lookup"><span data-stu-id="d4b10-338">Optional.</span></span> <span data-ttu-id="d4b10-339">指定此发送端口将消息发送到的终结点的标识。</span><span class="sxs-lookup"><span data-stu-id="d4b10-339">Specify the identity of the endpoint that this send port sends the message to.</span></span> <span data-ttu-id="d4b10-340">这些设置，此发送端口进行身份验证终结点。</span><span class="sxs-lookup"><span data-stu-id="d4b10-340">These settings enable this send port to authenticate the endpoint.</span></span> <span data-ttu-id="d4b10-341">在终结点和发送端口之间握手过程中，Windows Communication Foundation (WCF) 基础结构将确保终结点的标识与此元素的值匹配。</span><span class="sxs-lookup"><span data-stu-id="d4b10-341">In the handshake process between the endpoint and send port, the Windows Communication Foundation (WCF) infrastructure will ensure that the identity of the endpoint matches the values of this element.</span></span> <span data-ttu-id="d4b10-342">可以为指定的值**终结点标识**属性而异的安全配置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-342">The values that can be specified for the **Endpoint identity** property differ according to the security configuration.</span></span><br /><br /> <span data-ttu-id="d4b10-343">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-343">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-344">**操作**</span><span class="sxs-lookup"><span data-stu-id="d4b10-344">**Action**</span></span>|<span data-ttu-id="d4b10-345">指定**SOAP 操作**传出消息的标头字段。</span><span class="sxs-lookup"><span data-stu-id="d4b10-345">Specify the **SOAP Action** header field for outgoing messages.</span></span> <span data-ttu-id="d4b10-346">此外可以通过消息上下文属性设置此属性**WCF。操作**在管道或业务流程。</span><span class="sxs-lookup"><span data-stu-id="d4b10-346">This property can also be set through the message context property **WCF.Action** in a pipeline or orchestration.</span></span> <span data-ttu-id="d4b10-347">你可以通过两种方式指定此值： 单个操作格式和操作映射格式。</span><span class="sxs-lookup"><span data-stu-id="d4b10-347">You can specify this value in two different ways: the single action format and the action mapping format.</span></span> <span data-ttu-id="d4b10-348">如果将此属性设置中的单个操作格式-例如，http://contoso.com/Svc/Op1- **SOAPAction**标头为传出消息始终设置为此属性中指定的值。</span><span class="sxs-lookup"><span data-stu-id="d4b10-348">If you set this property in the single action format- for example, http://contoso.com/Svc/Op1- the **SOAPAction** header for outgoing messages is always set to the value specified in this property.</span></span><br /><br /> <span data-ttu-id="d4b10-349">如果在操作映射格式，传出中设置此属性**SOAPAction**标头由**BTS。操作**上下文属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-349">If you set this property in the action mapping format, the outgoing **SOAPAction** header is determined by the **BTS.Operation** context property.</span></span> <span data-ttu-id="d4b10-350">例如，如果此属性设置为以下 XML 格式和**BTS。操作**属性设置为 Op1，WCF 发送适配器`uses http://contoso.com/Svc/Op1`为传出**SOAPAction**标头。</span><span class="sxs-lookup"><span data-stu-id="d4b10-350">For example, if this property is set to the following XML format and the **BTS.Operation** property is set to Op1, the WCF send adapter `uses http://contoso.com/Svc/Op1` for the outgoing **SOAPAction** header.</span></span><br /><br /> `<BtsActionMapping> <Operation Name="Op1" Action="http://contoso.com/Svc/Op1" /> <Operation Name="Op2" Action="http://contoso.com/Svc/Op2" /> </BtsActionMapping>`<br /><br /> <span data-ttu-id="d4b10-351">如果传出消息来自的业务流程端口时，动态设置业务流程实例**BTS。操作**与操作名称的端口的属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-351">If outgoing messages come from an orchestration port, orchestration instances dynamically set the **BTS.Operation** property with the operation name of the port.</span></span> <span data-ttu-id="d4b10-352">如果使用基于内容的路由路由传出消息，则可以设置**BTS。操作**管道组件中的属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-352">If outgoing messages are routed with content-based routing, you can set the **BTS.Operation** property in pipeline components.</span></span><br /><br /> <span data-ttu-id="d4b10-353">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-353">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-354">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-354">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-355">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-355">The default is an empty string.</span></span>|  
  
4.  <span data-ttu-id="d4b10-356">在“WCF-NetTcpRelay 传输属性”  对话框中的“绑定”  选项卡上，配置超时和事务属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-356">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Binding** tab, configure the time-out and transaction properties.</span></span>  
  
    |<span data-ttu-id="d4b10-357">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-357">Use this</span></span>|<span data-ttu-id="d4b10-358">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-358">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-359">**打开超时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-359">**Open timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-360">指定一个时间跨度值来表示为完成信道打开操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-360">Specify a time span value that indicates the interval of time provided for a channel open operation to complete.</span></span> <span data-ttu-id="d4b10-361">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-361">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span><br /><br /> <span data-ttu-id="d4b10-362">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-362">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-363">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-363">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-364">**发送超时时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-364">**Send timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-365">指定一个时间跨度值来表示为完成发送操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-365">Specify a time span value that indicates the interval of time provided for a send operation to complete.</span></span> <span data-ttu-id="d4b10-366">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-366">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span> <span data-ttu-id="d4b10-367">如果使用要求-响应发送端口，则此值指定完成整个交互的时间跨度（即使服务返回一条大消息）。</span><span class="sxs-lookup"><span data-stu-id="d4b10-367">If you use a solicit-response send port, this value specifies a time span for the whole interaction to complete, even if the service returns a large message.</span></span><br /><br /> <span data-ttu-id="d4b10-368">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-368">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-369">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-369">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-370">**关闭超时 (hh:mmss)**</span><span class="sxs-lookup"><span data-stu-id="d4b10-370">**Close timeout (hh:mmss)**</span></span>|<span data-ttu-id="d4b10-371">指定一个时间跨度值来表示为完成信道关闭操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="d4b10-371">Specify a time span value that indicates the interval of time provided for a channel close operation to complete.</span></span> <span data-ttu-id="d4b10-372">此值应大于或等于 **System.TimeSpan.Zero**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-372">This value should be greater than or equal to **System.TimeSpan.Zero**.</span></span><br /><br /> <span data-ttu-id="d4b10-373">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="d4b10-373">Default value: 00:01:00</span></span><br /><br /> <span data-ttu-id="d4b10-374">最大值：23:59:59</span><span class="sxs-lookup"><span data-stu-id="d4b10-374">Maximum value:  23:59:59</span></span>|  
    |<span data-ttu-id="d4b10-375">**收到的最大消息大小 （字节）**</span><span class="sxs-lookup"><span data-stu-id="d4b10-375">**Maximum received message size (bytes)**</span></span>|<span data-ttu-id="d4b10-376">指定网络上可接收的消息的最大大小（包括标头），以字节表示。</span><span class="sxs-lookup"><span data-stu-id="d4b10-376">Specify the maximum size, in bytes, for a message including headers, which can be received on the wire.</span></span> <span data-ttu-id="d4b10-377">消息的大小受为每条消息分配的内存量的限制。</span><span class="sxs-lookup"><span data-stu-id="d4b10-377">The size of the messages is bounded by the amount of memory allocated for each message.</span></span> <span data-ttu-id="d4b10-378">你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-378">You can use this property to limit exposure to denial of service (DoS) attacks.</span></span><br /><br /> <span data-ttu-id="d4b10-379">WCF NetTcpRelay 适配器利用[NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx)在缓冲的传输模式中与终结点进行通信的类。</span><span class="sxs-lookup"><span data-stu-id="d4b10-379">The WCF-NetTcpRelay adapter leverages the [NetTcpRelayBinding](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybinding.aspx) class in the buffered transfer mode to communicate with an endpoint.</span></span> <span data-ttu-id="d4b10-380">对于缓冲的传输模式中， [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx)属性也始终等于此属性的值。</span><span class="sxs-lookup"><span data-stu-id="d4b10-380">For the buffered transport mode, the [NetTcpRelayBindingBase.MaxBufferSize](https://msdn.microsoft.com/library/azure/microsoft.servicebus.nettcprelaybindingbase.maxbuffersize.aspx) property is always equal to the value of this property.</span></span><br /><br /> <span data-ttu-id="d4b10-381">默认值：65536</span><span class="sxs-lookup"><span data-stu-id="d4b10-381">Default value: 65536</span></span><br /><br /> <span data-ttu-id="d4b10-382">最大值：2147483647</span><span class="sxs-lookup"><span data-stu-id="d4b10-382">Maximum value: 2147483647</span></span>|  
  
5.  <span data-ttu-id="d4b10-383">在**WCF NetTcpRelay 传输属性**对话框中，在**安全**选项卡上，定义 WCF NetTcpRelay 发送端口的安全功能。</span><span class="sxs-lookup"><span data-stu-id="d4b10-383">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Security** tab, define the security capabilities of the WCF-NetTcpRelay send port.</span></span>  
  
    |<span data-ttu-id="d4b10-384">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-384">Use this</span></span>|<span data-ttu-id="d4b10-385">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-385">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-386">**安全模式**</span><span class="sxs-lookup"><span data-stu-id="d4b10-386">**Security mode**</span></span>|<span data-ttu-id="d4b10-387">指定使用的安全类型。</span><span class="sxs-lookup"><span data-stu-id="d4b10-387">Specify the type of security that is used.</span></span> <span data-ttu-id="d4b10-388">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-388">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-389">- **无**： 在传输过程不保护消息。</span><span class="sxs-lookup"><span data-stu-id="d4b10-389">- **None**: Messages are not secured during transfer.</span></span><br /><br /> <span data-ttu-id="d4b10-390">- **传输**： 使用传输安全提供**TLS over TCP**或**SPNego**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-390">- **Transport**: Transport security is provided using **TLS over TCP** or **SPNego**.</span></span> <span data-ttu-id="d4b10-391">可以使用此模式控制保护级别。</span><span class="sxs-lookup"><span data-stu-id="d4b10-391">It is possible to control the protection level with this mode.</span></span><br /><br /> <span data-ttu-id="d4b10-392">-                          **消息**： 使用 SOAP 消息安全提供安全性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-392">-                          **Message**: Security is provided using SOAP message security.</span></span> <span data-ttu-id="d4b10-393">默认情况下，SOAP“正文”  已加密和签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-393">By default, the SOAP **Body** is encrypted and signed.</span></span> <span data-ttu-id="d4b10-394">这种模式提供了多种功能，例如，服务凭据是否可用于带外客户端以及要使用的算法套件。</span><span class="sxs-lookup"><span data-stu-id="d4b10-394">This mode offers a variety of features, such as whether the service credentials are available at the client out of band, and the algorithm suite to use.</span></span><br /><br /> <span data-ttu-id="d4b10-395">- **TransportWithMessageCredential**： 与消息安全性结合使用传输安全。</span><span class="sxs-lookup"><span data-stu-id="d4b10-395">- **TransportWithMessageCredential**: Transport security is coupled with message security.</span></span> <span data-ttu-id="d4b10-396">通过提供传输安全**TLS over TCP**，或**SPNego**，并确保完整性、 保密性和服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="d4b10-396">Transport security is provided by **TLS over TCP**, or **SPNego**, and ensures integrity, confidentiality, and server authentication.</span></span> <span data-ttu-id="d4b10-397">SOAP 消息安全性提供客户端验证。</span><span class="sxs-lookup"><span data-stu-id="d4b10-397">SOAP message security provides client authentication.</span></span> <span data-ttu-id="d4b10-398">若要使用此模式，必须将服务的 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储区中，以便向发送端口验证该服务。</span><span class="sxs-lookup"><span data-stu-id="d4b10-398">To use this mode, the CA certificate chain for the service's X.509 certificate must be installed in the Trusted Root Certification Authorities certificate store of this computer so that the service can be authenticated to the send port.</span></span><br /><br /> <span data-ttu-id="d4b10-399">**注意：**此安全模式不能与使用**传输客户端凭据类型**属性，**无**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-399">**Note:** This security mode cannot be used with the **Transport client credential type** property, **None**.</span></span><br /><br /> <span data-ttu-id="d4b10-400">默认值为“传输” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-400">The default is **Transport**.</span></span>|  
    |<span data-ttu-id="d4b10-401">**传输保护级别**</span><span class="sxs-lookup"><span data-stu-id="d4b10-401">**Transport protection level**</span></span>|<span data-ttu-id="d4b10-402">定义 TCP 传输一级的安全性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-402">Define security at the level of the TCP transport.</span></span> <span data-ttu-id="d4b10-403">消息签名降低了在消息传输过程中第三方对消息进行篡改的风险。</span><span class="sxs-lookup"><span data-stu-id="d4b10-403">Signing messages mitigates the risk of a third party tampering with the message while it is being transferred.</span></span> <span data-ttu-id="d4b10-404">加密为传输过程提供了数据级保密功能。</span><span class="sxs-lookup"><span data-stu-id="d4b10-404">Encryption provides data-level privacy during transport.</span></span> <span data-ttu-id="d4b10-405">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-405">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-406">-                          **无**： 无保护。</span><span class="sxs-lookup"><span data-stu-id="d4b10-406">-                          **None**: No protection.</span></span><br /><br /> <span data-ttu-id="d4b10-407">- **登录**： 对消息进行签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-407">- **Sign**: Messages are signed.</span></span><br /><br /> <span data-ttu-id="d4b10-408">-                          **EncryptAndSign**： 消息进行加密和签名。</span><span class="sxs-lookup"><span data-stu-id="d4b10-408">-                          **EncryptAndSign**: Messages are encrypted and signed.</span></span><br /><br /> <span data-ttu-id="d4b10-409">默认值为“EncryptAndSign” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-409">The default value is **EncryptAndSign**.</span></span>|  
    |<span data-ttu-id="d4b10-410">**消息客户端凭据类型**</span><span class="sxs-lookup"><span data-stu-id="d4b10-410">**Message client credential type**</span></span>|<span data-ttu-id="d4b10-411">指定使用基于消息的安全性对客户端执行验证时所用的凭据类型。</span><span class="sxs-lookup"><span data-stu-id="d4b10-411">Specify the type of credential to be used when performing client authentication using message-based security.</span></span> <span data-ttu-id="d4b10-412">仅当“安全模式”  设置为 **消息** 或 **TransportWithMessageCredential**时，才需执行此步骤。</span><span class="sxs-lookup"><span data-stu-id="d4b10-412">This is required only if the **Security mode** is set to **Message** or **TransportWithMessageCredential**.</span></span> <span data-ttu-id="d4b10-413">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-413">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-414">- **无**： 这允许服务与匿名客户端交互。</span><span class="sxs-lookup"><span data-stu-id="d4b10-414">- **None**: This allows the service to interact with anonymous clients.</span></span> <span data-ttu-id="d4b10-415">这表示此发送端口不提供任何客户端凭据。</span><span class="sxs-lookup"><span data-stu-id="d4b10-415">This indicates that this send port does not provide any client credential.</span></span> <span data-ttu-id="d4b10-416">必须将服务 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储区中，以便向发送端口验证该服务。</span><span class="sxs-lookup"><span data-stu-id="d4b10-416">The CA certificate chain for the service X.509 certificate must be installed in the Trusted Root Certification Authorities certificate store of this computer so that the service can be authenticated to the send port.</span></span><br /><br /> <span data-ttu-id="d4b10-417">-                          **Windows**： 允许 SOAP 交换在已通过身份验证的 Windows 凭据上下文。</span><span class="sxs-lookup"><span data-stu-id="d4b10-417">-                          **Windows**: Allow the SOAP exchanges to be under the authenticated context of a Windows credential.</span></span> <span data-ttu-id="d4b10-418">服务使用运行此发送端口的用户帐户来验证此发送端口。</span><span class="sxs-lookup"><span data-stu-id="d4b10-418">The user account under which this send port runs is used for services to authenticate this send port.</span></span> <span data-ttu-id="d4b10-419">客户端凭据是使用 **WSS SOAP Message Security Kerberos Token Profile 1.0** 协议通过 SOAP“标头”  元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-419">The client credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security Kerberos Token Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-420">你必须配置**用户主体名称**属性设置为使用运行目标服务的用户帐户名称**标识编辑器**对话框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-420">You must configure the **User principal name** property to the user account name running the destination service by using the **Identity Editor** dialog box.</span></span><br /><br /> <span data-ttu-id="d4b10-421">- **用户名**： 此发送端口与服务进行身份验证**用户名**凭据。</span><span class="sxs-lookup"><span data-stu-id="d4b10-421">- **UserName**: This send port is authenticated to services with a **UserName** credential.</span></span> <span data-ttu-id="d4b10-422">此凭据是使用 **WSS SOAP Message Security UsernameToken Profile 1.0** 协议通过 SOAP **Header** 元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-422">The credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security UsernameToken Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-423">此选项需要配置**客户端凭据**属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-423">This option requires configuring the **Client credentials** property.</span></span> <span data-ttu-id="d4b10-424">必须将服务 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储区中，以便向发送端口验证该服务。</span><span class="sxs-lookup"><span data-stu-id="d4b10-424">The CA certificate chain for the service X.509 certificate must be installed in the Trusted Root Certification Authorities certificate store of this computer so that the service can be authenticated to the send port.</span></span><br /><br /> <span data-ttu-id="d4b10-425">- **证书**： 此发送端口使用通过指定的客户端证书对服务进行身份验证**客户端证书的指纹**属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-425">- **Certificate**: This send port is authenticated to services using the client certificate specified through the **Client certificate - Thumbprint** property.</span></span> <span data-ttu-id="d4b10-426">此凭据是使用 **WSS SOAP Message Security X509 Token Profile 1.0** 协议通过 SOAP **Header** 元素传递的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-426">The credential is passed through the SOAP **Header** element using the **WSS SOAP Message Security X509 Token Profile 1.0** protocol.</span></span> <span data-ttu-id="d4b10-427">必须将服务 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储区中，以便向发送端口验证该服务。</span><span class="sxs-lookup"><span data-stu-id="d4b10-427">The CA certificate chain for the service X.509 certificate must be installed in the Trusted Root Certification Authorities certificate store of this computer so that the service can be authenticated to the send port.</span></span><br /><br /> <span data-ttu-id="d4b10-428">默认值为“Windows” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-428">The default is **Windows**.</span></span>|  
    |<span data-ttu-id="d4b10-429">**算法套件**</span><span class="sxs-lookup"><span data-stu-id="d4b10-429">**Algorithm suite**</span></span>|<span data-ttu-id="d4b10-430">指定消息加密和密钥包装算法。</span><span class="sxs-lookup"><span data-stu-id="d4b10-430">Specify the message encryption and key-wrap algorithms.</span></span> <span data-ttu-id="d4b10-431">这些算法与“安全策略语言”(WS-SecurityPolicy) 规范中指定的算法一致。</span><span class="sxs-lookup"><span data-stu-id="d4b10-431">These algorithms map to those specified in the Security Policy Language (WS-SecurityPolicy) specification.</span></span> <span data-ttu-id="d4b10-432">可能的值有：</span><span class="sxs-lookup"><span data-stu-id="d4b10-432">Possible values are:</span></span><br /><br /> <span data-ttu-id="d4b10-433">- **Basic128**： 使用 Aes128 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-433">- **Basic128**: Use Aes128 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-434">- **Basic128Rsa15**： 对消息加密使用 Aes128，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-434">- **Basic128Rsa15**: Use Aes128 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-435">-                          **Basic128Sha256**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-435">-                          **Basic128Sha256**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-436">-                          **Basic128Sha256Rsa15**： 对消息加密使用 Aes128，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-436">-                          **Basic128Sha256Rsa15**: Use Aes128 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-437">- **Basic192**： 使用 Aes192 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-437">- **Basic192**: Use Aes192 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-438">-                          **Basic192Rsa15**： 对消息加密使用 Aes192，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-438">-                          **Basic192Rsa15**: Use Aes192 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-439">- **Basic192Sha256**： 对消息加密使用 Aes192，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-439">- **Basic192Sha256**: Use Aes192 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-440">-                          **Basic192Sha256Rsa15**： 对消息加密使用 Aes192，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-440">-                          **Basic192Sha256Rsa15**: Use Aes192 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-441">-                          **Basic256**： 使用 Aes256 加密，对消息摘要的 Sha1，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-441">-                          **Basic256**: Use Aes256 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-442">- **Basic256Rsa15**： 对消息加密使用 Aes256，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-442">- **Basic256Rsa15**: Use Aes256 for message encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-443">- **Basic256Sha256**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-443">- **Basic256Sha256**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-444">- **Basic256Sha256Rsa15**： 对消息加密使用 Aes256，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-444">- **Basic256Sha256Rsa15**: Use Aes256 for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-445">-                          **TripleDes**： 使用 TripleDes 加密，对消息摘要，Rsa oaep-mgf1p 对密钥包装 Sha1。</span><span class="sxs-lookup"><span data-stu-id="d4b10-445">-                          **TripleDes**: Use TripleDes encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-446">- **TripleDesRsa15**： 使用 TripleDes 加密，对消息摘要的 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-446">- **TripleDesRsa15**: Use TripleDes encryption, Sha1 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-447">- **TripleDesSha256**： 对消息加密使用 TripleDes，对消息摘要的 Sha256，对密钥包装的 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="d4b10-447">- **TripleDesSha256**: Use TripleDes for message encryption, Sha256 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-448">-                          **TripleDesSha256Rsa15**： 对消息加密使用 TripleDes，对消息摘要的 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="d4b10-448">-                          **TripleDesSha256Rsa15**: Use TripleDes for message encryption, Sha256 for message digest, and Rsa15 for key wrap.</span></span><br /><br /> <span data-ttu-id="d4b10-449">默认值为“Basic256” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-449">The default value is **Basic256**.</span></span>|  
    |<span data-ttu-id="d4b10-450">**客户端证书的指纹**</span><span class="sxs-lookup"><span data-stu-id="d4b10-450">**Client certificate -Thumbprint**</span></span>|<span data-ttu-id="d4b10-451">指定向服务验证此发送端口时使用的 X.509 证书的指纹。</span><span class="sxs-lookup"><span data-stu-id="d4b10-451">Specify the thumbprint of the X.509 certificate for authenticating this send port to a service.</span></span> <span data-ttu-id="d4b10-452">使用“浏览”  按钮，导航到“当前用户”  位置中“我的”  存储，然后即可选择指纹。</span><span class="sxs-lookup"><span data-stu-id="d4b10-452">The thumbprint can be selected by navigating the **My** store in the **Current User** location with the **Browse** button.</span></span><br /><br /> <span data-ttu-id="d4b10-453">**注意：**必须安装到客户端证书**当前用户**承载该发送处理程序的用户帐户的位置发送端口。</span><span class="sxs-lookup"><span data-stu-id="d4b10-453">**Note:** You must install the client certificate into the **Current User** location of the user account for the send handler hosting this send port.</span></span><br /><br /> <span data-ttu-id="d4b10-454">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-454">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-455">最大长度：40</span><span class="sxs-lookup"><span data-stu-id="d4b10-455">Maximum length: 40</span></span><br /><br /> <span data-ttu-id="d4b10-456">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-456">The default is an empty string.</span></span>|  
    |<span data-ttu-id="d4b10-457">**用户名凭据**</span><span class="sxs-lookup"><span data-stu-id="d4b10-457">**User name credentials**</span></span>|<span data-ttu-id="d4b10-458">指定用于发送消息时使用的凭据**用户名**为**消息客户端凭据类型**属性。</span><span class="sxs-lookup"><span data-stu-id="d4b10-458">Specify the credentials for sending messages when using **UserName** for the **Message client credential type** property.</span></span> <span data-ttu-id="d4b10-459">你可以通过单击指定属性**编辑凭据**按钮。</span><span class="sxs-lookup"><span data-stu-id="d4b10-459">You can specify the property by clicking the **Edit Credentials** button.</span></span><br /><br /> <span data-ttu-id="d4b10-460">默认值是**不使用单一登录**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-460">The default value is **Do not use Single Sign-On**.</span></span>|  
    |<span data-ttu-id="d4b10-461">**使用 ACS 服务标识**</span><span class="sxs-lookup"><span data-stu-id="d4b10-461">**Use ACS service identity**</span></span>|<span data-ttu-id="d4b10-462">适用于[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]和[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]2013年。</span><span class="sxs-lookup"><span data-stu-id="d4b10-462">Applies to [!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)] and [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] 2013.</span></span><br/><br/><span data-ttu-id="d4b10-463">选择此复选框，然后单击**编辑**并提供以下值，以使用 Service Bus 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d4b10-463">Select this checkbox and click **Edit** and provide the following values to authenticate with the Service Bus.</span></span><br /><br /> <span data-ttu-id="d4b10-464">- **访问控制服务 STS Uri** – 设置为`https://<Namespace>-sb.accesscontrol.windows.net/`，其中\<命名空间 > 是你的服务总线命名空间。</span><span class="sxs-lookup"><span data-stu-id="d4b10-464">- **Access Control Service STS Uri** – Set this to `https://<Namespace>-sb.accesscontrol.windows.net/`, where \<namespace> is your Service Bus namespace.</span></span><br /><br /> <span data-ttu-id="d4b10-465">- **颁发者名称**– 指定的颁发者名称。</span><span class="sxs-lookup"><span data-stu-id="d4b10-465">- **Issuer Name** – Specify the issuer name.</span></span> <span data-ttu-id="d4b10-466">通常将此值设置为 owner。</span><span class="sxs-lookup"><span data-stu-id="d4b10-466">Typically this is set to owner.</span></span><br /><br /> <span data-ttu-id="d4b10-467">- **颁发者密钥**– 指定的颁发者密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-467">- **Issuer Key** – Specify the issuer key.</span></span>|  
    |<span data-ttu-id="d4b10-468">**服务总线连接信息**</span><span class="sxs-lookup"><span data-stu-id="d4b10-468">**Service Bus connection information**</span></span> | <span data-ttu-id="d4b10-469">新开头[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d4b10-469">New starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)].</span></span><br/><br/><span data-ttu-id="d4b10-470">选择使用共享访问签名 (SAS) 或 Service Bus 命名空间的访问控制服务 (ACS)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-470">Choose to use the Shared Access Signature (SAS) or Access Control Service (ACS) of the Service Bus namespace.</span></span> <br/><br/><span data-ttu-id="d4b10-471">选择一个选项，然后选择**编辑**输入的密钥信息：</span><span class="sxs-lookup"><span data-stu-id="d4b10-471">Select an option, and then select **Edit** to enter the key information:</span></span><br/><br/> <span data-ttu-id="d4b10-472">- **共享访问签名**： 输入访问密钥名称和访问密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-472">- **Shared Access Signature** : Enter the access key name, and the access key.</span></span> <span data-ttu-id="d4b10-473">这两个值中列出[Azure 门户](https://portal.azure.com)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-473">Both values are listed in the [Azure portal](https://portal.azure.com).</span></span><br/> <span data-ttu-id="d4b10-474">- **访问控制服务**： 输入 STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)，颁发者名称和颁发者密钥。</span><span class="sxs-lookup"><span data-stu-id="d4b10-474">- **Access Control Service** : Enter the STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`), Issuer name, and Issuer key.</span></span> <span data-ttu-id="d4b10-475">使用 Windows PowerShell 检索这些值中所述[SB 消息适配器](../core/sb-messaging-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-475">Use Windows PowerShell to retrieve these values, as described in [SB-Messaging adapter](../core/sb-messaging-adapter.md).</span></span> |
  
6.  <span data-ttu-id="d4b10-476">在“WCF-NetTcpRelay 传输属性”  对话框中的“消息”  选项卡上，为 SOAP **Body** 元素指定数据选择。</span><span class="sxs-lookup"><span data-stu-id="d4b10-476">In the **WCF-NetTcpRelay Transport Properties** dialog box, on the **Messages** tab, specify the data selection for the SOAP **Body** element.</span></span>  
  
    |<span data-ttu-id="d4b10-477">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-477">Use this</span></span>|<span data-ttu-id="d4b10-478">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-478">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-479">**正文--BizTalk 请求消息正文**</span><span class="sxs-lookup"><span data-stu-id="d4b10-479">**Body -- BizTalk request message body**</span></span>|<span data-ttu-id="d4b10-480">使用 BizTalk 消息正文部分创建的 SOAP 内容**正文**传出消息的元素。</span><span class="sxs-lookup"><span data-stu-id="d4b10-480">Use the BizTalk message body part to create the content of the SOAP **Body** element for an outgoing message.</span></span><br /><br /> <span data-ttu-id="d4b10-481">这是默认设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-481">This is the default setting.</span></span>|  
    |<span data-ttu-id="d4b10-482">**指定模板的模板--内容**</span><span class="sxs-lookup"><span data-stu-id="d4b10-482">**Template -- content specified by template**</span></span>|<span data-ttu-id="d4b10-483">使用在“XML”  文本框中提供的模板创建传出消息的 SOAP **Body** 元素的内容。</span><span class="sxs-lookup"><span data-stu-id="d4b10-483">Use the template supplied in the **XML** text box to create the content of the SOAP **Body** element for an outgoing message.</span></span><br /><br /> <span data-ttu-id="d4b10-484">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-484">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-485">**XML**</span><span class="sxs-lookup"><span data-stu-id="d4b10-485">**XML**</span></span>|<span data-ttu-id="d4b10-486">为传出消息的 SOAP **Body** 元素的内容键入 XML 格式的模板。</span><span class="sxs-lookup"><span data-stu-id="d4b10-486">Type the XML-formatted template for the content of the SOAP **Body** element of an outgoing message.</span></span> <span data-ttu-id="d4b10-487">如果选择了“模板 -- BizTalk 响应消息正文”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-487">This property is required if the **Template -- BizTalk response message body** option is selected.</span></span><br /><br /> <span data-ttu-id="d4b10-488">类型：字符串</span><span class="sxs-lookup"><span data-stu-id="d4b10-488">Type: String</span></span><br /><br /> <span data-ttu-id="d4b10-489">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-489">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-490">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-490">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-491">默认值是 < bts 消息正文</span><span class="sxs-lookup"><span data-stu-id="d4b10-491">The default is <bts-msg-body</span></span><br /><br /> <span data-ttu-id="d4b10-492">xmlns="http://www.microsoft.com/schemas/bts2007" encoding="xml"/></span><span class="sxs-lookup"><span data-stu-id="d4b10-492">xmlns="http://www.microsoft.com/schemas/bts2007" encoding="xml"/></span></span>|  
    |<span data-ttu-id="d4b10-493">**信封--完整\<soap： 信封 >**</span><span class="sxs-lookup"><span data-stu-id="d4b10-493">**Envelope -- entire \<soap:Envelope>**</span></span>|<span data-ttu-id="d4b10-494">从整个 SOAP 创建 BizTalk 消息正文部分**信封**的传入。</span><span class="sxs-lookup"><span data-stu-id="d4b10-494">Create the BizTalk message body part from the entire SOAP **Envelope** of an incoming.</span></span> <span data-ttu-id="d4b10-495">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-495">This property is valid only for solicit-response ports.</span></span><br /><br /> <span data-ttu-id="d4b10-496">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-496">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-497">**正文--内容\<soap： 正文 > 元素**</span><span class="sxs-lookup"><span data-stu-id="d4b10-497">**Body -- contents of \<soap:Body> element**</span></span>|<span data-ttu-id="d4b10-498">使用传入消息的 SOAP **Body** 元素的内容创建 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-498">Use the content of the SOAP **Body** element of an incoming message to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-499">如果 **Body** 元素具有多个子元素，则只有第一个元素将成为 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-499">If the **Body** element has more than one child element, only the first element becomes the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-500">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-500">This property is valid only for solicit-response ports.</span></span><br /><br /> <span data-ttu-id="d4b10-501">这是默认设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-501">This is the default setting.</span></span>|  
    |<span data-ttu-id="d4b10-502">**路径--由正文路径定位的内容**</span><span class="sxs-lookup"><span data-stu-id="d4b10-502">**Path -- content located by body path**</span></span>|<span data-ttu-id="d4b10-503">使用“正文路径表达式”  文本框中的正文路径表达式创建 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-503">Use the body path expression in the **Body path expression** text box to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-504">针对传入消息的 SOAP **Body** 元素的直接子元素计算正文路径表达式。</span><span class="sxs-lookup"><span data-stu-id="d4b10-504">The body path expression is evaluated against the immediate child element of the SOAP **Body** element of an incoming message.</span></span> <span data-ttu-id="d4b10-505">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-505">This property is valid only for solicit-response ports.</span></span><br /><br /> <span data-ttu-id="d4b10-506">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-506">The default value is cleared.</span></span>|  
    |<span data-ttu-id="d4b10-507">**正文路径表达式**</span><span class="sxs-lookup"><span data-stu-id="d4b10-507">**Body path expression**</span></span>|<span data-ttu-id="d4b10-508">键入正文路径表达式以标识传入消息中用于创建 BizTalk 消息正文部分的特定部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-508">Type the body path expression to identify a specific part of an incoming message used to create the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-509">此正文路径表达式针对 SOAP 的即时子元素进行评估**正文**传入消息的节点。</span><span class="sxs-lookup"><span data-stu-id="d4b10-509">This body path expression is evaluated against the immediate child element of the SOAP **Body** node of an incoming message.</span></span> <span data-ttu-id="d4b10-510">如果此正文路径表达式返回多个节点，则只选择第一个节点作为 BizTalk 消息正文部分。</span><span class="sxs-lookup"><span data-stu-id="d4b10-510">If this body path expression returns more than one node, only the first node is chosen for the BizTalk message body part.</span></span> <span data-ttu-id="d4b10-511">如果选择了“路径 -- 按正文路径定位内容”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-511">This property is required if the **Path -- content located by body path** option is selected.</span></span> <span data-ttu-id="d4b10-512">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-512">This property is valid only for solicit-response ports.</span></span><br /><br /> <span data-ttu-id="d4b10-513">类型：字符串</span><span class="sxs-lookup"><span data-stu-id="d4b10-513">Type: String</span></span><br /><br /> <span data-ttu-id="d4b10-514">最小长度：0</span><span class="sxs-lookup"><span data-stu-id="d4b10-514">Minimum length: 0</span></span><br /><br /> <span data-ttu-id="d4b10-515">最大长度：32767</span><span class="sxs-lookup"><span data-stu-id="d4b10-515">Maximum length: 32767</span></span><br /><br /> <span data-ttu-id="d4b10-516">默认值为空字符串。</span><span class="sxs-lookup"><span data-stu-id="d4b10-516">The default is an empty string.</span></span>|  
    |<span data-ttu-id="d4b10-517">**节点编码**</span><span class="sxs-lookup"><span data-stu-id="d4b10-517">**Node encoding**</span></span>|<span data-ttu-id="d4b10-518">指定 WCF NetTcpRelay 发送适配器用于解码识别由正文路径表达式中的节点的编码类型**正文路径表达式**文本框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-518">Specify the type of encoding that the WCF-NetTcpRelay send adapter uses to decode for the node identified by the body path expression in the **Body path expression** text box.</span></span> <span data-ttu-id="d4b10-519">如果选择了“路径 -- 按正文路径定位内容”  选项，则此属性是必需的。</span><span class="sxs-lookup"><span data-stu-id="d4b10-519">This property is required if the **Path -- content located by body path** option is selected.</span></span> <span data-ttu-id="d4b10-520">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-520">This property is valid only for solicit-response ports.</span></span> <span data-ttu-id="d4b10-521">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="d4b10-521">Valid values include the following:</span></span><br /><br /> <span data-ttu-id="d4b10-522">-                          **Base64**: Base64 编码。</span><span class="sxs-lookup"><span data-stu-id="d4b10-522">-                          **Base64**: Base64 encoding.</span></span><br /><br /> <span data-ttu-id="d4b10-523">- **十六进制**： 十六进制编码。</span><span class="sxs-lookup"><span data-stu-id="d4b10-523">- **Hex**: Hexadecimal encoding.</span></span><br /><br /> <span data-ttu-id="d4b10-524">- **字符串**： 文本编码的 utf-8</span><span class="sxs-lookup"><span data-stu-id="d4b10-524">- **String**: Text encoding - UTF-8</span></span><br /><br /> <span data-ttu-id="d4b10-525">-                          **XML**: WCF 适配器使用由正文路径表达式中所选节点的外部 XML 创建 BizTalk 消息正文**正文路径表达式**文本框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-525">-                          **XML**: The WCF adapters create the BizTalk message body with the outer XML of the node selected by the body path expression in the **Body path expression** text box.</span></span><br /><br /> <span data-ttu-id="d4b10-526">默认值为“XML” 。</span><span class="sxs-lookup"><span data-stu-id="d4b10-526">The default is **XML**.</span></span>|  
    |<span data-ttu-id="d4b10-527">**传播故障消息**</span><span class="sxs-lookup"><span data-stu-id="d4b10-527">**Propagate fault message**</span></span>|<span data-ttu-id="d4b10-528">选中此复选框可将无法执行出站处理的消息路由至某个订阅应用程序（例如其他接收端口或业务流程计划）。</span><span class="sxs-lookup"><span data-stu-id="d4b10-528">Select this check box to route the message that fails outbound processing to a subscribing application (such as another receive port or orchestration schedule).</span></span> <span data-ttu-id="d4b10-529">清除此复选框可挂起失败的消息，并生成一个否定确认 (NACK)。</span><span class="sxs-lookup"><span data-stu-id="d4b10-529">Clear the check box to suspend failed messages and generate a negative acknowledgment (NACK).</span></span> <span data-ttu-id="d4b10-530">此属性仅对要求-响应端口有效。</span><span class="sxs-lookup"><span data-stu-id="d4b10-530">This property is valid only for solicit-response ports.</span></span><br /><br /> <span data-ttu-id="d4b10-531">默认值为选中此复选框。</span><span class="sxs-lookup"><span data-stu-id="d4b10-531">The default value is selected.</span></span>|  
  
7.  <span data-ttu-id="d4b10-532">单击**确定**和**确定**再次以保存设置。</span><span class="sxs-lookup"><span data-stu-id="d4b10-532">Click **OK** and **OK** again to save settings.</span></span>  
  
## <a name="set-maxconnections-in-the-handler"></a><span data-ttu-id="d4b10-533">处理程序中的组 MaxConnections</span><span class="sxs-lookup"><span data-stu-id="d4b10-533">Set MaxConnections in the handler</span></span>

1.  <span data-ttu-id="d4b10-534">在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理，展开**BizTalk 组**，展开**平台设置**，然后展开**适配器**.</span><span class="sxs-lookup"><span data-stu-id="d4b10-534">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console, expand [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration, expand **BizTalk Group**, expand **Platform Settings**, and then expand **Adapters**.</span></span>  
  
2.  <span data-ttu-id="d4b10-535">在适配器列表中，选择**WCF NetTcpRelay**，然后选择发送或接收处理程序。</span><span class="sxs-lookup"><span data-stu-id="d4b10-535">In the adapter list, select **WCF-NetTcpRelay**, and then select the send or receive handler.</span></span>  
  
3.  <span data-ttu-id="d4b10-536">在**适配器处理程序属性**上**常规**选项卡上，选择**属性**。</span><span class="sxs-lookup"><span data-stu-id="d4b10-536">In **Adapter Handler Properties**, on the **General** tab, select **Properties**.</span></span>  
  
4.  <span data-ttu-id="d4b10-537">在**处理程序**选项卡：</span><span class="sxs-lookup"><span data-stu-id="d4b10-537">In the **handler** tab:</span></span>   
  
    |<span data-ttu-id="d4b10-538">使用此选项</span><span class="sxs-lookup"><span data-stu-id="d4b10-538">Use this</span></span>|<span data-ttu-id="d4b10-539">执行的操作</span><span class="sxs-lookup"><span data-stu-id="d4b10-539">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="d4b10-540">**最大连接数**</span><span class="sxs-lookup"><span data-stu-id="d4b10-540">**Maximum connections**</span></span>|<span data-ttu-id="d4b10-541">指定最大数量 （接收处理程序） 的入站的连接的连接池中缓存的每个终结点的出站连接 （发送处理程序）。</span><span class="sxs-lookup"><span data-stu-id="d4b10-541">Specify the maximum number of inbound connections (receive handler) and outbound connections (send handler) for each endpoint that is cached in the connection pool.</span></span> <span data-ttu-id="d4b10-542">这将限制为每个唯一的远程终结点缓存的连接数。</span><span class="sxs-lookup"><span data-stu-id="d4b10-542">This limits the number of connections that are cached for each unique remote endpoint.</span></span> <span data-ttu-id="d4b10-543">对于每个唯一的远程终结点，你应该将此值设置为一个大于最大期望缓存连接数的值。</span><span class="sxs-lookup"><span data-stu-id="d4b10-543">You should set this value to be greater than the maximum number of connections that you expect to be cached for any unique remote endpoint.</span></span> <span data-ttu-id="d4b10-544">如果活动连接数超出此最大值，则服务可能表现为在此发送处理程序下运行的 WCF NetTcpRelay 发送端口。</span><span class="sxs-lookup"><span data-stu-id="d4b10-544">If the number of active connections exceeds this maximum value, then the service may appear unresponsive to the WCF-NetTcpRelay send ports running under this send hander.</span></span><br /><br /> <span data-ttu-id="d4b10-545">默认值为 10。</span><span class="sxs-lookup"><span data-stu-id="d4b10-545">The default is 10.</span></span>|  
  
5.  <span data-ttu-id="d4b10-546">单击“确定”保存更改。</span><span class="sxs-lookup"><span data-stu-id="d4b10-546">Select **OK** to save your changes.</span></span>  

## <a name="see-also"></a><span data-ttu-id="d4b10-547">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d4b10-547">See also</span></span>
[<span data-ttu-id="d4b10-548">SB 消息适配器</span><span class="sxs-lookup"><span data-stu-id="d4b10-548">SB-Messaging adapter</span></span>](../core/sb-messaging-adapter.md)

[<span data-ttu-id="d4b10-549">使用适配器</span><span class="sxs-lookup"><span data-stu-id="d4b10-549">Using Adapters</span></span>](../core/using-adapters.md)