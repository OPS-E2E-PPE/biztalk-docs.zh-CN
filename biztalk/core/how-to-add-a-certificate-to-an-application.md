---
title: "如何将证书添加到应用程序 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- applications, certificates
- managing [certificates], adding to applications
- certificates, applications
- managing [applications], certificates
- managing [certificates], applications
- managing [resources], certificates
ms.assetid: 7c615002-6627-4134-9c2b-bf1c89d626c2
caps.latest.revision: "15"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7551e18b1e63f706dfe7e5ff8f951e7aee4f4694
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-add-a-certificate-to-an-application"></a><span data-ttu-id="1d7eb-102">如何向应用程序添加证书</span><span class="sxs-lookup"><span data-stu-id="1d7eb-102">How to Add a Certificate to an Application</span></span>
<span data-ttu-id="1d7eb-103">本主题说明如何使用命令行向 BizTalk Server 应用程序添加证书。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-103">This topic describes how to use the command line to add a certificate to a BizTalk application.</span></span> <span data-ttu-id="1d7eb-104">此选项在 BizTalk Server 管理控制台中不可用。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-104">This option is not available in the BizTalk Server Administration console.</span></span> <span data-ttu-id="1d7eb-105">您向某一 BizTalk 应用程序添加证书，以便可以将证书从一个 BizTalk 组传输到另一个组中，与应用程序打包在一起。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-105">You add a certificate to a BizTalk application so that you can transport the certificate from one BizTalk group to another, packaged with an application.</span></span> <span data-ttu-id="1d7eb-106">您使用证书来验证凭据并为发送端口和接收位置建立安全的链接。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-106">You use certificates to verify identities and to establish secure links for send ports and receive locations.</span></span> <span data-ttu-id="1d7eb-107">有关详细信息，请参阅[如何将证书分配给发送端口](../core/how-to-assign-a-certificate-to-a-send-port.md)和[如何将证书分配给接收位置](../core/how-to-assign-a-certificate-to-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-107">For more information, see [How to Assign a Certificate to a Send Port](../core/how-to-assign-a-certificate-to-a-send-port.md) and [How to Assign a Certificate to a Receive Location](../core/how-to-assign-a-certificate-to-a-receive-location.md).</span></span>  
  
 <span data-ttu-id="1d7eb-108">向应用程序中添加证书时，请切记以下几点：</span><span class="sxs-lookup"><span data-stu-id="1d7eb-108">When adding a certificate to an application, bear in mind the following important points:</span></span>  
  
-   <span data-ttu-id="1d7eb-109">在将某一证书添加到应用程序时，该证书将作为证书项目添加到 BizTalk 管理数据库中。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-109">When you add a certificate to an application, the certificate is added to the BizTalk Management database as a certificate artifact.</span></span> <span data-ttu-id="1d7eb-110">在您安装该应用程序时，该证书将导入到本地计算机上的“其他人”证书存储中；因此，在您将证书分配给某一发送端口或接收位置前，可能无需执行额外的步骤来将证书导入到此证书存储中。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-110">When you install the application, the certificate is imported into the Other People certificate store on the local computer, so you may not need to take the additional step of importing it into this store before you can assign it to a send port or receive location.</span></span> <span data-ttu-id="1d7eb-111">在您使用 BTSTask 来添加证书时，该证书必须存在于“其他人”证书存储中，并且必须指定其指纹。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-111">When you use BTSTask to add the certificate, the certificate must exist in the Other People certificate store, and you must specify its thumbprint.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="1d7eb-112">在导出某一证书时，私钥将被删除。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-112">When a certificate is exported, the private key is removed.</span></span> <span data-ttu-id="1d7eb-113">在安装应用程序时，尽管证书将导入证书存储中，但它不能用于解密已加密的消息，虽然它可用于发送已加密的消息。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-113">When the application is installed, although the certificate is imported into the certificate store, it cannot be used to decrypt an encrypted message, although it can be used to send an encrypted message.</span></span> <span data-ttu-id="1d7eb-114">如果您出于前述目的需要使用证书，则应在使用该证书的发送端口的宿主计算机上，在“其他人”证书存储中重新安装该证书。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-114">If you need to use the certificate for the former purpose, you should reinstall it in the Other People certificate store on the computer hosting the send port that uses the certificate.</span></span>  
  
-   <span data-ttu-id="1d7eb-115">作为一种最佳实践，如果某个证书将由两个或多个应用程序中的发送端口或接收位置使用，应将该证书部署在一个单独的应用程序中，然后从需要使用该证书的应用程序中引用该应用程序。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-115">As a best practice, if a certificate will be used by a send port or receive location in two or more applications, you should deploy the certificate in a separate application, and then reference this application from the applications that need to use the certificate.</span></span> <span data-ttu-id="1d7eb-116">这是因为 BizTalk 组中只能有一个证书具有特定的指纹，因此您不能将同一个证书导入到两个不同的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-116">This is because only one certificate having a particular thumbprint can exist in the BizTalk group, so you will not be able to import the same certificate in two different applications.</span></span> <span data-ttu-id="1d7eb-117">如果尝试导入两个使用同一证书的应用程序，则第一个导入将会成功，而第二个导入将会失败。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-117">If you attempt to import two applications that each use the same certificate, the first import will succeed, and the second will not.</span></span> <span data-ttu-id="1d7eb-118">在这种情况下，使用“覆盖”导入选项并不能解决问题，因为您要覆盖的现有证书包含在另一个应用程序中。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-118">In this case, using the Overwrite import option does not correct the problem, as the existing certificate that you want to overwrite is contained in another application.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="1d7eb-119">先决条件</span><span class="sxs-lookup"><span data-stu-id="1d7eb-119">Prerequisites</span></span>  
 <span data-ttu-id="1d7eb-120">若要执行本主题中的过程，必须使用 BizTalk Server Administrators 组的成员帐户登录。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-120">To perform the procedures in this topic, you must be logged on with an account that is a member of the BizTalk Server Administrators group.</span></span> <span data-ttu-id="1d7eb-121">有关更多详细权限的信息，请参阅[用于部署和管理 BizTalk 应用程序所需权限](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-121">For more detailed information on permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md).</span></span>  
  
### <a name="to-add-a-certificate-to-an-application"></a><span data-ttu-id="1d7eb-122">向应用程序添加证书</span><span class="sxs-lookup"><span data-stu-id="1d7eb-122">To add a certificate to an application</span></span>  
  
1.  <span data-ttu-id="1d7eb-123">如下所示打开命令提示符： 单击**启动**，单击**运行**，类型`cmd`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-123">Open a command prompt as follows: Click **Start**, click **Run**, type `cmd`, and then click **OK**.</span></span>  
  
2.  <span data-ttu-id="1d7eb-124">键入以下命令，替换为适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="1d7eb-124">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
     <span data-ttu-id="1d7eb-125">**BTSTask AddResource** [**/ApplicationName:***值*] **/Type:System.BizTalk:Certificate** [**/Overwrite**] **/Thumbprint:"***值***"** [**/Server:***值*] [**/数据库：***值*]</span><span class="sxs-lookup"><span data-stu-id="1d7eb-125">**BTSTask AddResource** [**/ApplicationName:***value*] **/Type:System.BizTalk:Certificate** [**/Overwrite**] **/Thumbprint:"***value***"** [**/Server:***value*] [**/Database:***value*]</span></span>  
  
     <span data-ttu-id="1d7eb-126">例如：</span><span class="sxs-lookup"><span data-stu-id="1d7eb-126">Example:</span></span>  
  
     <span data-ttu-id="1d7eb-127">**BTSTask AddResource /ApplicationName:MyApplication /Type:System.BizTalk:Certificate /Overwrite /Thumbprint:"04 a2 8e 32 24 f9 36 b9 42 81 12 71 3a d2 ef db c7 9c 83 dc"/Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-127">**BTSTask AddResource /ApplicationName:MyApplication /Type:System.BizTalk:Certificate /Overwrite /Thumbprint:"04 a2 8e 32 24 f9 36 b9 42 81 12 71 3a d2 ef db c7 9c 83 dc" /Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span></span>  
  
    |<span data-ttu-id="1d7eb-128">参数</span><span class="sxs-lookup"><span data-stu-id="1d7eb-128">Parameter</span></span>|<span data-ttu-id="1d7eb-129">值</span><span class="sxs-lookup"><span data-stu-id="1d7eb-129">Value</span></span>|  
    |---------------|-----------|  
    |<span data-ttu-id="1d7eb-130">**/ 应用程序名称**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-130">**/ApplicationName**</span></span>|<span data-ttu-id="1d7eb-131">向其添加证书的 BizTalk 应用程序的名称。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-131">Name of the BizTalk application to which to add the certificate.</span></span> <span data-ttu-id="1d7eb-132">如果未指定应用程序名称，则使用组的默认 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-132">If the application name is not specified, the default BizTalk application for the group is used.</span></span> <span data-ttu-id="1d7eb-133">如果名称包含空格，必须将它括在双引号 （"）。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-133">If the name includes spaces, you must enclose it in double quotation marks (").</span></span>|  
    |<span data-ttu-id="1d7eb-134">**/ 类型**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-134">**/Type**</span></span>|<span data-ttu-id="1d7eb-135">**System.BizTalk:Certificate** （此值不区分大小写。）</span><span class="sxs-lookup"><span data-stu-id="1d7eb-135">**System.BizTalk:Certificate** (This value is not case-sensitive.)</span></span>|  
    |<span data-ttu-id="1d7eb-136">**/ 覆盖**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-136">**/Overwrite**</span></span>|<span data-ttu-id="1d7eb-137">更新现有证书的选项。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-137">Option to update an existing certificate.</span></span> <span data-ttu-id="1d7eb-138">如果未指定，且应用程序中已存在与要添加的证书具有相同 Thumbprint 属性的证书，则 Add 操作将失败。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-138">If not specified, and a certificate already exists in the application that has the same Thumbprint property as the certificate being added, the Add operation fails.</span></span> <span data-ttu-id="1d7eb-139">通过在证书管理单元中双击证书，再单击“详细信息”选项卡，可以查看它的 Thumbprint 属性。有关详细信息，请参阅证书管理单元文档中的“查看证书信息”。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-139">You can view the Thumbprint property by double-clicking the certificate in the Certificates snap-in and clicking the Details tab. For more information, see "Viewing certificate information" in the documentation for the Certificates snap-in.</span></span>|  
    |<span data-ttu-id="1d7eb-140">**/ 指纹**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-140">**/Thumbprint**</span></span>|<span data-ttu-id="1d7eb-141">该证书指纹属性 (*指纹*是数据的摘要)。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-141">Thumbprint property of the certificate (a *thumbprint* is a digest of data).</span></span> <span data-ttu-id="1d7eb-142">此值必须放在双引号 (") 中。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-142">This value must be enclosed in double quotation marks (").</span></span>|  
    |<span data-ttu-id="1d7eb-143">**/ 服务器**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-143">**/Server**</span></span>|<span data-ttu-id="1d7eb-144">BizTalk 管理数据库的宿主 SQL Server 实例的名称，格式为“服务器名称\实例名称,端口”。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-144">Name of the SQL Server instance hosting the BizTalk Management database, in the form ServerName\InstanceName,Port.</span></span><br /><br /> <span data-ttu-id="1d7eb-145">只在实例名称与服务器名称不相同时才需要指定实例名称。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-145">Instance name is only required when the instance name is different than the server name.</span></span> <span data-ttu-id="1d7eb-146">只在 SQL Server 不使用默认端口号 (1433) 时才需要指定端口。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-146">Port is only required when SQL Server uses a port number other than the default (1433).</span></span><br /><br /> <span data-ttu-id="1d7eb-147">示例：</span><span class="sxs-lookup"><span data-stu-id="1d7eb-147">Examples:</span></span><br /><br /> <span data-ttu-id="1d7eb-148">Server=MyServer</span><span class="sxs-lookup"><span data-stu-id="1d7eb-148">Server=MyServer</span></span><br /><br /> <span data-ttu-id="1d7eb-149">Server=MyServer\MySQLServer,1533</span><span class="sxs-lookup"><span data-stu-id="1d7eb-149">Server=MyServer\MySQLServer,1533</span></span><br /><br /> <span data-ttu-id="1d7eb-150">如果未提供，则使用本地计算机上运行的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-150">If not provided, the name of the SQL Server instance running on the local computer is used.</span></span>|  
    |<span data-ttu-id="1d7eb-151">**/ 数据库**</span><span class="sxs-lookup"><span data-stu-id="1d7eb-151">**/Database**</span></span>|<span data-ttu-id="1d7eb-152">BizTalk 管理数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-152">Name of the BizTalk Management database.</span></span> <span data-ttu-id="1d7eb-153">如果未指定，则使用在本地 SQL Server 实例中运行的 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="1d7eb-153">If not specified, the BizTalk Management database running in the local instance of SQL Server is used.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1d7eb-154">另请参阅</span><span class="sxs-lookup"><span data-stu-id="1d7eb-154">See Also</span></span>  
 <span data-ttu-id="1d7eb-155">[管理.NET 程序集、 证书和其他资源](../core/managing-net-assemblies-certificates-and-other-resources.md) </span><span class="sxs-lookup"><span data-stu-id="1d7eb-155">[Managing .NET Assemblies, Certificates, and Other Resources](../core/managing-net-assemblies-certificates-and-other-resources.md) </span></span>  
 <span data-ttu-id="1d7eb-156">[AddResource 命令： 证书](../core/addresource-command-certificate.md) </span><span class="sxs-lookup"><span data-stu-id="1d7eb-156">[AddResource Command: Certificate](../core/addresource-command-certificate.md) </span></span>  
 [<span data-ttu-id="1d7eb-157">创建和修改 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="1d7eb-157">Creating and Modifying BizTalk Applications</span></span>](../core/creating-and-modifying-biztalk-applications.md)