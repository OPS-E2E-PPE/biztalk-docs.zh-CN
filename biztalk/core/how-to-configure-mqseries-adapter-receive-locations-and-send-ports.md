---
title: 如何配置 MQSeries 适配器接收位置和发送端口 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- MQSeries adapters, receive ports
- receive ports, MQSeries adapters
- MQSeries adapters, send ports
- configuring [MQSeries adapters], send ports
- configuring [MQSeries adapters], receive ports
- send ports, MQSeries adapters
- configuring [MQSeries adapters], receive locations
- MQSeries adapters, receive locations
- receive locations, MQSeries adapters
ms.assetid: 552aacde-9ec0-4459-b369-073676b6f926
caps.latest.revision: 29
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: fee2200541bceeb8bfbe2f840a2070831a023e03
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65341376"
---
# <a name="how-to-configure-mqseries-adapter-receive-locations-and-send-ports"></a><span data-ttu-id="90581-102">如何配置 MQSeries 适配器接收位置和发送端口</span><span class="sxs-lookup"><span data-stu-id="90581-102">How to Configure MQSeries Adapter Receive Locations and Send Ports</span></span>
<span data-ttu-id="90581-103">对于接收位置和发送端口，可以配置 MQSeries 适配器。</span><span class="sxs-lookup"><span data-stu-id="90581-103">You can configure the MQSeries adapter for both receive locations and send ports.</span></span>  

## <a name="to-configure-receive-locations-and-send-ports"></a><span data-ttu-id="90581-104">若要配置接收位置和发送端口</span><span class="sxs-lookup"><span data-stu-id="90581-104">To configure receive locations and send ports</span></span>  
 <span data-ttu-id="90581-105">**若要创建的接收端口和接收位置：**</span><span class="sxs-lookup"><span data-stu-id="90581-105">**To create the receive port and receive location:**</span></span>  

1. <span data-ttu-id="90581-106">在 BizTalk Server 管理控制台中，展开**BizTalk Server 管理**，展开**BizTalk 组**，展开**应用程序**，然后展开要在其中创建接收位置的应用程序。</span><span class="sxs-lookup"><span data-stu-id="90581-106">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application in which you want to create a receive location.</span></span>  

2. <span data-ttu-id="90581-107">右键单击**接收端口**节点中，单击**新建，** ，然后指向**单向接收端口**。</span><span class="sxs-lookup"><span data-stu-id="90581-107">Right-click the **Receive Ports** node, click **New,** and point to **One-Way Receive Port**.</span></span>  

3. <span data-ttu-id="90581-108">输入中的相应值**端口属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="90581-108">Enter the appropriate values in the **Port Properties** dialog box.</span></span> <span data-ttu-id="90581-109">璝惠**端口属性**对话框中，请参阅[如何创建接收端口](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="90581-109">For information about the **Port Properties** dialog box, see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  

4. <span data-ttu-id="90581-110">在 BizTalk Server 管理控制台中，右键单击**接收端口**节点，您创建，然后单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="90581-110">In the BizTalk Server Administration console, right-click the **Receive Port** node you created and then click **Properties**.</span></span>  

5. <span data-ttu-id="90581-111">在中**接收端口属性**对话框中，在左窗格中，选择**接收位置**，然后单击**新建**右窗格中。</span><span class="sxs-lookup"><span data-stu-id="90581-111">In the **Receive Port Properties** dialog box, in the left pane, select **Receive Locations**, and then click **New** in the right pane.</span></span>  

6. <span data-ttu-id="90581-112">在中**接收位置属性**对话框中**传输**部分旁边**类型**，选择**MQSeries**从下拉列表列表中，然后依次**配置**。</span><span class="sxs-lookup"><span data-stu-id="90581-112">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **MQSeries** from the drop-down list, and then click **Configure**.</span></span>  

7. <span data-ttu-id="90581-113">在中**MQSeries 传输属性**对话框框中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="90581-113">In the **MQSeries Transport Properties** dialog box, do the following:</span></span>  


   |        <span data-ttu-id="90581-114">使用此选项</span><span class="sxs-lookup"><span data-stu-id="90581-114">Use this</span></span>        |                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="90581-115">执行的操作</span><span class="sxs-lookup"><span data-stu-id="90581-115">To do this</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |     <span data-ttu-id="90581-116">**批大小**</span><span class="sxs-lookup"><span data-stu-id="90581-116">**Batch Size**</span></span>     | <span data-ttu-id="90581-117">确定一批消息，以 kb 为单位的最大大小。</span><span class="sxs-lookup"><span data-stu-id="90581-117">Determine the maximum size of a batch of messages in KB.</span></span> <span data-ttu-id="90581-118">**注意：** 如果**支持事务**接收位置属性设置为**是**; 每个消息批次提交到 MessageBox 数据库的 Microsoft 分布式事务上下文处理协调器 (MSDTC) 事务。</span><span class="sxs-lookup"><span data-stu-id="90581-118">**Note:**  If the **Transaction Supported** property for the receive location is set to **Yes**; each message batch is submitted to the MessageBox database under the context of a Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span> <span data-ttu-id="90581-119">为消息批处理创建的 MSDTC 事务保持打开状态，直到保存到 MessageBox 在批处理中每个消息并将其放在适当的订阅服务器队列中。</span><span class="sxs-lookup"><span data-stu-id="90581-119">The MSDTC transaction that is created for a message batch remains open until every message in the batch has been persisted to the MessageBox and placed in the appropriate subscriber queue.</span></span> <span data-ttu-id="90581-120">因此 MSDTC 事务的持续时间增加作为**最大批处理大小**参数增加。</span><span class="sxs-lookup"><span data-stu-id="90581-120">Therefore the duration of this MSDTC transaction is increased as the **Maximum Batch Size** parameter is increased.</span></span> <span data-ttu-id="90581-121">由于同时拥有大量的 MSDTC 事务打开可以对总体性能带来负面影响**最大批处理大小**参数不应设置为非常大的值时启用事务支持。</span><span class="sxs-lookup"><span data-stu-id="90581-121">Since having a large number of MSDTC transactions open simultaneously can negatively impact overall performance, the **Maximum Batch Size** parameter should not be set to a very large value when transaction support is enabled.</span></span> |
   | <span data-ttu-id="90581-122">**按序的处理**</span><span class="sxs-lookup"><span data-stu-id="90581-122">**Ordered Processing**</span></span> |                                                                                                                                                                                                                                                                                         <span data-ttu-id="90581-123">设置 MQSeries 以便在保持消息的顺序从 MQSeries 队列接收。</span><span class="sxs-lookup"><span data-stu-id="90581-123">Set MQSeries to maintain the order of the messages as they are received from the MQSeries queue.</span></span> <span data-ttu-id="90581-124">**注意：** 若要保持特定队列的消息顺序，只有一个 BizTalk 主机实例可能会在接收消息从该 MQSeries 队列。</span><span class="sxs-lookup"><span data-stu-id="90581-124">**Note:**  To maintain message ordering for a specific queue, only one BizTalk Host instance may be receiving messages from that MQSeries queue.</span></span> <br /><br /> <span data-ttu-id="90581-125">默认值：False</span><span class="sxs-lookup"><span data-stu-id="90581-125">**Default:** False</span></span>                                                                                                                                                                                                                                                                                          |
   |       <span data-ttu-id="90581-126">**Queue**</span><span class="sxs-lookup"><span data-stu-id="90581-126">**Queue**</span></span>        |                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="90581-127">使用中的信息填充**队列定义**对话框。</span><span class="sxs-lookup"><span data-stu-id="90581-127">Filled in with information from the **Queue Definition** dialog box.</span></span> <span data-ttu-id="90581-128">**注意：** URI 发送端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="90581-128">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>                                                                                                                                                                                                                                                                                                                                                      |
   |   <span data-ttu-id="90581-129">**事务性**</span><span class="sxs-lookup"><span data-stu-id="90581-129">**Transactional**</span></span>    |                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="90581-130">此适配器开始 BizTalk Server 和 MQSeries 服务器之间的 Microsoft 分布式事务处理协调器 (DTC) 事务。</span><span class="sxs-lookup"><span data-stu-id="90581-130">The adapter begins a Microsoft Distributed Transaction Coordinator (DTC) transaction between BizTalk Server and MQSeries Server.</span></span> <span data-ttu-id="90581-131">如果设置为**否**，则无法保证消息传递。</span><span class="sxs-lookup"><span data-stu-id="90581-131">When set to **No**, there is no guarantee of message delivery.</span></span><br /><br /> <span data-ttu-id="90581-132">默认值：False</span><span class="sxs-lookup"><span data-stu-id="90581-132">**Default:** False</span></span>                                                                                                                                                                                                                                                                                                                   |


8. <span data-ttu-id="90581-133">在中**MQSeries 传输属性**对话框中，单击**确定**填充**地址 (URI)** 框中**接收位置属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="90581-133">In the **MQSeries Transport Properties** dialog box, click **OK** to populate the **Address (URI)** box in the **Receive Location Properties** dialog box.</span></span>  

9. <span data-ttu-id="90581-134">在中**接收位置属性**对话框框中，输入适当的值以完成接收位置的配置，然后单击**确定**以保存设置。</span><span class="sxs-lookup"><span data-stu-id="90581-134">In the **Receive Location Properties** dialog box, enter the appropriate values to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="90581-135">有关“接收位置属性”  对话框的信息，请参阅 [如何创建接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="90581-135">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  

   <span data-ttu-id="90581-136">**若要创建的发送端口：**</span><span class="sxs-lookup"><span data-stu-id="90581-136">**To create the send port:**</span></span>  

10. <span data-ttu-id="90581-137">在 BizTalk Server 管理控制台中，创建新的静态发送端口。</span><span class="sxs-lookup"><span data-stu-id="90581-137">In the BizTalk Server Administration console, create a new static send port.</span></span> <span data-ttu-id="90581-138">请参阅[如何创建发送端口](../core/how-to-create-a-send-port2.md)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="90581-138">See [How to Create a Send Port](../core/how-to-create-a-send-port2.md) for more information.</span></span> <span data-ttu-id="90581-139">配置所有发送端口选项，并指定**MQSeries**有关**类型**选项**传输**一部分**常规**选项卡。</span><span class="sxs-lookup"><span data-stu-id="90581-139">Configure all of the send port options and specify **MQSeries** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  

11. <span data-ttu-id="90581-140">上**常规**选项卡上，在**传输**部分中，单击**配置**旁边**类型**。</span><span class="sxs-lookup"><span data-stu-id="90581-140">On the **General** tab, in the **Transport** section, click the **Configure** button next to **Type**.</span></span>  

12. <span data-ttu-id="90581-141">在中**MQSeries 传输属性**对话框框中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="90581-141">In the **MQSeries Transport Properties** dialog box, do the following:</span></span>  

    |<span data-ttu-id="90581-142">属性</span><span class="sxs-lookup"><span data-stu-id="90581-142">Property</span></span>|<span data-ttu-id="90581-143">Description</span><span class="sxs-lookup"><span data-stu-id="90581-143">Description</span></span>|  
    |--------------|-----------------|  
    |<span data-ttu-id="90581-144">**碎片大小**</span><span class="sxs-lookup"><span data-stu-id="90581-144">**Fragmentation Size**</span></span>|<span data-ttu-id="90581-145">设置消息块的大小以 kb 为单位的消息，在适配器和 MQSAgent 之间发送</span><span class="sxs-lookup"><span data-stu-id="90581-145">Sets the message chunk size in KB for messages as they are sent between the adapter and MQSAgent</span></span>|  
    |<span data-ttu-id="90581-146">**SSO 关联应用程序**</span><span class="sxs-lookup"><span data-stu-id="90581-146">**SSO Affiliate Application**</span></span>|<span data-ttu-id="90581-147">设置单一登录 (SSO) 关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="90581-147">Sets the Single Sign-On (SSO) affiliate application.</span></span> <span data-ttu-id="90581-148">用于用户 ID 和密码从 SSO **MQMD_UserIdentifier**，并**MQIIH_Authenticator** (或**MQCIH_Authenticator**) 属性分别。</span><span class="sxs-lookup"><span data-stu-id="90581-148">The user ID and password from SSO are used for the **MQMD_UserIdentifier**, and the **MQIIH_Authenticator** (or **MQCIH_Authenticator**) property respectively.</span></span><br /><br /> <span data-ttu-id="90581-149">默认值：空白</span><span class="sxs-lookup"><span data-stu-id="90581-149">**Default:** Blank</span></span>|  
    |<span data-ttu-id="90581-150">**数据转换**</span><span class="sxs-lookup"><span data-stu-id="90581-150">**Data Conversion**</span></span>|<span data-ttu-id="90581-151">将消息转换为 MQSeries 的 Windows server 的 ANSI 代码页。</span><span class="sxs-lookup"><span data-stu-id="90581-151">Converts the message to the ANSI code page of MQSeries for Windows server.</span></span><br /><br /> <span data-ttu-id="90581-152">选择**是**来执行从 Unicode 到 ANSI 的转换。</span><span class="sxs-lookup"><span data-stu-id="90581-152">Select **Yes** to perform this conversion from Unicode to ANSI.</span></span><br /><br /> <span data-ttu-id="90581-153">默认值：否</span><span class="sxs-lookup"><span data-stu-id="90581-153">**Default:** No</span></span>|  
    |<span data-ttu-id="90581-154">**排序**</span><span class="sxs-lookup"><span data-stu-id="90581-154">**Ordered**</span></span>|<span data-ttu-id="90581-155">将 MQSeries 设置保持消息的顺序与将它们发送到 MQSeries 队列。</span><span class="sxs-lookup"><span data-stu-id="90581-155">Sets MQSeries to maintain the order of messages as they are sent to the MQSeries queue.</span></span><br /><br /> <span data-ttu-id="90581-156">选择**是**维护消息顺序。</span><span class="sxs-lookup"><span data-stu-id="90581-156">Select **Yes** to maintain message order.</span></span> <span data-ttu-id="90581-157">**注意：** 必须设置**送达通知**属性将业务流程**传输**发送端口。</span><span class="sxs-lookup"><span data-stu-id="90581-157">**Note:**  You must set the **Delivery Notification** property in your orchestration to **Transmitted** for the send port.</span></span> <br /><br /> <span data-ttu-id="90581-158">默认值：否</span><span class="sxs-lookup"><span data-stu-id="90581-158">**Default:** No</span></span>|  
    |<span data-ttu-id="90581-159">**队列定义**</span><span class="sxs-lookup"><span data-stu-id="90581-159">**Queue Definition**</span></span>|<span data-ttu-id="90581-160">中的信息填充**队列定义**对话框或直接在字段中。</span><span class="sxs-lookup"><span data-stu-id="90581-160">Populated with information from the **Queue Definition** dialog box or directly in the field.</span></span> <span data-ttu-id="90581-161">**注意：** URI 发送端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="90581-161">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="90581-162">**允许分段**</span><span class="sxs-lookup"><span data-stu-id="90581-162">**Segmentation Allowed**</span></span>|<span data-ttu-id="90581-163">如果单个消息超出了 MQSeries 队列的最大消息长度，则使用 MQSeries 队列管理器分段功能。</span><span class="sxs-lookup"><span data-stu-id="90581-163">Uses MQSeries Queue Manager segmentation if an individual message exceeds the MQSeries queue maximum message length.</span></span> <span data-ttu-id="90581-164">如果选择**是**，MQSeries 将已分段的消息放入队列。</span><span class="sxs-lookup"><span data-stu-id="90581-164">If you select **Yes**, MQSeries puts segmented messages into the queue.</span></span><br /><br /> <span data-ttu-id="90581-165">默认值：否</span><span class="sxs-lookup"><span data-stu-id="90581-165">**Default:** No</span></span>|  
    |<span data-ttu-id="90581-166">**支持事务**</span><span class="sxs-lookup"><span data-stu-id="90581-166">**Transaction Supported**</span></span>|<span data-ttu-id="90581-167">此适配器开始 BizTalk Server 和 MQSeries 服务器之间的 DTC 事务。</span><span class="sxs-lookup"><span data-stu-id="90581-167">The adapter begins a DTC transaction between BizTalk Server and MQSeries Server.</span></span> <span data-ttu-id="90581-168">如果设置为**否**，则无法保证消息传递。</span><span class="sxs-lookup"><span data-stu-id="90581-168">When set to **No**, there is no guarantee of message delivery.</span></span><br /><br /> <span data-ttu-id="90581-169">默认值：是**注意：** 不要使用不同配置发送端口**事务支持**设置，以将消息发送到同一个 MQSeries 队列。</span><span class="sxs-lookup"><span data-stu-id="90581-169">**Default:** Yes **Note:**  Do not configure send ports with different **Transaction Supported** settings to send messages to the same MQSeries queue.</span></span> <span data-ttu-id="90581-170">**注意：** 除了测试方案，此属性应始终设置为默认值**是**。</span><span class="sxs-lookup"><span data-stu-id="90581-170">**Note:**  With the exception of test scenarios, this property should always be set to the default value of **Yes**.</span></span> <span data-ttu-id="90581-171">此属性设置为值**否**在生产环境可能会导致意外的问题。</span><span class="sxs-lookup"><span data-stu-id="90581-171">Setting this property to a value of **No** in a production environment may cause unexpected problems.</span></span>|  

     <span data-ttu-id="90581-172">下图显示了如何配置这些属性。</span><span class="sxs-lookup"><span data-stu-id="90581-172">The following figure shows how you might configure these properties.</span></span>  

     <span data-ttu-id="90581-173">![MQSeries 传输属性对话框](../core/media/bts-dev-mqsendtransportprops.gif "BTS_Dev_MQSendTransportProps")</span><span class="sxs-lookup"><span data-stu-id="90581-173">![MQSeries Transport Properties dialog box](../core/media/bts-dev-mqsendtransportprops.gif "BTS_Dev_MQSendTransportProps")</span></span>  

13. <span data-ttu-id="90581-174">单击省略号 (**...**) 右侧的按钮**队列定义**框定义的队列。</span><span class="sxs-lookup"><span data-stu-id="90581-174">Click the ellipsis (**...**) button to the right of the **Queue Definition** box to define the queue.</span></span> <span data-ttu-id="90581-175">可以使用**导出**对话框中，只是因为您可能需要与接收位置，直接创建队列或将其导出定义队列的脚本。</span><span class="sxs-lookup"><span data-stu-id="90581-175">You can use the **Export** dialog box, just as you may have with the receive location, to create the queue immediately or to export a script defining the queue.</span></span>  

14. <span data-ttu-id="90581-176">单击**确定**中每个对话框将其关闭并保存设置。</span><span class="sxs-lookup"><span data-stu-id="90581-176">Click **OK** in each dialog box to close it and save the settings.</span></span>  

    <span data-ttu-id="90581-177">**若要登记的发送端口、 启动发送端口，并启用接收位置：**</span><span class="sxs-lookup"><span data-stu-id="90581-177">**To enlist the send port, start the send port, and enable the receive location:**</span></span>  

15. <span data-ttu-id="90581-178">右键单击发送端口，然后单击**登记**登记发送端口。</span><span class="sxs-lookup"><span data-stu-id="90581-178">Right-click the send port and click **Enlist** to enlist the send port.</span></span>  

16. <span data-ttu-id="90581-179">右键单击发送端口，然后单击**启动**启动发送端口。</span><span class="sxs-lookup"><span data-stu-id="90581-179">Right-click the send port and click **Start** to start the send port.</span></span>  

17. <span data-ttu-id="90581-180">右键单击接收位置，然后单击**启用**来启用接收位置。</span><span class="sxs-lookup"><span data-stu-id="90581-180">Right-click the receive location and click **Enable** to enable the receive location.</span></span>  

18. <span data-ttu-id="90581-181">查看事件日志以验证没有 BizTalk Server 错误。</span><span class="sxs-lookup"><span data-stu-id="90581-181">Review the event log to verify that there are no BizTalk Server errors.</span></span>  

## <a name="see-also"></a><span data-ttu-id="90581-182">请参阅</span><span class="sxs-lookup"><span data-stu-id="90581-182">See Also</span></span>  
 <span data-ttu-id="90581-183">[如何配置 MQSeries 适配器发送和接收处理程序](../core/how-to-configure-mqseries-adapter-send-and-receive-handlers.md) </span><span class="sxs-lookup"><span data-stu-id="90581-183">[How to Configure MQSeries Adapter Send and Receive Handlers](../core/how-to-configure-mqseries-adapter-send-and-receive-handlers.md) </span></span>  
 [<span data-ttu-id="90581-184">配置 MQSeries 适配器</span><span class="sxs-lookup"><span data-stu-id="90581-184">Configuring the MQSeries Adapter</span></span>](../core/configuring-the-mqseries-adapter.md)