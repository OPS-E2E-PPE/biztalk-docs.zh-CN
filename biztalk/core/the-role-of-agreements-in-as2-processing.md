---
title: 协议在 AS2 处理中的角色 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: bb6a6fe1-8fb4-4998-a1b4-aadad7e672c4
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b6b5b93332f74743c4798f0ce821794d29e5262c
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65394054"
---
# <a name="the-role-of-agreements-in-as2-processing"></a><span data-ttu-id="9f08d-102">协议在 AS2 处理中的角色</span><span class="sxs-lookup"><span data-stu-id="9f08d-102">The Role of Agreements in AS2 Processing</span></span>
<span data-ttu-id="9f08d-103">组织使用[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]来接收 AS2 消息，以及发送 AS2 消息，一个或多个贸易合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="9f08d-103">An organization uses [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to receive AS2 messages from, and send AS2 messages to, one or more trading partners.</span></span> <span data-ttu-id="9f08d-104">贸易合作伙伴，又定义是在组织内的业务实体的业务配置文件。</span><span class="sxs-lookup"><span data-stu-id="9f08d-104">The trading partners, in turn define business profiles that are business entities within an organization.</span></span> <span data-ttu-id="9f08d-105">在两个业务配置文件属于不同贸易合作伙伴之间的双向贸易合作伙伴协议中设置 AS2 属性。</span><span class="sxs-lookup"><span data-stu-id="9f08d-105">You set AS2 properties in bi-directional trading partner agreements between two business profiles belonging to different trading partners.</span></span>  
  
 <span data-ttu-id="9f08d-106">贸易合作伙伴管理 (TPM) 用户界面中，可以创建贸易合作伙伴协议。</span><span class="sxs-lookup"><span data-stu-id="9f08d-106">You can create trading partner agreements in the Trading Partner Management (TPM) user interface.</span></span> <span data-ttu-id="9f08d-107">TPM 屏幕位于**参与方**节点的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="9f08d-107">The TPM screens are in the **Parties** node of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
 <span data-ttu-id="9f08d-108">有关贸易合作伙伴如何的详细信息，业务配置文件和协议一起形成 TPM 解决方案，请参阅[贸易合作伙伴管理解决方案的构建基块](../core/building-blocks-of-a-trading-partner-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="9f08d-108">For more information about how trading partners, business profiles, and agreements tie together into a TPM solution, see [Building Blocks of a Trading Partner Management Solution](../core/building-blocks-of-a-trading-partner-management-solution.md).</span></span>  
  
## <a name="configuring-an-agreement-for-as2-processing"></a><span data-ttu-id="9f08d-109">为 AS2 处理配置协议</span><span class="sxs-lookup"><span data-stu-id="9f08d-109">Configuring an Agreement for AS2 Processing</span></span>  
 <span data-ttu-id="9f08d-110">任何时候贸易合作伙伴接收 AS2 消息，或向另一个贸易合作伙伴发送 AS2 消息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]AS2 接收管道或 AS2 发送管道将处理该消息根据两个贸易之间的 AS2 协议属性合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="9f08d-110">Any time a trading partner receives an AS2 message from, or sends an AS2 message to, another trading partner, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] AS2 receive pipeline or AS2 send pipeline will process the message according to the AS2 agreement properties between the two trading partners.</span></span> <span data-ttu-id="9f08d-111">可以配置的 AS2 属性的定义方式[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将执行传入和传出的 AS2 通信。</span><span class="sxs-lookup"><span data-stu-id="9f08d-111">You can configure the AS2 properties that define how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform AS2 communications, both incoming and outgoing.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9f08d-112">不同于在 EDI 处理中，有没有备用 AS2 协议的[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]如果它无法确定协议，可以使用。</span><span class="sxs-lookup"><span data-stu-id="9f08d-112">Unlike in EDI processing, there are no fallback AS2 agreements that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can use if it cannot determine the agreement.</span></span> <span data-ttu-id="9f08d-113">AS2 接收或发送管道将处理该消息，仅当确定了协议。</span><span class="sxs-lookup"><span data-stu-id="9f08d-113">The AS2 receive or send pipeline will process the message only if an agreement is determined.</span></span>  
> 
> [!NOTE]
>  <span data-ttu-id="9f08d-114">AS2 协议在 EDI 协议中单独配置。</span><span class="sxs-lookup"><span data-stu-id="9f08d-114">The AS2 agreement is configured separately from the EDI agreement.</span></span> <span data-ttu-id="9f08d-115">当接收文档，AS2 协议在 AS2 处理过程中得到解决，然后 EDI 协议可解析单独在 EDI 处理过程。</span><span class="sxs-lookup"><span data-stu-id="9f08d-115">When receiving documents, the AS2 agreement is resolved during AS2 processing, then the EDI agreement is resolved separately during EDI processing.</span></span> <span data-ttu-id="9f08d-116">这两个协议共同构成合作关系。</span><span class="sxs-lookup"><span data-stu-id="9f08d-116">Both the agreements together make a partnership.</span></span> <span data-ttu-id="9f08d-117">有关详细信息请参阅[贸易合作伙伴协议](../core/trading-partner-agreement.md)。</span><span class="sxs-lookup"><span data-stu-id="9f08d-117">For more information see [Trading Partner Agreement](../core/trading-partner-agreement.md).</span></span>  
> 
> [!NOTE]
>  <span data-ttu-id="9f08d-118">这些属性用于定义常规方面的参与方，如名称和别名、 发送端口和签名证书指定为贸易合作伙伴的属性的一部分。</span><span class="sxs-lookup"><span data-stu-id="9f08d-118">Properties that define general aspects of the party, such as name and aliases, send ports, and signing certificate are specified as part of the trading partner’s properties.</span></span>  
  
 <span data-ttu-id="9f08d-119">可用于 HTTP/HTTPS 传输 EDIINT/AS2 编码的消息或非 EDI AS2 编码的消息通过。</span><span class="sxs-lookup"><span data-stu-id="9f08d-119">You can use HTTP/HTTPS transport for either EDIINT/AS2-encoded messages or non-EDI over AS2-encoded messages.</span></span> <span data-ttu-id="9f08d-120">如果通过 HTTP/HTTPS 传输传送 EDIINT/AS2 编码的消息，将应用协议的 EDI 属性。</span><span class="sxs-lookup"><span data-stu-id="9f08d-120">If you transmit EDIINT/AS2-encoded messages over HTTP/HTTPS transport, the EDI properties for the agreement will apply.</span></span>  
  
 <span data-ttu-id="9f08d-121">本组织的签名证书中定义**证书**页**BizTalk 组-组属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="9f08d-121">The signing certificate for the home organization is defined in the **Certificate** page of the **BizTalk Group - Group Properties** dialog box.</span></span> <span data-ttu-id="9f08d-122">此外，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使你可以覆盖默认值通过定义为协议属性的一部分的证书签名的 AS2 消息的证书。</span><span class="sxs-lookup"><span data-stu-id="9f08d-122">Additionally, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] enables you to override the default signing certificate for AS2 messages by defining a certificate as part of the agreement properties.</span></span>  <span data-ttu-id="9f08d-123">若要定义特定协议的不同的证书，请使用**签名证书**页中的单向 AS2 协议**协议属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="9f08d-123">To define a different certificate for a specific agreement, use the **Signature Certificate** page of the one-way AS2 agreement in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="9f08d-124">有关如何指定不同的证书的说明，请参阅[配置签名证书 (AS2)](../core/configuring-signature-certificates-as2.md)。</span><span class="sxs-lookup"><span data-stu-id="9f08d-124">For instructions on how to specify a different certificate, see [Configuring Signature Certificates (AS2)](../core/configuring-signature-certificates-as2.md).</span></span>  
  
## <a name="determining-an-agreement-for-as2-processing"></a><span data-ttu-id="9f08d-125">确定用于 AS2 处理的协议</span><span class="sxs-lookup"><span data-stu-id="9f08d-125">Determining an Agreement for AS2 Processing</span></span>  
 <span data-ttu-id="9f08d-126">时[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收 AS2 编码的消息，它会尝试确定参与方发送消息的匹配 AS2-From 标头与 AS2-从参与方的单向协议中的协议设置。</span><span class="sxs-lookup"><span data-stu-id="9f08d-126">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an AS2-encoded message, it attempts to determine the party that sent the message by matching the AS2-From header to the AS2-From agreement settings in the one-way agreement for the party.</span></span> <span data-ttu-id="9f08d-127">当[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]发送 AS2 编码的消息，它会尝试确定将通过匹配 AS2 接收该消息的参与方-To 标头与 AS2-To 协议属性中的参与方的单向协议。</span><span class="sxs-lookup"><span data-stu-id="9f08d-127">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] sends an AS2-encoded message, it attempts to determine the party that will receive the message by matching the AS2-To header to the AS2-To agreement property in the one-way agreement for the party.</span></span> <span data-ttu-id="9f08d-128">有关详细信息，请参阅[传入 AS2 消息的协议解析](../core/agreement-resolution-for-incoming-as2-messages.md)或[传出 AS2 消息的协议解析](../core/agreement-resolution-for-outgoing-as2-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="9f08d-128">For more information, see [Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md) or [Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9f08d-129">请参阅</span><span class="sxs-lookup"><span data-stu-id="9f08d-129">See Also</span></span>  
 <span data-ttu-id="9f08d-130">[传入 AS2 消息的协议解析](../core/agreement-resolution-for-incoming-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="9f08d-130">[Agreement Resolution for Incoming AS2 Messages](../core/agreement-resolution-for-incoming-as2-messages.md) </span></span>  
 <span data-ttu-id="9f08d-131">[对传出 AS2 消息的协议解析](../core/agreement-resolution-for-outgoing-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="9f08d-131">[Agreement Resolution for Outgoing AS2 Messages](../core/agreement-resolution-for-outgoing-as2-messages.md) </span></span>  
 [<span data-ttu-id="9f08d-132">配置 AS2 属性</span><span class="sxs-lookup"><span data-stu-id="9f08d-132">Configuring AS2 Properties</span></span>](../core/configuring-as2-properties.md)