---
title: 适配器变量 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: aeda96bc-5141-4c42-8a29-b0a28bc47aa4
caps.latest.revision: 25
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6ddf23e80c999619950ea6ab92782fe28be7e59e
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "37021542"
---
# <a name="adapter-variables"></a>适配器变量
任何自定义适配器都有大量变量需要处理。 赋给这些变量的值将影响适配器实现的自定义逻辑。 特定于传输或特定于应用程序的配置属性还有助于支持您的解决方案。 下表列出了这些常见变量。 您必须确定是否要在您的自定义适配器中支持每个变量。  

 对于每个选项，您的适配器必须实现特定的接口。 下表列出了各个变量选项以及有关链接，这些链接提供与编写适配器代码来支持的您的设计决策有关的详细信息。  


|                           适配器变量                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                       通信方向                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     **接收。** 接收适配器侦听传入消息的特定于协议的地址。 在收到某一消息时，接收适配器将该消息移交给消息引擎，消息引擎将该消息经过接收管道传递，最终保存在 MessageBox 数据库中。<br /><br /> **发送。** 在消息引擎需要将某一消息发送到特定终结点时，会将该消息传递到发送管道。 发送适配器接受来自发送管道的消息，并将该消息发送到发送端口。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                           适配器宿主                            | **在进程中。** 创建并托管在 BizTalk 服务进程 BTSNTSvc.exe 进程内适配器。 如果主机是 64 位进程的名为 BTSNTSvc64.exe。 为简单起见，我们不会提及再次在本部分中的 64 位进程。<br /><br /> 这意味着，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]创建和管理该适配器的生存期，使用传输代理初始化、 适配器处理请求，并且将终止在服务关闭时适配器。<br /><br /> 对于进程内适配器，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]还提供配置信息到适配器在运行时，包括处理程序、 发送端口和接收位置配置。 此外，例如服务时段配置的方面被处理由消息引擎，以便该适配器不需要请确保接收位置或发送端口是在服务时段外。<br /><br /> 请注意，所有发送适配器是进程内适配器，必须在 BTSNTSvc.exe 进程中运行。<br /><br /> **隔离。** 在不是独立的主机中创建该适配器属于[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运行时。 独立适配器的一个示例是 HTTP 接收适配器，在进程空间的 Internet 信息服务 (IIS) 中运行。<br /><br /> IIS 进程模型是由 IIS 管理 ASP.NET 应用程序和 ISAPI 扩展的生存期。 当[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]无法管理的生命周期的适配器，适配器被称为一个独立适配器。<br /><br /> 因为 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 不管理独立适配器的实例化，所以，适配器必须创建自己的传输代理，并需要自己完成传输代理注册。<br /><br /> 请注意，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]体系结构消除了不必要的进程间通信。 由于独立的适配器和 BizTalk 堆栈是在同一进程中，没有任何进程间通信时该适配器调用消息引擎。 消息引擎和数据库，这是不可避免之间是唯一的进程间通信。<br /><br /> COM + 应用程序不能驻留在非托管代码中编写发送适配器。 |
|                       消息交换模式                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           **单向。** 传入或传出消息。<br /><br /> **请求-响应**（双向）**。** 请求-响应适配器始终是接收适配器。 请求-响应接收适配器从客户端接收请求消息，并将消息提交到[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。 之后[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]已处理的请求消息，它将响应消息发送回适配器。  然后，适配器将传输回客户端的响应消息。<br /><br /> **要求-响应**（双向）**。** 要求-响应适配器始终是发送适配器。 要求响应发送适配器发送的请求消息[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]到目标，等待响应消息，然后将响应消息提交回[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                          发送端口绑定                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           **动态发送端口和接收位置。** URI 变量的发送端口或接收位置中动态使用在运行时确定绑定。<br /><br /> **静态发送端口和接收位置。** URI 变量的发送端口或接收位置是静态的且之前运行时配置。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|          同步与异步发送适配器发送          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      **同步发送适配器。** 执行时发送操作，消息引擎将阻止传输代理线程，直到它已发送的消息批，并返回。 消息传输时，重试，挂起，或转到下一步操作已完成后，传输代理处理消息删除。<br /><br /> **异步发送适配器。** 异步发送适配器不会阻止传输代理线程，但执行发送操作时，而是使用单独的线程。 与不同的是同步的适配器，此适配器必须实现所有删除，然后重试逻辑，然后重试。传输代理不处理逻辑。<br /><br /> 发送异步消息的适配器允许更好地[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]比发送同步消息的性能。 这是因为线程上花费大量时间等待入站或出站操作完成。 因为消息引擎与 CPU 高度相关，所以，阻止消息引擎线程将会降低适配器的性能。<br /><br /> 异步传输使用强烈建议，并提高性能。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                    异步接收适配器                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      所有接收适配器是异步的。 这意味着适配器提交到 BizTalk 消息引擎的新消息它不会等待返回之前完全处理它们时。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                        事务支持                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    **事务性适配器。** 支持事务性发送和接收的消息。 在发送端异步批处理的发送适配器仅支持事务。<br /><br /> **非事务性适配器。** 它不接收或发送消息的显式事务作用域内适配器。 许多适配器都是非事务性的因为它们正在送入到或从系统，如 Windows 文件系统中，不支持事务。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 与批处理不受支持的支持批的发送适配器发送适配器 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              **支持批处理的适配器。** 发送适配器可以处理的操作批中的消息。<br /><br /> 所有适配器可以收集的所有可用于提交消息，然后将其提交到 MessageBox 数据库，从而减少了必要的数据库更新数。 在某些情况下，这意味着，批处理的长度是一个。 同样，发送适配器收集的所有可用于发送消息、 将其提取出来，，然后将其一次性全部发送到其目标。<br /><br /> 一般情况下，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]一批视为一个用于数据库更新的工作单元。 在同一批中，适配器可以提交单向、 请求-响应和要求响应消息;挂起消息;删除消息;请求消息重试以进行传输;或消息被移动到备份传输的请求。 如有可能，应使用批处理的传输。<br /><br /> 发送和接收适配器可以进行批处理，但批处理的异步发送适配器仅支持事务。<br /><br /> **批处理不受支持的适配器。** 每个消息需要对服务器的独立调用。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                   支持批处理的接收适配器                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  所有接收适配器支持批处理。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|       动态与静态设计时适配器配置        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        **动态适配器设计时。** 为适配器以支持动态设计时配置必须开发自定义用户界面 (UI) 以使用添加适配器元数据向导。 此接口允许用户选择要添加到 BizTalk 项目的架构，并通过 Web 服务描述语言 (WSDL) 文件返回其服务说明。 适配器提供了用于获取架构的自定义 UI。 通过添加适配器元数据向导导入服务时，它将端口类型、 消息类型和业务流程添加到除了架构的 BizTalk 项目。<br /><br /> 有关详细信息，请参阅[静态设计时适配器配置](../core/static-design-time-adapter-configuration.md)。<br /><br /> **静态适配器的设计时。** 为适配器以支持静态设计时配置实现标准接口，以允许添加适配器元数据向导中选择要添加到 BizTalk 项目的架构。 BizTalk 适配器框架为适配器提供 UI。<br /><br /> 有关修改示例文件适配器的信息，请参阅[动态设计时适配器配置](../core/dynamic-design-time-adapter-configuration.md)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|            与应用程序适配器的传输适配器            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  **传输适配器。** 传输适配器支持特定协议，并且不使用架构。 十二个本地适配器，9 个是传输适配器： MSMQ、 MQ Series、 文件、 FTP、 HTTP、 SMTP、 POP3 和 SOAP。<br /><br /> **应用程序适配器。** 应用程序适配器使用数据架构将数据发送到指定的应用程序。 本地适配器中，其中两种应用程序适配器：[!INCLUDE[btsWinSharePointSvcsNoVersion](../includes/btswinsharepointsvcsnoversion-md.md)]和 SQL。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

 有关在您的自定义适配器代码中实现的接口的信息，请使用下表中的链接，了解您计划创建的适配器的类型。 在某些情况下，您必须结合使用列出的接口，用列出的接口满足一个要求，用其他页上列出的接口满足另一个要求。  

|变量|有关详细信息，请参阅：|  
|--------------|--------------------------|  
|**发送适配器**|[实例化和初始化发送适配器](../core/instantiating-and-initializing-a-send-adapter.md)|  
|同步|[同步发送适配器的接口](../core/interfaces-for-a-synchronous-send-adapter.md)|  
|异步|[异步发送适配器的接口](../core/interfaces-for-an-asynchronous-send-adapter.md)|  
|Batch 支持的同步|[支持同步批处理的发送适配器的接口](../core/interfaces-for-a-synchronous-batch-supported-send-adapter.md)|  
|异步批处理支持|[支持异步批处理的发送适配器的接口](../core/interfaces-for-an-asynchronous-batch-supported-send-adapter.md)|  
|事务性异步批处理支持|[支持事务性异步批处理的发送适配器的接口](../core/interfaces-for-a-transactional-asynchronous-batch-supported-send-adapter.md)|  
|要求响应|[要求-响应发送适配器的接口](../core/interfaces-for-a-solicit-response-send-adapter.md)|  
|**接收适配器**|[实例化和初始化接收适配器](../core/instantiating-and-initializing-a-receive-adapter.md)|  
|Regular|[进程内接收适配器的接口](../core/interfaces-for-an-in-process-receive-adapter.md)|  
|隔离|[独立接收适配器的接口](../core/interfaces-for-an-isolated-receive-adapter.md)|  
|批处理支持|[支持批处理的接收适配器的接口](../core/interfaces-for-a-batch-supported-receive-adapter.md)|  
|支持批处理的事务|[支持批处理的事务性接收适配器的接口](../core/interfaces-for-a-transactional-batch-supported-receive-adapter.md)|  
|同步请求-响应适配器|[同步请求-响应接收适配器的接口](../core/interfaces-for-a-synchronous-request-response-receive-adapter.md)|  

## <a name="see-also"></a>请参阅  
 [开发自定义适配器](../core/developing-custom-adapters.md)   
 [使用适配器](../core/using-adapters.md)   
 [适配器示例 - 开发](../core/adapter-samples-development.md)