---
title: WCF 适配器常见问题解答：服务体系结构 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8bad0063-ccff-41f4-b4e0-a02b49403c2d
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8cf46334fe3c40b222552c97115bc7758134c7a4
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65393594"
---
# <a name="wcf-adapter-faq-service-architecture"></a><span data-ttu-id="6a3a3-102">WCF 适配器常见问题解答：服务体系结构</span><span class="sxs-lookup"><span data-stu-id="6a3a3-102">WCF Adapter FAQ: Service Architecture</span></span>
## <a name="what-is-the-difference-between-a-wcf-custom-behavior-and-a-biztalk-pipeline-component"></a><span data-ttu-id="6a3a3-103">WCF 自定义行为和 BizTalk 管道组件之间的区别是什么？</span><span class="sxs-lookup"><span data-stu-id="6a3a3-103">What is the difference between a WCF custom behavior and a BizTalk pipeline component?</span></span>  
 <span data-ttu-id="6a3a3-104">在初始检查，WCF 自定义行为是非常类似于传统的 BizTalk 管道。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-104">Upon initial inspection, a WCF custom behavior is very much like a traditional BizTalk pipeline.</span></span> <span data-ttu-id="6a3a3-105">两者都利用消息侦听中断到其目标的消息流、 执行某些自定义消息，处理的基本概念，并将其转发到其目标。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-105">Both leverage the basic concept of message interception to interrupt the flow of a message to its destination, execute some custom message processing in it, and forward it on to its destination.</span></span> <span data-ttu-id="6a3a3-106">此侦听可以发生之前 （绑定到接收位置） 或之后 （绑定到发送端口） 处理消息通过 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-106">This interception can occur either before (bound to a receive location) or after (bound to a send port) a message has been processed by BizTalk Server.</span></span> <span data-ttu-id="6a3a3-107">如何在两个方法中进行此侦听不同在都实现中的拦截的点。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-107">How this interception occurs within the two methods differs not only in implementation but also from within the point of interception.</span></span> <span data-ttu-id="6a3a3-108">下面是一些差异：</span><span class="sxs-lookup"><span data-stu-id="6a3a3-108">Here are some of the differences:</span></span>  
  
-   <span data-ttu-id="6a3a3-109">管道可以使用由业务流程。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-109">Pipelines can be used by an orchestration.</span></span> <span data-ttu-id="6a3a3-110">WCF 行为仅限于由 WCF 适配器从 BizTalk Server 中被调用。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-110">WCF behaviors are limited to being called by a WCF adapter from within BizTalk Server.</span></span>  
  
-   <span data-ttu-id="6a3a3-111">管道是特定于 BizTalk Server 比较老的技术。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-111">Pipelines are an older technology specific to BizTalk Server.</span></span> <span data-ttu-id="6a3a3-112">由 BizTalk Server 以及其他纯 WCF 方案中，可以使用 WCF 行为。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-112">WCF behaviors can be used by BizTalk Server, and also in other pure WCF scenarios.</span></span>  
  
-   <span data-ttu-id="6a3a3-113">管道存在于设置管道阶段，如解码、 验证等。WCF 行为可以插入到在任何其四个侦听入口点 （稍后介绍） 的消息流。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-113">Pipelines live within set pipeline stages, such as Decode, Validate, etc. WCF behaviors can be plugged into the message flow at any of its four interception entry points (described shortly).</span></span>  
  
-   <span data-ttu-id="6a3a3-114">管道是纯粹它们的功能的运行时。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-114">Pipelines are purely runtime in their functionality.</span></span> <span data-ttu-id="6a3a3-115">虽然 WCF 行为也是这样，它们还可以强制实施关系，或在从 BizTalk Server 管理控制台中的配置过程中设置数据约束值。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-115">While WCF behaviors are as well, they can also enforce relational or data constraints upon the values set during configuration from within the BizTalk Server Administration console.</span></span>  
  
-   <span data-ttu-id="6a3a3-116">管道可以对 BizTalk 消息，而 WCF 行为在 WCF 消息上运行。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-116">Pipelines can operate on a BizTalk message whereas WCF behaviors operate on a WCF message.</span></span> <span data-ttu-id="6a3a3-117">这意味着管道可以某些操作，如升级 BizTalk 上下文属性，而 WCF 行为则可以访问 WCF 消息属性。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-117">This means the pipeline can do things like promote a BizTalk context property whereas a WCF behavior can access a WCF message property.</span></span>  
  
-   <span data-ttu-id="6a3a3-118">没有在 WCF 或 WCF 适配器的多部分消息的模型。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-118">There is no model of multipart messages in WCF or in the WCF adapters.</span></span> <span data-ttu-id="6a3a3-119">但是，因为管道组件可以处理需要的任何方式在 BizTalk 消息，它可以处理多部分消息，如有必要。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-119">However, since a pipeline component can manipulate the BizTalk message in whatever way it needs to, it can process a multipart message if necessary.</span></span>  
  
## <a name="for-the-receive-locations-or-send-ports-using-the-wcf-basichttp-and-wcf-wshttp-adapters-what-type-of-encoding-should-i-select"></a><span data-ttu-id="6a3a3-120">对于接收位置或使用 Wcf-basichttp 和 Wcf-wshttp 适配器的发送端口，哪种类型的编码应该我选择？</span><span class="sxs-lookup"><span data-stu-id="6a3a3-120">For the receive locations or send ports using the WCF-BasicHttp and WCF-WSHttp adapters, what type of encoding should I select?</span></span>  
 <span data-ttu-id="6a3a3-121">对于每个这些适配器没有基于 HTTP 的消息和文本编码。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-121">For each of these adapters there is HTTP-based message and text encoding.</span></span> <span data-ttu-id="6a3a3-122">消息编码指定用于消息，即 MTOM （消息传输组织机制） 或文本的 SOAP 编码器。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-122">Message encoding specifies the SOAP encoder used for the message, which is either MTOM (Message Transmission Organization Mechanism) or Text.</span></span> <span data-ttu-id="6a3a3-123">如果选择文本，则文本编码必须选择。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-123">If Text is chosen, then a Text encoding must be selected.</span></span> <span data-ttu-id="6a3a3-124">此选项是 unicodeFFF (大 endian)、 （16 位编码），utf-16 和 utf-8 （8 位编码）。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-124">The choices for this are unicodeFFF (big endian), utf-16 (16-bit encoding), and utf-8 (8-bit encoding).</span></span>  
  
 <span data-ttu-id="6a3a3-125">MTOM 是二进制数据的建议且最有效的传输机制。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-125">MTOM is the recommended and most efficient transfer mechanism for binary data.</span></span> <span data-ttu-id="6a3a3-126">但是，需要该服务能够处理 MTOM 数据，这使得此选项比纯文本的可移植性更低。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-126">However it requires that the service be able to process MTOM data, and this makes this option much less portable than plain Text.</span></span> <span data-ttu-id="6a3a3-127">如果使用标准的非二进制数据传输，MTOM 实际效率可能比使用文本选项。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-127">If used to transfer standard, non-binary data, MTOM can actually be less efficient than using the Text option.</span></span> <span data-ttu-id="6a3a3-128">文本普遍接受，并允许更多跨平台互操作性，但它是两个效率较低的选择，如果要传输的数据包含非文本内容。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-128">Text is universally accepted and allows for more cross-platform interoperability, but it is the less efficient choice of the two if the data being transmitted contains non-textual content.</span></span> <span data-ttu-id="6a3a3-129">使用 WCF 服务约定时选择绑定编码选项时，这是一个重要因素。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-129">This is an important factor when selecting a choice of binding encodings when using WCF service contracts.</span></span> <span data-ttu-id="6a3a3-130">了解 WCF 操作将传输的数据和进程影响的消息编码正确的选择。</span><span class="sxs-lookup"><span data-stu-id="6a3a3-130">Knowing the data that the WCF operations will transfer and process affects the correct choice of message encoding.</span></span>