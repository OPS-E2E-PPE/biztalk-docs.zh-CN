---
title: 如何修改速率基于限制设置 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- Bts10.settings.HostRate
ms.assetid: a99dfb29-dee6-4a43-8d34-45179d9d0b5e
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: be54bd3d986143b3f267655bbcb003967e50238f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-modify-rate-based-throttling-settings"></a>如何修改基于速率的阻止设置
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中的基于速率的阻止功能，应用于包含业务流程或发送适配器的主机实例，这些适配器接收和传送或处理已发布到 MessageBox 的消息。 使用 [!INCLUDE[btsSettingsDashboard](../includes/btssettingsdashboard-md.md)]，您可以跨 BizTalk 组，修改给定主机的基于速率的阻止功能配置设置。 这些设置将应用于分配到给定主机的所有主机实例。 本主题提供了修改这些设置的分步过程。  
  
 以下情况可以触发基于速率的阻止功能条件：  
  
-   主机实例使用的内存数量、线程数和数据库连接数，超过了阻止阈值。  
  
-   主机实例的“Message delivery incoming rate”超出“Message delivery outgoing rate”* 指定的“加速因子(百分比)”值。  
  
-   主机实例同时处理的消息数超过了“每 CPU 的进程内消息数”* 框上可用的 CPU 数。  
  
## <a name="prerequisites"></a>先决条件  
 若要执行此操作，则必须以 BizTalk Server Administrators 组成员的身份登录。  
  
### <a name="to-modify-the-rate-based-throttling-settings-of-a-host"></a>修改主机基于速率的阻止设置  
  
1.  在**BizTalk Server 管理控制台**，展开[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，右键单击**BizTalk 组**，然后单击**设置**。  
  
2.  在**BizTalk 设置仪表板**对话框中，在**主机**选项卡上，单击**速率基于限制**选项卡。  
  
3.  执行以下操作，单击**应用**应用修改再转到另一个选项卡。否则，请单击**确定**应用进行修改并退出设置仪表板。  
  
    |使用此选项|执行的操作|边界值|默认值|升级逻辑|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**主机**|从下拉列表中，选择代表 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 运行时实例的主机。|-|-|-|  
  
     **发布**  
  
    |使用此选项|执行的操作|边界值|默认值|升级逻辑|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**最小样本数**|指定消息的最小数[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]用于将示例**采样窗口持续时间**之前考虑基于率的限制。<br /><br /> 如果实际的采样窗口中的样本数低于此值，然后这些示例将被丢弃，而且不应用限制。 此值应该与中等负载下可以发布消息的速率一致。 例如，如果你的系统应处理每秒在中型负载下的 1,000 文档，则此参数应设置为 1,000\*示例以秒为单位的窗口持续时间 (或更确切地说，1 \* **采样窗口持续时间**（秒）)。 如果此值设置过低，则系统可能会在低负载下触发阻止条件。 如果此值设置过大，则可能会由于样本不足而导致此方法无法生效。|1 – Integer 类型的最大值|100|-|  
    |**采样窗口持续时间**|指定以秒为单位度量的时段，用于基于所收集的样本来计算发布速率。 如果发布单个消息需要较高的延迟时间，则应增加该持续时间。|1 – Integer 类型的最大值|15000|-|  
    |**速率 overdrive 因素**|指定用于控制在触发阻止条件之前允许请求速率高于完成速率的程度的百分比。<br /><br /> 例如，如果消息正在发布的每秒 200 速率，此参数设置为 125，则系统允许的每秒最多 250 个消息发布 (125%* 200 = 250) 之前应用限制。 指定此参数的值可能会导致系统更加主动地限制，并且可能导致过度限制太小。 指定此参数的值太大可以导致下限制和阻止从识别合法限制条件的限制机制。|1 – Integer 类型的最大值|125|-|  
    |**最大限制延迟**|指定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 因为阻止而实施消息实例的最大延迟（以毫秒为单位）。 实际延迟时间取决于阻止条件的严重性。|1 – Integer 类型的最大值|300000|-|  
    |**限制重写**|指定是否要重写消息发布阻止。|0： 不重写<br /><br /> 1： 启动限制条件<br /><br /> 2： 不限制|0|从注册表中读取的阻止参数应当一对一地映射到主机实例参数。|  
    |**限制重写严重性**|指定入站阻止条件的严重性。<br /><br /> 更高版本的重要程度的入站的限制条件启动时的值会增加**限制替代**设置为 1。|1 – 1000|100|所有主机实例的最小值。|  
  
     **传递**  
  
    |使用此选项|执行的操作|边界值|默认值|升级逻辑|  
    |--------------|----------------|---------------------|-------------------|-------------------|  
    |**最小样本数**|指定的最小的消息的示例将 BizTalk**采样窗口持续时间**之前考虑基于率的限制。<br /><br /> 如果实际的采样窗口中的样本数低于此值，然后这些示例将被丢弃，而且不应用限制。 此值应该与中等负载下可以传送消息的速率一致。 例如，如果你的系统应处理每秒在中型负载下的 1,000 文档，则此参数应设置为 1,000\*示例以秒为单位的窗口持续时间 (或更确切地说，1 \* **示例时段持续时间** （秒） 对于此方案)。<br /><br /> 如果此值设置过低，则系统可能会在低负载下触发阻止条件。 如果此值设置过大，则可能会由于样本不足而导致此方法无法生效。|1 – Integer 类型的最大值|100|-|  
    |**采样窗口持续时间**|指定以秒为单位度量的时段，用于基于所收集的样本来计算处理速率。 如果处理单个消息需要较大的延迟时间，则应增加该持续时间。|1 – Integer 类型的最大值|15000|-|  
    |**速率 overdrive 因素**|指定用于控制在触发阻止条件之前允许向业务流程或消息引擎传送的速率高于完成速率的程度的百分比。<br /><br /> 例如，如果消息处理速度为每秒 200 条，并且此参数设置为 125，则在应用阻止功能前，系统将允许每秒最多处理 250 条消息 (125% * 200 = 250)。 如果将此参数指定为过小的值，则会导致系统更主动地进行阻止，从而可能导致过度阻止。 如果将此参数指定为过高的值，则会导致不易应用阻止功能，并且不利于阻止机制识别合法的阻止条件。|1 – Integer 类型的最大值|125|-|  
    |**最大限制延迟**|指定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 因为阻止而实施消息实例的最大延迟。 实际延迟时间取决于阻止条件的严重性。|1 – Integer 类型的最大值|300000|-|  
    |**限制重写**|指定是否要重写消息传递阻止。|0： 不重写<br /><br /> 1： 启动限制条件<br /><br /> 2： 不限制|0|从注册表中读取的阻止参数应当一对一地映射到主机实例参数。|  
    |**限制重写严重性**|确定出站阻止条件的严重性。<br /><br /> 更高版本的重要程度的出站的限制条件启动时的值会增加**限制替代**设置为 1。|1 – 1000|100|所有主机实例的最小值。|  
  
    > [!NOTE]
    >  若要还原默认设置，请单击**还原为默认值**。  
  
## <a name="see-also"></a>另请参阅  
 [如何修改主机设置](../core/how-to-modify-host-settings.md)