---
title: BizTalk Server 中的使用逻辑应用适配器 |Microsoft 文档
description: 安装和配置来创建接收端口、 接收位置，以及在 BizTalk Server 发送端口的 Logic Apps 适配器
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 72f2a5ac-a1f6-4bdb-8c29-8267ede75b17
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: faa43c187df7a8eb9fccd2f02f23f16e86b97ce0
ms.sourcegitcommit: 36350889f318e1f7e0ac9506dc8df794d475bda6
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/20/2018
---
# <a name="logic-app-adapter"></a><span data-ttu-id="6e88d-103">逻辑应用适配器</span><span class="sxs-lookup"><span data-stu-id="6e88d-103">Logic App Adapter</span></span>

## <a name="overview"></a><span data-ttu-id="6e88d-104">概述</span><span class="sxs-lookup"><span data-stu-id="6e88d-104">Overview</span></span>
<span data-ttu-id="6e88d-105">BizTalk Server 使用 Logic Apps 适配器接收消息从 Azure 逻辑应用程序，或将消息发送到 Azure 逻辑应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-105">BizTalk Server uses the Logic Apps adapter to receive messages from an Azure logic app, or send messages to an Azure logic app.</span></span> 

<span data-ttu-id="6e88d-106">在 Azure 中，我们将创建逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-106">In Azure, we create a logic app.</span></span> <span data-ttu-id="6e88d-107">此逻辑应用程序使用 BizTalk 连接器连接到你创建 BizTalk 服务器接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-107">This logic app uses the BizTalk Connector to connect to a receive location that you create on your BizTalk Server.</span></span> <span data-ttu-id="6e88d-108">本主题假定你已具备一定的 Azure 逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-108">This topic assumes you have some familiarity with Azure Logic Apps.</span></span> <span data-ttu-id="6e88d-109">如果你熟悉逻辑应用，我们建议 [学习更多相关信息](https://azure.microsoft.com/documentation/articles/app-service-logic-what-are-logic-apps/), ，，甚至 [创建你自己的逻辑应用](https://azure.microsoft.com/documentation/articles/app-service-logic-create-a-logic-app/)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-109">If you're new to logic apps, we suggest [learning more about them](https://azure.microsoft.com/documentation/articles/app-service-logic-what-are-logic-apps/), and even [creating your own logic app](https://azure.microsoft.com/documentation/articles/app-service-logic-create-a-logic-app/).</span></span>

<span data-ttu-id="6e88d-110">在本主题中，我们将列出的步骤以在 BizTalk Server 中的一条消息接收逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-110">In this topic, we list the steps to receive a message in BizTalk Server from a logic app.</span></span> <span data-ttu-id="6e88d-111">逻辑应用将另一种方法，将消息发送到 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="6e88d-111">Put another way, the logic app sends messages to a BizTalk Server.</span></span> <span data-ttu-id="6e88d-112">接收方使用在 IIS 中的应用程序来处理向 Azure 服务的通信。</span><span class="sxs-lookup"><span data-stu-id="6e88d-112">The receive-side uses applications in IIS to handle the communication with the Azure service.</span></span> <span data-ttu-id="6e88d-113">如果 BizTalk 服务器本地，还会在 BizTalk Server 中，安装数据网关和在 Azure 中创建网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-113">If BizTalk Server is on-premises, you also install a data gateway on the BizTalk Server, and create a gateway in Azure.</span></span> 

<span data-ttu-id="6e88d-114">如果 Azure 虚拟机 (VM) 上安装 BizTalk Server，则你可以选择将 VM 公开为 HTTP 终结点 （你获取的 URL），或不会将其作为 HTTP 终结点进行公开。</span><span class="sxs-lookup"><span data-stu-id="6e88d-114">If BizTalk Server is installed on an Azure virtual machine (VM), then you can choose to expose the VM as an HTTP endpoint (you get a URL), or don't expose it as an HTTP endpoint.</span></span> <span data-ttu-id="6e88d-115">如果不将其公开，你不需要使用网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-115">If you expose it, then you don't need to use the gateway.</span></span> <span data-ttu-id="6e88d-116">逻辑应用程序中，可以在 BizTalk 连接器中输入你的 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-116">You can enter your URL in the BizTalk Connector in your logic app.</span></span> <span data-ttu-id="6e88d-117">如果不公开 VM (没有 URL)，然后你需要使用网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-117">If you don't expose the VM (no URL), then you need to use the gateway.</span></span> <span data-ttu-id="6e88d-118">此主题中列出这些步骤。</span><span class="sxs-lookup"><span data-stu-id="6e88d-118">These steps are listed in this topic.</span></span>

<span data-ttu-id="6e88d-119">此外，我们展示如何将消息从 BizTalk Server 发送到 Azure 逻辑应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-119">We also show you how to send messages from BizTalk Server to an Azure logic app.</span></span> <span data-ttu-id="6e88d-120">逻辑应用，将另一种方法，从 BizTalk Server 接收消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-120">Put another way, the logic app receives messages from BizTalk Server.</span></span> <span data-ttu-id="6e88d-121">你将会看到此主题中，发送方将非常简单。</span><span class="sxs-lookup"><span data-stu-id="6e88d-121">The send side is fairly straightforward, as you will see in this topic.</span></span>

<span data-ttu-id="6e88d-122">使用本主题创建接收位置和使用 Logic Apps 适配器发送端口。</span><span class="sxs-lookup"><span data-stu-id="6e88d-122">Use this topic to create a receive location and a send port using the Logic Apps adapter.</span></span> <span data-ttu-id="6e88d-123">你可以使用本地 （加入到你的域） BizTalk Server 中或运行 BizTalk Server 的 Azure 虚拟机中的 LogicApp 适配器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-123">You can use the LogicApp adapter in a on-premises (joined to your domain) BizTalk Server, or an Azure virtual machine running BizTalk Server.</span></span> 

## <a name="requirements"></a><span data-ttu-id="6e88d-124">要求</span><span class="sxs-lookup"><span data-stu-id="6e88d-124">Requirements</span></span>

- <span data-ttu-id="6e88d-125">一个 Azure 订阅来登录到 Azure 门户中，和创建逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-125">An Azure subscription to sign-in to the Azure portal, and create a logic app.</span></span>
- <span data-ttu-id="6e88d-126">可选。</span><span class="sxs-lookup"><span data-stu-id="6e88d-126">Optional.</span></span> <span data-ttu-id="6e88d-127">若要向逻辑应用程序发送一条测试消息，安装 HTTP 测试工具，如 [Fiddler](http://www.telerik.com/fiddler) 或 [Postman](https://www.getpostman.com/)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-127">To send a test message to your logic app, install an HTTP testing tool, such as [Fiddler](http://www.telerik.com/fiddler) or [Postman](https://www.getpostman.com/).</span></span> <span data-ttu-id="6e88d-128">如果你使用另一种方法将消息发送到逻辑应用，你无需使用这些工具。</span><span class="sxs-lookup"><span data-stu-id="6e88d-128">If you use another method to send a message to a logic app, you don't have to use these tools.</span></span> 

## <a name="receive-messages-from-a-logic-app"></a><span data-ttu-id="6e88d-129">从逻辑应用接收消息</span><span class="sxs-lookup"><span data-stu-id="6e88d-129">Receive messages from a logic app</span></span>

<span data-ttu-id="6e88d-130">有几个步骤所涉及的 BizTalk Server 逻辑应用从接收消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-130">There are a few steps involved for BizTalk Server to receive messages from a logic app.</span></span> <span data-ttu-id="6e88d-131">本部分列出了这些步骤。</span><span class="sxs-lookup"><span data-stu-id="6e88d-131">This section lists these steps.</span></span> <span data-ttu-id="6e88d-132">它是 Azure 的更改，因此某些步骤中的用户界面可能不会完全按列出。</span><span class="sxs-lookup"><span data-stu-id="6e88d-132">It's possible the user interface in Azure changes, so some of the steps may not be exactly as listed.</span></span> 

#### <a name="prerequisites"></a><span data-ttu-id="6e88d-133">先决条件</span><span class="sxs-lookup"><span data-stu-id="6e88d-133">Prerequisites</span></span>

- <span data-ttu-id="6e88d-134">如果 BizTalk Server，在本地安装和配置 [本地数据网关](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-install/) 对于 Logic Apps。</span><span class="sxs-lookup"><span data-stu-id="6e88d-134">If BizTalk Server is on-premises, install and configure the [on-premises data gateway](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-install/) for Logic Apps.</span></span> <span data-ttu-id="6e88d-135">然后，在 Azure 中， [创建数据网关资源](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-connection/) 连接到你的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="6e88d-135">Then, in Azure, [create the data gateway resource](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-connection/) to connect to your BizTalk Server.</span></span>
- <span data-ttu-id="6e88d-136">如果 BizTalk 服务器安装在 Azure VM，并且虚拟机未公开为 HTTP 终结点，然后安装和配置 [本地数据网关](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-install/) 对于 Logic Apps。</span><span class="sxs-lookup"><span data-stu-id="6e88d-136">If BizTalk Server is installed on an Azure VM, and the VM is not exposed as an HTTP endpoint, then install and configure the [on-premises data gateway](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-install/) for Logic Apps.</span></span> <span data-ttu-id="6e88d-137">然后，在 Azure 中， [创建数据网关资源](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-connection/) 连接到你的 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="6e88d-137">Then, in Azure, [create the data gateway resource](https://azure.microsoft.com/documentation/articles/app-service-logic-gateway-connection/) to connect to your BizTalk Server.</span></span>
- <span data-ttu-id="6e88d-138">如果 BizTalk 服务器安装在 Azure VM，并且作为 HTTP 终结点公开 VM，然后网关不是需要或使用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-138">If BizTalk Server is installed on an Azure VM, and the VM is exposed as an HTTP endpoint, then the gateway is not needed or used.</span></span> 

### <a name="step-1-install-the-logic-app-adapter"></a><span data-ttu-id="6e88d-139">步骤 1︰ 安装逻辑应用适配器</span><span class="sxs-lookup"><span data-stu-id="6e88d-139">Step 1: Install the Logic App adapter</span></span>

<span data-ttu-id="6e88d-140">逻辑应用适配器为单独下载，而且不包含与 BizTalk Server 安装。</span><span class="sxs-lookup"><span data-stu-id="6e88d-140">The Logic App adapter is a separate download, and is not included with the BizTalk Server installation.</span></span> 

> [!IMPORTANT] 
> <span data-ttu-id="6e88d-141">若要下载 LogicAppAdapter.iso:</span><span class="sxs-lookup"><span data-stu-id="6e88d-141">To download the LogicAppAdapter.iso:</span></span>
> 
> 1. <span data-ttu-id="6e88d-142">转到 [对于 Logic Apps 的 Microsoft BizTalk Server 适配器](https://www.microsoft.com/download/details.aspx?id=54287), ，并保存。</span><span class="sxs-lookup"><span data-stu-id="6e88d-142">Go to [Microsoft BizTalk Server Adapter for Logic Apps](https://www.microsoft.com/download/details.aspx?id=54287), and save.</span></span> 
> 2. <span data-ttu-id="6e88d-143">打开 LogicAppAdapter.iso，并运行 **LogicApp Adapter.msi** 文件来安装。</span><span class="sxs-lookup"><span data-stu-id="6e88d-143">Open the LogicAppAdapter.iso, and run the **LogicApp Adapter.msi** file to install.</span></span>

1. <span data-ttu-id="6e88d-144">在 BizTalk 服务器上，下载并安装逻辑应用适配器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-144">On your BizTalk Server, download and install the Logic App adapter.</span></span> 

2. <span data-ttu-id="6e88d-145">双击选择 **LogicApp Adapter.msi** 安装。</span><span class="sxs-lookup"><span data-stu-id="6e88d-145">Double-select **LogicApp Adapter.msi** to install.</span></span> <span data-ttu-id="6e88d-146">接受许可协议，和 **安装**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-146">Accept the license agreement, and **Install**.</span></span>
3. <span data-ttu-id="6e88d-147">**完成** 安装、 d 重启 **BizTalkServerApplication** 和 **BizTalkServerIsolatedHost** 托管实例。</span><span class="sxs-lookup"><span data-stu-id="6e88d-147">**Finish** the install, an   d restart the **BizTalkServerApplication** and **BizTalkServerIsolatedHost** host instances.</span></span>

<span data-ttu-id="6e88d-148">安装完成后，你具有下列项目︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-148">Once installed, you have the following:</span></span>

- <span data-ttu-id="6e88d-149">LogicApp 适配器添加到 BizTalk 管理。</span><span class="sxs-lookup"><span data-stu-id="6e88d-149">The LogicApp adapter is added to BizTalk Administration.</span></span>
- <span data-ttu-id="6e88d-150">发送处理程序会创建，并使用 BizTalkServerApplication 主机。</span><span class="sxs-lookup"><span data-stu-id="6e88d-150">The send handler is created, and uses the BizTalkServerApplication host.</span></span>
- <span data-ttu-id="6e88d-151">接收处理程序创建为 WCF 服务，并使用 BizTalkServerIsolatedHost 主机。</span><span class="sxs-lookup"><span data-stu-id="6e88d-151">The receive handler is created as a WCF service, and uses the BizTalkServerIsolatedHost host.</span></span>
- <span data-ttu-id="6e88d-152">`C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter`文件夹会创建，并包括两个服务： 管理和 ReceiveService。</span><span class="sxs-lookup"><span data-stu-id="6e88d-152">The `C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter` folder is created, and includes two services: Management and ReceiveService.</span></span> 

    <span data-ttu-id="6e88d-153">**管理**逻辑应用中的 BizTalk 连接器用于连接到 BizTalk Server 使用的数据网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-153">The **Management** is used by the BizTalk Connector in a logic app to connect to BizTalk Server using the data gateway.</span></span> <span data-ttu-id="6e88d-154">此管理服务允许 BizTalk Server 从 Azure 逻辑应用使用数据网关接收消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-154">This management service allows BizTalk Server to receive messages from an Azure logic app using the data gateway.</span></span> <span data-ttu-id="6e88d-155">在 BizTalk 接收端仅使用此服务。</span><span class="sxs-lookup"><span data-stu-id="6e88d-155">This service is only used on the receive-side of BizTalk.</span></span> <span data-ttu-id="6e88d-156">它不使用发送方。</span><span class="sxs-lookup"><span data-stu-id="6e88d-156">It is not used by the send-side.</span></span>

    <span data-ttu-id="6e88d-157">**ReceiveService**逻辑应用中的 BizTalk 连接器时输入接收位置使用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-157">The **ReceiveService** is used by the BizTalk Connector in a logic app when you enter the receive location.</span></span> <span data-ttu-id="6e88d-158">**ReceiveService**负责从逻辑应用程序发送消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-158">The **ReceiveService** is responsible for sending the messages from the logic app.</span></span> <span data-ttu-id="6e88d-159">在 BizTalk 接收端仅使用此服务。</span><span class="sxs-lookup"><span data-stu-id="6e88d-159">This service is only used on the receive-side of BizTalk.</span></span> <span data-ttu-id="6e88d-160">它不使用发送方。</span><span class="sxs-lookup"><span data-stu-id="6e88d-160">It is not used by the send-side.</span></span>


### <a name="step-2-create-the-iis-applications"></a><span data-ttu-id="6e88d-161">步骤 2︰ 创建 IIS 应用程序</span><span class="sxs-lookup"><span data-stu-id="6e88d-161">Step 2: Create the IIS applications</span></span>

<span data-ttu-id="6e88d-162">IIS 应用程序使用的管理和 ReceiveService 服务。</span><span class="sxs-lookup"><span data-stu-id="6e88d-162">The IIS applications use the Management and ReceiveService services.</span></span>

<span data-ttu-id="6e88d-163">你可以运行使用新的应用程序池或现有的应用程序池的 IIS 应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-163">You can run the IIS applications using a new application pool, or an existing application pool.</span></span> <span data-ttu-id="6e88d-164">应用程序池的标识需要运行 BizTalk 服务，例如 BizTalk 应用程序用户和 BizTalk 隔离主机用户组的帐户在同一组的成员身份。</span><span class="sxs-lookup"><span data-stu-id="6e88d-164">The identity of the AppPool requires membership to the same groups as the account that runs the BizTalk services, such as the BizTalk Application Users and BizTalk Isolated Host Users groups.</span></span>  

> [!TIP] 
> <span data-ttu-id="6e88d-165">如果你创建新的应用程序池，然后保留默认的.NET CLR 版本和托管的管道。</span><span class="sxs-lookup"><span data-stu-id="6e88d-165">If you create a new application pool, then keep the default .NET CLR version, and managed pipeline.</span></span> <span data-ttu-id="6e88d-166">请记住，选择具有相同的 BizTalk 组作为你的 BizTalk 服务帐户的成员身份的标识 （高级设置）。</span><span class="sxs-lookup"><span data-stu-id="6e88d-166">Remember, choose an identity (Advanced Settings) that has membership to the same BizTalk groups as your BizTalk service account.</span></span> 

#### <a name="create-the-management-iis-application"></a><span data-ttu-id="6e88d-167">创建管理 IIS 应用程序</span><span class="sxs-lookup"><span data-stu-id="6e88d-167">Create the Management IIS application</span></span>
<span data-ttu-id="6e88d-168">此 IIS 应用程序的 URL 由 BizTalk 连接器 （在逻辑应用程序） 用于使用 BizTalk Server 上的数据网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-168">The URL of this IIS application is used by the BizTalk Connector (in your logic app) to use the data gateway on your BizTalk Server.</span></span>

1. <span data-ttu-id="6e88d-169">打开 Internet Information Services (IIS) 管理器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-169">Open the Internet Information Services (IIS) Manager.</span></span>
2. <span data-ttu-id="6e88d-170">右键单击 **Default Web Site**, ，和 **添加应用程序**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-170">Right-click **Default Web Site**, and **Add Application**.</span></span> <span data-ttu-id="6e88d-171">在此新的应用程序︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-171">In this new application:</span></span> 

    1. <span data-ttu-id="6e88d-172">输入 **别名** （名称） 为应用程序，如 **IISLogicApp**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-172">Enter the **Alias** (name) for your application, such as **IISLogicApp**.</span></span> 
    2. <span data-ttu-id="6e88d-173">**选择** 应用程序池。</span><span class="sxs-lookup"><span data-stu-id="6e88d-173">**Select** the application pool.</span></span>
    3. <span data-ttu-id="6e88d-174">设置**物理路径**到`C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter\Management`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-174">Set the **Physical path** to `C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter\Management`.</span></span> 
    3. <span data-ttu-id="6e88d-175">**测试设置** 以确认应用程序池标识，将传递身份验证和授权测试。</span><span class="sxs-lookup"><span data-stu-id="6e88d-175">**Test Settings** to confirm the application pool identity passes the Authentication and Authorization tests.</span></span>

3. <span data-ttu-id="6e88d-176">选择 **确定** 以保存所做的更改。</span><span class="sxs-lookup"><span data-stu-id="6e88d-176">Select **OK** to save your changes.</span></span>
4. <span data-ttu-id="6e88d-177">打开 web 浏览器，并转到`http://localhost/YourApplicationAlias/schemas?api-version=2016-10-26`，如`http://localhost/IISLogicApp/Schemas?api-version=2016-10-26`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-177">Open a web browser, and go to `http://localhost/YourApplicationAlias/schemas?api-version=2016-10-26`, such as `http://localhost/IISLogicApp/Schemas?api-version=2016-10-26`.</span></span> <span data-ttu-id="6e88d-178">是架构显示的列表，或系统会提示打开/保存 `schemas.json`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-178">Either a list of schemas display, or you are prompted to open/save `schemas.json`.</span></span> <span data-ttu-id="6e88d-179">实际结果取决于你的 web 浏览器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-179">The actual result depends on your web browser.</span></span> <span data-ttu-id="6e88d-180">如果两种情况均发生，则可能缺少应用程序池标识的 BizTalk 组的成员身份。</span><span class="sxs-lookup"><span data-stu-id="6e88d-180">If neither of these happens, then your AppPool identity may be missing membership to the BizTalk groups.</span></span>

#### <a name="create-the-biztalk-receiveservice-iis-application"></a><span data-ttu-id="6e88d-181">创建 BizTalk ReceiveService IIS 应用程序</span><span class="sxs-lookup"><span data-stu-id="6e88d-181">Create the BizTalk ReceiveService IIS application</span></span>
<span data-ttu-id="6e88d-182">此 IIS 应用程序的 URL 由 （中你逻辑的应用） 的 BizTalk 连接器时，你选择接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-182">The URL of this IIS application is used by the BizTalk Connector (in your logic app) when you choose the receive location.</span></span> 

1. <span data-ttu-id="6e88d-183">打开 Internet Information Services (IIS) 管理器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-183">Open the Internet Information Services (IIS) Manager.</span></span>
2. <span data-ttu-id="6e88d-184">右键单击 **Default Web Site**, ，和 **添加应用程序**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-184">Right-click **Default Web Site**, and **Add Application**.</span></span> <span data-ttu-id="6e88d-185">在此新的应用程序︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-185">In this new application:</span></span> 

    1. <span data-ttu-id="6e88d-186">输入 **别名** （名称） 为应用程序，如 **ReceiveWCFService**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-186">Enter the **Alias** (name) for your application, such as **ReceiveWCFService**.</span></span> 
    2. <span data-ttu-id="6e88d-187">**选择** 与以前的 IIS 应用程序相同的应用程序池。</span><span class="sxs-lookup"><span data-stu-id="6e88d-187">**Select** the same application pool as the previous IIS application.</span></span>
    3. <span data-ttu-id="6e88d-188">设置**物理路径**到`C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter\ReceiveService`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-188">Set the **Physical path** to `C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter\ReceiveService`.</span></span> 
    3. <span data-ttu-id="6e88d-189">**测试设置** 以确认应用程序池标识，将传递身份验证和授权测试。</span><span class="sxs-lookup"><span data-stu-id="6e88d-189">**Test Settings** to confirm the application pool identity passes the Authentication and Authorization tests.</span></span>

3. <span data-ttu-id="6e88d-190">选择 **确定** 以保存所做的更改。</span><span class="sxs-lookup"><span data-stu-id="6e88d-190">Select **OK** to save your changes.</span></span>


### <a name="step-3-create-a-logic-app"></a><span data-ttu-id="6e88d-191">步骤 3︰ 创建逻辑应用</span><span class="sxs-lookup"><span data-stu-id="6e88d-191">Step 3: Create a logic app</span></span>

1. <span data-ttu-id="6e88d-192">在 [Azure 门户](https://portal.azure.com), ，创建新的逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-192">In the [Azure portal](https://portal.azure.com), create a new logic app.</span></span>
2. <span data-ttu-id="6e88d-193">添加 **收到时 HTTP 请求** 触发器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-193">Add the **When an HTTP request is received** trigger.</span></span>
3. <span data-ttu-id="6e88d-194">添加 **BizTalk Server-准备从 JSON 消息** 操作。</span><span class="sxs-lookup"><span data-stu-id="6e88d-194">Add the **BizTalk Server - Prepare message from JSON** action.</span></span> 
4. <span data-ttu-id="6e88d-195">**可选**︰ 选择 **通过本地数据网关的连接**, ，并输入以下︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-195">**Optional**: Select **Connect via on-premise data gateway**, and enter the following:</span></span> 

    | <span data-ttu-id="6e88d-196">属性</span><span class="sxs-lookup"><span data-stu-id="6e88d-196">Property</span></span> | <span data-ttu-id="6e88d-197">Description</span><span class="sxs-lookup"><span data-stu-id="6e88d-197">Description</span></span> |
   | --- | --- |
    | <span data-ttu-id="6e88d-198">BizTalk 服务器 URL</span><span class="sxs-lookup"><span data-stu-id="6e88d-198">BizTalk Server URL</span></span> | <span data-ttu-id="6e88d-199">输入 BizTalk 中的管理 IIS 应用程序 URL 的完全限定的域名 (FQDN)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-199">Enter the fully qualified domain name (FQDN) of the BizTalk Management in IIS application URL.</span></span> <span data-ttu-id="6e88d-200">例如，输入`http://BizTalkServerName.corp.contoso.com/IISLogicApp/`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-200">For example, enter `http://BizTalkServerName.corp.contoso.com/IISLogicApp/`.</span></span> |
    | <span data-ttu-id="6e88d-201">身份验证类型</span><span class="sxs-lookup"><span data-stu-id="6e88d-201">Authentication Type</span></span> | <span data-ttu-id="6e88d-202">选择 **Windows**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-202">Select **Windows**.</span></span> |
   | <span data-ttu-id="6e88d-203">用户名</span><span class="sxs-lookup"><span data-stu-id="6e88d-203">Username</span></span> | <span data-ttu-id="6e88d-204">输入 IIS 应用程序池标识。</span><span class="sxs-lookup"><span data-stu-id="6e88d-204">Enter the identity of the IIS application pool.</span></span> |
   | <span data-ttu-id="6e88d-205">密码</span><span class="sxs-lookup"><span data-stu-id="6e88d-205">Password</span></span> | <span data-ttu-id="6e88d-206">输入 IIS 应用程序池的密码。</span><span class="sxs-lookup"><span data-stu-id="6e88d-206">Enter the password of the IIS application pool.</span></span> |
   | <span data-ttu-id="6e88d-207">网关</span><span class="sxs-lookup"><span data-stu-id="6e88d-207">Gateway</span></span> | <span data-ttu-id="6e88d-208">选择你创建的网关。</span><span class="sxs-lookup"><span data-stu-id="6e88d-208">Select the gateway you created.</span></span> |

    > [!TIP] 
    > <span data-ttu-id="6e88d-209">请记住，数据网关是仅需的如果︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-209">Remember, the data gateway is only required if:</span></span>
    > - <span data-ttu-id="6e88d-210">你使用本地 BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="6e88d-210">You're using an on-premises BizTalk Server</span></span>
    > - <span data-ttu-id="6e88d-211">你正在使用 BizTalk Server Azure 虚拟机 *和* VM 不公开为 HTTP 终结点 (没有 URL)</span><span class="sxs-lookup"><span data-stu-id="6e88d-211">You're using a BizTalk Server Azure virtual machine *and* the VM is NOT exposed as an HTTP endpoint (no URL)</span></span>

5. <span data-ttu-id="6e88d-212">选择“创建”。</span><span class="sxs-lookup"><span data-stu-id="6e88d-212">Select **Create**.</span></span> 
6. <span data-ttu-id="6e88d-213">配置操作。</span><span class="sxs-lookup"><span data-stu-id="6e88d-213">Configure the action.</span></span> <span data-ttu-id="6e88d-214">有关 **正文**, ，选择 HTTP 正文输出。</span><span class="sxs-lookup"><span data-stu-id="6e88d-214">For **Body**, select the HTTP body output.</span></span> <span data-ttu-id="6e88d-215">有关 **架构**, ，选择你想要使用的架构。</span><span class="sxs-lookup"><span data-stu-id="6e88d-215">For **Schema**, select the schema you want to use.</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="6e88d-216">此步骤假定你熟悉 BizTalk 中的架构，并知道所需的架构。</span><span class="sxs-lookup"><span data-stu-id="6e88d-216">This step assumes you are familiar with schemas in BizTalk, and know which schema you want.</span></span> <span data-ttu-id="6e88d-217">如果你不确定，然后部署 HelloWorld SDK 示例，更新其项目以使用逻辑应用适配器，并使用其架构和示例的消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-217">If you're not sure, then deploy the HelloWorld SDK sample, update its artifacts to use the Logic App adapter, and use its schema and sample message.</span></span> 

7. <span data-ttu-id="6e88d-218">添加一个新的步骤，并选择 **BizTalk Server-发送的消息** 操作。</span><span class="sxs-lookup"><span data-stu-id="6e88d-218">Add a new step, and select the **BizTalk Server - Send message** action.</span></span> <span data-ttu-id="6e88d-219">有关**接收位置**，从下拉列表中，选择的 URL 或输入 ReceiveService IIS 应用程序 URL 的完全限定的域名 (FQDN)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-219">For  **Receive Location**, select the URL from the drop-down list, or enter the fully qualified domain name (FQDN) of the ReceiveService IIS application URL.</span></span> <span data-ttu-id="6e88d-220">例如，输入`http://BizTalkServerName.corp.contoso.com/ReceiveWCFService/Service1.svc`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-220">For example, enter `http://BizTalkServerName.corp.contoso.com/ReceiveWCFService/Service1.svc`.</span></span>

    > [!TIP] 
    > <span data-ttu-id="6e88d-221">当创建接收位置时，在此确切的 URL，还将在作为接收位置传输属性中输入 **公共地址** （常规选项卡）。</span><span class="sxs-lookup"><span data-stu-id="6e88d-221">When you create the receive location, this exact URL will also be entered in the receive location transport properties as the **Public Address** (General tab).</span></span>

    <span data-ttu-id="6e88d-222">有关 **正文**, ，从之前的 BizTalk Server 操作选择正文输出。</span><span class="sxs-lookup"><span data-stu-id="6e88d-222">For **Body**, select the body output from the previous BizTalk Server action.</span></span> 

8. <span data-ttu-id="6e88d-223">**保存** 所做的更改。</span><span class="sxs-lookup"><span data-stu-id="6e88d-223">**Save** your changes.</span></span> 

<span data-ttu-id="6e88d-224">保存时，HTTP 请求触发器将自动创建一个 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-224">When you save, the HTTP Request trigger automatically creates a URL.</span></span> <span data-ttu-id="6e88d-225">复制此 URL;你需要在 **步骤 5︰ 将消息发送**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-225">Copy this URL; you need it in **Step 5: Send a message**.</span></span>

### <a name="step-4-create-a-receive-port-and-a-receive-location"></a><span data-ttu-id="6e88d-226">步骤 4︰ 创建一个接收端口和接收位置</span><span class="sxs-lookup"><span data-stu-id="6e88d-226">Step 4: Create a receive port and a receive location</span></span>

> [!NOTE] 
> <span data-ttu-id="6e88d-227">而不是创建您自己接收端口和接收位置，你可以将部署 HelloWorld SDK 示例。</span><span class="sxs-lookup"><span data-stu-id="6e88d-227">Instead of creating your own receive ports and receive location, you can deploy the HelloWorld SDK sample.</span></span> <span data-ttu-id="6e88d-228">更新项目以使用 Logic Apps 适配器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-228">Update the artifacts to use the Logic Apps adapter.</span></span> 
 
<span data-ttu-id="6e88d-229">本部分列出的步骤来创建你自己的项目。</span><span class="sxs-lookup"><span data-stu-id="6e88d-229">This section lists the steps to create your own artifacts.</span></span> 

1. <span data-ttu-id="6e88d-230">在 BizTalk Server 管理中，展开 **BizTalk Server 管理**, ，展开 **BizTalk 组**, ，展开 **应用程序**, ，然后展开你要运行接收位置的应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-230">In BizTalk Server Administration, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to run the receive location.</span></span> <span data-ttu-id="6e88d-231">例如，展开 **BizTalk 应用程序 1**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-231">For example, expand **BizTalk Application 1**.</span></span>
2. <span data-ttu-id="6e88d-232">右-选择 **接收端口**, ，选择 **新建**, ，然后选择 **单向接收端口**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-232">Right-select **Receive Ports**, select **New**, and select **One-way Receive Port**.</span></span>
3. <span data-ttu-id="6e88d-233">在接收端口属性中，输入以下信息︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-233">In the Receive Port properties, enter the following:</span></span>  

    | <span data-ttu-id="6e88d-234">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-234">Use this</span></span> | <span data-ttu-id="6e88d-235">動作</span><span class="sxs-lookup"><span data-stu-id="6e88d-235">To do this</span></span> |
    | --- | --- |
    | <span data-ttu-id="6e88d-236">**名称**</span><span class="sxs-lookup"><span data-stu-id="6e88d-236">**Name**</span></span> | <span data-ttu-id="6e88d-237">输入接收端口的名称。</span><span class="sxs-lookup"><span data-stu-id="6e88d-237">Enter a name for the receive port.</span></span> <span data-ttu-id="6e88d-238">例如，输入 **LAReceivePort**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-238">For example, enter **LAReceivePort**.</span></span> |
    | <span data-ttu-id="6e88d-239">**身份验证**</span><span class="sxs-lookup"><span data-stu-id="6e88d-239">**Authentication**</span></span> | <span data-ttu-id="6e88d-240">选项：</span><span class="sxs-lookup"><span data-stu-id="6e88d-240">Options:</span></span> <br/><ul><li><span data-ttu-id="6e88d-241">无身份验证︰ 默认值。</span><span class="sxs-lookup"><span data-stu-id="6e88d-241">No Authentication: Default.</span></span> <span data-ttu-id="6e88d-242">禁用身份验证。</span><span class="sxs-lookup"><span data-stu-id="6e88d-242">Disables authentication.</span></span></li><li><span data-ttu-id="6e88d-243">丢弃的消息，如果身份验证失败︰ 启用身份验证，但若要删除未经身份验证的消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-243">Drop messages if authentication fails: Enables authentication but to drop unauthenticated messages.</span></span></li><li><span data-ttu-id="6e88d-244">保留消息，如果身份验证失败︰ 单击此选项以启用身份验证并保留未经身份验证的消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-244">Keep messages if authentication fails: Click this option to enable authentication and keep unauthenticated messages.</span></span> </li></ul>|
    | <span data-ttu-id="6e88d-245">**启用路由失败消息**</span><span class="sxs-lookup"><span data-stu-id="6e88d-245">**Enable routing for failed messages**</span></span> | <span data-ttu-id="6e88d-246">将路由失败对订阅应用程序处理的任何消息 （例如另一个接收端口或业务流程计划）。</span><span class="sxs-lookup"><span data-stu-id="6e88d-246">Routes any message that fails processing to a subscribing application (such as another receive port or orchestration schedule).</span></span> <span data-ttu-id="6e88d-247">取消选中此选项可挂起失败的消息并生成否定确认 (NACK)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-247">Uncheck this option to suspend failed messages and generate a negative acknowledgment (NACK).</span></span> <span data-ttu-id="6e88d-248">默认值为清除此复选框。</span><span class="sxs-lookup"><span data-stu-id="6e88d-248">The default value is cleared.</span></span> <span data-ttu-id="6e88d-249">有关详细信息，请参阅[如何启用路由失败消息为接收端口](../core/how-to-enable-routing-for-failed-messages-for-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-249">For more information, see [How to Enable Routing for Failed Messages for a Receive Port](../core/how-to-enable-routing-for-failed-messages-for-a-receive-port.md).</span></span>|

4. <span data-ttu-id="6e88d-250">选择 **接收位置**, ，然后选择 **新建**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-250">Select **Receive Locations**, and select **New**.</span></span> 
5. <span data-ttu-id="6e88d-251">输入 **名称** 接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-251">Enter a **Name** for the receive location.</span></span> <span data-ttu-id="6e88d-252">例如，输入 **LAReceiveLoc**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-252">For example, enter **LAReceiveLoc**.</span></span>
6. <span data-ttu-id="6e88d-253">有关 **类型**, ，选择 **LogicApp** 从该列表中，并选择 **配置按钮**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-253">For the **Type**, select **LogicApp** from the list, and select the **Configure button**.</span></span> 
7. <span data-ttu-id="6e88d-254">在 **常规** 选项卡上配置逻辑应用的终结点地址︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-254">In the **General** tab, configure the endpoint address for your logic app:</span></span>

    | <span data-ttu-id="6e88d-255">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-255">Use this</span></span> | <span data-ttu-id="6e88d-256">動作</span><span class="sxs-lookup"><span data-stu-id="6e88d-256">To do this</span></span> |
    | --- | --- |
    | <span data-ttu-id="6e88d-257">**地址 (URI)**</span><span class="sxs-lookup"><span data-stu-id="6e88d-257">**Address (URI)**</span></span> | <span data-ttu-id="6e88d-258">必需的。</span><span class="sxs-lookup"><span data-stu-id="6e88d-258">Required.</span></span> <span data-ttu-id="6e88d-259">输入 BizTalk ReceiveService IIS 应用程序 URL (`/YourIISApp2Name/Service1.svc`)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-259">Enter the BizTalk ReceiveService IIS application URL (`/YourIISApp2Name/Service1.svc`).</span></span> <span data-ttu-id="6e88d-260">例如，输入`/ReceiveWCFService/Service1.svc`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-260">For example, enter `/ReceiveWCFService/Service1.svc`.</span></span> |
    | <span data-ttu-id="6e88d-261">**公共地址**</span><span class="sxs-lookup"><span data-stu-id="6e88d-261">**Public Address**</span></span> | <span data-ttu-id="6e88d-262">必需的。</span><span class="sxs-lookup"><span data-stu-id="6e88d-262">Required.</span></span> <span data-ttu-id="6e88d-263">输入 `http://<your fully qualified machine name>/YourIISApp2Name/Service1.svc`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-263">Enter `http://<your fully qualified machine name>/YourIISApp2Name/Service1.svc`.</span></span> <span data-ttu-id="6e88d-264">例如，输入 `http://btsProd.northamerica.corp.contoso.com/ReceiveWCFService/Service1.svc`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-264">For example, enter `http://btsProd.northamerica.corp.contoso.com/ReceiveWCFService/Service1.svc`.</span></span> <br/><br/><span data-ttu-id="6e88d-265">接收位置你逻辑的应用程序中还列出了此确切的 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-265">This exact URL is also listed in your logic app in the receive location.</span></span>|

8. <span data-ttu-id="6e88d-266">**可选**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-266">**Optional**.</span></span> <span data-ttu-id="6e88d-267">在 **绑定** 选项卡上，配置任何超时和编码相关的基础的 WCF WebHttp 绑定的属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-267">In the **Binding** tab, configure any timeout and encoding-related properties of the underlying WCF-WebHttp binding.</span></span> <span data-ttu-id="6e88d-268">处理大消息时，这些属性是很有帮助。</span><span class="sxs-lookup"><span data-stu-id="6e88d-268">These properties are helpful when dealing with large messages.</span></span>

    | <span data-ttu-id="6e88d-269">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-269">Use this</span></span> | <span data-ttu-id="6e88d-270">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6e88d-270">To do this</span></span> |
    | --- | --- |
    | <span data-ttu-id="6e88d-271">打开超时</span><span class="sxs-lookup"><span data-stu-id="6e88d-271">Open timeout</span></span> | <span data-ttu-id="6e88d-272">输入它时应采取通道打开操作完成的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-272">Enter the time interval it should take for the channel open operation to complete.</span></span> <span data-ttu-id="6e88d-273">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-273">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <br/><br/><span data-ttu-id="6e88d-274">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-274">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-275">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-275">Maximum value: 23:59:59</span></span> |
    | <span data-ttu-id="6e88d-276">发送超时时</span><span class="sxs-lookup"><span data-stu-id="6e88d-276">Send timeout</span></span> |<span data-ttu-id="6e88d-277">输入为完成发送操作也会花费的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-277">Enter the time interval it should take for the send operation to complete.</span></span> <span data-ttu-id="6e88d-278">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-278">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <span data-ttu-id="6e88d-279">如果你使用请求-响应接收端口，此值指定的时间范围进行整个交互，从而完成，即使客户端返回一个大的消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-279">If you use a request-response receive port, this value specifies a time span for the entire interaction to complete, even if the client returns a large message.</span></span> <br/><br/><span data-ttu-id="6e88d-280">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-280">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-281">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-281">Maximum value: 23:59:59</span></span>|
    | <span data-ttu-id="6e88d-282">关闭超时</span><span class="sxs-lookup"><span data-stu-id="6e88d-282">Close timeout</span></span> | <span data-ttu-id="6e88d-283">输入它时应采取通道关闭操作完成的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-283">Enter the time interval it should take for the channel close operation to complete.</span></span> <span data-ttu-id="6e88d-284">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-284">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <br/><br/><span data-ttu-id="6e88d-285">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-285">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-286">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-286">Maximum value: 23:59:59</span></span> |
    | <span data-ttu-id="6e88d-287">已接收消息的最大字节数</span><span class="sxs-lookup"><span data-stu-id="6e88d-287">Maximum received message size (bytes)</span></span> | <span data-ttu-id="6e88d-288">以字节为单位，包括消息头的消息，以在网络上接收输入的最大大小。</span><span class="sxs-lookup"><span data-stu-id="6e88d-288">Enter the maximum size, in bytes, for a message including headers, to be received on the wire.</span></span> <span data-ttu-id="6e88d-289">消息的大小受为每个消息分配的内存量。</span><span class="sxs-lookup"><span data-stu-id="6e88d-289">The size of the messages is bound by the amount of memory allocated for each message.</span></span> <span data-ttu-id="6e88d-290">你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-290">You can use this property to limit exposure to denial of service (DoS) attacks.</span></span> <br/><br/><span data-ttu-id="6e88d-291">預設值：65536</span><span class="sxs-lookup"><span data-stu-id="6e88d-291">Default value: 65536</span></span><br/><span data-ttu-id="6e88d-292">最大值：2147483647</span><span class="sxs-lookup"><span data-stu-id="6e88d-292">Maximum value: 2147483647</span></span>|
    | <span data-ttu-id="6e88d-293">最大并行调用数</span><span class="sxs-lookup"><span data-stu-id="6e88d-293">Maximum concurrent calls</span></span> | <span data-ttu-id="6e88d-294">输入到单个服务实例的并发调用数。</span><span class="sxs-lookup"><span data-stu-id="6e88d-294">Enter the number of concurrent calls to a single service instance.</span></span> <span data-ttu-id="6e88d-295">超出此限制的调用将在队列中排队。</span><span class="sxs-lookup"><span data-stu-id="6e88d-295">Calls in excess of the limit are queued.</span></span> <span data-ttu-id="6e88d-296">将此值设置为 0 与将其设置为 Int32.MaxValue 等效。</span><span class="sxs-lookup"><span data-stu-id="6e88d-296">Setting this value to 0 is equivalent to setting it to Int32.MaxValue.</span></span> <br/><br/><span data-ttu-id="6e88d-297">默认值为 200。</span><span class="sxs-lookup"><span data-stu-id="6e88d-297">The default is 200.</span></span>|

9. <span data-ttu-id="6e88d-298">**可选**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-298">**Optional**.</span></span> <span data-ttu-id="6e88d-299">在 **安全** 选项卡上配置的任何安全属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-299">In the **Security** tab, configure any security properties.</span></span> <span data-ttu-id="6e88d-300">对于开发目的，你可以选择一个︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-300">For development purposes, you can choose None:</span></span>

    | <span data-ttu-id="6e88d-301">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-301">Use this</span></span> | <span data-ttu-id="6e88d-302">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6e88d-302">To do this</span></span> |
    | --- | --- |
    | <span data-ttu-id="6e88d-303">安全模式</span><span class="sxs-lookup"><span data-stu-id="6e88d-303">Security mode</span></span> | <span data-ttu-id="6e88d-304">选项：</span><span class="sxs-lookup"><span data-stu-id="6e88d-304">Options:</span></span>  <br/><br/><ul><li><span data-ttu-id="6e88d-305">None︰ 不保护消息在传输过程。</span><span class="sxs-lookup"><span data-stu-id="6e88d-305">None: Messages are not secured during transfer.</span></span></li><li><span data-ttu-id="6e88d-306">传输︰ 使用 HTTPS 传输提供安全性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-306">Transport: Security is provided using the HTTPS transport.</span></span> <span data-ttu-id="6e88d-307">使用 HTTPS 对 SOAP 消息进行保护。</span><span class="sxs-lookup"><span data-stu-id="6e88d-307">The SOAP messages are secured using HTTPS.</span></span> <span data-ttu-id="6e88d-308">若要使用此模式下，你必须设置了安全套接字层 (SSL) 在 Internet 信息服务 (IIS)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-308">To use this mode, you must set up Secure Sockets Layer (SSL) in Internet Information Services (IIS).</span></span> </li><li><span data-ttu-id="6e88d-309">TransportCredentialOnly︰ 默认值。</span><span class="sxs-lookup"><span data-stu-id="6e88d-309">TransportCredentialOnly: Default.</span></span> </li></ul> |
    | <span data-ttu-id="6e88d-310">传输客户端凭据类型</span><span class="sxs-lookup"><span data-stu-id="6e88d-310">Transport client credential types</span></span> | <span data-ttu-id="6e88d-311">使用客户端身份验证时，请选择凭据类型。</span><span class="sxs-lookup"><span data-stu-id="6e88d-311">Choose the credential type when using client authentication.</span></span> <span data-ttu-id="6e88d-312">选项：</span><span class="sxs-lookup"><span data-stu-id="6e88d-312">Options:</span></span>  <br/><br/><ul><li><span data-ttu-id="6e88d-313">None︰ 无身份验证发生在传输级别。</span><span class="sxs-lookup"><span data-stu-id="6e88d-313">None: No authentication occurs at the transport level.</span></span></li><li><span data-ttu-id="6e88d-314">Basic︰ 使用基本身份验证来通过网络以纯文本格式发送用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="6e88d-314">Basic: Uses Basic authentication to send user names and passwords in plain text over the network.</span></span> <span data-ttu-id="6e88d-315">你必须创建与凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="6e88d-315">You must create the domain or local user accounts corresponding to the credentials.</span></span></li><li><span data-ttu-id="6e88d-316">Digest︰ 使用摘要式身份验证，以通过网络哈希值的形式发送密码。</span><span class="sxs-lookup"><span data-stu-id="6e88d-316">Digest: Uses Digest authentication to send passwords as a hash value over the network.</span></span> <span data-ttu-id="6e88d-317">仅适用于具有运行 Windows Server 操作系统身份验证的域控制器的域。</span><span class="sxs-lookup"><span data-stu-id="6e88d-317">Only available on domains with domain controllers running Windows Server operating systems authentication.</span></span> <span data-ttu-id="6e88d-318">你必须创建与客户端凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="6e88d-318">You must create the domain or local user accounts corresponding to client credentials.</span></span></li><li><span data-ttu-id="6e88d-319">Ntlm︰ 默认值。</span><span class="sxs-lookup"><span data-stu-id="6e88d-319">Ntlm: Default.</span></span> <span data-ttu-id="6e88d-320">客户端发送的凭据不发送到此密码的情况下接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-320">Clients sends the credentials without sending a password to this receive location.</span></span> <span data-ttu-id="6e88d-321">你必须创建与客户端凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="6e88d-321">You must create the domain or local user accounts corresponding to client credentials.</span></span></li><li><span data-ttu-id="6e88d-322">Windows: Windows 集成身份验证协商 Kerberos 或 NTLM，如果存在域，则使用 Kerberos。</span><span class="sxs-lookup"><span data-stu-id="6e88d-322">Windows: Windows integrated authentication negotiates Kerberos or NTLM, preferring Kerberos if a domain is present.</span></span> <span data-ttu-id="6e88d-323">若要使用 Kerberos，务必使客户端使用服务主体名称 (SPN) 标识的服务。</span><span class="sxs-lookup"><span data-stu-id="6e88d-323">To use Kerberos, it is important to have the client identify the service with a service principal name (SPN).</span></span> <span data-ttu-id="6e88d-324">你必须创建与客户端凭据对应的域或本地用户帐户。</span><span class="sxs-lookup"><span data-stu-id="6e88d-324">You must create the domain or local user accounts corresponding to client credentials.</span></span></li><li><span data-ttu-id="6e88d-325">证书︰ 使用客户端证书。</span><span class="sxs-lookup"><span data-stu-id="6e88d-325">Certificate: Uses a client certificate.</span></span> <span data-ttu-id="6e88d-326">CA 证书链，以便客户端可以对此进行身份验证必须在此计算机的受信任根证书颁发机构证书存储中安装客户端 X.509 证书对接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-326">The CA certificate chain for the client X.509 certificates must be installed in the Trusted Root Certification Authorities certificate store of this computer so that the clients can authenticate to this receive location.</span></span></li><li><span data-ttu-id="6e88d-327">InheritedFromHost</span><span class="sxs-lookup"><span data-stu-id="6e88d-327">InheritedFromHost</span></span></li></ul> |
    | <span data-ttu-id="6e88d-328">使用单一登录</span><span class="sxs-lookup"><span data-stu-id="6e88d-328">Use Single Sign-On</span></span> | |


10. <span data-ttu-id="6e88d-329">**可选**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-329">**Optional**.</span></span> <span data-ttu-id="6e88d-330">在 **消息** 选项卡上，使用 **出站 HTTP 标头** 属性添加任何自定义标头，并使用其他属性来帮助进行故障︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-330">In the **Messages** tab, use the **Outbound HTTP Headers** property to add any custom headers, and use the additional properties to help with faults:</span></span> 

    | <span data-ttu-id="6e88d-331">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-331">Use this</span></span> | <span data-ttu-id="6e88d-332">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6e88d-332">To do this</span></span> |
    | --- | --- |
    |<span data-ttu-id="6e88d-333">出站 HTTP 标头</span><span class="sxs-lookup"><span data-stu-id="6e88d-333">Outbound HTTP Headers</span></span> | <span data-ttu-id="6e88d-334">输入所需标记在响应消息上任何 HTTP 标头。</span><span class="sxs-lookup"><span data-stu-id="6e88d-334">Enter any HTTP headers that you want stamped on the response message.</span></span> | 
    | <span data-ttu-id="6e88d-335">失败时禁用位置</span><span class="sxs-lookup"><span data-stu-id="6e88d-335">Disable location on failure</span></span> | <span data-ttu-id="6e88d-336">如果由于接收管道故障，还是路由故障而失败的入站的处理，请禁用接收位置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-336">Disables the receive location if inbound processing fails due to a receive pipeline failure or a routing failure.</span></span> <span data-ttu-id="6e88d-337">默认值为未选中状态。</span><span class="sxs-lookup"><span data-stu-id="6e88d-337">Default is unchecked.</span></span>|
    | <span data-ttu-id="6e88d-338">失败时挂起请求消息</span><span class="sxs-lookup"><span data-stu-id="6e88d-338">Suspend request message on failure</span></span> | <span data-ttu-id="6e88d-339">如果由于接收管道故障，还是路由故障而失败的入站的处理，将挂起的请求消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-339">Suspends the request message if inbound processing fails due to a receive pipeline failure or a routing failure.</span></span> <span data-ttu-id="6e88d-340">默认值为未选中状态。</span><span class="sxs-lookup"><span data-stu-id="6e88d-340">Default is unchecked.</span></span>|
    | <span data-ttu-id="6e88d-341">在错误中包括异常详细信息</span><span class="sxs-lookup"><span data-stu-id="6e88d-341">Include exception detail in faults</span></span> | <span data-ttu-id="6e88d-342">发生错误时，返回以帮助调试任何 SOAP 错误。</span><span class="sxs-lookup"><span data-stu-id="6e88d-342">When an error occurs, returns any SOAP faults to help debugging.</span></span> <span data-ttu-id="6e88d-343">默认值为未选中状态。</span><span class="sxs-lookup"><span data-stu-id="6e88d-343">Default is unchecked.</span></span>|

<span data-ttu-id="6e88d-344">[管理接收位置](../core/managing-receive-locations.md)介绍其他属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-344">[Managing Receive Locations](../core/managing-receive-locations.md) describes the additional properties.</span></span> 

### <a name="step-5-send-a-message"></a><span data-ttu-id="6e88d-345">步骤 5︰ 将发送一条消息</span><span class="sxs-lookup"><span data-stu-id="6e88d-345">Step 5: Send a message</span></span>

1. <span data-ttu-id="6e88d-346">打开 Fiddler 或 Postman （或为你希望的任何内容）。</span><span class="sxs-lookup"><span data-stu-id="6e88d-346">Open Fiddler or Postman (or whatever you prefer).</span></span>
2. <span data-ttu-id="6e88d-347">粘贴请求触发器从逻辑应用程序的 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-347">Paste the URL of the Request trigger from your logic app.</span></span> <span data-ttu-id="6e88d-348">你在步骤 3 中复制此 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-348">You copied this URL in Step 3.</span></span> 
3. <span data-ttu-id="6e88d-349">选择 **POST** 作为 HTTP 谓词，并将设置 **content-type** 标头到 `application/json`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-349">Select **POST** as the HTTP verb, and set the **Content-type** header to `application/json`.</span></span> <span data-ttu-id="6e88d-350">在正文中，粘贴以下 JSON:</span><span class="sxs-lookup"><span data-stu-id="6e88d-350">In the body, paste the following JSON:</span></span>  

    ```json
    {“hello”:”world”}
    ```

4. <span data-ttu-id="6e88d-351">由于这是单向调用 BizTalk，结果应为 HTTP 202。</span><span class="sxs-lookup"><span data-stu-id="6e88d-351">Because this is a one-way call to BizTalk, the result should be an HTTP 202.</span></span> <span data-ttu-id="6e88d-352">如果你使用 HelloWorld SDK 示例，请转到 BizTalk server。</span><span class="sxs-lookup"><span data-stu-id="6e88d-352">If you're using the HelloWorld SDK sample, go to your BizTalk server.</span></span> <span data-ttu-id="6e88d-353">在你发送文件夹中可能是一个文件。</span><span class="sxs-lookup"><span data-stu-id="6e88d-353">There may be a file in your send folder.</span></span> 


## <a name="send-messages-to-a-logic-app"></a><span data-ttu-id="6e88d-354">将消息发送到逻辑应用</span><span class="sxs-lookup"><span data-stu-id="6e88d-354">Send messages to a logic app</span></span>

### <a name="step-1-install-the-logic-apps-adapter"></a><span data-ttu-id="6e88d-355">步骤 1︰ 安装 Logic Apps 适配器</span><span class="sxs-lookup"><span data-stu-id="6e88d-355">Step 1: Install the Logic Apps adapter</span></span>

<span data-ttu-id="6e88d-356">Logic Apps 适配器是一个单独的下载，而且不包含与 BizTalk Server 安装。</span><span class="sxs-lookup"><span data-stu-id="6e88d-356">The Logic Apps adapter is a separate download, and is not included with the BizTalk Server installation.</span></span>

1. <span data-ttu-id="6e88d-357">转到 [对于 Logic Apps 的 Microsoft BizTalk Server 适配器](https://www.microsoft.com/download/details.aspx?id=54287), ，并保存。</span><span class="sxs-lookup"><span data-stu-id="6e88d-357">Go to [Microsoft BizTalk Server Adapter for Logic Apps](https://www.microsoft.com/download/details.aspx?id=54287), and save.</span></span> 
2. <span data-ttu-id="6e88d-358">打开 LogicAppAdapter.iso，并运行 **LogicApp Adapter.msi** 文件来安装。</span><span class="sxs-lookup"><span data-stu-id="6e88d-358">Open the LogicAppAdapter.iso, and run the **LogicApp Adapter.msi** file to install.</span></span>
3. <span data-ttu-id="6e88d-359">**完成** 安装和重新启动 **BizTalkServerApplication** 和 **BizTalkServerIsolatedHost** 托管实例。</span><span class="sxs-lookup"><span data-stu-id="6e88d-359">**Finish** the install, and restart the **BizTalkServerApplication** and **BizTalkServerIsolatedHost** host instances.</span></span>

<span data-ttu-id="6e88d-360">安装完成后，你具有下列项目︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-360">Once installed, you have the following:</span></span>

- <span data-ttu-id="6e88d-361">LogicApp 适配器添加到 BizTalk 管理</span><span class="sxs-lookup"><span data-stu-id="6e88d-361">The LogicApp adapter is added to BizTalk Administration</span></span>
- <span data-ttu-id="6e88d-362">发送处理程序会创建，并使用 BizTalkServerApplication 主机。</span><span class="sxs-lookup"><span data-stu-id="6e88d-362">The send handler is created, and uses the BizTalkServerApplication host.</span></span>
- <span data-ttu-id="6e88d-363">接收处理程序创建为 WCF 服务，并使用 BizTalkServerIsolatedHost 主机。</span><span class="sxs-lookup"><span data-stu-id="6e88d-363">The receive handler is created as a WCF service, and uses the BizTalkServerIsolatedHost host.</span></span>
- <span data-ttu-id="6e88d-364">`C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter`文件夹会创建，并包括两个服务： 管理和 ReceiveService。</span><span class="sxs-lookup"><span data-stu-id="6e88d-364">The `C:\Program Files (x86)\Microsoft BizTalk Server 2016\LogicApp Adapter` folder is created, and includes two services: Management and ReceiveService.</span></span> <span data-ttu-id="6e88d-365">这些服务不用于将消息发送到逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-365">These services are not used to send messages to a logic app.</span></span> 


### <a name="step-2-create-a-logic-app"></a><span data-ttu-id="6e88d-366">步骤 2︰ 创建逻辑应用</span><span class="sxs-lookup"><span data-stu-id="6e88d-366">Step 2: Create a logic app</span></span>

1. <span data-ttu-id="6e88d-367">在 [Azure 门户](https://portal.azure.com), ，创建新的逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-367">In the [Azure portal](https://portal.azure.com), create a new logic app.</span></span>
2. <span data-ttu-id="6e88d-368">添加 **收到时 HTTP 请求** 触发器</span><span class="sxs-lookup"><span data-stu-id="6e88d-368">Add the **When an HTTP request is received** trigger</span></span>
3. <span data-ttu-id="6e88d-369">添加 **Office 365 Outlook 的电子邮件发送** 操作。</span><span class="sxs-lookup"><span data-stu-id="6e88d-369">Add the **Office 365 Outlook - Send an email** action.</span></span> <span data-ttu-id="6e88d-370">有关 **到** 地址，输入你的 Office 365 地址。</span><span class="sxs-lookup"><span data-stu-id="6e88d-370">For the **To** address, enter your Office 365 address.</span></span> <span data-ttu-id="6e88d-371">有关 **主题**, ，输入 `Sending from BizTalk`。</span><span class="sxs-lookup"><span data-stu-id="6e88d-371">For the **Subject**, enter `Sending from BizTalk`.</span></span> <span data-ttu-id="6e88d-372">有关 **正文**, ，选择 *正文* 输出从 **收到时 HTTP 请求** 触发器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-372">For **Body**, choose the *Body* output from the **When an HTTP request is received** trigger.</span></span> 
4. <span data-ttu-id="6e88d-373">逻辑应用的显示效果类似于︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-373">Your logic app looks similar to:</span></span> 

    ![LogicAppExample](../core/media/logicappexample.gif)

5. <span data-ttu-id="6e88d-375">复制时保存逻辑应用程序; 自动创建的 HTTP POST URL你需要在下一步此 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-375">Copy the HTTP POST URL that is automatically created when you save the logic app; you need this URL in the next step.</span></span> <span data-ttu-id="6e88d-376">你可能需要关闭并重新打开逻辑应用，使看到的 URL。</span><span class="sxs-lookup"><span data-stu-id="6e88d-376">You may have to close and reopen the logic app to see the URL.</span></span>  


### <a name="step-3-create-a-send-port"></a><span data-ttu-id="6e88d-377">步骤 3︰ 创建发送端口</span><span class="sxs-lookup"><span data-stu-id="6e88d-377">Step 3: Create a Send Port</span></span>

<span data-ttu-id="6e88d-378">对于 BizTalk Server 中将消息发送到逻辑应用，必须具有逻辑应用 **手动** 触发，如 **收到手动-当 HTTP 请求**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-378">For BizTalk Server to send messages to a logic app, the logic app must have a **Manual** trigger, such as **Manual - When an HTTP request is received**.</span></span> 

1. <span data-ttu-id="6e88d-379">在 BizTalk Server 管理中，展开 **BizTalk Server 管理**, ，展开 **BizTalk 组**, ，展开 **应用程序**, ，然后展开你要运行发送端口的应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-379">In BizTalk Server Administration, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to run the send port.</span></span> <span data-ttu-id="6e88d-380">例如，展开 **BizTalk 应用程序 1**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-380">For example, expand **BizTalk Application 1**.</span></span>
2. <span data-ttu-id="6e88d-381">右-选择 **发送端口**, ，选择 **新建**, ，然后选择 **静态单向发送端口**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-381">Right-select **Send Ports**, select **New**, and select **Static One-way Send Port**.</span></span>
3. <span data-ttu-id="6e88d-382">输入 **名称** 发送端口。</span><span class="sxs-lookup"><span data-stu-id="6e88d-382">Enter a **Name** for the send port.</span></span> <span data-ttu-id="6e88d-383">例如，输入 **LASendPort**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-383">For example, enter **LASendPort**.</span></span>
4. <span data-ttu-id="6e88d-384">有关 **类型**, ，选择 **LogicApp** 从该列表中，并选择 **配置** 按钮。</span><span class="sxs-lookup"><span data-stu-id="6e88d-384">For the **Type**, select **LogicApp** from the list, and select the **Configure** button.</span></span> 
5. <span data-ttu-id="6e88d-385">在 **常规** 选项卡上，配置 **回调 URI** 你逻辑应用触发。</span><span class="sxs-lookup"><span data-stu-id="6e88d-385">In the **General** tab, configure the **Callback URI** of your logic app trigger.</span></span> <span data-ttu-id="6e88d-386">完成这项工作的方法有两种：</span><span class="sxs-lookup"><span data-stu-id="6e88d-386">There are two ways to do this:</span></span> 

    <span data-ttu-id="6e88d-387">**选项 1** ︰ 粘贴你在前一步骤中复制的 HTTP POST URL **触发器 (回调 URI)** 属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-387">**Option 1** : Paste the HTTP POST URL you copied in the previous step in the **Trigger (Callback URI)** property.</span></span> <span data-ttu-id="6e88d-388">您还可以将复制的 URI 使用以下步骤︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-388">You can also copy the URI using the following steps:</span></span>  
  
      1. <span data-ttu-id="6e88d-389">在 [Azure 门户](https://portal.azure.com), ，在逻辑应用设计器 （编辑模式） 中打开逻辑应用程序。</span><span class="sxs-lookup"><span data-stu-id="6e88d-389">In the [Azure portal](https://portal.azure.com), open your logic app in the Logic Apps designer (edit mode).</span></span> 
      2. <span data-ttu-id="6e88d-390">选择 **收到时 HTTP 请求** 卡，并将复制 **URL**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-390">Select the **When an HTTP request is received** card, and copy the **URL**.</span></span> 
      3. <span data-ttu-id="6e88d-391">在你发送端口，将在此 URL 粘贴 **触发器 (回调 URI)** 属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-391">In your send port, paste this URL in the **Trigger (Callback URI)** property.</span></span>

    > [!TIP] 
    > <span data-ttu-id="6e88d-392">你的管理 Api 还可用于获取此 URI。</span><span class="sxs-lookup"><span data-stu-id="6e88d-392">You can also use your management APIs to get this URI.</span></span>

    <span data-ttu-id="6e88d-393">**选项 2** ︰ 如果你不知道你触发器的回调 URI，则选择 **配置**, ，和登录到 Azure。</span><span class="sxs-lookup"><span data-stu-id="6e88d-393">**Option 2** : If you don't know the Callback URI for your trigger, select **Configure**, and sign-in to Azure.</span></span> <span data-ttu-id="6e88d-394">然后，使用下拉列表选择你 **订阅**, ，**资源组**, ，**逻辑应用**, ，和 **触发器**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-394">Then, use the drop-down lists to choose your **Subscription**, **Resource Group**, **Logic App**, and **Trigger**.</span></span>
 
6. <span data-ttu-id="6e88d-395">**可选**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-395">**Optional**.</span></span> <span data-ttu-id="6e88d-396">在 **绑定** 选项卡上，配置任何超时和编码相关的基础的 WCF WebHttp 绑定的属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-396">In the **Binding** tab, configure any timeout and encoding-related properties of the underlying WCF-WebHttp binding.</span></span> <span data-ttu-id="6e88d-397">处理大消息时，这些属性是很有帮助。</span><span class="sxs-lookup"><span data-stu-id="6e88d-397">These properties are helpful when dealing with large messages.</span></span>

    | <span data-ttu-id="6e88d-398">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6e88d-398">Use this</span></span> | <span data-ttu-id="6e88d-399">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6e88d-399">To do this</span></span> |
    | --- | --- |
    | <span data-ttu-id="6e88d-400">打开超时</span><span class="sxs-lookup"><span data-stu-id="6e88d-400">Open timeout</span></span> | <span data-ttu-id="6e88d-401">输入它时应采取通道打开操作完成的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-401">Enter the time interval it should take for the channel open operation to complete.</span></span> <span data-ttu-id="6e88d-402">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-402">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <br/><br/><span data-ttu-id="6e88d-403">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-403">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-404">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-404">Maximum value: 23:59:59</span></span> |
    | <span data-ttu-id="6e88d-405">发送超时时</span><span class="sxs-lookup"><span data-stu-id="6e88d-405">Send timeout</span></span> |<span data-ttu-id="6e88d-406">输入为完成发送操作也会花费的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-406">Enter the time interval it should take for the send operation to complete.</span></span> <span data-ttu-id="6e88d-407">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-407">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <span data-ttu-id="6e88d-408">如果你使用请求-响应接收端口，此值指定的时间范围进行整个交互，从而完成，即使客户端返回一个大的消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-408">If you use a request-response receive port, this value specifies a time span for the entire interaction to complete, even if the client returns a large message.</span></span> <br/><br/><span data-ttu-id="6e88d-409">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-409">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-410">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-410">Maximum value: 23:59:59</span></span>|
    | <span data-ttu-id="6e88d-411">关闭超时</span><span class="sxs-lookup"><span data-stu-id="6e88d-411">Close timeout</span></span> | <span data-ttu-id="6e88d-412">输入它时应采取通道关闭操作完成的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="6e88d-412">Enter the time interval it should take for the channel close operation to complete.</span></span> <span data-ttu-id="6e88d-413">此值应大于或等于 System.TimeSpan.Zero。</span><span class="sxs-lookup"><span data-stu-id="6e88d-413">This value should be greater than or equal to System.TimeSpan.Zero.</span></span> <br/><br/><span data-ttu-id="6e88d-414">默认值：00:01:00</span><span class="sxs-lookup"><span data-stu-id="6e88d-414">Default value: 00:01:00</span></span><br/><span data-ttu-id="6e88d-415">最大值︰ 23:59:59</span><span class="sxs-lookup"><span data-stu-id="6e88d-415">Maximum value: 23:59:59</span></span> |
    | <span data-ttu-id="6e88d-416">已接收消息的最大字节数</span><span class="sxs-lookup"><span data-stu-id="6e88d-416">Maximum received message size (bytes)</span></span> | <span data-ttu-id="6e88d-417">以字节为单位，包括消息头的消息，以在网络上接收输入的最大大小。</span><span class="sxs-lookup"><span data-stu-id="6e88d-417">Enter the maximum size, in bytes, for a message including headers, to be received on the wire.</span></span> <span data-ttu-id="6e88d-418">消息的大小受为每个消息分配的内存量。</span><span class="sxs-lookup"><span data-stu-id="6e88d-418">The size of the messages is bound by the amount of memory allocated for each message.</span></span> <span data-ttu-id="6e88d-419">你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-419">You can use this property to limit exposure to denial of service (DoS) attacks.</span></span> <br/><br/><span data-ttu-id="6e88d-420">逻辑 appa 适配器利用 [WebHttpBinding 类](https://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.aspx) 在缓冲的传输模式中与终结点进行通信。</span><span class="sxs-lookup"><span data-stu-id="6e88d-420">The logic appa adapter leverages the [WebHttpBinding class](https://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.aspx) in the buffered transfer mode to communicate with an endpoint.</span></span> <span data-ttu-id="6e88d-421">对于缓冲的传输模式中， [WebHttpBinding.MaxBufferSize](https://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.maxbuffersize.aspx) 属性也始终等于此属性的值。</span><span class="sxs-lookup"><span data-stu-id="6e88d-421">For the buffered transport mode, the [WebHttpBinding.MaxBufferSize](https://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.maxbuffersize.aspx) property is always equal to the value of this property.</span></span>  <br/><br/><span data-ttu-id="6e88d-422">默认值：65536</span><span class="sxs-lookup"><span data-stu-id="6e88d-422">Default value: 65536</span></span><br/><span data-ttu-id="6e88d-423">最大值：2147483647</span><span class="sxs-lookup"><span data-stu-id="6e88d-423">Maximum value: 2147483647</span></span> |


7. <span data-ttu-id="6e88d-424">**可选**。</span><span class="sxs-lookup"><span data-stu-id="6e88d-424">**Optional**.</span></span> <span data-ttu-id="6e88d-425">在 **消息** 选项卡上，使用 **出站 HTTP 标头** 属性来对传出消息中添加任何自定义标头。</span><span class="sxs-lookup"><span data-stu-id="6e88d-425">In the **Messages** tab, use the **Outbound HTTP Headers** property to add any custom headers on the outgoing message.</span></span> 
8. <span data-ttu-id="6e88d-426">选择 **确定** 以保存配置。</span><span class="sxs-lookup"><span data-stu-id="6e88d-426">Select **OK** to save your configuration.</span></span> 

<span data-ttu-id="6e88d-427">[管理发送端口和发送端口组](../core/managing-send-ports-and-send-port-groups.md)介绍其他发送端口属性。</span><span class="sxs-lookup"><span data-stu-id="6e88d-427">[Managing Send Ports and Send Port Groups](../core/managing-send-ports-and-send-port-groups.md) describes the additional send port properties.</span></span> 

### <a name="step-4-send-some-messages"></a><span data-ttu-id="6e88d-428">步骤 4︰ 发送某些消息</span><span class="sxs-lookup"><span data-stu-id="6e88d-428">Step 4: Send some messages</span></span>

<span data-ttu-id="6e88d-429">你可以创建接收端口和接收位置使用了文件适配器。</span><span class="sxs-lookup"><span data-stu-id="6e88d-429">You can create a receive port and receive location using the File adapter.</span></span> <span data-ttu-id="6e88d-430">请确保启用逻辑应用。</span><span class="sxs-lookup"><span data-stu-id="6e88d-430">Be sure your logic app is enabled.</span></span>

1. <span data-ttu-id="6e88d-431">创建接收端口，如 *FileSendPort*,，</span><span class="sxs-lookup"><span data-stu-id="6e88d-431">Create a receive port, such as *FileSendPort*,</span></span>
2. <span data-ttu-id="6e88d-432">创建一个接收位置，并设置的属性类似于︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-432">Create a receive location, and set the properties similar to:</span></span>  

    | <span data-ttu-id="6e88d-433">属性</span><span class="sxs-lookup"><span data-stu-id="6e88d-433">Property</span></span> | <span data-ttu-id="6e88d-434">示例输入</span><span class="sxs-lookup"><span data-stu-id="6e88d-434">Sample input</span></span> |
    | --- | --- |
   | <span data-ttu-id="6e88d-435">接收文件夹</span><span class="sxs-lookup"><span data-stu-id="6e88d-435">Receive folder</span></span> | <span data-ttu-id="6e88d-436">C:\temp\In\\</span><span class="sxs-lookup"><span data-stu-id="6e88d-436">C:\temp\In\\</span></span> |
   | <span data-ttu-id="6e88d-437">文件掩码</span><span class="sxs-lookup"><span data-stu-id="6e88d-437">File mask</span></span> | <span data-ttu-id="6e88d-438">\*.txt</span><span class="sxs-lookup"><span data-stu-id="6e88d-438">\*.txt</span></span> |
   | <span data-ttu-id="6e88d-439">管道</span><span class="sxs-lookup"><span data-stu-id="6e88d-439">Pipeline</span></span> | <span data-ttu-id="6e88d-440">PassThruReceive</span><span class="sxs-lookup"><span data-stu-id="6e88d-440">PassThruReceive</span></span> |

3. <span data-ttu-id="6e88d-441">在你创建的发送端口，集中 **筛选器** 到︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-441">In the send port you created, set the **Filter** to:</span></span>

    | <span data-ttu-id="6e88d-442">属性</span><span class="sxs-lookup"><span data-stu-id="6e88d-442">Property</span></span> | <span data-ttu-id="6e88d-443">运算符</span><span class="sxs-lookup"><span data-stu-id="6e88d-443">Operator</span></span> | <span data-ttu-id="6e88d-444">“值”</span><span class="sxs-lookup"><span data-stu-id="6e88d-444">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="6e88d-445">BTS.ReceivePortName</span><span class="sxs-lookup"><span data-stu-id="6e88d-445">BTS.ReceivePortName</span></span> |  == | <span data-ttu-id="6e88d-446">*FileSendPort*</span><span class="sxs-lookup"><span data-stu-id="6e88d-446">*FileSendPort*</span></span> |

4. <span data-ttu-id="6e88d-447">创建具有以下文本的文本文件 (FileName.txt)。</span><span class="sxs-lookup"><span data-stu-id="6e88d-447">Create a text file (FileName.txt) with the following text.</span></span> <span data-ttu-id="6e88d-448">使用此文本文件作为示例消息︰</span><span class="sxs-lookup"><span data-stu-id="6e88d-448">Use this text file as your sample message:</span></span> 

    ```
    <Data>
      <DataID>DataID_0</DataID>
      <DataDetails>DataDetails_0</DataDetails>
    </Data>
    ```

5. <span data-ttu-id="6e88d-449">将你的示例消息 (FileName.txt) 复制到接收文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e88d-449">Copy your sample message (FileName.txt) into the receive folder.</span></span> <span data-ttu-id="6e88d-450">发送端口将.txt 文件发送到逻辑应用，使用你输入的 URI。</span><span class="sxs-lookup"><span data-stu-id="6e88d-450">The send port sends the .txt file to the logic app using the URI you entered.</span></span> <span data-ttu-id="6e88d-451">逻辑应用接收文件。</span><span class="sxs-lookup"><span data-stu-id="6e88d-451">Your logic app receive the files.</span></span> <span data-ttu-id="6e88d-452">如果你使用 Office 365 Outlook 连接器，你 *到* 电子邮件地址应收到电子邮件，使用的示例消息。</span><span class="sxs-lookup"><span data-stu-id="6e88d-452">If you used the Office 365 Outlook connector, your *To* email address should receive the email, with the sample message.</span></span>

## <a name="next"></a><span data-ttu-id="6e88d-453">Next</span><span class="sxs-lookup"><span data-stu-id="6e88d-453">Next</span></span>
[<span data-ttu-id="6e88d-454">逻辑应用有哪些？</span><span class="sxs-lookup"><span data-stu-id="6e88d-454">What are Logic Apps</span></span>](https://azure.microsoft.com/documentation/articles/app-service-logic-what-are-logic-apps/)  

[<span data-ttu-id="6e88d-455">创建逻辑应用</span><span class="sxs-lookup"><span data-stu-id="6e88d-455">Create a logic app</span></span>](https://azure.microsoft.com/documentation/articles/app-service-logic-create-a-logic-app/)

[<span data-ttu-id="6e88d-456">BizTalk Server 中使用适配器</span><span class="sxs-lookup"><span data-stu-id="6e88d-456">Using adapters in BizTalk Server</span></span>](../core/using-adapters.md)