---
title: 如何创建 BizTalk Server 宿主环境 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- hosting environments, creating
- managing [hosts], hosting environments
- hosts, environments
- managing [hosts], creating
- creating, hosting environment
ms.assetid: 6f335139-1121-45ff-88da-5c626b8fff97
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ba3829a2fecb32a191b7351833e975bf3770547d
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "37013374"
---
# <a name="how-to-create-a-biztalk-server-hosting-environment"></a><span data-ttu-id="5195e-102">如何创建 BizTalk Server 宿主环境</span><span class="sxs-lookup"><span data-stu-id="5195e-102">How to Create a BizTalk Server Hosting Environment</span></span>
<span data-ttu-id="5195e-103">在创建 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 宿主环境之前，请考虑以下建议：</span><span class="sxs-lookup"><span data-stu-id="5195e-103">Before you create your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] hosting environment, consider the following recommendations:</span></span>  

- <span data-ttu-id="5195e-104">**使用不同的主机的受信任和不受信任的业务流程和接收处理程序**</span><span class="sxs-lookup"><span data-stu-id="5195e-104">**Use different hosts for trusted and non-trusted orchestrations and receive handlers**</span></span>  

   <span data-ttu-id="5195e-105">在主机中运行的任何项（例如，业务流程、管道、接收和发送处理程序）都使用同一标识运行，并具有对该主机的工作队列和挂起队列的访问权限。</span><span class="sxs-lookup"><span data-stu-id="5195e-105">Any items running in a host (for example, orchestrations, pipelines, receive and send handlers) run under the same identity, and have access to the work and suspended queues for that host.</span></span>  

   <span data-ttu-id="5195e-106">如果由于权限错误导致无法将消息发送到业务流程，则会将该消息放入正在运行发送进程（接收管道或其他业务流程）的主机的挂起队列中。</span><span class="sxs-lookup"><span data-stu-id="5195e-106">If a message cannot be delivered to an orchestration due to permission errors, the message is placed in the suspended queue of the host where the sending process (a receive pipeline or another orchestration) is running.</span></span> <span data-ttu-id="5195e-107">但是，如果业务流程和发送进程（例如，接收管道）在同一主机中运行，则该业务流程仍可访问挂起队列中的消息。</span><span class="sxs-lookup"><span data-stu-id="5195e-107">However, if the orchestration and the sending process (for example, a receive pipeline) are running in the same host, the orchestration can still access the message in the suspended queue.</span></span> <span data-ttu-id="5195e-108">如果在可信主机中运行不可信业务流程，这可能会危及系统安全。</span><span class="sxs-lookup"><span data-stu-id="5195e-108">This could potentially compromise your system if a non-trusted orchestration is running in a trusted host.</span></span>  

   <span data-ttu-id="5195e-109">建议在单独的主机中运行不可信业务流程，并使用与 BizTalk 组中的可信主机不同的服务帐户。</span><span class="sxs-lookup"><span data-stu-id="5195e-109">We recommend that you run non-trusted orchestrations in a separate host, with a different service account than the trusted hosts in your BizTalk group.</span></span> <span data-ttu-id="5195e-110">有关将主机指定为受信任，请参阅[如何修改主机属性](../core/how-to-modify-host-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="5195e-110">For information about designating a host as trusted, see [How to Modify Host Properties](../core/how-to-modify-host-properties.md).</span></span>  

- <span data-ttu-id="5195e-111">**限制 BizTalk Server 数据库中的数据库和日志大小**</span><span class="sxs-lookup"><span data-stu-id="5195e-111">**Limit the database and log size in the BizTalk Server databases**</span></span>  

   <span data-ttu-id="5195e-112">BizTalk MessageBox 数据库和 BizTalk 跟踪数据库的增长速度远大于其他 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库的增长速度。</span><span class="sxs-lookup"><span data-stu-id="5195e-112">The BizTalk MessageBox databases and the BizTalk Tracking database grow much faster than the other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span> <span data-ttu-id="5195e-113">作为备份和维护程序的一部分，您应经常更新这些数据库。</span><span class="sxs-lookup"><span data-stu-id="5195e-113">As part of your backup and maintenance program, you should update these databases frequently.</span></span>  

   <span data-ttu-id="5195e-114">默认情况下，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库中的表没有日志大小限制。</span><span class="sxs-lookup"><span data-stu-id="5195e-114">By default, the tables in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases do not have a log size limit.</span></span> <span data-ttu-id="5195e-115">作为备份和维护程序的一部分，建议限制日志大小以防止日志变得过大并可能占用所有磁盘空间。</span><span class="sxs-lookup"><span data-stu-id="5195e-115">As part of your backup and maintenance program, we recommend that you limit the log size to prevent the logs from becoming too large and potentially using all the disk space.</span></span> <span data-ttu-id="5195e-116">有关管理的跟踪数据库大小的信息，请参阅[存档和清除 BizTalk 跟踪数据库](../core/archiving-and-purging-the-biztalk-tracking-database.md)。</span><span class="sxs-lookup"><span data-stu-id="5195e-116">For information about managing the size of tracking database, see [Archiving and Purging the BizTalk Tracking Database](../core/archiving-and-purging-the-biztalk-tracking-database.md).</span></span>  

- <span data-ttu-id="5195e-117">**使用 SQL Server 群集**</span><span class="sxs-lookup"><span data-stu-id="5195e-117">**Use SQL Server clustering**</span></span>  

   <span data-ttu-id="5195e-118">为了提供 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库的高可用性，建议对存储 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 数据库的 SQL 服务器进行群集。</span><span class="sxs-lookup"><span data-stu-id="5195e-118">To provide high availability of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, we recommend that you cluster the SQL servers where the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases are stored.</span></span> <span data-ttu-id="5195e-119">这将帮助您在其中一个数据库或 SQL Server 出现故障时最大限度地减少停机时间。</span><span class="sxs-lookup"><span data-stu-id="5195e-119">This will help minimize downtime if one of the databases or SQL Server fails.</span></span> <span data-ttu-id="5195e-120">有关 SQL Server 群集的详细信息，请参阅 SQL Server 联机丛书中的“故障转移群集体系结构”。</span><span class="sxs-lookup"><span data-stu-id="5195e-120">For more information about SQL Server clustering, see "Failover Clustering Architecture" in SQL Server Books Online.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="5195e-121">必要條件</span><span class="sxs-lookup"><span data-stu-id="5195e-121">Prerequisites</span></span>  
 <span data-ttu-id="5195e-122">以下为执行本主题中的过程的前提条件：</span><span class="sxs-lookup"><span data-stu-id="5195e-122">The following are prerequisites for performing the procedure in this topic:</span></span>  

- <span data-ttu-id="5195e-123">你必须以 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理员组成员的身份登录。</span><span class="sxs-lookup"><span data-stu-id="5195e-123">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  

- <span data-ttu-id="5195e-124">以下过程中的说明假定您已使用完全安装选项安装了 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5195e-124">The instructions in the following procedure assume that you have installed [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] with the complete installation option.</span></span> <span data-ttu-id="5195e-125">如果不是使用完全安装选项安装 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，则您的系统中可能未安装步骤 1 中列出的某些管理对象。</span><span class="sxs-lookup"><span data-stu-id="5195e-125">If you did not install [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] with the complete installation option, some of the administration objects listed in step 1 may not be on your system.</span></span>  

### <a name="to-create-a-biztalk-server-hosting-environment"></a><span data-ttu-id="5195e-126">创建 BizTalk Server 宿主环境</span><span class="sxs-lookup"><span data-stu-id="5195e-126">To create a BizTalk Server hosting environment</span></span>  

1. <span data-ttu-id="5195e-127">使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 配置创建新的 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="5195e-127">Use [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Configuration to create a new BizTalk group.</span></span> <span data-ttu-id="5195e-128">了解如何创建一个新[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]组，请参阅[使用 BizTalk Server 配置的配置组](http://msdn.microsoft.com/library/16beb7bb-091c-4056-8622-cc79c95186e9)。</span><span class="sxs-lookup"><span data-stu-id="5195e-128">For information about creating a new [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group, see [Configuring Groups Using the BizTalk Server Configuration](http://msdn.microsoft.com/library/16beb7bb-091c-4056-8622-cc79c95186e9).</span></span>  

    [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="5195e-129"> 配置可创建以下管理对象：</span><span class="sxs-lookup"><span data-stu-id="5195e-129"> Configuration creates the following administration objects:</span></span>  


   |                   <span data-ttu-id="5195e-130">管理对象</span><span class="sxs-lookup"><span data-stu-id="5195e-130">Administration object</span></span>                    |                                                                                                                                                                                                                                       <span data-ttu-id="5195e-131">Description</span><span class="sxs-lookup"><span data-stu-id="5195e-131">Description</span></span>                                                                                                                                                                                                                                       |
   |------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      <span data-ttu-id="5195e-132">**BizTalk 管理**数据库 (BizTalkMgmtDb)</span><span class="sxs-lookup"><span data-stu-id="5195e-132">**BizTalk Management** database (BizTalkMgmtDb)</span></span>       |                                                                                                                                                                    <span data-ttu-id="5195e-133">此数据库是所有 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 的中央元信息存储区。</span><span class="sxs-lookup"><span data-stu-id="5195e-133">This database is the central meta-information store for all [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]s.</span></span>                                                                                                                                                                     |
   |     <span data-ttu-id="5195e-134">**BizTalk MessageBox**数据库 (BizTalkMsgBoxDb)</span><span class="sxs-lookup"><span data-stu-id="5195e-134">**BizTalk MessageBox** database (BizTalkMsgBoxDb)</span></span>      |           <span data-ttu-id="5195e-135">此数据库存储订阅谓词。</span><span class="sxs-lookup"><span data-stu-id="5195e-135">This database stores subscriptions predicates.</span></span> <span data-ttu-id="5195e-136">它是一个主机平台，存储每个 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 主机的队列和状态表。</span><span class="sxs-lookup"><span data-stu-id="5195e-136">It is a host platform, and keeps the queues and state tables for each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host.</span></span> <span data-ttu-id="5195e-137">MessageBox 数据库还存储消息和消息属性。</span><span class="sxs-lookup"><span data-stu-id="5195e-137">The MessageBox database also stores the messages and message properties.</span></span> <span data-ttu-id="5195e-138">有关 MessageBox 数据库的信息，包括添加其他 MessageBox 数据库，请参阅[管理 MessageBox 数据库](../core/managing-messagebox-databases.md)。</span><span class="sxs-lookup"><span data-stu-id="5195e-138">For information about MessageBox databases, including adding additional MessageBox databases, see [Managing MessageBox Databases](../core/managing-messagebox-databases.md).</span></span>           |
   |                         <span data-ttu-id="5195e-139">**Server**</span><span class="sxs-lookup"><span data-stu-id="5195e-139">**Server**</span></span>                         | <span data-ttu-id="5195e-140">此为安装和配置 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 以及运行主机实例的计算机。</span><span class="sxs-lookup"><span data-stu-id="5195e-140">This is the computer on which [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is installed and configured, and where host instances are running.</span></span> <span data-ttu-id="5195e-141">您从在服务器上创建的主机中创建主机实例。</span><span class="sxs-lookup"><span data-stu-id="5195e-141">You create host instances from a host created on a server.</span></span> <span data-ttu-id="5195e-142">有关创建主机的详细信息，请参阅[如何创建新的主机](../core/how-to-create-a-new-host.md)。</span><span class="sxs-lookup"><span data-stu-id="5195e-142">For more information about creating a host, see [How to Create a New Host](../core/how-to-create-a-new-host.md).</span></span> <span data-ttu-id="5195e-143">有关创建主机实例的信息，请参阅[如何将主机实例添加](../core/how-to-add-a-host-instance.md)。</span><span class="sxs-lookup"><span data-stu-id="5195e-143">For information about creating host instances, see [How to Add a Host Instance](../core/how-to-add-a-host-instance.md).</span></span> |
   |     <span data-ttu-id="5195e-144">**BAM 主导入**数据库 (BAMPrimaryImport)</span><span class="sxs-lookup"><span data-stu-id="5195e-144">**BAM Primary Import** database (BAMPrimaryImport)</span></span>     |                                                                                                                                                                                                <span data-ttu-id="5195e-145">此数据库是业务活动监视工具从中收集跟踪数据的数据库。</span><span class="sxs-lookup"><span data-stu-id="5195e-145">This is the database where the Business Activity Monitoring tool collects tracking data.</span></span>                                                                                                                                                                                                 |
   |       <span data-ttu-id="5195e-146">**规则引擎**数据库 (BizTalkRuleEngineDb)</span><span class="sxs-lookup"><span data-stu-id="5195e-146">**Rule Engine** database (BizTalkRuleEngineDb)</span></span>       |                                                                                                                                                                                       <span data-ttu-id="5195e-147">此数据库是业务规则中数据引用策略、规则和词汇的存储库。</span><span class="sxs-lookup"><span data-stu-id="5195e-147">This database is a repository for policies, rules, and vocabularies for data references in business rules.</span></span>                                                                                                                                                                                        |
   |        <span data-ttu-id="5195e-148">**BizTalk 跟踪**数据库 (BizTalkDTADb)</span><span class="sxs-lookup"><span data-stu-id="5195e-148">**BizTalk Tracking** database (BizTalkDTADb)</span></span>        |                                                                                                                                                       <span data-ttu-id="5195e-149">此数据库存储 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 跟踪引擎所跟踪的业务和运行状况监视数据。</span><span class="sxs-lookup"><span data-stu-id="5195e-149">This database stores business and health-monitoring data tracked by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tracking engine.</span></span>                                                                                                                                                       |
   |                  <span data-ttu-id="5195e-150">**SSO**数据库 (SSODB)</span><span class="sxs-lookup"><span data-stu-id="5195e-150">**SSO** database (SSODB)</span></span>                  |                                                                                                                                                                                                                      <span data-ttu-id="5195e-151">此数据库存储凭据信息。</span><span class="sxs-lookup"><span data-stu-id="5195e-151">This database stores credential information.</span></span>                                                                                                                                                                                                                       |
   |   <span data-ttu-id="5195e-152">**进程内主机**及相应的主机实例</span><span class="sxs-lookup"><span data-stu-id="5195e-152">**In-process host** with corresponding host instances</span></span>    |                                                                                                                                                                        <span data-ttu-id="5195e-153">进程内主机在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 进程空间内运行。</span><span class="sxs-lookup"><span data-stu-id="5195e-153">The in-process host operates within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process space.</span></span>                                                                                                                                                                        |
   |    <span data-ttu-id="5195e-154">**独立主机**及相应的主机实例</span><span class="sxs-lookup"><span data-stu-id="5195e-154">**Isolated host** with corresponding host instances</span></span>     |                                                                                                                                                                       <span data-ttu-id="5195e-155">独立主机在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 安装外部运行。</span><span class="sxs-lookup"><span data-stu-id="5195e-155">The isolated host operates outside of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] installation.</span></span>                                                                                                                                                                        |
   | <span data-ttu-id="5195e-156">HTTP/S、BizTalk 消息队列、文件、SMTP、SOAP 和 SQL</span><span class="sxs-lookup"><span data-stu-id="5195e-156">HTTP/S, BizTalk Message Queuing, File, SMTP, SOAP, and SQL</span></span> |                                                                                                                                                                   <span data-ttu-id="5195e-157">配置向导创建的适配器属于[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5195e-157">The Configuration Wizard creates the adapters that are part of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>                                                                                                                                                                    |


2. <span data-ttu-id="5195e-158">根据需要，可使用 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台或 WMI 向 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 环境中添加组件。</span><span class="sxs-lookup"><span data-stu-id="5195e-158">Use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console or WMI to add components to your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment as needed.</span></span> <span data-ttu-id="5195e-159">若要扩展解决方案，请添加 MessageBox 数据库、主机和服务器。</span><span class="sxs-lookup"><span data-stu-id="5195e-159">To scale out your solution, add MessageBox databases, hosts, and servers.</span></span>  

3. <span data-ttu-id="5195e-160">使用 BizTalk 管理控制台或 WMI 在映射的服务器上创建主机实例。</span><span class="sxs-lookup"><span data-stu-id="5195e-160">Use the BizTalk Administration Console or WMI to create host instances on the mapped servers.</span></span> <span data-ttu-id="5195e-161">此步骤确定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 将在哪些服务器上运行。</span><span class="sxs-lookup"><span data-stu-id="5195e-161">This step determines on which servers [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will run.</span></span> <span data-ttu-id="5195e-162">随着企业需求的变化，您可以添加服务器，删除服务器以及更改服务器到主机映射。</span><span class="sxs-lookup"><span data-stu-id="5195e-162">As the needs in your enterprise change, you can add servers, remove servers, and change server-to-host mapping.</span></span>  

## <a name="see-also"></a><span data-ttu-id="5195e-163">请参阅</span><span class="sxs-lookup"><span data-stu-id="5195e-163">See Also</span></span>  
 <span data-ttu-id="5195e-164">[管理 BizTalk 主机和主机实例](../core/managing-biztalk-hosts-and-host-instances.md) </span><span class="sxs-lookup"><span data-stu-id="5195e-164">[Managing BizTalk Hosts and Host Instances](../core/managing-biztalk-hosts-and-host-instances.md) </span></span>  
 <span data-ttu-id="5195e-165">[主机](../core/hosts.md) </span><span class="sxs-lookup"><span data-stu-id="5195e-165">[Hosts](../core/hosts.md) </span></span>  
 [<span data-ttu-id="5195e-166">主机实例</span><span class="sxs-lookup"><span data-stu-id="5195e-166">Host Instances</span></span>](../core/host-instances.md)