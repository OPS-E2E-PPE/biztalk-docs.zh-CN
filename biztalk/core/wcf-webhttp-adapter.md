---
title: WCF WebHttp 适配器 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 67a353e7-1ba3-427a-8e99-c9b8d83061cb
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 891f636a5380eda7db676559194618915213dc37
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/23/2018
---
# <a name="wcf-webhttp-adapter"></a>WCF-WebHttp 适配器
[!INCLUDE[btsCoName](../includes/btsconame-md.md)] [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 使用**WCF WebHttp**适配器将消息发送到 RESTful 服务。 **WCF WebHttp** 发送适配器从 BizTalk 消息向服务发送 HTTP 消息。 接收位置将接收来自 RESTful 服务的消息。 对于 GET 和 DELETE 请求，适配器不使用任何负载。 对于 POST 和 PUT 请求，适配器将 BizTalk 消息正文部分用于 HTTP 内容/负载。  

本主题演示如何创建接收位置和发送端口使用 BizTalk 管理。

## <a name="create-a-receive-location"></a>创建接收位置
  
> [!NOTE]
>  之前完成以下过程，你必须已添加单向接收端口。 请参阅 [如何创建接收端口](../core/how-to-create-a-receive-port.md)。  
  
1.  在 BizTalk Server 管理控制台中，依次展开“ [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]”、“BizTalk 组” 、“应用程序” ，然后展开要在其下创建接收位置的应用程序。  
  
2.  在左窗格中按一下 **[接收埠]** 節點，在右窗格中以滑鼠右鍵按一下您想與新接收位置建立關聯的接收埠，然後按一下 **[屬性]**。  
  
3.  在“接收端口属性”  对话框的左窗格中，选择“接收位置” ，然后在右窗格中单击“新建”  以创建新的接收位置。  
  
4.  在“接收位置属性”  对话框的“传输”  部分中，从“类型”  下拉列表中选择“WCF-WebHttp”  ，然后单击“配置”  以配置接收位置的传输属性。  
  
5.  在 **常规** 选项卡上，配置接收消息的 REST 接口的终结点地址。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**地址 (URI)**|必需的。 指定 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 可在其中接收基于 HTTP 的 RESTful 消息的 URI。|  
    |**终结点标识**|選擇性。 指定端點識別。 這些設定可讓端點驗證此接收位置。 在端點與接收位置之間的交握程序中，Windows Communication Foundation (WCF) 基礎結構可確保預期之服務的識別與此元素的值相符。<br /><br /> 默认值为空字符串。|  
    |**HTTP 方法和 URL 映射**|BTS 操作映射允许用户根据传入的 HTTP 方法和 URL 子路径将传入的 HTTP 请求映射到消息上下文中的 BTS 操作。 针对一组 HTTP 方法和 URI 模板对传入的 HTTP 方法和 URL 子路径进行匹配。 如果发现匹配项，适配器将使用消息中指定的值将 **BTS.Operation** 属性提升为 BizTalk 消息上下文。<br /><br /> 可以单映射或多映射格式指定 HTTP 方法到 URL 的映射。 多映射格式如下所示：<br /><br /> `<BtsHttpUrlMapping> <Operation Name = "DelCust" Method="DELETE" Url="/Customer/12345</BtsHttpUrlMapping>`<br /><br /> 请注意，在上面的代码段中，客户 ID 是作为常数值 *12345*提供的。 但是，可能存在某些必须在运行时确定客户 ID 或任何其他查询变量的方案。 若要启用此类方案，必须在大括号 {} 内提供 URL 的变量组件。 例如，在上面的代码段中，如果将客户 ID 指定为变量，其内容将如下所示：<br /><br /> `<BtsHttpUrlMapping> <Operation Name = "DelCust" Method="DELETE" Url="/Customer/{ID}</BtsHttpUrlMapping>`<br /><br /> 在这种情况下，还必须指定在运行时必须从什么位置提取变量 **ID** 的值。 你使用 **变量映射**指定该位置。<br /><br />**请注意**<br /> 在 URL 字段中，任何特殊的 XML 字符必须是"转义"。 这将确保特殊 XML 字符是处理，并通过端口保留。 例如， `&` 必须作为转义特殊字符 `&amp;`。 <br /><br />发件人：<br />`Url=”/Customer?{ID}& group=Location”`<br />若要： <br />`Url=”/Customer?{ID}&amp;group=Location”`|  
    |**变量的映射**|如果为 HTTP 方法 URL 映射指定了变量，则必须指定变量在运行时映射到的内容。 单击“编辑”  按钮以启动“变量映射”  对话框。 在“变量”  列下，该对话框列出了你为 **HTTP 方法和 URL 映射**定义的变量。 在“属性名称”  字段中，你必须指定属性的名称，该属性提供的值将与变量相关联。 必须已将此属性定义/提升为解决方案的一部分。 你还必须在“属性命名空间”  字段中为该属性提供命名空间。|  
  
6.  在 **绑定** 选项卡上配置的超时和编码相关的属性。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**打开超时 (hh:mmss)**|指定時間值，表示可供完成通道開啟作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**发送超时时 (hh:mmss)**|指定時間值，表示可供完成傳送作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。 如果您使用要求-回應接收埠，這個值會指定完成整個互動的時間長度，即使服務傳回很大的訊息也是如此。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**关闭超时 (hh:mmss)**|指定時間值，表示可供完成通道關閉作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**收到的最大消息大小 （字节）**|以位元組為單位，指定可在網路上接收的訊息大小上限 (含標頭)。 訊息的大小受限於配置給每個訊息的記憶體數量。 你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。<br /><br /> WCF-WebHttp 适配器在缓冲传输模式中利用 [WebHttpBinding](http://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.aspx) 类与终结点进行通信。 对于缓冲传输模式， [WebHttpBinding.MaxBufferSize](http://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.maxbuffersize.aspx) 属性始终等于此属性的值。<br /><br /> 默认值：65536<br /><br /> 最大值：2147483647|  
    |**最大并发调用**|指定對單一服務執行個體的並行呼叫數目。 超出上限的呼叫將排入佇列。 將這個值設定為 0 的效果與設定為 **Int32.MaxValue**相同。<br /><br /> 默认值为 200。|  
  
7.  在 **安全** 选项卡上，定义安全性功能 WCF WebHttp 接收位置。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**安全模式**|指定使用的安全性類型。 有效值包括下列各項：<br /><br /> -                          **无**： 在传输过程不保护消息。<br /><br /> - **传输**： 使用 HTTPS 传输提供安全性。 使用 HTTPS 來維護 SOAP 訊息的安全。 若要使用此模式，你必须在 Microsoft Internet 信息服务 (IIS) 中设置安全套接字层 (SSL)。<br /><br /> - **TransportWithMessageCredential**： 由 HTTPS 传输提供完整性、 保密性和服务身份验证。 若要使用這個模式，您必須在 Microsoft Internet Information Services (IIS) 中設定「安全通訊端層」(SSL)。<br /><br /> 默认值为“传输” 。|  
    |**传输客户端凭据类型**|指定执行客户端验证时要使用的凭据类型。 有效值包括：<br /><br /> - **无**： 无身份验证发生在传输级别。<br /><br /> - **基本**： 基本身份验证。 在基本身份验证中，用户名和密码将以明文形式通过网络发送。 你必须创建与凭据对应的域或本地用户帐户。<br /><br /> - **摘要式**： 摘要式身份验证。 此身份验证方法与基本身份验证方法相似，不同之处在于密码以哈希值的形式通过网络发送，以增强安全性。 摘要身份验证只可在域控制器运行 Windows Server 操作系统验证的域中使用。 你必须创建与客户端凭据对应的域或本地用户帐户。<br /><br /> -                          **Ntlm**: NTLM 身份验证。 客户端可只发送凭据而不向此接收位置发送密码。 你必须创建与客户端凭据对应的域或本地用户帐户。<br /><br /> -                          **Windows**: Windows 集成身份验证。 Windows Communication Foundation 可与 Kerberos 或 NTLM 协商，如果存在域，则首选使用 Kerberos。 如果要使用 Kerberos，则非常重要的一点是让客户端使用服务主体名称 (SPN) 标识该服务。 你必须创建与客户端凭据对应的域或本地用户帐户。<br /><br /> - **证书**： 使用客户端证书的客户端身份验证。 必须将用于客户端 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储中，以便可以针对此接收位置验证客户端。<br /><br /> **请注意** **传输客户端凭据类型** 属性必须与匹配的身份验证方案的 IIS 虚拟目录承载该接收位置。 例如，如果该属性设置为“Windows” ，则你还需为此接收位置所在的虚拟目录启用“集成 Windows 验证”  。 相似地，如果将该属性设置为“无” ，则你必须允许匿名访问此接收位置所在的虚拟目录。<br /><br /> 默认值为“Windows” 。|  
    |**服务证书的指纹**|針對此接收位置指定用戶端用來驗證服務之 X.509 憑證的憑證指紋。 使用“浏览”  按钮，导航到“当前用户”  位置中“我的”  存储，然后即可选择指纹。<br /><br /> **请注意** 必须安装到的服务证书 **当前用户** 承载此接收位置接收处理程序的用户帐户的位置。<br /><br /> 最小长度：0<br /><br /> 最大長度：40<br /><br /> 默认值为空字符串。|  

8. 在 **行为** 选项卡上，指定在服务级别和终结点级别不同的行为。 这些行为基于.NET Framework 类。  
  
    | 使用此选项|执行的操作|  
    |--------------|----------------|  
    | ServiceBehavior | 扩展您的 WCF 服务在服务级别的功能。 你可以添加扩展，执行不同的操作、 如定义的安全设置、 启用调试、 实施限制，和使用其他.NET 类。  <br/><br/> 右-选择 **ServiceBehavior**, ，和 **将扩展添加**。 此列表显示了可以使用的.NET 类。|
    | EndpointBehavior | 扩展终结点级别收到的请求的 funcionality。 你可以添加扩展执行不同的操作，如从基于浏览器的 ASP.NET AJAX 客户端接收 HTTP 请求，在事务上指定时间间隔内，选择同步或异步，接收消息，并使用其他.NET 类。 <br/><br/> 右-选择 **EndpointBehavior**, ，和 **将扩展添加**。 此列表显示了可以使用的.NET 类。|

    这是 WCF 自定义接收位置的行为配置类似。 请参阅**WCF 自定义传输属性对话框中，接收，行为**选项卡[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。
    
9.  在 **消息** 选项卡上，指定 SOAP 数据选择 **正文** 元素。  
  
    |使用此选项|执行的操作|  
    |--------------|----------------|  
    |**出站 HTTP 标头**|指定在响应消息中标记的 HTTP 标头（如果有）。|  
    |**禁用失败的位置**|指定是否禁用由于接收管道故障或路由故障而导致入站处理失败的接收位置。<br /><br /> 默认情况下清除此复选框。|  
    |**挂起失败的请求消息**|指定是否擱置因接收管線失敗或路由失敗而造成輸入處理失敗的要求訊息。<br /><br /> 預設值為清除核取方塊。|  
    |**错误中包括异常详细信息**|指定是否要將在錯誤發生時傳回 SOAP 錯誤以方便偵錯。<br /><br /> 預設值為清除核取方塊。|  
  
9. 按一下 **[確定]**。  
  
10. 在 **[接收位置屬性]** 對話方塊中輸入適當的值，以完成接收位置的組態，然後按一下 **[確定]** 儲存設定值。 璝惠 **接收位置属性** 对话框中，请参阅 [如何创建接收位置](../core/how-to-create-a-receive-location.md)。  

## <a name="create-the-send-port"></a>建立傳送埠

1.  在 [BizTalk 管理主控台] 中建立新的傳送埠，或按兩下現有的傳送埠進行修改。 请参阅 [如何创建发送端口](../core/how-to-create-a-send-port2.md)。 配置所有发送端口选项并指定 **WCF WebHttp** 为 **类型** 选项 **传输** 部分 **常规** 选项卡。  
  
2.  上 **常规** 选项卡上，在 **传输** 部分中，单击 **配置** 按钮。  
  
3.  在 **常规** 选项卡上，配置发送消息的 REST 接口的终结点地址。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**地址 (URI)**|必需的。 指定发送消息所在的 REST 接口的 URI。|  
    |**终结点标识**|選擇性。 指定终结点标识。 这些设置支持终结点对此发送端口进行验证。 在终结点与接收位置进行握手的过程中，Windows Communication Foundation (WCF) 基础结构将确保预期服务的标识与此元素的值保持一致。<br /><br /> 默认值为空字符串。|  
    |**HTTP 方法和 URL 映射**|BTS 操作映射允许用户根据传入的 HTTP 方法和 URL 子路径将传入的 HTTP 请求映射到消息上下文中的 BTS 操作。 针对一组 HTTP 方法和 URI 模板对传入的 HTTP 方法和 URL 子路径进行匹配。 如果发现匹配项，适配器将使用消息中指定的值将 **BTS.Operation** 属性提升为 BizTalk 消息上下文。<br /><br /> 可以单映射或多映射格式指定 HTTP 方法到 URL 的映射。 多映射格式如下所示：<br /><br /> `BtsHttpUrlMapping> <Operation Name = "DelCust" Method="DELETE" Url="/Customer/12345" /> </BtsHttpUrlMapping>`<br /><br /> 请注意，在上面的代码段中，客户 ID 是作为常数值 *12345*提供的。 但是，可能存在某些必须在运行时确定客户 ID 或任何其他查询变量的方案。 若要启用此类方案，必须在大括号 {} 内提供 URL 的变量组件。 例如，在上面的代码段中，如果将客户 ID 指定为变量，其内容将如下所示：<br /><br /> `<BtsHttpUrlMapping> <Operation Name = "DelCust" Method="DELETE" Url="/Customer/{ID}" /> </BtsHttpUrlMapping>`<br /><br /> 在这种情况下，还必须指定在运行时必须从什么位置提取变量 **ID** 的值。 你使用 **变量映射**指定该位置。 <br /><br />**请注意**<br /> 在 URL 字段中，任何特殊的 XML 字符必须是"转义"。 这将确保特殊 XML 字符是处理，并通过端口保留。 例如， `&` 必须作为转义特殊字符 `&amp;`。 <br /><br />发件人：<br />`Url=”/Customer?{ID}& group=Location”`<br />若要： <br />`Url=”/Customer?{ID}&amp;group=Location”`|  
    |**变量的映射**|如果为 HTTP 方法 URL 映射指定了变量，则必须指定变量在运行时映射到的内容。 单击“编辑”  按钮以启动“变量映射”  对话框。 在“变量”  列下，该对话框列出了你为 **HTTP 方法和 URL 映射**定义的变量。 在“属性名称”  字段中，你必须指定属性的名称，该属性提供的值将与变量相关联。 必须已将此属性定义/提升为解决方案的一部分。 你还必须在“属性命名空间”  字段中为该属性提供命名空间。|  
  
4.  在 **绑定** 选项卡上配置的超时和编码相关的属性。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**打开超时 (hh:mmss)**|指定時間值，表示可供完成通道開啟作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**发送超时时 (hh:mmss)**|指定時間值，表示可供完成傳送作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。 如果您使用要求-回應接收埠，這個值會指定完成整個互動的時間長度，即使服務傳回很大的訊息也是如此。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**关闭超时 (hh:mmss)**|指定時間值，表示可供完成通道關閉作業的時間間隔。 這個值應大於或等於 **System.TimeSpan.Zero**。<br /><br /> 預設值：00:01:00<br /><br /> 最大值：23:59:59|  
    |**收到的最大消息大小 （字节）**|以位元組為單位，指定可在網路上接收的訊息大小上限 (含標頭)。 訊息的大小受限於配置給每個訊息的記憶體數量。 你可以使用此属性来降低受拒绝服务 (DoS) 攻击的可能性。<br /><br /> WCF-WebHttp 适配器在缓冲传输模式中利用 [WebHttpBinding](http://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.aspx) 类与终结点进行通信。 对于缓冲传输模式， [WebHttpBinding.MaxBufferSize](http://msdn.microsoft.com/library/system.servicemodel.webhttpbinding.maxbuffersize.aspx) 属性始终等于此属性的值。<br /><br /> 默认值：65536<br /><br /> 最大值：2147483647|  
  
5.  在 **安全** 选项卡上，定义 WCF WebHttp 发送端口的安全功能。  
  
    |使用此选项|動作|  
    |--------------|----------------|  
    |**安全模式**|指定使用的安全性類型。 有效值包括下列各項：<br /><br /> -   **无**： 在传输过程不保护消息。<br />-   **传输**︰ 使用 HTTPS 传输提供安全性。 使用 HTTPS 來維護 SOAP 訊息的安全。 服务的 X.509 证书的 CA 证书链必须安装到此计算机的“受信任根证书颁发机构”证书存储区中，以便可以使用该服务的证书向发送端口验证该服务。<br />-   **TransportWithMessageCredential**︰ 由 HTTPS 传输提供完整性、 保密性和服务身份验证。 此服務之 X.509 憑證的 CA 憑證鏈結必須安裝在這部電腦的「信任的根憑證授權單位」憑證存放區中，才可以使用此服務的憑證向傳送埠驗證此服務。 傳送埠驗證是由 SOAP 訊息安全性所提供。<br /><br /> 默认值是 **无**。|  
    |**传输客户端凭据类型**|指定执行客户端验证时要使用的凭据类型。 有效值包括：<br /><br /> -   **无**： 无身份验证发生在传输级别。<br />-   **基本**︰ 基本身份验证。 在基本身份验证中，用户名和密码将以明文形式通过网络发送。 你必须创建与凭据对应的域或本地用户帐户。<br />-   **摘要式**︰ 摘要式身份验证。 此身份验证方法与基本身份验证方法相似，不同之处在于密码以哈希值的形式通过网络发送，以增强安全性。 摘要身份验证只可在域控制器运行 Windows Server 操作系统验证的域中使用。 你必须创建与客户端凭据对应的域或本地用户帐户。<br />-   **Ntlm**: NTLM 身份验证。 客户端可只发送凭据而不向此接收位置发送密码。 你必须创建与客户端凭据对应的域或本地用户帐户。<br />-   **Windows**: Windows 集成身份验证。 Windows Communication Foundation 可与 Kerberos 或 NTLM 协商，如果存在域，则首选使用 Kerberos。 如果要使用 Kerberos，则非常重要的一点是让客户端使用服务主体名称 (SPN) 标识该服务。 你必须创建与客户端凭据对应的域或本地用户帐户。<br />-   **证书**︰ 使用客户端证书的客户端身份验证。 必须将用于客户端 X.509 证书的 CA 证书链安装到此计算机的“受信任根证书颁发机构”证书存储中，以便可以针对此接收位置验证客户端。 **注意︰**   **传输客户端凭据类型** 属性必须与匹配的身份验证方案的 IIS 虚拟目录承载该接收位置。 例如，如果该属性设置为“Windows” ，则你还需为此接收位置所在的虚拟目录启用“集成 Windows 验证”  。 相似地，如果将该属性设置为“无” ，则你必须允许匿名访问此接收位置所在的虚拟目录。 <br /><br /> 默认值为“Windows” 。|  
    |**客户端证书的指纹**|指定用于向终结点验证此发送端口的 X.509 证书的指纹。 你可以通过导航到选择指纹 **我** 将存储在 **当前用户** 位置与 **浏览** 按钮。 **注意︰**  必须安装到客户端证书 **当前用户** 承载该发送处理程序的用户帐户的位置发送端口。 <br /><br /> 最小长度：0<br /><br /> 最大長度：40<br /><br /> 預設為空字串。|  
    |**服务证书的指纹**|指定 X.509 憑證的指紋，用於驗證此傳送埠傳送訊息至其中的端點。 你可以选择导航到的指纹 **其他人** 将存储在 **本地计算机** 位置与 **浏览** 按钮。<br /><br /> 最小長度：00<br /><br /> 最大長度：40<br /><br /> 預設為空字串。|  
    |**用户名凭据**|指定用來傳送訊息的認證。 你可以通过单击指定属性 **编辑** 按钮。 你必须设置凭据，如果你选择 **用户名** 选项 **消息客户端凭据类型**。<br /><br /> 默认值是 **不使用单一登录**。|  
    |**使用 ACS 服务标识**|适用于[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]和 BizTalk Server 2013。 <br /><br />选择此复选框，然后单击 **编辑** 并提供以下值，以使用 Service Bus 进行身份验证。 这是必需的仅当服务总线调用 REST 接口的相关实体。<br /><br /> -   **访问控制服务 STS Uri** – 设置为`https://<Namespace>-sb.accesscontrol.windows.net/`，其中\<命名空间\>是服务总线命名空间。<br />-   **颁发者名称** – 指定的颁发者名称。 此值通常設定為擁有者。<br />-   **颁发者密钥** – 指定的颁发者密钥。|  
    |**服务总线连接信息** | 新开头[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]。<br/><br/>选择使用共享访问签名 (SAS) 或 Service Bus 命名空间的访问控制服务 (ACS)。 <br/><br/>选择一个选项，然后选择 **编辑** 输入的密钥信息︰<br/><br/> - **共享访问签名**： 输入访问密钥名称和访问密钥。 这两个值中列出 [Azure 门户](https://portal.azure.com)。<br/> - **访问控制服务**： 输入 STS URI (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)，颁发者名称和颁发者密钥。 使用 Windows PowerShell 检索这些值中所述[SB 消息适配器](../core/sb-messaging-adapter.md)。 |
  
6.  在 **行为** 选项卡上，配置此发送端口的终结点行为。 

    |使用此选项|执行的操作|  
    |--------------|----------------|  
    | EndpointBehavior | 扩展终结点级别发送请求的方式的 funcionality。 你可以添加执行不同的操作，如的扩展定义的 SOAP 处理行为、 对中的事务，控制与发现功能，指定的时间间隔和使用其他.NET 类。 <br/><br/>右-选择 **EndpointBehavior**, ，和 **将扩展添加**。 此列表显示了可以使用的.NET 类。 |
    
    这与用于 WCF-Custom 发送端口的终结点行为配置相似。 请参阅**WCF 自定义传输属性对话框中，发送，行为**选项卡[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。
  
7.  在 **代理** 选项卡上配置的代理设置 WCF WebHttp 发送端口。 
  
    |使用此选项|执行的操作|  
    |--------------|----------------|  
    |**使用发送处理程序代理设置**|指定此发送端口是否使用承载此发送端口的发送处理程序中的代理设置。<br /><br /> 這是預設值。|  
    |**不使用代理服务器**|指出這個傳送埠是否要使用 Proxy 伺服器。<br /><br /> 預設值為清除核取方塊。|  
    |**使用代理服务器**|指示此发送端口使用中指定的代理服务器 **地址** 属性。<br /><br /> 預設值為清除核取方塊。|  
    |**地址**|指定 Proxy 伺服器的位址。 使用 **https** 或 **http** 根据安全配置的方案。 這個位址後面可以加上冒號和連接埠編號， 例如， http://127.0.0.1:8080.<br /><br /> 此属性，则需要值才 **使用代理** 选择。<br /><br /> 類型：字串<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**用户名称**|指定要用於驗證的使用者名稱。 若使用整合式驗證，則使用者名稱會包括網域，即「網域\使用者名稱」。 如果使用基本或摘要式身份验证，则用户名不包括域\\。 此属性，则需要值才 **使用代理** 选择。 **注意︰**  WCF WebHttp 发送适配器使用代理的基本身份验证。 <br /><br /> 类型：字符串<br /><br /> 最小長度：00<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**密码**|指定要用於驗證的密碼。<br /><br /> 此属性，则需要值才 **使用代理** 选择。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：256<br /><br /> 默认值为空字符串。|  
  
8.  在 **消息** 选项卡上，指定如何将消息发送到的 REST 接口。  
  
    |使用此选项|执行的操作|  
    |--------------|----------------|  
    |**出站 HTTP 标头**|指定在响应消息中标记的 HTTP 标头（如果有）。|  
    |**禁止正文显示谓词**|根据调用 REST 终结点时所用谓词的不同，你可能需要消息负载，也可能不需要。 例如，当使用 GET 或 DELETE 谓词时，你可能不需要消息负载。 但是，若要使用发送端口触发对 REST 终结点的调用，则可能需要使用包含消息负载的虚拟消息。 在将消息发送到 REST 终结点之前，必须从虚拟消息中删除消息负载。 你可以指定为其消息负载必须删除使用的谓词 **禁止显示谓词的正文** 属性。<br /><br /> 例如，如果你想要使用 GET 谓词时删除消息负载，指定为此属性的值 `GET`。|  
  
9. 单击 **确定** 和 **确定** 再次以保存设置。  

## <a name="import-wcf-extensions"></a>导入 WCF 扩展

接收处理程序或发送处理程序中的导入 WCF 扩展︰

1.  在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理，展开[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理，展开**BizTalk 组**，展开**平台设置**，然后展开**适配器**.  

2.  选择 **WCF WebHttp**, ，然后双击选择接收或发送处理程序。  

3. 在常规选项卡，选择 **属性**。 

4. 在 **WCF 扩展**, ，选择 **导入**, ，并浏览到 WCF 扩展配置文件。 

  
## <a name="add-a-proxy-to-the-send-handler"></a>将代理添加到发送处理程序

可以将代理添加到发送端口中或发送处理程序。 如果要在发送端口添加代理，则跳过此部分。

1.  在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，展开[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理，展开**BizTalk 组**，展开**平台设置**，然后展开**适配器**.  
  
2.  选择 **WCF WebHttp**, ，然后选择发送处理程序。  
  
3.  在 **适配器处理程序属性**, 上 **常规** 选项卡上，选择 **属性**。  
  
4.  在 **代理** 选项卡上，执行以下操作。  
  
    |使用|動作|  
    |--------------|----------------|  
    |**使用代理服务器**|指示此发送处理程序是否使用代理服务器。<br /><br /> 預設值為清除核取方塊。|  
    |**地址**|指定 Proxy 伺服器的位址。 使用 **https** 或 **http** 根据安全配置的方案。 這個位址後面可以加上冒號和連接埠編號， 例如， http://127.0.0.1:8080.<br /><br /> 此属性，则需要值才 **使用代理** 选择。<br /><br /> 類型：字串<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**用户名称**|指定要用於驗證的使用者名稱。 若使用整合式或基本驗證，則使用者名稱也包括網域，即「網域\使用者名稱」。 如果使用摘要式身份验证，则用户名不包括域\\。<br /><br /> 此属性，则需要值才 **使用代理** 选择。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
    |**密码**|指定要用於驗證的密碼。<br /><br /> 此属性，则需要值才 **使用代理** 选择。<br /><br /> 類型：字串<br /><br /> 最小長度：00<br /><br /> 最大長度：256<br /><br /> 預設為空字串。|  
  
5.  单击 **确定** 直到退出所有对话框。  
   
## <a name="see-also"></a>另請參閱  
[SB 消息适配器](../core/sb-messaging-adapter.md)

[使用适配器](../core/using-adapters.md)

[WCF 适配器概述](../core/what-are-the-wcf-adapters.md)
