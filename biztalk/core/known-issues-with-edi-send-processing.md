---
title: 已知问题的 EDI 发送处理 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 1325dcd9-5dbb-48bb-b5a3-1502d1424d4e
caps.latest.revision: 31
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: fbebfa213aa125252a8c58e246df376e2a36527d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22263309"
---
# <a name="known-issues-with-edi-send-processing"></a><span data-ttu-id="9288b-102">已知的问题的 EDI 发送处理</span><span class="sxs-lookup"><span data-stu-id="9288b-102">Known Issues with EDI Send Processing</span></span>
<span data-ttu-id="9288b-103">本主题将介绍在 EDI 发送管道中进行处理时的已知问题。</span><span class="sxs-lookup"><span data-stu-id="9288b-103">This topic describes known issues with processing in the EDI send pipeline.</span></span>  
  
## <a name="x12-implied-decimal-point-causes-length-validation-to-fail"></a><span data-ttu-id="9288b-104">X12 隐含小数点导致长度验证失败</span><span class="sxs-lookup"><span data-stu-id="9288b-104">X12 Implied Decimal Point Causes Length Validation to Fail</span></span>  
 <span data-ttu-id="9288b-105">**症状**</span><span class="sxs-lookup"><span data-stu-id="9288b-105">**Symptom**</span></span>  
  
 <span data-ttu-id="9288b-106">当 EDI 发送管道将中间 XML 中的十进制数值转换为传出 EDI 交换中以 Nn 格式表示的数值时，XML 交换的长度验证将失败。</span><span class="sxs-lookup"><span data-stu-id="9288b-106">When the EDI send pipeline converts a base-10 numeric value in the intermediate XML to a number in the format Nn in the outgoing EDI interchange, the XML interchange fails length validation.</span></span>  
  
 <span data-ttu-id="9288b-107">**可能的原因**</span><span class="sxs-lookup"><span data-stu-id="9288b-107">**Possible Cause**</span></span>  
  
 <span data-ttu-id="9288b-108">当序列化 X12 编码的 EDI 交换时，EDI 发送管道将始终把十进制数值转换为带有隐含小数点的以 Nn 格式表示的数值。</span><span class="sxs-lookup"><span data-stu-id="9288b-108">When serializing an X12-encoded EDI interchange, the EDI send pipelines will always convert a base-10 numeric value to a number in the format Nn with an implied decimal point.</span></span> <span data-ttu-id="9288b-109">例如，如果中间 XML 文件中有一个值 12.34，则将此值指定为数字类型 N2 时，EDI 发送管道将把 EDI 交换中的值转换为 1234。</span><span class="sxs-lookup"><span data-stu-id="9288b-109">For example, if there is a value in the intermediate XML file of 12.34, the EDI send pipeline will convert it in the EDI interchange to 1234 when it is specified as numeric type N2.</span></span> <span data-ttu-id="9288b-110">十进制数值将比以格式 Nn 表示的数值长一位。</span><span class="sxs-lookup"><span data-stu-id="9288b-110">The length of the base-10 numeric value will be one greater than the length of the number in the format Nn.</span></span> <span data-ttu-id="9288b-111">如果以格式 Nn 表示的数值的长度是最大值，则中间 XML 中的十进制数值将无法通过 XML 长度验证。</span><span class="sxs-lookup"><span data-stu-id="9288b-111">If the length of the number in the format Nn is the maximum, the base-10 numeric value in the intermediate XML could fail XML length validation.</span></span>  
  
 <span data-ttu-id="9288b-112">只有 X12 编码的交换才存在此问题。</span><span class="sxs-lookup"><span data-stu-id="9288b-112">This is only an issue with X12-encoded interchanges.</span></span>  
  
 <span data-ttu-id="9288b-113">**解决方法**</span><span class="sxs-lookup"><span data-stu-id="9288b-113">**Resolution**</span></span>  
  
 <span data-ttu-id="9288b-114">对 XML 数值的最大长度值上加 1。</span><span class="sxs-lookup"><span data-stu-id="9288b-114">Add a value of 1 to the maximum length value of the XML number.</span></span>  
  
## <a name="control-numbers-may-need-to-be-reset-archived-or-purged"></a><span data-ttu-id="9288b-115">控制编号可能需要重置、存档或清除</span><span class="sxs-lookup"><span data-stu-id="9288b-115">Control Numbers May Need to Be Reset, Archived, or Purged</span></span>  
 <span data-ttu-id="9288b-116">如果任何控制编号达到字段的长度限制，则 BizTalk Server 将引发一个错误并挂起交换。</span><span class="sxs-lookup"><span data-stu-id="9288b-116">If any control number reaches the length restriction limit for the field, BizTalk Server will raise an error and suspend the interchange.</span></span> <span data-ttu-id="9288b-117">您必须重置在“EDI 属性”或“EDI 全局属性”对话框中输入的控制编号。</span><span class="sxs-lookup"><span data-stu-id="9288b-117">You will have to reset the control number entered in the EDI Properties or EDI Global Properties dialog box.</span></span>  
  
 <span data-ttu-id="9288b-118">控制编号保存在 BizTalk MessageBox 数据库的 dbo.EdiSequenceNumbers 表中。</span><span class="sxs-lookup"><span data-stu-id="9288b-118">Control numbers are saved in the dbo.EdiSequenceNumbers table of the BizTalk MessageBox database.</span></span> <span data-ttu-id="9288b-119">您应根据情况从表中清除控制编号或存档控制编号来管理此数据库。</span><span class="sxs-lookup"><span data-stu-id="9288b-119">You should manage this database table by purging the control numbers from the table or archiving the control numbers, as appropriate.</span></span>  
  
 <span data-ttu-id="9288b-120">此外可以通过选择启用自动重置的控制编号**重置为下限超出界限时**在 EDI 属性对话框中。</span><span class="sxs-lookup"><span data-stu-id="9288b-120">You can also enable automatic reset of control numbers by selecting **Reset to lower limit when out of bound** in the EDI Properties dialog box.</span></span>  
  
## <a name="the-data-element-name-in-a-context-property-name-contains-an-underscore-not-a-period"></a><span data-ttu-id="9288b-121">上下文属性名称中的数据元素名包含下划线，而不是句点</span><span class="sxs-lookup"><span data-stu-id="9288b-121">The Data Element Name in a Context Property Name Contains an Underscore, Not a Period</span></span>  
 <span data-ttu-id="9288b-122">EDI 段中的数据元素名（例如 UNB2.1，它是 UNB2 发送方段的标识字段）包含句点。</span><span class="sxs-lookup"><span data-stu-id="9288b-122">The name of a data element within an EDI segment contains a period, for example, UNB2.1, which is the identification field for the UNB2 Sender segment.</span></span> <span data-ttu-id="9288b-123">不过，如果数据元素名是 EDI 上下文属性的组成部分（例如，在发送端口的筛选器表达式中），则会用下划线代替句点。</span><span class="sxs-lookup"><span data-stu-id="9288b-123">However, when the data element name is included as part of an EDI context property (for example, in the filter expression of a send port), the period is replaced with an underscore.</span></span> <span data-ttu-id="9288b-124">例如，发送方标识数据元素的上下文属性是 EDI.UNB2_1 而非 EDI.UNB2.1。</span><span class="sxs-lookup"><span data-stu-id="9288b-124">For example, the context property for the Sender Identification data element is EDI.UNB2_1, not EDI.UNB2.1.</span></span> <span data-ttu-id="9288b-125">这是因为上下文属性名称中不支持使用句点。</span><span class="sxs-lookup"><span data-stu-id="9288b-125">The reason for this is that a period is not supported in a context property name.</span></span>  
  
## <a name="context-property-values-from-data-elements-must-not-contain-leading-or-trailing-spaces-in-filter-expressions"></a><span data-ttu-id="9288b-126">数据元素的上下文属性值不能在筛选器表达式中包含前导或尾部空格</span><span class="sxs-lookup"><span data-stu-id="9288b-126">Context Property Values from Data Elements Must Not Contain Leading or Trailing Spaces in Filter Expressions</span></span>  
 <span data-ttu-id="9288b-127">如果 EDI 交换的信封中的数据元素包含前导或尾部空格，接收管道将升级包含该数据元素的值的上下文属性并从该上下文属性中删除前导或尾部空格。</span><span class="sxs-lookup"><span data-stu-id="9288b-127">If a data element in the envelope of an EDI interchange contains leading or trailing spaces, and a receive pipeline promotes a context property with the value of that data element, the receive pipeline will remove the leading or trailing spaces from the context property.</span></span> <span data-ttu-id="9288b-128">因此，如果您创建了一个带有该上下文属性的筛选器表达式，则必须为该属性输入一个不含前导或尾部空格的值。</span><span class="sxs-lookup"><span data-stu-id="9288b-128">As a result, if you create a filter expression with that context property, you must enter a value for the property that does not contain leading or trailing spaces.</span></span> <span data-ttu-id="9288b-129">如果您的筛选器表达式包含前导或尾部空格，则在使用不包含前导或尾部空格的该上下文属性的匹配中，无法解析筛选器表达式。</span><span class="sxs-lookup"><span data-stu-id="9288b-129">If your filter expression were to contain leading or trailing spaces, the filter expression would not resolve in a match with the context property, which will not contain leading or trailing spaces.</span></span>  
  
## <a name="default-party-as-interchange-receiver-properties-for-preserved-interchange-will-cause-the-send-pipeline-to-fail"></a><span data-ttu-id="9288b-130">保留交换的默认“参与方作为交换接收方”属性将导致发送管道出错</span><span class="sxs-lookup"><span data-stu-id="9288b-130">Default Party as Interchange Receiver Properties for Preserved Interchange Will Cause the Send Pipeline to Fail</span></span>  
 <span data-ttu-id="9288b-131">如果 BizTalk Server 接收到一个应保留的批处理交换（使用出错时挂起的交换），如果“参与方作为交换接收方”的属性设置为默认值，则订阅该交换的发送管道将出错。</span><span class="sxs-lookup"><span data-stu-id="9288b-131">If BizTalk Server receives a batched interchange that should be preserved (with the interchange suspended on error), the send pipeline that subscribes to the interchange will fail if the properties for the party as interchange receiver are set to their default values.</span></span> <span data-ttu-id="9288b-132">这些属性，比如 ISA5、发送方限定符、ISA6、发送方标识符必须设置为有效值。</span><span class="sxs-lookup"><span data-stu-id="9288b-132">These properties, such as ISA5, Sender qualifier, and ISA6, Sender identifier, must be set to valid values.</span></span> <span data-ttu-id="9288b-133">BizTalk Server 将发布一个错误，指示该消息因参与方配置无效而不能序列化。</span><span class="sxs-lookup"><span data-stu-id="9288b-133">BizTalk Server will post an error indicating that the message could not be serialized due to an invalid party configuration.</span></span> <span data-ttu-id="9288b-134">此处理是不正确的，因为保留交换在其标头中具有必需的配置设置，比如发送方限定符和发送方标识符。</span><span class="sxs-lookup"><span data-stu-id="9288b-134">This processing is not correct, because a preserved interchange has the required configuration settings, such as Sender qualifier and Sender identifier, in its headers.</span></span>  
  
## <a name="the-decimal-notation-in-a-message-will-be-changed-if-the-send-side-party-or-global-setting-specifies-a-different-decimal-notation"></a><span data-ttu-id="9288b-135">消息中的十进制符号在发送方或全局设置指定其他十进制符号时发生更改</span><span class="sxs-lookup"><span data-stu-id="9288b-135">The Decimal Notation in a Message Will Be Changed If the Send-Side Party or Global Setting Specifies a Different Decimal Notation</span></span>  
 <span data-ttu-id="9288b-136">如果某一交换中使用的十进制符号不同于由 UNA3 参与方属性为传出消息指定的十进制符号，则当 BizTalk Server 序列化该交换以进行发送时将更改该交换的信封中使用的十进制符号。</span><span class="sxs-lookup"><span data-stu-id="9288b-136">If the decimal notation used in an interchange is different from the decimal notation specified for outgoing messages by the UNA3 party property, BizTalk Server will change the decimal notation used in the envelope of the interchange when it serializes it for sending.</span></span> <span data-ttu-id="9288b-137">如果使用 UNA3 全局属性而不是 UNA3 参与方属性，情况与此相同。</span><span class="sxs-lookup"><span data-stu-id="9288b-137">This will also be the case if the UNA3 global property is used instead than the UNA3 party property.</span></span> <span data-ttu-id="9288b-138">例如，如果传入消息中使用的十进制符号是一个句点，且用于确定传出消息的十进制符号的 UNA3 参与方属性或 UNA3 全局属性指定了一个逗号，则 BizTalk Server 将把传出消息中的十进制符号更改为逗号。</span><span class="sxs-lookup"><span data-stu-id="9288b-138">For example, if the decimal notation used in an incoming message is a period, and the UNA3 party property or the UNA3 global property that determines the decimal notation of an outgoing message specifies a comma, BizTalk Server will change the decimal notation in the outgoing message to a comma.</span></span>  
  
## <a name="edi-send-pipelines-cannot-be-executed-from-within-an-orchestration"></a><span data-ttu-id="9288b-139">无法从业务流程内执行 EDI 发送管道</span><span class="sxs-lookup"><span data-stu-id="9288b-139">EDI Send Pipelines Cannot Be Executed from within an Orchestration</span></span>  
 <span data-ttu-id="9288b-140">在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中，您一般可在业务流程的表达式形状中执行发送管道。</span><span class="sxs-lookup"><span data-stu-id="9288b-140">In [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], you can normally execute send pipelines within an Expression shape in an orchestration.</span></span> <span data-ttu-id="9288b-141">不过，此形状将不能与 EDISend 管道或 AS2EdiSend 管道一起使用。</span><span class="sxs-lookup"><span data-stu-id="9288b-141">However, this will not work with the EDISend pipeline or the AS2EdiSend pipeline.</span></span> <span data-ttu-id="9288b-142">这些管道必须在发送端口内执行。</span><span class="sxs-lookup"><span data-stu-id="9288b-142">These pipelines must be executed within a send port.</span></span> <span data-ttu-id="9288b-143">如果您尝试在业务流程的表达式形状中执行 EDISend 管道或 AS2EdiSend 管道，则该管道将不绑定到发送端口，且消息将被挂起。</span><span class="sxs-lookup"><span data-stu-id="9288b-143">If you attempt to execute the EDISend pipeline or the AS2EdiSend pipeline in an Expression shape in an orchestration, the pipeline will not be bound to a send port, and the message will be suspended.</span></span>  
  
## <a name="biztalk-edi-application-must-not-be-modified"></a><span data-ttu-id="9288b-144">不得修改 BizTalk EDI 应用程序</span><span class="sxs-lookup"><span data-stu-id="9288b-144">BizTalk EDI Application Must Not Be Modified</span></span>  
 <span data-ttu-id="9288b-145">不得修改或删除 BizTalk EDI 应用程序中的项目。</span><span class="sxs-lookup"><span data-stu-id="9288b-145">Artifacts in the BizTalk EDI Application must not be modified or deleted.</span></span> <span data-ttu-id="9288b-146">如果修改了此应用程序，则您将无法通过取消配置和重新配置 EDI 及 AS2 功能来恢复原始应用程序。</span><span class="sxs-lookup"><span data-stu-id="9288b-146">If this application is modified, there is no way for you to revert to the original application by unconfiguring and reconfiguring the EDI and AS2 features.</span></span>  
  
## <a name="using-the-default-row-in-the-functional-group-header-grid-can-result-in-a-message-type-mismatch-between-the-interchange-header-and-the-group-header"></a><span data-ttu-id="9288b-147">使用功能组标头网格中的默认行可导致交换标头和组标头之间的消息类型不匹配</span><span class="sxs-lookup"><span data-stu-id="9288b-147">Using the Default Row in the Functional Group Header Grid can Result in a Message-Type Mismatch Between the Interchange Header and the Group Header</span></span>  
 <span data-ttu-id="9288b-148">如果传出 EDIFACT 编码的交换的 UNH2.1 值与 UNG 和 UNH 段定义页的网格中的“对于消息类型 UNH2.1”的值不匹配，则在消息中输入的 UNG1 值与 UNH2.1 的值可能不对应。</span><span class="sxs-lookup"><span data-stu-id="9288b-148">If the value of UNH2.1 of an outgoing EDIFACT-encoded interchange does not match the value of "For message type UNH2.1" in the grid in the UNG and UNH Segment Definition page, the value of UNG1 entered in the message may not correspond to the value of UNH2.1.</span></span>  
  
 <span data-ttu-id="9288b-149">出现这种现象的原因是，BizTalk 将以网格的默认行中的 UNG1 值填充该消息，即使该消息与默认行的 UNH2.1 元素不匹配。</span><span class="sxs-lookup"><span data-stu-id="9288b-149">This can occur because BizTalk will populate the message with the values for UNG1 in the default row of the grid even if the message does not have a match with the UNH2.1 element of that default row.</span></span>  
  
 <span data-ttu-id="9288b-150">如果传出 X12 编码的交换的 ST1 值与 GS 和 ST 段定义页的网格中的“对于 ST1”的值不匹配，则根据 ST1 的值动态确定消息中输入的 GS1 值。</span><span class="sxs-lookup"><span data-stu-id="9288b-150">If the value of ST1 of an outgoing X12-encoded interchange does not match the value of “For ST1” in the grid in the GS and ST Segment Definition page, the value of GS1 entered in the message will be dynamically determined based on the value of ST1.</span></span>  
  
## <a name="invalid-character-in-data-element"></a><span data-ttu-id="9288b-151">数据元素中有无效字符</span><span class="sxs-lookup"><span data-stu-id="9288b-151">Invalid Character in Data Element</span></span>  
 <span data-ttu-id="9288b-152">**症状**</span><span class="sxs-lookup"><span data-stu-id="9288b-152">**Symptom**</span></span>  
  
 <span data-ttu-id="9288b-153">使用 EDI 发送管道发送 EDI 交换时，可能会在应用程序事件日志中收到错误，指出“数据元素中有无效字符”。</span><span class="sxs-lookup"><span data-stu-id="9288b-153">When sending an EDI interchange using the EDI send pipeline, you may receive an error in the application event log stating that there is ‘Invalid character in data element’.</span></span>  
  
 <span data-ttu-id="9288b-154">**可能的原因**</span><span class="sxs-lookup"><span data-stu-id="9288b-154">**Possible Cause**</span></span>  
  
 <span data-ttu-id="9288b-155">如果负载数据中包含的字符还用作分隔符，可能出现此错误。</span><span class="sxs-lookup"><span data-stu-id="9288b-155">This error can occur if a character contained in the payload data is also used as a separator.</span></span> <span data-ttu-id="9288b-156">例如，如果你使用: 为组件分隔符，但负载数据的字符还包含: 字符。</span><span class="sxs-lookup"><span data-stu-id="9288b-156">For instance, if you are using the ‘:’ character as the component separator but the payload data also contains the ‘:’ character.</span></span>  
  
 <span data-ttu-id="9288b-157">只有 X12 编码的交换才存在此问题。</span><span class="sxs-lookup"><span data-stu-id="9288b-157">This is only an issue with X12-encoded interchanges.</span></span>  
  
 <span data-ttu-id="9288b-158">**解决方法**</span><span class="sxs-lookup"><span data-stu-id="9288b-158">**Resolution**</span></span>  
  
 <span data-ttu-id="9288b-159">使用**替换负载中的分隔符**中设置**ISA 段定义**应替换为要指定在负载数据中找到分隔符字符的 EDI 方属性页发送交换时，请指定替换字符。</span><span class="sxs-lookup"><span data-stu-id="9288b-159">Use the **Replace separators in payload with** setting in the **ISA Segment Definition** page of the EDI party properties to specify that separator characters found in the payload data should be replaced by the specified replacement character when sending the interchange.</span></span>  
  
 <span data-ttu-id="9288b-160">例如，选择**替换负载中的分隔符**并输入 &#124; 字符将替换出现的与负载数据中的分隔符的任何 &#124; 字符时的交换是使用 EDI 发送管道发送。</span><span class="sxs-lookup"><span data-stu-id="9288b-160">For example, selecting **Replace separators in payload with** and entering the ‘&#124;’ character will replace any occurrence of a separator character in the payload data with the ‘&#124;’ character when the interchange is sent using the EDI send pipeline.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9288b-161">另请参阅</span><span class="sxs-lookup"><span data-stu-id="9288b-161">See Also</span></span>  
 <span data-ttu-id="9288b-162">[EDI 处理的已知的问题](../core/known-issues-with-edi-processing.md) </span><span class="sxs-lookup"><span data-stu-id="9288b-162">[Known Issues with EDI Processing](../core/known-issues-with-edi-processing.md) </span></span>  
 <span data-ttu-id="9288b-163">[BizTalk Server 将 EDI 消息的发送](../core/how-biztalk-server-sends-edi-messages.md) </span><span class="sxs-lookup"><span data-stu-id="9288b-163">[How BizTalk Server Sends EDI Messages](../core/how-biztalk-server-sends-edi-messages.md) </span></span>  
 [<span data-ttu-id="9288b-164">演练 (X12)： 发送 EDI 交换</span><span class="sxs-lookup"><span data-stu-id="9288b-164">Walkthrough (X12): Sending EDI Interchanges</span></span>](../core/walkthrough-x12-sending-edi-interchanges.md)