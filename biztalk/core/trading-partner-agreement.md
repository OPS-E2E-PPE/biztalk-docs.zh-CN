---
title: 贸易合作伙伴协议 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e40a3847-ee36-4a75-ab50-def9b0caf07e
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6d86151e43b6a441b5ce4c48f4ba5ec2b0f29005
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65313405"
---
# <a name="trading-partner-agreement"></a><span data-ttu-id="5c7bd-102">贸易合作伙伴协议</span><span class="sxs-lookup"><span data-stu-id="5c7bd-102">Trading Partner Agreement</span></span>
## <a name="overview"></a><span data-ttu-id="5c7bd-103">概述</span><span class="sxs-lookup"><span data-stu-id="5c7bd-103">Overview</span></span>
<span data-ttu-id="5c7bd-104">贸易合作伙伴协议 (TPA) 被指通过特定 B2B 协议处理消息的两个贸易合作伙伴之间的权威且绑定协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-104">A Trading Partner Agreement (TPA) is defined as a definitive and binding agreement between two trading partners for transacting messages over a specific B2B Protocol.</span></span> <span data-ttu-id="5c7bd-105">协议将来自两个合作伙伴的特定业务配置文件的组合在一起的常见双向消息处理属性。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-105">Agreements bring together common bi-directional message processing properties from specific business profiles of both partners.</span></span> <span data-ttu-id="5c7bd-106">它是用于管理两个贸易合作伙伴之间业务事务的所有方面的全面集合。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-106">It is a comprehensive collection of all aspects governing the business transaction between the two trading partners.</span></span> <span data-ttu-id="5c7bd-107">TPA 通常源自每个合作伙伴，能够自定义并覆盖所需的设置的配置文件。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-107">A TPA is typically derived from the profiles of each partner, with the ability to customize and override the required settings.</span></span>  
  
 <span data-ttu-id="5c7bd-108">简言之，TPA 是一种了解两个业务配置文件使用特定的消息编码协议或特定的传输协议交换 B2B 消息彼此之间。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-108">In simpler terms, a TPA is an understanding between two business profiles to use a specific message encoding protocol or a specific transport protocol while exchanging B2B messages with each other.</span></span>  
  
 <span data-ttu-id="5c7bd-109">![合作伙伴配置文件与协议](../core/media/tradingpartneragreement.gif "TradingPartnerAgreement")</span><span class="sxs-lookup"><span data-stu-id="5c7bd-109">![Partner profiles with agreements](../core/media/tradingpartneragreement.gif "TradingPartnerAgreement")</span></span>  
  
 <span data-ttu-id="5c7bd-110">在上图中，没有 Fabrikam 的"发运"和"发票"配置文件和 Contoso 之间分别向使用 X12 编码的业务消息的协议 (**编码协议**) 和 AS2 传输交换消息 (**传输协议**)。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-110">In the preceding illustration, there’s an agreement between the “Shipping” and “Invoice” profiles of Fabrikam and Contoso respectively to use the X12 encoding for business messages (**encoding agreement**) and AS2 transport for exchanging messages (**transport agreement**).</span></span> <span data-ttu-id="5c7bd-111">可以有各种业务配置文件之间的许多此类协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-111">There can be many such agreements between various business profiles.</span></span> <span data-ttu-id="5c7bd-112">例如，可以是要使用的 EDIFACT 消息编码标准的"付款"和"发票"配置文件之间的协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-112">For example, there can be an agreement between the “Payments” and “Invoice” profiles to use the EDIFACT message encoding standard.</span></span> <span data-ttu-id="5c7bd-113">所有此类为所有配置文件的协议对贸易合作伙伴构成**合作关系**之间这两个贸易合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-113">All such agreements for all the profiles for a pair of trading partners constitute a **Partnership** between the two trading partners.</span></span>  
  
## <a name="bi-directional-agreements"></a><span data-ttu-id="5c7bd-114">双向协议</span><span class="sxs-lookup"><span data-stu-id="5c7bd-114">Bi-directional agreements</span></span>  
 <span data-ttu-id="5c7bd-115">两个业务配置文件之间的每个协议是双向的。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-115">Each agreement between two business profiles is bi-directional.</span></span> <span data-ttu-id="5c7bd-116">例如，"发运"和"发票"业务配置文件之间的协议将包含用于处理消息属性：</span><span class="sxs-lookup"><span data-stu-id="5c7bd-116">For example, the agreement between “Shipping” and “Invoice” business profiles will contain properties to process messages:</span></span>  
  
- <span data-ttu-id="5c7bd-117">收到的"发票"配置文件中的"发运"配置文件和</span><span class="sxs-lookup"><span data-stu-id="5c7bd-117">Received by “Shipping” profile from “Invoice” profile, and</span></span>  
  
- <span data-ttu-id="5c7bd-118">发送到"发票"配置文件的"发运"配置文件</span><span class="sxs-lookup"><span data-stu-id="5c7bd-118">Sent by “Shipping” profile to “Invoice” profile</span></span>  
  
  <span data-ttu-id="5c7bd-119">更简单的说，双向协议是两个单向协议的集合。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-119">In simpler terms, a bi-directional agreement is a collection of two one-way agreements.</span></span> <span data-ttu-id="5c7bd-120">一个单向协议可被视为一系列定义消息事务如何从参与方 A 的参与方 b。 发生的属性其他单向协议可被视为一系列属性用于定义如何消息事务发生从参与方 B 到参与方 a。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-120">One one-way agreement can be considered as a collection of properties that define how message transaction happens from party A to party B. The other one-way agreement can be considered as a collection of properties that define how message transaction happens from party B to party A.</span></span>  
  
## <a name="considerations-when-defining-an-agreement"></a><span data-ttu-id="5c7bd-121">定义一个协议时的注意事项</span><span class="sxs-lookup"><span data-stu-id="5c7bd-121">Considerations when defining an agreement</span></span>  
 <span data-ttu-id="5c7bd-122">创建贸易合作伙伴协议时，必须考虑以下几点：</span><span class="sxs-lookup"><span data-stu-id="5c7bd-122">You must consider the following points while creating a Trading Partner Agreement:</span></span>  
  
-   <span data-ttu-id="5c7bd-123">对于交换 B2B 消息与每个其他的两个业务配置文件，定义一个消息编码协议是必需的。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-123">For two business profiles that exchange B2B messages with each other, defining a message encoding agreement is mandatory.</span></span> <span data-ttu-id="5c7bd-124">部门可以选择他们想要使用 AS2 协议传输消息的情况下，才有 AS2 协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-124">The divisions may choose to have an AS2 agreement only if they want to use the AS2 protocol to transfer messages.</span></span> <span data-ttu-id="5c7bd-125">例如，如果业务部门选择通过电子邮件传输消息，则不需要 AS2 协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-125">For example, an AS2 agreement is not required if the business divisions choose to transfer messages over e-mail.</span></span>  
  
-   <span data-ttu-id="5c7bd-126">如果两个业务配置文件支持 X12 和 EDIFACT 编码，并且这两个业务配置文件同意使用这两种编码协议交换消息时，应单独针对每个协议的协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-126">If two business profiles support both X12 and EDIFACT encoding and both business profiles agree to use both encoding protocols while exchanging messages, there should be separate agreements for each protocol.</span></span> <span data-ttu-id="5c7bd-127">应该有一个协议适用于 X12 协议和适用于 EDIFACT 协议的一个协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-127">There should be one agreement for X12 protocol and one agreement for EDIFACT protocol.</span></span> <span data-ttu-id="5c7bd-128">不能有可用于这两种协议的单个协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-128">There cannot be a single agreement that can be used for both protocols.</span></span>  
  
-   <span data-ttu-id="5c7bd-129">为 X12 和 EDIFACT 消息编码协议和传输协议 （适用于 AS2) 不能为一个协议的一部分。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-129">The encoding agreement for X12 and EDIFACT messages and transport agreement (for AS2) cannot be part of one agreement.</span></span> <span data-ttu-id="5c7bd-130">必须创建两个单独的协议。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-130">You must create separate agreements for both.</span></span>  
  
## <a name="global-or-fallback-agreement"></a><span data-ttu-id="5c7bd-131">全局或后备协议</span><span class="sxs-lookup"><span data-stu-id="5c7bd-131">Global or fallback agreement</span></span>  
 <span data-ttu-id="5c7bd-132">特定的业务组织可能选择 B2B 处理机制，而不区分特定 B2B 消息传递中涉及的合作伙伴的单数集。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-132">Certain business organizations may choose to have a singular set of B2B processing mechanism without differentiating on the partners involved in specific B2B messaging.</span></span> <span data-ttu-id="5c7bd-133">实际上，这类业务组织具有只是一个常见 B2B 协议设置与所有其他贸易合作伙伴共享。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-133">In effect, such business organizations have just one common B2B protocol setting that is shared with all other trading partners.</span></span> <span data-ttu-id="5c7bd-134">此外，因为此类组织不需要具有特定设置的特定合作伙伴，为贸易合作伙伴本身而不是针对贸易业务配置文件定义 B2B 协议设置。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-134">Also, because such organizations do not need to have specific settings for specific partners, the B2B protocol settings are defined for the trading partner itself and not for a trading business profile.</span></span> <span data-ttu-id="5c7bd-135">在中[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]，这样的业务部门反映为**全球贸易合作伙伴**。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-135">In [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)], such business organizations are reflected as **Global Trading Partners**.</span></span> <span data-ttu-id="5c7bd-136">需要表示为全球贸易合作伙伴业务交易其他企业使用称为全球贸易合作伙伴协议**全球贸易合作伙伴协议**。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-136">Other businesses that need to trade with a business represented as a global trading partner use agreements with the global trading partner that are called **Global Trading Partner Agreement**.</span></span> <span data-ttu-id="5c7bd-137">这些协议符合为全球贸易合作伙伴定义的消息编码和协议设置。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-137">These agreements conform to the message encoding and protocol settings defined for the global trading partner.</span></span>  
  
 <span data-ttu-id="5c7bd-138">当两个贸易合作伙伴之间的特定于配置文件的协议设置，没有制订一个贸易合作伙伴协议时，在全局级别定义的设置也可以是在方案中有用。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-138">The settings defined at the global level can also be useful in scenarios when the profile-specific protocol settings between two trading partners do not formulate a trading partner agreement.</span></span> <span data-ttu-id="5c7bd-139">在此方案中，组织承载[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]可以使用为合作伙伴定义的协议设置来制订与其他贸易业务配置文件。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-139">In this scenario, the organization hosting [!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)] can use the protocol settings defined for the partner to formulate an agreement with another trading business profile.</span></span> <span data-ttu-id="5c7bd-140">在这种情况下，抵达的协议使用的全球协议设置定义的名为合作伙伴**备选贸易合作伙伴协议**。</span><span class="sxs-lookup"><span data-stu-id="5c7bd-140">In such cases, the agreement arrived at using the global protocol settings defined for the partner is called the **Fallback Trading Partner Agreement**.</span></span>  

## <a name="learn-next"></a><span data-ttu-id="5c7bd-141">接下来了解</span><span class="sxs-lookup"><span data-stu-id="5c7bd-141">Learn next</span></span>

[<span data-ttu-id="5c7bd-142">将所有组合在一起：定义贸易合作伙伴管理解决方案</span><span class="sxs-lookup"><span data-stu-id="5c7bd-142">Putting it all together: Defining a trading partner management solution</span></span>](../core/putting-it-all-together-defining-a-trading-partner-management-solution.md)
  
## <a name="see-also"></a><span data-ttu-id="5c7bd-143">请参阅</span><span class="sxs-lookup"><span data-stu-id="5c7bd-143">See Also</span></span>  
 [<span data-ttu-id="5c7bd-144">贸易合作伙伴管理解决方案的构建基块</span><span class="sxs-lookup"><span data-stu-id="5c7bd-144">Building Blocks of a Trading Partner Management Solution</span></span>](../core/building-blocks-of-a-trading-partner-management-solution.md)