---
title: 如何将虚拟目录添加到应用程序 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- virtual directories
- managing [applications], virtual directories
- applications, virtual directories
- virtual directories, applications
ms.assetid: a5726696-bd65-49d9-8814-a078afe8c067
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26627387a65b19cef8146cee8b91b2a7a0919059
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22248877"
---
# <a name="how-to-add-a-virtual-directory-to-an-application"></a><span data-ttu-id="ecde8-102">如何向应用程序添加虚拟目录</span><span class="sxs-lookup"><span data-stu-id="ecde8-102">How to Add a Virtual Directory to an Application</span></span>
<span data-ttu-id="ecde8-103">本主题介绍如何使用 BTSTask 命令行工具向 BizTalk 应用程序添加虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="ecde8-103">This topic describes how to use the BTSTask command-line tool to add a virtual directory to a BizTalk application.</span></span> <span data-ttu-id="ecde8-104">此选项在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理控制台中不可用。</span><span class="sxs-lookup"><span data-stu-id="ecde8-104">This option is not available in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="ecde8-105">如果您编写了一个自定义 Web Services 或创建了一个用于与 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 连接的 ASP.NET 网站，可能就需要添加虚拟目录，并且希望通过应用程序部署虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="ecde8-105">You might want to add a virtual directory if you have written a custom Web service or created an ASP.NET Web site for interfacing with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and want to deploy the virtual directory with the application.</span></span>  
  
 <span data-ttu-id="ecde8-106">另一种方法添加到应用程序的虚拟目录是虚拟目录指定的 SOAP 或 HTTP 接收位置，如中所述[如何配置 HTTP 接收位置](../core/how-to-configure-an-http-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="ecde8-106">Another way to add a virtual directory to an application is by specifying a virtual directory for a SOAP or HTTP receive location, as described in [How to Configure an HTTP Receive Location](../core/how-to-configure-an-http-receive-location.md).</span></span> <span data-ttu-id="ecde8-107">在所有情况下，虚拟目标都添加到 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="ecde8-107">In all cases, the virtual directory is added to the BizTalk Management database.</span></span> <span data-ttu-id="ecde8-108">通过使用命令行添加虚拟目录，它还会显示[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，在添加到应用程序的资源文件夹和应用程序时使用中的项目的列表中[ListApp 命令](../core/listapp-command.md)。</span><span class="sxs-lookup"><span data-stu-id="ecde8-108">When you add a virtual directory by using the command line, it also displays in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, in the Resources folder of the application to which you added it as well as the list of artifacts in the application when you use the [ListApp Command](../core/listapp-command.md).</span></span> <span data-ttu-id="ecde8-109">如果您稍后导出该应用程序，然后又将其导入到另一个 BizTalk 组，则虚拟目录显示在“资源”文件夹中。</span><span class="sxs-lookup"><span data-stu-id="ecde8-109">If you later export the application and then import it into another BizTalk group, the virtual directory displays in the Resources folder.</span></span>  
  
 <span data-ttu-id="ecde8-110">向应用程序中添加虚拟目录时，请切记以下几点：</span><span class="sxs-lookup"><span data-stu-id="ecde8-110">When adding a virtual directory to an application, bear in mind the following points:</span></span>  
  
-   <span data-ttu-id="ecde8-111">可以通过指定覆盖选项来覆盖应用程序中已有的虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="ecde8-111">You can overwrite a virtual directory that already exists in the application by specifying the overwrite option.</span></span> <span data-ttu-id="ecde8-112">仅当现有的虚拟目录具有与你想要添加的相同名称时，则需要使用覆盖选项。</span><span class="sxs-lookup"><span data-stu-id="ecde8-112">The overwrite option is required only when the existing virtual directory has the same name as the one you want to add.</span></span> <span data-ttu-id="ecde8-113">如果未指定，和虚拟目录已存在与所添加的相同名称的应用程序中，添加操作将失败。</span><span class="sxs-lookup"><span data-stu-id="ecde8-113">If not specified, and a virtual directory already exists in the application with the same name as the one being added, the add operation will fail.</span></span>  
  
-   <span data-ttu-id="ecde8-114">使用包含 https 的 URL 添加虚拟目录时，必须在指定的 URL 中使用 http，而不是 https。</span><span class="sxs-lookup"><span data-stu-id="ecde8-114">When you add a virtual directory with a URL that contains https, you must use http in the URL that you specify rather than https.</span></span> <span data-ttu-id="ecde8-115">如果使用 https，则添加虚拟目录的操作将失败。</span><span class="sxs-lookup"><span data-stu-id="ecde8-115">If you use https, the operation to add a virtual directory will fail.</span></span> <span data-ttu-id="ecde8-116">即使添加时在 URL 中使用 http，Internet 信息服务元数据库中 URL 的 https 设置仍将有效，而且虚拟目录将正常工作。</span><span class="sxs-lookup"><span data-stu-id="ecde8-116">Even though you add it with http in the URL, the https setting for the URL in the Internet Information Services metabase will be in effect, and the virtual directory will function correctly.</span></span>  
  
-   <span data-ttu-id="ecde8-117">如果添加的是 64 位版本 Web Services 的虚拟目录，而尝试在 32 位计算机上安装包含该虚拟目录的应用程序，则无法安装该虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="ecde8-117">If you add a virtual directory from a 64-bit version of the Web service, and you attempt to install the application that includes the virtual directory on a 32-bit computer, the virtual directory will not be installed.</span></span> <span data-ttu-id="ecde8-118">64 位计算机上必须安装它。</span><span class="sxs-lookup"><span data-stu-id="ecde8-118">It must be installed on a 64-bit computer.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ecde8-119">导入包含虚拟目录的应用程序时，虚拟目录的安全设置是在应用程序导出期间生成 .msi 文件时起作用的那些设置。</span><span class="sxs-lookup"><span data-stu-id="ecde8-119">When you import an application containing a virtual directory, the security settings on the virtual directory are those in effect when the .msi file is generated during application export.</span></span> <span data-ttu-id="ecde8-120">如果要向生产环境中部署应用程序，则在导出应用程序之前，应验证设置满足安全要求。</span><span class="sxs-lookup"><span data-stu-id="ecde8-120">If you are deploying an application into a production environment, before exporting the application, you should verify that the settings meet your security requirements.</span></span>  
>   
>  <span data-ttu-id="ecde8-121">不过，如果目标环境中已经存在虚拟目录，现有虚拟目录的安全设置将生效。</span><span class="sxs-lookup"><span data-stu-id="ecde8-121">If, however, the virtual directory already exists in the destination environment, the security settings on the existing virtual directory will be in effect.</span></span> <span data-ttu-id="ecde8-122">它们不会被更改以匹配您部署的虚拟目录的安全设置。</span><span class="sxs-lookup"><span data-stu-id="ecde8-122">They are not changed to match those on the virtual directory you are deploying.</span></span> <span data-ttu-id="ecde8-123">在这种情况下，您应该验证现有虚拟目录的安全设置是否满足您的要求。</span><span class="sxs-lookup"><span data-stu-id="ecde8-123">In this case, you should verify that the security settings on the existing virtual directory meet your requirements.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="ecde8-124">如果虚拟目录使用 HTTPS（安全超文本传输协议）协议，则在导出期间不会保留其安全设置，进行导入时，虚拟目录将继承根的安全设置。</span><span class="sxs-lookup"><span data-stu-id="ecde8-124">If the virtual directory uses the HTTPS (Hypertext Transfer Protocol over Secure Socket Layer) protocol, its security settings are not preserved during export, and when it is imported, the virtual directory will inherit the security settings of the root.</span></span> <span data-ttu-id="ecde8-125">您应该验证安全设置是否满足您的要求。</span><span class="sxs-lookup"><span data-stu-id="ecde8-125">You should verify that the security settings meet your requirements.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="ecde8-126">先决条件</span><span class="sxs-lookup"><span data-stu-id="ecde8-126">Prerequisites</span></span>  
 <span data-ttu-id="ecde8-127">若要执行本主题中的步骤，你必须以 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators 组成员的帐户身份登录。</span><span class="sxs-lookup"><span data-stu-id="ecde8-127">To perform the procedure in this topic, you must be logged on with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="ecde8-128">有关更多详细权限的信息，请参阅[用于部署和管理 BizTalk 应用程序所需权限](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="ecde8-128">For more detailed information on permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md).</span></span>  
  
### <a name="to-add-a-virtual-directory-to-an-application"></a><span data-ttu-id="ecde8-129">向应用程序添加虚拟目录</span><span class="sxs-lookup"><span data-stu-id="ecde8-129">To add a virtual directory to an application</span></span>  
  
1.  <span data-ttu-id="ecde8-130">如下所示打开命令提示符： 单击**启动**，单击**运行**，类型`cmd`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="ecde8-130">Open a command prompt as follows: Click **Start**, click **Run**, type `cmd`, and then click **OK**.</span></span>  
  
2.  <span data-ttu-id="ecde8-131">键入以下命令，替换为适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="ecde8-131">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
     <span data-ttu-id="ecde8-132">**BTSTask AddResource** [/**ApplicationName:***值*] **/Type:System.BizTalk:WebDirectory**[**/Overwrite**] **/Source:***值*[**/Destination:***值*] [**/Server:** *值*] [**/数据库：***值*]</span><span class="sxs-lookup"><span data-stu-id="ecde8-132">**BTSTask AddResource** [/**ApplicationName:***value*] **/Type:System.BizTalk:WebDirectory**[**/Overwrite**] **/Source:***value* [**/Destination:***value*] [**/Server:***value*] [**/Database:***value*]</span></span>  
  
     <span data-ttu-id="ecde8-133">例如：</span><span class="sxs-lookup"><span data-stu-id="ecde8-133">Example:</span></span>  
  
     <span data-ttu-id="ecde8-134">**BTSTask AddResource /ApplicationName:MyApplication /Type: System.BizTalk:WebDirectory / 覆盖 /Source:http://Host1:90 / MyVirtualDirectory /Destination:http://Host2:90 / MyVirtualDirectory /Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span><span class="sxs-lookup"><span data-stu-id="ecde8-134">**BTSTask AddResource /ApplicationName:MyApplication /Type: System.BizTalk:WebDirectory /Overwrite /Source:http://Host1:90/MyVirtualDirectory /Destination:http://Host2:90/MyVirtualDirectory /Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span></span>  
  
    |<span data-ttu-id="ecde8-135">参数</span><span class="sxs-lookup"><span data-stu-id="ecde8-135">Parameter</span></span>|<span data-ttu-id="ecde8-136">值</span><span class="sxs-lookup"><span data-stu-id="ecde8-136">Value</span></span>|  
    |---------------|-----------|  
    |<span data-ttu-id="ecde8-137">**/ 应用程序名称**</span><span class="sxs-lookup"><span data-stu-id="ecde8-137">**/ApplicationName**</span></span>|<span data-ttu-id="ecde8-138">虚拟目录要添加到的 BizTalk 应用程序的名称。</span><span class="sxs-lookup"><span data-stu-id="ecde8-138">Name of the BizTalk application to which to add the virtual directory.</span></span> <span data-ttu-id="ecde8-139">如果未指定应用程序名称，则使用组的默认 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="ecde8-139">If the application name is not specified, the default BizTalk application for the group is used.</span></span> <span data-ttu-id="ecde8-140">如果名称包含空格，必须将它括在双引号 （"）。</span><span class="sxs-lookup"><span data-stu-id="ecde8-140">If the name includes spaces, you must enclose it in double quotation marks (").</span></span>|  
    |<span data-ttu-id="ecde8-141">**/ 类型**</span><span class="sxs-lookup"><span data-stu-id="ecde8-141">**/Type**</span></span>|<span data-ttu-id="ecde8-142">**System.BizTalk:WebDirectory** （此值不区分大小写。）</span><span class="sxs-lookup"><span data-stu-id="ecde8-142">**System.BizTalk:WebDirectory** (This value is not case-sensitive.)</span></span>|  
    |<span data-ttu-id="ecde8-143">**/ 覆盖**</span><span class="sxs-lookup"><span data-stu-id="ecde8-143">**/Overwrite**</span></span>|<span data-ttu-id="ecde8-144">更新现有虚拟目录的选项。</span><span class="sxs-lookup"><span data-stu-id="ecde8-144">Option to update an existing virtual directory.</span></span> <span data-ttu-id="ecde8-145">如果未指定，且应用程序中已经存在与要添加的虚拟目录同名的虚拟目录，则 AddResources 操作将失败。</span><span class="sxs-lookup"><span data-stu-id="ecde8-145">If not specified, and a virtual directory already exists in the application that has the same name as the virtual directory being added, the AddResources operation fails.</span></span>|  
    |<span data-ttu-id="ecde8-146">**/ 源**</span><span class="sxs-lookup"><span data-stu-id="ecde8-146">**/Source**</span></span>|<span data-ttu-id="ecde8-147">源虚拟目录的 URI。</span><span class="sxs-lookup"><span data-stu-id="ecde8-147">URI of the source virtual directory.</span></span>|  
    |<span data-ttu-id="ecde8-148">**/ 目标**</span><span class="sxs-lookup"><span data-stu-id="ecde8-148">**/Destination**</span></span>|<span data-ttu-id="ecde8-149">从 .msi 文件安装应用程序时要分配给该虚拟目录的 URI。</span><span class="sxs-lookup"><span data-stu-id="ecde8-149">URI to be assigned to the virtual directory when the application is installed from the .msi file.</span></span> <span data-ttu-id="ecde8-150">如果未指定此参数，则使用 Source 参数的值，localhost 作为主机。</span><span class="sxs-lookup"><span data-stu-id="ecde8-150">If this parameter is not specified, then the value of the Source parameter is used with localhost as the host.</span></span>|  
    |<span data-ttu-id="ecde8-151">**/ 服务器**</span><span class="sxs-lookup"><span data-stu-id="ecde8-151">**/Server**</span></span>|<span data-ttu-id="ecde8-152">BizTalk 管理数据库的宿主 SQL Server 实例的名称，格式为“服务器名称\实例名称,端口”。</span><span class="sxs-lookup"><span data-stu-id="ecde8-152">Name of the SQL Server instance hosting the BizTalk Management database, in the form ServerName\InstanceName,Port.</span></span><br /><br /> <span data-ttu-id="ecde8-153">只在实例名称与服务器名称不相同时才需要指定实例名称。</span><span class="sxs-lookup"><span data-stu-id="ecde8-153">Instance name is only required when the instance name is different than the server name.</span></span> <span data-ttu-id="ecde8-154">只在 SQL Server 不使用默认端口号 (1433) 时才需要指定端口。</span><span class="sxs-lookup"><span data-stu-id="ecde8-154">Port is only required when SQL Server uses a port number other than the default (1433).</span></span><br /><br /> <span data-ttu-id="ecde8-155">示例：</span><span class="sxs-lookup"><span data-stu-id="ecde8-155">Examples:</span></span><br /><br /> <span data-ttu-id="ecde8-156">Server=MyServer</span><span class="sxs-lookup"><span data-stu-id="ecde8-156">Server=MyServer</span></span><br /><br /> <span data-ttu-id="ecde8-157">Server=MyServer\MySQLServer,1533</span><span class="sxs-lookup"><span data-stu-id="ecde8-157">Server=MyServer\MySQLServer,1533</span></span><br /><br /> <span data-ttu-id="ecde8-158">如果未提供，则使用本地计算机上运行的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="ecde8-158">If not provided, the name of the SQL Server instance running on the local computer is used.</span></span>|  
    |<span data-ttu-id="ecde8-159">**/ 数据库**</span><span class="sxs-lookup"><span data-stu-id="ecde8-159">**/Database**</span></span>|<span data-ttu-id="ecde8-160">BizTalk 管理数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="ecde8-160">Name of the BizTalk Management database.</span></span> <span data-ttu-id="ecde8-161">如果未指定，则使用在本地 SQL Server 实例中运行的 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="ecde8-161">If not specified, the BizTalk Management database running in the local instance of SQL Server is used.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="ecde8-162">另请参阅</span><span class="sxs-lookup"><span data-stu-id="ecde8-162">See Also</span></span>  
 <span data-ttu-id="ecde8-163">[管理.NET 程序集、 证书和其他资源](../core/managing-net-assemblies-certificates-and-other-resources.md) </span><span class="sxs-lookup"><span data-stu-id="ecde8-163">[Managing .NET Assemblies, Certificates, and Other Resources](../core/managing-net-assemblies-certificates-and-other-resources.md) </span></span>  
 <span data-ttu-id="ecde8-164">[AddResource 命令： 虚拟目录](../core/addresource-command-virtual-directory.md) </span><span class="sxs-lookup"><span data-stu-id="ecde8-164">[AddResource Command: Virtual Directory](../core/addresource-command-virtual-directory.md) </span></span>  
 [<span data-ttu-id="ecde8-165">创建和修改 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="ecde8-165">Creating and Modifying BizTalk Applications</span></span>](../core/creating-and-modifying-biztalk-applications.md)