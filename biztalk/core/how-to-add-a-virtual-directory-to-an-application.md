---
title: 如何将虚拟目录添加到应用程序 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- virtual directories
- managing [applications], virtual directories
- applications, virtual directories
- virtual directories, applications
ms.assetid: a5726696-bd65-49d9-8814-a078afe8c067
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8bfd9c47fbd25c57d1c025806e5eb9dae6bda72b
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65343305"
---
# <a name="how-to-add-a-virtual-directory-to-an-application"></a><span data-ttu-id="1f9b9-102">如何将虚拟目录添加到应用程序</span><span class="sxs-lookup"><span data-stu-id="1f9b9-102">How to Add a Virtual Directory to an Application</span></span>
<span data-ttu-id="1f9b9-103">本主题介绍如何使用 BTSTask 命令行工具将虚拟目录添加到 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-103">This topic describes how to use the BTSTask command-line tool to add a virtual directory to a BizTalk application.</span></span> <span data-ttu-id="1f9b9-104">此选项不可用在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-104">This option is not available in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="1f9b9-105">你可能想要添加虚拟目录，如果您具有编写自定义 Web 服务或创建与进行连接的 ASP.NET Web 站点[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]并且想要部署的虚拟目录与应用程序。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-105">You might want to add a virtual directory if you have written a custom Web service or created an ASP.NET Web site for interfacing with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and want to deploy the virtual directory with the application.</span></span>  
  
 <span data-ttu-id="1f9b9-106">另一种方法添加到应用程序的虚拟目录是虚拟目录指定的 SOAP 或 HTTP 接收位置，如中所述[如何配置 HTTP 接收位置](../core/how-to-configure-an-http-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-106">Another way to add a virtual directory to an application is by specifying a virtual directory for a SOAP or HTTP receive location, as described in [How to Configure an HTTP Receive Location](../core/how-to-configure-an-http-receive-location.md).</span></span> <span data-ttu-id="1f9b9-107">在所有情况下，虚拟目录添加到 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-107">In all cases, the virtual directory is added to the BizTalk Management database.</span></span> <span data-ttu-id="1f9b9-108">当使用命令行添加虚拟目录时，它还显示在[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中的应用程序添加到资源文件夹，以及使用时的应用程序中的项目列表[ListApp 命令](../core/listapp-command.md)。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-108">When you add a virtual directory by using the command line, it also displays in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, in the Resources folder of the application to which you added it as well as the list of artifacts in the application when you use the [ListApp Command](../core/listapp-command.md).</span></span> <span data-ttu-id="1f9b9-109">如果随后将导出应用程序，然后将其导入到其他 BizTalk 组的虚拟目录显示在资源文件夹中。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-109">If you later export the application and then import it into another BizTalk group, the virtual directory displays in the Resources folder.</span></span>  
  
 <span data-ttu-id="1f9b9-110">当将虚拟目录添加到应用程序，请记住以下几点：</span><span class="sxs-lookup"><span data-stu-id="1f9b9-110">When adding a virtual directory to an application, bear in mind the following points:</span></span>  
  
-   <span data-ttu-id="1f9b9-111">您可以覆盖虚拟目录已存在应用程序中通过指定覆盖选项。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-111">You can overwrite a virtual directory that already exists in the application by specifying the overwrite option.</span></span> <span data-ttu-id="1f9b9-112">仅当现有的虚拟目录具有与你想要添加的一个同名时，则需要使用覆盖选项。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-112">The overwrite option is required only when the existing virtual directory has the same name as the one you want to add.</span></span> <span data-ttu-id="1f9b9-113">如果未指定，且虚拟目录已存在具有相同名称作为要添加应用程序中，添加操作将失败。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-113">If not specified, and a virtual directory already exists in the application with the same name as the one being added, the add operation will fail.</span></span>  
  
-   <span data-ttu-id="1f9b9-114">当添加包含 https 的 URL 与虚拟目录时，必须指定而不是 https 的 URL 中使用 http。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-114">When you add a virtual directory with a URL that contains https, you must use http in the URL that you specify rather than https.</span></span> <span data-ttu-id="1f9b9-115">如果使用 https 时，要添加虚拟目录的操作将失败。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-115">If you use https, the operation to add a virtual directory will fail.</span></span> <span data-ttu-id="1f9b9-116">即使使用 http URL 中将其添加，Internet Information Services 元数据库中的 URL 的 https 设置将生效，和虚拟目录将正常工作。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-116">Even though you add it with http in the URL, the https setting for the URL in the Internet Information Services metabase will be in effect, and the virtual directory will function correctly.</span></span>  
  
-   <span data-ttu-id="1f9b9-117">如果从 64 位版本的 Web 服务中，添加虚拟目录，并尝试安装包括 32 位计算机上的虚拟目录的应用程序，将不安装的虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-117">If you add a virtual directory from a 64-bit version of the Web service, and you attempt to install the application that includes the virtual directory on a 32-bit computer, the virtual directory will not be installed.</span></span> <span data-ttu-id="1f9b9-118">必须在 64 位计算机上安装它。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-118">It must be installed on a 64-bit computer.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1f9b9-119">导入包含虚拟目录的应用程序时，虚拟目录上的安全设置是有效应用程序导出期间生成.msi 文件时。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-119">When you import an application containing a virtual directory, the security settings on the virtual directory are those in effect when the .msi file is generated during application export.</span></span> <span data-ttu-id="1f9b9-120">如果要部署到生产环境中，应用程序，然后导出该应用程序，则应验证设置满足安全要求。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-120">If you are deploying an application into a production environment, before exporting the application, you should verify that the settings meet your security requirements.</span></span>  
>   
>  <span data-ttu-id="1f9b9-121">如果，但是，虚拟目录已存在目标环境中，现有的虚拟目录上的安全设置将生效。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-121">If, however, the virtual directory already exists in the destination environment, the security settings on the existing virtual directory will be in effect.</span></span> <span data-ttu-id="1f9b9-122">它们不会更改以匹配您要部署的虚拟目录上。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-122">They are not changed to match those on the virtual directory you are deploying.</span></span> <span data-ttu-id="1f9b9-123">在这种情况下，应该验证现有虚拟目录上的安全设置满足你的要求。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-123">In this case, you should verify that the security settings on the existing virtual directory meet your requirements.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="1f9b9-124">如果虚拟目录使用 HTTPS （超文本传输协议通过安全套接字层） 协议，在导出期间，不保留其安全设置和导入它时，虚拟目录将继承根的安全设置。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-124">If the virtual directory uses the HTTPS (Hypertext Transfer Protocol over Secure Socket Layer) protocol, its security settings are not preserved during export, and when it is imported, the virtual directory will inherit the security settings of the root.</span></span> <span data-ttu-id="1f9b9-125">应验证的安全设置满足你的要求。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-125">You should verify that the security settings meet your requirements.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="1f9b9-126">先决条件</span><span class="sxs-lookup"><span data-stu-id="1f9b9-126">Prerequisites</span></span>  
 <span data-ttu-id="1f9b9-127">若要执行本主题中的过程，您必须登录的成员帐户[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 组。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-127">To perform the procedure in this topic, you must be logged on with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="1f9b9-128">有关详细的权限的信息，请参阅[用于部署和管理 BizTalk 应用程序所需权限](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md)。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-128">For more detailed information on permissions, see [Permissions Required for Deploying and Managing a BizTalk Application](../core/permissions-required-for-deploying-and-managing-a-biztalk-application.md).</span></span>  
  
### <a name="to-add-a-virtual-directory-to-an-application"></a><span data-ttu-id="1f9b9-129">若要将虚拟目录添加到应用程序</span><span class="sxs-lookup"><span data-stu-id="1f9b9-129">To add a virtual directory to an application</span></span>  
  
1. <span data-ttu-id="1f9b9-130">打开命令提示符，如下所示：单击**启动**，单击**运行**，类型`cmd`，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-130">Open a command prompt as follows: Click **Start**, click **Run**, type `cmd`, and then click **OK**.</span></span>  
  
2. <span data-ttu-id="1f9b9-131">键入以下命令，替换适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="1f9b9-131">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
    <span data-ttu-id="1f9b9-132">**BTSTask AddResource** [/**应用程序名称：**<em>值</em>] **/Type:System.BizTalk:WebDirectory**[**/overwrite**]**/Source:**<em>值</em>[**/Destination:**<em>值</em>] [**/Server:** <em>值</em>] [**/database:**<em>值</em>]</span><span class="sxs-lookup"><span data-stu-id="1f9b9-132">**BTSTask AddResource** [/**ApplicationName:**<em>value</em>] **/Type:System.BizTalk:WebDirectory**[**/Overwrite**] **/Source:**<em>value</em> [**/Destination:**<em>value</em>] [**/Server:**<em>value</em>] [**/Database:**<em>value</em>]</span></span>  
  
    <span data-ttu-id="1f9b9-133">例如：</span><span class="sxs-lookup"><span data-stu-id="1f9b9-133">Example:</span></span>  
  
    <span data-ttu-id="1f9b9-134">**BTSTask AddResource /ApplicationName:MyApplication /Type:System.BizTalk:WebDirectory /Overwrite /Source:<http://Host1:90/MyVirtualDirectory> /Destination:<http://Host2:90/MyVirtualDirectory> /Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-134">**BTSTask AddResource /ApplicationName:MyApplication /Type: System.BizTalk:WebDirectory /Overwrite /Source:<http://Host1:90/MyVirtualDirectory> /Destination:<http://Host2:90/MyVirtualDirectory> /Server:MyDatabaseServer /Database:BizTalkMgmtDb**</span></span>  
  
   |<span data-ttu-id="1f9b9-135">参数</span><span class="sxs-lookup"><span data-stu-id="1f9b9-135">Parameter</span></span>|<span data-ttu-id="1f9b9-136">ReplTest1</span><span class="sxs-lookup"><span data-stu-id="1f9b9-136">Value</span></span>|  
   |---------------|-----------|  
   |<span data-ttu-id="1f9b9-137">**/ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-137">**/ApplicationName**</span></span>|<span data-ttu-id="1f9b9-138">要将虚拟目录添加到 BizTalk 应用程序的名称。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-138">Name of the BizTalk application to which to add the virtual directory.</span></span> <span data-ttu-id="1f9b9-139">如果未指定应用程序名称，则使用默认 BizTalk 应用程序组。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-139">If the application name is not specified, the default BizTalk application for the group is used.</span></span> <span data-ttu-id="1f9b9-140">如果名称包含空格，则必须将其括在双引号 （"）。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-140">If the name includes spaces, you must enclose it in double quotation marks (").</span></span>|  
   |<span data-ttu-id="1f9b9-141">**/Type**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-141">**/Type**</span></span>|<span data-ttu-id="1f9b9-142">**System.biztalk: webdirectory** （此值不区分大小写。）</span><span class="sxs-lookup"><span data-stu-id="1f9b9-142">**System.BizTalk:WebDirectory** (This value is not case-sensitive.)</span></span>|  
   |<span data-ttu-id="1f9b9-143">**/Overwrite**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-143">**/Overwrite**</span></span>|<span data-ttu-id="1f9b9-144">若要更新现有虚拟目录的选项。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-144">Option to update an existing virtual directory.</span></span> <span data-ttu-id="1f9b9-145">如果未指定，且虚拟目录已存在具有相同的名称与要添加虚拟目录则 AddResources 操作将失败的应用程序中。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-145">If not specified, and a virtual directory already exists in the application that has the same name as the virtual directory being added, the AddResources operation fails.</span></span>|  
   |<span data-ttu-id="1f9b9-146">**/Source**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-146">**/Source**</span></span>|<span data-ttu-id="1f9b9-147">源虚拟目录的 URI。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-147">URI of the source virtual directory.</span></span>|  
   |<span data-ttu-id="1f9b9-148">**/ 目标**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-148">**/Destination**</span></span>|<span data-ttu-id="1f9b9-149">从.msi 文件安装应用程序时要分配给虚拟目录的 URI。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-149">URI to be assigned to the virtual directory when the application is installed from the .msi file.</span></span> <span data-ttu-id="1f9b9-150">如果未指定此参数，然后源参数的值用于 localhost 作为主机。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-150">If this parameter is not specified, then the value of the Source parameter is used with localhost as the host.</span></span>|  
   |<span data-ttu-id="1f9b9-151">**/Server**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-151">**/Server**</span></span>|<span data-ttu-id="1f9b9-152">承载 BizTalk 管理数据库，在窗体 ServerName\InstanceName，端口中的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-152">Name of the SQL Server instance hosting the BizTalk Management database, in the form ServerName\InstanceName,Port.</span></span><br /><br /> <span data-ttu-id="1f9b9-153">实例名称仅是所需的实例名称不同于服务器名称时。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-153">Instance name is only required when the instance name is different than the server name.</span></span> <span data-ttu-id="1f9b9-154">端口是仅在 SQL Server 使用的端口号而不是默认 (1433) 时所需。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-154">Port is only required when SQL Server uses a port number other than the default (1433).</span></span><br /><br /> <span data-ttu-id="1f9b9-155">示例：</span><span class="sxs-lookup"><span data-stu-id="1f9b9-155">Examples:</span></span><br /><br /> <span data-ttu-id="1f9b9-156">Server=MyServer</span><span class="sxs-lookup"><span data-stu-id="1f9b9-156">Server=MyServer</span></span><br /><br /> <span data-ttu-id="1f9b9-157">Server=MyServer\MySQLServer,1533</span><span class="sxs-lookup"><span data-stu-id="1f9b9-157">Server=MyServer\MySQLServer,1533</span></span><br /><br /> <span data-ttu-id="1f9b9-158">如果未提供，则使用本地计算机上运行的 SQL Server 实例的名称。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-158">If not provided, the name of the SQL Server instance running on the local computer is used.</span></span>|  
   |<span data-ttu-id="1f9b9-159">**/Database**</span><span class="sxs-lookup"><span data-stu-id="1f9b9-159">**/Database**</span></span>|<span data-ttu-id="1f9b9-160">BizTalk 管理数据库的名称。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-160">Name of the BizTalk Management database.</span></span> <span data-ttu-id="1f9b9-161">如果未指定，使用 SQL Server 的本地实例中运行的 BizTalk 管理数据库。</span><span class="sxs-lookup"><span data-stu-id="1f9b9-161">If not specified, the BizTalk Management database running in the local instance of SQL Server is used.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1f9b9-162">请参阅</span><span class="sxs-lookup"><span data-stu-id="1f9b9-162">See Also</span></span>  
 <span data-ttu-id="1f9b9-163">[管理.NET 程序集、 证书和其他资源](../core/managing-net-assemblies-certificates-and-other-resources.md) </span><span class="sxs-lookup"><span data-stu-id="1f9b9-163">[Managing .NET Assemblies, Certificates, and Other Resources](../core/managing-net-assemblies-certificates-and-other-resources.md) </span></span>  
 <span data-ttu-id="1f9b9-164">[AddResource 命令：虚拟目录](../core/addresource-command-virtual-directory.md) </span><span class="sxs-lookup"><span data-stu-id="1f9b9-164">[AddResource Command: Virtual Directory](../core/addresource-command-virtual-directory.md) </span></span>  
 [<span data-ttu-id="1f9b9-165">创建和修改 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="1f9b9-165">Creating and Modifying BizTalk Applications</span></span>](../core/creating-and-modifying-biztalk-applications.md)