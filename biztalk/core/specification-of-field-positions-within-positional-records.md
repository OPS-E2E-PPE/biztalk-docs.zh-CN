---
title: 位置记录中的字段位置规范 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 33c2eee3-ec30-46c5-a143-a3d2e2f265a6
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7ba66ea6d0efde6eaa4b7103624c092d65c4d8b6
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65243110"
---
# <a name="specification-of-field-positions-within-positional-records"></a>位置记录中的字段位置规范
若要定义位置记录，必须提供有关位置和长度的记录中字段的信息。 如果该记录包含子记录，位置和长度将汇总中的字段将累加起来，以参与到包含记录的有关信息。  
  
 为指定的值的总和**位置偏移量**并**位置长度**为特定**字段元素**或**字段属性**节点确定专用于相应字段的字符数。 这些涵盖的所有记录中字段和任何其子记录的一系列确定记录中字段的边界。  
  
> [!NOTE]
>  当**数**的属性**架构**节点设置为**是**，则**位置长度**和**位置偏移量**属性指定字节数而不是字符。  

查看更多详细信息，这些属性[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。
  
## <a name="positional-offset-property"></a>位置偏移量属性  
 当平面文件拆装器将转换为等效的 XML 实例消息转换为平面文件实例消息时，指定的值为**位置偏移量**属性定义了许多字符 （或字节数），将被忽略并通过在该位置在实例消息中已跳过。 换而言之，在该起始位置和长度上出现的所有信息 (由指定后者**位置偏移量**属性) 中的平面文件实例消息不会复制到消息的 XML 版本。  
  
 当平面文件组装器将 XML 实例消息转换成等效的平面文件实例消息时，指定的值为**位置偏移量**属性定义了许多字符 （或字节数） 填充的正在创建平面文件实例消息中的起始位置的空格字符。 始终使用空格字符来填充偏移的位置;使用的字符不是可配置的。  
  
 **位置偏移量**属性提供了用于解释位置记录的内容的灵活性。 从根本上来说，此属性可以忽略任何为其它设置为非零值的字段前面的固定的长度数据。 固定的长度数据可能是一个或多个的整个数据字段或某种类型的常数数据，例如使用的字段，不需要的平面文件实例消息的 XML 等效项包括相关联的标记。 有关详细信息，请参阅下面的示例。  
  
## <a name="positional-length-property"></a>位置长度属性  
 当平面文件拆装器将转换为等效的 XML 实例消息转换为平面文件实例消息时，指定的值为**位置长度**属性定义数目的字符 （或字节数）与实例消息中的位置处的字段相关联。 发生在平面文件实例消息中起始位置和长度构成了受提供由关联的附加信息的字段中的数据的信息**理由**和**填充字符**属性。 有关对齐和字段填充的更多概念信息，请参阅[字段对齐](../core/field-justification.md)并[字段填充](../core/field-padding.md)。  
  
 当平面文件组装器将 XML 实例消息转换成等效的平面文件实例消息时，指定的值为**位置长度**属性定义数个字符 （或字节数） 可用于编写与该字段关联的数据。 如果有较少的数据字符数比指定字段长度，相关的填充字符用于填充差额。 如果有多个数据字符数比指定字段长度的开头或结尾的数据将被截断的设置的基础**理由**属性，不包含在平面文件实例消息正在构造。  
  
> [!NOTE]
>  左对齐数据的尾部将被截断并丢弃。 右对齐数据的前导部分是被截断并丢弃。  
  
## <a name="example"></a>示例  
 请考虑以下字段定义为一条记录。  
  
|字段节点名称|Offset|长度|填充字符|对齐|  
|---------------------|------------|------------|-------------------|-------------------|  
|Field1|0|6|默认值 （空格）|Left|  
|字段 2|0|4|*|Right|  
|Field3|2|6|*|Left|  
|Field4|4|6|默认值 （空格）|Right|  
  
 并在这些字段定义 （第一行是适用于计数字符位置） 的记录的起点遇到以下字符流。  
  
```  
123456789012345678901234567890123456789012345678901234567890  
abc   **12345678**skip  here  
```  
  
 这些字段定义应用于此示例记录数据时，平面文件拆装器将生成以下 XML 等效 （具有以粗体显示的数据）。  
  
```  
<Field1>abc</Field1>  
<Field2>12</Field2>  
<Field3>5678</Field3>  
<Field4>here</Field4>  
```  
  
 以下观察值是与此数据的分析方式：  
  
- 与 Field1 关联的字符 （长度为 6，没有偏移量） 是"`abc` "，但因为空格字符是 Field1 的 （默认值） 填充字符，并且 Field1 被定义为左对齐，在 XML 中不包括空格。  
  
- 与 Field2 关联的字符 （长度为 4，没有偏移量） 是"`**12`"，但因为星号字符是为 Field2 定义的填充字符，并且 Field2 被定义为右对齐，在 XML 中不包括星号。  
  
- 与 Field3 关联的字符 （长度为 6 再加上偏移量为 2） 将"`345678**`"，但 3 和 4 是 XML 中不包括由于偏移量。 包括星号，也不在 XML 中因为星号字符是为 Field2 定义的填充字符，并且 Field2 被定义为左对齐。  
  
- 与 Field4 关联的字符 （长度为 6 再加上偏移量为 4） 将"`skip  here`"，但字符序列"`skip`"由于偏移量不包含在 XML 中。 两个空格字符也不包括在 XML 中因为空格字符是 Field4 的 （默认值） 填充字符，并且 Field4 被定义为右对齐。  
  
  如果在此示例中的平面文件拆装器生成的 XML 传递给使用相同的字段定义的平面文件组装器，生成相同的平面文件数据，但以下两点除外： 被丢弃的偏移序列 34 和跳过用空格字符填充(用`^`字符后面的数据行中)。  
  
```  
123456789012345678901234567890123456789012345678901234567890  
abc   **12  5678**      here  
          ^^      ^^^^  
  
```  
  
## <a name="see-also"></a>请参阅  
- [字段注意事项](../core/field-considerations.md)    
- [字段对齐](../core/field-justification.md)   
- [字段填充](../core/field-padding.md)   
- 以下属性的详细信息[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]:  
    - 以字节为单位 （平面文件架构的节点属性） 为单位计算位置  
    - 对齐 （平面文件架构的节点属性）  
    - 填充字符 （平面文件架构的节点属性） 
    - 位置偏移量 （平面文件架构的节点属性）
    - 位置长度 （平面文件架构的节点属性）