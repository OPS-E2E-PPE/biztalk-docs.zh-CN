---
title: 位置记录中的字段位置规范 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 33c2eee3-ec30-46c5-a143-a3d2e2f265a6
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ae83eec566ffc7b551b2ee8dffd101dc99bc3c4a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36998038"
---
# <a name="specification-of-field-positions-within-positional-records"></a>位置记录中的字段位置规范
若要定义位置记录，必须提供有关记录中字段的位置和长度的信息。 如果记录包含子记录，则子记录中的字段的位置和长度将汇总到包含记录的有关信息中。  
  
 为指定的值的总和**位置偏移量**并**位置长度**为特定**字段元素**或**字段属性**节点确定专用于相应字段的字符数。 涵盖记录及其所有子记录中的所有字段的一系列这样的和决定了记录中字段的边界。  
  
> [!NOTE]
>  当**数**的属性**架构**节点设置为**是**，则**位置长度**和**位置偏移量**属性指定字节数而不是字符。  

查看更多详细信息，这些属性[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]。
  
## <a name="positional-offset-property"></a>“位置偏移量”属性  
 当平面文件拆装器将转换为等效的 XML 实例消息转换为平面文件实例消息时，指定的值为**位置偏移量**属性定义了许多字符 （或字节数），将被忽略并通过在该位置在实例消息中已跳过。 换而言之，在该起始位置和长度上出现的所有信息 (由指定后者**位置偏移量**属性) 中的平面文件实例消息不会复制到消息的 XML 版本。  
  
 当平面文件组装器将 XML 实例消息转换成等效的平面文件实例消息时，指定的值为**位置偏移量**属性定义了许多字符 （或字节数） 填充的正在创建平面文件实例消息中的起始位置的空格字符。 始终使用空格字符来填充偏移位置；所使用的字符不可配置。  
  
 **位置偏移量**属性提供了用于解释位置记录的内容的灵活性。 实际上，此属性允许您忽略位于将此属性设置为非零值的字段前面的任何固定长度数据。 该固定长度数据可能是一个或多个不需要包括在平面文件实例消息的 XML 等效消息中的整个数据字段或某些类型的常数数据，例如，与字段关联的标记。 有关详细信息，请参阅后面的示例。  
  
## <a name="positional-length-property"></a>“位置长度”属性  
 当平面文件拆装器将转换为等效的 XML 实例消息转换为平面文件实例消息时，指定的值为**位置长度**属性定义数目的字符 （或字节数）与实例消息中的位置处的字段相关联。 发生在平面文件实例消息中起始位置和长度构成了受提供由关联的附加信息的字段中的数据的信息**理由**和**填充字符**属性。 有关对齐和字段填充的更多概念信息，请参阅[字段对齐](../core/field-justification.md)并[字段填充](../core/field-padding.md)。  
  
 当平面文件组装器将 XML 实例消息转换成等效的平面文件实例消息时，指定的值为**位置长度**属性定义数个字符 （或字节数） 可用于编写与该字段关联的数据。 如果数据字符数比指定的字段长度要少，则将使用相关的填充字符来填充差额。 如果有多个数据字符数比指定字段长度的开头或结尾的数据将被截断的设置的基础**理由**属性，不包含在平面文件实例消息正在构造。  
  
> [!NOTE]
>  左对齐数据的尾部将被截断并丢弃。 右对齐数据的头部将被截断并丢弃。  
  
## <a name="example"></a>示例  
 假设记录的字段定义如下：  
  
|字段节点名称|Offset|长度|填充字符|对齐|  
|---------------------|------------|------------|-------------------|-------------------|  
|Field1|0|6|默认值（空格）|Left|  
|Field2|0|4|*|Right|  
|Field3|2|6|*|Left|  
|Field4|4|6|默认值（空格）|Right|  
  
 并且，在具有这些字段定义的记录的起点遇到以下字符流（第一行用于对字符位置计数）：  
  
```  
123456789012345678901234567890123456789012345678901234567890  
abc   **12345678**skip  here  
```  
  
 将这些字段定义应用于此示例记录数据时，平面文件拆装器将生成以下 XML 等效消息（数据以粗体显示）：  
  
```  
<Field1>abc</Field1>  
<Field2>12</Field2>  
<Field3>5678</Field3>  
<Field4>here</Field4>  
```  
  
 以下所观察到的现象展示了是如何对此数据进行解析的：  
  
- 与 Field1 关联的字符 （长度为 6，没有偏移量） 是"`abc` "，但因为空格字符是 Field1 的 （默认值） 填充字符，并且 Field1 被定义为左对齐，在 XML 中不包括空格。  
  
- 与 Field2（长度为 4，没有偏移量）关联的字符为“`**12`”，但在 XML 中不包括星号，因为星号字符是为 Field2 定义的填充字符，并且 Field2 被定义为右对齐。  
  
- 与 Field3（长度为 6，偏移量为 2）关联的字符为“`345678**`”，但因为存在偏移量，所以在 XML 中不包括 3 和 4。 在 XML 中也不包括星号，因为星号字符是为 Field2 定义的填充字符，并且 Field2 被定义为左对齐。  
  
- 与 Field4（长度为 6，偏移量为 4）关联的字符为“`skip  here`”，但因为存在偏移量，所以在 XML 中不包括字符序列“`skip`”。 在 XML 中也不包括两个空格字符，因为空格字符是 Field4 的（默认）填充字符，并且 Field4 被定义为右对齐。  
  
  如果在此示例中的平面文件拆装器生成的 XML 传递给使用相同的字段定义的平面文件组装器，生成相同的平面文件数据，但以下两点除外： 被丢弃的偏移序列 34 和跳过用空格字符填充(用`^`字符后面的数据行中)。  
  
```  
123456789012345678901234567890123456789012345678901234567890  
abc   **12  5678**      here  
          ^^      ^^^^  
  
```  
  
## <a name="see-also"></a>请参阅  
- [字段注意事项](../core/field-considerations.md)    
- [字段对齐](../core/field-justification.md)   
- [字段填充](../core/field-padding.md)   
- 以下属性的详细信息[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]:  
    - 以字节为单位 （平面文件架构的节点属性） 为单位计算位置  
    - 对齐 （平面文件架构的节点属性）  
    - 填充字符 （平面文件架构的节点属性） 
    - 位置偏移量 （平面文件架构的节点属性）
    - 位置长度 （平面文件架构的节点属性）