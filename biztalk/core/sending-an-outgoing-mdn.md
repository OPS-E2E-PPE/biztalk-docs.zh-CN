---
title: 发送传出的 MDN |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2dce7620-d354-4b76-bcbc-f97dc93c3fc3
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4dbe1365681fe40ef81b1634307d1535c325ad5d
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399054"
---
# <a name="sending-an-outgoing-mdn"></a><span data-ttu-id="3907f-102">发送传出的 MDN</span><span class="sxs-lookup"><span data-stu-id="3907f-102">Sending an Outgoing MDN</span></span>
<span data-ttu-id="3907f-103">传出的 MDN 由 AS2EDIReceive 或 AS2Receive 接收管道，并由 AS2Send 管道发送。</span><span class="sxs-lookup"><span data-stu-id="3907f-103">An outgoing MDN is generated by the AS2EDIReceive or AS2Receive receive pipeline, and sent by the AS2Send pipeline.</span></span> <span data-ttu-id="3907f-104">本主题介绍如何发送 MDN。</span><span class="sxs-lookup"><span data-stu-id="3907f-104">This topic describes how an MDN is sent.</span></span> <span data-ttu-id="3907f-105">有关如何生成 MDN 的详细信息，请参阅[生成传出 MDN](../core/generating-an-outgoing-mdn.md)。</span><span class="sxs-lookup"><span data-stu-id="3907f-105">For more information on how an MDN is generated, see [Generating an Outgoing MDN](../core/generating-an-outgoing-mdn.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3907f-106">AS2EDISend 发送管道不用于发送传出的 MDN，因为在处理 MDN 时不使用该管道中的 EDI 组装器。</span><span class="sxs-lookup"><span data-stu-id="3907f-106">The AS2EDISend send pipeline is not used to send an outgoing MDN, because the EDI assembler in that pipeline is not used in processing an MDN.</span></span>  
  
## <a name="agreement-resolution-for-an-mdn"></a><span data-ttu-id="3907f-107">MDN 的协议解析</span><span class="sxs-lookup"><span data-stu-id="3907f-107">Agreement Resolution for an MDN</span></span>  
 <span data-ttu-id="3907f-108">MDN 是自路由。</span><span class="sxs-lookup"><span data-stu-id="3907f-108">An MDN is self-routing.</span></span> <span data-ttu-id="3907f-109">它包含路由到目标协议所需的信息。</span><span class="sxs-lookup"><span data-stu-id="3907f-109">It contains the information that it needs to be routed to the intended agreement.</span></span> <span data-ttu-id="3907f-110">发送管道使用 AS2 协议属性来处理传出的 MDN。</span><span class="sxs-lookup"><span data-stu-id="3907f-110">The send pipeline uses the AS2 agreement properties to process the outgoing MDN.</span></span> <span data-ttu-id="3907f-111">但是，MDN 不必签订了协议，为其路由到参与方解析。</span><span class="sxs-lookup"><span data-stu-id="3907f-111">However, the MDN does not have to have an agreement resolved for it to be routed to the party.</span></span>  
  
 <span data-ttu-id="3907f-112">当 AS2Send 管道处理传出的 MDN 时，它使用 AS2-到消息上下文来获得用于处理此 MDN 的协议属性中的值。</span><span class="sxs-lookup"><span data-stu-id="3907f-112">When the AS2Send pipeline processes an outgoing MDN, it uses the AS2-To value in the message context to obtain the agreement properties to process the MDN.</span></span> <span data-ttu-id="3907f-113">这是通过匹配 AS2-To 上下文属性与 AS2-To 协议属性中**标识符**页中的单向 AS2 协议选项卡**协议属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="3907f-113">It does so by matching the AS2-To context property with the AS2-To agreement property in the **Identifiers** page in the one-way AS2 agreement tab in the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="3907f-114">如果此 mdn 的协议解析可能会失败的 AS2-到协议未设置值。</span><span class="sxs-lookup"><span data-stu-id="3907f-114">This agreement resolution for the MDN can fail if the AS2-To value is not set for the agreement.</span></span> <span data-ttu-id="3907f-115">如果无法确定协议，则使用默认协议来生成 MDN。</span><span class="sxs-lookup"><span data-stu-id="3907f-115">If the agreement cannot be determined, a default agreement is used to generate the MDN.</span></span>  
  
 <span data-ttu-id="3907f-116">传出的 MDN 的默认协议，在执行证书解析列表验证。</span><span class="sxs-lookup"><span data-stu-id="3907f-116">In the default agreement for an outgoing MDN, the certificate resolution list verification is performed.</span></span> <span data-ttu-id="3907f-117">如果不希望执行此验证，确认正确的 AS2-协议属性设置为，以便能够解析接收方并且可以确定协议属性。</span><span class="sxs-lookup"><span data-stu-id="3907f-117">If you do not want this verification to be performed, verify that the correct AS2-To agreement property is set, so the receiving party can be resolved and the agreement properties can be determined.</span></span> <span data-ttu-id="3907f-118">如果是这样，将不使用提示验证证书解析列表的默认协议。</span><span class="sxs-lookup"><span data-stu-id="3907f-118">If so, the default agreement that prompts verification of the certificate resolution list will not be used.</span></span> <span data-ttu-id="3907f-119">您还需要禁用**检查证书吊销列表**上的属性**验证**中的单向 AS2 协议选项卡页**协议属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="3907f-119">You will also need to disable the **Check Certification Revocation List** property on the **Validation** page of the one-way AS2 agreement tab in the **Agreement Properties** dialog box.</span></span>  
  
## <a name="synchronous-and-asynchronous-transmission"></a><span data-ttu-id="3907f-120">同步和异步传输</span><span class="sxs-lookup"><span data-stu-id="3907f-120">Synchronous and Asynchronous Transmission</span></span>  
 <span data-ttu-id="3907f-121">在默认 AS2 处理中，以同步方式发送 MDN。</span><span class="sxs-lookup"><span data-stu-id="3907f-121">In default AS2 processing, an MDN is sent synchronously.</span></span> <span data-ttu-id="3907f-122">发送 MDN 的发送端口关联与双向接收端口。</span><span class="sxs-lookup"><span data-stu-id="3907f-122">The MDN is sent by the send port associated with a two-way receive port.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="3907f-123">将此 MDN 作为对 HTTP POST 的 HTTP 响应或作为对 HTTPS POST，相同的 TCP/IP 连接的 HTTPS 响应。</span><span class="sxs-lookup"><span data-stu-id="3907f-123">sends the MDN as an HTTP response to an HTTP POST or as an HTTPS response to an HTTPS POST, on the same TCP/IP connection.</span></span> <span data-ttu-id="3907f-124">MDN 包含在消息正文的 HTTP 响应命令。</span><span class="sxs-lookup"><span data-stu-id="3907f-124">The MDN is included in the message body of the HTTP Response command.</span></span>  
  
 <span data-ttu-id="3907f-125">如果以异步方式发送 MDN，MDN 必须通过单独的发送端口，从 MessageBox 提取 MDN 发送。</span><span class="sxs-lookup"><span data-stu-id="3907f-125">If the MDN is being sent asynchronously, the MDN must be sent by a separate send port, which picks the MDN up from the MessageBox.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="3907f-126">将此 MDN 作为单独 HTTP Post 发送唯一的 TCP/IP 连接不同于用来传递原始 AS2 消息。</span><span class="sxs-lookup"><span data-stu-id="3907f-126">sends the MDN as a separate HTTP Post delivered on a unique TCP/IP connection, distinct from that used to deliver the original AS2 message.</span></span> <span data-ttu-id="3907f-127">即使此 MDN 设置为一个单独的 HTTP Post，一个 HTTP 响应命令，仍需要 post。</span><span class="sxs-lookup"><span data-stu-id="3907f-127">Even though the MDN is set as a separate HTTP Post, an HTTP Response command is still required for the Post.</span></span>  
  
 <span data-ttu-id="3907f-128">通常情况下将向原始 AS2 消息的回执送达选项标头中的 URL 发送异步 MDN。</span><span class="sxs-lookup"><span data-stu-id="3907f-128">An asynchronous MDN will normally be sent to the URL in the Receipt-Delivery-Option header of the original AS2 message.</span></span> <span data-ttu-id="3907f-129">但是，如果**使用的验证和 MDN 的协议设置而非消息标头**上设置属性上**验证**中的单向 AS2 协议选项卡页**协议属性**对话框中，MDN 将发送到的 URL，**回执送达选项 (URL)** 协议属性设置为。</span><span class="sxs-lookup"><span data-stu-id="3907f-129">However, if the **Use agreement settings for validation and MDN instead of message header** property is set on the on the **Validation** page of the one-way AS2 agreement tab in the **Agreement Properties** dialog box, the MDN will be sent to the URL that the **Receipt-Delivery-Option (URL)** agreement property is set to.</span></span>  
  
## <a name="how-the-send-pipeline-processes-an-outgoing-mdn"></a><span data-ttu-id="3907f-130">发送管道如何处理传出的 MDN</span><span class="sxs-lookup"><span data-stu-id="3907f-130">How the Send Pipeline Processes an Outgoing MDN</span></span>  
 <span data-ttu-id="3907f-131">AS2Send 管道处理传出的 MDN 如下所示：</span><span class="sxs-lookup"><span data-stu-id="3907f-131">The AS2Send pipeline processes an outgoing MDN are as follows:</span></span>  
  
-   <span data-ttu-id="3907f-132">执行 MIME 处理，其中包括应用数字签名，如果在 AS2 单向协议属性中启用。</span><span class="sxs-lookup"><span data-stu-id="3907f-132">Performs MIME processing, including applying a digital signature, if enabled in the AS2 one-way agreement properties.</span></span>  
  
-   <span data-ttu-id="3907f-133">不可否认数据库 （BizTalkDTADb 数据库的 EdiMessageContent 表） 中创建相关条目。</span><span class="sxs-lookup"><span data-stu-id="3907f-133">Makes correlation entries in the non-repudiation database (the EdiMessageContent table of the BizTalkDTADb database).</span></span>  
  
-   <span data-ttu-id="3907f-134">创建 MDN 的副本 （以传输格式） 并将其存储在不可否认数据库中，如果在中启用**对出站 MDN 启用 NRR**协议属性。</span><span class="sxs-lookup"><span data-stu-id="3907f-134">Makes a copy of the MDN (in wire format) and stores it in the non-repudiation database, if enabled in the **NRR enabled for outbound MDN** agreement property.</span></span>  
  
-   <span data-ttu-id="3907f-135">将 MDN 传递到 HTTP 适配器。</span><span class="sxs-lookup"><span data-stu-id="3907f-135">Delivers the MDN to the HTTP adapter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3907f-136">请参阅</span><span class="sxs-lookup"><span data-stu-id="3907f-136">See Also</span></span>  
 <span data-ttu-id="3907f-137">[BizTalk Server 如何发送 AS2 消息](../core/how-biztalk-server-sends-as2-messages.md) </span><span class="sxs-lookup"><span data-stu-id="3907f-137">[How BizTalk Server Sends AS2 Messages](../core/how-biztalk-server-sends-as2-messages.md) </span></span>  
 [<span data-ttu-id="3907f-138">AS2 发送组件</span><span class="sxs-lookup"><span data-stu-id="3907f-138">AS2 Send Components</span></span>](../core/as2-send-components.md)