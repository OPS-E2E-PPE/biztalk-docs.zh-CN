---
title: WCF 适配器常见问题解答：WCF 错误处理 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: fdbd1ea6-4898-415c-ac5e-f804565759a8
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f43e7eaccfdb13324d374833ee27fe7144abb9cb
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65379850"
---
# <a name="wcf-adapter-faq-wcf-error-handling"></a><span data-ttu-id="64772-102">WCF 适配器常见问题解答：WCF 错误处理</span><span class="sxs-lookup"><span data-stu-id="64772-102">WCF Adapter FAQ: WCF Error Handling</span></span>
## <a name="how-do-the-wcf-adapters-handle-errors-and-soap-faults-during-message-processing"></a><span data-ttu-id="64772-103">WCF 适配器如何处理错误和 SOAP 错误消息处理过程？</span><span class="sxs-lookup"><span data-stu-id="64772-103">How do the WCF adapters handle errors and SOAP faults during message processing?</span></span>  
 <span data-ttu-id="64772-104">对于接收位置，可以配置下的两个错误处理选项之一**的错误处理**部分**消息**选项卡中**传输属性**对话框框。</span><span class="sxs-lookup"><span data-stu-id="64772-104">For a receive location, you can configure one of two error handling options under the **Error Handling** section on the **Messages** tab in the **Transport Properties** dialog box.</span></span>  
  
 <span data-ttu-id="64772-105">如果**失败时挂起请求消息**选择选项后，将挂起传入请求消息应该有在接收管道中的处理故障或路由消息的故障。</span><span class="sxs-lookup"><span data-stu-id="64772-105">If the **Suspend request message on failure** option is selected, the incoming request message will be suspended should there be a processing failure in the receive pipeline or a failure in the routing of the message.</span></span> <span data-ttu-id="64772-106">这样，消息的发件人，要成功传输到 BizTalk Server 并接收确认 (ACK) 消息。</span><span class="sxs-lookup"><span data-stu-id="64772-106">This allows the sender of the message to succeed in their transmission to BizTalk Server and receive an acknowledgment (ACK) message.</span></span> <span data-ttu-id="64772-107">BizTalk Server 将挂起消息并记录失败消息的完整的错误记录。</span><span class="sxs-lookup"><span data-stu-id="64772-107">BizTalk Server will suspend the message and record a complete error record for the failed message.</span></span> <span data-ttu-id="64772-108">但是，它也不发送的消息异常返回到发件人在这种情况下。</span><span class="sxs-lookup"><span data-stu-id="64772-108">However, it also does not send the message exception back to the sender in this case.</span></span> <span data-ttu-id="64772-109">这适用于单向端口只会发送 ACK 如果选中，并且如果未选中将 NACK。</span><span class="sxs-lookup"><span data-stu-id="64772-109">This applies to one-way ports only and will send an ACK if checked, and if unchecked will send a NACK.</span></span> <span data-ttu-id="64772-110">对于双向端口，如果处理失败，BizTalk 将收到 NACK。</span><span class="sxs-lookup"><span data-stu-id="64772-110">For two-way ports, if processing fails, BizTalk will always receive a NACK.</span></span>  
  
 <span data-ttu-id="64772-111">但是，如果客户端需要有权访问失败的异常，请选择**错误中包括异常详细信息**选项。</span><span class="sxs-lookup"><span data-stu-id="64772-111">However, if the client needs to have access to the failed exception, select the **Include exception details in faults** option.</span></span> <span data-ttu-id="64772-112">选中时，这将返回 SOAP 错误给调用方如果发生处理错误。</span><span class="sxs-lookup"><span data-stu-id="64772-112">When selected, this returns a SOAP fault to the caller if a processing error occurs.</span></span> <span data-ttu-id="64772-113">这是与 serviceDebug 行为与"IncludeExceptionDetailsInFaults"指定为 True**行为**Wcf-custom 或 Wcf-customisolated 适配器的选项卡。</span><span class="sxs-lookup"><span data-stu-id="64772-113">This is the same as specifying the serviceDebug behavior with “IncludeExceptionDetailsInFaults” to True on the **Behavior** tab of the WCF-Custom or WCF-CustomIsolated adapters.</span></span> <span data-ttu-id="64772-114">现在，详细的异常发送到客户端。</span><span class="sxs-lookup"><span data-stu-id="64772-114">The detailed exception is now sent to the client.</span></span> <span data-ttu-id="64772-115">此选项是使用更可行、 更安全的比在生产环境中的应用程序开发期间使用，因为内部错误消息最有可能应不会发送到服务调用方。</span><span class="sxs-lookup"><span data-stu-id="64772-115">This option is more practical and safer to use during development of an application than in production because the internal fault messages most likely should not be sent to callers of the service.</span></span>  
  
 <span data-ttu-id="64772-116">对于双向发送端口，您可以选择是否将转发到原始调用方的 SOAP 错误消息通过要求响应发送端口通过选择**传播错误消息**。</span><span class="sxs-lookup"><span data-stu-id="64772-116">For the two-way send port, you can choose whether to forward SOAP fault messages on to the original caller over a solicit-response send port by selecting **Propagate fault message**.</span></span> <span data-ttu-id="64772-117">如果不选择此选项，BizTalk Server 将首先生成 NACK，然后挂起该消息。</span><span class="sxs-lookup"><span data-stu-id="64772-117">If this option is not selected, BizTalk Server will generate a NACK first, and then suspend the message.</span></span> <span data-ttu-id="64772-118">如果选择它，则 BizTalk Server 会将消息视为有效 WCF 响应消息从外部服务和响应消息将不被挂起，因为它传播。</span><span class="sxs-lookup"><span data-stu-id="64772-118">If it is selected, BizTalk Server will treat the message as a valid WCF response message from the external service and the response message will not be suspended because it is propagated.</span></span>  
  
## <a name="how-do-the-wcf-adapters-handle-message-transmission-timing-issues"></a><span data-ttu-id="64772-119">WCF 适配器如何处理消息传输计时问题？</span><span class="sxs-lookup"><span data-stu-id="64772-119">How do the WCF adapters handle message transmission timing issues?</span></span>  
 <span data-ttu-id="64772-120">你可以通过使用控制 WCF 适配器的计时问题**绑定**选项卡**传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="64772-120">You can control timing issues for the WCF adapters by using the **Binding** tab in the **Transport Properties** dialog box.</span></span> <span data-ttu-id="64772-121">这些设置是**开放**，**发送**，并**关闭超时**。</span><span class="sxs-lookup"><span data-stu-id="64772-121">These settings are **Open**, **Send**, and **Close Timeout**.</span></span> <span data-ttu-id="64772-122">（没有还可以使用自定义适配器设置的接收超时值。）这些设置分别是一个通道，以打开、 发送和通道关闭 （和接收自定义） 的时间才能完成的操作。</span><span class="sxs-lookup"><span data-stu-id="64772-122">(There is also a Receive time-out that you can set by using custom adapters.) These settings are respectively the time for a channel to open, send, and a channel to close (and receive for custom) operations to finish.</span></span> <span data-ttu-id="64772-123">所有三个默认为一分钟至 23:59 最大周期。</span><span class="sxs-lookup"><span data-stu-id="64772-123">All three default to one minute minimum to 23:59 maximum period.</span></span>