---
title: 最佳做法和建议为 FTP 适配器 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- best practices, FTP adapters
- FTP adapters, best practices
ms.assetid: f73b2016-d48c-48d8-9ba0-96e26b694d1e
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 85967756089be91939bf5b6f73b12d36ed8caa51
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22234485"
---
# <a name="best-practices-and-recommendations-for-the-ftp-adapter"></a><span data-ttu-id="da34b-102">最佳做法和建议为 FTP 适配器</span><span class="sxs-lookup"><span data-stu-id="da34b-102">Best practices and recommendations for the FTP Adapter</span></span>
<span data-ttu-id="da34b-103">阅读有关最佳实践、 安全建议，并增强功能的 FTP 适配器。</span><span class="sxs-lookup"><span data-stu-id="da34b-103">Read about the best practices, security recommendations, and enhancements for the FTP adapter.</span></span>

## <a name="best-practices"></a><span data-ttu-id="da34b-104">最佳做法</span><span class="sxs-lookup"><span data-stu-id="da34b-104">Best practices</span></span>  
  
-   <span data-ttu-id="da34b-105">定期从临时文件夹中删除未完整接收的文件，以防止这些文件占用计算机资源以及可能造成的服务中断。</span><span class="sxs-lookup"><span data-stu-id="da34b-105">Delete partially received files from the temporary folder on a regular basis to keep files from using computer resources and potentially disrupting service.</span></span>  
  
-   <span data-ttu-id="da34b-106">如果使用流服务器，则在 MessageBox 数据库接收了整个文件后才允许对新文件进行读取访问。</span><span class="sxs-lookup"><span data-stu-id="da34b-106">When working with a streaming server, deny read access to the new file until the MessageBox database receives the entire file.</span></span> <span data-ttu-id="da34b-107">如果使用 FTP 适配器向 MessageBox 数据库提交不完整的文件，则 MessageBox 数据库会成功存储该消息，但 FTP 适配器将无法从接收位置删除该不完整的消息。</span><span class="sxs-lookup"><span data-stu-id="da34b-107">If a partial file is submitted to the MessageBox database by the FTP adapter, the MessageBox database will successfully store the message, but the FTP adapter will not be able to delete the partial message from the receive location.</span></span>  
  
-   <span data-ttu-id="da34b-108">为确保 FTP 适配器接收处理程序的高可用性，FTP 适配器接收处理程序应配置为在群集 BizTalk 主机实例中运行。</span><span class="sxs-lookup"><span data-stu-id="da34b-108">To ensure high availability for the FTP adapter receive handler, the FTP adapter receive handler should be configured to run in a clustered BizTalk Host instance.</span></span> <span data-ttu-id="da34b-109">有关详细信息请参阅[在群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="da34b-109">For more information see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  

## <a name="security-recommendations-and-tips"></a><span data-ttu-id="da34b-110">安全建议和提示</span><span class="sxs-lookup"><span data-stu-id="da34b-110">Security recommendations and tips</span></span>

<span data-ttu-id="da34b-111">BizTalk Server 可以从文件传输协议 (FTP) 服务器接收文件并将文件发送到 FTP 服务器的其他应用程序。</span><span class="sxs-lookup"><span data-stu-id="da34b-111">BizTalk Server can receive files from a File Transfer Protocol (FTP) server and send files to an FTP server for other applications.</span></span> <span data-ttu-id="da34b-112">BizTalk Server 并不作为 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="da34b-112">BizTalk Server does not act as an FTP server.</span></span>  
  
 <span data-ttu-id="da34b-113">FTP 实际上并不安全：用户名、密码以及其他凭据均以明文形式在网络上传输。</span><span class="sxs-lookup"><span data-stu-id="da34b-113">FTP is, by nature, not secure: The user name, password, and other credentials traverse the network in clear text.</span></span> <span data-ttu-id="da34b-114">同样，上载或下载的文件也是以明文形式传输的，并且可以在传输过程中轻易地查看和篡改。</span><span class="sxs-lookup"><span data-stu-id="da34b-114">Likewise, files uploaded or downloaded move across in clear text and can be easily viewed or tampered with along the way.</span></span> <span data-ttu-id="da34b-115">此外，攻击者可以欺骗 FTP 服务器本身，称为恶意服务器攻击。</span><span class="sxs-lookup"><span data-stu-id="da34b-115">Moreover, an attacker could spoof the FTP server itself, known as a rogue server attack.</span></span> <span data-ttu-id="da34b-116">在这种情况下，您无法判断某特定的 FTP 服务器是否为您想进行通信的计算机。</span><span class="sxs-lookup"><span data-stu-id="da34b-116">In this case you cannot tell if a particular FTP server is indeed the computer that you intended to communicate with.</span></span>  
  
 <span data-ttu-id="da34b-117">若要解决这些问题，FTP 适配器支持 SSL/TLS 协议，以确保数据通过加密确保机密性。</span><span class="sxs-lookup"><span data-stu-id="da34b-117">To overcome these problems, the FTP adapter supports the SSL/TLS protocol that ensures data confidentiality through encryption.</span></span>  
  
 <span data-ttu-id="da34b-118">有关使用 FTP 协议时的一般安全注意事项，请参阅[Internet 常见问题存档](http://go.microsoft.com/fwlink/p/?LinkId=24779)(http://go.microsoft.com/fwlink/p/?LinkId=24779)。</span><span class="sxs-lookup"><span data-stu-id="da34b-118">For general security considerations when you use the FTP protocol, see the [Internet FAQ Archives](http://go.microsoft.com/fwlink/p/?LinkId=24779) (http://go.microsoft.com/fwlink/p/?LinkId=24779).</span></span>   
  
 <span data-ttu-id="da34b-119">我们建议用于保护和部署你的环境中的 FTP 适配器使用以下准则：</span><span class="sxs-lookup"><span data-stu-id="da34b-119">We recommend that you use the following guidelines for securing and deploying the FTP adapter in your environment:</span></span>  

- <span data-ttu-id="da34b-120">保护你服务器和限制访问的数据。</span><span class="sxs-lookup"><span data-stu-id="da34b-120">Secure your server and limit access to the data.</span></span> <span data-ttu-id="da34b-121">由于 FTP 协议不是安全协议，因此它易受攻击。</span><span class="sxs-lookup"><span data-stu-id="da34b-121">Since the FTP protocol is not a secure protocol, it will always be vulnerable.</span></span> <span data-ttu-id="da34b-122">你可确保 FTP 服务器通过使用专用的连接，并将限制在服务器和 BizTalk Server 和 FTP 主机之间的连接的安全。</span><span class="sxs-lookup"><span data-stu-id="da34b-122">You can ensure that the FTP server is secure by using a dedicated connection, and limiting the server and the connection between BizTalk Server and the FTP host.</span></span> <span data-ttu-id="da34b-123">您也可以设置 FTP 服务器的安全策略以允许与 FTP 客户端的安全连接。</span><span class="sxs-lookup"><span data-stu-id="da34b-123">You can also set the security policies of the FTP server to allow for secure connections with the FTP client.</span></span>  

- <span data-ttu-id="da34b-124">将 FTP 适配器配置为使用安全套接字层 (SSL) 协议在适配器和 FTP 服务器之间进行通信。</span><span class="sxs-lookup"><span data-stu-id="da34b-124">Configure the FTP adapter to use Secure Sockets Layer (SSL) protocol for the communication between the adapter and the FTP server.</span></span> <span data-ttu-id="da34b-125">SSL 协议通过加密可确保数据机密性。</span><span class="sxs-lookup"><span data-stu-id="da34b-125">SSL protocol ensures data confidentiality through encryption.</span></span> <span data-ttu-id="da34b-126">这意味着会对用户 ID 和密码加密，而不以纯文本格式发送。</span><span class="sxs-lookup"><span data-stu-id="da34b-126">This means that user IDs and passwords are encrypted and not sent as plain text.</span></span> <span data-ttu-id="da34b-127">使用 FTP 适配器，您也可以加密 FTP 连接的数据通道。</span><span class="sxs-lookup"><span data-stu-id="da34b-127">With the FTP adapter, you also have a choice to encrypt the data channel of the FTP connection.</span></span> <span data-ttu-id="da34b-128">请参阅**增强功能**（本主题中）。</span><span class="sxs-lookup"><span data-stu-id="da34b-128">See **Enhancements** (in this topic).</span></span>
  
-   <span data-ttu-id="da34b-129">若要实现安全的文件传输，配置 FTP 适配器所提供的 SSL 特定属性。</span><span class="sxs-lookup"><span data-stu-id="da34b-129">To achieve secure file transfer, configure the SSL-specific properties provided by the FTP adapter.</span></span> <span data-ttu-id="da34b-130">请参阅**增强功能**（本主题中）。</span><span class="sxs-lookup"><span data-stu-id="da34b-130">See **Enhancements** (in this topic).</span></span> 
  
-   <span data-ttu-id="da34b-131">FTP 适配器支持 FTP 请求 Comments (RFC) 959。</span><span class="sxs-lookup"><span data-stu-id="da34b-131">The FTP adapter supports FTP Request for Comments (RFC) 959.</span></span> <span data-ttu-id="da34b-132">请参阅[World Wide Web Consortium (W3C)](http://go.microsoft.com/fwlink/p/?LinkId=24781) (http://go.microsoft.com/fwlink/p/?LinkId=24781)。</span><span class="sxs-lookup"><span data-stu-id="da34b-132">See the [World Wide Web Consortium (W3C)](http://go.microsoft.com/fwlink/p/?LinkId=24781) (http://go.microsoft.com/fwlink/p/?LinkId=24781).</span></span> <span data-ttu-id="da34b-133">FTP 适配器不支持安全 FTP (SFTP) 协议。</span><span class="sxs-lookup"><span data-stu-id="da34b-133">The FTP adapter does not support the Secure FTP (SFTP) protocol.</span></span> <span data-ttu-id="da34b-134">请参阅[SFTP 适配器](../core/sftp-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="da34b-134">See the [SFTP adapter](../core/sftp-adapter.md).</span></span>
  
-   <span data-ttu-id="da34b-135">您可以跨防火墙使用 FTP 适配器。</span><span class="sxs-lookup"><span data-stu-id="da34b-135">You can use the FTP adapter across firewalls.</span></span> <span data-ttu-id="da34b-136">根据你使用的防火墙的类型，你可能需要配置一个或多个以下的防火墙属性： 用户名、 密码、 计算机、 端口和防火墙类型 (无、 socks 4，socks 5)，和模式。</span><span class="sxs-lookup"><span data-stu-id="da34b-136">Depending on the type of firewall you use, you may have to configure one or more of the following firewall properties: username, password, computer, port, firewall type (none, socks 4, socks 5), and mode.</span></span>  
  
-   <span data-ttu-id="da34b-137">我们建议你将远程 FTP 服务器放置在安全的位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-137">We recommend you place the remote FTP server in a secure location.</span></span> <span data-ttu-id="da34b-138">您必须确保此服务器的物理安全和网络安全，以便将欺诈服务器攻击减到最少。</span><span class="sxs-lookup"><span data-stu-id="da34b-138">You must ensure the physical and network security of this server to minimize rogue server attacks.</span></span>  
  
-   <span data-ttu-id="da34b-139">FTP 适配器支持使用企业单一登录 (SSO)。</span><span class="sxs-lookup"><span data-stu-id="da34b-139">The FTP adapter supports the use of Enterprise Single Sign-On (SSO).</span></span> <span data-ttu-id="da34b-140">请参阅[实现企业单一登录](../core/implementing-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="da34b-140">See [Implementing Enterprise Single Sign-On](../core/implementing-enterprise-single-sign-on.md).</span></span>  
  
-   <span data-ttu-id="da34b-141">默认情况下，FTP 接收适配器必须在 FTP 服务器中具有写入权限，因为适配器将在下载后从服务器中删除文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-141">By default, the FTP receive adapter must have write permissions in the FTP server because the adapter deletes the file from the server after download.</span></span> <span data-ttu-id="da34b-142">但是，FTP 适配器支持从只读位置的文件下载。</span><span class="sxs-lookup"><span data-stu-id="da34b-142">However, the FTP adapter supports downloading of files from read-only locations.</span></span> <span data-ttu-id="da34b-143">请参阅**增强功能**（本主题中）。</span><span class="sxs-lookup"><span data-stu-id="da34b-143">See **Enhancements** (in this topic).</span></span>
  
- <span data-ttu-id="da34b-144">在使用 FTP 发送端口时，必须在配置发送端口时指定并存储用户 ID 和密码组合。</span><span class="sxs-lookup"><span data-stu-id="da34b-144">When using an FTP send port, you must specify and store a user ID and password combination when configuring the send port.</span></span> <span data-ttu-id="da34b-145">该适配器将使用此信息连接到 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="da34b-145">The adapter uses this information to connect to the FTP server.</span></span> <span data-ttu-id="da34b-146">用户凭据以纯文本格式存储在 SQL Server 数据库中。</span><span class="sxs-lookup"><span data-stu-id="da34b-146">The user credentials are stored in a SQL Server database in plain text.</span></span> <span data-ttu-id="da34b-147">在动态发送端口中，凭据将发送到 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="da34b-147">In a dynamic send port, credentials are sent to the FTP server.</span></span> <span data-ttu-id="da34b-148">如果生产环境要求较强的安全性，请对该服务器使用匿名凭据。</span><span class="sxs-lookup"><span data-stu-id="da34b-148">If production environment requirements warrant stronger security, use anonymous credentials to the server.</span></span>  
  
-   <span data-ttu-id="da34b-149">当系统提示你的帐户时，我们建议你输入现有的用户帐户，而非本地系统帐户。</span><span class="sxs-lookup"><span data-stu-id="da34b-149">When the system prompts you for an account, we recommend that you enter an existing user account, and not the local system account.</span></span> <span data-ttu-id="da34b-150">从而实现更好的安全性，并允许适配器以无人参与模式运行，而无需登录。</span><span class="sxs-lookup"><span data-stu-id="da34b-150">This enables you to implement better security, and allows the adapter to run in unattended mode, without logging on.</span></span>  

## <a name="enhancements"></a><span data-ttu-id="da34b-151">增强功能</span><span class="sxs-lookup"><span data-stu-id="da34b-151">Enhancements</span></span>

### <a name="transferring-data-to-and-from-a-secure-ftp-server"></a><span data-ttu-id="da34b-152">将数据和从安全的 FTP 服务器</span><span class="sxs-lookup"><span data-stu-id="da34b-152">Transferring data to and from a secure FTP server</span></span>  
 <span data-ttu-id="da34b-153">FTP 适配器支持从 FTPS 服务器的文件传输，通过安全套接字层 (SSL) / 传输层安全 (TLS)。</span><span class="sxs-lookup"><span data-stu-id="da34b-153">The FTP adapter supports file transfers from an FTPS server over Secure Sockets Layer (SSL)/Transport Level Security (TLS).</span></span> <span data-ttu-id="da34b-154">SSL/TLS 可通过加密确保数据的保密性。</span><span class="sxs-lookup"><span data-stu-id="da34b-154">SSL/TLS ensures data confidentiality through encryption.</span></span> <span data-ttu-id="da34b-155">你必须通过配置适配器提供的 SSL 特有的属性来启用安全模式。</span><span class="sxs-lookup"><span data-stu-id="da34b-155">You must enable the secure mode by configuring SSL-specific properties provided by the adapter.</span></span> <span data-ttu-id="da34b-156">由于适配器允许从安全 FTP 服务器读取和写入数据，因此，SSL 特有的属性在配置发送处理程序/端口时可用，而且还可用于接收处理程序/位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-156">Because the adapter allows for both reading and writing data from a secure FTP server, the SSL-specific properties are available when configuring send handlers/ports and also with receive handlers/locations.</span></span>  

<span data-ttu-id="da34b-157">从开始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]，FTP 适配器不再需要 SYST 命令：</span><span class="sxs-lookup"><span data-stu-id="da34b-157">Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)], the FTP adapter no longer requires the SYST command:</span></span> 

- <span data-ttu-id="da34b-158">**FTP 服务器类型**属性 – 设置此属性，以使用不需要 SYST 命令的服务器。</span><span class="sxs-lookup"><span data-stu-id="da34b-158">**FTP Server Type** property – Set this property to use a server that doesn't require the SYST command.</span></span>
   
 <span data-ttu-id="da34b-159">以下选项可用于配置 SSL 特有的属性：</span><span class="sxs-lookup"><span data-stu-id="da34b-159">The following options are available for configuring the SSL-specific properties:</span></span>  

-   <span data-ttu-id="da34b-160">**使用 SSL**属性 – 设置此属性，因此该 FTP 适配器必须为每个传输会话使用 SSL。</span><span class="sxs-lookup"><span data-stu-id="da34b-160">**Use SSL** property – Set this property so that FTP adapter must use SSL for each transfer session.</span></span>  
  
-   <span data-ttu-id="da34b-161">**启用数据保护**属性 – 设置此属性以启用数据加密。</span><span class="sxs-lookup"><span data-stu-id="da34b-161">**Enable Data Protection** property – Set this property to turn on data encryption.</span></span> <span data-ttu-id="da34b-162">若要使此设置生效，FTPS 服务器的安全策略必须允许与适配器的安全 SSL 连接。</span><span class="sxs-lookup"><span data-stu-id="da34b-162">The security policies of the FTPS server must allow for secure SSL connections with the adapter in order for this setting to work.</span></span>  
  
-   <span data-ttu-id="da34b-163">**FTPS 连接模式**属性 – 将此属性来确定在激活安全设置：</span><span class="sxs-lookup"><span data-stu-id="da34b-163">**FTPS Connection Mode** property – Set this property to determine when security is activated:</span></span>  
  
    -   <span data-ttu-id="da34b-164">在**隐式**模式下，安全将自动打开只要适配器连接到服务器。</span><span class="sxs-lookup"><span data-stu-id="da34b-164">In **Implicit** mode, security is automatically turned on as soon as the adapter connects to the server.</span></span>  
  
    -   <span data-ttu-id="da34b-165">在**Explicit**模式下，适配器发送命令以启动安全控制通道。</span><span class="sxs-lookup"><span data-stu-id="da34b-165">In **Explicit** mode, the adapter sends a command to initiate a secure control channel.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="da34b-166">FTP 适配器不支持对服务器证书进行吊销检查。</span><span class="sxs-lookup"><span data-stu-id="da34b-166">The FTP adapter does not support revocation checks on the server certificates.</span></span>  
  
### <a name="support-for-downloading-files-from-locations-marked-as-read-only"></a><span data-ttu-id="da34b-167">对从标记为只读的位置下载文件的支持</span><span class="sxs-lookup"><span data-stu-id="da34b-167">Support for downloading files from locations marked as read-only</span></span>  
<span data-ttu-id="da34b-168">FTP 适配器支持从只读的文件位置的文件的下载。</span><span class="sxs-lookup"><span data-stu-id="da34b-168">The FTP adapter supports download of files from read-only file locations.</span></span> <span data-ttu-id="da34b-169">现在，适配器会在数据库中保留一个下载文件的列表。</span><span class="sxs-lookup"><span data-stu-id="da34b-169">The adapter now maintains a list of downloaded files in a database.</span></span> <span data-ttu-id="da34b-170">对于下一次下载，会对 FTP 服务器上的文件列表与适配器保留的文件列表进行比较，仅下载服务器上的新文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-170">For the next download, the list of files on the FTP server is compared to the list of files maintained by the adapter, and only new files on the server are downloaded.</span></span> <span data-ttu-id="da34b-171">若要支持其中的现有文件更新两个下载文件之间的方案，可以配置的适配器还通过设置来检查文件时间戳**启用比较时间戳**属性 FTP 接收位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-171">To support scenarios where an existing file is updated between two downloads, you can configure the adapter to also check file timestamps by setting the **Enable Timestamp Comparison** property for the FTP receive location.</span></span> <span data-ttu-id="da34b-172">在这种情况下，即使该文件将相同，但更新该时间戳，适配器将下载文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-172">In such cases, even if the file name is same but the timestamp is updated, the adapter downloads the file.</span></span>  
  
 <span data-ttu-id="da34b-173">有时，FTP 服务器不支持将修改后的时间戳与文件关联。</span><span class="sxs-lookup"><span data-stu-id="da34b-173">Sometimes the FTP server does not support associating a modified timestamp with a file.</span></span> <span data-ttu-id="da34b-174">在这种情况下，你可以通过适配器指定一个时间间隔，此间隔过后会再次下载该文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-174">In such cases, the adapter enables you to specify an interval after which the file will be downloaded again.</span></span> <span data-ttu-id="da34b-175">通过设置来配置此时间间隔**重新下载间隔**属性 FTP 接收位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-175">You configure this interval by setting the **Redownload Interval** property for the FTP receive location.</span></span>  
  
 <span data-ttu-id="da34b-176">下表列出了 FTP 适配器的预期的行为不同的值设置为**下载后删除**，**启用比较时间戳**和**重新下载间隔**属性。</span><span class="sxs-lookup"><span data-stu-id="da34b-176">The following table lists the expected behavior of the FTP adapter for different values set for the **Delete After Download**, **Enable Timestamp Comparison** and **Redownload Interval** properties.</span></span>  
  
|<span data-ttu-id="da34b-177">下载后删除</span><span class="sxs-lookup"><span data-stu-id="da34b-177">Delete After Download</span></span>|<span data-ttu-id="da34b-178">启用时间戳比较</span><span class="sxs-lookup"><span data-stu-id="da34b-178">Enable Timestamp Comparison</span></span>|<span data-ttu-id="da34b-179">重新下载间隔</span><span class="sxs-lookup"><span data-stu-id="da34b-179">Redownload Interval</span></span>|<span data-ttu-id="da34b-180">适配器行为</span><span class="sxs-lookup"><span data-stu-id="da34b-180">Adapter Behavior</span></span>|  
|---|---|---|---|  
|<span data-ttu-id="da34b-181">是</span><span class="sxs-lookup"><span data-stu-id="da34b-181">Yes</span></span>|<span data-ttu-id="da34b-182">不适用</span><span class="sxs-lookup"><span data-stu-id="da34b-182">Not applicable</span></span>|<span data-ttu-id="da34b-183">不适用</span><span class="sxs-lookup"><span data-stu-id="da34b-183">Not applicable</span></span>|<span data-ttu-id="da34b-184">适配器在下载完某个文件后会从 FTP 服务器中将其删除。</span><span class="sxs-lookup"><span data-stu-id="da34b-184">The adapter deletes a file from the FTP server after downloading it.</span></span> <span data-ttu-id="da34b-185">这是适配器的默认行为。</span><span class="sxs-lookup"><span data-stu-id="da34b-185">This is the default behavior of the adapter.</span></span>|  
|<span data-ttu-id="da34b-186">是</span><span class="sxs-lookup"><span data-stu-id="da34b-186">No</span></span>|<span data-ttu-id="da34b-187">是</span><span class="sxs-lookup"><span data-stu-id="da34b-187">Yes</span></span>|<span data-ttu-id="da34b-188">不适用</span><span class="sxs-lookup"><span data-stu-id="da34b-188">Not applicable</span></span>|<span data-ttu-id="da34b-189">适配器不会在下载完某个文件后从 FTP 服务器中将其删除。</span><span class="sxs-lookup"><span data-stu-id="da34b-189">The adapter does not delete a file from the FTP server after downloading it.</span></span> <span data-ttu-id="da34b-190">适配器会使用 MDTM 命令比较该文件的上次修改的时间戳。</span><span class="sxs-lookup"><span data-stu-id="da34b-190">Instead the adapter compares the file’s last modified timestamp using the MDTM command.</span></span> <span data-ttu-id="da34b-191">适配器会再次下载该文件（具体取决于该时间戳）。</span><span class="sxs-lookup"><span data-stu-id="da34b-191">Depending on the timestamp, the adapter downloads the file again.</span></span>|  
|<span data-ttu-id="da34b-192">是</span><span class="sxs-lookup"><span data-stu-id="da34b-192">No</span></span>|<span data-ttu-id="da34b-193">是</span><span class="sxs-lookup"><span data-stu-id="da34b-193">No</span></span>|<span data-ttu-id="da34b-194">适用</span><span class="sxs-lookup"><span data-stu-id="da34b-194">Applicable</span></span>|<span data-ttu-id="da34b-195">在指定的时间间隔过后，无论文件是否已修改，FTP 适配器都会从 FTP 服务器下载该文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-195">The FTP adapter downloads a file from the FTP server after the interval you specify, irrespective of whether the file has been modified or not.</span></span>|  
  
### <a name="support-for-atomic-file-transfer-in-ascii-mode"></a><span data-ttu-id="da34b-196">对 ASCII 模式下原子文件传输的支持</span><span class="sxs-lookup"><span data-stu-id="da34b-196">Support for atomic file transfer in ASCII mode</span></span>  
 <span data-ttu-id="da34b-197">FTP 适配器支持 ASCII 模式下原子文件传输。</span><span class="sxs-lookup"><span data-stu-id="da34b-197">The FTP adapter supports atomic file transfer for ASCII mode.</span></span> <span data-ttu-id="da34b-198">若要启用原子文件传输 ASCII 模式下的，适配器使用**临时文件夹**属性。</span><span class="sxs-lookup"><span data-stu-id="da34b-198">To enable atomic file transfer for ASCII mode, the adapter uses the **Temporary Folder** property.</span></span> <span data-ttu-id="da34b-199">此属性定义 FTP 服务器上的一个临时位置，文件首先移至此位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-199">This property defines a temporary location on the FTP server where the file is first moved to.</span></span> <span data-ttu-id="da34b-200">在完全传输至该临时位置之后，文件会移动至 FTP 服务器上的相关位置。</span><span class="sxs-lookup"><span data-stu-id="da34b-200">After the file is completely transferred to the temporary location, the file is then moved to the relevant location on the FTP server.</span></span> <span data-ttu-id="da34b-201">此处的假设是，该临时位置与 FTP 服务器上的相关位置之间的文件传输是原子文件传输。</span><span class="sxs-lookup"><span data-stu-id="da34b-201">Here, the assumption is that the file transfer is atomic between the temporary location and the relevant location on the FTP server.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="da34b-202">使用临时文件夹 ASCII 文件的扩展名是仅适用于**发送**，并不适用于**接收**。</span><span class="sxs-lookup"><span data-stu-id="da34b-202">The extension of using temporary folder to ASCII file is applicable only for the **Send**, and does not apply to **Receive**.</span></span> <span data-ttu-id="da34b-203">实施此功能的主要原因在于，在某个文件被完全写入之前，第三方应用程序将无法读取该文件。</span><span class="sxs-lookup"><span data-stu-id="da34b-203">The primary reason for implementing this feature is that, a third party application will not read a file until it is fully written.</span></span> <span data-ttu-id="da34b-204">在 BizTalk 接收文件的情况下，适配器仅在该文件已完全读取后才会将其提交到 BizTalk。</span><span class="sxs-lookup"><span data-stu-id="da34b-204">In the case of BizTalk receiving the file, the adapter will submit the file to BizTalk only after it is completely read.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="da34b-205">在二进制模式下，**临时文件夹**属性还可以用于恢复文件传输，如果在此期间失败。</span><span class="sxs-lookup"><span data-stu-id="da34b-205">In binary mode, the **Temporary Folder** property can also be used to resume file transfer if there is a failure in between.</span></span> <span data-ttu-id="da34b-206">这不适用于 ASCII 模式。</span><span class="sxs-lookup"><span data-stu-id="da34b-206">This is not applicable for ASCII mode.</span></span> <span data-ttu-id="da34b-207">对于 ASCII 模式，**临时文件夹**属性仅用于原子文件传输。</span><span class="sxs-lookup"><span data-stu-id="da34b-207">For ASCII mode, the **Temporary Folder** property is only used for atomic file transfer.</span></span>  
  
 
## <a name="next"></a><span data-ttu-id="da34b-208">Next</span><span class="sxs-lookup"><span data-stu-id="da34b-208">Next</span></span> 
[<span data-ttu-id="da34b-209">配置 FTP 适配器</span><span class="sxs-lookup"><span data-stu-id="da34b-209">Configuring the FTP Adapter</span></span>](../core/configuring-the-ftp-adapter.md)  

## <a name="see-also"></a><span data-ttu-id="da34b-210">另请参阅</span><span class="sxs-lookup"><span data-stu-id="da34b-210">See Also</span></span>  
 <span data-ttu-id="da34b-211">[用于接收和发送服务器端口](../core/ports-for-the-receive-and-send-servers.md) </span><span class="sxs-lookup"><span data-stu-id="da34b-211">[Ports for the Receive and Send Servers](../core/ports-for-the-receive-and-send-servers.md) </span></span>  
 [<span data-ttu-id="da34b-212">最低安全用户权限</span><span class="sxs-lookup"><span data-stu-id="da34b-212">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)
