---
title: 最佳做法和 FTP 适配器的建议 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- best practices, FTP adapters
- FTP adapters, best practices
ms.assetid: f73b2016-d48c-48d8-9ba0-96e26b694d1e
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c4e9667b71af44089bfa8bf84a2b5f78dcfb244d
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65358412"
---
# <a name="best-practices-and-recommendations-for-the-ftp-adapter"></a><span data-ttu-id="3f7d3-102">最佳做法和 FTP 适配器的建议</span><span class="sxs-lookup"><span data-stu-id="3f7d3-102">Best practices and recommendations for the FTP Adapter</span></span>
<span data-ttu-id="3f7d3-103">阅读有关最佳实践、 安全建议和 FTP 适配器的增强功能。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-103">Read about the best practices, security recommendations, and enhancements for the FTP adapter.</span></span>

## <a name="best-practices"></a><span data-ttu-id="3f7d3-104">最佳做法</span><span class="sxs-lookup"><span data-stu-id="3f7d3-104">Best practices</span></span>  
  
-   <span data-ttu-id="3f7d3-105">定期从使用计算机资源，并可能会中断服务保留文件的临时文件夹中删除未完整接收的文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-105">Delete partially received files from the temporary folder on a regular basis to keep files from using computer resources and potentially disrupting service.</span></span>  
  
-   <span data-ttu-id="3f7d3-106">在使用流式处理服务器，拒绝读取访问权限的新文件，直到 MessageBox 数据库接收了整个文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-106">When working with a streaming server, deny read access to the new file until the MessageBox database receives the entire file.</span></span> <span data-ttu-id="3f7d3-107">如果 FTP 适配器部分文件提交到 MessageBox 数据库，MessageBox 数据库已成功存储该消息，但 FTP 适配器将无法再从接收位置删除该部分的消息。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-107">If a partial file is submitted to the MessageBox database by the FTP adapter, the MessageBox database will successfully store the message, but the FTP adapter will not be able to delete the partial message from the receive location.</span></span>  
  
-   <span data-ttu-id="3f7d3-108">若要确保高可用性，FTP 适配器的接收处理程序，FTP 适配器接收处理程序应将配置为运行在群集 BizTalk 主机实例中。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-108">To ensure high availability for the FTP adapter receive handler, the FTP adapter receive handler should be configured to run in a clustered BizTalk Host instance.</span></span> <span data-ttu-id="3f7d3-109">有关详细信息请参阅[群集主机内运行适配器处理程序的注意事项](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-109">For more information see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  

## <a name="security-recommendations-and-tips"></a><span data-ttu-id="3f7d3-110">安全建议和提示</span><span class="sxs-lookup"><span data-stu-id="3f7d3-110">Security recommendations and tips</span></span>

<span data-ttu-id="3f7d3-111">BizTalk Server 可以从文件传输协议 (FTP) 服务器接收文件并将文件发送到 FTP 服务器的其他应用程序。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-111">BizTalk Server can receive files from a File Transfer Protocol (FTP) server and send files to an FTP server for other applications.</span></span> <span data-ttu-id="3f7d3-112">BizTalk Server 并不作为 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-112">BizTalk Server does not act as an FTP server.</span></span>  
  
 <span data-ttu-id="3f7d3-113">FTP 是本质上不安全的：用户名、 密码和其他凭据遍历网络以明文形式。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-113">FTP is, by nature, not secure: The user name, password, and other credentials traverse the network in clear text.</span></span> <span data-ttu-id="3f7d3-114">同样，文件上传或下载以明文形式在之间移动，可轻松地查看或篡改此过程。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-114">Likewise, files uploaded or downloaded move across in clear text and can be easily viewed or tampered with along the way.</span></span> <span data-ttu-id="3f7d3-115">此外，攻击者可以欺骗 FTP 服务器本身，称为恶意服务器攻击。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-115">Moreover, an attacker could spoof the FTP server itself, known as a rogue server attack.</span></span> <span data-ttu-id="3f7d3-116">在这种情况下无法判断特定的 FTP 服务器是否确实想进行通信的计算机。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-116">In this case you cannot tell if a particular FTP server is indeed the computer that you intended to communicate with.</span></span>  
  
 <span data-ttu-id="3f7d3-117">若要解决这些问题，FTP 适配器支持 SSL/TLS 协议，以确保数据通过加密确保机密性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-117">To overcome these problems, the FTP adapter supports the SSL/TLS protocol that ensures data confidentiality through encryption.</span></span>  
  
 <span data-ttu-id="3f7d3-118">有关使用 FTP 协议时的一般安全注意事项，请参阅[Internet 常见问题存档](http://go.microsoft.com/fwlink/p/?LinkId=24779)(http://go.microsoft.com/fwlink/p/?LinkId=24779)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-118">For general security considerations when you use the FTP protocol, see the [Internet FAQ Archives](http://go.microsoft.com/fwlink/p/?LinkId=24779) (http://go.microsoft.com/fwlink/p/?LinkId=24779).</span></span>   
  
 <span data-ttu-id="3f7d3-119">我们建议用于保护和部署你的环境中的 FTP 适配器的以下准则：</span><span class="sxs-lookup"><span data-stu-id="3f7d3-119">We recommend that you use the following guidelines for securing and deploying the FTP adapter in your environment:</span></span>  

- <span data-ttu-id="3f7d3-120">保护你服务器和限制访问的数据。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-120">Secure your server and limit access to the data.</span></span> <span data-ttu-id="3f7d3-121">由于 FTP 协议不安全的协议，它将始终为易受攻击。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-121">Since the FTP protocol is not a secure protocol, it will always be vulnerable.</span></span> <span data-ttu-id="3f7d3-122">您可以确保 FTP 服务器通过使用专用的连接，并限制服务器和 BizTalk Server 与 FTP 主机之间的连接的安全。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-122">You can ensure that the FTP server is secure by using a dedicated connection, and limiting the server and the connection between BizTalk Server and the FTP host.</span></span> <span data-ttu-id="3f7d3-123">此外可以设置 FTP 服务器，以便用于与 FTP 客户端的安全连接的服务器的安全策略。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-123">You can also set the security policies of the FTP server to allow for secure connections with the FTP client.</span></span>  

- <span data-ttu-id="3f7d3-124">配置 FTP 适配器在适配器和 FTP 服务器之间的通信使用安全套接字层 (SSL) 协议。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-124">Configure the FTP adapter to use Secure Sockets Layer (SSL) protocol for the communication between the adapter and the FTP server.</span></span> <span data-ttu-id="3f7d3-125">SSL 协议可确保通过加密的数据保密性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-125">SSL protocol ensures data confidentiality through encryption.</span></span> <span data-ttu-id="3f7d3-126">这意味着用户 Id 和密码进行加密和不会以明文形式发送。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-126">This means that user IDs and passwords are encrypted and not sent as plain text.</span></span> <span data-ttu-id="3f7d3-127">使用 FTP 适配器，您还可以选择 FTP 连接的数据通道进行加密。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-127">With the FTP adapter, you also have a choice to encrypt the data channel of the FTP connection.</span></span> <span data-ttu-id="3f7d3-128">请参阅**增强功能**（在本主题中）。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-128">See **Enhancements** (in this topic).</span></span>
  
-   <span data-ttu-id="3f7d3-129">若要实现安全文件传输，配置 FTP 适配器提供的 SSL 特有的属性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-129">To achieve secure file transfer, configure the SSL-specific properties provided by the FTP adapter.</span></span> <span data-ttu-id="3f7d3-130">请参阅**增强功能**（在本主题中）。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-130">See **Enhancements** (in this topic).</span></span> 
  
-   <span data-ttu-id="3f7d3-131">FTP 适配器支持 FTP 征求意见 (RFC) 959。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-131">The FTP adapter supports FTP Request for Comments (RFC) 959.</span></span> <span data-ttu-id="3f7d3-132">请参阅[万维网联合会 (W3C)](http://go.microsoft.com/fwlink/p/?LinkId=24781) (http://go.microsoft.com/fwlink/p/?LinkId=24781)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-132">See the [World Wide Web Consortium (W3C)](http://go.microsoft.com/fwlink/p/?LinkId=24781) (http://go.microsoft.com/fwlink/p/?LinkId=24781).</span></span> <span data-ttu-id="3f7d3-133">FTP 适配器不支持安全 FTP (SFTP) 协议。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-133">The FTP adapter does not support the Secure FTP (SFTP) protocol.</span></span> <span data-ttu-id="3f7d3-134">请参阅[SFTP 适配器](../core/sftp-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-134">See the [SFTP adapter](../core/sftp-adapter.md).</span></span>
  
-   <span data-ttu-id="3f7d3-135">你可以跨防火墙使用 FTP 适配器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-135">You can use the FTP adapter across firewalls.</span></span> <span data-ttu-id="3f7d3-136">根据所使用的防火墙类型，您可能必须配置一个或多个以下的防火墙属性： 用户名、 密码、 计算机、 端口、 防火墙类型 （无、 socks 4，5），和模式。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-136">Depending on the type of firewall you use, you may have to configure one or more of the following firewall properties: username, password, computer, port, firewall type (none, socks 4, socks 5), and mode.</span></span>  
  
-   <span data-ttu-id="3f7d3-137">我们建议将远程 FTP 服务器放在安全的位置。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-137">We recommend you place the remote FTP server in a secure location.</span></span> <span data-ttu-id="3f7d3-138">你必须确保物理和网络安全性的最大程度减少恶意服务器攻击此服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-138">You must ensure the physical and network security of this server to minimize rogue server attacks.</span></span>  
  
-   <span data-ttu-id="3f7d3-139">FTP 适配器支持使用的企业单一登录 (SSO)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-139">The FTP adapter supports the use of Enterprise Single Sign-On (SSO).</span></span> <span data-ttu-id="3f7d3-140">请参阅[实现企业单一登录](../core/implementing-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-140">See [Implementing Enterprise Single Sign-On](../core/implementing-enterprise-single-sign-on.md).</span></span>  
  
-   <span data-ttu-id="3f7d3-141">默认情况下，FTP 接收适配器必须具有写入权限在 FTP 服务器中因为适配器从服务器下载后删除该文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-141">By default, the FTP receive adapter must have write permissions in the FTP server because the adapter deletes the file from the server after download.</span></span> <span data-ttu-id="3f7d3-142">但是，FTP 适配器支持从只读位置下载文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-142">However, the FTP adapter supports downloading of files from read-only locations.</span></span> <span data-ttu-id="3f7d3-143">请参阅**增强功能**（在本主题中）。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-143">See **Enhancements** (in this topic).</span></span>
  
- <span data-ttu-id="3f7d3-144">当使用 FTP 发送端口时，必须指定并配置发送端口时存储用户 ID 和密码组合。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-144">When using an FTP send port, you must specify and store a user ID and password combination when configuring the send port.</span></span> <span data-ttu-id="3f7d3-145">适配器使用此信息以连接到 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-145">The adapter uses this information to connect to the FTP server.</span></span> <span data-ttu-id="3f7d3-146">在 SQL Server 数据库以纯文本形式存储用户凭据。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-146">The user credentials are stored in a SQL Server database in plain text.</span></span> <span data-ttu-id="3f7d3-147">在动态发送端口中，将凭据发送到 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-147">In a dynamic send port, credentials are sent to the FTP server.</span></span> <span data-ttu-id="3f7d3-148">如果生产环境要求较强的安全性，则使用匿名凭据到服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-148">If production environment requirements warrant stronger security, use anonymous credentials to the server.</span></span>  
  
-   <span data-ttu-id="3f7d3-149">当系统提示您输入一个帐户时，我们建议你输入现有的用户帐户，而不是本地系统帐户。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-149">When the system prompts you for an account, we recommend that you enter an existing user account, and not the local system account.</span></span> <span data-ttu-id="3f7d3-150">这使您能够实现更佳的安全性，并允许适配器运行在无人参与模式下，无需登录。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-150">This enables you to implement better security, and allows the adapter to run in unattended mode, without logging on.</span></span>  

## <a name="enhancements"></a><span data-ttu-id="3f7d3-151">增强功能</span><span class="sxs-lookup"><span data-stu-id="3f7d3-151">Enhancements</span></span>

### <a name="transferring-data-to-and-from-a-secure-ftp-server"></a><span data-ttu-id="3f7d3-152">将数据传入和从安全 FTP 服务器</span><span class="sxs-lookup"><span data-stu-id="3f7d3-152">Transferring data to and from a secure FTP server</span></span>  
 <span data-ttu-id="3f7d3-153">FTP 适配器支持从 FTPS 服务器的文件传输通过安全套接字层 (SSL) / 传输层安全 (TLS)。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-153">The FTP adapter supports file transfers from an FTPS server over Secure Sockets Layer (SSL)/Transport Level Security (TLS).</span></span> <span data-ttu-id="3f7d3-154">SSL/TLS 可确保通过加密的数据保密性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-154">SSL/TLS ensures data confidentiality through encryption.</span></span> <span data-ttu-id="3f7d3-155">通过配置适配器提供的 SSL 特有的属性，必须启用安全模式。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-155">You must enable the secure mode by configuring SSL-specific properties provided by the adapter.</span></span> <span data-ttu-id="3f7d3-156">由于适配器允许读取和写入数据，从安全 FTP 服务器，SSL 特有的属性可配置发送处理程序/端口时，还可用于接收处理程序/位置。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-156">Because the adapter allows for both reading and writing data from a secure FTP server, the SSL-specific properties are available when configuring send handlers/ports and also with receive handlers/locations.</span></span>  

<span data-ttu-id="3f7d3-157">从开始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]，FTP 适配器不再需要 SYST 命令：</span><span class="sxs-lookup"><span data-stu-id="3f7d3-157">Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)], the FTP adapter no longer requires the SYST command:</span></span> 

- <span data-ttu-id="3f7d3-158">**FTP 服务器类型**属性 – 设置此属性以使用不需要 SYST 命令的服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-158">**FTP Server Type** property – Set this property to use a server that doesn't require the SYST command.</span></span>
   
  <span data-ttu-id="3f7d3-159">配置 SSL 特有的属性有以下选项：</span><span class="sxs-lookup"><span data-stu-id="3f7d3-159">The following options are available for configuring the SSL-specific properties:</span></span>  

- <span data-ttu-id="3f7d3-160">**使用 SSL**属性 – 设置此属性，因此该 FTP 适配器必须为每个传输会话使用 SSL。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-160">**Use SSL** property – Set this property so that FTP adapter must use SSL for each transfer session.</span></span>  
  
- <span data-ttu-id="3f7d3-161">**启用数据保护**属性 – 设置此属性以启用数据加密。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-161">**Enable Data Protection** property – Set this property to turn on data encryption.</span></span> <span data-ttu-id="3f7d3-162">FTPS 服务器的安全策略必须允许与使此设置，若要运行中的适配器的安全 SSL 连接。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-162">The security policies of the FTPS server must allow for secure SSL connections with the adapter in order for this setting to work.</span></span>  
  
- <span data-ttu-id="3f7d3-163">**FTPS 连接模式**属性 – 设置此属性以确定何时激活安全性：</span><span class="sxs-lookup"><span data-stu-id="3f7d3-163">**FTPS Connection Mode** property – Set this property to determine when security is activated:</span></span>  
  
  -   <span data-ttu-id="3f7d3-164">在中**隐式**模式下，安全将自动打开只要适配器连接到服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-164">In **Implicit** mode, security is automatically turned on as soon as the adapter connects to the server.</span></span>  
  
  -   <span data-ttu-id="3f7d3-165">在中**Explicit**模式下，适配器发送命令，以启动安全控制通道。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-165">In **Explicit** mode, the adapter sends a command to initiate a secure control channel.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3f7d3-166">FTP 适配器不支持对服务器证书的吊销检查。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-166">The FTP adapter does not support revocation checks on the server certificates.</span></span>  
  
### <a name="support-for-downloading-files-from-locations-marked-as-read-only"></a><span data-ttu-id="3f7d3-167">支持，用于从位置下载文件标记为只读的</span><span class="sxs-lookup"><span data-stu-id="3f7d3-167">Support for downloading files from locations marked as read-only</span></span>  
<span data-ttu-id="3f7d3-168">FTP 适配器支持从只读文件位置的文件的下载。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-168">The FTP adapter supports download of files from read-only file locations.</span></span> <span data-ttu-id="3f7d3-169">适配器现在保留在数据库中的已下载文件的列表。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-169">The adapter now maintains a list of downloaded files in a database.</span></span> <span data-ttu-id="3f7d3-170">下一步的下载，FTP 服务器上的文件列表进行比较的适配器，保留的文件的列表并下载服务器上的新文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-170">For the next download, the list of files on the FTP server is compared to the list of files maintained by the adapter, and only new files on the server are downloaded.</span></span> <span data-ttu-id="3f7d3-171">若要支持其中两个下载之间更新现有的文件的情况下，可以配置适配器设置，还检查文件时间戳**启用时间戳比较**属性 ftp 接收位置。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-171">To support scenarios where an existing file is updated between two downloads, you can configure the adapter to also check file timestamps by setting the **Enable Timestamp Comparison** property for the FTP receive location.</span></span> <span data-ttu-id="3f7d3-172">在这种情况下，即使文件名称相同但时间戳更新时，适配器将下载的文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-172">In such cases, even if the file name is same but the timestamp is updated, the adapter downloads the file.</span></span>  
  
 <span data-ttu-id="3f7d3-173">有时在 FTP 服务器不支持将修改后的时间戳与文件相关联。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-173">Sometimes the FTP server does not support associating a modified timestamp with a file.</span></span> <span data-ttu-id="3f7d3-174">在这种情况下，该适配器，可指定的间隔之后将再次下载文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-174">In such cases, the adapter enables you to specify an interval after which the file will be downloaded again.</span></span> <span data-ttu-id="3f7d3-175">通过设置来配置此间隔**重新下载时间间隔**属性 ftp 接收位置。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-175">You configure this interval by setting the **Redownload Interval** property for the FTP receive location.</span></span>  
  
 <span data-ttu-id="3f7d3-176">下表列出了 FTP 适配器的预期的行为，不同的值设置为**下载后删除**，**启用时间戳比较**和**重新下载时间间隔**属性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-176">The following table lists the expected behavior of the FTP adapter for different values set for the **Delete After Download**, **Enable Timestamp Comparison** and **Redownload Interval** properties.</span></span>  
  
|<span data-ttu-id="3f7d3-177">下载后删除</span><span class="sxs-lookup"><span data-stu-id="3f7d3-177">Delete After Download</span></span>|<span data-ttu-id="3f7d3-178">启用时间戳比较</span><span class="sxs-lookup"><span data-stu-id="3f7d3-178">Enable Timestamp Comparison</span></span>|<span data-ttu-id="3f7d3-179">重新下载时间间隔</span><span class="sxs-lookup"><span data-stu-id="3f7d3-179">Redownload Interval</span></span>|<span data-ttu-id="3f7d3-180">适配器行为</span><span class="sxs-lookup"><span data-stu-id="3f7d3-180">Adapter Behavior</span></span>|  
|---|---|---|---|  
|<span data-ttu-id="3f7d3-181">是</span><span class="sxs-lookup"><span data-stu-id="3f7d3-181">Yes</span></span>|<span data-ttu-id="3f7d3-182">不适用</span><span class="sxs-lookup"><span data-stu-id="3f7d3-182">Not applicable</span></span>|<span data-ttu-id="3f7d3-183">不适用</span><span class="sxs-lookup"><span data-stu-id="3f7d3-183">Not applicable</span></span>|<span data-ttu-id="3f7d3-184">适配器下载后从 FTP 服务器中删除的文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-184">The adapter deletes a file from the FTP server after downloading it.</span></span> <span data-ttu-id="3f7d3-185">这是适配器的默认行为。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-185">This is the default behavior of the adapter.</span></span>|  
|<span data-ttu-id="3f7d3-186">否</span><span class="sxs-lookup"><span data-stu-id="3f7d3-186">No</span></span>|<span data-ttu-id="3f7d3-187">是</span><span class="sxs-lookup"><span data-stu-id="3f7d3-187">Yes</span></span>|<span data-ttu-id="3f7d3-188">不适用</span><span class="sxs-lookup"><span data-stu-id="3f7d3-188">Not applicable</span></span>|<span data-ttu-id="3f7d3-189">适配器不会删除文件从 FTP 服务器下载后。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-189">The adapter does not delete a file from the FTP server after downloading it.</span></span> <span data-ttu-id="3f7d3-190">而是适配器比较文件的上次修改时间戳使用 MDTM 命令。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-190">Instead the adapter compares the file’s last modified timestamp using the MDTM command.</span></span> <span data-ttu-id="3f7d3-191">具体取决于时间戳，适配器会再次下载该文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-191">Depending on the timestamp, the adapter downloads the file again.</span></span>|  
|<span data-ttu-id="3f7d3-192">否</span><span class="sxs-lookup"><span data-stu-id="3f7d3-192">No</span></span>|<span data-ttu-id="3f7d3-193">否</span><span class="sxs-lookup"><span data-stu-id="3f7d3-193">No</span></span>|<span data-ttu-id="3f7d3-194">适用</span><span class="sxs-lookup"><span data-stu-id="3f7d3-194">Applicable</span></span>|<span data-ttu-id="3f7d3-195">FTP 适配器指定，而不考虑是否在文件已被修改或不的时间间隔后从 FTP 服务器上下载文件。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-195">The FTP adapter downloads a file from the FTP server after the interval you specify, irrespective of whether the file has been modified or not.</span></span>|  
  
### <a name="support-for-atomic-file-transfer-in-ascii-mode"></a><span data-ttu-id="3f7d3-196">对在 ASCII 模式下原子文件传输的支持</span><span class="sxs-lookup"><span data-stu-id="3f7d3-196">Support for atomic file transfer in ASCII mode</span></span>  
 <span data-ttu-id="3f7d3-197">FTP 适配器支持 ASCII 模式的原子文件传输。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-197">The FTP adapter supports atomic file transfer for ASCII mode.</span></span> <span data-ttu-id="3f7d3-198">若要启用 ASCII 模式的原子文件传输，则适配器将使用**临时文件夹**属性。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-198">To enable atomic file transfer for ASCII mode, the adapter uses the **Temporary Folder** property.</span></span> <span data-ttu-id="3f7d3-199">此属性定义文件首先移至 FTP 服务器上的临时位置。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-199">This property defines a temporary location on the FTP server where the file is first moved to.</span></span> <span data-ttu-id="3f7d3-200">文件已完全传输到临时位置后，该文件然后移动到相关位置上 FTP 服务器。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-200">After the file is completely transferred to the temporary location, the file is then moved to the relevant location on the FTP server.</span></span> <span data-ttu-id="3f7d3-201">此处的假设是，文件传输是原子的临时位置与 FTP 服务器上的相关位置之间。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-201">Here, the assumption is that the file transfer is atomic between the temporary location and the relevant location on the FTP server.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3f7d3-202">使用 ASCII 文件临时文件夹的扩展名是仅适用于**发送**，并不适用于**接收**。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-202">The extension of using temporary folder to ASCII file is applicable only for the **Send**, and does not apply to **Receive**.</span></span> <span data-ttu-id="3f7d3-203">实现此功能的主要原因是，第三方应用程序将读取文件被完全写入之前。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-203">The primary reason for implementing this feature is that, a third party application will not read a file until it is fully written.</span></span> <span data-ttu-id="3f7d3-204">对于 BizTalk 接收文件，适配器将提交到 BizTalk 文件只有在完全读取后。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-204">In the case of BizTalk receiving the file, the adapter will submit the file to BizTalk only after it is completely read.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3f7d3-205">在二进制模式下**临时文件夹**属性还可用于恢复文件传输，如果其间故障。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-205">In binary mode, the **Temporary Folder** property can also be used to resume file transfer if there is a failure in between.</span></span> <span data-ttu-id="3f7d3-206">这不适用于 ASCII 模式。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-206">This is not applicable for ASCII mode.</span></span> <span data-ttu-id="3f7d3-207">对于 ASCII 模式**临时文件夹**属性仅用于原子文件传输。</span><span class="sxs-lookup"><span data-stu-id="3f7d3-207">For ASCII mode, the **Temporary Folder** property is only used for atomic file transfer.</span></span>  
  
 
## <a name="next"></a><span data-ttu-id="3f7d3-208">Next</span><span class="sxs-lookup"><span data-stu-id="3f7d3-208">Next</span></span> 
[<span data-ttu-id="3f7d3-209">配置 FTP 适配器</span><span class="sxs-lookup"><span data-stu-id="3f7d3-209">Configuring the FTP Adapter</span></span>](../core/configuring-the-ftp-adapter.md)  

## <a name="see-also"></a><span data-ttu-id="3f7d3-210">请参阅</span><span class="sxs-lookup"><span data-stu-id="3f7d3-210">See Also</span></span>  
 <span data-ttu-id="3f7d3-211">[用于接收和发送服务器端口](../core/ports-for-the-receive-and-send-servers.md) </span><span class="sxs-lookup"><span data-stu-id="3f7d3-211">[Ports for the Receive and Send Servers](../core/ports-for-the-receive-and-send-servers.md) </span></span>  
 [<span data-ttu-id="3f7d3-212">最低安全用户权限</span><span class="sxs-lookup"><span data-stu-id="3f7d3-212">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)
