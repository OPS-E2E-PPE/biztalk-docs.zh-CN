---
title: 如何为出站 EDI 消息存储数据 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a6e576fc-37fd-417d-ae68-607a0a8bcc0a
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2678a8c81807e3d76ba54bae150342076589b618
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65344107"
---
# <a name="how-data-is-stored-for-outbound-edi-messages"></a>如何为出站 EDI 消息存储数据
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 执行以下操作生成的出站交换状态报告条目：  
  
1.  当出站消息 XML 发送到 EDI 发送管道时，发送管道在状态报告具有以下值的数据存储区中创建一个条目：  
  
    -   交换状态条目将设置为已处理  
  
    -   交换确认状态条目 （一个每个交换） 设置为预期  
  
    -   功能确认状态条目 （一个每个组在 X12 中，一个用于在 EDIFACT 中的所有组） 设置为预期  
  
2.  EDI 消息已发送到贸易合作伙伴，并从贸易合作伙伴返回确认后，EDI 接收管道接收确认更新交换状态、 交换 ACK 状态和功能ACK 状态条目为已接受/部分接受/拒绝，根据需要。  
  
## <a name="data-stored-by-the-send-pipeline-for-outbound-interchanges"></a>发送管道为出站交换存储的数据  
 发送管道在发送每个交换状态报告数据存储区中创建一条记录。 可从交换标头/尾部段 （ISA/IEA 或 UNB/UNZ） 最多的数据所需的条目。 可从发送端口的属性的其他数据。 存储的数据包括：  
  
-   记录类型 = 交换状态  
  
-   交换方向 = 更新数据 = 发送  
  
-   交换接收方 = 更新数据  
  
-   交换发送方 = 更新数据  
  
-   交换日期 = 更新数据  
  
-   交换时间 = 更新数据  
  
-   交换控制 ID = 更新数据  
  
-   交换状态：处理/发送。 已处理状态指示已成功处理交换和其移交给交付的发送适配器发送管道。  
  
-   交换控制计数 (X12 中的组/消息分别) = 数据  
  
-   交换发送端口 ID = 数据  
  
## <a name="data-stored-by-the-receive-pipeline-for-each-technical-acknowledgment-received-in-response-to-an-outbound-interchange"></a>接收管道为收到响应的出站交换中每个技术确认存储的数据  
 接收管道接收每个技术确认状态报告数据存储区创建一条记录。 接收管道创建每个接收的交换在状态报告数据存储区中的记录。 每个技术确认作为响应的交换发送给贸易合作伙伴接收的数据存储区中创建一个技术确认状态报告条目。 只有 UCI 段对于 EDIFACT 具有用于 CONTRL 消息和 X12 TA1 技术确认。 存储的数据包括：  
  
- 记录类型 = 交换确认状态  
  
- 交换确认方向 = 发送-更新数据  
  
- 交换接收方 = 更新数据 （需要相关）  
  
- 交换发送方 = 更新数据 （需要相关）  
  
- 交换日期 = 更新数据 (所需的 X12 相关)  
  
- 交换控制 ID = 更新数据 （需要相关）  
  
- 交换确认状态 = 已生成或不适用\<引用注释 0&gt\> -更新数据  
  
- 交换确认控制 ID = 不赋值 – 将由发送方应用  
  
- 交换确认日期 = 不赋值 – 将由发送方应用  
  
- 交换确认时间 = 不赋值 – 将由发送方应用  
  
- 确认/操作代码 = 更新数据\<，请参阅备注 1\> （来自 X12-TA104 或 EDIFACT-UCI4） *  
  
- 确认注释代码 = 更新数据\<，请参阅备注 2\> （来自 X12-TA105，不适用于 EDIFACT) *  
  
  使用以下确认/操作代码：  
  
|确认/操作代码中的数据|用于报告的错误说明|注释 （适用性）|  
|------------------------------|-------------------------------------|-------------------------------|  
|A|接受|X12|  
|E|记下已被接受，错误|X12|  
|P|部分接受|X12|  
|R|已拒绝|X12|  
|4|已拒绝|EDIFACT|  
|8|接受/部分接受|EDIFACT|  
  
 使用以下 ACK 注释代码：  
  
|确认注释代码 （在 X12 中) 中的数据|Description|  
|--------------------------------------|-----------------|  
|000|成功|  
|001|交换控制编号不匹配|  
|002|不支持的标准|  
|003|版本不支持的控件|  
|004|段终止符无效|  
|005|发件人的无效的交换 ID 限定符|  
|006|无效的交换发送方 ID|  
|007|无效的交换接收方 ID 限定符|  
|008|交换接收方 ID 无效|  
|009|未知的交换接收方 ID|  
|010|无效的授权信息限定符值|  
|011|无效的授权信息值|  
|012|安全信息限定符值无效|  
|013|无效的安全信息值|  
|014|无效的交换日期值|  
|015|无效的交换时间值|  
|016|无效的交换标准标识符值|  
|017|无效的交换版本 ID 值|  
|018|无效的交换控制编号值|  
|019|无效的确认请求值|  
|020|测试指示器值无效|  
|021|包含的组值的数目无效|  
|022|控制结构无效|  
|023|文件结尾不正确|  
|024|交换内容无效|  
|025|交换控制编号重复|  
|026|数据元素分隔符无效|  
|027|组件元素分隔符无效|  
|028|延迟的送达请求中的无效的送达日期|  
|029|延迟的送达请求中无效的传递时间|  
|030|延迟的送达请求中的无效的送达时间代码|  
|031|服务的级别无效|  
  
## <a name="data-updated-by-the-receive-pipeline-for-each-technical-acknowledgment-received-in-response-to-an-outbound-interchange"></a>接收管道为收到响应的出站交换中每个技术确认更新的数据  
 对于接收管道接收每个技术确认，它将更新发送相关交换状态报告条目。  
  
 EDI 拆装器定位在数据存储中使用的 UCI 和 TA1 段传入的确认中的数据，如下所示的记录：  
  
|ACK 中的字段|数据存储区中的字段|注释|  
|-------------------|--------------------------|-------------|  
|交换发送方 ID|交换接收方|-|  
|交换接收方 ID|交换发送方|-|  
|-|交换日期|-|  
|交换控制编号|交换控制 ID|-|  
|-|交换方向 = 发送|唯一性的保留的批方案中必需的|  
|记录类型|交换状态和交换确认状态|-|  
  
 存储的数据包括：  
  
- 交换确认方向 = 接收 – 的现有数据  
  
- 交换确认状态 = 接收  
  
- 交换接收方 = 现有数据  
  
- 交换发送方 = 现有数据  
  
- 交换日期 = 现有数据  
  
- 交换控制 ID = 现有数据  
  
- 交换确认控制 ID = 更新数据  
  
- 交换确认日期 = 更新数据  
  
- 交换确认时间 = 更新数据  
  
- 确认/操作代码 = 更新数据 （来自 X12-TA104 或 EDIFACT-UCI4） *\<引用注释 1\>  
  
- 确认注释代码 2 = 更新数据 (来自 X12-TA105，未对 EDIFACT) * \<，请参阅备注 2\>  
  
  ACK X12 中的数据： TA1 104 或 EDIFACT UCI4 是按如下所示映射：  
  
|确认/操作代码中的数据|映射的状态报告|注释|  
|------------------------------|---------------------------------|-------------|  
|A|接受|X12|  
|P|部分接受|X12|  
|R、 M、 W、 X|已拒绝|X12|  
|E|已接受但有错误|X12|  
|4|已拒绝|EDIFACT|  
|7, 8|接受/部分接受|EDIFACT|  
  
 使用以下 ACK 注释代码：  
  
|确认注释代码 （在 X12 中) 中的数据|映射的状态报告|  
|--------------------------------------|---------------------------------|  
|000|成功|  
|001|交换控制编号不匹配|  
|002|不支持的标准|  
|003|版本不支持的控件|  
|004|段终止符无效|  
|005|发件人的无效的交换 ID 限定符|  
|006|无效的交换发送方 ID|  
|007|无效的交换接收方 ID 限定符|  
|008|交换接收方 ID 无效|  
|009|未知的交换接收方 ID|  
|010|无效的授权信息限定符值|  
|011|无效的授权信息值|  
|012|安全信息限定符值无效|  
|013|无效的安全信息值|  
|014|无效的交换日期值|  
|015|无效的交换时间值|  
|016|无效的交换标准标识符值|  
|017|无效的交换版本 ID 值|  
|018|无效的交换控制编号值|  
|019|无效的确认请求值|  
|020|测试指示器值无效|  
|021|包含的组值的数目无效|  
|022|控制结构无效|  
|023|文件结尾不正确|  
|024|交换内容无效|  
|025|交换控制编号重复|  
|026|数据元素分隔符无效|  
|027|组件元素分隔符无效|  
|028|延迟的送达请求中的无效的送达日期|  
|029|延迟的送达请求中无效的传递时间|  
|030|延迟的送达请求中的无效的送达时间代码|  
|031|服务的级别无效|  
  
## <a name="data-stored-by-the-receive-pipeline-for-each-functional-acknowledgment-received-in-response-to-outbound-interchanges"></a>接收管道为每个功能确认以响应出站交换接收到存储的数据  
 接收管道接收每个功能确认状态报告数据存储区创建一条记录。  技术确认是 997 的 X12 和完整 CONTRL 消息的 EDIFACT。 每个组的一个条目将创建。 此项时使用的交换和组标头中的数据。 存储的数据包括：  
  
- 记录类型 = 功能确认状态  
  
- 功能确认方向 = 发送  
  
- 功能确认状态 =\<生成或不适用，请参阅备注 1\>  
  
- 交换接收方 = 更新数据 （需要相关）  
  
- 交换发送方 = 更新数据 （需要相关）  
  
- 交换日期 = 更新数据 (所需的 X12 相关)  
  
- 交换控制 ID = 更新数据 （需要相关）  
  
- 组控制编号 = 更新数据 (optional 对于 EDIFACT 和所需的 X12 相关)  
  
- 功能 ID 代码 = 更新数据 (GS01/UNG01)  
  
- 事务集计数 = 更新数据 (UNE1/UNZ1)  
  
- 功能 ACK 交换控制 ID = 不是值 – 将由发送方应用  
  
- 功能确认交换日期 = 不赋值 – 将由发送方应用  
  
- 功能确认交换时间 = 不赋值 – 将由发送方应用  
  
- 计数的事务集收到 = 更新数据 (X12 AK903，并计算出用于 EDIFACT 编码的引擎)  
  
- 接受的事务计数集 = 更新数据 (X12 AK904 和计算引擎为 EDIFACT 引擎)  
  
- 确认/操作代码 = 更新数据\<，请参阅备注 2\> （来自 X12-AK901 或 EDIFACT-UCI4） *  
  
- 错误/语法错误代码 = 更新数据 (X12 AK905，EDIFACT UCI5) 请注意 3  
  
- 附加 X12 确认错误代码 2 = 更新数据 (X12-AK906)  
  
- 附加 X12 确认错误代码 3 = 更新数据 (X12-AK907)  
  
- 附加 X12 确认错误代码 4 = 更新数据 (X12-AK908)  
  
- 附加 X12 确认错误代码 5 = 更新数据 (X12-AK909)  
  
  将使用以下确认/操作代码：  
  
|确认/操作代码中的数据|用于报告的错误说明|注释 （适用性）|  
|------------------------------|-------------------------------------|-------------------------------|  
|A|接受|X12|  
|E|已接受但有错误|X12|  
|P|部分接受|X12|  
|R|已拒绝|X12|  
|4|已拒绝|EDIFACT|  
|7|接受/部分接受|EDIFACT|  
  
 对于 EDIFACT，将使用以下的错误/语法错误代码：  
  
|错误/语法错误代码中的数据<br /><br /> （适用于 EDIFACT）|用于报告的错误说明|  
|--------------------------------------------------------------------|-------------------------------------|  
|2|不支持语法版本或级别|  
|7|交换收件人不是实际的收件人|  
|12|无效的值|  
|13|Missing|  
|14|在此位置不支持的值|  
|15|在此位置不支持|  
|16|组分过多|  
|17|不存在的协议|  
|18|未指定的错误|  
|19|十进制符号无效|  
|20|字符作为服务字符无效|  
|21|无效字符|  
|22|无效服务字符|  
|23|未知的交换发件人|  
|24|太旧|  
|25|不支持测试指示器|  
|26|检测到重复内容|  
|27|不支持安全功能|  
|28|引用不匹配|  
|29|控制计数与接收到的实例数不匹配|  
|30|组和消息/包混合|  
|31|多个组中的消息类型|  
|32|低级别为空|  
|33|消息、 包或组外出现无效内容|  
|34|不允许嵌套指示器|  
|35|数据元素或段重复过多|  
|36|段组重复过多|  
|37|字符类型无效|  
|38|小数点前缺少数字|  
|39|数据元素太长|  
|40|数据元素太短|  
|41|永久性通信网络错误|  
|42|临时性通信网络错误|  
|43|未知的交换收件人|  
|45|尾部分隔符|  
|46|不支持字符集|  
|47|不支持信封功能|  
|48|违反了依存关系条件|  
|70|事务集缺失或无效事务集标识符|  
|71|事务集或组控制编号不匹配|  
|72|无法识别的段 ID|  
|73|XML 不是在正确的位置|  
|74|段组重复过少|  
|75|段重复过少|  
|76|找到的数据元素过少|  
  
 对于 X12，将使用以下的错误/语法错误代码：  
  
|错误/语法错误代码中的数据<br /><br /> （适用于 X12）|用于报告的错误说明|  
|----------------------------------------------------------------|-------------------------------------|  
|1|不支持功能组|  
|2|不支持的功能组版本|  
|3|功能组尾部缺失|  
|4|功能组标头和尾部中的组控制编号不一致|  
|5|包括的事务集数与实际计数不匹配|  
|6-26|其他不受支持的验证错误|  
  
## <a name="data-updated-by-the-receive-pipeline-for-each-functional-acknowledgment-received-in-response-to-outgoing-interchanges"></a>接收管道为收到响应传出交换中每个功能确认更新的数据  
 对于接收管道接收每个功能确认，它将更新发送相关交换状态报告条目。  
  
 EDI 拆装器定位在数据存储中使用的交换和组标头传入的确认段中的数据，如下所示的记录：  
  
|ACK 中的字段|数据存储区中的字段|注释|  
|-------------------|--------------------------|-------------|  
|交换发送方 ID|交换接收方|适用于 X12 和 EDIFACT|  
|交换接收方 ID|交换发送方|适用于 X12 和 EDIFACT|  
|-|交换日期|-|  
|交换控制编号|交换控制 ID|仅适用于 EDIFACT|  
|组控制编号|组控制编号|仅适用于 X12|  
|-|交换方向 = 发送|因为需要在 BIBO 方案中的唯一性|  
|记录类型|功能确认状态|适用于 X12 和 EDIFACT|  
  
 存储的数据包括：  
  
- 记录类型 = 功能确认状态  
  
- 功能确认方向 = 接收  
  
- 功能确认状态 = 更新数据，为已接收  
  
- 交换接收方 = 现有数据  
  
- 交换发送方 = 现有数据  
  
- 交换日期 = 现有数据  
  
- 交换控制 ID = 现有数据  
  
- 组控制编号 = 现有数据  
  
- 功能 ID 代码 = 现有数据  
  
- 事务集计数 = 现有数据  
  
- 功能 ACK 交换控制 ID = 更新数据  
  
- 功能 ACK 交换日期 = 更新数据  
  
- 功能 ACK 交换时间 = 更新数据  
  
- 计数传送的事务集 = 更新数据 （X12 AK903，不适用于 EDIFACT）  
  
- 接受的事务计数集 = 更新数据 （X12 AK904，不适用于 EDIFACT）  
  
- 确认/操作代码 = 更新数据 (X 12 AK901 和 UCI4） 引用注释 1  
  
- 错误/语法错误代码 = (X12 AK905 和 UCI5） 引用注释 2  
  
- 附加 X12 确认错误代码 2 = 更新数据 (X12-AK906)  
  
- 附加 X12 确认错误代码 3 = 更新数据 (X12-AK907)  
  
- 附加 X12 确认错误代码 4 = 更新数据 (X12-AK908)  
  
- 附加 X12 确认错误代码 5 = 更新数据 (X12-AK909)  
  
  将使用以下确认/操作代码：  
  
|确认/操作代码中的数据|映射的状态报告|注释|  
|------------------------------|---------------------------------|-------------|  
|A|接受|X12|  
|P|部分接受|X12|  
|R、 M、 W、 X|已拒绝|X12|  
|E|已接受但有错误|X12|  
|4|已拒绝|EDIFACT|  
|7, 8|接受/部分接受|EDIFACT|  
  
 对于 EDIFACT，将使用以下的错误/语法错误代码：  
  
|错误/语法错误 Cod 中的数据<br /><br /> （适用于 EDIFACT）|用于报告的错误说明|  
|-------------------------------------------------------------------|-------------------------------------|  
|2|不支持语法版本或级别|  
|7|交换收件人不是实际的收件人|  
|12|无效的值|  
|13|Missing|  
|14|在此位置不支持的值|  
|15|在此位置不支持|  
|16|组分过多|  
|17|不存在的协议|  
|18|未指定的错误|  
|19|十进制符号无效|  
|20|字符作为服务字符无效|  
|21|无效字符|  
|22|无效服务字符|  
|23|未知的交换发件人|  
|24|太旧|  
|25|不支持测试指示器|  
|26|检测到重复内容|  
|27|不支持安全功能|  
|28|引用不匹配|  
|29|控制计数与接收到的实例数不匹配|  
|30|组和消息/包混合|  
|31|多个组中的消息类型|  
|32|低级别为空|  
|33|消息、 包或组外出现无效内容|  
|34|不允许嵌套指示器|  
|35|数据元素或段重复过多|  
|36|段组重复过多|  
|37|字符类型无效|  
|38|小数点前缺少数字|  
|39|数据元素太长|  
|40|数据元素太短|  
|41|永久性通信网络错误|  
|42|临时性通信网络错误|  
|43|未知的交换收件人|  
|45|尾部分隔符|  
|46|不支持字符集|  
|47|不支持信封功能|  
|48|违反了依存关系条件|  
|70|事务集缺失或无效事务集标识符|  
|71|事务集或组控制编号不匹配|  
|72|无法识别的段 ID|  
|73|XML 不是在正确的位置|  
|74|段组重复过少|  
|75|段重复过少|  
|76|找到的数据元素过少|  
  
 对于 X12，将使用以下的错误/语法错误代码：  
  
|错误/语法错误代码中的数据<br /><br /> （适用于 X12）|用于报告的错误说明|  
|----------------------------------------------------------------|-------------------------------------|  
|1|不支持功能组|  
|2|不支持的功能组版本|  
|3|功能组尾部缺失|  
|4|功能组标头和尾部中的组控制编号不一致|  
|5|包括的事务集数与实际计数不匹配|  
|6-26|其他不受支持的验证错误|  
  
## <a name="see-also"></a>请参阅  
 [如何为 EDI 和 AS2 状态报告存储数据](../core/how-data-is-stored-for-edi-and-as2-status-reports.md)   
 [如何为入站 EDI 消息存储数据](../core/how-data-is-stored-for-inbound-edi-messages.md)