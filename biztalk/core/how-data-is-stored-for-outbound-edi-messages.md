---
title: 如何将数据存储用于出站 EDI 消息 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a6e576fc-37fd-417d-ae68-607a0a8bcc0a
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f98d5113c63e29f3f4b85834b7ca1aa0836d0a5d
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2018
---
# <a name="how-data-is-stored-for-outbound-edi-messages"></a>出站 EDI 消息数据的存储方式
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 执行以下操作来生成状态报表项的出站交换：  
  
1.  当出站消息 XML 发送到 EDI 发送管道时，发送管道中的状态报告具有以下值的数据存储区创建一项︰  
  
    -   交换状态条目将设置为处理  
  
    -   交换 ACK 状态条目 （交换每一个） 设置为预期  
  
    -   （一个每个组中的 X12，一个用于 EDIFACT 中的所有组） 的功能 ACK 状态条目已设置为预期  
  
2.  在 edi 消息具有已发送到贸易合作伙伴，并且确认已返回从贸易合作伙伴，交换状态、 交换 ACK 状态和功能的 ACK 状态条目向已接受/部分接受/拒绝，根据需要，EDI 接收管道接收确认的更新。  
  
## <a name="data-stored-by-the-send-pipeline-for-outbound-interchanges"></a>存储发送管道的出站的交换的数据  
 发送管道发送每个交换的状态报表数据存储区中创建记录。 所需的项的大多数数据是可从交换标头/预告片段 （ISA/IEA 或 UNB/UNZ）。 从发送端口属性提供了其他数据。 存储的数据包括︰  
  
-   记录类型 = 交换状态  
  
-   交换方向 = 更新数据 = 发送  
  
-   交换接收器 = 更新数据  
  
-   交换发件人 = 更新数据  
  
-   交换日期 = 更新数据  
  
-   交换时间 = 更新数据  
  
-   交换控件 ID = 更新数据  
  
-   交换︰ 处理/发送状态。 处理状态指示已成功处理该交换和设备移交给传递发送适配器发送管道。  
  
-   交换控件计数 (组/消息中的 X12 分别) = 数据  
  
-   交换发送端口 ID = 数据  
  
## <a name="data-stored-by-the-receive-pipeline-for-each-technical-acknowledgment-received-in-response-to-an-outbound-interchange"></a>存储的每个对的出站交换响应中收到的技术确认接收管道的数据  
 接收管道在每个技术确认它收到的状态报表数据存储中创建一条记录。 接收管道创建一条记录的每个状态报表数据存储区中收到的交换。 在每个技术 ACK 作为响应发送到贸易合作伙伴交换接收的数据存储中创建一个技术确认状态报表项。 技术确认是使用仅对于 EDIFACT 了 UCI 段 X12 和 CONTRL 消息 TA1。 存储的数据包括︰  
  
-   记录类型 = 交换 ACK 状态  
  
-   交换 ACK 方向 = 发送 – 更新数据  
  
-   交换接收器 = （所需的相关） 的更新数据  
  
-   交换发件人 = （所需的相关） 的更新数据  
  
-   交换日期 = 更新数据 (所需的 X12 相关)  
  
-   交换控件 ID = （所需的相关） 的更新数据  
  
-   交换 ACK 状态 = 生成或不适用\<注意 0，请参阅\>-更新数据  
  
-   交换 ACK 控件 ID = 不值 – 将发送端的应用  
  
-   交换 ACK 日期 = 不值 – 将发送端的应用  
  
-   交换 ACK 时间 = 不值 – 将发送端的应用  
  
-   确认/操作代码 = 更新数据\<，请参阅备注 1\> （来自 X12 TA104 或 EDIFACT UCI4） *  
  
-   ACK 注意代码 = 更新数据\<，请参阅备注 2\> （从 X12-TA105，不适用于 EDIFACT) *  
  
 使用以下确认/操作代码︰  
  
|确认/操作代码中的数据|用于报告的错误说明|注释 （适用性）|  
|------------------------------|-------------------------------------|-------------------------------|  
|指向|已接受|X12|  
|E|记下的已被接受，错误|X12|  
|P|部分接受|X12|  
|R|已拒绝|X12|  
|4|已拒绝|EDIFACT|  
|8|接受/部分接受|EDIFACT|  
  
 使用以下 ACK 注意代码︰  
  
|（在 X12) 的 ACK 注意代码中的数据|Description|  
|--------------------------------------|-----------------|  
|000|成功|  
|001|交换控制编号不匹配|  
|002|不支持的标准|  
|003|版本不支持的控件|  
|004|段终止符无效|  
|005|发送方的交换 ID 限定符无效|  
|006|交换发送方 ID 无效|  
|007|接收方的交换 ID 限定符无效|  
|008|交换接收方 ID 无效|  
|009|未知交换接收方 ID|  
|010|无效的授权信息限定符值|  
|011|无效的授权信息值|  
|012|无效的安全信息限定符值|  
|013|无效的安全信息值|  
|014|无效的交换日期值|  
|015|无效的交换时间值|  
|016|无效的交换标准标识符值|  
|017|无效的交换版本 ID 值|  
|018|无效的交换控制编号值|  
|019|无效的确认请求值|  
|020|无效的测试指示器值|  
|021|包含的组值的数目无效|  
|022|控制结构无效|  
|023|不正确文件尾|  
|024|无效的交换内容|  
|025|交换控制编号重复|  
|026|数据元素分隔符无效|  
|027|组件元素分隔符无效|  
|028|延迟送达请求中的送达日期无效|  
|029|延迟送达请求中的送达时间无效|  
|030|延迟的传递请求中的无效传递时代码|  
|031|服务的级别无效|  
  
## <a name="data-updated-by-the-receive-pipeline-for-each-technical-acknowledgment-received-in-response-to-an-outbound-interchange"></a>接收管道针对每个技术确认对出站交换响应中收到的数据  
 为每个接收管道接收的技术确认，它会更新状态报表项时为关联的已发送交换。  
  
 EDI 拆装器定位在数据存储，如下所示使用 UCI 和的传入确认，TA1 段中的数据的记录︰  
  
|ACK 中的字段|数据存储区中的字段|注释|  
|-------------------|--------------------------|-------------|  
|交换发送方 ID|交换收件人|-|  
|交换接收方 ID|交换发件人|-|  
|-|交换日期|-|  
|交换控制编号|交换控制 ID|-|  
|-|交换方向 = 发送|在保留的批处理方案唯一性必需的|  
|记录类型|交换状态和交换 ACK 状态|-|  
  
 存储的数据包括︰  
  
-   交换 ACK 方向 = 接收 – 现有数据  
  
-   交换 ACK 状态 = 收到  
  
-   交换接收器 = 现有数据  
  
-   交换发件人 = 现有数据  
  
-   交换日期 = 现有数据  
  
-   交换控件 ID = 现有数据  
  
-   交换 ACK 控件 ID = 更新数据  
  
-   交换 ACK 日期 = 更新数据  
  
-   交换 ACK 时间 = 更新数据  
  
-   确认/操作代码 = 更新数据 （来自 X12 TA104 或 EDIFACT UCI4） * \<，请参阅备注 1\>  
  
-   ACK 注意代码 2 = 更新数据 (从 X12 TA105 和不值对于 EDIFACT) * \<，请参阅备注 2\>  
  
 ACK X12 中的数据︰ TA1 104 或 EDIFACT UCI4 是，如下所示映射︰  
  
|确认/操作代码中的数据|状态报告的映射|注释|  
|------------------------------|---------------------------------|-------------|  
|指向|已接受|X12|  
|P|部分接受|X12|  
|R、 M、 W 和 X|已拒绝|X12|  
|E|已接受但有错误|X12|  
|4|已拒绝|EDIFACT|  
|7, 8|接受/部分接受|EDIFACT|  
  
 使用以下 ACK 注意代码︰  
  
|（在 X12) 的 ACK 注意代码中的数据|状态报告的映射|  
|--------------------------------------|---------------------------------|  
|000|成功|  
|001|交换控制编号不匹配|  
|002|不支持的标准|  
|003|版本不支持的控件|  
|004|段终止符无效|  
|005|发送方的交换 ID 限定符无效|  
|006|交换发送方 ID 无效|  
|007|接收方的交换 ID 限定符无效|  
|008|交换接收方 ID 无效|  
|009|未知交换接收方 ID|  
|010|无效的授权信息限定符值|  
|011|无效的授权信息值|  
|012|无效的安全信息限定符值|  
|013|无效的安全信息值|  
|014|无效的交换日期值|  
|015|无效的交换时间值|  
|016|无效的交换标准标识符值|  
|017|无效的交换版本 ID 值|  
|018|无效的交换控制编号值|  
|019|无效的确认请求值|  
|020|无效的测试指示器值|  
|021|包含的组值的数目无效|  
|022|控制结构无效|  
|023|不正确文件尾|  
|024|无效的交换内容|  
|025|交换控制编号重复|  
|026|数据元素分隔符无效|  
|027|组件元素分隔符无效|  
|028|延迟送达请求中的送达日期无效|  
|029|延迟送达请求中的送达时间无效|  
|030|延迟的传递请求中的无效传递时代码|  
|031|服务的级别无效|  
  
## <a name="data-stored-by-the-receive-pipeline-for-each-functional-acknowledgment-received-in-response-to-outbound-interchanges"></a>存储接收管道的每个功能确认对出站交换响应中收到的数据  
 接收管道接收每个功能确认的状态报表数据存储区中创建记录。  技术确认是 997 X12 和完整 CONTRL 消息 EDIFACT。 每个组的一个条目将创建。 此项时使用的交换和组标头中的数据。 存储的数据包括︰  
  
-   记录类型 = 功能 ACK 状态  
  
-   功能 ACK 方向 = 发送  
  
-   正常的 ACK 状态 = \<Generated 或不适用，请参阅备注 1\>  
  
-   交换接收器 = （所需的相关） 的更新数据  
  
-   交换发件人 = （所需的相关） 的更新数据  
  
-   交换日期 = 更新数据 (所需的 X12 相关)  
  
-   交换控件 ID = （所需的相关） 的更新数据  
  
-   组控制编号 = 更新数据 (optional 对于 EDIFACT 和需要 X12 相关)  
  
-   功能 ID 代码 = 更新数据 (GS01/UNG01)  
  
-   事务集的计数 = 更新数据 (UNE1/UNZ1)  
  
-   功能 ACK 交换的控件 ID = 不值 – 将发送端的应用  
  
-   功能 ACK 交换日期 = 不值 – 将发送端的应用  
  
-   功能 ACK 交换时间 = 不值 – 将发送端的应用  
  
-   计数的事务集收到 = 更新数据 (X12 AK903 和计算由 EDIFACT 编码的引擎)  
  
-   计数的事务集接受 = 更新数据 (X12 AK904 和计算由引擎 EDIFACT 引擎)  
  
-   确认/操作代码 = 更新数据\<，请参阅备注 2\> （来自 X12 AK901 或 EDIFACT UCI4） *  
  
-   错误/语法错误代码 = 更新数据 (X12 AK905，EDIFACT UCI5) 请注意 3  
  
-   其他 X12 ACK 错误代码 2 = 更新数据 (X12 AK906)  
  
-   其他 X12 ACK 错误代码 3 = 更新数据 (X12 AK907)  
  
-   其他 X12 ACK 错误代码 4 = 更新数据 (X12 AK908)  
  
-   其他 X12 ACK 错误代码 5 = 更新数据 (X12 AK909)  
  
 将使用以下确认/操作代码︰  
  
|确认/操作代码中的数据|用于报告的错误说明|注释 （适用性）|  
|------------------------------|-------------------------------------|-------------------------------|  
|指向|已接受|X12|  
|E|已接受但有错误|X12|  
|P|部分接受|X12|  
|R|已拒绝|X12|  
|4|已拒绝|EDIFACT|  
|7|接受/部分接受|EDIFACT|  
  
 以下的错误/语法错误代码将用于 EDIFACT:  
  
|错误/语法错误代码<br /><br /> （适用于 EDIFACT）|用于报告的错误说明|  
|--------------------------------------------------------------------|-------------------------------------|  
|2|不支持语法版本或级别|  
|7|交换收件人不是实际的收件人|  
|12|无效值|  
|13|缺少|  
|14|在此位置不支持该值|  
|15|在此位置不支持|  
|16|组分过多|  
|17|无协议|  
|18|未指定的错误|  
|19|十进制符号无效|  
|20|字符无效，因为服务字符|  
|21|无效字符|  
|22|无效服务字符|  
|23|未知交换发件人|  
|24|太旧|  
|25|不支持测试指示器|  
|26|检测到重复内容|  
|27|不支持安全功能|  
|28|参考不匹配|  
|29|控制数与接收到的实例数不匹配|  
|30|组和消息/包混合|  
|31|在组中有一种以上的消息类型|  
|32|低级别为空|  
|33|在消息、包或组外出现无效内容|  
|34|不允许嵌套指示器|  
|35|数据元素或段重复过多|  
|36|段组重复过多|  
|37|字符类型无效|  
|38|在小数点前缺少数字|  
|39|数据元素太长|  
|40|数据元素太短|  
|41|永久性通信网络错误|  
|42|临时性通信网络错误|  
|43|未知交换收件人|  
|45|尾部分隔符|  
|46|不支持的字符集|  
|47|不支持信封功能|  
|48|违反了依存关系条件|  
|70|事务集缺失或无效的事务集标识符|  
|71|事务集或组控制编号不匹配|  
|72|无法识别的段 ID|  
|73|XML 的位置不正确|  
|74|段组重复过少|  
|75|段重复过少|  
|76|找到的数据元素过少|  
  
 以下错误/语法错误代码将用于 X12：  
  
|错误/语法错误代码<br /><br /> （适用于 X12）|用于报告的错误说明|  
|----------------------------------------------------------------|-------------------------------------|  
|1|不支持功能组|  
|2|不支持的功能组版本|  
|3|功能组尾部缺失|  
|4|功能组标头和尾部中的组控制编号不一致|  
|5|包含的事务集数与实际计数不匹配|  
|6-26|其他不支持的验证错误|  
  
## <a name="data-updated-by-the-receive-pipeline-for-each-functional-acknowledgment-received-in-response-to-outgoing-interchanges"></a>接收管道为每个为了响应传出交换而接收的功能确认更新的数据  
 对于接收管道接收的每个功能确认，发送管道会更新所发送相关交换的状态报告条目。  
  
 EDI 拆装器使用传入确认的交换和组标头段中的数据来定位数据存储区中的记录：  
  
|ACK 中的字段|数据存储区中的字段|注释|  
|-------------------|--------------------------|-------------|  
|交换发送方 ID|交换收件人|适用于 X12 和 EDIFACT|  
|交换接收方 ID|交换发件人|适用于 X12 和 EDIFACT|  
|-|交换日期|-|  
|交换控制编号|交换控制 ID|仅适用于 EDIFACT|  
|组控制编号|组控制编号|仅适用于 X12|  
|-|交换方向 = 发送|由于要在 BIBO 方案中实现唯一性，因此是必需|  
|记录类型|功能确认状态|适用于 X12 和 EDIFACT|  
  
 存储的数据包括︰  
  
-   记录类型 = 功能 ACK 状态  
  
-   功能确认方向 = 接收  
  
-   功能确认状态 = 按照接收来更新数据  
  
-   交换接收器 = 现有数据  
  
-   交换发件人 = 现有数据  
  
-   交换日期 = 现有数据  
  
-   交换控件 ID = 现有数据  
  
-   组控制编号 = 现有数据  
  
-   功能 ID 代码 = 现有数据  
  
-   事务集计数 = 现有数据  
  
-   功能确认交换控制 ID = 更新数据  
  
-   功能确认交换日期 = 更新数据  
  
-   功能确认交换时间 = 更新数据  
  
-   传送的事务集的计数 = 更新数据（X12 AK903，不适用于 EDIFACT）  
  
-   接受的事务集的计数 = 更新数据（X12 AK904，不适用于 EDIFACT）  
  
-   确认/操作代码 = 更新数据（X12 AK901 和 UCI4）引用注释 1  
  
-   错误/语法错误代码 =（X12 AK905 和 UCI5）引用注释 2  
  
-   其他 X12 ACK 错误代码 2 = 更新数据 (X12 AK906)  
  
-   其他 X12 ACK 错误代码 3 = 更新数据 (X12 AK907)  
  
-   其他 X12 ACK 错误代码 4 = 更新数据 (X12 AK908)  
  
-   其他 X12 ACK 错误代码 5 = 更新数据 (X12 AK909)  
  
 将使用以下确认/操作代码︰  
  
|确认/操作代码中的数据|状态报告的映射|注释|  
|------------------------------|---------------------------------|-------------|  
|指向|已接受|X12|  
|P|部分接受|X12|  
|R、 M、 W 和 X|已拒绝|X12|  
|E|已接受但有错误|X12|  
|4|已拒绝|EDIFACT|  
|7, 8|接受/部分接受|EDIFACT|  
  
 以下的错误/语法错误代码将用于 EDIFACT:  
  
|错误/语法错误 Cod 中的数据<br /><br /> （适用于 EDIFACT）|用于报告的错误说明|  
|-------------------------------------------------------------------|-------------------------------------|  
|2|不支持语法版本或级别|  
|7|交换收件人不是实际的收件人|  
|12|无效值|  
|13|缺少|  
|14|在此位置不支持该值|  
|15|在此位置不支持|  
|16|组分过多|  
|17|无协议|  
|18|未指定的错误|  
|19|十进制符号无效|  
|20|字符无效，因为服务字符|  
|21|无效字符|  
|22|无效服务字符|  
|23|未知交换发件人|  
|24|太旧|  
|25|不支持测试指示器|  
|26|检测到重复内容|  
|27|不支持安全功能|  
|28|参考不匹配|  
|29|控制数与接收到的实例数不匹配|  
|30|组和消息/包混合|  
|31|在组中有一种以上的消息类型|  
|32|低级别为空|  
|33|在消息、包或组外出现无效内容|  
|34|不允许嵌套指示器|  
|35|数据元素或段重复过多|  
|36|段组重复过多|  
|37|字符类型无效|  
|38|在小数点前缺少数字|  
|39|数据元素太长|  
|40|数据元素太短|  
|41|永久性通信网络错误|  
|42|临时性通信网络错误|  
|43|未知交换收件人|  
|45|尾部分隔符|  
|46|不支持的字符集|  
|47|不支持信封功能|  
|48|违反了依存关系条件|  
|70|事务集缺失或无效的事务集标识符|  
|71|事务集或组控制编号不匹配|  
|72|无法识别的段 ID|  
|73|XML 的位置不正确|  
|74|段组重复过少|  
|75|段重复过少|  
|76|找到的数据元素过少|  
  
 以下错误/语法错误代码将用于 X12：  
  
|错误/语法错误代码<br /><br /> （适用于 X12）|用于报告的错误说明|  
|----------------------------------------------------------------|-------------------------------------|  
|1|不支持功能组|  
|2|不支持的功能组版本|  
|3|功能组尾部缺失|  
|4|功能组标头和尾部中的组控制编号不一致|  
|5|包含的事务集数与实际计数不匹配|  
|6-26|其他不支持的验证错误|  
  
## <a name="see-also"></a>另请参阅  
 [如何将数据存储用于 EDI 和 AS2 状态报表](../core/how-data-is-stored-for-edi-and-as2-status-reports.md)   
 [如何为入站 EDI 消息存储数据](../core/how-data-is-stored-for-inbound-edi-messages.md)