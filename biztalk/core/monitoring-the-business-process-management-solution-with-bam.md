---
title: 监视业务流程管理解决方案使用 BAM |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- process management solution tutorial, monitoring
- monitoring, process management solutions
ms.assetid: 7c5fde9d-6eef-41c9-979c-ac7e5a172812
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3c46c52dad2352f0aea2d0d69af477458ed59ba5
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65324559"
---
# <a name="monitoring-the-business-process-management-solution-with-bam"></a><span data-ttu-id="aabbe-102">监视业务流程管理解决方案使用 BAM</span><span class="sxs-lookup"><span data-stu-id="aabbe-102">Monitoring the Business Process Management Solution with BAM</span></span>
<span data-ttu-id="aabbe-103">该解决方案监视中使用业务活动监视 (BAM) API 的处理订单的步骤。</span><span class="sxs-lookup"><span data-stu-id="aabbe-103">The solution monitors the steps in processing orders using the Business Activity Monitoring (BAM) API.</span></span> <span data-ttu-id="aabbe-104">业务流程的设计将拆分多个阶段的活动。</span><span class="sxs-lookup"><span data-stu-id="aabbe-104">The design of the business process splits activities among multiple stages.</span></span> <span data-ttu-id="aabbe-105">通过，可以将这些活动重新组合起来以形成一个连续的过程。</span><span class="sxs-lookup"><span data-stu-id="aabbe-105">Through, the activities can be re-combined to create a sense of a continuous process.</span></span> <span data-ttu-id="aabbe-106">BAM 还提供了聚合数据，以便您可以知道多长时间采用不同的后端，多少订单已完成，以及其他类似信息。</span><span class="sxs-lookup"><span data-stu-id="aabbe-106">BAM also provides aggregate data so that you can know how long different back-ends are taking, how many orders have been completed, and other similar information.</span></span>  
  
 <span data-ttu-id="aabbe-107">像面向服务的解决方案，它使用新**OrchestrationEventStream**对象。</span><span class="sxs-lookup"><span data-stu-id="aabbe-107">Like the service-oriented solution, it uses the new **OrchestrationEventStream** object.</span></span> <span data-ttu-id="aabbe-108">有关的讨论**OrchestrationEventStream**对象，请参阅中的"什么是 OrchestrationEventStream 对象"[监视面向服务的解决方案使用 BAM](../core/monitoring-the-service-oriented-solution-with-bam.md)。</span><span class="sxs-lookup"><span data-stu-id="aabbe-108">For a discussion of the **OrchestrationEventStream** object, see "What Is the OrchestrationEventStream Object" in [Monitoring the Service Oriented Solution with BAM](../core/monitoring-the-service-oriented-solution-with-bam.md).</span></span>  
  
 <span data-ttu-id="aabbe-109">有关 BAM 的常规信息，请参阅[使用业务活动监视](../core/using-business-activity-monitoring.md)。</span><span class="sxs-lookup"><span data-stu-id="aabbe-109">For general information about BAM, see [Using Business Activity Monitoring](../core/using-business-activity-monitoring.md).</span></span> <span data-ttu-id="aabbe-110">有关跟踪配置文件编辑器 (TPE) 的信息，请参阅[跟踪配置文件编辑器](../core/tracking-profile-editor.md)。</span><span class="sxs-lookup"><span data-stu-id="aabbe-110">For information about the Tracking Profile Editor (TPE), see [Tracking Profile Editor](../core/tracking-profile-editor.md).</span></span>  
  
## <a name="wrapping-the-orchestrationeventstream-object"></a><span data-ttu-id="aabbe-111">包装 OrchestrationEventStream 对象</span><span class="sxs-lookup"><span data-stu-id="aabbe-111">Wrapping the OrchestrationEventStream Object</span></span>  
 <span data-ttu-id="aabbe-112">面向服务的解决方案，如业务流程管理解决方案包装**OrchestrationEventStream**对象。</span><span class="sxs-lookup"><span data-stu-id="aabbe-112">Like the service-oriented solution, the business process management solution wraps the **OrchestrationEventStream** object.</span></span> <span data-ttu-id="aabbe-113">而且，如面向服务的解决方案中，所有方法是静态的以便业务流程不需要使用这些方法创建的对象的实例。</span><span class="sxs-lookup"><span data-stu-id="aabbe-113">And, like the service-oriented solution, all of the methods are static so that the orchestrations do not need to create instances of objects in order to use the methods.</span></span> <span data-ttu-id="aabbe-114">这还意味着在跟踪中使用的对象而无需进行序列化，无需保存 （不需要是可序列化） 如果引擎冻结业务流程。</span><span class="sxs-lookup"><span data-stu-id="aabbe-114">This also means that the objects used in tracking do not have to be serialized and will not need to be saved (do not need to be serializable) if the engine dehydrates an orchestration.</span></span> <span data-ttu-id="aabbe-115">业务流程管理解决方案，但是，包装**OrchestrationEventStream**全部派生自单个的多个对象，使用抽象对象。</span><span class="sxs-lookup"><span data-stu-id="aabbe-115">The business process management solution, however, wraps **OrchestrationEventStream** with several objects all derived from a single, abstract object.</span></span>  
  
 <span data-ttu-id="aabbe-116">抽象类是**BasicActivity**。</span><span class="sxs-lookup"><span data-stu-id="aabbe-116">The abstract class is **BasicActivity**.</span></span> <span data-ttu-id="aabbe-117">尽管它是抽象的但类不是真的作为派生类的模板。</span><span class="sxs-lookup"><span data-stu-id="aabbe-117">Although it is abstract, the class does not really serve as a template for derived classes.</span></span> <span data-ttu-id="aabbe-118">而是通过其静态方法，它提供了一组方法无需限定即可在派生类中。</span><span class="sxs-lookup"><span data-stu-id="aabbe-118">Rather, through its static methods, it provides a set of methods available without qualification in a derived class.</span></span> <span data-ttu-id="aabbe-119">此操作，实际上，提供四种默认实现的方法。</span><span class="sxs-lookup"><span data-stu-id="aabbe-119">This, in effect, gives you four default implementations of the methods.</span></span> <span data-ttu-id="aabbe-120">四个静态方法是：**CreateActivityId**， **BeginActivity**， **UpdateActivity**，并且**EndActivity**。</span><span class="sxs-lookup"><span data-stu-id="aabbe-120">The four static methods are: **CreateActivityId**, **BeginActivity**, **UpdateActivity**, and **EndActivity**.</span></span>  
  
 <span data-ttu-id="aabbe-121">类重载**BeginActivity**方法。</span><span class="sxs-lookup"><span data-stu-id="aabbe-121">The class overloads the **BeginActivity** method.</span></span> <span data-ttu-id="aabbe-122">它的一个版本获取活动名称作为单个参数，创建要用作活动标识符的 GUID，然后调用其自身的版本，采用了活动名称和活动标识符，然后返回活动标识符。</span><span class="sxs-lookup"><span data-stu-id="aabbe-122">One version of it takes an activity name as a single argument, creates a GUID to use as the activity identifier, and then calls the version of itself that takes an activity name and an activity identifier, and then returns the activity identifier.</span></span> <span data-ttu-id="aabbe-123">此单参数版本非常有用的情况下订单可能不具有唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="aabbe-123">This single argument version is useful for cases where an order might not have a unique identifier.</span></span>  
  
 <span data-ttu-id="aabbe-124">**CreateActivityId**方法采用一个字符串，例如请求标识符的唯一标识符并返回一个字符串，将它们连下划线开头。</span><span class="sxs-lookup"><span data-stu-id="aabbe-124">The **CreateActivityId** method takes a string and a unique identifier such as the request identifier and returns a string concatenating them with an underscore.</span></span> <span data-ttu-id="aabbe-125">这提供了一个唯一的活动标识符，并在派生类中广泛使用。</span><span class="sxs-lookup"><span data-stu-id="aabbe-125">This provides a unique activity identifier and is used extensively in the derived classes.</span></span> <span data-ttu-id="aabbe-126">**BeginActivity**， **UpdateActivity**，并**EndActivity**方法将调用**BeginActiviy**， **UpdateActivity**，并**EndActivity**的方法**OrchestrationEventStream**。</span><span class="sxs-lookup"><span data-stu-id="aabbe-126">The **BeginActivity**, **UpdateActivity**, and **EndActivity** methods call the **BeginActiviy**, **UpdateActivity**, and **EndActivity** methods of **OrchestrationEventStream**.</span></span>  
  
 <span data-ttu-id="aabbe-127">该解决方案派生类从**BasicActivity** orderbroker (**CustomerOrderRequest**)，订单管理器 (**OrderManager**)，并处理阶段 (**ServiceOrderRequest**)。</span><span class="sxs-lookup"><span data-stu-id="aabbe-127">The solution derives classes from **BasicActivity** for the order broker (**CustomerOrderRequest**), order manager (**OrderManager**), and the processing stages (**ServiceOrderRequest**).</span></span> <span data-ttu-id="aabbe-128">每个类对应于一个活动。</span><span class="sxs-lookup"><span data-stu-id="aabbe-128">Each of the classes corresponds to an activity.</span></span> <span data-ttu-id="aabbe-129">每个类提供要在中使用的活动名称的字符串**CreateActivityId**创建活动标识符，以及方法专用于活动里程碑。</span><span class="sxs-lookup"><span data-stu-id="aabbe-129">Each class provides a string for the activity name to be used in **CreateActivityId** to create the activity identifier as well as methods specialized for the activity milestones.</span></span>  
  
 <span data-ttu-id="aabbe-130">由于 orderbroker 发出订单并在稍后接收响应，因此包含给定顺序的请求标识符的活动标识符恢复的方法。</span><span class="sxs-lookup"><span data-stu-id="aabbe-130">Because the order broker hands off the order and later receives a response, it includes a method to recover the activity identifier given to the request identifier of the order.</span></span> <span data-ttu-id="aabbe-131">这样，业务流程可以继续跟踪最后处理订单的元素。</span><span class="sxs-lookup"><span data-stu-id="aabbe-131">This allows the business process to continue tracking the final elements of processing the order.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="aabbe-132">如果提交订单通过文件工具而不是客户服务 web 应用程序，，需要将一个唯一的标识符添加到每个请求。</span><span class="sxs-lookup"><span data-stu-id="aabbe-132">If you submit orders through the file facility rather than through the customer service web application, you need to add an identifier unique to each request.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aabbe-133">请参阅</span><span class="sxs-lookup"><span data-stu-id="aabbe-133">See Also</span></span>  
 [<span data-ttu-id="aabbe-134">开发业务流程管理解决方案</span><span class="sxs-lookup"><span data-stu-id="aabbe-134">Developing a Business Process Management Solution</span></span>](../core/developing-a-business-process-management-solution.md)