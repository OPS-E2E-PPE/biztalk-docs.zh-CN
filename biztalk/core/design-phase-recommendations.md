---
title: 设计阶段的建议 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ee3d183e-a6f3-47d0-90ac-99b12c064607
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4beb6e0a9fc5750e5e9f8135fd17723301206577
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36979806"
---
# <a name="design-phase-recommendations"></a><span data-ttu-id="6ebfb-102">设计阶段的建议</span><span class="sxs-lookup"><span data-stu-id="6ebfb-102">Design Phase Recommendations</span></span>
<span data-ttu-id="6ebfb-103">设计阶段的主要可交付成果是针对系统和测试用例（用于验证系统功能和性能）的设计规范。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-103">The primary deliverables for the design phase are design specifications for both the system and the test cases for validating system functionality and performance.</span></span> <span data-ttu-id="6ebfb-104">调查功能和测试的可行性是设计过程的主要组成部分，这涉及到初始开发以及在验证设计情况下对所实现概念验证的一些早期测试，如以下部分所讨论的。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-104">Investigations of the feasibility of features and tests are a typical part of the design process, involving initial development and, in the case of validation design, some early testing of proof-of-concept implementations as discussed in this section below.</span></span>  
  
## <a name="acquire-detailed-throughput-and-latency-profiles"></a><span data-ttu-id="6ebfb-105">获取详细的吞吐量和延迟状况</span><span class="sxs-lookup"><span data-stu-id="6ebfb-105">Acquire Detailed Throughput and Latency Profiles</span></span>  
 <span data-ttu-id="6ebfb-106">根据以前项目阶段的性能发布标准所基于的初始负载状况，在设计阶段期间确定详细的吞吐量和延迟状况。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-106">Building on the initial load profiles on which the performance release criteria from the previous project phase were established, establish detailed throughput and latency profiles during the design phase.</span></span> <span data-ttu-id="6ebfb-107">如果可以，从生产系统获取性能数据。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-107">If available, acquire performance data from production systems.</span></span> <span data-ttu-id="6ebfb-108">在此阶段中使用生产数据可以让您针对真实的性能状况设计测试用例。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-108">Using production data will provide realistic performance profiles on which test cases can be designed during this phase.</span></span> <span data-ttu-id="6ebfb-109">如果生产数据不可用，则必须根据预期负载推断出实际状况。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-109">If production data is not available, then a realistic profile must be extrapolated from expected load.</span></span>  
  
 <span data-ttu-id="6ebfb-110">在设计阶段创建性能测试用例（包括性能状况）是很重要的，以便更准确地模拟系统在生产环境中的性能表现。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-110">It is critical that the performance test cases being created during the design phase include performance profiles that closely emulate what the system will be expected to support in production.</span></span> <span data-ttu-id="6ebfb-111">有关创建实际和可持续性能配置文件的详细信息，请参阅[可承受性能？](../core/what-is-sustainable-performance.md)</span><span class="sxs-lookup"><span data-stu-id="6ebfb-111">For more information about creating realistic and sustainable performance profiles, see [What Is Sustainable Performance?](../core/what-is-sustainable-performance.md)</span></span>  
  
## <a name="investigate-performance-risk-mitigations"></a><span data-ttu-id="6ebfb-112">研究性能风险缓解措施</span><span class="sxs-lookup"><span data-stu-id="6ebfb-112">Investigate Performance Risk Mitigations</span></span>  
 <span data-ttu-id="6ebfb-113">在需求阶段，已经确定了实现所需性能目标的风险，并且确定了可能的缓解措施。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-113">During the requirements phase, risks to achieving the desired performance goals were identified and possible mitigations identified.</span></span>  <span data-ttu-id="6ebfb-114">在设计阶段应尽可能早地研究风险和缓解措施，以便在需要时能够有时间更改设计。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-114">The risks and mitigations should be investigated as early in the design phase as possible in order to allow time to change the design if needed.</span></span> <span data-ttu-id="6ebfb-115">首先应使用概念验证 (POC) 测试证明所确定的每个风险的确是一个问题，然后应测试缓解措施以评估其功效。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-115">Each identified risk should first be proven to be an issue using proof of concept (POC) testing and then mitigations should be tested to evaluate efficacy.</span></span>  
  
 <span data-ttu-id="6ebfb-116">例如，假定旧有系统使用 FTP 与其他系统进行通信。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-116">For example, assume that a legacy system uses FTP to communicate with other systems.</span></span> <span data-ttu-id="6ebfb-117">但是，根据旧有 FTP 服务器与 BizTalk Server FTP 适配器配合使用时可达到的吞吐量水平，显然无法达到所需的吞吐量（在需求阶段确定的发布标准）。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-117">However, looking at the level of throughput that the legacy FTP server can achieve in combination with the BizTalk Server FTP adapter, it is clear that the desired throughput (established as release criteria during the requirements phase) will not be achievable.</span></span> <span data-ttu-id="6ebfb-118">为减轻对项目所带来的风险，在需求阶段确定了以下备选方法：</span><span class="sxs-lookup"><span data-stu-id="6ebfb-118">To mitigate the risk to the project, the following alternatives are identified during the requirements phase:</span></span>  
  
- <span data-ttu-id="6ebfb-119">向上或向外扩展 FTP 服务器，并创建多个专门用于特定消息类型的逻辑 FTP 地址，以分散负载</span><span class="sxs-lookup"><span data-stu-id="6ebfb-119">Scale up or out the FTP server and create multiple logical FTP addresses dedicated to specific message types to spread the load</span></span>  
  
- <span data-ttu-id="6ebfb-120">将旧有系统修改为将单个文件中的多个消息作为批传送，从而减少每条消息的传输开销</span><span class="sxs-lookup"><span data-stu-id="6ebfb-120">Modify the legacy system to deliver many messages in a single file as a batch to reduce the per-message transfer overhead</span></span>  
  
- <span data-ttu-id="6ebfb-121">将旧有系统修改为使用已知速度快于 FTP 的其他协议，例如 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-121">Modify the legacy system to use an alternative protocol that is known to be faster than FTP such as MSMQ</span></span>  
  
  <span data-ttu-id="6ebfb-122">在本例中首先需要完成的研究是通过测试当前的 FTP 系统的性能来证明存在风险。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-122">The first investigation that needs to be done in this example is to prove that the risk exists by testing the current FTP system performance.</span></span> <span data-ttu-id="6ebfb-123">将构建和部署仅从 FTP 服务器接收消息的一个简单的概念验证解决方案，并且将 FTP 途径将要面对的生产负载状况应用于此概念验证解决方案。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-123">A simple proof of concept solution that just receives messages from the FTP server would be built and deployed and the production load profile expected for the FTP pathway applied to it.</span></span> <span data-ttu-id="6ebfb-124">如果服务器能够承受所需负载，则就不会出现风险也不需要进行进一步的研究。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-124">If the server is capable of sustaining the desired load, then the risk is not realized and further investigation is not needed.</span></span> <span data-ttu-id="6ebfb-125">如果无法承受所需负载，则应通过概念验证研究来找出最有可能以最少成本和最低项目风险来解决此问题的其他方法。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-125">If it is not able to sustain the desired load, then the alternative that is most likely to address the issue with the least amount of cost and project risk should be investigated via a proof of concept investigation.</span></span>  
  
## <a name="refine-system-size-estimate"></a><span data-ttu-id="6ebfb-126">提升系统规模评估</span><span class="sxs-lookup"><span data-stu-id="6ebfb-126">Refine System Size Estimate</span></span>  
 <span data-ttu-id="6ebfb-127">在设计阶段进行的研究可提供有关系统性能的宝贵经验性信息。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-127">Investigations conducted during the design phase provide valuable empirical information regarding the performance capabilities of your system.</span></span>  
  
 <span data-ttu-id="6ebfb-128">例如，继续上述示例，假如我们发现 FTP 的性能过低。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-128">For example, let's continue the example above where the performance of FTP is found to be too low.</span></span> <span data-ttu-id="6ebfb-129">由于环境已包括将 MSMQ 用作消息传输手段的系统，因此决定将旧有系统也修改为使用 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-129">Because the environment already includes systems that use MSMQ as a messaging transport, it was decided to modify the legacy system to use MSMQ as well.</span></span> <span data-ttu-id="6ebfb-130">但是，在对使用 MSMQ 的新 POC 进行性能测试期间，观察到 MessageBox 数据库所位于的 SQL 服务器的 CPU 利用率几乎固定在 100%，并且无法通过 MSMQ 途径实现预期的吞吐量。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-130">However, during the performance testing of a new POC that employs MSMQ, it was observed that the CPU on the SQL server on which the MessageBox database lives almost constantly at 100% utilization and you are not able to achieve the expected throughput on the MSMQ pathway.</span></span>  
  
 <span data-ttu-id="6ebfb-131">假定 SQL Server 配置对应用程序来说已经是最佳的，那么显然对于所需吞吐量而言 SQL Server 硬件的能力不足并且需要提升系统规模。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-131">Assuming the SQL Server configuration is optimal for the application, the SQL Server hardware is clearly undersized for the desired throughput and the system size needs to be refined.</span></span> <span data-ttu-id="6ebfb-132">在这种情况下，SQL Server 硬件需要更多的 CPU 或速度更快的 CPU，或同时需要二者。</span><span class="sxs-lookup"><span data-stu-id="6ebfb-132">In this case, the SQL Server hardware needs either additional CPUs, faster CPUs, or both.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ebfb-133">请参阅</span><span class="sxs-lookup"><span data-stu-id="6ebfb-133">See Also</span></span>  
 <span data-ttu-id="6ebfb-134">[分阶段描述的项目规划建议](../core/project-planning-recommendations-by-phase.md) </span><span class="sxs-lookup"><span data-stu-id="6ebfb-134">[Project Planning Recommendations by Phase](../core/project-planning-recommendations-by-phase.md) </span></span>  
 <span data-ttu-id="6ebfb-135">[需求阶段的建议](../core/requirements-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="6ebfb-135">[Requirements Phase Recommendations](../core/requirements-phase-recommendations.md) </span></span>  
 <span data-ttu-id="6ebfb-136">[实现阶段的建议](../core/implementation-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="6ebfb-136">[Implementation Phase Recommendations](../core/implementation-phase-recommendations.md) </span></span>  
 <span data-ttu-id="6ebfb-137">[验证阶段的建议](../core/verification-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="6ebfb-137">[Verification Phase Recommendations](../core/verification-phase-recommendations.md) </span></span>  
 [<span data-ttu-id="6ebfb-138">发行阶段的建议</span><span class="sxs-lookup"><span data-stu-id="6ebfb-138">Release Phase Recommendations</span></span>](../core/release-phase-recommendations.md)