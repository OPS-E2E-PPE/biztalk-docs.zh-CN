---
title: 设计阶段的建议 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ee3d183e-a6f3-47d0-90ac-99b12c064607
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 54d65cdefbba019d7643d701cea8e41e815fe1c2
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65351674"
---
# <a name="design-phase-recommendations"></a><span data-ttu-id="b6905-102">设计阶段的建议</span><span class="sxs-lookup"><span data-stu-id="b6905-102">Design Phase Recommendations</span></span>
<span data-ttu-id="b6905-103">在设计阶段的主要可交付成果是针对系统的设计规范和以验证系统功能和性能测试用例。</span><span class="sxs-lookup"><span data-stu-id="b6905-103">The primary deliverables for the design phase are design specifications for both the system and the test cases for validating system functionality and performance.</span></span> <span data-ttu-id="b6905-104">调查功能和测试的可行性是设计过程，涉及到初始开发的典型部分，并在验证设计的情况下作为概念证明实现一些早期测试此部分中讨论下面。</span><span class="sxs-lookup"><span data-stu-id="b6905-104">Investigations of the feasibility of features and tests are a typical part of the design process, involving initial development and, in the case of validation design, some early testing of proof-of-concept implementations as discussed in this section below.</span></span>  
  
## <a name="acquire-detailed-throughput-and-latency-profiles"></a><span data-ttu-id="b6905-105">获取详细的吞吐量和延迟状况</span><span class="sxs-lookup"><span data-stu-id="b6905-105">Acquire Detailed Throughput and Latency Profiles</span></span>  
 <span data-ttu-id="b6905-106">基础上建立从以前项目阶段的性能发布标准的初始加载配置文件，在设计阶段建立详细的吞吐量和延迟状况。</span><span class="sxs-lookup"><span data-stu-id="b6905-106">Building on the initial load profiles on which the performance release criteria from the previous project phase were established, establish detailed throughput and latency profiles during the design phase.</span></span> <span data-ttu-id="b6905-107">如果可用，获取从生产系统的性能数据。</span><span class="sxs-lookup"><span data-stu-id="b6905-107">If available, acquire performance data from production systems.</span></span> <span data-ttu-id="b6905-108">使用生产数据将提供真实的性能状况在此阶段可以在其设计测试用例。</span><span class="sxs-lookup"><span data-stu-id="b6905-108">Using production data will provide realistic performance profiles on which test cases can be designed during this phase.</span></span> <span data-ttu-id="b6905-109">如果生产数据不可用，必须从预期的负载推测真实的配置文件。</span><span class="sxs-lookup"><span data-stu-id="b6905-109">If production data is not available, then a realistic profile must be extrapolated from expected load.</span></span>  
  
 <span data-ttu-id="b6905-110">在设计阶段创建性能测试用例包括预期需要更准确地模拟系统的配置文件以支持在生产环境中的性能至关重要。</span><span class="sxs-lookup"><span data-stu-id="b6905-110">It is critical that the performance test cases being created during the design phase include performance profiles that closely emulate what the system will be expected to support in production.</span></span> <span data-ttu-id="b6905-111">有关创建实际和可持续性能配置文件的详细信息，请参阅[可承受性能？](../core/what-is-sustainable-performance.md)</span><span class="sxs-lookup"><span data-stu-id="b6905-111">For more information about creating realistic and sustainable performance profiles, see [What Is Sustainable Performance?](../core/what-is-sustainable-performance.md)</span></span>  
  
## <a name="investigate-performance-risk-mitigations"></a><span data-ttu-id="b6905-112">调查性能风险缓解措施</span><span class="sxs-lookup"><span data-stu-id="b6905-112">Investigate Performance Risk Mitigations</span></span>  
 <span data-ttu-id="b6905-113">在需求阶段，实现所需的性能目标的风险已标识的标识和可能缓解措施。</span><span class="sxs-lookup"><span data-stu-id="b6905-113">During the requirements phase, risks to achieving the desired performance goals were identified and possible mitigations identified.</span></span>  <span data-ttu-id="b6905-114">风险和缓解措施应进行调查设计阶段尽可能早地以便留出时间来根据需要更改设计。</span><span class="sxs-lookup"><span data-stu-id="b6905-114">The risks and mitigations should be investigated as early in the design phase as possible in order to allow time to change the design if needed.</span></span> <span data-ttu-id="b6905-115">首先应证明每个标识的风险是使用概念证明 (POC) 测试问题，然后应测试缓解措施以评估其功效。</span><span class="sxs-lookup"><span data-stu-id="b6905-115">Each identified risk should first be proven to be an issue using proof of concept (POC) testing and then mitigations should be tested to evaluate efficacy.</span></span>  
  
 <span data-ttu-id="b6905-116">例如，假定旧有系统使用 FTP 与其他系统进行通信。</span><span class="sxs-lookup"><span data-stu-id="b6905-116">For example, assume that a legacy system uses FTP to communicate with other systems.</span></span> <span data-ttu-id="b6905-117">但是，查看的旧有 FTP 服务器可以在 BizTalk Server FTP 适配器的组合来实现的吞吐量级别，很明显，所需的吞吐量 （已建立的发布标准在需求阶段） 将不会得以实现。</span><span class="sxs-lookup"><span data-stu-id="b6905-117">However, looking at the level of throughput that the legacy FTP server can achieve in combination with the BizTalk Server FTP adapter, it is clear that the desired throughput (established as release criteria during the requirements phase) will not be achievable.</span></span> <span data-ttu-id="b6905-118">若要缓解使项目遭受危险，以下备选方案标识在需求阶段：</span><span class="sxs-lookup"><span data-stu-id="b6905-118">To mitigate the risk to the project, the following alternatives are identified during the requirements phase:</span></span>  
  
- <span data-ttu-id="b6905-119">扩展或横向扩展 FTP 服务器并创建多个逻辑 FTP 地址专用于特定消息类型以分散负载</span><span class="sxs-lookup"><span data-stu-id="b6905-119">Scale up or out the FTP server and create multiple logical FTP addresses dedicated to specific message types to spread the load</span></span>  
  
- <span data-ttu-id="b6905-120">旧有系统修改为将单个文件中的许多消息传递作为批处理以减少每个消息传输开销</span><span class="sxs-lookup"><span data-stu-id="b6905-120">Modify the legacy system to deliver many messages in a single file as a batch to reduce the per-message transfer overhead</span></span>  
  
- <span data-ttu-id="b6905-121">旧有系统修改为使用已知速度快于 FTP 如 MSMQ 的其他协议</span><span class="sxs-lookup"><span data-stu-id="b6905-121">Modify the legacy system to use an alternative protocol that is known to be faster than FTP such as MSMQ</span></span>  
  
  <span data-ttu-id="b6905-122">第一个需要在此示例中完成的调查是为了证明通过测试当前的 FTP 系统性能存在风险。</span><span class="sxs-lookup"><span data-stu-id="b6905-122">The first investigation that needs to be done in this example is to prove that the risk exists by testing the current FTP system performance.</span></span> <span data-ttu-id="b6905-123">简单的概念将构建和部署解决方案，只需从 FTP 服务器接收消息并对其应用的 FTP 途径的不同的预期的生产负载配置文件的概念验证。</span><span class="sxs-lookup"><span data-stu-id="b6905-123">A simple proof of concept solution that just receives messages from the FTP server would be built and deployed and the production load profile expected for the FTP pathway applied to it.</span></span> <span data-ttu-id="b6905-124">如果服务器能够承受所需的负载，然后未实现风险并不需要进一步调查。</span><span class="sxs-lookup"><span data-stu-id="b6905-124">If the server is capable of sustaining the desired load, then the risk is not realized and further investigation is not needed.</span></span> <span data-ttu-id="b6905-125">如果不能够承受所需的负载，应通过概念验证研究调查最有可能解决此问题最少的成本和项目风险的备选方法。</span><span class="sxs-lookup"><span data-stu-id="b6905-125">If it is not able to sustain the desired load, then the alternative that is most likely to address the issue with the least amount of cost and project risk should be investigated via a proof of concept investigation.</span></span>  
  
## <a name="refine-system-size-estimate"></a><span data-ttu-id="b6905-126">提升系统规模评估</span><span class="sxs-lookup"><span data-stu-id="b6905-126">Refine System Size Estimate</span></span>  
 <span data-ttu-id="b6905-127">在设计阶段进行的研究提供您的系统性能功能有关的宝贵经验性信息。</span><span class="sxs-lookup"><span data-stu-id="b6905-127">Investigations conducted during the design phase provide valuable empirical information regarding the performance capabilities of your system.</span></span>  
  
 <span data-ttu-id="b6905-128">例如，让我们继续在其中找到 FTP 的性能过低上面的示例。</span><span class="sxs-lookup"><span data-stu-id="b6905-128">For example, let's continue the example above where the performance of FTP is found to be too low.</span></span> <span data-ttu-id="b6905-129">由于环境已包括将 MSMQ 用作消息传输的系统，因此决定修改旧有系统也使用 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="b6905-129">Because the environment already includes systems that use MSMQ as a messaging transport, it was decided to modify the legacy system to use MSMQ as well.</span></span> <span data-ttu-id="b6905-130">但是，在使用 MSMQ 的新 poc 性能测试期间观察到的 MessageBox 数据库所位于几乎固定在 100%利用率，并且在 SQL server 上的 CPU 不能实现预期的吞吐量 MSMQ 途径.</span><span class="sxs-lookup"><span data-stu-id="b6905-130">However, during the performance testing of a new POC that employs MSMQ, it was observed that the CPU on the SQL server on which the MessageBox database lives almost constantly at 100% utilization and you are not able to achieve the expected throughput on the MSMQ pathway.</span></span>  
  
 <span data-ttu-id="b6905-131">假设 SQL Server 配置最适合应用程序，SQL Server 硬件是显然对于所需的吞吐量和需要明确定义的系统的大小。</span><span class="sxs-lookup"><span data-stu-id="b6905-131">Assuming the SQL Server configuration is optimal for the application, the SQL Server hardware is clearly undersized for the desired throughput and the system size needs to be refined.</span></span> <span data-ttu-id="b6905-132">在这种情况下，SQL Server 硬件需要更多的 Cpu、 更快的 Cpu，或这两者。</span><span class="sxs-lookup"><span data-stu-id="b6905-132">In this case, the SQL Server hardware needs either additional CPUs, faster CPUs, or both.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b6905-133">请参阅</span><span class="sxs-lookup"><span data-stu-id="b6905-133">See Also</span></span>  
 <span data-ttu-id="b6905-134">[分阶段描述的项目规划建议](../core/project-planning-recommendations-by-phase.md) </span><span class="sxs-lookup"><span data-stu-id="b6905-134">[Project Planning Recommendations by Phase](../core/project-planning-recommendations-by-phase.md) </span></span>  
 <span data-ttu-id="b6905-135">[需求阶段的建议](../core/requirements-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="b6905-135">[Requirements Phase Recommendations](../core/requirements-phase-recommendations.md) </span></span>  
 <span data-ttu-id="b6905-136">[实现阶段的建议](../core/implementation-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="b6905-136">[Implementation Phase Recommendations](../core/implementation-phase-recommendations.md) </span></span>  
 <span data-ttu-id="b6905-137">[验证阶段的建议](../core/verification-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="b6905-137">[Verification Phase Recommendations](../core/verification-phase-recommendations.md) </span></span>  
 [<span data-ttu-id="b6905-138">发行阶段的建议</span><span class="sxs-lookup"><span data-stu-id="b6905-138">Release Phase Recommendations</span></span>](../core/release-phase-recommendations.md)