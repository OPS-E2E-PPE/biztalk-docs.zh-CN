---
title: 配置文件适配器 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- File adapters, configuring
- configuring [File adapters], about configuring File adapters
- configuring [File adapters]
ms.assetid: 1e0c7e20-80f8-469b-b423-34a2b90f9ec3
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 01d2cf8a2423d599e275ad9cc87fa30792b6db8e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65391414"
---
# <a name="configure-the-file-adapter"></a><span data-ttu-id="e1358-102">配置文件适配器</span><span class="sxs-lookup"><span data-stu-id="e1358-102">Configure the File adapter</span></span>
<span data-ttu-id="e1358-103">如何配置文件适配器，阅读提供的安全建议，并查看所需的权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-103">How to configure the File adapter, read the security recommendations, and view the required permissions.</span></span>

<span data-ttu-id="e1358-104">您可以创建接收位置和发送端口使用[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，或以编程方式。</span><span class="sxs-lookup"><span data-stu-id="e1358-104">You can create a receive location and send port using [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], or programmatically.</span></span> <span data-ttu-id="e1358-105">本主题重点[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]控制台。</span><span class="sxs-lookup"><span data-stu-id="e1358-105">This topic focuses on the [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)] console.</span></span> <span data-ttu-id="e1358-106">有关以编程方式的步骤，请访问[创建接收位置或以编程方式发送端口](../core/create-the-receive-location-and-send-port-programmatically.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-106">For the programmatic steps, go to [Create the receive location or send port programmatically](../core/create-the-receive-location-and-send-port-programmatically.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e1358-107">**从开始[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]** ，可以连接到 Azure 文件共享使用文件适配器。</span><span class="sxs-lookup"><span data-stu-id="e1358-107">**Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]**, you can connect to an Azure file share using the File adapter.</span></span> <span data-ttu-id="e1358-108">必须在 BizTalk Server 上装载的 Azure 存储帐户。</span><span class="sxs-lookup"><span data-stu-id="e1358-108">The Azure storage account must be mounted on your BizTalk Server.</span></span> <span data-ttu-id="e1358-109">[开始使用 Azure 文件存储在 Windows 上](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share)列出了安装步骤。</span><span class="sxs-lookup"><span data-stu-id="e1358-109">[Get started with Azure File storage on Windows](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share) lists the mounting steps.</span></span>

## <a name="security-recommendations"></a><span data-ttu-id="e1358-110">安全建议</span><span class="sxs-lookup"><span data-stu-id="e1358-110">Security recommendations</span></span>

<span data-ttu-id="e1358-111">文件适配器将文件传入和传出 BizTalk Server 从和目录。</span><span class="sxs-lookup"><span data-stu-id="e1358-111">The File adapter transfers files into and out of BizTalk Server from and to a directory.</span></span> <span data-ttu-id="e1358-112">建议您遵循这些准则以保护和部署你的环境中的文件适配器：</span><span class="sxs-lookup"><span data-stu-id="e1358-112">It is recommended you follow these guidelines for securing and deploying the File adapter in your environment:</span></span>  

-   <span data-ttu-id="e1358-113">不打开端口以连接到外围网络中的文件共享。</span><span class="sxs-lookup"><span data-stu-id="e1358-113">Do not open ports to connect to a file share in the perimeter network.</span></span> <span data-ttu-id="e1358-114">应在环境中使用文件适配器的高级别信任，诸如 intranet 等。</span><span class="sxs-lookup"><span data-stu-id="e1358-114">You should use the File adapter in environments where there is a high level of trust, such as an intranet.</span></span> 

-   <span data-ttu-id="e1358-115">在接收位置的存放目录设置加强的任意访问控制列表 (DACL)。</span><span class="sxs-lookup"><span data-stu-id="e1358-115">Set strong discretionary access control lists (DACL) in the receive location's drop directories.</span></span> <span data-ttu-id="e1358-116">例如，必须设置读取、 写入、 删除文件，并删除对文件从其接收位置从其中提取消息，该目录的子文件夹和文件权限，以便只有经过授权的用户可以在此位置中存放消息。</span><span class="sxs-lookup"><span data-stu-id="e1358-116">For example, you must set read, write, delete files, and delete subfolders and files permissions to the directory from which the file receive location picks up messages, so that only authorized users can drop messages in this location.</span></span>  

-   <span data-ttu-id="e1358-117">当您使用文件适配器提取关键数据时，建议使用 Internet 协议安全性 (IPSec)。</span><span class="sxs-lookup"><span data-stu-id="e1358-117">When you use the File adapter to pick up critical data, it is recommended to use Internet Protocol Security (IPSec.)</span></span>  

## <a name="required-permissions"></a><span data-ttu-id="e1358-118">所需的权限</span><span class="sxs-lookup"><span data-stu-id="e1358-118">Required permissions</span></span>

<span data-ttu-id="e1358-119">所选的适配器处理程序的主机实例的安全上下文下运行适配器处理程序。</span><span class="sxs-lookup"><span data-stu-id="e1358-119">Adapter handlers run under the security context of the host instance selected for the adapter handler.</span></span> <span data-ttu-id="e1358-120">主机实例使用`Logon`中的属性\***主机名\*-主机实例属性**在 BizTalk 管理。</span><span class="sxs-lookup"><span data-stu-id="e1358-120">The host instance uses the `Logon` property in the ***Host name* - Host Instance Properties** in BizTalk Administration.</span></span> <span data-ttu-id="e1358-121">这`Logon`帐户必须具有对任何文件夹或共享文件适配器使用的特定权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-121">This `Logon` account must have specific permissions to any folders or shares used by the File adapter.</span></span>

<span data-ttu-id="e1358-122">处理程序所使用的主机实例用户帐户需要以下权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-122">The host instance user account used by the handler requires the following permissions.</span></span> <span data-ttu-id="e1358-123">✔ 意味着是必需的权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-123">A ✔ means the permission is required.</span></span> <span data-ttu-id="e1358-124">空白条目意味着不需要权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-124">A blank entry means the permission is not required.</span></span>

| <span data-ttu-id="e1358-125">权限</span><span class="sxs-lookup"><span data-stu-id="e1358-125">Permissions</span></span> | <span data-ttu-id="e1358-126">接收处理程序</span><span class="sxs-lookup"><span data-stu-id="e1358-126">Receive handler</span></span> | <span data-ttu-id="e1358-127">发送处理程序</span><span class="sxs-lookup"><span data-stu-id="e1358-127">Send handler</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e1358-128">完全控制</span><span class="sxs-lookup"><span data-stu-id="e1358-128">Full control</span></span> | <span data-ttu-id="e1358-129">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-129">✔</span></span> <br/> <span data-ttu-id="e1358-130">在共享级别 （如果访问文件共享）</span><span class="sxs-lookup"><span data-stu-id="e1358-130">at the share level (if accessing a file share)</span></span> |  | 
| <span data-ttu-id="e1358-131">遍历文件夹/执行文件</span><span class="sxs-lookup"><span data-stu-id="e1358-131">Traverse folder / execute file</span></span> |  | <span data-ttu-id="e1358-132">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-132">✔</span></span> <br/> <span data-ttu-id="e1358-133">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-133">at the file level</span></span> | 
| <span data-ttu-id="e1358-134">列出文件夹/读取数据</span><span class="sxs-lookup"><span data-stu-id="e1358-134">List folder / read data</span></span> | <span data-ttu-id="e1358-135">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-135">✔</span></span> <br/> <span data-ttu-id="e1358-136">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-136">at the file level</span></span> | <span data-ttu-id="e1358-137">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-137">✔</span></span> <br/> <span data-ttu-id="e1358-138">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-138">at the file level</span></span> | 
| <span data-ttu-id="e1358-139">读取属性</span><span class="sxs-lookup"><span data-stu-id="e1358-139">Read attributes</span></span> | | <span data-ttu-id="e1358-140">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-140">✔</span></span> <br/> <span data-ttu-id="e1358-141">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-141">at the file level</span></span> | 
| <span data-ttu-id="e1358-142">读取扩展的属性</span><span class="sxs-lookup"><span data-stu-id="e1358-142">Read extended attributes</span></span> | | <span data-ttu-id="e1358-143">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-143">✔</span></span> <br/> <span data-ttu-id="e1358-144">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-144">at the file level</span></span> | 
| <span data-ttu-id="e1358-145">创建文件/写入数据</span><span class="sxs-lookup"><span data-stu-id="e1358-145">Create files / write data</span></span> | | <span data-ttu-id="e1358-146">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-146">✔</span></span> <br/> <span data-ttu-id="e1358-147">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-147">at the file level</span></span> | 
| <span data-ttu-id="e1358-148">创建文件夹/附加数据</span><span class="sxs-lookup"><span data-stu-id="e1358-148">Create folders / append data</span></span> | | <span data-ttu-id="e1358-149">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-149">✔</span></span> <br/> <span data-ttu-id="e1358-150">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-150">at the file level</span></span> | 
| <span data-ttu-id="e1358-151">删除子文件夹和文件</span><span class="sxs-lookup"><span data-stu-id="e1358-151">Delete subfolders and files</span></span> | <span data-ttu-id="e1358-152">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-152">✔</span></span> <br/> <span data-ttu-id="e1358-153">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-153">at the file level</span></span> | <span data-ttu-id="e1358-154">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-154">✔</span></span> <br/> <span data-ttu-id="e1358-155">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-155">at the file level</span></span> | 
| <span data-ttu-id="e1358-156">读取权限</span><span class="sxs-lookup"><span data-stu-id="e1358-156">Read permissions</span></span> | | <span data-ttu-id="e1358-157">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-157">✔</span></span> <br/> <span data-ttu-id="e1358-158">在文件级别</span><span class="sxs-lookup"><span data-stu-id="e1358-158">at the file level</span></span> | 
| <span data-ttu-id="e1358-159">更改</span><span class="sxs-lookup"><span data-stu-id="e1358-159">Change</span></span> | | <span data-ttu-id="e1358-160">✔</span><span class="sxs-lookup"><span data-stu-id="e1358-160">✔</span></span> <br/> <span data-ttu-id="e1358-161">在共享级别 （如果访问文件共享）</span><span class="sxs-lookup"><span data-stu-id="e1358-161">at the share level (if accessing a file share)</span></span> |

> [!TIP] 
> <span data-ttu-id="e1358-162">在文件级别中，打开**高级权限**上的文件或文件夹，以查看这些权限。</span><span class="sxs-lookup"><span data-stu-id="e1358-162">At the file level, open the **advanced permissions** on the file or folder to see these permissions.</span></span>

> [!NOTE] 
> <span data-ttu-id="e1358-163">只有一个接收处理程序，可以与关联的每个主机。</span><span class="sxs-lookup"><span data-stu-id="e1358-163">Each host can associate with only one receive handler.</span></span>  

## <a name="configure-the-receive-location"></a><span data-ttu-id="e1358-164">配置接收位置</span><span class="sxs-lookup"><span data-stu-id="e1358-164">Configure the receive location</span></span>

> [!NOTE]
>  <span data-ttu-id="e1358-165">执行以下过程之前，你必须已添加一个单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="e1358-165">Before completing the following procedure, you must have already added a one-way receive port.</span></span> <span data-ttu-id="e1358-166">请参阅[如何创建接收端口](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-166">See [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  

1. <span data-ttu-id="e1358-167">在 BizTalk Server 管理控制台中，依次展开“ [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]”、“BizTalk 组” 、“应用程序” ，然后展开要在其下创建接收位置的应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1358-167">In the BizTalk Server Administration console, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand **BizTalk Group**, expand **Applications**, and then expand the application under you want to create a receive location.</span></span>  

2. <span data-ttu-id="e1358-168">在左窗格中，单击**接收端口**节点。</span><span class="sxs-lookup"><span data-stu-id="e1358-168">In the left pane, click the **Receive Ports** node.</span></span> <span data-ttu-id="e1358-169">随后，在右窗格中右键单击与现有接收位置关联的接收端口或要与新接收位置关联的接收端口，然后单击“属性” 。</span><span class="sxs-lookup"><span data-stu-id="e1358-169">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  

3. <span data-ttu-id="e1358-170">在左窗格中**接收端口属性**对话框中，选择**接收位置**，并在右窗格中双击现有接收位置或单击**新建**到创建新接收位置。</span><span class="sxs-lookup"><span data-stu-id="e1358-170">In the left pane of the **Receive Port Properties** dialog box, select **Receive Locations**, and in the right pane double-click an existing receive location or click **New** to create a new receive location.</span></span>  

4. <span data-ttu-id="e1358-171">在中**接收位置属性**对话框中**传输**部分中，选择**文件**从下拉列表中，键入，然后单击**配置**以配置接收位置的传输属性。</span><span class="sxs-lookup"><span data-stu-id="e1358-171">In the **Receive Location Properties** dialog box, in the **Transport** section, select **FILE** type from the drop-down list, and then click **Configure** to configure the transport properties for the receive location.</span></span>  

5. <span data-ttu-id="e1358-172">在中**常规**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-172">In the **General** tab, do the following:</span></span>  


   |         <span data-ttu-id="e1358-173">使用此选项</span><span class="sxs-lookup"><span data-stu-id="e1358-173">Use this</span></span>         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <span data-ttu-id="e1358-174">执行的操作</span><span class="sxs-lookup"><span data-stu-id="e1358-174">To do this</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |--------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |    <span data-ttu-id="e1358-175">**接收文件夹**</span><span class="sxs-lookup"><span data-stu-id="e1358-175">**Receive folder**</span></span>    | <span data-ttu-id="e1358-176">必需的。</span><span class="sxs-lookup"><span data-stu-id="e1358-176">Required.</span></span> <span data-ttu-id="e1358-177">在文件系统上，网络共享中，输入文件夹的路径或文件接收处理程序的 Azure 文件共享读取文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-177">Enter the path to a folder on the file system, the network share, or the Azure file share where the file receive handler reads files.</span></span> <span data-ttu-id="e1358-178">可以输入的路径中直接**接收文件夹**文字框中，或选择从文件系统中使用**浏览**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1358-178">You can enter the path directly in the **Receive folder** text box, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="e1358-179">在浏览文件夹时，您还可以创建新的文件夹使用**建立新文件夹**。</span><span class="sxs-lookup"><span data-stu-id="e1358-179">When browsing for the folder, you can also create a new folder using **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="e1358-180">如果使用 Azure 文件存储共享，请输入`\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="e1358-180">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span> <br /><br /><span data-ttu-id="e1358-181">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-181">**Type:** String</span></span> <br/><br/><span data-ttu-id="e1358-182">**注意：** 未设置**接收文件夹**属性设置为使用 NT 分布式文件系统的带符号链接的文件夹。</span><span class="sxs-lookup"><span data-stu-id="e1358-182">**Note:**  Do not set the **Receive folder** property to a folder that uses the NT Distributed File System with a symbolic link.</span></span> <span data-ttu-id="e1358-183">如果使用 NT 分布式文件系统，你可以仅使用文件夹具有直接网络路径在文件适配器接收位置。</span><span class="sxs-lookup"><span data-stu-id="e1358-183">If you are using an NT Distributed File System, you can only use folders with straight network paths in File adapter receive locations.</span></span> <br /><br /> <span data-ttu-id="e1358-184">有关此属性的限制，请参阅[限制配置文件适配器时](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-184">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span> <br/><br/><span data-ttu-id="e1358-185">**注意：** URI 发送端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="e1358-185">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span> |
   |      <span data-ttu-id="e1358-186">**文件掩码**</span><span class="sxs-lookup"><span data-stu-id="e1358-186">**File mask**</span></span>       |                                                                                                                                                                                                                                                                                                                                                                         <span data-ttu-id="e1358-187">必需的。</span><span class="sxs-lookup"><span data-stu-id="e1358-187">Required.</span></span> <span data-ttu-id="e1358-188">指定的文件掩码。</span><span class="sxs-lookup"><span data-stu-id="e1358-188">Specify the mask for the files.</span></span> <span data-ttu-id="e1358-189">此掩码可以包含标准通配符值"\*"。</span><span class="sxs-lookup"><span data-stu-id="e1358-189">This mask can contain the standard wildcard value "\*".</span></span><br /><br /> <span data-ttu-id="e1358-190">**默认值：** \*.xml</span><span class="sxs-lookup"><span data-stu-id="e1358-190">**Default value:** \*.xml</span></span><br /><br /> <span data-ttu-id="e1358-191">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-191">**Type:** String</span></span><br /><br /> <span data-ttu-id="e1358-192">有关此属性的限制，请参阅[限制配置文件适配器时](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-192">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                          |
   |    <span data-ttu-id="e1358-193">**公用地址**</span><span class="sxs-lookup"><span data-stu-id="e1358-193">**Public address**</span></span>    |                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="e1358-194">指定此位置的公共地址。</span><span class="sxs-lookup"><span data-stu-id="e1358-194">Specify the public address of this location.</span></span> <span data-ttu-id="e1358-195">BizTalk Server 公开此地址与外部合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="e1358-195">BizTalk Server exposes this address to external partners.</span></span><br /><br /> <span data-ttu-id="e1358-196">如果未指定此属性，运行时引擎会将其作为替换：</span><span class="sxs-lookup"><span data-stu-id="e1358-196">If this property is not specified, the runtime engine replaces it as:</span></span><br /><br /> <span data-ttu-id="e1358-197">file://\<*接收文件夹*\>/\<*文件掩码*\></span><span class="sxs-lookup"><span data-stu-id="e1358-197">file://\<*Receive folder*\>/\<*File mask*\></span></span><br /><br /> <span data-ttu-id="e1358-198">此属性的值需要一个适配器前缀。</span><span class="sxs-lookup"><span data-stu-id="e1358-198">The value for this property requires an adapter prefix.</span></span><br /><br /> <span data-ttu-id="e1358-199">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-199">**Type:** String</span></span><br /><br /> <span data-ttu-id="e1358-200">**最小长度：** 0</span><span class="sxs-lookup"><span data-stu-id="e1358-200">**Minimum length:** 0</span></span><br /><br /> <span data-ttu-id="e1358-201">**最大长度：** 256</span><span class="sxs-lookup"><span data-stu-id="e1358-201">**Maximum length:** 256</span></span>                                                                                                                                                                                                                                                                                                                                |
   |     <span data-ttu-id="e1358-202">**重试次数**</span><span class="sxs-lookup"><span data-stu-id="e1358-202">**Retry count**</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="e1358-203">指定尝试访问网络共享上的接收位置，如果暂时不可用的次数。</span><span class="sxs-lookup"><span data-stu-id="e1358-203">Specify the number of attempts to access the receive location on a network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="e1358-204">**默认值：** 5</span><span class="sxs-lookup"><span data-stu-id="e1358-204">**Default value:** 5</span></span><br /><br /> <span data-ttu-id="e1358-205">**类型：** Long</span><span class="sxs-lookup"><span data-stu-id="e1358-205">**Type:** Long</span></span><br /><br /> <span data-ttu-id="e1358-206">**最小值：** 0</span><span class="sxs-lookup"><span data-stu-id="e1358-206">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="e1358-207">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="e1358-207">**Maximum value:** MAX_LONG</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                |
   | <span data-ttu-id="e1358-208">**重试间隔 （分钟）**</span><span class="sxs-lookup"><span data-stu-id="e1358-208">**Retry interval (min)**</span></span> |                                                                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="e1358-209">指定两次尝试访问网络共享上的接收位置，如果暂时不可用之间的重试间隔时间 （以分钟为单位）。</span><span class="sxs-lookup"><span data-stu-id="e1358-209">Specify the retry interval time (in minutes) between attempts to access the receive location on the network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="e1358-210">**默认值：** 5 分钟</span><span class="sxs-lookup"><span data-stu-id="e1358-210">**Default value:** 5 minutes</span></span><br /><br /> <span data-ttu-id="e1358-211">**类型：** Long</span><span class="sxs-lookup"><span data-stu-id="e1358-211">**Type:** Long</span></span><br /><br /> <span data-ttu-id="e1358-212">**最小值：** 0</span><span class="sxs-lookup"><span data-stu-id="e1358-212">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="e1358-213">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="e1358-213">**Maximum value:** MAX_LONG</span></span>                                                                                                                                                                                                                                                                                                                                                                                            |


6. <span data-ttu-id="e1358-214">上**身份验证**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-214">On the **Authentication** tab, do the following:</span></span>  


   |                                 <span data-ttu-id="e1358-215">使用此选项</span><span class="sxs-lookup"><span data-stu-id="e1358-215">Use this</span></span>                                  |                                                                                                                                                                                                                                                                                   <span data-ttu-id="e1358-216">执行的操作</span><span class="sxs-lookup"><span data-stu-id="e1358-216">To do this</span></span>                                                                                                                                                                                                                                                                                    |
   |---------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | <span data-ttu-id="e1358-217">**主机没有访问网络共享位置时使用这些凭据**</span><span class="sxs-lookup"><span data-stu-id="e1358-217">**Use these credentials when host does not have access to network share**</span></span> |                                                                                                                                                                                                                      <span data-ttu-id="e1358-218">仅当使用网络共享或 Azure 文件共享时，才需要。</span><span class="sxs-lookup"><span data-stu-id="e1358-218">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="e1358-219">**默认值：** False</span><span class="sxs-lookup"><span data-stu-id="e1358-219">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="e1358-220">**类型：** Boolean</span><span class="sxs-lookup"><span data-stu-id="e1358-220">**Type:** Boolean</span></span>                                                                                                                                                                                                                      |
   |                               <span data-ttu-id="e1358-221">**用户名**</span><span class="sxs-lookup"><span data-stu-id="e1358-221">**User name**</span></span>                               | <span data-ttu-id="e1358-222">如果使用网络共享，请输入有权访问该共享的用户名。</span><span class="sxs-lookup"><span data-stu-id="e1358-222">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="e1358-223">如果使用 Azure 文件存储共享，输入你的存储帐户的名称。</span><span class="sxs-lookup"><span data-stu-id="e1358-223">If using an Azure file storage share, enter the name of your storage account.</span></span><br/><br/><span data-ttu-id="e1358-224">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-224">**Type:** String</span></span> <br /><br /><span data-ttu-id="e1358-225">**注意：** 如果映射到同一个网络共享的多个接收位置配置了备用凭据，然后必须为所有接收位置都使用相同的凭据。</span><span class="sxs-lookup"><span data-stu-id="e1358-225">**Note:**  If multiple receive locations mapped to the same network share are configured with alternative credentials, then the same credentials must be used for all of the receive locations.</span></span> <span data-ttu-id="e1358-226">Windows 不允许您对共享的网络服务器从同一台计算机进行多个连接，如果您尝试使用多个一组凭据。</span><span class="sxs-lookup"><span data-stu-id="e1358-226">Windows does not allow you to make multiple connections to a shared network server from the same computer if you attempt to use more than one set of credentials.</span></span> |
   |                               <span data-ttu-id="e1358-227">**密码**</span><span class="sxs-lookup"><span data-stu-id="e1358-227">**Password**</span></span>                                |                                                                                                                                                          <span data-ttu-id="e1358-228">如果使用网络共享，请输入有权访问网络共享的帐户的密码。</span><span class="sxs-lookup"><span data-stu-id="e1358-228">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="e1358-229">如果使用 Azure 文件存储共享，输入存储帐户访问密钥;这是在 Azure 门户中列出。</span><span class="sxs-lookup"><span data-stu-id="e1358-229">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="e1358-230">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-230">**Type:** String</span></span>                                                                                                                                                          |


7. <span data-ttu-id="e1358-231">在中**批处理**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-231">In the **Batching** tab, do the following:</span></span>  

   |<span data-ttu-id="e1358-232">使用此选项</span><span class="sxs-lookup"><span data-stu-id="e1358-232">Use this</span></span>|<span data-ttu-id="e1358-233">执行的操作</span><span class="sxs-lookup"><span data-stu-id="e1358-233">To do this</span></span>|  
   |--------------|----------------|  
   |<span data-ttu-id="e1358-234">**在批处理中的消息数**</span><span class="sxs-lookup"><span data-stu-id="e1358-234">**Number of messages in a batch**</span></span>|<span data-ttu-id="e1358-235">指定要在一批中提交的消息最大数量。</span><span class="sxs-lookup"><span data-stu-id="e1358-235">Specify the maximum number of messages to be submitted in a batch.</span></span><br /><br /> <span data-ttu-id="e1358-236">**默认值：** 5</span><span class="sxs-lookup"><span data-stu-id="e1358-236">**Default Value:** 5</span></span><br /><br /> <span data-ttu-id="e1358-237">**类型：** smallint</span><span class="sxs-lookup"><span data-stu-id="e1358-237">**Type:** Int</span></span><br /><br /> <span data-ttu-id="e1358-238">**最小值：** 1</span><span class="sxs-lookup"><span data-stu-id="e1358-238">**Minimum value:** 1</span></span><br /><br /> <span data-ttu-id="e1358-239">**最大值：** 256</span><span class="sxs-lookup"><span data-stu-id="e1358-239">**Maximum value:** 256</span></span>|  
   |<span data-ttu-id="e1358-240">**最大批处理大小 （以字节为单位）**</span><span class="sxs-lookup"><span data-stu-id="e1358-240">**Maximum batch size (in bytes)**</span></span>|<span data-ttu-id="e1358-241">指定批的最大总字节数。</span><span class="sxs-lookup"><span data-stu-id="e1358-241">Specify the maximum total bytes for a batch.</span></span><br /><br /> <span data-ttu-id="e1358-242">**默认值：** 102400</span><span class="sxs-lookup"><span data-stu-id="e1358-242">**Default Value:** 102400</span></span><br /><br /> <span data-ttu-id="e1358-243">**类型：** smallint</span><span class="sxs-lookup"><span data-stu-id="e1358-243">**Type:** Int</span></span><br /><br /> <span data-ttu-id="e1358-244">**最小值：** 1024</span><span class="sxs-lookup"><span data-stu-id="e1358-244">**Minimum value:** 1024</span></span><br /><br /> <span data-ttu-id="e1358-245">**最大值：** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="e1358-245">**Maximum value:** MAX_LONG</span></span>|  

    <span data-ttu-id="e1358-246">文件适配器将批达到的那个值第一次，最大消息数或最大允许字节数限制。</span><span class="sxs-lookup"><span data-stu-id="e1358-246">The File adapter will limit the batch to whichever value is reached first, maximum number of messages or maximum allowed bytes.</span></span>  

8. <span data-ttu-id="e1358-247">选择 **确定**。</span><span class="sxs-lookup"><span data-stu-id="e1358-247">Select **OK**.</span></span>  

9. <span data-ttu-id="e1358-248">输入中的相应值**接收位置属性**对话框来完成接收位置的配置，然后单击**确定**以保存设置。</span><span class="sxs-lookup"><span data-stu-id="e1358-248">Enter the appropriate values in the **Receive Location Properties** dialog box to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="e1358-249">有关“接收位置属性”  对话框的信息，请参阅 [如何创建接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-249">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  

## <a name="configure-the-send-port"></a><span data-ttu-id="e1358-250">配置发送端口</span><span class="sxs-lookup"><span data-stu-id="e1358-250">Configure the send port</span></span>

1.  <span data-ttu-id="e1358-251">在 BizTalk Server 管理控制台中，创建新的发送端口或双击某个现有发送端口以对其进行修改。</span><span class="sxs-lookup"><span data-stu-id="e1358-251">In the BizTalk Server Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="e1358-252">请参阅[如何创建发送端口](../core/how-to-create-a-send-port2.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-252">See [How to Create a Send Port](../core/how-to-create-a-send-port2.md).</span></span> <span data-ttu-id="e1358-253">配置所有发送端口选项，并指定**文件**有关**类型**选项**传输**一部分**常规**选项卡。</span><span class="sxs-lookup"><span data-stu-id="e1358-253">Configure all of the send port options and specify **FILE** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  

2.  <span data-ttu-id="e1358-254">选择**配置**按钮旁边**类型**。</span><span class="sxs-lookup"><span data-stu-id="e1358-254">Select the **Configure** button next to **Type**.</span></span>  

3.  <span data-ttu-id="e1358-255">在中**常规**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-255">In the **General** tab, do the following:</span></span>  

    |<span data-ttu-id="e1358-256">使用此选项</span><span class="sxs-lookup"><span data-stu-id="e1358-256">Use this</span></span>|<span data-ttu-id="e1358-257">执行的操作</span><span class="sxs-lookup"><span data-stu-id="e1358-257">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="e1358-258">**目标位置**</span><span class="sxs-lookup"><span data-stu-id="e1358-258">**Destination Location**</span></span>|<span data-ttu-id="e1358-259">必需的。</span><span class="sxs-lookup"><span data-stu-id="e1358-259">Required.</span></span> <span data-ttu-id="e1358-260">文件系统、 公共共享或要写入输出消息的 Azure 文件共享上输入位置的路径。</span><span class="sxs-lookup"><span data-stu-id="e1358-260">Enter the path to the location on the file system, public share, or the Azure file share to write the output messages.</span></span> <span data-ttu-id="e1358-261">可以输入的路径中直接**目标位置**，或选择从文件系统中使用**浏览**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1358-261">You can enter the path directly in the **Destination Location**, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="e1358-262">在浏览的文件夹中查找**浏览文件夹**对话框中，您还可以创建一个新文件夹通过单击**建立新文件夹**。</span><span class="sxs-lookup"><span data-stu-id="e1358-262">When browsing for the folder in the **Browse For Folder** dialog box, you can also create a new folder by clicking **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="e1358-263">如果使用 Azure 文件存储共享，请输入`\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="e1358-263">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span><br /><br /> <span data-ttu-id="e1358-264">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-264">**Type:** String</span></span> <br /><br /><span data-ttu-id="e1358-265">**注意：** URI 发送端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="e1358-265">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="e1358-266">**文件名**</span><span class="sxs-lookup"><span data-stu-id="e1358-266">**File name**</span></span>|<span data-ttu-id="e1358-267">指定的文件发送处理程序写入消息的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="e1358-267">Specify the name of the file where the File send handler writes the message.</span></span><br /><br /> <span data-ttu-id="e1358-268">有关对此属性的限制，包括使用宏中的文件名称，请参阅[限制配置文件适配器时](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="e1358-268">For restrictions on this property, including using macros in the file name, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>|  
    |<span data-ttu-id="e1358-269">**副本模式**</span><span class="sxs-lookup"><span data-stu-id="e1358-269">**Copy mode**</span></span>|<span data-ttu-id="e1358-270">定义向文件中写入一条消息时要使用的复制模式。</span><span class="sxs-lookup"><span data-stu-id="e1358-270">Define the copy mode to use when writing a message to a file.</span></span> <span data-ttu-id="e1358-271">有效值为</span><span class="sxs-lookup"><span data-stu-id="e1358-271">Valid values are:</span></span><br /><br /> <span data-ttu-id="e1358-272">**追加。**</span><span class="sxs-lookup"><span data-stu-id="e1358-272">**Append.**</span></span> <span data-ttu-id="e1358-273">如果它存在并且文件的末尾追加一条消息，该文件发送处理程序打开一个文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-273">The File send handler opens a file if it exists and appends a message to the end of the file.</span></span> <span data-ttu-id="e1358-274">如果文件不存在，则文件发送处理程序将创建一个新文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-274">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="e1358-275">**覆盖**。</span><span class="sxs-lookup"><span data-stu-id="e1358-275">**Overwrite**.</span></span> <span data-ttu-id="e1358-276">如果它存在并且覆盖其内容，该文件发送处理程序打开一个文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-276">The File send handler opens a file if it exists and overwrites its content.</span></span> <span data-ttu-id="e1358-277">如果文件不存在，则文件发送处理程序将创建一个新文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-277">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="e1358-278">**创建新的**。</span><span class="sxs-lookup"><span data-stu-id="e1358-278">**Create new**.</span></span> <span data-ttu-id="e1358-279">如果文件不存在，则文件发送处理程序创建一个新文件，并向其中写入。</span><span class="sxs-lookup"><span data-stu-id="e1358-279">If a file does not exist, the File send handler creates a new file and writes to it.</span></span> <span data-ttu-id="e1358-280">如果该文件已存在，文件发送处理程序报告错误，然后按照发送端口的通用适配器重试逻辑。</span><span class="sxs-lookup"><span data-stu-id="e1358-280">If the file already exists, the File send handler reports an error and then follows common adapter retry logic for send ports.</span></span> <span data-ttu-id="e1358-281">这是文件发送处理程序的默认复制模式。</span><span class="sxs-lookup"><span data-stu-id="e1358-281">This is a default copy mode for the File send handler.</span></span>|  
    |<span data-ttu-id="e1358-282">**允许写入时缓存**</span><span class="sxs-lookup"><span data-stu-id="e1358-282">**Allow Cache on write**</span></span>|<span data-ttu-id="e1358-283">定义是否使用文件系统缓存到文件中写入消息时。</span><span class="sxs-lookup"><span data-stu-id="e1358-283">Define whether to use file system caching when writing a message to a file.</span></span><br /><br /> <span data-ttu-id="e1358-284">有效选项为：</span><span class="sxs-lookup"><span data-stu-id="e1358-284">Valid options are:</span></span><br /><br /> <span data-ttu-id="e1358-285">**False**不使用文件系统缓存。</span><span class="sxs-lookup"><span data-stu-id="e1358-285">**False** Do not use the file system cache.</span></span><br /><br /> <span data-ttu-id="e1358-286">**True**使用文件系统缓存。</span><span class="sxs-lookup"><span data-stu-id="e1358-286">**True** Use the file system cache.</span></span><br /><br /> <span data-ttu-id="e1358-287">**默认值：** False**重要：** 此属性设置为 **，则返回 True**可以增加存在潜在数据丢失的风险文件适配器的性能没有断电，并且不是所有数据都写入到磁盘。</span><span class="sxs-lookup"><span data-stu-id="e1358-287">**Default Value:** False **Important:**  Setting this property to **True** can increase the performance of the File adapter at the risk of potential data loss when there is a loss of power and not all data is written to disk.</span></span>|  
    |<span data-ttu-id="e1358-288">**写入时使用临时文件**</span><span class="sxs-lookup"><span data-stu-id="e1358-288">**Use temporary file while writing**</span></span>|<span data-ttu-id="e1358-289">定义是否将输出文件写入到临时文件，然后写操作完成后重命名该文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-289">Define whether to write the output file to a temporary file first and then rename the file once the write operation has completed.</span></span> <span data-ttu-id="e1358-290">如果启用此选项，则将创建临时文件扩展名**BTS WIP**。</span><span class="sxs-lookup"><span data-stu-id="e1358-290">If this option is enabled then the temporary file will be created with the extension **BTS-WIP**.</span></span><br /><br /> <span data-ttu-id="e1358-291">有效选项为</span><span class="sxs-lookup"><span data-stu-id="e1358-291">Valid options are</span></span><br /><br /> <span data-ttu-id="e1358-292">**True**文件适配器在写入目标文件夹时创建临时文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-292">**True** The File adapter creates a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="e1358-293">**False**文件适配器在写入目标文件夹时不会创建临时文件。</span><span class="sxs-lookup"><span data-stu-id="e1358-293">**False** The File adapter does not create a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="e1358-294">**默认值：** False**注意：** 此选项才可用**CopyMode**属性设置为值为**新建**</span><span class="sxs-lookup"><span data-stu-id="e1358-294">**Default Value:** False **Note:**  This option is only available when the **CopyMode** property is set to a value of **Create new**</span></span>|  

4.  <span data-ttu-id="e1358-295">上**身份验证**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-295">On the **Authentication** tab, do the following:</span></span>  

    |<span data-ttu-id="e1358-296">使用此选项</span><span class="sxs-lookup"><span data-stu-id="e1358-296">Use this</span></span>|<span data-ttu-id="e1358-297">执行的操作</span><span class="sxs-lookup"><span data-stu-id="e1358-297">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="e1358-298">**主机没有访问网络共享位置时使用这些凭据**</span><span class="sxs-lookup"><span data-stu-id="e1358-298">**Use these credentials when host does not have access to network share**</span></span>| <span data-ttu-id="e1358-299">仅当使用网络共享或 Azure 文件共享时，才需要。</span><span class="sxs-lookup"><span data-stu-id="e1358-299">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="e1358-300">**默认值：** False</span><span class="sxs-lookup"><span data-stu-id="e1358-300">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="e1358-301">**类型：** Boolean</span><span class="sxs-lookup"><span data-stu-id="e1358-301">**Type:** Boolean</span></span>|  
    |<span data-ttu-id="e1358-302">**用户名**</span><span class="sxs-lookup"><span data-stu-id="e1358-302">**User name**</span></span>|<span data-ttu-id="e1358-303">如果使用网络共享，请输入有权访问该共享的用户名。</span><span class="sxs-lookup"><span data-stu-id="e1358-303">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="e1358-304">如果使用 Azure 文件存储共享，输入你的存储帐户的名称。</span><span class="sxs-lookup"><span data-stu-id="e1358-304">If using an Azure file storage share, enter the name of your storage account.</span></span><br /><br /> <span data-ttu-id="e1358-305">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-305">**Type:** String</span></span>|  
    |<span data-ttu-id="e1358-306">**密码**</span><span class="sxs-lookup"><span data-stu-id="e1358-306">**Password**</span></span>|<span data-ttu-id="e1358-307">如果使用网络共享，请输入有权访问网络共享的帐户的密码。</span><span class="sxs-lookup"><span data-stu-id="e1358-307">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="e1358-308">如果使用 Azure 文件存储共享，输入存储帐户访问密钥;这是在 Azure 门户中列出。</span><span class="sxs-lookup"><span data-stu-id="e1358-308">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="e1358-309">**类型：** String</span><span class="sxs-lookup"><span data-stu-id="e1358-309">**Type:** String</span></span>|  

5.  <span data-ttu-id="e1358-310">选择**确定**以保存设置。</span><span class="sxs-lookup"><span data-stu-id="e1358-310">Select **OK** to save your settings.</span></span>  

## <a name="set-the-properties-for-a-dynamic-send-port"></a><span data-ttu-id="e1358-311">设置动态发送端口的属性</span><span class="sxs-lookup"><span data-stu-id="e1358-311">Set the properties for a dynamic send port</span></span>

 <span data-ttu-id="e1358-312">动态发送端口不提供任何传输配置选项在 BizTalk Server 管理控制台中因为预期这些属性，将提供与消息关联的上下文属性。</span><span class="sxs-lookup"><span data-stu-id="e1358-312">A dynamic send port does not provide any transport configuration options in BizTalk Server Administration console because it is expected that these properties will be provided with the context properties associated with the message.</span></span> <span data-ttu-id="e1358-313">可以在自定义管道或业务流程中设置这些属性。</span><span class="sxs-lookup"><span data-stu-id="e1358-313">These properties can be set in a custom pipeline or in an orchestration.</span></span> <span data-ttu-id="e1358-314">若要在业务流程中设置消息配置属性，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1358-314">To set message configuration properties in an orchestration, you can do the following:</span></span>  

-   <span data-ttu-id="e1358-315">添加**构造消息**向业务流程的形状。</span><span class="sxs-lookup"><span data-stu-id="e1358-315">Add a **Construct Message** shape to your orchestration.</span></span>  

-   <span data-ttu-id="e1358-316">配置**构造消息**形状以构造新消息。</span><span class="sxs-lookup"><span data-stu-id="e1358-316">Configure the **Construct Message** shape to construct a new message.</span></span> <span data-ttu-id="e1358-317">(例如，Message_2)</span><span class="sxs-lookup"><span data-stu-id="e1358-317">(for example Message_2)</span></span>  

-   <span data-ttu-id="e1358-318">添加**消息赋值**形状变为**构造消息**形状。</span><span class="sxs-lookup"><span data-stu-id="e1358-318">Add a **Message Assignment** shape to the **Construct Message** shape.</span></span>  

-   <span data-ttu-id="e1358-319">将代码添加到**消息赋值**形状初始化您构造的消息以及用于设置消息的相应的配置属性。</span><span class="sxs-lookup"><span data-stu-id="e1358-319">Add code to the **Message Assignment** shape to initialize the message that you constructed and to set the appropriate configuration properties for the message.</span></span> <span data-ttu-id="e1358-320">以下代码将初始化名为 Message_2 的构造的消息**构造消息**形状，然后设置消息的两个配置属性。</span><span class="sxs-lookup"><span data-stu-id="e1358-320">The following code initializes a message named Message_2 that was constructed with a **Construct Message** shape and then sets two configuration properties for the message.</span></span> <span data-ttu-id="e1358-321">在此方案中，Message_1 最初由业务流程接收：</span><span class="sxs-lookup"><span data-stu-id="e1358-321">In this scenario, Message_1 was originally received by the orchestration:</span></span>  

    ```  
    Message_2=Message_1;  
    Message_2(FILE.CopyMode)= 0; //0=Append  
    Message_2(FILE.AllowCacheOnWrite)= true;  
    Message_2(FILE.UseTempFileOnWrite)= true;  
    ```  


## <a name="configure-the-receive-or-send-handler"></a><span data-ttu-id="e1358-322">配置接收端口或发送处理程序</span><span class="sxs-lookup"><span data-stu-id="e1358-322">Configure the receive or send handler</span></span>

1.  <span data-ttu-id="e1358-323">在 BizTalk Server 管理控制台中，展开**BizTalk Server 管理**，展开**BizTalk 组**，展开**平台设置**，然后单击**适配器**。</span><span class="sxs-lookup"><span data-stu-id="e1358-323">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Platform Settings**, and then click **Adapters**.</span></span>  

2.  <span data-ttu-id="e1358-324">在展开的适配器列表中，单击**文件**、 在右窗格中，右键单击接收或发送你想要配置的处理程序。</span><span class="sxs-lookup"><span data-stu-id="e1358-324">In the expanded list of adapters, click **FILE**, in the right pane, right-click the receive or send handler that you want to configure.</span></span> <span data-ttu-id="e1358-325">选择**属性**。</span><span class="sxs-lookup"><span data-stu-id="e1358-325">Select **Properties**.</span></span>  

3.  <span data-ttu-id="e1358-326">在中**主机名**列表中，选择要运行该处理程序的主机。</span><span class="sxs-lookup"><span data-stu-id="e1358-326">In the **Host Name** list, select the host to run the handler.</span></span>  

4.  <span data-ttu-id="e1358-327">单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="e1358-327">Click **OK**.</span></span>  

## <a name="more-topics-in-this-section"></a><span data-ttu-id="e1358-328">在本部分中的更多主题</span><span class="sxs-lookup"><span data-stu-id="e1358-328">More topics in this section</span></span>

[<span data-ttu-id="e1358-329">创建文件接收位置或以编程方式发送端口</span><span class="sxs-lookup"><span data-stu-id="e1358-329">Create the File receive location or send port programmatically</span></span>](../core/create-the-receive-location-and-send-port-programmatically.md)

[<span data-ttu-id="e1358-330">文件适配器属性架构和属性</span><span class="sxs-lookup"><span data-stu-id="e1358-330">File adapter property schema and properties</span></span>](../core/file-adapter-property-schema-and-properties.md)

[<span data-ttu-id="e1358-331">配置文件适配器时的限制</span><span class="sxs-lookup"><span data-stu-id="e1358-331">Restrictions when configuring the File adapter</span></span>](../core/restrictions-when-configuring-the-file-adapter.md)

## <a name="see-also"></a><span data-ttu-id="e1358-332">另请参阅</span><span class="sxs-lookup"><span data-stu-id="e1358-332">See also</span></span>

 <span data-ttu-id="e1358-333">[用于接收和发送服务器端口](../core/ports-for-the-receive-and-send-servers.md) </span><span class="sxs-lookup"><span data-stu-id="e1358-333">[Ports for the Receive and Send Servers](../core/ports-for-the-receive-and-send-servers.md) </span></span>  
 [<span data-ttu-id="e1358-334">最低安全用户权限</span><span class="sxs-lookup"><span data-stu-id="e1358-334">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)