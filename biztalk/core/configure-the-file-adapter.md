---
title: 配置文件适配器 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- File adapters, configuring
- configuring [File adapters], about configuring File adapters
- configuring [File adapters]
ms.assetid: 1e0c7e20-80f8-469b-b423-34a2b90f9ec3
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d2f2de6a4c4cae93db90f0fb2cfc79321bfc7b3e
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/28/2018
---
# <a name="configure-the-file-adapter"></a><span data-ttu-id="465c4-102">配置文件适配器</span><span class="sxs-lookup"><span data-stu-id="465c4-102">Configure the File adapter</span></span>
<span data-ttu-id="465c4-103">如何配置文件适配器，阅读安全建议，并查看所需的权限。</span><span class="sxs-lookup"><span data-stu-id="465c4-103">How to configure the File adapter, read the security recommendations, and view the required permissions.</span></span>

<span data-ttu-id="465c4-104">你可以创建接收位置和发送端口使用 [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], ，或以编程方式。</span><span class="sxs-lookup"><span data-stu-id="465c4-104">You can create a receive location and send port using [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], or programmatically.</span></span> <span data-ttu-id="465c4-105">本主题重点 [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)] 控制台。</span><span class="sxs-lookup"><span data-stu-id="465c4-105">This topic focuses on the [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)] console.</span></span> <span data-ttu-id="465c4-106">有关以编程方式的步骤中，转到[创建接收位置或以编程方式发送端口](../core/create-the-receive-location-and-send-port-programmatically.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-106">For the programmatic steps, go to [Create the receive location or send port programmatically](../core/create-the-receive-location-and-send-port-programmatically.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="465c4-107">**从开始 [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]**, ，你可以连接到 Azure 文件共享使用文件适配器。</span><span class="sxs-lookup"><span data-stu-id="465c4-107">**Starting with [!INCLUDE[bts2016_md](../includes/bts2016-md.md)]**, you can connect to an Azure file share using the File adapter.</span></span> <span data-ttu-id="465c4-108">Azure 存储帐户必须装载在 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="465c4-108">The Azure storage account must be mounted on your BizTalk Server.</span></span> <span data-ttu-id="465c4-109">[要开始使用 Azure 文件存储在 Windows 上](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share) 列出的安装步骤。</span><span class="sxs-lookup"><span data-stu-id="465c4-109">[Get started with Azure File storage on Windows](https://docs.microsoft.com/azure/storage/storage-dotnet-how-to-use-files#mount-the-file-share) lists the mounting steps.</span></span>

## <a name="security-recommendations"></a><span data-ttu-id="465c4-110">安全建议</span><span class="sxs-lookup"><span data-stu-id="465c4-110">Security recommendations</span></span>

<span data-ttu-id="465c4-111">文件适配器用于在 BizTalk Server 与相应的目录之间相互传递文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-111">The File adapter transfers files into and out of BizTalk Server from and to a directory.</span></span> <span data-ttu-id="465c4-112">建议您遵循这些准则以确保您的环境中的文件适配器的安全并对其进行部署。</span><span class="sxs-lookup"><span data-stu-id="465c4-112">It is recommended you follow these guidelines for securing and deploying the File adapter in your environment:</span></span>  
  
-   <span data-ttu-id="465c4-113">不打开端口以便连接到外围网络中的文件共享。</span><span class="sxs-lookup"><span data-stu-id="465c4-113">Do not open ports to connect to a file share in the perimeter network.</span></span> <span data-ttu-id="465c4-114">应当在诸如 Intranet 等信任级别较高的环境中使用文件适配器。</span><span class="sxs-lookup"><span data-stu-id="465c4-114">You should use the File adapter in environments where there is a high level of trust, such as an intranet.</span></span> 
  
-   <span data-ttu-id="465c4-115">设置强的自由访问控制列表 (DACL) 中接收位置的投递目录。</span><span class="sxs-lookup"><span data-stu-id="465c4-115">Set strong discretionary access control lists (DACL) in the receive location's drop directories.</span></span> <span data-ttu-id="465c4-116">例如，您必须设置对文件接收位置从其中提取消息的目录的读取、写入、删除文件和删除子文件夹及文件的权限。</span><span class="sxs-lookup"><span data-stu-id="465c4-116">For example, you must set read, write, delete files, and delete subfolders and files permissions to the directory from which the file receive location picks up messages, so that only authorized users can drop messages in this location.</span></span>  
  
-   <span data-ttu-id="465c4-117">在使用文件适配器提取关键数据时，建议使用 Internet 协议安全性 (IPSec)。</span><span class="sxs-lookup"><span data-stu-id="465c4-117">When you use the File adapter to pick up critical data, it is recommended to use Internet Protocol Security (IPSec.)</span></span>  
  
## <a name="required-permissions"></a><span data-ttu-id="465c4-118">所需的权限</span><span class="sxs-lookup"><span data-stu-id="465c4-118">Required permissions</span></span>

<span data-ttu-id="465c4-119">在所选适配器处理程序的主机实例的安全上下文下运行适配器处理程序。</span><span class="sxs-lookup"><span data-stu-id="465c4-119">Adapter handlers run under the security context of the host instance selected for the adapter handler.</span></span> <span data-ttu-id="465c4-120">主机实例使用 `Logon` 中的属性 ***主机名* -主机实例属性** 在 BizTalk 管理。</span><span class="sxs-lookup"><span data-stu-id="465c4-120">The host instance uses the `Logon` property in the ***Host name* - Host Instance Properties** in BizTalk Administration.</span></span> <span data-ttu-id="465c4-121">这 `Logon` 帐户必须具有到任何文件夹或文件适配器使用的共享的特定权限。</span><span class="sxs-lookup"><span data-stu-id="465c4-121">This `Logon` account must have specific permissions to any folders or shares used by the File adapter.</span></span>

<span data-ttu-id="465c4-122">处理程序使用的主机实例用户帐户需要以下权限。</span><span class="sxs-lookup"><span data-stu-id="465c4-122">The host instance user account used by the handler requires the following permissions.</span></span> <span data-ttu-id="465c4-123">✔ 意味着权限是必需的。</span><span class="sxs-lookup"><span data-stu-id="465c4-123">A ✔ means the permission is required.</span></span> <span data-ttu-id="465c4-124">空白条目表示权限不是必需的。</span><span class="sxs-lookup"><span data-stu-id="465c4-124">A blank entry means the permission is not required.</span></span>

| <span data-ttu-id="465c4-125">Permissions</span><span class="sxs-lookup"><span data-stu-id="465c4-125">Permissions</span></span> | <span data-ttu-id="465c4-126">接收处理程序</span><span class="sxs-lookup"><span data-stu-id="465c4-126">Receive handler</span></span> | <span data-ttu-id="465c4-127">发送处理程序</span><span class="sxs-lookup"><span data-stu-id="465c4-127">Send handler</span></span> |
| --- | --- | --- |
| <span data-ttu-id="465c4-128">完全控制</span><span class="sxs-lookup"><span data-stu-id="465c4-128">Full control</span></span> | <span data-ttu-id="465c4-129">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-129">✔</span></span> <br/> <span data-ttu-id="465c4-130">在共享级别 （如果访问文件共享）</span><span class="sxs-lookup"><span data-stu-id="465c4-130">at the share level (if accessing a file share)</span></span> |  | 
| <span data-ttu-id="465c4-131">遍历文件夹/执行文件</span><span class="sxs-lookup"><span data-stu-id="465c4-131">Traverse folder / execute file</span></span> |  | <span data-ttu-id="465c4-132">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-132">✔</span></span> <br/> <span data-ttu-id="465c4-133">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-133">at the file level</span></span> | 
| <span data-ttu-id="465c4-134">列出文件夹/读取数据</span><span class="sxs-lookup"><span data-stu-id="465c4-134">List folder / read data</span></span> | <span data-ttu-id="465c4-135">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-135">✔</span></span> <br/> <span data-ttu-id="465c4-136">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-136">at the file level</span></span> | <span data-ttu-id="465c4-137">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-137">✔</span></span> <br/> <span data-ttu-id="465c4-138">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-138">at the file level</span></span> | 
| <span data-ttu-id="465c4-139">读取属性</span><span class="sxs-lookup"><span data-stu-id="465c4-139">Read attributes</span></span> | | <span data-ttu-id="465c4-140">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-140">✔</span></span> <br/> <span data-ttu-id="465c4-141">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-141">at the file level</span></span> | 
| <span data-ttu-id="465c4-142">读取扩展属性</span><span class="sxs-lookup"><span data-stu-id="465c4-142">Read extended attributes</span></span> | | <span data-ttu-id="465c4-143">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-143">✔</span></span> <br/> <span data-ttu-id="465c4-144">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-144">at the file level</span></span> | 
| <span data-ttu-id="465c4-145">创建文件/写入数据</span><span class="sxs-lookup"><span data-stu-id="465c4-145">Create files / write data</span></span> | | <span data-ttu-id="465c4-146">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-146">✔</span></span> <br/> <span data-ttu-id="465c4-147">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-147">at the file level</span></span> | 
| <span data-ttu-id="465c4-148">创建文件夹/附加数据</span><span class="sxs-lookup"><span data-stu-id="465c4-148">Create folders / append data</span></span> | | <span data-ttu-id="465c4-149">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-149">✔</span></span> <br/> <span data-ttu-id="465c4-150">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-150">at the file level</span></span> | 
| <span data-ttu-id="465c4-151">删除子文件夹和文件</span><span class="sxs-lookup"><span data-stu-id="465c4-151">Delete subfolders and files</span></span> | <span data-ttu-id="465c4-152">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-152">✔</span></span> <br/> <span data-ttu-id="465c4-153">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-153">at the file level</span></span> | <span data-ttu-id="465c4-154">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-154">✔</span></span> <br/> <span data-ttu-id="465c4-155">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-155">at the file level</span></span> | 
| <span data-ttu-id="465c4-156">读取权限</span><span class="sxs-lookup"><span data-stu-id="465c4-156">Read permissions</span></span> | | <span data-ttu-id="465c4-157">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-157">✔</span></span> <br/> <span data-ttu-id="465c4-158">在文件级别</span><span class="sxs-lookup"><span data-stu-id="465c4-158">at the file level</span></span> | 
| <span data-ttu-id="465c4-159">更改</span><span class="sxs-lookup"><span data-stu-id="465c4-159">Change</span></span> | | <span data-ttu-id="465c4-160">✔</span><span class="sxs-lookup"><span data-stu-id="465c4-160">✔</span></span> <br/> <span data-ttu-id="465c4-161">在共享级别 （如果访问文件共享）</span><span class="sxs-lookup"><span data-stu-id="465c4-161">at the share level (if accessing a file share)</span></span> |

> [!TIP] 
> <span data-ttu-id="465c4-162">在文件级别中，打开 **高级权限** 上的文件或文件夹以查看这些权限。</span><span class="sxs-lookup"><span data-stu-id="465c4-162">At the file level, open the **advanced permissions** on the file or folder to see these permissions.</span></span>

> [!NOTE] 
> <span data-ttu-id="465c4-163">每个主机只能与一个接收处理程序相关联。</span><span class="sxs-lookup"><span data-stu-id="465c4-163">Each host can associate with only one receive handler.</span></span>  

## <a name="configure-the-receive-location"></a><span data-ttu-id="465c4-164">配置接收位置</span><span class="sxs-lookup"><span data-stu-id="465c4-164">Configure the receive location</span></span>
  
> [!NOTE]
>  <span data-ttu-id="465c4-165">之前完成以下过程，你必须已添加单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="465c4-165">Before completing the following procedure, you must have already added a one-way receive port.</span></span> <span data-ttu-id="465c4-166">请参阅 [如何创建接收端口](../core/how-to-create-a-receive-port.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-166">See [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
1.  <span data-ttu-id="465c4-167">在 BizTalk Server 管理控制台中，依次展开“ [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]”、“BizTalk 组” 、“应用程序” ，然后展开要在其下创建接收位置的应用程序。</span><span class="sxs-lookup"><span data-stu-id="465c4-167">In the BizTalk Server Administration console, expand [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)], expand **BizTalk Group**, expand **Applications**, and then expand the application under you want to create a receive location.</span></span>  
  
2.  <span data-ttu-id="465c4-168">在左窗格中，单击 **接收端口** 节点。</span><span class="sxs-lookup"><span data-stu-id="465c4-168">In the left pane, click the **Receive Ports** node.</span></span> <span data-ttu-id="465c4-169">随后，在右窗格中右键单击与现有接收位置关联的接收端口或要与新接收位置关联的接收端口，然后单击“属性” 。</span><span class="sxs-lookup"><span data-stu-id="465c4-169">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="465c4-170">在左窗格中 **接收端口属性** 对话框中，选择 **接收位置**, ，并在右窗格中双击现有接收位置或单击 **新建** 创建一个新接收位置。</span><span class="sxs-lookup"><span data-stu-id="465c4-170">In the left pane of the **Receive Port Properties** dialog box, select **Receive Locations**, and in the right pane double-click an existing receive location or click **New** to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="465c4-171">在 **接收位置属性** 对话框中，在 **传输** 部分中，选择 **文件** 从下拉列表中，键入，然后单击 **配置** 若要配置接收位置的传输属性。</span><span class="sxs-lookup"><span data-stu-id="465c4-171">In the **Receive Location Properties** dialog box, in the **Transport** section, select **FILE** type from the drop-down list, and then click **Configure** to configure the transport properties for the receive location.</span></span>  
  
5.  <span data-ttu-id="465c4-172">在 **常规** 选项卡上，执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-172">In the **General** tab, do the following:</span></span>  
  
    |<span data-ttu-id="465c4-173">使用此选项</span><span class="sxs-lookup"><span data-stu-id="465c4-173">Use this</span></span>|<span data-ttu-id="465c4-174">执行的操作</span><span class="sxs-lookup"><span data-stu-id="465c4-174">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="465c4-175">**接收文件夹**</span><span class="sxs-lookup"><span data-stu-id="465c4-175">**Receive folder**</span></span>|<span data-ttu-id="465c4-176">必需的。</span><span class="sxs-lookup"><span data-stu-id="465c4-176">Required.</span></span> <span data-ttu-id="465c4-177">在文件系统上，网络共享中，输入文件夹的路径或文件在其中接收处理程序的 Azure 文件共享读取文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-177">Enter the path to a folder on the file system, the network share, or the Azure file share where the file receive handler reads files.</span></span> <span data-ttu-id="465c4-178">你可以输入直接在路径 **接收文件夹** 文本框中，或选择从文件系统使用 **浏览** 按钮。</span><span class="sxs-lookup"><span data-stu-id="465c4-178">You can enter the path directly in the **Receive folder** text box, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="465c4-179">在浏览文件夹，你还可以创建新文件夹使用 **新建文件夹**。</span><span class="sxs-lookup"><span data-stu-id="465c4-179">When browsing for the folder, you can also create a new folder using **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="465c4-180">如果使用 Azure 文件存储共享，则输入 `\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="465c4-180">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span> <br /><br /><span data-ttu-id="465c4-181">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-181">**Type:** String</span></span> <br/><br/><span data-ttu-id="465c4-182">**注意︰**  未设置 **接收文件夹** NT 分布式文件系统使用的符号链接的文件夹的属性。</span><span class="sxs-lookup"><span data-stu-id="465c4-182">**Note:**  Do not set the **Receive folder** property to a folder that uses the NT Distributed File System with a symbolic link.</span></span> <span data-ttu-id="465c4-183">如果你使用的 NT 分布式文件系统，你可以仅使用文件夹中文件适配器的直网络路径接收位置。</span><span class="sxs-lookup"><span data-stu-id="465c4-183">If you are using an NT Distributed File System, you can only use folders with straight network paths in File adapter receive locations.</span></span> <br /><br /> <span data-ttu-id="465c4-184">有关此属性的限制，请参阅 [限制在配置文件适配器](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-184">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span> <br/><br/><span data-ttu-id="465c4-185">**注意︰**  对要发送的 URI 端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="465c4-185">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="465c4-186">**文件掩码**</span><span class="sxs-lookup"><span data-stu-id="465c4-186">**File mask**</span></span>|<span data-ttu-id="465c4-187">必需的。</span><span class="sxs-lookup"><span data-stu-id="465c4-187">Required.</span></span> <span data-ttu-id="465c4-188">指定文件的掩码。</span><span class="sxs-lookup"><span data-stu-id="465c4-188">Specify the mask for the files.</span></span> <span data-ttu-id="465c4-189">此掩码均可包含的标准通配符值"\*"。</span><span class="sxs-lookup"><span data-stu-id="465c4-189">This mask can contain the standard wildcard value "\*".</span></span><br /><br /> <span data-ttu-id="465c4-190">**默认值︰** \*.xml</span><span class="sxs-lookup"><span data-stu-id="465c4-190">**Default value:** \*.xml</span></span><br /><br /> <span data-ttu-id="465c4-191">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-191">**Type:** String</span></span><br /><br /> <span data-ttu-id="465c4-192">有关此属性的限制，请参阅 [限制在配置文件适配器](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-192">For restrictions on this property, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>|  
    |<span data-ttu-id="465c4-193">**公共地址**</span><span class="sxs-lookup"><span data-stu-id="465c4-193">**Public address**</span></span>|<span data-ttu-id="465c4-194">指定此位置的公用地址。</span><span class="sxs-lookup"><span data-stu-id="465c4-194">Specify the public address of this location.</span></span> <span data-ttu-id="465c4-195">BizTalk Server 向外部合作伙伴公开此地址。</span><span class="sxs-lookup"><span data-stu-id="465c4-195">BizTalk Server exposes this address to external partners.</span></span><br /><br /> <span data-ttu-id="465c4-196">如果未指定此属性，则运行时引擎会将其替换为：</span><span class="sxs-lookup"><span data-stu-id="465c4-196">If this property is not specified, the runtime engine replaces it as:</span></span><br /><br /> <span data-ttu-id="465c4-197">file://\<*接收文件夹*\>/\<*文件掩码*\></span><span class="sxs-lookup"><span data-stu-id="465c4-197">file://\<*Receive folder*\>/\<*File mask*\></span></span><br /><br /> <span data-ttu-id="465c4-198">此属性的值要求包含一个适配器前缀。</span><span class="sxs-lookup"><span data-stu-id="465c4-198">The value for this property requires an adapter prefix.</span></span><br /><br /> <span data-ttu-id="465c4-199">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-199">**Type:** String</span></span><br /><br /> <span data-ttu-id="465c4-200">**最小长度︰** 0</span><span class="sxs-lookup"><span data-stu-id="465c4-200">**Minimum length:** 0</span></span><br /><br /> <span data-ttu-id="465c4-201">**最大长度︰** 256</span><span class="sxs-lookup"><span data-stu-id="465c4-201">**Maximum length:** 256</span></span>|  
    |<span data-ttu-id="465c4-202">**重试计数**</span><span class="sxs-lookup"><span data-stu-id="465c4-202">**Retry count**</span></span>|<span data-ttu-id="465c4-203">指定尝试访问网络共享上的接收位置（如果该位置暂时不可用）的次数。</span><span class="sxs-lookup"><span data-stu-id="465c4-203">Specify the number of attempts to access the receive location on a network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="465c4-204">**默认值︰** 5</span><span class="sxs-lookup"><span data-stu-id="465c4-204">**Default value:** 5</span></span><br /><br /> <span data-ttu-id="465c4-205">**类型︰** 长</span><span class="sxs-lookup"><span data-stu-id="465c4-205">**Type:** Long</span></span><br /><br /> <span data-ttu-id="465c4-206">**最小值︰** 0</span><span class="sxs-lookup"><span data-stu-id="465c4-206">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="465c4-207">**最大值︰** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="465c4-207">**Maximum value:** MAX_LONG</span></span>|  
    |<span data-ttu-id="465c4-208">**重试间隔 （分钟）**</span><span class="sxs-lookup"><span data-stu-id="465c4-208">**Retry interval (min)**</span></span>|<span data-ttu-id="465c4-209">指定两次尝试访问网络共享上的接收位置（如果该位置暂时不可用）之间的重试间隔时间（分钟）。</span><span class="sxs-lookup"><span data-stu-id="465c4-209">Specify the retry interval time (in minutes) between attempts to access the receive location on the network share if it is temporarily unavailable.</span></span><br /><br /> <span data-ttu-id="465c4-210">**默认值︰** 5 分钟</span><span class="sxs-lookup"><span data-stu-id="465c4-210">**Default value:** 5 minutes</span></span><br /><br /> <span data-ttu-id="465c4-211">**类型︰** 长</span><span class="sxs-lookup"><span data-stu-id="465c4-211">**Type:** Long</span></span><br /><br /> <span data-ttu-id="465c4-212">**最小值︰** 0</span><span class="sxs-lookup"><span data-stu-id="465c4-212">**Minimum value:** 0</span></span><br /><br /> <span data-ttu-id="465c4-213">**最大值︰** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="465c4-213">**Maximum value:** MAX_LONG</span></span>|  
  
6.  <span data-ttu-id="465c4-214">上 **身份验证** 选项卡上，执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-214">On the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="465c4-215">使用此选项</span><span class="sxs-lookup"><span data-stu-id="465c4-215">Use this</span></span>|<span data-ttu-id="465c4-216">执行的操作</span><span class="sxs-lookup"><span data-stu-id="465c4-216">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="465c4-217">**主机没有网络共享的访问权限时使用这些凭据**</span><span class="sxs-lookup"><span data-stu-id="465c4-217">**Use these credentials when host does not have access to network share**</span></span>| <span data-ttu-id="465c4-218">仅在使用网络共享或 Azure 文件共享时，才需要。</span><span class="sxs-lookup"><span data-stu-id="465c4-218">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="465c4-219">**默认值︰** False</span><span class="sxs-lookup"><span data-stu-id="465c4-219">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="465c4-220">**类型︰** 布尔</span><span class="sxs-lookup"><span data-stu-id="465c4-220">**Type:** Boolean</span></span>|  
    |<span data-ttu-id="465c4-221">**用户名称**</span><span class="sxs-lookup"><span data-stu-id="465c4-221">**User name**</span></span>|<span data-ttu-id="465c4-222">如果使用网络共享，请输入有权访问共享的用户名称。</span><span class="sxs-lookup"><span data-stu-id="465c4-222">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="465c4-223">如果使用 Azure 文件存储共享，输入你的存储帐户的名称。</span><span class="sxs-lookup"><span data-stu-id="465c4-223">If using an Azure file storage share, enter the name of your storage account.</span></span><br/><br/><span data-ttu-id="465c4-224">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-224">**Type:** String</span></span> <br /><br /><span data-ttu-id="465c4-225">**注意︰**  如果映射到同一网络共享的多个接收位置配置了备用凭据，则相同的凭据必须用于所有接收位置。</span><span class="sxs-lookup"><span data-stu-id="465c4-225">**Note:**  If multiple receive locations mapped to the same network share are configured with alternative credentials, then the same credentials must be used for all of the receive locations.</span></span> <span data-ttu-id="465c4-226">如果试图使用多组凭据，Windows 将不允许建立从同一计算机到共享网络服务器的多个连接。</span><span class="sxs-lookup"><span data-stu-id="465c4-226">Windows does not allow you to make multiple connections to a shared network server from the same computer if you attempt to use more than one set of credentials.</span></span>|  
    |<span data-ttu-id="465c4-227">**密码**</span><span class="sxs-lookup"><span data-stu-id="465c4-227">**Password**</span></span>|<span data-ttu-id="465c4-228">如果使用的网络共享，请输入有权访问网络共享的帐户的密码。</span><span class="sxs-lookup"><span data-stu-id="465c4-228">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="465c4-229">如果使用 Azure 文件存储共享，输入存储帐户访问密钥;在 Azure 门户中列出。</span><span class="sxs-lookup"><span data-stu-id="465c4-229">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="465c4-230">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-230">**Type:** String</span></span>|  
  
7.  <span data-ttu-id="465c4-231">在 **批处理** 选项卡上，执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-231">In the **Batching** tab, do the following:</span></span>  
  
    |<span data-ttu-id="465c4-232">使用此选项</span><span class="sxs-lookup"><span data-stu-id="465c4-232">Use this</span></span>|<span data-ttu-id="465c4-233">执行的操作</span><span class="sxs-lookup"><span data-stu-id="465c4-233">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="465c4-234">**在批处理中的消息数**</span><span class="sxs-lookup"><span data-stu-id="465c4-234">**Number of messages in a batch**</span></span>|<span data-ttu-id="465c4-235">指定可在一批中提交的最多消息数。</span><span class="sxs-lookup"><span data-stu-id="465c4-235">Specify the maximum number of messages to be submitted in a batch.</span></span><br /><br /> <span data-ttu-id="465c4-236">**默认值︰** 5</span><span class="sxs-lookup"><span data-stu-id="465c4-236">**Default Value:** 5</span></span><br /><br /> <span data-ttu-id="465c4-237">**类型︰** Int</span><span class="sxs-lookup"><span data-stu-id="465c4-237">**Type:** Int</span></span><br /><br /> <span data-ttu-id="465c4-238">**最小值︰** 1</span><span class="sxs-lookup"><span data-stu-id="465c4-238">**Minimum value:** 1</span></span><br /><br /> <span data-ttu-id="465c4-239">**最大值︰** 256</span><span class="sxs-lookup"><span data-stu-id="465c4-239">**Maximum value:** 256</span></span>|  
    |<span data-ttu-id="465c4-240">**最大批处理大小 （以字节为单位）**</span><span class="sxs-lookup"><span data-stu-id="465c4-240">**Maximum batch size (in bytes)**</span></span>|<span data-ttu-id="465c4-241">指定批的最大总字节数。</span><span class="sxs-lookup"><span data-stu-id="465c4-241">Specify the maximum total bytes for a batch.</span></span><br /><br /> <span data-ttu-id="465c4-242">**默认值︰** 102400</span><span class="sxs-lookup"><span data-stu-id="465c4-242">**Default Value:** 102400</span></span><br /><br /> <span data-ttu-id="465c4-243">**类型︰** Int</span><span class="sxs-lookup"><span data-stu-id="465c4-243">**Type:** Int</span></span><br /><br /> <span data-ttu-id="465c4-244">**最小值︰** 1024年</span><span class="sxs-lookup"><span data-stu-id="465c4-244">**Minimum value:** 1024</span></span><br /><br /> <span data-ttu-id="465c4-245">**最大值︰** MAX_LONG</span><span class="sxs-lookup"><span data-stu-id="465c4-245">**Maximum value:** MAX_LONG</span></span>|  
  
     <span data-ttu-id="465c4-246">文件适配器将批限制为最多消息数或最大允许字节数中首先达到的那个值。</span><span class="sxs-lookup"><span data-stu-id="465c4-246">The File adapter will limit the batch to whichever value is reached first, maximum number of messages or maximum allowed bytes.</span></span>  
  
9. <span data-ttu-id="465c4-247">选择“确定” 。</span><span class="sxs-lookup"><span data-stu-id="465c4-247">Select **OK**.</span></span>  
  
10. <span data-ttu-id="465c4-248">输入中的相应值 **接收位置属性** 对话框中，完成接收位置的配置并单击 **确定** 以保存设置。</span><span class="sxs-lookup"><span data-stu-id="465c4-248">Enter the appropriate values in the **Receive Location Properties** dialog box to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="465c4-249">璝惠 **接收位置属性** 对话框中，请参阅 [如何创建接收位置](../core/how-to-create-a-receive-location.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-249">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  

## <a name="configure-the-send-port"></a><span data-ttu-id="465c4-250">配置发送端口</span><span class="sxs-lookup"><span data-stu-id="465c4-250">Configure the send port</span></span>

1.  <span data-ttu-id="465c4-251">在 BizTalk Server 管理控制台中，创建新的发送端口或双击现有的发送端口来对其进行修改。</span><span class="sxs-lookup"><span data-stu-id="465c4-251">In the BizTalk Server Administration console, create a new send port or double-click an existing send port to modify it.</span></span> <span data-ttu-id="465c4-252">请参阅 [如何创建发送端口](../core/how-to-create-a-send-port2.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-252">See [How to Create a Send Port](../core/how-to-create-a-send-port2.md).</span></span> <span data-ttu-id="465c4-253">配置所有发送端口选项并指定 **文件** 为 **类型** 选项 **传输** 部分 **常规** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="465c4-253">Configure all of the send port options and specify **FILE** for the **Type** option in the **Transport** section of the **General** tab.</span></span>  
  
2.  <span data-ttu-id="465c4-254">选择 **配置** 按钮旁边 **类型**。</span><span class="sxs-lookup"><span data-stu-id="465c4-254">Select the **Configure** button next to **Type**.</span></span>  
  
3.  <span data-ttu-id="465c4-255">在 **常规** 选项卡上，执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-255">In the **General** tab, do the following:</span></span>  
  
    |<span data-ttu-id="465c4-256">使用此选项</span><span class="sxs-lookup"><span data-stu-id="465c4-256">Use this</span></span>|<span data-ttu-id="465c4-257">执行的操作</span><span class="sxs-lookup"><span data-stu-id="465c4-257">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="465c4-258">**目标位置**</span><span class="sxs-lookup"><span data-stu-id="465c4-258">**Destination Location**</span></span>|<span data-ttu-id="465c4-259">必需的。</span><span class="sxs-lookup"><span data-stu-id="465c4-259">Required.</span></span> <span data-ttu-id="465c4-260">在文件系统、 公共共享或 Azure 文件共享将输出消息写入到的位置输入的路径。</span><span class="sxs-lookup"><span data-stu-id="465c4-260">Enter the path to the location on the file system, public share, or the Azure file share to write the output messages.</span></span> <span data-ttu-id="465c4-261">你可以输入直接在路径 **目标位置**, ，或选择从文件系统使用 **浏览** 按钮。</span><span class="sxs-lookup"><span data-stu-id="465c4-261">You can enter the path directly in the **Destination Location**, or select it from the file system using the **Browse** button.</span></span> <span data-ttu-id="465c4-262">在为的文件夹中浏览时 **浏览文件夹** 对话框中，你还可以创建一个新文件夹通过单击 **新建文件夹**。</span><span class="sxs-lookup"><span data-stu-id="465c4-262">When browsing for the folder in the **Browse For Folder** dialog box, you can also create a new folder by clicking **Make New Folder**.</span></span><br /><br /> <span data-ttu-id="465c4-263">如果使用 Azure 文件存储共享，则输入 `\\yourfilestoragename.file.core.windows.net\yourfilesharename`。</span><span class="sxs-lookup"><span data-stu-id="465c4-263">If using an Azure file storage share, enter `\\yourfilestoragename.file.core.windows.net\yourfilesharename`.</span></span><br /><br /> <span data-ttu-id="465c4-264">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-264">**Type:** String</span></span> <br /><br /><span data-ttu-id="465c4-265">**注意︰**  对要发送的 URI 端口或接收位置不能超过 256 个字符。</span><span class="sxs-lookup"><span data-stu-id="465c4-265">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span>|  
    |<span data-ttu-id="465c4-266">**文件名**</span><span class="sxs-lookup"><span data-stu-id="465c4-266">**File name**</span></span>|<span data-ttu-id="465c4-267">指定文件发送处理程序将向其中写入消息的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="465c4-267">Specify the name of the file where the File send handler writes the message.</span></span><br /><br /> <span data-ttu-id="465c4-268">有关此属性的限制，包括使用宏中的文件名称，请参阅 [限制在配置文件适配器](../core/restrictions-when-configuring-the-file-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="465c4-268">For restrictions on this property, including using macros in the file name, see [Restrictions when configuring the File adapter](../core/restrictions-when-configuring-the-file-adapter.md).</span></span>|  
    |<span data-ttu-id="465c4-269">**副本模式**</span><span class="sxs-lookup"><span data-stu-id="465c4-269">**Copy mode**</span></span>|<span data-ttu-id="465c4-270">定义要在一条消息写入到文件时使用的复制模式。</span><span class="sxs-lookup"><span data-stu-id="465c4-270">Define the copy mode to use when writing a message to a file.</span></span> <span data-ttu-id="465c4-271">有效值包括：</span><span class="sxs-lookup"><span data-stu-id="465c4-271">Valid values are:</span></span><br /><br /> <span data-ttu-id="465c4-272">**追加。**</span><span class="sxs-lookup"><span data-stu-id="465c4-272">**Append.**</span></span> <span data-ttu-id="465c4-273">文件发送处理程序打开一个文件（如果该文件存在）并在该文件末尾附加一个消息。</span><span class="sxs-lookup"><span data-stu-id="465c4-273">The File send handler opens a file if it exists and appends a message to the end of the file.</span></span> <span data-ttu-id="465c4-274">如果文件不存在，则文件发送处理程序将创建一个新文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-274">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="465c4-275">**覆盖**。</span><span class="sxs-lookup"><span data-stu-id="465c4-275">**Overwrite**.</span></span> <span data-ttu-id="465c4-276">文件发送处理程序打开一个文件（如果该文件存在）并覆盖其内容。</span><span class="sxs-lookup"><span data-stu-id="465c4-276">The File send handler opens a file if it exists and overwrites its content.</span></span> <span data-ttu-id="465c4-277">如果文件不存在，则文件发送处理程序将创建一个新文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-277">If the file does not exist, the File send handler creates a new file.</span></span><br /><br /> <span data-ttu-id="465c4-278">**创建新**。</span><span class="sxs-lookup"><span data-stu-id="465c4-278">**Create new**.</span></span> <span data-ttu-id="465c4-279">如果文件不存在，则文件发送处理程序将创建一个新文件，并在该文件中写入消息。</span><span class="sxs-lookup"><span data-stu-id="465c4-279">If a file does not exist, the File send handler creates a new file and writes to it.</span></span> <span data-ttu-id="465c4-280">如果该文件已存在，则文件发送处理程序将报告错误，然后按照发送端口的通用适配器重试逻辑操作。</span><span class="sxs-lookup"><span data-stu-id="465c4-280">If the file already exists, the File send handler reports an error and then follows common adapter retry logic for send ports.</span></span> <span data-ttu-id="465c4-281">此模式为文件发送处理程序的默认复制模式。</span><span class="sxs-lookup"><span data-stu-id="465c4-281">This is a default copy mode for the File send handler.</span></span>|  
    |<span data-ttu-id="465c4-282">**允许写入缓存**</span><span class="sxs-lookup"><span data-stu-id="465c4-282">**Allow Cache on write**</span></span>|<span data-ttu-id="465c4-283">定义向文件中写入消息时是否使用文件系统缓存。</span><span class="sxs-lookup"><span data-stu-id="465c4-283">Define whether to use file system caching when writing a message to a file.</span></span><br /><br /> <span data-ttu-id="465c4-284">有效选项为：</span><span class="sxs-lookup"><span data-stu-id="465c4-284">Valid options are:</span></span><br /><br /> <span data-ttu-id="465c4-285">**False** 不使用文件系统缓存。</span><span class="sxs-lookup"><span data-stu-id="465c4-285">**False** Do not use the file system cache.</span></span><br /><br /> <span data-ttu-id="465c4-286">**True** 使用文件系统缓存。</span><span class="sxs-lookup"><span data-stu-id="465c4-286">**True** Use the file system cache.</span></span><br /><br /> <span data-ttu-id="465c4-287">**默认值︰** False **重要说明︰**  将此属性设置为 **True** 可以提高潜在的数据丢失的风险文件适配器的性能，当没有在断电且并非所有数据都写入到磁盘。</span><span class="sxs-lookup"><span data-stu-id="465c4-287">**Default Value:** False **Important:**  Setting this property to **True** can increase the performance of the File adapter at the risk of potential data loss when there is a loss of power and not all data is written to disk.</span></span>|  
    |<span data-ttu-id="465c4-288">**在写入时使用临时文件**</span><span class="sxs-lookup"><span data-stu-id="465c4-288">**Use temporary file while writing**</span></span>|<span data-ttu-id="465c4-289">定义是否先将输出文件写入到一个临时文件，然后在写入操作完成后重命名该文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-289">Define whether to write the output file to a temporary file first and then rename the file once the write operation has completed.</span></span> <span data-ttu-id="465c4-290">如果启用此选项，则将创建临时文件，使用扩展 **BTS WIP**。</span><span class="sxs-lookup"><span data-stu-id="465c4-290">If this option is enabled then the temporary file will be created with the extension **BTS-WIP**.</span></span><br /><br /> <span data-ttu-id="465c4-291">有效选项为</span><span class="sxs-lookup"><span data-stu-id="465c4-291">Valid options are</span></span><br /><br /> <span data-ttu-id="465c4-292">**True** 文件适配器创建的临时文件写入到目标文件夹时。</span><span class="sxs-lookup"><span data-stu-id="465c4-292">**True** The File adapter creates a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="465c4-293">**False** 写入到目标文件夹时，文件适配器将不会创建临时文件。</span><span class="sxs-lookup"><span data-stu-id="465c4-293">**False** The File adapter does not create a temporary file when writing to the target folder.</span></span><br /><br /> <span data-ttu-id="465c4-294">**默认值︰** False **注意︰**  时，此选项才可用 **CopyMode** 属性设置为值为 **新建**</span><span class="sxs-lookup"><span data-stu-id="465c4-294">**Default Value:** False **Note:**  This option is only available when the **CopyMode** property is set to a value of **Create new**</span></span>|  
  
4.  <span data-ttu-id="465c4-295">上 **身份验证** 选项卡上，执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-295">On the **Authentication** tab, do the following:</span></span>  
  
    |<span data-ttu-id="465c4-296">使用此选项</span><span class="sxs-lookup"><span data-stu-id="465c4-296">Use this</span></span>|<span data-ttu-id="465c4-297">执行的操作</span><span class="sxs-lookup"><span data-stu-id="465c4-297">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="465c4-298">**主机没有网络共享的访问权限时使用这些凭据**</span><span class="sxs-lookup"><span data-stu-id="465c4-298">**Use these credentials when host does not have access to network share**</span></span>| <span data-ttu-id="465c4-299">仅在使用网络共享或 Azure 文件共享时，才需要。</span><span class="sxs-lookup"><span data-stu-id="465c4-299">Required only when using a network share, or an Azure file share.</span></span> <br /><br /> <span data-ttu-id="465c4-300">**默认值︰** False</span><span class="sxs-lookup"><span data-stu-id="465c4-300">**Default Value:** False</span></span><br /><br /> <span data-ttu-id="465c4-301">**类型︰** 布尔</span><span class="sxs-lookup"><span data-stu-id="465c4-301">**Type:** Boolean</span></span>|  
    |<span data-ttu-id="465c4-302">**用户名称**</span><span class="sxs-lookup"><span data-stu-id="465c4-302">**User name**</span></span>|<span data-ttu-id="465c4-303">如果使用网络共享，请输入有权访问共享的用户名称。</span><span class="sxs-lookup"><span data-stu-id="465c4-303">If using a network share, enter the user name that has access to the share.</span></span> <br /><br />  <span data-ttu-id="465c4-304">如果使用 Azure 文件存储共享，输入你的存储帐户的名称。</span><span class="sxs-lookup"><span data-stu-id="465c4-304">If using an Azure file storage share, enter the name of your storage account.</span></span><br /><br /> <span data-ttu-id="465c4-305">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-305">**Type:** String</span></span>|  
    |<span data-ttu-id="465c4-306">**密码**</span><span class="sxs-lookup"><span data-stu-id="465c4-306">**Password**</span></span>|<span data-ttu-id="465c4-307">如果使用的网络共享，请输入有权访问网络共享的帐户的密码。</span><span class="sxs-lookup"><span data-stu-id="465c4-307">If using a network share, enter the password for the account that has access to the network share.</span></span><br /><br />  <span data-ttu-id="465c4-308">如果使用 Azure 文件存储共享，输入存储帐户访问密钥;在 Azure 门户中列出。</span><span class="sxs-lookup"><span data-stu-id="465c4-308">If using an Azure file storage share, enter the storage account access key; which is listed in the Azure portal.</span></span><br /><br /> <span data-ttu-id="465c4-309">**类型︰** 字符串</span><span class="sxs-lookup"><span data-stu-id="465c4-309">**Type:** String</span></span>|  
  
5.  <span data-ttu-id="465c4-310">选择 **确定** 以保存设置。</span><span class="sxs-lookup"><span data-stu-id="465c4-310">Select **OK** to save your settings.</span></span>  

## <a name="set-the-properties-for-a-dynamic-send-port"></a><span data-ttu-id="465c4-311">设置动态发送端口的属性</span><span class="sxs-lookup"><span data-stu-id="465c4-311">Set the properties for a dynamic send port</span></span>
  
 <span data-ttu-id="465c4-312">动态发送端口在 BizTalk Server 管理控制台中不提供任何传输配置选项，因为这些属性将与消息关联的上下文属性一起提供。</span><span class="sxs-lookup"><span data-stu-id="465c4-312">A dynamic send port does not provide any transport configuration options in BizTalk Server Administration console because it is expected that these properties will be provided with the context properties associated with the message.</span></span> <span data-ttu-id="465c4-313">这些属性可以在自定义管道或在业务流程中设置。</span><span class="sxs-lookup"><span data-stu-id="465c4-313">These properties can be set in a custom pipeline or in an orchestration.</span></span> <span data-ttu-id="465c4-314">若要设置业务流程中的消息配置属性，请执行以下操作︰</span><span class="sxs-lookup"><span data-stu-id="465c4-314">To set message configuration properties in an orchestration, you can do the following:</span></span>  
  
-   <span data-ttu-id="465c4-315">添加 **构造消息** 形状上与您的业务流程。</span><span class="sxs-lookup"><span data-stu-id="465c4-315">Add a **Construct Message** shape to your orchestration.</span></span>  
  
-   <span data-ttu-id="465c4-316">配置 **构造消息** 形状构造新消息。</span><span class="sxs-lookup"><span data-stu-id="465c4-316">Configure the **Construct Message** shape to construct a new message.</span></span> <span data-ttu-id="465c4-317">（例如，Message_2）</span><span class="sxs-lookup"><span data-stu-id="465c4-317">(for example Message_2)</span></span>  
  
-   <span data-ttu-id="465c4-318">添加 **消息分配** 形状变为 **构造消息** 形状。</span><span class="sxs-lookup"><span data-stu-id="465c4-318">Add a **Message Assignment** shape to the **Construct Message** shape.</span></span>  
  
-   <span data-ttu-id="465c4-319">将代码添加到 **消息分配** 形状初始化你构造的消息以及用于设置消息的相应的配置属性。</span><span class="sxs-lookup"><span data-stu-id="465c4-319">Add code to the **Message Assignment** shape to initialize the message that you constructed and to set the appropriate configuration properties for the message.</span></span> <span data-ttu-id="465c4-320">下面的代码初始化名为 Message_2 使用构造一条消息 **构造消息** 形状，然后将设置为消息的两个配置属性。</span><span class="sxs-lookup"><span data-stu-id="465c4-320">The following code initializes a message named Message_2 that was constructed with a **Construct Message** shape and then sets two configuration properties for the message.</span></span> <span data-ttu-id="465c4-321">在此方案中，Message_1 最初由业务流程接收：</span><span class="sxs-lookup"><span data-stu-id="465c4-321">In this scenario, Message_1 was originally received by the orchestration:</span></span>  
  
    ```  
    Message_2=Message_1;  
    Message_2(FILE.CopyMode)= 0; //0=Append  
    Message_2(FILE.AllowCacheOnWrite)= true;  
    Message_2(FILE.UseTempFileOnWrite)= true;  
    ```  
 
  
## <a name="configure-the-receive-or-send-handler"></a><span data-ttu-id="465c4-322">配置接收或发送处理程序</span><span class="sxs-lookup"><span data-stu-id="465c4-322">Configure the receive or send handler</span></span>
  
1.  <span data-ttu-id="465c4-323">在 BizTalk Server 管理控制台中，展开 **BizTalk Server 管理**, ，展开 **BizTalk 组**, ，展开 **平台设置**, ，然后单击 **适配器**。</span><span class="sxs-lookup"><span data-stu-id="465c4-323">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Platform Settings**, and then click **Adapters**.</span></span>  
  
2.  <span data-ttu-id="465c4-324">在展开的列表的适配器，单击 **文件**, 、 在右窗格中，右键单击接收或发送你想要配置的处理程序。</span><span class="sxs-lookup"><span data-stu-id="465c4-324">In the expanded list of adapters, click **FILE**, in the right pane, right-click the receive or send handler that you want to configure.</span></span> <span data-ttu-id="465c4-325">选择 **属性**。</span><span class="sxs-lookup"><span data-stu-id="465c4-325">Select **Properties**.</span></span>  
  
3.  <span data-ttu-id="465c4-326">在 **主机名** 列表中，选择要运行的处理程序的主机。</span><span class="sxs-lookup"><span data-stu-id="465c4-326">In the **Host Name** list, select the host to run the handler.</span></span>  
  
4.  <span data-ttu-id="465c4-327">单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="465c4-327">Click **OK**.</span></span>  

## <a name="more-topics-in-this-section"></a><span data-ttu-id="465c4-328">本部分中的更多主题</span><span class="sxs-lookup"><span data-stu-id="465c4-328">More topics in this section</span></span>

[<span data-ttu-id="465c4-329">创建文件接收位置或以编程方式发送端口</span><span class="sxs-lookup"><span data-stu-id="465c4-329">Create the File receive location or send port programmatically</span></span>](../core/create-the-receive-location-and-send-port-programmatically.md)

[<span data-ttu-id="465c4-330">文件适配器属性架构和属性</span><span class="sxs-lookup"><span data-stu-id="465c4-330">File adapter property schema and properties</span></span>](../core/file-adapter-property-schema-and-properties.md)

[<span data-ttu-id="465c4-331">配置文件适配器时的限制</span><span class="sxs-lookup"><span data-stu-id="465c4-331">Restrictions when configuring the File adapter</span></span>](../core/restrictions-when-configuring-the-file-adapter.md)

## <a name="see-also"></a><span data-ttu-id="465c4-332">另请参阅</span><span class="sxs-lookup"><span data-stu-id="465c4-332">See also</span></span>

 <span data-ttu-id="465c4-333">[用于接收和发送服务器端口](../core/ports-for-the-receive-and-send-servers.md) </span><span class="sxs-lookup"><span data-stu-id="465c4-333">[Ports for the Receive and Send Servers](../core/ports-for-the-receive-and-send-servers.md) </span></span>  
 [<span data-ttu-id="465c4-334">最低安全用户权限</span><span class="sxs-lookup"><span data-stu-id="465c4-334">Minimum Security User Rights</span></span>](../core/minimum-security-user-rights.md)