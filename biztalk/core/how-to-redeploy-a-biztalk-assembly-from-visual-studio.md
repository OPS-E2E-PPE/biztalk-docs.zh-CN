---
title: 如何重新部署 BizTalk 程序集从 Visual Studio |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5c4bb627-48de-4874-bb25-af2c513dbc51
caps.latest.revision: 41
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5500411803bc63d2af0b1196ada2dd6dacc1f7f0
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65384420"
---
# <a name="how-to-redeploy-a-biztalk-assembly-from-visual-studio"></a><span data-ttu-id="15f6c-102">如何重新部署 BizTalk 程序集从 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="15f6c-102">How to Redeploy a BizTalk Assembly from Visual Studio</span></span>
<span data-ttu-id="15f6c-103">在开发程序集，过程中您通常需要部署，测试、 修改和重新部署它重复。</span><span class="sxs-lookup"><span data-stu-id="15f6c-103">In the process of developing an assembly, you often need to deploy, test, modify, and redeploy it repeatedly.</span></span> <span data-ttu-id="15f6c-104">在旧版[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，如果你想要重新部署程序集，而无需更改的版本编号，首先需要手动停止、 取消登记和取消绑定中的程序集所含项目[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]，然后删除中的程序集BizTalk 管理 （配置） 数据库。</span><span class="sxs-lookup"><span data-stu-id="15f6c-104">In previous versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], if you wanted to redeploy an assembly without changing the version number, you first needed to manually stop, unenlist, and unbind artifacts contained in the assembly in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and then remove the assembly from the BizTalk Management (configuration) database.</span></span> <span data-ttu-id="15f6c-105">此外，在重新部署程序集之后, 您需要将绑定、 登记并启动其项目中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="15f6c-105">In addition, after redeploying the assembly, you needed to bind, enlist, and start its artifacts in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="15f6c-106">使用 BizTalk Server，但是，当你启用中的重新部署选项[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]自动执行所有步骤才能重新部署程序集所需执行。</span><span class="sxs-lookup"><span data-stu-id="15f6c-106">With BizTalk Server, however, when you enable the Redeploy option in [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes all of the steps to redeploy the assembly for you.</span></span> <span data-ttu-id="15f6c-107">尽管您可以重新部署项目级别中的程序集 (如通过右键单击解决方案资源管理器中的项目并单击部署) 来重新部署单独的程序集，我们强烈建议你始终重新部署程序集的解决方案级别 （从例如，通过右键单击解决方案并单击部署）。</span><span class="sxs-lookup"><span data-stu-id="15f6c-107">Although you can redeploy an assembly from the project level (such as by right-clicking the project in Solution Explorer and clicking Deploy) to redeploy an individual assembly, we strongly recommend that you always redeploy assemblies from the solution level (such as by right-clicking the solution and clicking Deploy).</span></span> <span data-ttu-id="15f6c-108">这次重新部署所有解决方案中的程序集，并处理所有所涉及的步骤时存在一些依赖关系，如下文所述。</span><span class="sxs-lookup"><span data-stu-id="15f6c-108">This redeploys all of the assemblies in the solution at once and handles all of the steps involved when there are dependencies, as described later.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="15f6c-109">虽然有极少数情况下，您可能需要在项目级重新部署，但通常您应始终重新部署解决方案级别。</span><span class="sxs-lookup"><span data-stu-id="15f6c-109">Although there are rare situations in which you might need to redeploy at the project level, as a rule you should always redeploy at the solution level.</span></span>  
  
 <span data-ttu-id="15f6c-110">当重新部署程序集，请记住以下重要事项：</span><span class="sxs-lookup"><span data-stu-id="15f6c-110">When redeploying an assembly, bear in mind the following important points:</span></span>  
  
- <span data-ttu-id="15f6c-111">**必须在 GAC 中安装新程序集。**</span><span class="sxs-lookup"><span data-stu-id="15f6c-111">**You must install the new assembly in the GAC.**</span></span> <span data-ttu-id="15f6c-112">时重新部署程序集，您必须始终安装新版本的程序集在 GAC 中，如中所述[如何将程序集安装到 GAC 中](../core/how-to-install-an-assembly-in-the-gac.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-112">When you redeploy an assembly, you must always install the new version of the assembly in the GAC, as described in [How to Install an Assembly in the GAC](../core/how-to-install-an-assembly-in-the-gac.md).</span></span> <span data-ttu-id="15f6c-113">重新部署它后，你可以执行此操作。</span><span class="sxs-lookup"><span data-stu-id="15f6c-113">You can do this after you redeploy it.</span></span>  
  
- <span data-ttu-id="15f6c-114">**您应始终重新部署解决方案级别时存在一些依赖关系。**</span><span class="sxs-lookup"><span data-stu-id="15f6c-114">**You should always redeploy at the solution level when there are dependencies.**</span></span> <span data-ttu-id="15f6c-115">如果在解决方案中，有多个程序集并在解决方案中的一个或多个程序集具有你想要重新部署的程序集的依赖项，则应重新部署您在解决方案级别的程序集。</span><span class="sxs-lookup"><span data-stu-id="15f6c-115">If you have multiple assemblies in a solution, and one or more assemblies in the solution has a dependency on the assembly that you want to redeploy, you should redeploy your assemblies at the solution level.</span></span> <span data-ttu-id="15f6c-116">这是因为重新部署项目级别的程序集时[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将停止、 取消登记、 取消绑定，并依赖于此程序集时此程序集所依赖的所有程序集中删除项目。</span><span class="sxs-lookup"><span data-stu-id="15f6c-116">This is because when you redeploy an assembly at the project level, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will stop, unenlist, unbind, and remove the artifacts in all assemblies that either depend on this assembly on upon which this assembly depends.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="15f6c-117">将不会部署、 绑定、 登记和启动这些项目的其他步骤。</span><span class="sxs-lookup"><span data-stu-id="15f6c-117">will not take the additional steps to deploy, bind, enlist, and start the artifacts.</span></span> <span data-ttu-id="15f6c-118">但是，重新部署整个解决方案时[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]会自动将带取消部署和重新部署所有基于及其依赖项的解决方案中的项目所需的步骤。</span><span class="sxs-lookup"><span data-stu-id="15f6c-118">When you redeploy the entire solution, however, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes the steps required to undeploy and redeploy all of the artifacts in the solution based on their dependencies.</span></span>  
  
- <span data-ttu-id="15f6c-119">**您可能需要手动重新部署依存程序集。**</span><span class="sxs-lookup"><span data-stu-id="15f6c-119">**You may need to manually redeploy dependent assemblies.**</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="15f6c-120">通常取消部署依存程序集，但在以下情况下，您必须执行附加步骤以部署、 绑定和登记中每个依赖程序集后重新部署程序集所依赖的程序集的项目：</span><span class="sxs-lookup"><span data-stu-id="15f6c-120">always undeploys dependent assemblies, but in the following cases, you must take the additional steps to deploy, bind, and enlist the artifacts in each dependent assembly after redeploying the assembly on which the assembly depends:</span></span>  
  
  - <span data-ttu-id="15f6c-121">如果重新部署项目级别的程序集，并且在同一解决方案中的另一个程序集依赖于它。</span><span class="sxs-lookup"><span data-stu-id="15f6c-121">If you redeploy an assembly at the project level and another assembly in the same solution depends on it.</span></span>  
  
  - <span data-ttu-id="15f6c-122">如果重新部署程序集级别的解决方案，但依赖程序集存在于另一种解决方案。</span><span class="sxs-lookup"><span data-stu-id="15f6c-122">If you redeploy an assembly at the solution level, but a dependent assembly exists in a different solution.</span></span>  
  
    <span data-ttu-id="15f6c-123">例如，如果您打算重新部署仅在下图中所示的程序集 3，需要部署，请重新绑定，请和登记程序集 2 中的项目部署、 绑定，并登记程序集 1 中的项目。</span><span class="sxs-lookup"><span data-stu-id="15f6c-123">For example, if you were to redeploy only Assembly 3 shown in the following diagram, following redeployment you would need to deploy, bind, and enlist the artifacts in Assembly 2, and then deploy, bind, and enlist the artifacts in Assembly 1.</span></span>  
  
    <span data-ttu-id="15f6c-124">![程序集具有依赖项](../core/media/assemblydependencies.gif "AssemblyDependencies")</span><span class="sxs-lookup"><span data-stu-id="15f6c-124">![Assemblies with dependencies](../core/media/assemblydependencies.gif "AssemblyDependencies")</span></span>  
  
    <span data-ttu-id="15f6c-125">另一种方法是避免不必要的核心程序集未更改的部署。</span><span class="sxs-lookup"><span data-stu-id="15f6c-125">An alternative approach is to avoid unnecessary deployment of core assemblies that have not changed.</span></span>  <span data-ttu-id="15f6c-126">例如在关系图中更高版本，如果有其他程序集依赖于程序集 2 和程序集 3，而这些程序集都已更新。</span><span class="sxs-lookup"><span data-stu-id="15f6c-126">For example in the diagram above, if there are other assemblies that depend on Assembly 2 and Assembly 3 and neither of these assemblies have been updated.</span></span>  <span data-ttu-id="15f6c-127">取消选中**部署**在 configuration manager 中为程序集 2 和程序集 3 项目的选项。</span><span class="sxs-lookup"><span data-stu-id="15f6c-127">Uncheck the **Deploy** option in configuration manager for the Assembly 2 and the Assembly 3 projects.</span></span> <span data-ttu-id="15f6c-128">这种方式，依赖它们的外部程序集不会取消部署需重新部署即可。</span><span class="sxs-lookup"><span data-stu-id="15f6c-128">This way external assemblies that depended on them will not be undeployed requiring redeployment.</span></span> <span data-ttu-id="15f6c-129">有关详细信息，请参阅[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-129">For more information, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span>  
  
- <span data-ttu-id="15f6c-130">**您必须重新启动主机实例。**</span><span class="sxs-lookup"><span data-stu-id="15f6c-130">**You must restart host instances.**</span></span> <span data-ttu-id="15f6c-131">重新部署包含业务流程，而无需更改程序集版本号的程序集时，现有程序集将在 BizTalk 管理数据库中被覆盖。</span><span class="sxs-lookup"><span data-stu-id="15f6c-131">When you redeploy an assembly that contains an orchestration without changing the assembly version number, the existing assembly is overwritten in the BizTalk Management database.</span></span> <span data-ttu-id="15f6c-132">此更改将生效之前，但是，必须重新启动该业务流程绑定到主机的每个主机实例。</span><span class="sxs-lookup"><span data-stu-id="15f6c-132">Before the change will take effect, however, you must restart each host instance of the host to which the orchestration is bound.</span></span> <span data-ttu-id="15f6c-133">可以指定本地计算机上的所有主机实例时自动重新都启动重新部署程序集的选项。</span><span class="sxs-lookup"><span data-stu-id="15f6c-133">You can specify the option that all host instances on the local computer restart automatically when you redeploy an assembly.</span></span> <span data-ttu-id="15f6c-134">有关说明，请参阅[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-134">For instructions, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="15f6c-135">您可以手动停止和启动每个主机实例，如中所述[如何停止主机实例](../core/how-to-stop-a-host-instance.md)并[如何启动主机实例](../core/how-to-start-a-host-instance.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-135">You can also manually stop and start each host instance, as described in [How to Stop a Host Instance](../core/how-to-stop-a-host-instance.md) and [How to Start a Host Instance](../core/how-to-start-a-host-instance.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="15f6c-136">因为重新部署选项绕过版本控制，我们建议使用仅在开发过程。</span><span class="sxs-lookup"><span data-stu-id="15f6c-136">Because the Redeploy option bypasses version control, we recommend that you use it only during development.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="15f6c-137">先决条件</span><span class="sxs-lookup"><span data-stu-id="15f6c-137">Prerequisites</span></span>  
 <span data-ttu-id="15f6c-138">若要执行本主题中的过程，您必须登录的成员帐户[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]Administrators 组。</span><span class="sxs-lookup"><span data-stu-id="15f6c-138">To perform the procedure in this topic, you must be logged on with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="15f6c-139">此外，你的帐户必须具有对本地文件系统和全局程序集缓存 (GAC) 的读/写权限。</span><span class="sxs-lookup"><span data-stu-id="15f6c-139">In addition, your account must have Read/Write permissions on the local file system and the global assembly cache (GAC).</span></span> <span data-ttu-id="15f6c-140">在本地计算机上的管理员帐户拥有这些权限。</span><span class="sxs-lookup"><span data-stu-id="15f6c-140">The Administrators account on the local computer has these permissions.</span></span>  
  
## <a name="to-redeploy-a-biztalk-solution"></a><span data-ttu-id="15f6c-141">若要重新部署 BizTalk 解决方案</span><span class="sxs-lookup"><span data-stu-id="15f6c-141">To redeploy a BizTalk solution</span></span>  
  
#### <a name="using-visual-studio-solution-explorer"></a><span data-ttu-id="15f6c-142">使用 Visual Studio 解决方案资源管理器</span><span class="sxs-lookup"><span data-stu-id="15f6c-142">Using Visual Studio Solution Explorer</span></span>  
  
1. <span data-ttu-id="15f6c-143">确保在解决方案中，每个项目的部署属性中启用重新部署选项中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-143">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="15f6c-144">默认情况下启用此选项。</span><span class="sxs-lookup"><span data-stu-id="15f6c-144">This option is enabled by default.</span></span>  
  
2. <span data-ttu-id="15f6c-145">在中[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]解决方案资源管理器，右键单击 BizTalk 解决方案，然后依次**部署**。</span><span class="sxs-lookup"><span data-stu-id="15f6c-145">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] Solution Explorer, right-click a BizTalk solution, and then click **Deploy**.</span></span>  
  
    <span data-ttu-id="15f6c-146">在解决方案中的程序集将部署到指定的 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="15f6c-146">The assemblies in the solution are deployed into the specified BizTalk application.</span></span> <span data-ttu-id="15f6c-147">生成和部署过程中显示的页面的左下角的状态。</span><span class="sxs-lookup"><span data-stu-id="15f6c-147">The status of the build and deployment process displays in the lower left corner of the page.</span></span>  
  
#### <a name="using-the-visual-studio-command-prompt"></a><span data-ttu-id="15f6c-148">使用 Visual Studio 命令提示</span><span class="sxs-lookup"><span data-stu-id="15f6c-148">Using the Visual Studio command prompt</span></span>  
  
1.  <span data-ttu-id="15f6c-149">确保在解决方案中，每个项目的部署属性中启用重新部署选项中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="15f6c-149">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="15f6c-150">默认情况下启用此选项。</span><span class="sxs-lookup"><span data-stu-id="15f6c-150">This option is enabled by default.</span></span>  
  
2.  <span data-ttu-id="15f6c-151">启动**Visual Studio 命令提示符**。</span><span class="sxs-lookup"><span data-stu-id="15f6c-151">Start **Visual Studio Command Prompt**.</span></span>  
  
3.  <span data-ttu-id="15f6c-152">键入以下命令，替换适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="15f6c-152">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
     <span data-ttu-id="15f6c-153">**devenv /deploy**  *SolnConfigName* *SolutionName*</span><span class="sxs-lookup"><span data-stu-id="15f6c-153">**devenv /deploy**  *SolnConfigName* *SolutionName*</span></span>  
  
     <span data-ttu-id="15f6c-154">例如：</span><span class="sxs-lookup"><span data-stu-id="15f6c-154">Example:</span></span>  
  
     <span data-ttu-id="15f6c-155">**devenv /deploy Release "C:\Documents and Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span><span class="sxs-lookup"><span data-stu-id="15f6c-155">**devenv /deploy Release "C:\Documents and Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span></span>  
  
    |<span data-ttu-id="15f6c-156">参数</span><span class="sxs-lookup"><span data-stu-id="15f6c-156">Parameter</span></span>|<span data-ttu-id="15f6c-157">ReplTest1</span><span class="sxs-lookup"><span data-stu-id="15f6c-157">Value</span></span>|  
    |---------------|-----------|  
    |<span data-ttu-id="15f6c-158">**/deploy**</span><span class="sxs-lookup"><span data-stu-id="15f6c-158">**/deploy**</span></span>|<span data-ttu-id="15f6c-159">生成或重新生成后部署解决方案。</span><span class="sxs-lookup"><span data-stu-id="15f6c-159">Deploys a solution after a build or rebuild.</span></span>|  
    |<span data-ttu-id="15f6c-160">*SolnConfigName*</span><span class="sxs-lookup"><span data-stu-id="15f6c-160">*SolnConfigName*</span></span>|<span data-ttu-id="15f6c-161">将用于生成 SolutionName 中命名的解决方案的解决方案配置的名称。</span><span class="sxs-lookup"><span data-stu-id="15f6c-161">Name of the solution configuration that will be used to build the solution named in SolutionName.</span></span>|  
    |<span data-ttu-id="15f6c-162">*SolutionName*</span><span class="sxs-lookup"><span data-stu-id="15f6c-162">*SolutionName*</span></span>|<span data-ttu-id="15f6c-163">完整路径和解决方案文件的名称。</span><span class="sxs-lookup"><span data-stu-id="15f6c-163">Full path and name of the solution file.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="15f6c-164">请参阅</span><span class="sxs-lookup"><span data-stu-id="15f6c-164">See Also</span></span>  
 [<span data-ttu-id="15f6c-165">将 BizTalk 程序集从 Visual Studio 部署到 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="15f6c-165">Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application</span></span>](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md)