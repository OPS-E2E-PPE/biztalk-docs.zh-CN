---
title: 如何重新部署从 Visual Studio BizTalk 程序集 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5c4bb627-48de-4874-bb25-af2c513dbc51
caps.latest.revision: 41
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1357cb936c0b6f7f830bf1cc77f3d1670cf326aa
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/01/2017
ms.locfileid: "26009494"
---
# <a name="how-to-redeploy-a-biztalk-assembly-from-visual-studio"></a><span data-ttu-id="c3ff9-102">如何从 Visual Studio 重新部署 BizTalk 程序集</span><span class="sxs-lookup"><span data-stu-id="c3ff9-102">How to Redeploy a BizTalk Assembly from Visual Studio</span></span>
<span data-ttu-id="c3ff9-103">在开发程序集的过程中，你通常需要重复地部署、测试、修改以及重新部署该程序集。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-103">In the process of developing an assembly, you often need to deploy, test, modify, and redeploy it repeatedly.</span></span> <span data-ttu-id="c3ff9-104">在以前版本的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中，如果你希望在不更改版本号的情况下重新部署程序集，则首先需要手动停止、取消登记和取消绑定包含在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 程序集中的项目，然后从 BizTalk 管理（配置）数据库中删除该程序集。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-104">In previous versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], if you wanted to redeploy an assembly without changing the version number, you first needed to manually stop, unenlist, and unbind artifacts contained in the assembly in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and then remove the assembly from the BizTalk Management (configuration) database.</span></span> <span data-ttu-id="c3ff9-105">此外，在重新部署程序集后，还需要在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 中绑定、登记和启动程序集的项目。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-105">In addition, after redeploying the assembly, you needed to bind, enlist, and start its artifacts in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="c3ff9-106">使用 BizTalk Server 中，但是，当你启用中的重新部署选项[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]也会自动编制的所有步骤后，重新部署你的程序集。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-106">With BizTalk Server, however, when you enable the Redeploy option in [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes all of the steps to redeploy the assembly for you.</span></span> <span data-ttu-id="c3ff9-107">尽管可以从项目级重新部署某个程序集（如在解决方案资源管理器中右键单击该项目，然后单击“部署”），但我们强烈建议你始终从解决方案级重新部署程序集（如通过右键单击该解决方案，然后单击“部署”）。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-107">Although you can redeploy an assembly from the project level (such as by right-clicking the project in Solution Explorer and clicking Deploy) to redeploy an individual assembly, we strongly recommend that you always redeploy assemblies from the solution level (such as by right-clicking the solution and clicking Deploy).</span></span> <span data-ttu-id="c3ff9-108">后面的方法将立即重新部署解决方案中的所有程序集，并处理具有依赖项时涉及到的所有步骤（在后面介绍）。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-108">This redeploys all of the assemblies in the solution at once and handles all of the steps involved when there are dependencies, as described later.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c3ff9-109">虽然需要在项目级重新部署的情况少之又少，但一般情况下，你应始终在解决方案级重新部署。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-109">Although there are rare situations in which you might need to redeploy at the project level, as a rule you should always redeploy at the solution level.</span></span>  
  
 <span data-ttu-id="c3ff9-110">在重新部署程序集时，请切记以下几点重要事项：</span><span class="sxs-lookup"><span data-stu-id="c3ff9-110">When redeploying an assembly, bear in mind the following important points:</span></span>  
  
-   <span data-ttu-id="c3ff9-111">**你必须在 GAC 中安装新的程序集。**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-111">**You must install the new assembly in the GAC.**</span></span> <span data-ttu-id="c3ff9-112">当你重新部署程序集时，你必须始终安装新版本的程序集在 GAC 中中, 所述[如何将程序集安装在 GAC 中](../core/how-to-install-an-assembly-in-the-gac.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-112">When you redeploy an assembly, you must always install the new version of the assembly in the GAC, as described in [How to Install an Assembly in the GAC](../core/how-to-install-an-assembly-in-the-gac.md).</span></span> <span data-ttu-id="c3ff9-113">重新部署程序集后可实现此目的。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-113">You can do this after you redeploy it.</span></span>  
  
-   <span data-ttu-id="c3ff9-114">**你应始终重新部署解决方案级别时不存在依赖关系。**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-114">**You should always redeploy at the solution level when there are dependencies.**</span></span> <span data-ttu-id="c3ff9-115">如果解决方案中有多个程序集，并且解决方案中的一个或多个程序集对要重新部署的程序集具有依存关系，则应在解决方案级重新部署程序集。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-115">If you have multiple assemblies in a solution, and one or more assemblies in the solution has a dependency on the assembly that you want to redeploy, you should redeploy your assemblies at the solution level.</span></span> <span data-ttu-id="c3ff9-116">这是因为当你重新部署程序集级别的项目[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]将停止，取消登记，解除绑定，并在依赖于此程序集时此程序集所依赖的所有程序集中删除的项。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-116">This is because when you redeploy an assembly at the project level, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will stop, unenlist, unbind, and remove the artifacts in all assemblies that either depend on this assembly on upon which this assembly depends.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="c3ff9-117">将不会附加步骤以部署，将绑定、 登记，并启动项目。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-117"> will not take the additional steps to deploy, bind, enlist, and start the artifacts.</span></span> <span data-ttu-id="c3ff9-118">但是，在重新部署整个解决方案时，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 将根据解决方案中所有项目的依存关系，自动执行所需步骤来取消部署和重新部署这些项目。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-118">When you redeploy the entire solution, however, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] automatically takes the steps required to undeploy and redeploy all of the artifacts in the solution based on their dependencies.</span></span>  
  
-   <span data-ttu-id="c3ff9-119">**你可能需要手动重新部署依赖程序集。**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-119">**You may need to manually redeploy dependent assemblies.**</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="c3ff9-120">始终取消部署依赖程序集，但是，在以下情况下，您必须采取附加步骤以部署，将绑定，并登记中每个依赖程序集后重新部署程序集所依赖的程序集的项目：</span><span class="sxs-lookup"><span data-stu-id="c3ff9-120"> always undeploys dependent assemblies, but in the following cases, you must take the additional steps to deploy, bind, and enlist the artifacts in each dependent assembly after redeploying the assembly on which the assembly depends:</span></span>  
  
    -   <span data-ttu-id="c3ff9-121">在项目级重新部署了某个程序集，同一解决方案中的另一个程序集依赖于此程序集。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-121">If you redeploy an assembly at the project level and another assembly in the same solution depends on it.</span></span>  
  
    -   <span data-ttu-id="c3ff9-122">在解决方案级重新部署了某个程序集，但依存程序集存在于其他解决方案中。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-122">If you redeploy an assembly at the solution level, but a dependent assembly exists in a different solution.</span></span>  
  
     <span data-ttu-id="c3ff9-123">例如，如果仅需要重新部署下图中的程序集 3，则重新部署之后需要部署、绑定和登记程序集 2 中的项目，然后部署、绑定和登记程序集 1 中的项目。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-123">For example, if you were to redeploy only Assembly 3 shown in the following diagram, following redeployment you would need to deploy, bind, and enlist the artifacts in Assembly 2, and then deploy, bind, and enlist the artifacts in Assembly 1.</span></span>  
  
     <span data-ttu-id="c3ff9-124">![具有依赖项的程序集](../core/media/assemblydependencies.gif "AssemblyDependencies")</span><span class="sxs-lookup"><span data-stu-id="c3ff9-124">![Assemblies with dependencies](../core/media/assemblydependencies.gif "AssemblyDependencies")</span></span>  
  
     <span data-ttu-id="c3ff9-125">另一种方法是避免未更改核心程序集的不必要部署。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-125">An alternative approach is to avoid unnecessary deployment of core assemblies that have not changed.</span></span>  <span data-ttu-id="c3ff9-126">以上图为例，如果存在其他依赖程序集 2 和程序集 3 的程序集，且这些程序集都没有进行更新，</span><span class="sxs-lookup"><span data-stu-id="c3ff9-126">For example in the diagram above, if there are other assemblies that depend on Assembly 2 and Assembly 3 and neither of these assemblies have been updated.</span></span>  <span data-ttu-id="c3ff9-127">取消选中**部署**configuration manager 中为程序集 2 和的程序集 3 项目的选项。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-127">Uncheck the **Deploy** option in configuration manager for the Assembly 2 and the Assembly 3 projects.</span></span> <span data-ttu-id="c3ff9-128">这样，依赖它们的外部程序集在需要重新部署时将不会被取消部署。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-128">This way external assemblies that depended on them will not be undeployed requiring redeployment.</span></span> <span data-ttu-id="c3ff9-129">有关详细信息，请参阅[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-129">For more information, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span>  
  
-   <span data-ttu-id="c3ff9-130">**你必须重新启动主机实例。**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-130">**You must restart host instances.**</span></span> <span data-ttu-id="c3ff9-131">在不更改程序集版本号的情况下重新部署包含业务流程的程序集时，BizTalk 管理数据库中的现有程序集将被覆盖。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-131">When you redeploy an assembly that contains an orchestration without changing the assembly version number, the existing assembly is overwritten in the BizTalk Management database.</span></span> <span data-ttu-id="c3ff9-132">不过，在更改生效之前，必须重新启动该业务流程绑定到的主机的所有主机实例。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-132">Before the change will take effect, however, you must restart each host instance of the host to which the orchestration is bound.</span></span> <span data-ttu-id="c3ff9-133">你可以指定在重新部署程序集时自动重新启动本地计算机上的所有主机实例。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-133">You can specify the option that all host instances on the local computer restart automatically when you redeploy an assembly.</span></span> <span data-ttu-id="c3ff9-134">有关说明，请参阅[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-134">For instructions, see [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="c3ff9-135">你可以手动停止和中所述启动每个主机实例，[如何停止主机实例](../core/how-to-stop-a-host-instance.md)和[如何启动主机实例](../core/how-to-start-a-host-instance.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-135">You can also manually stop and start each host instance, as described in [How to Stop a Host Instance](../core/how-to-stop-a-host-instance.md) and [How to Start a Host Instance](../core/how-to-start-a-host-instance.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="c3ff9-136">因为重新部署选项绕过版本控制，我们建议仅在开发期间使用。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-136">Because the Redeploy option bypasses version control, we recommend that you use it only during development.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="c3ff9-137">先决条件</span><span class="sxs-lookup"><span data-stu-id="c3ff9-137">Prerequisites</span></span>  
 <span data-ttu-id="c3ff9-138">若要执行本主题中的步骤，你必须以 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators 组成员的帐户身份登录。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-138">To perform the procedure in this topic, you must be logged on with an account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span> <span data-ttu-id="c3ff9-139">此外，你的帐户还必须对本地文件系统和全局程序集缓存 (GAC) 具有读写权限。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-139">In addition, your account must have Read/Write permissions on the local file system and the global assembly cache (GAC).</span></span> <span data-ttu-id="c3ff9-140">本地计算机的管理员帐户拥有这些权限。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-140">The Administrators account on the local computer has these permissions.</span></span>  
  
## <a name="to-redeploy-a-biztalk-solution"></a><span data-ttu-id="c3ff9-141">重新部署 BizTalk 解决方案</span><span class="sxs-lookup"><span data-stu-id="c3ff9-141">To redeploy a BizTalk solution</span></span>  
  
#### <a name="using-visual-studio-solution-explorer"></a><span data-ttu-id="c3ff9-142">使用 Visual Studio 解决方案资源管理器</span><span class="sxs-lookup"><span data-stu-id="c3ff9-142">Using Visual Studio Solution Explorer</span></span>  
  
1.  <span data-ttu-id="c3ff9-143">确保在解决方案中、 每个项目的部署属性中启用了重新部署选项中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-143">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="c3ff9-144">默认情况下该选项处于启用状态。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-144">This option is enabled by default.</span></span>  
  
2.  <span data-ttu-id="c3ff9-145">在[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]解决方案资源管理器，右键单击 BizTalk 解决方案，并依次**部署**。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-145">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] Solution Explorer, right-click a BizTalk solution, and then click **Deploy**.</span></span>  
  
     <span data-ttu-id="c3ff9-146">解决方案中的程序集将部署到指定的 BizTalk 应用程序中。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-146">The assemblies in the solution are deployed into the specified BizTalk application.</span></span> <span data-ttu-id="c3ff9-147">生成和部署过程的状态显示在该页的左下角中。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-147">The status of the build and deployment process displays in the lower left corner of the page.</span></span>  
  
#### <a name="using-the-visual-studio-command-prompt"></a><span data-ttu-id="c3ff9-148">使用 Visual Studio 命令提示</span><span class="sxs-lookup"><span data-stu-id="c3ff9-148">Using the Visual Studio command prompt</span></span>  
  
1.  <span data-ttu-id="c3ff9-149">确保在解决方案中、 每个项目的部署属性中启用了重新部署选项中所述[如何在 Visual Studio 中设置部署属性](../core/how-to-set-deployment-properties-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-149">Ensure that the Redeploy option is enabled in Deployment properties for each project in the solution, as described in [How to Set Deployment Properties in Visual Studio](../core/how-to-set-deployment-properties-in-visual-studio.md).</span></span> <span data-ttu-id="c3ff9-150">默认情况下该选项处于启用状态。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-150">This option is enabled by default.</span></span>  
  
2.  <span data-ttu-id="c3ff9-151">启动**Visual Studio 命令提示**。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-151">Start **Visual Studio Command Prompt**.</span></span>  
  
3.  <span data-ttu-id="c3ff9-152">键入以下命令，替换为适当的值下, 表中所述：</span><span class="sxs-lookup"><span data-stu-id="c3ff9-152">Type the following command, substituting the appropriate values, as described in the following table:</span></span>  
  
     <span data-ttu-id="c3ff9-153">**devenv / 部署***SolnConfigName* *解决方案名称* </span><span class="sxs-lookup"><span data-stu-id="c3ff9-153">**devenv /deploy**  *SolnConfigName* *SolutionName*</span></span>  
  
     <span data-ttu-id="c3ff9-154">例如：</span><span class="sxs-lookup"><span data-stu-id="c3ff9-154">Example:</span></span>  
  
     <span data-ttu-id="c3ff9-155">**devenv / 部署版本"C:\Documents 和 Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-155">**devenv /deploy Release "C:\Documents and Settings\someuser\My Documents\Visual Studio\Projects\MySolution\MySolution.sln"**</span></span>  
  
    |<span data-ttu-id="c3ff9-156">参数</span><span class="sxs-lookup"><span data-stu-id="c3ff9-156">Parameter</span></span>|<span data-ttu-id="c3ff9-157">值</span><span class="sxs-lookup"><span data-stu-id="c3ff9-157">Value</span></span>|  
    |---------------|-----------|  
    |<span data-ttu-id="c3ff9-158">**/ 部署**</span><span class="sxs-lookup"><span data-stu-id="c3ff9-158">**/deploy**</span></span>|<span data-ttu-id="c3ff9-159">生成或重新生成后部署解决方案。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-159">Deploys a solution after a build or rebuild.</span></span>|  
    |<span data-ttu-id="c3ff9-160">*SolnConfigName*</span><span class="sxs-lookup"><span data-stu-id="c3ff9-160">*SolnConfigName*</span></span>|<span data-ttu-id="c3ff9-161">用于生成 SolutionName 中指定的解决方案的解决方案配置的名称。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-161">Name of the solution configuration that will be used to build the solution named in SolutionName.</span></span>|  
    |<span data-ttu-id="c3ff9-162">*解决方案名称*</span><span class="sxs-lookup"><span data-stu-id="c3ff9-162">*SolutionName*</span></span>|<span data-ttu-id="c3ff9-163">解决方案文件的完整路径和名称。</span><span class="sxs-lookup"><span data-stu-id="c3ff9-163">Full path and name of the solution file.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="c3ff9-164">另请参阅</span><span class="sxs-lookup"><span data-stu-id="c3ff9-164">See Also</span></span>  
 [<span data-ttu-id="c3ff9-165">将 BizTalk 程序集从 Visual Studio 部署到 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="c3ff9-165">Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application</span></span>](../core/deploying-biztalk-assemblies-from-visual-studio-into-a-biztalk-application.md)