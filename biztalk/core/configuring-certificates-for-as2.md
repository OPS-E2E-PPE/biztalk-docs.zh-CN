---
title: 为 AS2 配置证书 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c160f294-7529-4e0a-876c-5827feaed067
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 916f3f633e9311d970121cd3f41a03fbae8b8259
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "37011174"
---
# <a name="configuring-certificates-for-as2"></a><span data-ttu-id="cbc36-102">为 AS2 配置证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-102">Configuring Certificates for AS2</span></span>
<span data-ttu-id="cbc36-103">若要使用加密和数字签名帮助确保 AS2 数据传输的安全，则除了在 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 上相应地进行 AS2 配置之外，还必须安装适当的证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-103">To help secure AS2 data transfer using encryption and digital signatures, you must have the appropriate certificates installed, in addition to the appropriate AS2 configuration on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="cbc36-104">本主题介绍所需证书、证书的配置方式以及有关证书的常见问题。</span><span class="sxs-lookup"><span data-stu-id="cbc36-104">This topic describes the certificates required, how to configure them, and common issues with them.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="cbc36-105">必要條件</span><span class="sxs-lookup"><span data-stu-id="cbc36-105">Prerequisites</span></span>  
 <span data-ttu-id="cbc36-106">你必须以 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理员组成员的身份登录。</span><span class="sxs-lookup"><span data-stu-id="cbc36-106">You must be logged on as a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  

## <a name="certificates-required-for-as2-transport"></a><span data-ttu-id="cbc36-107">AS2 传输所需的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-107">Certificates Required for AS2 Transport</span></span>  
 <span data-ttu-id="cbc36-108">为了帮助确保 AS2 数据传输的安全，您必须将适当的证书添加到相应的证书存储区中，并将这些证书与相应的 BizTalk 项目关联。</span><span class="sxs-lookup"><span data-stu-id="cbc36-108">To help secure AS2 data transfer, you must add the appropriate certificate to the appropriate certificate store, and associate the certificates with the appropriate BizTalk artifacts.</span></span> <span data-ttu-id="cbc36-109">使用以下证书可帮助确保 AS2 消息的安全：</span><span class="sxs-lookup"><span data-stu-id="cbc36-109">The following certificates are used to help secure AS2 messages:</span></span>  


|        <span data-ttu-id="cbc36-110">证书使用情况</span><span class="sxs-lookup"><span data-stu-id="cbc36-110">Certificate Usage</span></span>         |          <span data-ttu-id="cbc36-111">证书类型</span><span class="sxs-lookup"><span data-stu-id="cbc36-111">Certificate Type</span></span>           | <span data-ttu-id="cbc36-112">管道组件</span><span class="sxs-lookup"><span data-stu-id="cbc36-112">Pipeline Component</span></span> |                              <span data-ttu-id="cbc36-113">用户上下文</span><span class="sxs-lookup"><span data-stu-id="cbc36-113">User Context</span></span>                              |                                                                                           <span data-ttu-id="cbc36-114">证书存储区</span><span class="sxs-lookup"><span data-stu-id="cbc36-114">Certificate Store</span></span>                                                                                           |                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="cbc36-115">在此定义</span><span class="sxs-lookup"><span data-stu-id="cbc36-115">Where Defined</span></span>                                                                                                                                                                                                                                                                                                                                                             |
|----------------------------------|-------------------------------------|--------------------|------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       <span data-ttu-id="cbc36-116">签名（出站）</span><span class="sxs-lookup"><span data-stu-id="cbc36-116">Signature (outbound)</span></span>       |       <span data-ttu-id="cbc36-117">自己的私钥 (.pfx)</span><span class="sxs-lookup"><span data-stu-id="cbc36-117">Own private key (.pfx)</span></span>        |    <span data-ttu-id="cbc36-118">AS2 编码器</span><span class="sxs-lookup"><span data-stu-id="cbc36-118">AS2 encoder</span></span>     |  <span data-ttu-id="cbc36-119">与发送处理程序相关联的主机实例使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="cbc36-119">Account used by the host instance associated with the send handler.</span></span>   |    <span data-ttu-id="cbc36-120">每台承载 AS2 编码器管道的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 上针对每个主机实例服务帐户的“当前用户\个人”存储区</span><span class="sxs-lookup"><span data-stu-id="cbc36-120">Current User\Personal store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 encoder pipeline as each host instance service account</span></span>    | <span data-ttu-id="cbc36-121">-   **证书**页的**组属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="cbc36-121">-   **Certificate** page of the **Group Properties** dialog box.</span></span> <span data-ttu-id="cbc36-122">发送已签名的文档时使用的默认签名证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-122">This is the default signing certificate used when sending signed documents.</span></span><br /><span data-ttu-id="cbc36-123">-你可以重写默认证书设置，并改为使用不同的参与方的不同证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-123">-   You can override the default certificate setting and instead use different certificates for different parties.</span></span> <span data-ttu-id="cbc36-124">您可以通过选择做到这样**覆盖组签名证书**中**签名证书**的单向协议选项卡的页面**协议属性**对话框框中，并指定签名证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-124">You can do so by selecting **Override Group Signature Certificate** in the **Signature Certificate** page of the one-way agreement tab of the **Agreement Properties** dialog box, and specify a signing certificate.</span></span> <span data-ttu-id="cbc36-125">如果设置此属性，AS2 消息解析为协议将会使用签名中提供的证书**签名证书**页并不提供的证书为 BizTalk 组属性的一部分。</span><span class="sxs-lookup"><span data-stu-id="cbc36-125">If this property is set, whichever AS2 message resolves to the agreement will be signed using the certificate provided in the **Signature Certificate** page and not by the certificate provided as part of the BizTalk Group properties.</span></span> |
| <span data-ttu-id="cbc36-126">签名验证（入站）</span><span class="sxs-lookup"><span data-stu-id="cbc36-126">Signature verification (inbound)</span></span> | <span data-ttu-id="cbc36-127">贸易合作伙伴的公钥 (.cer)</span><span class="sxs-lookup"><span data-stu-id="cbc36-127">Trading partner's public key (.cer)</span></span> |    <span data-ttu-id="cbc36-128">AS2 解码器</span><span class="sxs-lookup"><span data-stu-id="cbc36-128">AS2 decoder</span></span>     | <span data-ttu-id="cbc36-129">与接收处理程序关联的主机实例使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="cbc36-129">Account used by the host instance associated with the receive handler.</span></span> | <span data-ttu-id="cbc36-130">每台承载 AS2 解码器管道的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 上针对每个主机实例服务帐户的“本地计算机\其他人”存储区</span><span class="sxs-lookup"><span data-stu-id="cbc36-130">Local computer\Other People store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 decoder pipeline as each host instance service account</span></span> |                                                                                                                                                                                                                                                           <span data-ttu-id="cbc36-131">**证书**页的**参与方属性**对话框中**注意：** 用于参与方必须是唯一的证书用于其他验证签名的证书验证签名的证书参与方。</span><span class="sxs-lookup"><span data-stu-id="cbc36-131">**Certificate** page of the **Party Properties** dialog box **Note:**  The certificate used to verify a signature for a party must be unique from the certificates used to verify signatures for other parties.</span></span>                                                                                                                                                                                                                                                            |
|      <span data-ttu-id="cbc36-132">加密（出站）</span><span class="sxs-lookup"><span data-stu-id="cbc36-132">Encryption (outbound)</span></span>       | <span data-ttu-id="cbc36-133">贸易合作伙伴的公钥 (.cer)</span><span class="sxs-lookup"><span data-stu-id="cbc36-133">Trading partner's public key (.cer)</span></span> |    <span data-ttu-id="cbc36-134">AS2 编码器</span><span class="sxs-lookup"><span data-stu-id="cbc36-134">AS2 encoder</span></span>     |  <span data-ttu-id="cbc36-135">与发送处理程序相关联的主机实例使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="cbc36-135">Account used by the host instance associated with the send handler.</span></span>   |                    <span data-ttu-id="cbc36-136">每台承载 AS2 编码器管道的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 上的“本地计算机\其他人”存储区</span><span class="sxs-lookup"><span data-stu-id="cbc36-136">Local computer\Other People store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 encoder pipeline</span></span>                    |                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="cbc36-137">**证书**页的**发送端口属性**对话框</span><span class="sxs-lookup"><span data-stu-id="cbc36-137">**Certificate** page of the **Send Port Properties** dialog box</span></span>                                                                                                                                                                                                                                                                                                                                    |
|       <span data-ttu-id="cbc36-138">解密（入站）</span><span class="sxs-lookup"><span data-stu-id="cbc36-138">Decryption (inbound)</span></span>       |       <span data-ttu-id="cbc36-139">自己的私钥 (.pfx)</span><span class="sxs-lookup"><span data-stu-id="cbc36-139">Own private key (.pfx)</span></span>        |    <span data-ttu-id="cbc36-140">AS2 解码器</span><span class="sxs-lookup"><span data-stu-id="cbc36-140">AS2 decoder</span></span>     | <span data-ttu-id="cbc36-141">与接收处理程序关联的主机实例使用的帐户。</span><span class="sxs-lookup"><span data-stu-id="cbc36-141">Account used by the host instance associated with the receive handler.</span></span> |    <span data-ttu-id="cbc36-142">每台承载 AS2 解码器管道的 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 上针对每个主机实例服务帐户的“当前用户\个人”存储区</span><span class="sxs-lookup"><span data-stu-id="cbc36-142">Current User\Personal store of each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that hosts an AS2 decoder pipeline as each host instance service account</span></span>    |                                                                                                                                                                                                                        <span data-ttu-id="cbc36-143">AS2 解码器将根据消息中的证书信息确定证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-143">The AS2 Decoder will determine the certificate based upon certificate information in the message.</span></span><br /><br /> <span data-ttu-id="cbc36-144">对于 BizTalk MIME 解码器，该证书必须包含在**证书**页用于接收消息的主机。</span><span class="sxs-lookup"><span data-stu-id="cbc36-144">For the BizTalk MIME Decoder, the certificate must be in the **Certificate** page of the host used for receiving the message.</span></span> <span data-ttu-id="cbc36-145">对于 AS2 解码器，则不一定是这样。</span><span class="sxs-lookup"><span data-stu-id="cbc36-145">This is not necessary for the AS2 Decoder.</span></span>                                                                                                                                                                                                                        |

## <a name="certificate-signing-for-outgoing-messages"></a><span data-ttu-id="cbc36-146">为传出消息签名的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-146">Certificate Signing for Outgoing Messages</span></span>  
 <span data-ttu-id="cbc36-147">使用定义为 BizTalk 组属性一部分的默认证书，签名传出 AS2 消息。 </span><span class="sxs-lookup"><span data-stu-id="cbc36-147">Outgoing AS2 messages are signed using a default certificate defined as part of the BizTalk Group properties.</span></span> <span data-ttu-id="cbc36-148">但是，存在这样的情形，接收消息的参与方希望使用自己提供的私人证书签名消息，或签名传出消息时使用不同的证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-148">However, there could be scenarios where the party receiving the messages wants the messages to be signed with a private certificate that they provide or expect a different certificate to be used when signing outgoing messages for them.</span></span> <span data-ttu-id="cbc36-149">如果选择启用此方案的签名传出消息使用其他证书**覆盖组签名证书**中**签名证书**的单向协议选项卡页**协议属性**对话框，然后指定签名证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-149">This scenario of signing outgoing messages using other certificates is enabled if you select the **Override Group Signature Certificate** in the **Signature Certificate** page of the one-way agreement tab of the **Agreement Properties** dialog box, and specify a signing certificate.</span></span> <span data-ttu-id="cbc36-150">如果证书指定为参与方 AS2 协议的一部分，则该证书用于签名传出消息。</span><span class="sxs-lookup"><span data-stu-id="cbc36-150">If a certificate is specified as part of the AS2 agreement for a party, that certificate is used for signing outgoing messages.</span></span> <span data-ttu-id="cbc36-151">如果无为参与方定义的证书，则使用指定为 BizTalk 组属性一部分的默认证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-151">If no certificate is defined for the party, the default certificate specified as part of the BizTalk Group properties is used.</span></span>  

## <a name="adding-certificates-to-the-certificate-stores"></a><span data-ttu-id="cbc36-152">将证书添加到证书存储</span><span class="sxs-lookup"><span data-stu-id="cbc36-152">Adding Certificates to the Certificate Stores</span></span>  
 <span data-ttu-id="cbc36-153">有关详细信息，请参阅的"显示证书管理控制台"部分[安装用于 WCF 适配器的证书](../core/installing-certificates-for-the-wcf-adapters.md)，并将[证书向导实用工具](../core/certificate-wizard-utility.md)主题。</span><span class="sxs-lookup"><span data-stu-id="cbc36-153">For more information, see the "Displaying the Certificates Management Console" section of [Installing Certificates for the WCF Adapters](../core/installing-certificates-for-the-wcf-adapters.md), as well as the [Certificate Wizard Utility](../core/certificate-wizard-utility.md) topic.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="cbc36-154">只有在为登录凭据与主机实例关联的用户加载了用户配置文件时，个人证书存储区才可用于消息处理。</span><span class="sxs-lookup"><span data-stu-id="cbc36-154">The Personal certificate store will be available for message processing only if the user profile is loaded for the user whose logon credentials are associated with the host instance.</span></span> <span data-ttu-id="cbc36-155">个人存储区用于签名证书和解密证书（用户自己的私钥）。</span><span class="sxs-lookup"><span data-stu-id="cbc36-155">The Personal store is used for signing and decryption certificates (the user's own private key).</span></span> <span data-ttu-id="cbc36-156">默认情况下，将为进程内主机实例加载用户配置文件；但默认情况下不会为独立主机实例加载用户配置文件。</span><span class="sxs-lookup"><span data-stu-id="cbc36-156">The user profile is loaded by default for the in-process host instance; however, the user profile is not loaded by default for the isolated host instance.</span></span> <span data-ttu-id="cbc36-157">您可以通过应用程序为独立主机加载用户配置文件。</span><span class="sxs-lookup"><span data-stu-id="cbc36-157">You can have an application load the user profile for the isolated host.</span></span> <span data-ttu-id="cbc36-158">另外，也可以通过对进程内主机实例和独立主机实例使用相同的登录名来解决此问题。</span><span class="sxs-lookup"><span data-stu-id="cbc36-158">Alternatively, you can work around this issue by using the same logon for the in-process host instance and the isolated host instance.</span></span>  

## <a name="generating-certificates"></a><span data-ttu-id="cbc36-159">生成证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-159">Generating Certificates</span></span>  
 <span data-ttu-id="cbc36-160">证书可以从证书颁发机构 (CA) 获得；但是 CA 间请求证书的步骤不同。</span><span class="sxs-lookup"><span data-stu-id="cbc36-160">Certificates can be obtained from a Certificate Authority (CA); however the steps to request a certificate can vary between CAs.</span></span> <span data-ttu-id="cbc36-161">在提交任何证书请求之前，请查阅证书颁发机构的网站上提供的信息。</span><span class="sxs-lookup"><span data-stu-id="cbc36-161">Review the information provided on the Certificate Authority’s Web site before submitting any certificate requests.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="cbc36-162">用于 AS2 传输的证书必须具有实现其用途所需的属性。</span><span class="sxs-lookup"><span data-stu-id="cbc36-162">Certificates used for AS2 transport must have the attributes required for their intended use.</span></span> <span data-ttu-id="cbc36-163">对于签名和签名验证，**密钥用法**属性的证书必须**数字签名**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-163">For signing and signature verification, the **Key Usage** attribute of the certificate must be **Digital Signature**.</span></span> <span data-ttu-id="cbc36-164">进行加密和解密**密钥用法**属性的证书必须**数据加密**或**密钥加密**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-164">For encryption and decryption, the **Key Usage** attribute of the certificate must be **Data Encipherment** or **Key Encipherment**.</span></span> <span data-ttu-id="cbc36-165">你可以验证**密钥用法**特性通过双击证书，单击**详细信息**选项卡中**证书**对话框中，并检查**密钥用法**字段。</span><span class="sxs-lookup"><span data-stu-id="cbc36-165">You can verify the **Key Usage** attribute by double-clicking the certificate, clicking the **Details** tab in the **Certificate** dialog box, and checking the **Key Usage** field.</span></span>  

 <span data-ttu-id="cbc36-166">您还可以使用证书服务在 Windows Server 2008 中生成证书，但是您的参与方可能只能接受这些证书用于测试目的，因为其是自签名的，而不是公共 CA 签名。</span><span class="sxs-lookup"><span data-stu-id="cbc36-166">You can also generate certificates in Windows Server 2008 by using Certificate Services, however your partner may only accept these certificates for test purposes as they are self-signed instead of signed by a public CA.</span></span> <span data-ttu-id="cbc36-167">使用证书服务请求证书的详细信息，请下载**Windows Server 2008 Active Directory 证书服务循序渐进指南**从[Windows Server 2008 循序渐进指南](http://go.microsoft.com/fwlink/?LinkId=187916) ([http://go.microsoft.com/fwlink/?LinkId=187916](http://go.microsoft.com/fwlink/?LinkId=187916)).</span><span class="sxs-lookup"><span data-stu-id="cbc36-167">For more information on using Certificate Services to request certificates, download **Windows Server 2008 Active Directory Certificate Services Step-By-Step Guide** from [Windows Server 2008 Step-by-Step Guides](http://go.microsoft.com/fwlink/?LinkId=187916) ([http://go.microsoft.com/fwlink/?LinkId=187916](http://go.microsoft.com/fwlink/?LinkId=187916)).</span></span>  

### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages"></a><span data-ttu-id="cbc36-168">配置用于对传出 AS2 消息进行签名的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-168">To configure a certificate for signing outgoing AS2 messages</span></span>  

1. <span data-ttu-id="cbc36-169">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，右键单击**BizTalk 组**节点，，然后单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-169">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **BizTalk Group** node, and then click **Properties**.</span></span>  

2. <span data-ttu-id="cbc36-170">在控制台树中的**组属性**对话框中，单击**证书**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-170">In the console tree of the **Group Properties** dialog box, click **Certificate**.</span></span>  

3. <span data-ttu-id="cbc36-171">在中**证书**窗格中，单击**浏览**，找到你想要用于签名的证书，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-171">In the **Certificate** pane, click **Browse**, find the certificate you want to use for signing, and then click **OK**.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="cbc36-172">不用输入证书的公用名，可以只输入其指纹。</span><span class="sxs-lookup"><span data-stu-id="cbc36-172">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="cbc36-173">可以通过双击 MMC 中或在文件系统中，单击证书存储中的证书获取的指纹**详细信息**选项卡上，单击**指纹**字段，并复制指纹.</span><span class="sxs-lookup"><span data-stu-id="cbc36-173">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  

4. <span data-ttu-id="cbc36-174">单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="cbc36-174">Click **OK**.</span></span>  

### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages-for-a-specific-party"></a><span data-ttu-id="cbc36-175">配置用于签署特定参与方传出 AS2 消息的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-175">To configure a certificate for signing outgoing AS2 messages for a specific party</span></span>  

1. <span data-ttu-id="cbc36-176">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，单击**方**节点。</span><span class="sxs-lookup"><span data-stu-id="cbc36-176">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, click the **Parties** node.</span></span> <span data-ttu-id="cbc36-177">从**参与方和业务配置文件**窗格中，从**协议**部分中，右键单击为交换特定参与方，消息创建的协议并单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-177">From the **Parties and Business Profiles** pane, from the **Agreements** section, right-click the agreement that is created for exchanging messages with a specific party, and click **Properties**.</span></span>  

2. <span data-ttu-id="cbc36-178">在单向协议选项卡上，单击**签名证书**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-178">On a one-way agreement tab, click **Signature Certificates**.</span></span>  

3. <span data-ttu-id="cbc36-179">选择**覆盖组签名证书**复选框以使用此页中提供的签名传出 AS2 消息和 MDN 的证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-179">Select the **Override group signing certificate** check box to use the certificate provided in this page for signing outgoing AS2 messages and MDN.</span></span>  

4. <span data-ttu-id="cbc36-180">单击**浏览**以显示**选择证书**对话框中，在其中选择要应用到由此参与方传输的消息的签名证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-180">Click **Browse** to display the **Select Certificate** dialog box, where you select the signature certificate to apply to messages transmitted by this party.</span></span>  

5. <span data-ttu-id="cbc36-181">**公用名**文本框显示所选证书的说明。</span><span class="sxs-lookup"><span data-stu-id="cbc36-181">The **Common Name** text box displays a description of the selected certificate.</span></span>  

6. <span data-ttu-id="cbc36-182">**指纹**文本框将显示证书的指纹。</span><span class="sxs-lookup"><span data-stu-id="cbc36-182">The **Thumbprint** text box displays the thumbprint of certificate.</span></span> <span data-ttu-id="cbc36-183">证书指纹的格式 HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH，其中 H 为十六进制数字 （从 0 到 9 的数字） 或为从 A 到 F 的字母。</span><span class="sxs-lookup"><span data-stu-id="cbc36-183">The certificate thumbprint has the format HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH, where H is a hexadecimal digit (a number from 0 through 9 or a letter from A through F).</span></span>  

7. <span data-ttu-id="cbc36-184">单击**删除证书**若要删除所选的证书。</span><span class="sxs-lookup"><span data-stu-id="cbc36-184">Click **Remove Certificate** to remove the selected certificate.</span></span>  

8. <span data-ttu-id="cbc36-185">单击**确定**以验证所做的更改，然后关闭对话框。</span><span class="sxs-lookup"><span data-stu-id="cbc36-185">Click **OK** to validate the changes and then close the dialog box.</span></span>  

### <a name="to-configure-a-certificate-for-verifying-the-digital-signature-of-an-incoming-as2-messages"></a><span data-ttu-id="cbc36-186">配置用于验证传入 AS2 消息的数字签名的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-186">To configure a certificate for verifying the digital signature of an incoming AS2 messages</span></span>  

1. <span data-ttu-id="cbc36-187">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，打开**BizTalk 组**节点，，然后单击**方**节点。</span><span class="sxs-lookup"><span data-stu-id="cbc36-187">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, open the **BizTalk Group** node, and then click the **Parties** node.</span></span>  

2. <span data-ttu-id="cbc36-188">在中**参与方和业务配置文件**窗格中，右键单击你将收到的参与方签名消息，然后单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-188">In the **Parties and Business Profiles** pane, right-click the party that you will be receiving signed messages from, and then click **Properties**.</span></span>  

3. <span data-ttu-id="cbc36-189">在控制台树中，单击**证书**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-189">In the console tree, click **Certificate**.</span></span>  

4. <span data-ttu-id="cbc36-190">在中**证书**窗格中，单击**浏览**，找到你想要用于验证数字签名的证书，然后单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-190">In the **Certificate** pane, click **Browse**, find the certificate you want to use for verifying the digital signature, and then click **OK**.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="cbc36-191">不用输入证书的公用名，可以只输入其指纹。</span><span class="sxs-lookup"><span data-stu-id="cbc36-191">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="cbc36-192">可以通过双击 MMC 中或在文件系统中，单击证书存储中的证书获取的指纹**详细信息**选项卡上，单击**指纹**字段，并复制指纹.</span><span class="sxs-lookup"><span data-stu-id="cbc36-192">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  

5. <span data-ttu-id="cbc36-193">单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="cbc36-193">Click **OK**.</span></span>  

### <a name="to-configure-a-certificate-for-encrypting-an-outgoing-as2-messages"></a><span data-ttu-id="cbc36-194">配置用于对传出 AS2 消息进行加密的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-194">To configure a certificate for encrypting an outgoing AS2 messages</span></span>  

1. <span data-ttu-id="cbc36-195">在中[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理控制台中，打开**BizTalk 组**节点，打开**应用程序**节点，并打开的节点**应用程序**，其中包含发送端口，您将在发送加密的消息。</span><span class="sxs-lookup"><span data-stu-id="cbc36-195">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, open the **BizTalk Group** node, open the **Applications** node, and open the node of the **application** that contains the send port that you will be sending the encrypted message on.</span></span>  

2. <span data-ttu-id="cbc36-196">打开**发送端口**节点，右键单击该发送端口，然后依次**属性**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-196">Open the **Send Ports** node, right-click the send port, and then click **Properties**.</span></span>  

3. <span data-ttu-id="cbc36-197">在控制台树中，单击**证书**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-197">In the console tree, click **Certificate**.</span></span>  

4. <span data-ttu-id="cbc36-198">在中**证书**窗格中，单击**浏览**，找到你想要使用进行加密，然后单击该证书**确定**。</span><span class="sxs-lookup"><span data-stu-id="cbc36-198">In the **Certificate** pane, click **Browse**, find the certificate that you want to use for encryption, and then click **OK**.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="cbc36-199">不用输入证书的公用名，可以只输入其指纹。</span><span class="sxs-lookup"><span data-stu-id="cbc36-199">Instead of entering the common name of the certificate, you can enter just the thumbprint.</span></span> <span data-ttu-id="cbc36-200">可以通过双击 MMC 中或在文件系统中，单击证书存储中的证书获取的指纹**详细信息**选项卡上，单击**指纹**字段，并复制指纹.</span><span class="sxs-lookup"><span data-stu-id="cbc36-200">You can get the thumbprint by double-clicking the certificate in the certificate store in MMC or in the file system, clicking the **Details** tab, clicking the **Thumbprint** field, and copying the thumbprint.</span></span>  

5. <span data-ttu-id="cbc36-201">单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="cbc36-201">Click **OK**.</span></span>  

## <a name="see-also"></a><span data-ttu-id="cbc36-202">请参阅</span><span class="sxs-lookup"><span data-stu-id="cbc36-202">See Also</span></span>  
 <span data-ttu-id="cbc36-203">[AS2 安全性](../core/as2-security.md) </span><span class="sxs-lookup"><span data-stu-id="cbc36-203">[AS2 Security](../core/as2-security.md) </span></span>  
 <span data-ttu-id="cbc36-204">[配置签名、 压缩和 AS2 传输中加密](../core/configuring-signing-compression-and-encryption-in-as2-transport.md) </span><span class="sxs-lookup"><span data-stu-id="cbc36-204">[Configuring Signing, Compression, and Encryption in AS2 Transport](../core/configuring-signing-compression-and-encryption-in-as2-transport.md) </span></span>  
 <span data-ttu-id="cbc36-205">[AS2 解决方案体系结构](../core/as2-solution-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="cbc36-205">[AS2 Solution Architecture](../core/as2-solution-architecture.md) </span></span>  
 [<span data-ttu-id="cbc36-206">安装用于 WCF 适配器的证书</span><span class="sxs-lookup"><span data-stu-id="cbc36-206">Installing Certificates for the WCF Adapters</span></span>](../core/installing-certificates-for-the-wcf-adapters.md)