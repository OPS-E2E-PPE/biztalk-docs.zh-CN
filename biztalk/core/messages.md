---
title: 消息 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, headers
- messages, acknowledgements
- messages, persisting
- messages
- examples, message headers
- properties
- message headers
- EMS messages
ms.assetid: 65bb3431-7186-4d4c-b004-932cdf070e73
caps.latest.revision: 11
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e28c7296023cc9dec30dfede9c31f2de78e89dbd
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65394521"
---
# <a name="messages"></a><span data-ttu-id="c575d-102">消息</span><span class="sxs-lookup"><span data-stu-id="c575d-102">Messages</span></span>
<span data-ttu-id="c575d-103">Enterprise Message Service (EMS) 消息，如 JMS 消息，包含三个独立的部分： 标头、 属性和正文。</span><span class="sxs-lookup"><span data-stu-id="c575d-103">An Enterprise Message Service (EMS) message, like a JMS message, contains three separate parts: header, properties, and body.</span></span> <span data-ttu-id="c575d-104">标头是唯一必需的 EMS 消息部分。</span><span class="sxs-lookup"><span data-stu-id="c575d-104">The header is the only required part of an EMS message.</span></span> <span data-ttu-id="c575d-105">本主题介绍适用于 TIBCO Enterprise Message Service 的 Microsoft BizTalk 适配器中处理消息如何。</span><span class="sxs-lookup"><span data-stu-id="c575d-105">This topic describes how messages are treated in Microsoft BizTalk Adapter for TIBCO Enterprise Message Service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c575d-106">若要设置或检索标头字段 （例如，设置消息优先级或相关 ID） 或从业务流程的消息属性，必须添加对的引用**Microsoft.BizTalk.Adapters.TIBCOEMSProperties.dll**中你使用解决方案资源管理器的项目。</span><span class="sxs-lookup"><span data-stu-id="c575d-106">To set or retrieve a header field (for example, set the Message Priority or Correlation ID) or a message property from the orchestration, you must add a reference to the **Microsoft.BizTalk.Adapters.TIBCOEMSProperties.dll** in your project using Solution Explorer.</span></span>  
  
## <a name="message-header"></a><span data-ttu-id="c575d-107">消息标头</span><span class="sxs-lookup"><span data-stu-id="c575d-107">Message Header</span></span>  
 <span data-ttu-id="c575d-108">消息标头包含一系列包含值的预定义字段。</span><span class="sxs-lookup"><span data-stu-id="c575d-108">The message header contains a series of predefined fields that contain values.</span></span> <span data-ttu-id="c575d-109">用于 TIBCO Enterprise Message Service 的 BizTalk 适配器知道它可以和不能设置标头中。</span><span class="sxs-lookup"><span data-stu-id="c575d-109">BizTalk Adapter for TIBCO Enterprise Message Service knows what it can and cannot set in the header.</span></span> <span data-ttu-id="c575d-110">如果您尝试设置只读的值，适配器将重定向，或在属性中设置此值{}部分。</span><span class="sxs-lookup"><span data-stu-id="c575d-110">If you try to set a read-only value, the adapter redirects or sets your value in the Properties{} section.</span></span>  
  
### <a name="header-example"></a><span data-ttu-id="c575d-111">标头示例</span><span class="sxs-lookup"><span data-stu-id="c575d-111">Header Example</span></span>  
 <span data-ttu-id="c575d-112">在以下示例中，注意**属性 = {目标 = {字符串： 队列 [第 2 季度]}}**。</span><span class="sxs-lookup"><span data-stu-id="c575d-112">In the following example, notice that **Properties= { Destination={String:Queue[Q2]} }**.</span></span> <span data-ttu-id="c575d-113">`Properties` 是包含一个字符串，一个属性，该字符串的内容是**第 2 季度**。</span><span class="sxs-lookup"><span data-stu-id="c575d-113">`Properties` is a property that contains a string, and the contents of the string is **Q2**.</span></span> <span data-ttu-id="c575d-114">这有无与 Destination 部分; 操作它包含的字符串值的设置，可能需要任何其他位置，因此适配器将其保留在本部分中。</span><span class="sxs-lookup"><span data-stu-id="c575d-114">This has nothing to do with the Destination section; it contains strings of values that you set that could not go anywhere else, so the adapter has held them here in this section.</span></span>  
  
 <span data-ttu-id="c575d-115">`ReplyTo`属性可以设置在业务流程中，以告诉最终使用者发送响应的位置。</span><span class="sxs-lookup"><span data-stu-id="c575d-115">The `ReplyTo` property can be set in the orchestration to tell an eventual consumer where to send a response.</span></span> <span data-ttu-id="c575d-116">EMS 设置`Destination`属性从 TIBCOEMS 接收消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-116">EMS sets the `Destination` property when the message is received from TIBCOEMS.</span></span> <span data-ttu-id="c575d-117">此第二个属性是在业务流程中接收来自 TIBCOEMS 的消息以只读的不能在业务流程中进行编辑。</span><span class="sxs-lookup"><span data-stu-id="c575d-117">This second property is read-only in the orchestration receiving the message from TIBCOEMS and cannot be edited in the orchestration.</span></span>  
  
 <span data-ttu-id="c575d-118">例如，业务流程不能将消息调度并将业务流程中动态目标设置。</span><span class="sxs-lookup"><span data-stu-id="c575d-118">For example, an orchestration cannot dispatch messages and set the destination dynamically inside an orchestration.</span></span> <span data-ttu-id="c575d-119">由消息传输到的端口设置的目标值。</span><span class="sxs-lookup"><span data-stu-id="c575d-119">The value of Destination is set by the port to which the message is being transmitted.</span></span>  
  
 <span data-ttu-id="c575d-120">如果你想要将消息调度到不同的队列，则必须创建每个队列的发送端口。</span><span class="sxs-lookup"><span data-stu-id="c575d-120">If you want to dispatch messages to different queues, you must create send ports for each queue.</span></span> <span data-ttu-id="c575d-121">然后，业务流程可以决定要将消息分配的端口。</span><span class="sxs-lookup"><span data-stu-id="c575d-121">The orchestration can then decide which port to assign the message.</span></span>  
  
 <span data-ttu-id="c575d-122">在以下消息示例中，目标 =`{Queue[Q1]}`是只读的。</span><span class="sxs-lookup"><span data-stu-id="c575d-122">In the following message example, the Destination= `{Queue[Q1]}` is read-only.</span></span> <span data-ttu-id="c575d-123">服务器接收消息时由 TIBCOEMS 设置此值。</span><span class="sxs-lookup"><span data-stu-id="c575d-123">This value is set by TIBCOEMS when the server receives the message.</span></span> <span data-ttu-id="c575d-124">值为目标，第 1 季度，来自传输属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-124">The value for Destination, Q1, comes from the Transport Properties.</span></span>  
  
#### <a name="example"></a><span data-ttu-id="c575d-125">示例</span><span class="sxs-lookup"><span data-stu-id="c575d-125">Example</span></span>  
  
```  
TextMessage={   
    Header={ MessageID={ID:EMS-SERVER.824437A58B11C75F4:1}   
    Destination={Queue[Q1]}   
  
        ' This is READONLY. It gets set by the server when the  
        ' message is received by the server (EMS). It is set in the  
        ' Transport Properties when you specify that you want to  
        ' listen for messages on Q1.  
    ReplyTo={}   
    DeliveryMode={Persistent}   
    Redelivered={False}   
    CorrelationID={}   
    MsgType={}   
    Timestamp={12/1/2005 11:59:01 PM}   
    Expiration={0}   
    Priority={1} }   
    Properties={ Destination={String:Queue[Q2]} }   
  
        ' This is a property that contains a string, and the   
        ' contents of the string is Q2. This has nothing to do with  
        ' the Destination section above – it is just another   
        ' property that is set.   
        ' This is in the schema. The adapter knows what it can and   
        ' cannot set in an EMS header. The values that the adapter   
        ' cannot set are put in the Properties section.   
    text={<?xml version="1.0" encoding="utf-16"?>  
    <ns0:Employees xmlns:ns0="http://BizTalk_Server_Project1.Employee">  
        <Emp Id="Id_0">  
            Name>Name_0</Name>  
        </Emp>  
    </ns0:Employees>  
    }  
```  
  
 <span data-ttu-id="c575d-126">标头包含一系列包含值，则适配器将提升为 BizTalk Server 消息上下文，以便在业务流程中使用的预定义字段。</span><span class="sxs-lookup"><span data-stu-id="c575d-126">The header contains a series of predefined fields that contain values, which the adapter promotes to the BizTalk Server message context for use in the orchestration.</span></span> <span data-ttu-id="c575d-127">升级的属性是在定义上与 JMS 规范和 TIBCO Enterprise Message Service 扩展定义的标准标头属性相同的。</span><span class="sxs-lookup"><span data-stu-id="c575d-127">The promoted properties are identical in definition to the standard header properties as defined by the JMS specification and the TIBCO Enterprise Message Service extensions.</span></span> <span data-ttu-id="c575d-128">除了两个的所有属性都是从 EMS 接收到业务流程可：`Destination`和`ReplyTo`描述不能正确映射以便在单个属性作为业务流程中使用的目标。</span><span class="sxs-lookup"><span data-stu-id="c575d-128">All properties except for two are available to the orchestration as received from EMS: `Destination` and `ReplyTo` describe a destination that cannot be correctly mapped for use in an orchestration as a single property.</span></span>  
  
 <span data-ttu-id="c575d-129">用于 TIBCO EMS 的 BizTalk 适配器将 TIBCOEMS 属性映射为字符串类型，并使用目标字符串表示形式。</span><span class="sxs-lookup"><span data-stu-id="c575d-129">BizTalk Adapter for TIBCO EMS maps the TIBCOEMS property to a string type and uses the Destination string representation.</span></span> <span data-ttu-id="c575d-130">这看起来像`StaticQueue[queuename]`或`StatisTopic[topicname]`。</span><span class="sxs-lookup"><span data-stu-id="c575d-130">This looks like `StaticQueue[queuename]` or `StatisTopic[topicname]`.</span></span> <span data-ttu-id="c575d-131">业务流程可以设置的值为`ReplyTo`，并使用有效的目标对象的标头中的适配器替换它。</span><span class="sxs-lookup"><span data-stu-id="c575d-131">The orchestration can set the value for `ReplyTo`, and the adapter replaces it with a valid destination object in the header.</span></span>  
  
 <span data-ttu-id="c575d-132">适配器提供了描述可由业务流程的所有 TIBCO EMS 标头属性的架构和引用程序集。</span><span class="sxs-lookup"><span data-stu-id="c575d-132">The adapter provides a schema and reference assembly describing all TIBCO EMS header properties that can be used by orchestrations.</span></span> <span data-ttu-id="c575d-133">若要筛选传入消息，或将添加到传出消息，可以使用这些属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-133">These properties can be used to either filter incoming messages or to add to the outgoing message.</span></span> <span data-ttu-id="c575d-134">管理业务流程筛选器的规则不同于 EMS 服务器的消息选择器。</span><span class="sxs-lookup"><span data-stu-id="c575d-134">The rules governing the orchestration filter differs from those for the message selector for the EMS server.</span></span> <span data-ttu-id="c575d-135">例如，业务流程可以根据筛选`TibcoEMS.ReplyTo`或`TibcoEMS.Destination`属性，但在 JMS 规范来对此相同属性的消息选择器中不支持。</span><span class="sxs-lookup"><span data-stu-id="c575d-135">For example, orchestrations can filter on the `TibcoEMS.ReplyTo` or the `TibcoEMS.Destination` property, but there is no support in the JMS specification to allow message selector on this same property.</span></span>  
  
 <span data-ttu-id="c575d-136">当业务流程定义了这些属性时，它们包含在 JMS 消息的标头属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-136">When these properties are defined by the orchestration, they are included in the header properties of the JMS message.</span></span> <span data-ttu-id="c575d-137">或者，当收到 EMS 消息时，这些标头属性复制到 BizTalk Server 消息上下文。</span><span class="sxs-lookup"><span data-stu-id="c575d-137">Alternatively, when the EMS message is received, these header properties are copied to the BizTalk Server message context.</span></span>  
  
 <span data-ttu-id="c575d-138">当一个属性匹配的端口配置时，对消息属性的值优先上端口的配置。</span><span class="sxs-lookup"><span data-stu-id="c575d-138">When a property matches the port configuration, the value of the property on the message takes precedence on the port’s configuration.</span></span> <span data-ttu-id="c575d-139">例如，如果在端口中的优先级设置为 4，但消息的优先级设置为 9 的业务流程逻辑中，接收消息的 TIBCO EMS 为具有优先级为 9。</span><span class="sxs-lookup"><span data-stu-id="c575d-139">For example, if the priority is set to 4 in the port, but you set the priority of the message to 9 in the logic of the orchestration, the message is received by TIBCO EMS as having a priority of 9.</span></span>  
  
### <a name="property-descriptions"></a><span data-ttu-id="c575d-140">属性说明</span><span class="sxs-lookup"><span data-stu-id="c575d-140">Property Descriptions</span></span>  
 <span data-ttu-id="c575d-141">下表介绍 TIBCO Enterprise Message Service 的方式的 BizTalk 适配器使用的每个属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-141">The following table describes how each property is used by BizTalk Adapter for TIBCO Enterprise Message Service.</span></span>  
  
|<span data-ttu-id="c575d-142">“属性”</span><span class="sxs-lookup"><span data-stu-id="c575d-142">Name</span></span>|<span data-ttu-id="c575d-143">类型</span><span class="sxs-lookup"><span data-stu-id="c575d-143">Type</span></span>|<span data-ttu-id="c575d-144">Description</span><span class="sxs-lookup"><span data-stu-id="c575d-144">Description</span></span>|  
|----------|----------|-----------------|  
|<span data-ttu-id="c575d-145">TibcoEMS.MessageID</span><span class="sxs-lookup"><span data-stu-id="c575d-145">TibcoEMS.MessageID</span></span>|<span data-ttu-id="c575d-146">string</span><span class="sxs-lookup"><span data-stu-id="c575d-146">string</span></span>|<span data-ttu-id="c575d-147">发送调用向每个消息分配一个唯一 ID 并将其记录在标头中。</span><span class="sxs-lookup"><span data-stu-id="c575d-147">Sending calls assign a unique ID to each message and record it in the header.</span></span><br /><br /> <span data-ttu-id="c575d-148">所有消息 ID 的值都开头的三字符前缀 ID （可用于此目的）。</span><span class="sxs-lookup"><span data-stu-id="c575d-148">All message ID values start with the three-character prefix ID (which is reserved for this purpose).</span></span><br /><br /> <span data-ttu-id="c575d-149">只读。</span><span class="sxs-lookup"><span data-stu-id="c575d-149">Read-only.</span></span> <span data-ttu-id="c575d-150">更改的值不会影响该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-150">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="c575d-151">TibcoEMS.Timestamp</span><span class="sxs-lookup"><span data-stu-id="c575d-151">TibcoEMS.Timestamp</span></span>|<span data-ttu-id="c575d-152">long</span><span class="sxs-lookup"><span data-stu-id="c575d-152">long</span></span>|<span data-ttu-id="c575d-153">标头中发送调用记录 UTC 时间戳。</span><span class="sxs-lookup"><span data-stu-id="c575d-153">Sending calls record a UTC timestamp in the header.</span></span> <span data-ttu-id="c575d-154">这指示服务器接受消息的大致时间。</span><span class="sxs-lookup"><span data-stu-id="c575d-154">This indicates the approximate time that the server accepted the message.</span></span><br /><br /> <span data-ttu-id="c575d-155">自 1970 年 1 月 1 日起的值是以毫秒为单位</span><span class="sxs-lookup"><span data-stu-id="c575d-155">The value is in milliseconds since January 1, 1970</span></span><br /><br /> <span data-ttu-id="c575d-156">只读。</span><span class="sxs-lookup"><span data-stu-id="c575d-156">Read-only.</span></span> <span data-ttu-id="c575d-157">更改的值不会影响该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-157">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="c575d-158">TibcoEMS.Redelivered</span><span class="sxs-lookup"><span data-stu-id="c575d-158">TibcoEMS.Redelivered</span></span>|<span data-ttu-id="c575d-159">boolean</span><span class="sxs-lookup"><span data-stu-id="c575d-159">boolean</span></span>|<span data-ttu-id="c575d-160">服务器设置标头以指示消息是否可能重复先前已送达的消息：</span><span class="sxs-lookup"><span data-stu-id="c575d-160">The server sets the header to indicate whether a message might duplicate a previously delivered message:</span></span><br /><br /> <span data-ttu-id="c575d-161">-false — 服务器具有先前未尝试向使用者传送此消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-161">-   false—The server has not previously tried to deliver this message to the consumer.</span></span><br /><span data-ttu-id="c575d-162">-true-它是可能的但不是保证，服务器以前已尝试将此消息传递给使用者，但使用者未及时返回确认。</span><span class="sxs-lookup"><span data-stu-id="c575d-162">-   true—It is likely, but not guaranteed, that the server has previously tried to deliver this message to the consumer, but the consumer did not return timely acknowledgement.</span></span><br /><br /> <span data-ttu-id="c575d-163">只读。</span><span class="sxs-lookup"><span data-stu-id="c575d-163">Read-only.</span></span> <span data-ttu-id="c575d-164">更改的值不会影响该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-164">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="c575d-165">TibcoEMS.Destination</span><span class="sxs-lookup"><span data-stu-id="c575d-165">TibcoEMS.Destination</span></span>|<span data-ttu-id="c575d-166">string</span><span class="sxs-lookup"><span data-stu-id="c575d-166">string</span></span>|<span data-ttu-id="c575d-167">此标头中发送调用记录消息的目标 （队列或主题）。</span><span class="sxs-lookup"><span data-stu-id="c575d-167">Sending calls record the destination (queue or topic) of the message in this header.</span></span> <span data-ttu-id="c575d-168">格式为改编从目标为字符串。</span><span class="sxs-lookup"><span data-stu-id="c575d-168">The format is adapted from a destination to a string.</span></span> <span data-ttu-id="c575d-169">前面所述的格式。</span><span class="sxs-lookup"><span data-stu-id="c575d-169">The format is previously described.</span></span><br /><br /> <span data-ttu-id="c575d-170">只读。</span><span class="sxs-lookup"><span data-stu-id="c575d-170">Read-only.</span></span> <span data-ttu-id="c575d-171">更改的值不会影响该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-171">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="c575d-172">TibcoEMS.DeliveryMode</span><span class="sxs-lookup"><span data-stu-id="c575d-172">TibcoEMS.DeliveryMode</span></span>|<span data-ttu-id="c575d-173">string</span><span class="sxs-lookup"><span data-stu-id="c575d-173">string</span></span>|<span data-ttu-id="c575d-174">具有两个可能值：持久性和非永久。</span><span class="sxs-lookup"><span data-stu-id="c575d-174">Has two possible values: PERSISTENT and NON-PERSISTENT.</span></span> <span data-ttu-id="c575d-175">默认值为 PERSISTENT 模式。</span><span class="sxs-lookup"><span data-stu-id="c575d-175">Default value is PERSISTENT mode.</span></span><br /><br /> <span data-ttu-id="c575d-176">适配器在等待之前确认将消息发送到 BizTalk Server 确认从 EMS 服务器。</span><span class="sxs-lookup"><span data-stu-id="c575d-176">The adapter waits for an acknowledgement from the EMS server before acknowledging the message sent to BizTalk Server.</span></span> <span data-ttu-id="c575d-177">此标头属性和端口配置项控制 EMS 向适配器发送此确认和控制消息传输的可靠性所需的时间。</span><span class="sxs-lookup"><span data-stu-id="c575d-177">This header property and port configuration item controls the time EMS takes to send this acknowledgement to the adapter and control the reliability of message transmission.</span></span><br /><br /> <span data-ttu-id="c575d-178">使用 PERSISTENT 传送模式 — EMS 服务器等待，直到该消息已成功保存在 EMS 服务器。</span><span class="sxs-lookup"><span data-stu-id="c575d-178">Using PERSISTENT delivery mode—the EMS server waits until the message is successfully persisted in the EMS server.</span></span> <span data-ttu-id="c575d-179">此操作可保证消息已到达队列中。</span><span class="sxs-lookup"><span data-stu-id="c575d-179">This action guarantees that the message has arrived in the queue.</span></span> <span data-ttu-id="c575d-180">使用 PERSISTENT 模式传送时，考虑以下方面：</span><span class="sxs-lookup"><span data-stu-id="c575d-180">When you use PERSISTENT mode delivery, consider the following:</span></span><br /><br /> <span data-ttu-id="c575d-181">较大的消息的时间越长，需要为 BizTalk Server 以便发送确认该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-181">The larger the messages, the longer it takes for BizTalk Server to consider the message as sent.</span></span><br /><br /> <span data-ttu-id="c575d-182">使用 NON-PERSISTENT 模式 — EMS 服务器先返回确认，保存该消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-182">Using NON-PERSISTENT mode—the EMS server returns the acknowledgement before persisting the message.</span></span> <span data-ttu-id="c575d-183">如果 EMS 服务器出现故障时，它被视为成功发送的 BizTalk Server 中可能会丢失的消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-183">If a failure were to occur with the EMS server, the message might be lost when it is considered successfully sent by BizTalk Server.</span></span>|  
|<span data-ttu-id="c575d-184">TibcoEMS.Expiration</span><span class="sxs-lookup"><span data-stu-id="c575d-184">TibcoEMS.Expiration</span></span>|<span data-ttu-id="c575d-185">long</span><span class="sxs-lookup"><span data-stu-id="c575d-185">long</span></span>|<span data-ttu-id="c575d-186">该消息将存放在过期之前的时间长度。</span><span class="sxs-lookup"><span data-stu-id="c575d-186">Length of time that the message will live before expiration.</span></span> <span data-ttu-id="c575d-187">如果设置为 0，消息不会过期。</span><span class="sxs-lookup"><span data-stu-id="c575d-187">If set to 0, message does not expire.</span></span><br /><br /> <span data-ttu-id="c575d-188">生存时间以毫秒为单位指定。</span><span class="sxs-lookup"><span data-stu-id="c575d-188">The time-to-live is specified in milliseconds.</span></span>|  
|<span data-ttu-id="c575d-189">TibcoEMS.Priority</span><span class="sxs-lookup"><span data-stu-id="c575d-189">TibcoEMS.Priority</span></span>|<span data-ttu-id="c575d-190">ssNoversion</span><span class="sxs-lookup"><span data-stu-id="c575d-190">int</span></span>|<span data-ttu-id="c575d-191">使用的某个数字级别为 0 到 9，消息优先级定义为正常或加急。</span><span class="sxs-lookup"><span data-stu-id="c575d-191">Uses a numeric ranking, between 0 and 9, to define message priority as normal or expedited.</span></span> <span data-ttu-id="c575d-192">数字越大，表示优先级越高。</span><span class="sxs-lookup"><span data-stu-id="c575d-192">Larger numbers represent higher priority.</span></span>|  
|<span data-ttu-id="c575d-193">TibcoEMS.CorrolationID</span><span class="sxs-lookup"><span data-stu-id="c575d-193">TibcoEMS.CorrolationID</span></span>|<span data-ttu-id="c575d-194">string</span><span class="sxs-lookup"><span data-stu-id="c575d-194">string</span></span>|<span data-ttu-id="c575d-195">可用于链接消息，例如将响应消息链接到请求消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-195">Can be used to link messages, such as linking a response message to a request message.</span></span><br /><br /> <span data-ttu-id="c575d-196">这通常是相同的值`EMS.JMSMessageID`。</span><span class="sxs-lookup"><span data-stu-id="c575d-196">Usually this is the same value as the `EMS.JMSMessageID`.</span></span> <span data-ttu-id="c575d-197">这通常在一起使用`EMS.JMSReplyTo`属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-197">This is usually used together with the `EMS.JMSReplyTo` property.</span></span>|  
|<span data-ttu-id="c575d-198">TibcoEMS.ReplyTo</span><span class="sxs-lookup"><span data-stu-id="c575d-198">TibcoEMS.ReplyTo</span></span>|<span data-ttu-id="c575d-199">string</span><span class="sxs-lookup"><span data-stu-id="c575d-199">string</span></span>|<span data-ttu-id="c575d-200">消息答复应发送到目标。</span><span class="sxs-lookup"><span data-stu-id="c575d-200">A destination to which a message reply should be sent.</span></span> <span data-ttu-id="c575d-201">格式等同于`EMS.JMSDestination`和也端口的配置。</span><span class="sxs-lookup"><span data-stu-id="c575d-201">Format is identical to the `EMS.JMSDestination` and also the port's configuration.</span></span>|  
|<span data-ttu-id="c575d-202">TibcoEMS.Type</span><span class="sxs-lookup"><span data-stu-id="c575d-202">TibcoEMS.Type</span></span>|<span data-ttu-id="c575d-203">string</span><span class="sxs-lookup"><span data-stu-id="c575d-203">string</span></span>|<span data-ttu-id="c575d-204">不描述消息类型 （文本、 字节、 字符串...）。</span><span class="sxs-lookup"><span data-stu-id="c575d-204">Does not describe the message type (text, byte, string …).</span></span><br /><br /> <span data-ttu-id="c575d-205">某些 JMS 提供程序使用的消息存储库来存储消息类型定义。</span><span class="sxs-lookup"><span data-stu-id="c575d-205">Some JMS providers use a message repository to store message type definitions.</span></span> <span data-ttu-id="c575d-206">客户端程序可以在此字段以引用存储库中的定义中存储一个值。</span><span class="sxs-lookup"><span data-stu-id="c575d-206">Client programs can store a value in this field to reference a definition in the repository.</span></span> <span data-ttu-id="c575d-207">EMS 支持此标头，但不使用它。</span><span class="sxs-lookup"><span data-stu-id="c575d-207">EMS supports this header but does not use it.</span></span><br /><br /> <span data-ttu-id="c575d-208">JMS 规范没有定义标准的消息定义存储库，也没有定义消息类型定义的命名策略。</span><span class="sxs-lookup"><span data-stu-id="c575d-208">The JMS specification does not define a standard message definition repository, nor does it define a naming policy for message type definitions.</span></span><br /><br /> <span data-ttu-id="c575d-209">某些提供程序需要为每个应用程序消息的消息类型定义。</span><span class="sxs-lookup"><span data-stu-id="c575d-209">Some providers require message type definitions for each application message.</span></span> <span data-ttu-id="c575d-210">若要保证与此类提供程序的兼容性，客户端程序可以设置此标头，即使客户端应用程序不使用它。</span><span class="sxs-lookup"><span data-stu-id="c575d-210">To guarantee compatibility with such providers, client programs can set this header, even if the client application does not use it.</span></span><br /><br /> <span data-ttu-id="c575d-211">若要确保可移植性，客户端可以设置符号值 （而不是文本），此标头并将它们配置为匹配提供程序的存储库。</span><span class="sxs-lookup"><span data-stu-id="c575d-211">To guarantee portability, clients can set this header with symbolic values (instead of literals), and configure them to match the provider's repository.</span></span>|  
  
## <a name="properties"></a><span data-ttu-id="c575d-212">属性</span><span class="sxs-lookup"><span data-stu-id="c575d-212">Properties</span></span>  
 <span data-ttu-id="c575d-213">系统集成商可以定义一组属性，以便升级到 BizTalk Server 消息上下文之后该, 属性添加到 JMS 消息的属性部分。</span><span class="sxs-lookup"><span data-stu-id="c575d-213">The integrator can define a set of properties to promote to the BizTalk Server message context, after which the properties are added to the properties part of the JMS message.</span></span> <span data-ttu-id="c575d-214">系统集成商负责创建架构定义的属性类型时。</span><span class="sxs-lookup"><span data-stu-id="c575d-214">The integrator takes care when defining the type of the property while it is creating the schema.</span></span> <span data-ttu-id="c575d-215">如果在消息选择器中使用此属性的值，则某些操作是根据属性类型有效。</span><span class="sxs-lookup"><span data-stu-id="c575d-215">If this property value is used in a message selector, certain operations are valid depending on the type of the property.</span></span> <span data-ttu-id="c575d-216">例如，如果消息选择器**myMessageProperty > 5**是使用，必须将属性定义为整数值，并且适配器可将值放置在消息中作为一个整数值。</span><span class="sxs-lookup"><span data-stu-id="c575d-216">For example, if a message selector **myMessageProperty > 5** is used, the property must be defined as an integer value, and the adapter puts the value in the message as an integer value.</span></span> <span data-ttu-id="c575d-217">对于要升级的属性，属性名称必须以 EMSX 开头。</span><span class="sxs-lookup"><span data-stu-id="c575d-217">For the properties to be promoted, the property names must start with EMSX.</span></span> <span data-ttu-id="c575d-218">它们还不能与预定义的属性相同的名称。</span><span class="sxs-lookup"><span data-stu-id="c575d-218">They must also not have the same name as the predefined properties.</span></span>  
  
 <span data-ttu-id="c575d-219">用于 TIBCO Enterprise Message Service 的 BizTalk 适配器提供的架构和程序集，该声明可以出现在本部分中的特定于 EMS 和 JMS 属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-219">BizTalk Adapter for TIBCO Enterprise Message Service provides a schema and assembly, which declare the EMS- and JMS-specific properties that can appear in this section.</span></span> <span data-ttu-id="c575d-220">这些可以扩充以包含任何遗漏项。</span><span class="sxs-lookup"><span data-stu-id="c575d-220">These can be augmented to include any omissions.</span></span> <span data-ttu-id="c575d-221">在消息上下文中引用的所有 EMSX 属性都将都置于 EMS 消息的消息属性部分。</span><span class="sxs-lookup"><span data-stu-id="c575d-221">All EMSX properties referenced in the message context are put in the message property section of the EMS message.</span></span> <span data-ttu-id="c575d-222">有关详细信息，请参阅 TIBCO EMS 用户指南。</span><span class="sxs-lookup"><span data-stu-id="c575d-222">For more information, see the TIBCO EMS Users Guide.</span></span>  
  
## <a name="body"></a><span data-ttu-id="c575d-223">正文</span><span class="sxs-lookup"><span data-stu-id="c575d-223">Body</span></span>  
 <span data-ttu-id="c575d-224">EMS 支持 JMS 规范中枚举的所有消息： 文本、 字节、 流、 映射和对象。</span><span class="sxs-lookup"><span data-stu-id="c575d-224">EMS supports all messages enumerated in the JMS specification: text, byte, stream, map, and object.</span></span> <span data-ttu-id="c575d-225">用于 TIBCO EMS 的 BizTalk 适配器仅支持文本消息类型。</span><span class="sxs-lookup"><span data-stu-id="c575d-225">The BizTalk Adapter for TIBCO EMS supports only the text message type.</span></span>  
  
 <span data-ttu-id="c575d-226">JMS 并未要求文本类型的消息包含 XML 格式的正文。</span><span class="sxs-lookup"><span data-stu-id="c575d-226">JMS does not require that messages of type text contain XML-formatted bodies.</span></span> <span data-ttu-id="c575d-227">适配器不会处理消息; 的正文提供给[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接收。</span><span class="sxs-lookup"><span data-stu-id="c575d-227">The adapter does not process the body of the message; it is provided to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as received.</span></span>  <span data-ttu-id="c575d-228">因此，由适配器提交到 BizTalk 消息可能并非始终会解析为 XML 数据。</span><span class="sxs-lookup"><span data-stu-id="c575d-228">Therefore, messages submitted to BizTalk by the adapter may not always parse as XML data.</span></span>  
  
## <a name="persistent-messages"></a><span data-ttu-id="c575d-229">持久性消息</span><span class="sxs-lookup"><span data-stu-id="c575d-229">Persistent Messages</span></span>  
 <span data-ttu-id="c575d-230">消息可以保留在 EMS 服务器以保证一次性传送到订阅服务器;但是，这可以对适配器的性能产生重大影响。</span><span class="sxs-lookup"><span data-stu-id="c575d-230">Messages can be persisted on the EMS server to guarantee exactly one-time delivery to a subscriber; however, this can have a significant impact on the adapter's performance.</span></span> <span data-ttu-id="c575d-231">当发送消息时，EMS 将消息在本地存储中存储确认接收到适配器消息之前。</span><span class="sxs-lookup"><span data-stu-id="c575d-231">When you send messages, EMS stores the message in local storage before acknowledging reception of the message to the adapter.</span></span> <span data-ttu-id="c575d-232">可以将此属性设置在每个消息的基础业务流程中或端口处理的所有消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-232">You can set this property on a per-message basis in the orchestration or for all messages processed by the port.</span></span>  
  
 <span data-ttu-id="c575d-233">从接收方面而言，该适配器可能丢失消息时未订阅到主题。</span><span class="sxs-lookup"><span data-stu-id="c575d-233">From the receiving aspect, the adapter can miss messages when it is not subscribed to the topic.</span></span> <span data-ttu-id="c575d-234">不保存 ems 的消息发布到主题时没有任何订阅。</span><span class="sxs-lookup"><span data-stu-id="c575d-234">Messages posted to topics when there are no subscriptions are not persisted by EMS.</span></span> <span data-ttu-id="c575d-235">适配器需要一种机制来接收消息发布即使当前没有订阅;但是，如使用持久性消息时，这对 EMS 性能产生重大影响，并且它并不总是必需。</span><span class="sxs-lookup"><span data-stu-id="c575d-235">The adapter needs a mechanism to receive message postings even when not currently subscribed; however, like the use of persistent messages, this has a significant impact on the EMS performance, and it is not always required.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c575d-236">没有一种机制接收从 EMS 角度来看，但未实现，也不真正需要。</span><span class="sxs-lookup"><span data-stu-id="c575d-236">There is a mechanism for receive from the point of view of EMS, but it is not implemented, nor is it really desired.</span></span> <span data-ttu-id="c575d-237">这是问题仅与主题;队列不受影响。</span><span class="sxs-lookup"><span data-stu-id="c575d-237">This is only an issue with topic; queues are not affected.</span></span> <span data-ttu-id="c575d-238">本主题是通常用于特定于时间的数据--股票报价，例如。</span><span class="sxs-lookup"><span data-stu-id="c575d-238">A topic is generally used for time-specific data -- stock quotes, for example.</span></span> <span data-ttu-id="c575d-239">如果股票价格丢失，您知道它将在稍后发布。</span><span class="sxs-lookup"><span data-stu-id="c575d-239">If the price of a stock is missed, you know that it will be posted again later.</span></span>  
  
 <span data-ttu-id="c575d-240">出于这些原因，端口配置允许您启用或禁用消息持久化 EMS 服务器上。</span><span class="sxs-lookup"><span data-stu-id="c575d-240">For these reasons the port configuration lets you enable or disable message persistence on the EMS server.</span></span>  
  
## <a name="message-acknowledgement"></a><span data-ttu-id="c575d-241">消息确认</span><span class="sxs-lookup"><span data-stu-id="c575d-241">Message Acknowledgement</span></span>  
 <span data-ttu-id="c575d-242">用于 TIBCO Enterprise Message Service 的 BizTalk 适配器始终确认已收到的消息时该消息正确调度到 BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="c575d-242">BizTalk Adapter for TIBCO Enterprise Message Service always acknowledges reception of a message when that message was correctly dispatched to BizTalk Server.</span></span> <span data-ttu-id="c575d-243">这意味着未确认的消息是从 EMS 重新发送到适配器。</span><span class="sxs-lookup"><span data-stu-id="c575d-243">This means that unacknowledged messages are resent from EMS to the adapter.</span></span> <span data-ttu-id="c575d-244">适配器无法控制 ems 发送消息，因为这是目标自身; 的配置的次数但是，如果将消息发送到 MessageBox 或不可以控制适配器。</span><span class="sxs-lookup"><span data-stu-id="c575d-244">The adapter cannot control the number of times the message is resent by EMS because this is a configuration of the destination itself; however, the adapter can control if the message is sent to the MessageBox or not.</span></span> <span data-ttu-id="c575d-245">EMS 服务器控制最多的失败的消息发送到队列的次数。</span><span class="sxs-lookup"><span data-stu-id="c575d-245">The EMS server controls the maximum number of times a failed message is sent to a queue.</span></span>  
  
 <span data-ttu-id="c575d-246">对于重新传送的消息，EMS 服务器设置`JMSRedelivered`属性设置为 True 并增加`JMSXDeliveryCount`。</span><span class="sxs-lookup"><span data-stu-id="c575d-246">For messages that are redelivered, the EMS server sets the `JMSRedelivered` property to True and increments the `JMSXDeliveryCount`.</span></span> <span data-ttu-id="c575d-247">这两个属性值可供业务流程。</span><span class="sxs-lookup"><span data-stu-id="c575d-247">Both property values are available to the orchestration.</span></span> <span data-ttu-id="c575d-248">无法将消息移动到 EMS 的未传送队列，却不能那里实现。</span><span class="sxs-lookup"><span data-stu-id="c575d-248">You cannot move a message to the EMS un-delivered queue without delivering it there.</span></span> <span data-ttu-id="c575d-249">执行此操作将更改消息属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-249">Doing this would change the message properties.</span></span>  
  
 <span data-ttu-id="c575d-250">当消息到达其已配置的最大重新传送计数时，EMS 服务器将确定是否应删除或放入 $sys.undelivered 队列消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-250">When a message reaches its configured maximum redelivery count, the EMS server determines whether the message should be deleted or put on the $sys.undelivered queue.</span></span> <span data-ttu-id="c575d-251">EMS 服务器使基于决策`JMS_TIBCO_PRESERVE_UNDELIVERED`属性; 如果为 True，消息将转至未传送队列，或将其删除。</span><span class="sxs-lookup"><span data-stu-id="c575d-251">The EMS server makes the decision based on the `JMS_TIBCO_PRESERVE_UNDELIVERED` property; if True, the message goes to the undelivered queue, or it is deleted.</span></span> <span data-ttu-id="c575d-252">可以在业务流程中发送消息之前设置此属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-252">This property can be set in the orchestration before sending the message.</span></span> <span data-ttu-id="c575d-253">传送之后无法更改消息属性。</span><span class="sxs-lookup"><span data-stu-id="c575d-253">After delivery, the message property cannot be changed.</span></span> <span data-ttu-id="c575d-254">它们都成功后，将向 BizTalk Server 确认发送到 EMS 的消息。</span><span class="sxs-lookup"><span data-stu-id="c575d-254">Messages sent to EMS are acknowledged to BizTalk Server when they are successful.</span></span> <span data-ttu-id="c575d-255">如果没有到 EMS 失败发送主题，它们已挂起并标记为可重试。</span><span class="sxs-lookup"><span data-stu-id="c575d-255">If there is a failure sending theme to EMS, they are suspended and marked as retryable.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c575d-256">请参阅</span><span class="sxs-lookup"><span data-stu-id="c575d-256">See Also</span></span>  
 [<span data-ttu-id="c575d-257">入门</span><span class="sxs-lookup"><span data-stu-id="c575d-257">Getting Started</span></span>](../core/getting-started-with-biztalk-adapter-for-tibco-enterprise-message-service.md)