---
title: 组件的业务流程管理解决方案 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- process management solution tutorial, back-end systems, process management solutions
- process management solution tutorial, client applications
- orchestrations, process management solutions
- adapters, process management solutions
- process management solution tutorial, adapters
- client applications, process management solutions
- process management solution tutorial, components
- process management solution tutorial, orchestrations
- pipelines, process management solutions
- process management solution tutorial, pipelines
- assemblies, process management solutions
- process management solution tutorial, assemblies
ms.assetid: e3ccebb9-b677-4c17-acd2-0f986f7bd3f0
caps.latest.revision: 22
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 195d40becd4eb35b757379c4d3c51c4feeb4f684
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65356699"
---
# <a name="components-of-the-business-process-management-solution"></a><span data-ttu-id="1183c-102">业务流程管理解决方案的组件</span><span class="sxs-lookup"><span data-stu-id="1183c-102">Components of the Business Process Management Solution</span></span>
<span data-ttu-id="1183c-103">本部分介绍业务流程管理解决方案的主要 BizTalk Server 组件。</span><span class="sxs-lookup"><span data-stu-id="1183c-103">This section describes the major BizTalk Server components of the Business Process Management Solution.</span></span> <span data-ttu-id="1183c-104">有关源文件的信息，请参阅[业务流程管理解决方案的文件清单](../core/file-inventory-for-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-104">For information about the source files, see [File Inventory for the Business Process Management Solution](../core/file-inventory-for-the-business-process-management-solution.md).</span></span>  
  
## <a name="orchestrations"></a><span data-ttu-id="1183c-105">业务流程</span><span class="sxs-lookup"><span data-stu-id="1183c-105">Orchestrations</span></span>  
 <span data-ttu-id="1183c-106">有两个主要业务流程：**OrderBroker**并**OrderManager**。</span><span class="sxs-lookup"><span data-stu-id="1183c-106">There are two main orchestrations: **OrderBroker** and **OrderManager**.</span></span> <span data-ttu-id="1183c-107">**OrderBroker**业务流程接受客户请求通过 Web 服务或通过 FTP，批量，并将返回到 Microsoft 消息队列 (MSMQ) 队列的答复。</span><span class="sxs-lookup"><span data-stu-id="1183c-107">The **OrderBroker** orchestration accepts customer requests through a Web service or in batches through FTP, and sends replies back through a Microsoft Message Queuing (MSMQ) queue.</span></span> <span data-ttu-id="1183c-108">从请求转**OrderBroker**到**OrderManager**。</span><span class="sxs-lookup"><span data-stu-id="1183c-108">Requests go from the **OrderBroker** to the **OrderManager**.</span></span> <span data-ttu-id="1183c-109">两个业务流程与直接绑定通过 MessageBox 数据库。</span><span class="sxs-lookup"><span data-stu-id="1183c-109">The two orchestrations are direct bound through the MessageBox database.</span></span>  
  
 <span data-ttu-id="1183c-110">**OrderManager**通过使用两个异步处理阶段来运行请求**CableOrder1**并**CableOrder2**业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-110">The **OrderManager** runs the requests through two asynchronous processing stages using the **CableOrder1** and **CableOrder2** orchestrations.</span></span> <span data-ttu-id="1183c-111">集合在一起**CableOrder1**并**CableOrder2**业务流程表示单个业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-111">Taken together, the **CableOrder1** and **CableOrder2** orchestrations represent a single business process.</span></span> <span data-ttu-id="1183c-112">但是，该过程已拆分为两个业务流程，以便更改阶段时不必中断订单处理。</span><span class="sxs-lookup"><span data-stu-id="1183c-112">However, the process has been broken into two orchestrations so that stages can be changed without disrupting order processing.</span></span> <span data-ttu-id="1183c-113">有关设计阶段的详细信息，请参阅"划分业务流程"中[业务流程管理解决方案中的某些设计原则](../core/some-design-principles-in-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-113">For more information about the design of the stages, see "Dividing Business Processes" in [Some Design Principles in the Business Process Management Solution](../core/some-design-principles-in-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="1183c-114">**CableOrder1**业务流程将使用**验证**业务流程验证订单并请求代码翻译成操作，调用 Analyze 业务流程，用于分析的顺序，然后调用**激活**，**取消**，或**更改**具体取决于所需的操作的业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-114">The **CableOrder1** orchestration uses the **Validate** orchestration to validate the order and to translate request codes into actions, calls the Analyze orchestration to analyze the order, and then calls the **Activate**, **Cancel**, or **Change** orchestration depending on the required action.</span></span> <span data-ttu-id="1183c-115">**CableOrder2**业务流程通过调用来处理完成订单**完成**业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-115">The **CableOrder2** orchestration handles completion of the order by calling the **Complete** orchestration.</span></span> <span data-ttu-id="1183c-116">请注意， **CableOrder1**并**CableOrder2**使用**调用**形状调用从属业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-116">Notice that **CableOrder1** and **CableOrder2** use **Call** shapes to invoke the subordinate orchestrations.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1183c-117">**取消**业务流程包含调用的补偿模块**激活**业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-117">The **Cancel** orchestration includes a compensation block that calls the **Activate** orchestration.</span></span> <span data-ttu-id="1183c-118">这可确保订单正确还原为对取消请求的补偿的一部分。</span><span class="sxs-lookup"><span data-stu-id="1183c-118">This ensures that the order is properly restored as part of the compensation for the cancel request.</span></span>  
  
 <span data-ttu-id="1183c-119">**CableOrder1**并**CableOrder2**业务流程使用直接绑定。</span><span class="sxs-lookup"><span data-stu-id="1183c-119">The **CableOrder1** and **CableOrder2** orchestrations use direct binding.</span></span> <span data-ttu-id="1183c-120">有关这些业务流程直接绑定的详细信息，请参阅[业务流程管理解决方案的实现重点](../core/implementation-highlights-of-the-business-process-management-solution.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-120">For more information about the direct binding of these orchestrations, see [Implementation Highlights of the Business Process Management Solution](../core/implementation-highlights-of-the-business-process-management-solution.md).</span></span>  
  
 <span data-ttu-id="1183c-121">许多业务流程写入，以便它们可以处理使用期间中断**中断**业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-121">Many of the orchestrations are written so that they can be interrupted during processing using the **Interrupt** orchestration.</span></span> <span data-ttu-id="1183c-122">有关中断机制的详细信息，请参阅[进程管理器逻辑](../core/process-manager-logic.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-122">For more information about the interrupt mechanism, see [Process Manager Logic](../core/process-manager-logic.md).</span></span>  
  
## <a name="back-end-applications"></a><span data-ttu-id="1183c-123">后端应用程序</span><span class="sxs-lookup"><span data-stu-id="1183c-123">Back-end Applications</span></span>  
 <span data-ttu-id="1183c-124">业务流程管理解决方案的所有后端应用程序都使用模拟。</span><span class="sxs-lookup"><span data-stu-id="1183c-124">The Business Process Management solution uses simulations for all of the back-end applications.</span></span> <span data-ttu-id="1183c-125">**CableOrder1**， **CableOrder2**，并使用所有的业务流程采用一种特殊**OrderHandler**对象。</span><span class="sxs-lookup"><span data-stu-id="1183c-125">**CableOrder1**, **CableOrder2**, and the orchestrations they use all employ a special **OrderHandler** object.</span></span> <span data-ttu-id="1183c-126">**OrderHandler**使用.NET 远程处理与模拟订单管理系统进行通信。</span><span class="sxs-lookup"><span data-stu-id="1183c-126">The **OrderHandler** uses .NET remoting to communicate with a simulation of an order management system.</span></span> <span data-ttu-id="1183c-127">**CableProvisioningSystemClient**并**BTSScnBPMProvisioning** ( **CableProvisioningSystemServer**项目) 程序集模拟的前端和后端订单管理系统，分别。</span><span class="sxs-lookup"><span data-stu-id="1183c-127">The **CableProvisioningSystemClient** and **BTSScnBPMProvisioning** (the **CableProvisioningSystemServer** project) assemblies simulate the front and back ends of the order managing system, respectively.</span></span>  
  
 <span data-ttu-id="1183c-128">该解决方案使用 Windows 窗体应用程序中， **BSTScnBPMFacilities** ( **FacilitiesSimulator**项目)，以模拟处理功能请求的 MSMQ 服务器。</span><span class="sxs-lookup"><span data-stu-id="1183c-128">The solution uses a Windows forms application, **BSTScnBPMFacilities** (the **FacilitiesSimulator** project), to simulate the MSMQ server that handles the facilities requests.</span></span>  
  
 <span data-ttu-id="1183c-129">除了这些组件，业务流程还在 SQL Server 数据库来维护的订单和它们的处理历史记录中生成条目。</span><span class="sxs-lookup"><span data-stu-id="1183c-129">In addition to these components, the orchestrations also make entries in a SQL Server database to maintain a history of orders and their processing.</span></span>  
  
## <a name="pipelines"></a><span data-ttu-id="1183c-130">管道</span><span class="sxs-lookup"><span data-stu-id="1183c-130">Pipelines</span></span>  
 <span data-ttu-id="1183c-131">该解决方案使用只能通过 BizTalk 管理控制台或绑定文件配置的标准默认管道。</span><span class="sxs-lookup"><span data-stu-id="1183c-131">The solution uses only standard default pipelines configured through the BizTalk Administration console or binding files.</span></span> <span data-ttu-id="1183c-132">管道执行操作，但是，请广泛使用的每个实例的配置。</span><span class="sxs-lookup"><span data-stu-id="1183c-132">The pipelines do, however, make extensive use of per-instance configuration.</span></span> <span data-ttu-id="1183c-133">通过 FTP 发送的订单的接收端口使用基于实例的配置来配置信封。</span><span class="sxs-lookup"><span data-stu-id="1183c-133">The receive port for orders sent by FTP uses per-instance configuration to configure the envelope.</span></span> <span data-ttu-id="1183c-134">有关每个实例配置的详细信息，请参阅[如何部署管道](../core/how-to-deploy-pipelines.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-134">For more information about per-instance configuration, see [How to Deploy Pipelines](../core/how-to-deploy-pipelines.md).</span></span>  
  
## <a name="custom-adapter"></a><span data-ttu-id="1183c-135">自定义适配器</span><span class="sxs-lookup"><span data-stu-id="1183c-135">Custom Adapter</span></span>  
 <span data-ttu-id="1183c-136">该解决方案使用自定义适配器**OpsAdapter**，以处理中检测到某些错误**OrderManager**并**ErrorHandler**业务流程。</span><span class="sxs-lookup"><span data-stu-id="1183c-136">The solution uses a custom adapter, the **OpsAdapter**, to process some errors detected in the **OrderManager** and **ErrorHandler** orchestrations.</span></span> <span data-ttu-id="1183c-137">该解决方案为哪些错误报告指定的端口上使用适配器。</span><span class="sxs-lookup"><span data-stu-id="1183c-137">The solution uses the adapter on ports for which error reporting is specified.</span></span> <span data-ttu-id="1183c-138">适配器获取错误，并将它们发送到操作系统。</span><span class="sxs-lookup"><span data-stu-id="1183c-138">The adapter takes the errors and sends them on to the operations system.</span></span> <span data-ttu-id="1183c-139">有关错误报告的详细信息，请参阅[使用失败消息路由](../core/using-failed-message-routing.md)。</span><span class="sxs-lookup"><span data-stu-id="1183c-139">For more information about error reporting, see [Using Failed Message Routing](../core/using-failed-message-routing.md).</span></span>  
  
## <a name="client-application"></a><span data-ttu-id="1183c-140">客户端应用程序</span><span class="sxs-lookup"><span data-stu-id="1183c-140">Client Application</span></span>  
 <span data-ttu-id="1183c-141">该解决方案包含 ASP.NET Web 页由C#程序中， **CSRMain.aspx**，以模拟客户服务系统。</span><span class="sxs-lookup"><span data-stu-id="1183c-141">The solution includes an ASP.NET Web page backed by a C# program, **CSRMain.aspx**, to simulate the customer service system.</span></span>  
  
## <a name="other-assemblies"></a><span data-ttu-id="1183c-142">其他程序集</span><span class="sxs-lookup"><span data-stu-id="1183c-142">Other Assemblies</span></span>  
 <span data-ttu-id="1183c-143">该解决方案使用两个其他程序集**架构**并**实用程序**。</span><span class="sxs-lookup"><span data-stu-id="1183c-143">The solution uses two additional assemblies, **Schemas** and **Utilities**.</span></span> <span data-ttu-id="1183c-144">**架构**程序集定义该解决方案使用用于如不同的业务流程之间进行通信的消息**中断**消息。</span><span class="sxs-lookup"><span data-stu-id="1183c-144">The **Schemas** assembly defines the messages the solution uses for communicating among the different orchestrations such as the **Interrupt** message.</span></span> <span data-ttu-id="1183c-145">该解决方案还使用多个.NET 消息中定义**SchemaClasses**程序集。</span><span class="sxs-lookup"><span data-stu-id="1183c-145">The solution also uses several .NET messages defined in the **SchemaClasses** assembly.</span></span>  
  
 <span data-ttu-id="1183c-146">**实用程序**程序集包括的实用工具类和方法，以帮助处理消息，可以定义特定的异常类型的解决方案，以从 SSO 密钥存储区中读取配置值，并以帮助进行错误处理。</span><span class="sxs-lookup"><span data-stu-id="1183c-146">The **Utilities** assembly includes utility classes and methods to help handle messages, to define an exception type specific to the solution, to read configuration values from the SSO secret store, and to help with error handling.</span></span> <span data-ttu-id="1183c-147">程序集还包括**Recaller**对象。</span><span class="sxs-lookup"><span data-stu-id="1183c-147">The assembly also includes the **Recaller** object.</span></span>  
  
 <span data-ttu-id="1183c-148">其他程序集包括映射和架构程序集，如下所述 **: OrderBrokerMaps**， **OrderBrokerSchemas**，**映射**， **MessagingSchemas**，并**SchemaClasses**。</span><span class="sxs-lookup"><span data-stu-id="1183c-148">Other assemblies include map and schema assemblies such as **OrderBrokerMaps**, **OrderBrokerSchemas**, **Maps**, **MessagingSchemas**, and **SchemaClasses**.</span></span>  
  
 <span data-ttu-id="1183c-149">**ServiceLevelTracking**程序集包含与 BAM 一起用于跟踪订单和处理的常见项目。</span><span class="sxs-lookup"><span data-stu-id="1183c-149">The **ServiceLevelTracking** assembly contains the common artifacts used with BAM to track orders and processing.</span></span> <span data-ttu-id="1183c-150">订单处理操作阶段使用位于**CableOrderActions**程序集。</span><span class="sxs-lookup"><span data-stu-id="1183c-150">Order processing actions used by the stages are in the **CableOrderActions** assembly.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1183c-151">请参阅</span><span class="sxs-lookup"><span data-stu-id="1183c-151">See Also</span></span>  
 <span data-ttu-id="1183c-152">[业务流程管理解决方案中的模式](../core/patterns-in-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-152">[Patterns in the Business Process Management Solution](../core/patterns-in-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="1183c-153">[在业务流程管理解决方案中处理](../core/processing-in-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-153">[Processing in the Business Process Management Solution](../core/processing-in-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="1183c-154">[业务流程管理解决方案的实施要点](../core/implementation-highlights-of-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-154">[Implementation Highlights of the Business Process Management Solution](../core/implementation-highlights-of-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="1183c-155">[监视业务流程管理解决方案使用 BAM](../core/monitoring-the-business-process-management-solution-with-bam.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-155">[Monitoring the Business Process Management Solution with BAM](../core/monitoring-the-business-process-management-solution-with-bam.md) </span></span>  
 <span data-ttu-id="1183c-156">[版本控制业务流程管理解决方案](../core/versioning-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-156">[Versioning the Business Process Management Solution](../core/versioning-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="1183c-157">[业务流程管理解决方案参考](../core/business-process-management-solution-reference.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-157">[Business Process Management Solution Reference](../core/business-process-management-solution-reference.md) </span></span>  
 <span data-ttu-id="1183c-158">[开发业务流程管理解决方案](../core/developing-a-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="1183c-158">[Developing a Business Process Management Solution](../core/developing-a-business-process-management-solution.md) </span></span>  
 [<span data-ttu-id="1183c-159">业务流程管理解决方案中的文件清单</span><span class="sxs-lookup"><span data-stu-id="1183c-159">File Inventory for the Business Process Management Solution</span></span>](../core/file-inventory-for-the-business-process-management-solution.md)