---
title: 如何修改资源的基于限制设置 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- Bts10.settings.HostResource
ms.assetid: 5f8b32a8-d8cc-4045-a8be-0de0bbadcce4
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f3b00ca31467592a7ba071b96ec6f52367b4149f
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65384560"
---
# <a name="how-to-modify-resource-based-throttling-settings"></a>如何修改资源的基于限制设置
使用设置仪表板，你可以在 BizTalk 组修改给定主机的基于资源限制的配置设置。 这些设置适用于所有分配给给定主机的主机实例。 本主题提供了修改这些设置的分步过程。  

 若要管理的系统资源 （如线程、 内存和数据库大小） 的使用情况的主机实例进程，[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]使用可调整的阻止机制控制的流和主机实例的消息的处理。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]主机阻止机制有助于确保系统在最佳和可持续级别按对进行操作：  

-   主机实例的工作量。  

-   阻止资源争用，这可以降低主机实例进程或其他系统进程的整体性能。  

-   检测何时正在使用可用资源不足。  

## <a name="prerequisites"></a>先决条件  
 若要执行此操作，必须以 BizTalk Server Administrators 组的成员的身份登录。  

### <a name="to-modify-the-resource-based-throttling-settings-of-a-host"></a>若要修改的资源基于主机的阻止设置  

1. 在中**BizTalk Server 管理控制台**，展开[!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]，右键单击**BizTalk 组**，然后单击**设置**。  

2. 在中**BizTalk 设置仪表板**对话框中，在**主机**选项卡上，单击**基于资源的阻止**选项卡。  

3. 执行以下操作，然后依次**应用**以应用修改并转到另一个选项卡。否则，请单击**确定**应用所做的修改并退出设置仪表板。  


   |          **使用此**           |                                                                                                                                                                                                                                                                                                                                                             执行的操作                                                                                                                                                                                                                                                                                                                                                             |                                            边界值                                             | 默认值 |                                           升级逻辑                                           |
   |---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|---------------|---------------------------------------------------------------------------------------------------|
   |            **主机**             |                                                                                                                                                                                                                                                                                  从下拉列表中，选择表示主机[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]运行时实例。                                                                                                                                                                                                                                                                                   |                                                   -                                                    |       -       |                                                 -                                                 |
   |      **每 CPU 设置**       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |           **线程**           |                                                                                                                                                                                                                                                                                                                指定的线程 （每 CPU) 过程中阻止开始之前允许的最大数。                                                                                                                                                                                                                                                                                                                |                                   [0，整数类型的最大值)                                   |       0       |                                                 -                                                 |
   |    **数据库连接**     |                                                                                                                                                                                                                                                                                                                    指定阻止开始之前允许的数据库会话 （每 CPU) 的最大数目。                                                                                                                                                                                                                                                                                                                     |                                   1 – 最大值类型为 Integer                                    |       0       |                                                 -                                                 |
   |     **进程内消息数**     |                                                                                                                                                                                                                                              指定的最大传送到端点管理器 (EPM) 或 XLANG 的尚未处理的消息数。 这不包括从数据库中检索到但仍在等待内存中队列中传递的消息。                                                                                                                                                                                                                                              |                                   1 – 最大值类型为 Integer                                    |     1000      |                                                 -                                                 |
   | **内部消息队列大小** |                                                表示内存中队列的大小。 此队列用作送达消息的临时占位符。<br /><br /> 设置较大的值为此参数可能会提高在某种程度上的低延迟方案，因为将从 MessageBox 数据库，以处理主动检索更多的消息。 由于此队列中的消息会消耗内存，可能也适用于涉及大型消息，以便避免基于内存的进程阻止此参数设置为较小的值。 **注意：** 如果修改此值，则需要更改才能生效，必须重新启动主机。                                                |                                   1 – 最大值类型为 Integer                                    |      100      |                                                 -                                                 |
   |     **在 DB 中的消息计数**     |                                                                                                                              指示消息发布到工作、 状态和已挂起的队列的订阅主机的主机实例的总数。<br /><br /> **DB 中的消息数**也可间接定义基于后台处理表或跟踪表中的消息数的阻止条件的阈值。 如果后台处理表或跟踪表中的消息数超过 10 次此值将触发阻止条件。                                                                                                                              |                                   1 – 最大值类型为 Integer                                    |     50000     |                                                 -                                                 |
   |        **内存使用情况**         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |       **全局物理**       |                                                                                                                                                                                                                                                                                                                指定 （以百分比表示） 阻止开始之前允许的最大的系统范围虚拟内存使用率。                                                                                                                                                                                                                                                                                                                 | 0： 禁用<br /><br /> 1% – 100%<br /><br /> 值 > 100%被视为 Mb，可以上升到最大整数 |       0       |                                                 -                                                 |
   |       **进程虚拟**       |                                                                                                                                                                                                                                                                                                            指定 （以百分比或兆字节为单位） 阻止开始之前允许的最大进程内存 （以百分比表示）。                                                                                                                                                                                                                                                                                                             | 0： 禁用<br /><br /> 1% – 100%<br /><br /> 值 > 100%被视为 Mb，可以上升到最大整数 |      25       |                                                 -                                                 |
   |      **后台乘数**       |                                                                                                                                                                              指示所依据的因素**DB 中的消息数**乘以和与指定后台处理表中的当前记录数进行比较的阈值。<br /><br /> 这样做是为了确定系统是否应当限制后台处理表大小。 如果此值设置为 0，后台处理表大小不用作确定限制条件的考虑因素。                                                                                                                                                                              |                                                 0-1000                                                 |      10       | 限制从注册表中读取的参数应与主机实例参数一对一映射。 |
   |  **跟踪数据乘数**   |                                                                                                                                                                          依据指定的系数**DB 中的消息数**乘以和与指定跟踪表中的当前记录数进行比较的阈值。<br /><br /> 这样做是为了确定系统是否应当限制跟踪表的大小。 如果此值设置为 0，跟踪表大小不用作确定限制条件的考虑因素。                                                                                                                                                                          |                                                 0-1000                                                 |      10       | 限制从注册表中读取的参数应与主机实例参数一对一映射。 |
   |     **触发 GC 的限制**     |                                                                                                                                                                                                                                               指定.NET 垃圾回收 (GC) 时触发为进程内存占用增加并接近阈值。 当内存占用超过内存阈值的此百分比值时，会触发一个 GC。                                                                                                                                                                                                                                               |                                                 50-100                                                 |      80       | 限制从注册表中读取的参数应与主机实例参数一对一映射。 |
   |   **批内存阈值**    | 指示 （以百分比表示） 超过该限制发布的消息批内存阈值。<br /><br /> 批内存阈值计算此百分比因子乘以**进程虚拟**阈值。 如果估计的内存来执行发布批超过了批内存阈值，则该批会受到进程基于内存的阻止功能。 否则，批处理已免除进程基于内存的阻止进程内存总量超过时甚至**进程虚拟**阈值。<br /><br /> 零表示所有发布批也可能受到进程基于内存的阻止功能即使在估计用于执行批是最小的内存。 |                                                0%-100%                                                 |               | 限制从注册表中读取的参数应与主机实例参数一对一映射。 |
   |          **Severity**           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                   -                                                    |       -       |                                                 -                                                 |
   |           **内存**            |                                                                                                                                                                                                                                                   指示的严重程度进程内存触发的阻止条件。 在百分比值中指定，此参数设置而导致的阻止条件的严重性**进程虚拟**超过了阈值。                                                                                                                                                                                                                                                   |                                                1 – 1000                                                |      500      |                                所有主机实例值的最小值                                 |
   |           **数据库大小**           |                                                                                                                                                                                                                                                 指示的严重程度数据库大小触发的阻止条件。 在百分比值中指定，此参数设置而导致的阻止条件的严重性**DB 中的消息数**超过了阈值。                                                                                                                                                                                                                                                 |                                                1 – 1000                                                |       1       |                                所有主机实例值的最小值                                 |
   |      **尚未到达的消息**       |                                                                                                                                                                                                                      指定时进行阻止的反应时间的值**进程内消息数**超出了阈值。 此参数以百分比值的形式指定，并且此参数设置而导致的阻止条件的严重性的值**进程内消息数**超过了阈值。                                                                                                                                                                                                                       |                                                1 – 1000                                                |      75       |                                所有主机实例值的最小值                                 |

   > [!NOTE]
   >  若要还原默认设置，请单击**还原为默认值**。  

## <a name="see-also"></a>请参阅  
 [如何修改主机设置](../core/how-to-modify-host-settings.md)