---
title: Loopback | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- agreements, 0A1 agreements
- loopbacks, running
- loopbacks, 0A1 agreements
- loopbacks, about loopbacks
- loopbacks, 0A1 messages
- agreements, loopback agreements
- messages, 0A1 messages
- loopbacks
- Loopback utility
- loopbacks, syntax
- 0A1 messages
- loopbacks, Loopback utility
- syntax [loopbacks]
- agreements, Loopback utility
ms.assetid: b4ebbdac-05be-4dfc-a133-6b752994e85a
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f1cc2a6c1434812f876ea71881890a08d165f471
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65283316"
---
# <a name="loopback"></a><span data-ttu-id="3b9e7-102">Loopback</span><span class="sxs-lookup"><span data-stu-id="3b9e7-102">Loopback</span></span>
<span data-ttu-id="3b9e7-103">使用 Loopback 实用工具来自动生成环回协议，它是本组织到合作伙伴协议的镜像副本。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-103">You use the Loopback utility to automatically generate a loopback agreement that is a mirror copy of a home-to-partner agreement.</span></span> <span data-ttu-id="3b9e7-104">这允许您在单台计算机上执行本组织合作伙伴和合作伙伴主页消息交换。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-104">This lets you perform home-to-partner and partner-to-home message exchanges on a single computer.</span></span> <span data-ttu-id="3b9e7-105">用于带有 0A1 消息的方案或不带 0A1 消息的方案，可以使用此实用工具。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-105">You can use this utility for a scenario with 0A1 messages or a scenario without 0A1 messages.</span></span> <span data-ttu-id="3b9e7-106">可以创建环回协议的操作-消息 (非 0A1) 协议或 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-106">You can create a loopback agreement for an action-message (non-0A1) agreement or a 0A1 agreement.</span></span>  

 <span data-ttu-id="3b9e7-107">此外可以使用实用工具来登记或取消登记发件人角色的本组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-107">You can also use the utility to enlist or unenlist a home organization for a sender role.</span></span> <span data-ttu-id="3b9e7-108">当你使用该实用工具启用本组织时，它将创建两个发送端口，\<家庭\>。异步和\<主页\>。同步组织用来与其合作伙伴进行通信。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-108">When you use the utility to enable a home organization, it creates two send ports, \<Home\>.Async and \<Home\>.Sync, that the organization uses to communicate with their partner.</span></span>  

## <a name="location-in-sdk"></a><span data-ttu-id="3b9e7-109">在 SDK 中的位置</span><span class="sxs-lookup"><span data-stu-id="3b9e7-109">Location in SDK</span></span>  
 <span data-ttu-id="3b9e7-110">\<*drive*\>\ Program Files (x86)\Microsoft BizTalk \<version\> Accelerator for RosettaNet\SDK\\</span><span class="sxs-lookup"><span data-stu-id="3b9e7-110">\<*drive*\>\ Program Files (x86)\Microsoft BizTalk \<version\> Accelerator for RosettaNet\SDK\\</span></span>  

## <a name="running-loopback"></a><span data-ttu-id="3b9e7-111">运行 Loopback</span><span class="sxs-lookup"><span data-stu-id="3b9e7-111">Running Loopback</span></span>  

#### <a name="to-run-loopback"></a><span data-ttu-id="3b9e7-112">若要运行 Loopback</span><span class="sxs-lookup"><span data-stu-id="3b9e7-112">To run Loopback</span></span>  

1.  <span data-ttu-id="3b9e7-113">打开命令提示符。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-113">Open a command prompt.</span></span>  

2.  <span data-ttu-id="3b9e7-114">将移动到\<*驱动器*\>\ Program Files (x86) \Microsoft BizTalk\<版本\>Accelerator for RosettaNet\SDK\\。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-114">Move to \<*drive*\>\ Program Files (x86)\Microsoft BizTalk \<version\> Accelerator for RosettaNet\SDK\\.</span></span>  

3.  <span data-ttu-id="3b9e7-115">在命令提示符处，键入**Loopback**，键入必需的和适当的开关，，然后按 ENTER。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-115">At the command prompt, type **Loopback**, type the required and appropriate switches, and then press ENTER.</span></span>  

## <a name="syntax-for-loopback"></a><span data-ttu-id="3b9e7-116">Loopback 的语法</span><span class="sxs-lookup"><span data-stu-id="3b9e7-116">Syntax for Loopback</span></span>  
 <span data-ttu-id="3b9e7-117">下面显示的语法，用于启动此命令行实用程序：</span><span class="sxs-lookup"><span data-stu-id="3b9e7-117">The following shows the syntax that you use to start this command-line utility:</span></span>  

```  
Loopback [/enable|/disable <home_organization>] [/mirror|/unmirror <agreement_name>] [/NoF <0A1_agreement>]  
```  

## <a name="syntax-description"></a><span data-ttu-id="3b9e7-118">语法说明</span><span class="sxs-lookup"><span data-stu-id="3b9e7-118">Syntax Description</span></span>  
 <span data-ttu-id="3b9e7-119">下表描述了 Loopback 实用工具使用的语法的每个部分。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-119">The following table describes each part of the syntax that the Loopback utility uses.</span></span>  

|<span data-ttu-id="3b9e7-120">**语法**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-120">**Syntax**</span></span>|<span data-ttu-id="3b9e7-121">**说明**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-121">**Description**</span></span>|  
|----------------|---------------------|  
|<span data-ttu-id="3b9e7-122">**enable**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-122">**enable**</span></span>|<span data-ttu-id="3b9e7-123">登记在 < home_organization > 中指定的发件人角色的组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-123">Enlists the organization designated in <home_organization> for a sender role.</span></span> <span data-ttu-id="3b9e7-124">它将创建两个发送端口，\<主页\>。异步和\<主页\>。同步合作伙伴用来返回到本组织进行通信。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-124">It creates two send ports, \<Home\>.Async and \<Home\>.Sync, that the partner uses to communicate back to the home organization.</span></span>|  
|<span data-ttu-id="3b9e7-125">**disable**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-125">**disable**</span></span>|<span data-ttu-id="3b9e7-126">取消登记发件人角色的本组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-126">Unenlists the home organization for a sender role.</span></span>|  
|<span data-ttu-id="3b9e7-127">**home_organization**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-127">**home_organization**</span></span>|<span data-ttu-id="3b9e7-128">要登记或取消登记发件人角色的伙伴。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-128">The partner to be enlisted or unenlisted for a sender role.</span></span>|  
|<span data-ttu-id="3b9e7-129">**mirror**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-129">**mirror**</span></span>|<span data-ttu-id="3b9e7-130">创建环回协议中指定的协议上基于\< **agreement_name**\>。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-130">Creates a loopback agreement based on the agreement designated in \<**agreement_name**\>.</span></span>|  
|<span data-ttu-id="3b9e7-131">**unmirror**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-131">**unmirror**</span></span>|<span data-ttu-id="3b9e7-132">删除环回协议中指定的协议上基于\< **agreement_name\>**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-132">Deletes the loopback agreement based on the agreement designated in \<**agreement_name\>**.</span></span>|  
|<span data-ttu-id="3b9e7-133">**agreement_name**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-133">**agreement_name**</span></span>|<span data-ttu-id="3b9e7-134">要镜像或取消环回方案中的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-134">The agreement to mirror or unmirror in the loopback scenario.</span></span>|  
|<span data-ttu-id="3b9e7-135">**NoF**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-135">**NoF**</span></span>|<span data-ttu-id="3b9e7-136">集**0A1 协议**属性的情况下为 Loopback 实用工具镜像的操作-消息协议\<0A1_agreement\>。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-136">Sets the **0A1 agreement** property of the action-message agreement mirrored by the Loopback utility to \<0A1_agreement\>.</span></span> <span data-ttu-id="3b9e7-137">一个 **/NoF**开关只能添加到还包含的 Loopback 命令 **/镜像**切换。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-137">A **/NoF** switch can only be added to a Loopback command that also contains a **/mirror** switch.</span></span>|  
|<span data-ttu-id="3b9e7-138">**0A1_agreement**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-138">**0A1_agreement**</span></span>|<span data-ttu-id="3b9e7-139">Agreement_name 的镜像协议使用 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-139">A 0A1 agreement to be used by the mirror agreement of agreement_name.</span></span> <span data-ttu-id="3b9e7-140">本协议生成通过镜像响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-140">This agreement is generated by mirroring a responder 0A1 agreement.</span></span>|  

## <a name="remarks"></a><span data-ttu-id="3b9e7-141">备注</span><span class="sxs-lookup"><span data-stu-id="3b9e7-141">Remarks</span></span>  
 <span data-ttu-id="3b9e7-142">Loopback 实用工具切换角色在创建环回协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-142">The Loopback utility switches the roles in creating the loopback agreement.</span></span> <span data-ttu-id="3b9e7-143">如果某组织在原始协议中是本组织，该实用程序可让合作伙伴组织环回协议中。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-143">If an organization was the home organization in the original agreement, the utility makes it the partner organization in the loopback agreement.</span></span> <span data-ttu-id="3b9e7-144">同样，如果某组织在原始协议中是合作伙伴组织，该实用程序可让本组织环回协议中。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-144">Similarly, if an organization was the partner organization in the original agreement, the utility makes it the home organization in the loopback agreement.</span></span> <span data-ttu-id="3b9e7-145">实用工具还会切换本组织角色属性的设置。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-145">The utility also switches the setting of the Home role property.</span></span> <span data-ttu-id="3b9e7-146">如果本组织角色属性是发起方在原始协议中，该实用工具会使它对响应方，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-146">If the Home role property was the initiator in the original agreement, the utility makes it the responder, and vice versa.</span></span> <span data-ttu-id="3b9e7-147">所有其他属性保持不变。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-147">All other properties remain the same.</span></span>  

 <span data-ttu-id="3b9e7-148">Loopback 实用工具名称与原始协议，前面有同名的环回协议"环回:"。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-148">The Loopback utility names the loopback agreement with the same name as the original agreement, preceded by "loopback:".</span></span> <span data-ttu-id="3b9e7-149">为避免混淆，不要命名"loopback"开头的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-149">To avoid confusion, do not name an agreement starting with "loopback".</span></span>  

 <span data-ttu-id="3b9e7-150">如果已为其生成环回协议的协议上运行该实用程序，该实用工具将取消镜像现有的环回协议，并创建新的环回协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-150">If you run the utility on an agreement for which you have already generated a loopback agreement, the utility unmirrors the existing loopback agreement, and creates a new loopback agreement.</span></span>  

 <span data-ttu-id="3b9e7-151">您需要的 Loopback 实用工具，因为无法创建镜像的协议内[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-151">You need the Loopback utility because you cannot create a mirrored agreement in the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console.</span></span> <span data-ttu-id="3b9e7-152">无法创建中的协议[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中为其本组织、 合作伙伴组织和本组织属性被颠倒，并将所有其他字段都与现有协议的字段相同。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-152">You cannot create an agreement in the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console for which the home organization, partner organization, and home role properties are reversed, and all other fields are identical to the fields of an existing agreement.</span></span> <span data-ttu-id="3b9e7-153">同样，[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]不支持更改环回协议直接在控制台中的。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-153">Similarly, [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] does not support changing the loopback agreement directly in the Console.</span></span> <span data-ttu-id="3b9e7-154">如果你尝试在控制台中打开环回协议，你将收到错误。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-154">You will receive an error if you try to open a loopback agreement in the Console.</span></span> <span data-ttu-id="3b9e7-155">如果必须对环回协议进行任何更改，更改起始协议，然后对其再次以重新生成环回协议运行 Loopback 实用工具。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-155">If you have to make any change to the loopback agreement, change the originating agreement and then run the Loopback utility on it again to regenerate the loopback agreement.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="3b9e7-156">环回方案不支持签名的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-156">The loopback scenario does not support signed agreements.</span></span> <span data-ttu-id="3b9e7-157">在此方案中，已签名的消息验证将失败，因为[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]可以只有一个参与方配置签名证书。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-157">In this scenario, a signed message will fail validation, because [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] lets you configure only one party with a signing certificate.</span></span> <span data-ttu-id="3b9e7-158">本组织和合作伙伴组织不能使用相同的签名证书。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-158">A home organization and a partner organization cannot use the same signing certificate.</span></span> <span data-ttu-id="3b9e7-159">这是中的限制[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]来唯一标识参与方使用签名证书。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-159">This is a limitation in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] related to uniquely identifying a party by using a signing certificate.</span></span> <span data-ttu-id="3b9e7-160">因此，没有两个 BizTalk 参与方可以共享相同的证书。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-160">Therefore, no two BizTalk parties can share the same certificate.</span></span>  

 <span data-ttu-id="3b9e7-161">有关环回实现的详细信息，请参阅[Loopback 教程](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md)。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-161">For more information about the loopback implementation, see [Loopback Tutorial](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md).</span></span>  

## <a name="using-loopback-with-0a1-agreements"></a><span data-ttu-id="3b9e7-162">使用 Loopback 与 0A1 协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-162">Using Loopback with 0A1 Agreements</span></span>  
 <span data-ttu-id="3b9e7-163">你可以配置生成 0A1 （失败通知） 消息的环回方案。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-163">You can configure a loopback scenario to generate 0A1 (failure notification) messages.</span></span> <span data-ttu-id="3b9e7-164">若要执行此操作，必须创建本组织的以下协议： 请求操作-消息协议、 发起方 0A1 协议和响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-164">To do this, you must create the following agreements for the home organization: a request action-message agreement, an initiator 0A1 agreement, and a responder 0A1 agreement.</span></span> <span data-ttu-id="3b9e7-165">然后必须对这些协议创建合作伙伴组织的以下协议运行 Loopback 实用工具： 响应操作-消息协议、 发起方 0A1 协议和响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-165">You must then run the Loopback utility on each of these agreements to create the following agreements for the partner organization: a response action-message agreement, an initiator 0A1 agreement, and a responder 0A1 agreement.</span></span> <span data-ttu-id="3b9e7-166">这是必需的因为不能使用[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台来创建这些协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-166">This is required because you cannot use the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console to create these agreements.</span></span>  

 <span data-ttu-id="3b9e7-167">完成组协议必须包括以下消息的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-167">The complete set of agreements must include agreements for the following messages.</span></span> <span data-ttu-id="3b9e7-168">图中，对于操作消息是 3A4:</span><span class="sxs-lookup"><span data-stu-id="3b9e7-168">For illustration, the action message is a 3A4:</span></span>  

-   <span data-ttu-id="3b9e7-169">Home_to_Partner_3A4 （操作消息） 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-169">A Home_to_Partner_3A4 (action message) agreement.</span></span> <span data-ttu-id="3b9e7-170">该协议启动的操作消息 PIP 从 HOME 组织到 PARTNER 组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-170">An agreement to initiate the action message PIP from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="3b9e7-171">Home_to_Partner_Initiator_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-171">Home_to_Partner_Initiator_0A1 agreement.</span></span> <span data-ttu-id="3b9e7-172">该协议启动从 HOME 组织到 PARTNER 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-172">An agreement to initiate a PIP 0A1 from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="3b9e7-173">Home_to_Partner_Responder_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-173">Home_to_Partner_Responder_0A1 agreement.</span></span> <span data-ttu-id="3b9e7-174">该协议接收从合作伙伴组织到 HOME 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-174">An agreement to receive a PIP 0A1 from the PARTNER organization to the HOME organization.</span></span>  

-   <span data-ttu-id="3b9e7-175">Loopback: home_to_partner_3a4 （响应消息） 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-175">Loopback:Home_to_Partner_3A4 (response message) agreement.</span></span> <span data-ttu-id="3b9e7-176">该协议接收从 HOME 组织到 PARTNER 组织的 PIP 3A4。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-176">An agreement to receive a PIP 3A4 from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="3b9e7-177">Loopback:Home_to_Partner_Responder_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-177">Loopback:Home_to_Partner_Responder_0A1 agreement.</span></span> <span data-ttu-id="3b9e7-178">该协议启动从 PARTNER 组织到 HOME 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-178">An agreement to initiate a PIP 0A1 from the PARTNER organization to the HOME organization.</span></span>  

-   <span data-ttu-id="3b9e7-179">Loopback:Home_to_Partner_Initiator_0A1.</span><span class="sxs-lookup"><span data-stu-id="3b9e7-179">Loopback:Home_to_Partner_Initiator_0A1.</span></span> <span data-ttu-id="3b9e7-180">该协议接收从 HOME 组织到 PARTNER 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-180">An agreement to receive a PIP 0A1 from the HOME organization to the PARTNER organization.</span></span>  

## <a name="creating-the-loopback-agreements-for-0a1-messages"></a><span data-ttu-id="3b9e7-181">创建 0A1 消息的 Loopback 协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-181">Creating the Loopback Agreements for 0A1 Messages</span></span>  
 <span data-ttu-id="3b9e7-182">若要创建一组完整的协议，必须使用 Loopback 实用工具创建合作伙伴上的操作-消息和 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-182">To create the full set of agreements, you must use the Loopback utility to create the action-message and 0A1 agreements on the partner.</span></span> <span data-ttu-id="3b9e7-183">下表显示了生成合作伙伴所需的 Loopback 操作环回协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-183">The following tables show the Loopback operations required to generate the partner loopback agreements.</span></span> <span data-ttu-id="3b9e7-184">为了进行说明，本主题的表中使用 3A4 消息。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-184">For illustration, this topic uses a 3A4 message in the tables.</span></span>  

|<span data-ttu-id="3b9e7-185">步骤</span><span class="sxs-lookup"><span data-stu-id="3b9e7-185">Step</span></span>|<span data-ttu-id="3b9e7-186">HOME 协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-186">HOME Agreements</span></span>|  
|----------|---------------------|  
|<span data-ttu-id="3b9e7-187">1, 4</span><span class="sxs-lookup"><span data-stu-id="3b9e7-187">1, 4</span></span>|<span data-ttu-id="3b9e7-188">Home_to_Partner_3A4</span><span class="sxs-lookup"><span data-stu-id="3b9e7-188">Home_to_Partner_3A4</span></span><br /><br /> <span data-ttu-id="3b9e7-189">本组织：Home</span><span class="sxs-lookup"><span data-stu-id="3b9e7-189">Home Org: HOME</span></span><br /><br /> <span data-ttu-id="3b9e7-190">合作伙伴组织：PARTNER</span><span class="sxs-lookup"><span data-stu-id="3b9e7-190">Partner Org: PARTNER</span></span><br /><br /> <span data-ttu-id="3b9e7-191">本组织角色：Initiator</span><span class="sxs-lookup"><span data-stu-id="3b9e7-191">Home Org Role: Initiator</span></span><br /><br /> <span data-ttu-id="3b9e7-192">0A1 协议：Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-192">0A1 agreement: Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-193">说明:启动从 HOME 到 PARTNER 的 PIP 3A4 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-193">Description: Agreement to initiate PIP 3A4 from HOME to PARTNER</span></span>|  
|<span data-ttu-id="3b9e7-194">2</span><span class="sxs-lookup"><span data-stu-id="3b9e7-194">2</span></span>|<span data-ttu-id="3b9e7-195">Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-195">Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-196">主页：主页</span><span class="sxs-lookup"><span data-stu-id="3b9e7-196">Home: Home</span></span><br /><br /> <span data-ttu-id="3b9e7-197">合作伙伴：Partner</span><span class="sxs-lookup"><span data-stu-id="3b9e7-197">Partner: Partner</span></span><br /><br /> <span data-ttu-id="3b9e7-198">角色：Initiator</span><span class="sxs-lookup"><span data-stu-id="3b9e7-198">Role: Initiator</span></span><br /><br /> <span data-ttu-id="3b9e7-199">说明:启动从 HOME 到 PARTNER 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-199">Description: Agreement to initiate PIP 0A1 from HOME to PARTNER</span></span>|  
|<span data-ttu-id="3b9e7-200">3</span><span class="sxs-lookup"><span data-stu-id="3b9e7-200">3</span></span>|<span data-ttu-id="3b9e7-201">Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-201">Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-202">主页：主页</span><span class="sxs-lookup"><span data-stu-id="3b9e7-202">Home: Home</span></span><br /><br /> <span data-ttu-id="3b9e7-203">合作伙伴：Partner</span><span class="sxs-lookup"><span data-stu-id="3b9e7-203">Partner: Partner</span></span><br /><br /> <span data-ttu-id="3b9e7-204">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="3b9e7-204">Role: Responder</span></span><br /><br /> <span data-ttu-id="3b9e7-205">说明:接收从 PARTNER 到 HOME 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-205">Description: Agreement to receive PIP 0A1 from PARTNER to HOME</span></span>|  

|<span data-ttu-id="3b9e7-206">步骤</span><span class="sxs-lookup"><span data-stu-id="3b9e7-206">Step</span></span>|<span data-ttu-id="3b9e7-207">合作伙伴协议 （使用 Loopback.exe 镜像）</span><span class="sxs-lookup"><span data-stu-id="3b9e7-207">PARTNER Agreements (Mirrored using Loopback.exe)</span></span>|  
|----------|--------------------------------------------------------|  
|<span data-ttu-id="3b9e7-208">7</span><span class="sxs-lookup"><span data-stu-id="3b9e7-208">7</span></span>|<span data-ttu-id="3b9e7-209">Loopback:Home_to_Partner_3A4</span><span class="sxs-lookup"><span data-stu-id="3b9e7-209">Loopback:Home_to_Partner_3A4</span></span><br /><br /> <span data-ttu-id="3b9e7-210">主页：Partner</span><span class="sxs-lookup"><span data-stu-id="3b9e7-210">Home: Partner</span></span><br /><br /> <span data-ttu-id="3b9e7-211">合作伙伴：主页</span><span class="sxs-lookup"><span data-stu-id="3b9e7-211">Partner: Home</span></span><br /><br /> <span data-ttu-id="3b9e7-212">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="3b9e7-212">Role: Responder</span></span><br /><br /> <span data-ttu-id="3b9e7-213">0A1 协议：Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-213">0A1 agreement: Loopback:Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-214">说明:接收从 HOME 到 PARTNER 的 PIP 3A4 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-214">Description: Agreement to receive PIP 3A4 from HOME to PARTNER</span></span><br /><br /> <span data-ttu-id="3b9e7-215">Loopback 命令创建它：Loopback /mirror Home_to_Partner_3A4 /NoF Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-215">Loopback Command to Create it: Loopback /mirror Home_to_Partner_3A4 /NoF Loopback:Home_to_Partner_Responder_0A1</span></span>|  
|<span data-ttu-id="3b9e7-216">5</span><span class="sxs-lookup"><span data-stu-id="3b9e7-216">5</span></span>|<span data-ttu-id="3b9e7-217">Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-217">Loopback:Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-218">主页：Partner</span><span class="sxs-lookup"><span data-stu-id="3b9e7-218">Home: Partner</span></span><br /><br /> <span data-ttu-id="3b9e7-219">合作伙伴：主页</span><span class="sxs-lookup"><span data-stu-id="3b9e7-219">Partner: Home</span></span><br /><br /> <span data-ttu-id="3b9e7-220">角色：Initiator</span><span class="sxs-lookup"><span data-stu-id="3b9e7-220">Role: Initiator</span></span><br /><br /> <span data-ttu-id="3b9e7-221">说明:启动从 PARTNER 到 HOME 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-221">Description: Agreement to initiate PIP 0A1 from PARTNER to HOME</span></span><br /><br /> <span data-ttu-id="3b9e7-222">Loopback 命令创建它：Loopback /mirror Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-222">Loopback Command to Create it: Loopback /mirror Home_to_Partner_Responder_0A1</span></span>|  
|<span data-ttu-id="3b9e7-223">6</span><span class="sxs-lookup"><span data-stu-id="3b9e7-223">6</span></span>|<span data-ttu-id="3b9e7-224">Loopback:Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-224">Loopback:Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="3b9e7-225">主页：Partner</span><span class="sxs-lookup"><span data-stu-id="3b9e7-225">Home: Partner</span></span><br /><br /> <span data-ttu-id="3b9e7-226">合作伙伴：主页</span><span class="sxs-lookup"><span data-stu-id="3b9e7-226">Partner: Home</span></span><br /><br /> <span data-ttu-id="3b9e7-227">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="3b9e7-227">Role: Responder</span></span><br /><br /> <span data-ttu-id="3b9e7-228">说明:接收从 HOME 到 PARTNER 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-228">Description: Agreement to receive PIP 0A1 from HOME to PARTNER</span></span><br /><br /> <span data-ttu-id="3b9e7-229">Loopback 命令创建它：Loopback /mirror Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="3b9e7-229">Loopback Command to Create it: Loopback /mirror Home_to_Partner_Initiator_0A1</span></span>|  

 <span data-ttu-id="3b9e7-230">以下过程在这些表中运行的 Loopback 命令。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-230">Run the Loopback commands in these tables as part of the following procedure.</span></span>  

#### <a name="to-create-the-agreements-for-a-loopback-scenario-using-0a1-messages"></a><span data-ttu-id="3b9e7-231">若要为使用 0A1 消息的环回方案创建协议</span><span class="sxs-lookup"><span data-stu-id="3b9e7-231">To create the agreements for a loopback scenario using 0A1 messages</span></span>  

1. <span data-ttu-id="3b9e7-232">在[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中，创建用于由本组织发送的请求操作消息的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-232">In the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, create an agreement for the request action message to be sent by the home organization.</span></span>  

2. <span data-ttu-id="3b9e7-233">创建用于由本组织发送的发起方 0A1 消息的协议，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="3b9e7-233">Create an agreement for the initiator 0A1 message to be sent by the home organization, and do the following:</span></span>  


   |         <span data-ttu-id="3b9e7-234">使用此选项</span><span class="sxs-lookup"><span data-stu-id="3b9e7-234">Use this</span></span>         |                  <span data-ttu-id="3b9e7-235">执行的操作</span><span class="sxs-lookup"><span data-stu-id="3b9e7-235">To do this</span></span>                  |
   |--------------------------|----------------------------------------------|
   |   <span data-ttu-id="3b9e7-236">**我的组织**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-236">**My organization**</span></span>    |        <span data-ttu-id="3b9e7-237">将设置为本组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-237">Set to the home organization.</span></span>         |
   | <span data-ttu-id="3b9e7-238">**合作伙伴组织**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-238">**Partner organization**</span></span> |             <span data-ttu-id="3b9e7-239">设置为合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-239">Set to the partner.</span></span>              |
   |      <span data-ttu-id="3b9e7-240">**本组织角色**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-240">**Home role**</span></span>       | <span data-ttu-id="3b9e7-241">设置为**PIP 失败通知方 （发起方）**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-241">Set to **PIP Failure Notifier (Initiator)**.</span></span> |


3. <span data-ttu-id="3b9e7-242">使用[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中，创建一个协议响应方 0A1 消息发送到本组织，并执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="3b9e7-242">Using [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, create an agreement for the responder 0A1 message to be sent to the home organization, and do the following:</span></span>  


   |         <span data-ttu-id="3b9e7-243">使用此选项</span><span class="sxs-lookup"><span data-stu-id="3b9e7-243">Use this</span></span>         |                      <span data-ttu-id="3b9e7-244">执行的操作</span><span class="sxs-lookup"><span data-stu-id="3b9e7-244">To do this</span></span>                      |
   |--------------------------|------------------------------------------------------|
   |   <span data-ttu-id="3b9e7-245">**我的组织**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-245">**My organization**</span></span>    |            <span data-ttu-id="3b9e7-246">将设置为本组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-246">Set to the home organization.</span></span>             |
   | <span data-ttu-id="3b9e7-247">**合作伙伴组织**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-247">**Partner organization**</span></span> |                 <span data-ttu-id="3b9e7-248">设置为合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-248">Set to the partner.</span></span>                  |
   |      <span data-ttu-id="3b9e7-249">**本组织角色**</span><span class="sxs-lookup"><span data-stu-id="3b9e7-249">**Home role**</span></span>       | <span data-ttu-id="3b9e7-250">设置为**失败报告管理员 （响应方）**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-250">Set to **Failure Report Administrator (Responder)**.</span></span> |


4. <span data-ttu-id="3b9e7-251">使用[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中，设置**0A1 协议**本组织的请求操作-消息协议的名称的本组织的发起方 0A1 协议属性。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-251">Using [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, set the **0A1 agreement** property for the home organization's request action-message agreement to the name of the initiator 0A1 agreement for the home organization.</span></span>  

5. <span data-ttu-id="3b9e7-252">使用 Loopback 实用工具创建一个用于由合作伙伴组织发送的发起方 0A1 消息的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-252">Using the Loopback utility, create an agreement for the initiator 0A1 message to be sent by the partner organization.</span></span> <span data-ttu-id="3b9e7-253">执行此操作通过镜像响应方 0A1 协议为本组织。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-253">You do this by mirroring the responder 0A1 agreement for the home organization.</span></span> <span data-ttu-id="3b9e7-254">这将创建同名的新 0A1 协议**环回：\<0A1 协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-254">This creates a new 0A1 agreement with the name **loopback:\<0A1 agreement name\>**.</span></span> <span data-ttu-id="3b9e7-255">`My organization`属性设置为合作伙伴`Partner organization`属性设置为本组织，并`Home role`属性是**PIP 失败通知方 （发起方）**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-255">The `My organization` property is set to the partner, the `Partner organization` property is set to the home organization, and the `Home role` property is **PIP Failure Notifier (Initiator)**.</span></span>  

6. <span data-ttu-id="3b9e7-256">使用 Loopback 实用工具创建合作伙伴组织的响应方 0A1 消息的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-256">Using the Loopback utility, create an agreement for the responder 0A1 message for the partner organization.</span></span> <span data-ttu-id="3b9e7-257">执行此操作，需要镜像本组织的 0A1 发起方协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-257">You do this by mirroring the 0A1 initiator agreement for the home organization.</span></span> <span data-ttu-id="3b9e7-258">这将创建同名的新 0A1 协议**环回：\<0A1 协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-258">This creates a new 0A1 agreement with the name **loopback:\<0A1 agreement name\>**.</span></span> <span data-ttu-id="3b9e7-259">`My organization`属性设置为合作伙伴`Partner organization`属性设置为本组织，并`Home role`属性是**失败报告管理员 （响应方）**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-259">The `My organization` property is set to the partner, the `Partner organization` property is set to the home organization, and the `Home role` property is **Failure Report Administrator (Responder)**.</span></span>  

7. <span data-ttu-id="3b9e7-260">使用 Loopback 实用工具创建合作伙伴组织的响应操作消息的协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-260">Using the Loopback utility, create an agreement for the response action message for the partner organization.</span></span> <span data-ttu-id="3b9e7-261">在同一命令中，你必须设置为合作伙伴的响应方 0A1 协议的 0A1 协议属性。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-261">In the same command, you must set the 0A1 agreement property to the responder 0A1 agreement for the partner.</span></span> <span data-ttu-id="3b9e7-262">执行此操作通过镜像本组织的请求操作-消息协议，并使用 **/NoF**开关与合作伙伴的响应方 0A1 协议的名称。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-262">You do this by mirroring the request action-message agreement for the home organization, and using the **/NoF** switch with the name of the partner's responder 0A1 agreement.</span></span> <span data-ttu-id="3b9e7-263">这将创建新的响应操作-消息协议同名**Loopback:\<协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-263">This creates a new response action-message agreement with the name **Loopback:\<agreement name\>**.</span></span> <span data-ttu-id="3b9e7-264">`My organization`属性设置为合作伙伴，0A1 协议属性设置为合作伙伴的响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="3b9e7-264">The `My organization` property is set to the partner, and the 0A1 agreement property is set to the partner's responder 0A1 agreement.</span></span>  

## <a name="see-also"></a><span data-ttu-id="3b9e7-265">请参阅</span><span class="sxs-lookup"><span data-stu-id="3b9e7-265">See Also</span></span>  
 <span data-ttu-id="3b9e7-266">[实用程序](../../adapters-and-accelerators/accelerator-rosettanet/utilities1.md) </span><span class="sxs-lookup"><span data-stu-id="3b9e7-266">[Utilities](../../adapters-and-accelerators/accelerator-rosettanet/utilities1.md) </span></span>  
 [<span data-ttu-id="3b9e7-267">Loopback 教程</span><span class="sxs-lookup"><span data-stu-id="3b9e7-267">Loopback Tutorial</span></span>](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md)
