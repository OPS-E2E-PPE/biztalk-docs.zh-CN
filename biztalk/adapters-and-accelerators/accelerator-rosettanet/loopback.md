---
title: Loopback |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- agreements, 0A1 agreements
- loopbacks, running
- loopbacks, 0A1 agreements
- loopbacks, about loopbacks
- loopbacks, 0A1 messages
- agreements, loopback agreements
- messages, 0A1 messages
- loopbacks
- Loopback utility
- loopbacks, syntax
- 0A1 messages
- loopbacks, Loopback utility
- syntax [loopbacks]
- agreements, Loopback utility
ms.assetid: b4ebbdac-05be-4dfc-a133-6b752994e85a
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 656441fe65e840302928e90ea22e21327fee33cd
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36978046"
---
# <a name="loopback"></a><span data-ttu-id="6b31a-102">Loopback</span><span class="sxs-lookup"><span data-stu-id="6b31a-102">Loopback</span></span>
<span data-ttu-id="6b31a-103">使用 Loopback 实用工具可以自动生成环回协议，它是本组织到合作伙伴协议的镜像副本。</span><span class="sxs-lookup"><span data-stu-id="6b31a-103">You use the Loopback utility to automatically generate a loopback agreement that is a mirror copy of a home-to-partner agreement.</span></span> <span data-ttu-id="6b31a-104">这使你能够在单个计算机上执行本组织到合作伙伴以及合作伙伴到本组织的消息交换。</span><span class="sxs-lookup"><span data-stu-id="6b31a-104">This lets you perform home-to-partner and partner-to-home message exchanges on a single computer.</span></span> <span data-ttu-id="6b31a-105">此实用工具可以用于带有 0A1 消息的方案，也可以用于不带 0A1 消息的方案。</span><span class="sxs-lookup"><span data-stu-id="6b31a-105">You can use this utility for a scenario with 0A1 messages or a scenario without 0A1 messages.</span></span> <span data-ttu-id="6b31a-106">你可以为操作-消息（非 0A1）协议或 0A1 协议创建环回协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-106">You can create a loopback agreement for an action-message (non-0A1) agreement or a 0A1 agreement.</span></span>  

 <span data-ttu-id="6b31a-107">使用该实用工具还可以登记或取消登记发件人角色的本组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-107">You can also use the utility to enlist or unenlist a home organization for a sender role.</span></span> <span data-ttu-id="6b31a-108">当你使用该实用工具启用本组织时，它将创建两个发送端口，\<家庭\>。异步和\<主页\>。同步组织用来与其合作伙伴进行通信。</span><span class="sxs-lookup"><span data-stu-id="6b31a-108">When you use the utility to enable a home organization, it creates two send ports, \<Home\>.Async and \<Home\>.Sync, that the organization uses to communicate with their partner.</span></span>  

## <a name="location-in-sdk"></a><span data-ttu-id="6b31a-109">在 SDK 中的位置</span><span class="sxs-lookup"><span data-stu-id="6b31a-109">Location in SDK</span></span>  
 <span data-ttu-id="6b31a-110">\<*驱动器*\>\ Program Files (x86) \Microsoft BizTalk\<版本\>Accelerator for RosettaNet\SDK\\</span><span class="sxs-lookup"><span data-stu-id="6b31a-110">\<*drive*\>\ Program Files (x86)\Microsoft BizTalk \<version\> Accelerator for RosettaNet\SDK\\</span></span>  

## <a name="running-loopback"></a><span data-ttu-id="6b31a-111">运行 Loopback</span><span class="sxs-lookup"><span data-stu-id="6b31a-111">Running Loopback</span></span>  

#### <a name="to-run-loopback"></a><span data-ttu-id="6b31a-112">运行 Loopback</span><span class="sxs-lookup"><span data-stu-id="6b31a-112">To run Loopback</span></span>  

1.  <span data-ttu-id="6b31a-113">打开命令提示符。</span><span class="sxs-lookup"><span data-stu-id="6b31a-113">Open a command prompt.</span></span>  

2.  <span data-ttu-id="6b31a-114">将移动到\<*驱动器*\>\ Program Files (x86) \Microsoft BizTalk\<版本\>Accelerator for RosettaNet\SDK\\。</span><span class="sxs-lookup"><span data-stu-id="6b31a-114">Move to \<*drive*\>\ Program Files (x86)\Microsoft BizTalk \<version\> Accelerator for RosettaNet\SDK\\.</span></span>  

3.  <span data-ttu-id="6b31a-115">在命令提示符处，键入**Loopback**，键入必需的和适当的开关，，然后按 ENTER。</span><span class="sxs-lookup"><span data-stu-id="6b31a-115">At the command prompt, type **Loopback**, type the required and appropriate switches, and then press ENTER.</span></span>  

## <a name="syntax-for-loopback"></a><span data-ttu-id="6b31a-116">Loopback 的语法</span><span class="sxs-lookup"><span data-stu-id="6b31a-116">Syntax for Loopback</span></span>  
 <span data-ttu-id="6b31a-117">下面给出了用于启动此命令行实用工具的语法：</span><span class="sxs-lookup"><span data-stu-id="6b31a-117">The following shows the syntax that you use to start this command-line utility:</span></span>  

```  
Loopback [/enable|/disable <home_organization>] [/mirror|/unmirror <agreement_name>] [/NoF <0A1_agreement>]  
```  

## <a name="syntax-description"></a><span data-ttu-id="6b31a-118">语法说明</span><span class="sxs-lookup"><span data-stu-id="6b31a-118">Syntax Description</span></span>  
 <span data-ttu-id="6b31a-119">下表描述了 Loopback 实用工具使用的语法的各个部分。</span><span class="sxs-lookup"><span data-stu-id="6b31a-119">The following table describes each part of the syntax that the Loopback utility uses.</span></span>  

|<span data-ttu-id="6b31a-120">**语法**</span><span class="sxs-lookup"><span data-stu-id="6b31a-120">**Syntax**</span></span>|<span data-ttu-id="6b31a-121">**Description**</span><span class="sxs-lookup"><span data-stu-id="6b31a-121">**Description**</span></span>|  
|----------------|---------------------|  
|<span data-ttu-id="6b31a-122">**enable**</span><span class="sxs-lookup"><span data-stu-id="6b31a-122">**enable**</span></span>|<span data-ttu-id="6b31a-123">登记在 < home_organization > 中指定的发件人角色的组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-123">Enlists the organization designated in <home_organization> for a sender role.</span></span> <span data-ttu-id="6b31a-124">它将创建两个发送端口，\<主页\>。异步和\<主页\>。同步合作伙伴用来返回到本组织进行通信。</span><span class="sxs-lookup"><span data-stu-id="6b31a-124">It creates two send ports, \<Home\>.Async and \<Home\>.Sync, that the partner uses to communicate back to the home organization.</span></span>|  
|<span data-ttu-id="6b31a-125">**disable**</span><span class="sxs-lookup"><span data-stu-id="6b31a-125">**disable**</span></span>|<span data-ttu-id="6b31a-126">取消登记发件人角色的本组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-126">Unenlists the home organization for a sender role.</span></span>|  
|<span data-ttu-id="6b31a-127">**home_organization**</span><span class="sxs-lookup"><span data-stu-id="6b31a-127">**home_organization**</span></span>|<span data-ttu-id="6b31a-128">要登记或取消登记的发件人角色的合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="6b31a-128">The partner to be enlisted or unenlisted for a sender role.</span></span>|  
|<span data-ttu-id="6b31a-129">**mirror**</span><span class="sxs-lookup"><span data-stu-id="6b31a-129">**mirror**</span></span>|<span data-ttu-id="6b31a-130">创建环回协议中指定的协议上基于\< **agreement_name**\>。</span><span class="sxs-lookup"><span data-stu-id="6b31a-130">Creates a loopback agreement based on the agreement designated in \<**agreement_name**\>.</span></span>|  
|<span data-ttu-id="6b31a-131">**取消**</span><span class="sxs-lookup"><span data-stu-id="6b31a-131">**unmirror**</span></span>|<span data-ttu-id="6b31a-132">删除环回协议中指定的协议上基于\< **agreement_name\>**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-132">Deletes the loopback agreement based on the agreement designated in \<**agreement_name\>**.</span></span>|  
|<span data-ttu-id="6b31a-133">**agreement_name**</span><span class="sxs-lookup"><span data-stu-id="6b31a-133">**agreement_name**</span></span>|<span data-ttu-id="6b31a-134">在环回方案中要镜像或取消镜像的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-134">The agreement to mirror or unmirror in the loopback scenario.</span></span>|  
|<span data-ttu-id="6b31a-135">**NoF**</span><span class="sxs-lookup"><span data-stu-id="6b31a-135">**NoF**</span></span>|<span data-ttu-id="6b31a-136">集**0A1 协议**属性的情况下为 Loopback 实用工具镜像的操作-消息协议\<0A1_agreement\>。</span><span class="sxs-lookup"><span data-stu-id="6b31a-136">Sets the **0A1 agreement** property of the action-message agreement mirrored by the Loopback utility to \<0A1_agreement\>.</span></span> <span data-ttu-id="6b31a-137">一个 **/NoF**开关只能添加到还包含的 Loopback 命令 **/镜像**切换。</span><span class="sxs-lookup"><span data-stu-id="6b31a-137">A **/NoF** switch can only be added to a Loopback command that also contains a **/mirror** switch.</span></span>|  
|<span data-ttu-id="6b31a-138">**0A1_agreement**</span><span class="sxs-lookup"><span data-stu-id="6b31a-138">**0A1_agreement**</span></span>|<span data-ttu-id="6b31a-139">agreement_name 的镜像协议使用的 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-139">A 0A1 agreement to be used by the mirror agreement of agreement_name.</span></span> <span data-ttu-id="6b31a-140">此协议是通过镜像响应方 0A1 协议而生成的。</span><span class="sxs-lookup"><span data-stu-id="6b31a-140">This agreement is generated by mirroring a responder 0A1 agreement.</span></span>|  

## <a name="remarks"></a><span data-ttu-id="6b31a-141">Remarks</span><span class="sxs-lookup"><span data-stu-id="6b31a-141">Remarks</span></span>  
 <span data-ttu-id="6b31a-142">Loopback 实用工具在创建环回协议时切换角色。</span><span class="sxs-lookup"><span data-stu-id="6b31a-142">The Loopback utility switches the roles in creating the loopback agreement.</span></span> <span data-ttu-id="6b31a-143">如果某组织在原始协议中是本组织，则该实用工具会使其成为环回协议中的合作伙伴组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-143">If an organization was the home organization in the original agreement, the utility makes it the partner organization in the loopback agreement.</span></span> <span data-ttu-id="6b31a-144">同样，如果某组织在原始协议中是合作伙伴组织，则该实用工具会使其成为环回协议中的本组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-144">Similarly, if an organization was the partner organization in the original agreement, the utility makes it the home organization in the loopback agreement.</span></span> <span data-ttu-id="6b31a-145">该实用工具还会切换本组织角色的属性设置。</span><span class="sxs-lookup"><span data-stu-id="6b31a-145">The utility also switches the setting of the Home role property.</span></span> <span data-ttu-id="6b31a-146">如果在原始协议中本组织角色属性是发起方，则该实用工具会将其更改为响应方，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="6b31a-146">If the Home role property was the initiator in the original agreement, the utility makes it the responder, and vice versa.</span></span> <span data-ttu-id="6b31a-147">而所有其他属性保持不变。</span><span class="sxs-lookup"><span data-stu-id="6b31a-147">All other properties remain the same.</span></span>  

 <span data-ttu-id="6b31a-148">Loopback 实用工具将环回协议的名称命名为与原始协议相同，只是在前面加上“loopback:”。</span><span class="sxs-lookup"><span data-stu-id="6b31a-148">The Loopback utility names the loopback agreement with the same name as the original agreement, preceded by "loopback:".</span></span> <span data-ttu-id="6b31a-149">为避免混淆，请不要将协议命名为以“loopback”开头。</span><span class="sxs-lookup"><span data-stu-id="6b31a-149">To avoid confusion, do not name an agreement starting with "loopback".</span></span>  

 <span data-ttu-id="6b31a-150">如果针对已经生成环回协议的协议运行该实用工具，则该实用工具将取消镜像现有的环回协议，然后创建新的环回协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-150">If you run the utility on an agreement for which you have already generated a loopback agreement, the utility unmirrors the existing loopback agreement, and creates a new loopback agreement.</span></span>  

 <span data-ttu-id="6b31a-151">由于在 [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] 管理控制台中无法创建镜像协议，所以需要使用 Loopback 实用工具。</span><span class="sxs-lookup"><span data-stu-id="6b31a-151">You need the Loopback utility because you cannot create a mirrored agreement in the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console.</span></span> <span data-ttu-id="6b31a-152">无法创建中的协议[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中为其本组织、 合作伙伴组织和本组织属性被颠倒，并将所有其他字段都与现有协议的字段相同。</span><span class="sxs-lookup"><span data-stu-id="6b31a-152">You cannot create an agreement in the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console for which the home organization, partner organization, and home role properties are reversed, and all other fields are identical to the fields of an existing agreement.</span></span> <span data-ttu-id="6b31a-153">同样，[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]不支持更改环回协议直接在控制台中的。</span><span class="sxs-lookup"><span data-stu-id="6b31a-153">Similarly, [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] does not support changing the loopback agreement directly in the Console.</span></span> <span data-ttu-id="6b31a-154">如果尝试在控制台中打开环回协议，你将收到一条错误消息。</span><span class="sxs-lookup"><span data-stu-id="6b31a-154">You will receive an error if you try to open a loopback agreement in the Console.</span></span> <span data-ttu-id="6b31a-155">如果必须更改环回协议，请先更改起始协议，然后对该协议再次运行 Loopback 实用工具，以重新生成该环回协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-155">If you have to make any change to the loopback agreement, change the originating agreement and then run the Loopback utility on it again to regenerate the loopback agreement.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="6b31a-156">该环回方案不支持签名协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-156">The loopback scenario does not support signed agreements.</span></span> <span data-ttu-id="6b31a-157">在此环回方案中，签名消息将验证失败，这是因为 [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] 只允许配置一个带有签名证书的参与方。</span><span class="sxs-lookup"><span data-stu-id="6b31a-157">In this scenario, a signed message will fail validation, because [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] lets you configure only one party with a signing certificate.</span></span> <span data-ttu-id="6b31a-158">本组织和合作伙伴组织不能使用相同的签名证书。</span><span class="sxs-lookup"><span data-stu-id="6b31a-158">A home organization and a partner organization cannot use the same signing certificate.</span></span> <span data-ttu-id="6b31a-159">[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] 中的这个限制条件是为了能够通过使用签名证书来唯一标识一个参与方。</span><span class="sxs-lookup"><span data-stu-id="6b31a-159">This is a limitation in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] related to uniquely identifying a party by using a signing certificate.</span></span> <span data-ttu-id="6b31a-160">因此，两个 BizTalk 参与方不能共享相同的证书。</span><span class="sxs-lookup"><span data-stu-id="6b31a-160">Therefore, no two BizTalk parties can share the same certificate.</span></span>  

 <span data-ttu-id="6b31a-161">有关环回实现的详细信息，请参阅[Loopback 教程](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md)。</span><span class="sxs-lookup"><span data-stu-id="6b31a-161">For more information about the loopback implementation, see [Loopback Tutorial](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md).</span></span>  

## <a name="using-loopback-with-0a1-agreements"></a><span data-ttu-id="6b31a-162">将 Loopback 与 0A1 协议一起使用</span><span class="sxs-lookup"><span data-stu-id="6b31a-162">Using Loopback with 0A1 Agreements</span></span>  
 <span data-ttu-id="6b31a-163">你可以配置一个生成 0A1（失败通知）消息的环回方案。</span><span class="sxs-lookup"><span data-stu-id="6b31a-163">You can configure a loopback scenario to generate 0A1 (failure notification) messages.</span></span> <span data-ttu-id="6b31a-164">为此，必须为本组织创建以下协议：请求操作-消息协议、发起方 0A1 协议和响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-164">To do this, you must create the following agreements for the home organization: a request action-message agreement, an initiator 0A1 agreement, and a responder 0A1 agreement.</span></span> <span data-ttu-id="6b31a-165">然后必须对这些协议运行 Loopback 实用工具以为合作伙伴组织创建以下协议：请求操作-消息协议、发起方 0A1 协议和响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-165">You must then run the Loopback utility on each of these agreements to create the following agreements for the partner organization: a response action-message agreement, an initiator 0A1 agreement, and a responder 0A1 agreement.</span></span> <span data-ttu-id="6b31a-166">这一步是必需的，因为不能使用 [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] 管理控制台来创建这些协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-166">This is required because you cannot use the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console to create these agreements.</span></span>  

 <span data-ttu-id="6b31a-167">完整的一组协议必须包括用于以下消息的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-167">The complete set of agreements must include agreements for the following messages.</span></span> <span data-ttu-id="6b31a-168">例如，如果操作消息是 3A4，则应包括以下协议：</span><span class="sxs-lookup"><span data-stu-id="6b31a-168">For illustration, the action message is a 3A4:</span></span>  

-   <span data-ttu-id="6b31a-169">Home_to_Partner_3A4（操作消息）协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-169">A Home_to_Partner_3A4 (action message) agreement.</span></span> <span data-ttu-id="6b31a-170">该协议启动从 HOME 组织到 PARTNER 组织的操作消息 PIP。</span><span class="sxs-lookup"><span data-stu-id="6b31a-170">An agreement to initiate the action message PIP from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="6b31a-171">Home_to_Partner_Initiator_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-171">Home_to_Partner_Initiator_0A1 agreement.</span></span> <span data-ttu-id="6b31a-172">该协议启动从 HOME 组织到 PARTNER 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="6b31a-172">An agreement to initiate a PIP 0A1 from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="6b31a-173">Home_to_Partner_Responder_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-173">Home_to_Partner_Responder_0A1 agreement.</span></span> <span data-ttu-id="6b31a-174">该协议接收从 PARTNER 组织到 HOME 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="6b31a-174">An agreement to receive a PIP 0A1 from the PARTNER organization to the HOME organization.</span></span>  

-   <span data-ttu-id="6b31a-175">Loopback:Home_to_Partner_3A4（响应消息）协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-175">Loopback:Home_to_Partner_3A4 (response message) agreement.</span></span> <span data-ttu-id="6b31a-176">该协议接收从 HOME 组织到 PARTNER 组织的 PIP 3A4。</span><span class="sxs-lookup"><span data-stu-id="6b31a-176">An agreement to receive a PIP 3A4 from the HOME organization to the PARTNER organization.</span></span>  

-   <span data-ttu-id="6b31a-177">Loopback:Home_to_Partner_Responder_0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-177">Loopback:Home_to_Partner_Responder_0A1 agreement.</span></span> <span data-ttu-id="6b31a-178">该协议启动从 PARTNER 组织到 HOME 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="6b31a-178">An agreement to initiate a PIP 0A1 from the PARTNER organization to the HOME organization.</span></span>  

-   <span data-ttu-id="6b31a-179">Loopback:Home_to_Partner_Initiator_0A1。</span><span class="sxs-lookup"><span data-stu-id="6b31a-179">Loopback:Home_to_Partner_Initiator_0A1.</span></span> <span data-ttu-id="6b31a-180">该协议接收从 HOME 组织到 PARTNER 组织的 PIP 0A1。</span><span class="sxs-lookup"><span data-stu-id="6b31a-180">An agreement to receive a PIP 0A1 from the HOME organization to the PARTNER organization.</span></span>  

## <a name="creating-the-loopback-agreements-for-0a1-messages"></a><span data-ttu-id="6b31a-181">创建 0A1 消息的环回协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-181">Creating the Loopback Agreements for 0A1 Messages</span></span>  
 <span data-ttu-id="6b31a-182">若要创建一组完整的协议，必须使用 Loopback 实用工具来创建合作伙伴的操作-消息协议和 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-182">To create the full set of agreements, you must use the Loopback utility to create the action-message and 0A1 agreements on the partner.</span></span> <span data-ttu-id="6b31a-183">下面的表给出了生成合作伙伴环回协议所需的 Loopback 操作。</span><span class="sxs-lookup"><span data-stu-id="6b31a-183">The following tables show the Loopback operations required to generate the partner loopback agreements.</span></span> <span data-ttu-id="6b31a-184">本主题在下面的表中使用 3A4 消息作为示例。</span><span class="sxs-lookup"><span data-stu-id="6b31a-184">For illustration, this topic uses a 3A4 message in the tables.</span></span>  

|<span data-ttu-id="6b31a-185">步骤</span><span class="sxs-lookup"><span data-stu-id="6b31a-185">Step</span></span>|<span data-ttu-id="6b31a-186">HOME 协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-186">HOME Agreements</span></span>|  
|----------|---------------------|  
|<span data-ttu-id="6b31a-187">1, 4</span><span class="sxs-lookup"><span data-stu-id="6b31a-187">1, 4</span></span>|<span data-ttu-id="6b31a-188">Home_to_Partner_3A4</span><span class="sxs-lookup"><span data-stu-id="6b31a-188">Home_to_Partner_3A4</span></span><br /><br /> <span data-ttu-id="6b31a-189">本组织：HOME</span><span class="sxs-lookup"><span data-stu-id="6b31a-189">Home Org: HOME</span></span><br /><br /> <span data-ttu-id="6b31a-190">合作伙伴组织：PARTNER</span><span class="sxs-lookup"><span data-stu-id="6b31a-190">Partner Org: PARTNER</span></span><br /><br /> <span data-ttu-id="6b31a-191">本组织角色：发起方</span><span class="sxs-lookup"><span data-stu-id="6b31a-191">Home Org Role: Initiator</span></span><br /><br /> <span data-ttu-id="6b31a-192">0A1 协议：Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-192">0A1 agreement: Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-193">说明：启动从 HOME 到 PARTNER 的 PIP 3A4 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-193">Description: Agreement to initiate PIP 3A4 from HOME to PARTNER</span></span>|  
|<span data-ttu-id="6b31a-194">2</span><span class="sxs-lookup"><span data-stu-id="6b31a-194">2</span></span>|<span data-ttu-id="6b31a-195">Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-195">Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-196">本方：Home</span><span class="sxs-lookup"><span data-stu-id="6b31a-196">Home: Home</span></span><br /><br /> <span data-ttu-id="6b31a-197">合作伙伴：Partner</span><span class="sxs-lookup"><span data-stu-id="6b31a-197">Partner: Partner</span></span><br /><br /> <span data-ttu-id="6b31a-198">角色：发起方</span><span class="sxs-lookup"><span data-stu-id="6b31a-198">Role: Initiator</span></span><br /><br /> <span data-ttu-id="6b31a-199">说明：启动从 HOME 到 PARTNER 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-199">Description: Agreement to initiate PIP 0A1 from HOME to PARTNER</span></span>|  
|<span data-ttu-id="6b31a-200">3</span><span class="sxs-lookup"><span data-stu-id="6b31a-200">3</span></span>|<span data-ttu-id="6b31a-201">Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-201">Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-202">本方：Home</span><span class="sxs-lookup"><span data-stu-id="6b31a-202">Home: Home</span></span><br /><br /> <span data-ttu-id="6b31a-203">合作伙伴：Partner</span><span class="sxs-lookup"><span data-stu-id="6b31a-203">Partner: Partner</span></span><br /><br /> <span data-ttu-id="6b31a-204">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="6b31a-204">Role: Responder</span></span><br /><br /> <span data-ttu-id="6b31a-205">说明：接收从 PARTNER 到 HOME 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-205">Description: Agreement to receive PIP 0A1 from PARTNER to HOME</span></span>|  

|<span data-ttu-id="6b31a-206">步骤</span><span class="sxs-lookup"><span data-stu-id="6b31a-206">Step</span></span>|<span data-ttu-id="6b31a-207">PARTNER 协议（使用 Loopback.exe 镜像的协议）</span><span class="sxs-lookup"><span data-stu-id="6b31a-207">PARTNER Agreements (Mirrored using Loopback.exe)</span></span>|  
|----------|--------------------------------------------------------|  
|<span data-ttu-id="6b31a-208">7</span><span class="sxs-lookup"><span data-stu-id="6b31a-208">7</span></span>|<span data-ttu-id="6b31a-209">Loopback:Home_to_Partner_3A4</span><span class="sxs-lookup"><span data-stu-id="6b31a-209">Loopback:Home_to_Partner_3A4</span></span><br /><br /> <span data-ttu-id="6b31a-210">本方：Partner</span><span class="sxs-lookup"><span data-stu-id="6b31a-210">Home: Partner</span></span><br /><br /> <span data-ttu-id="6b31a-211">合作伙伴：Home</span><span class="sxs-lookup"><span data-stu-id="6b31a-211">Partner: Home</span></span><br /><br /> <span data-ttu-id="6b31a-212">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="6b31a-212">Role: Responder</span></span><br /><br /> <span data-ttu-id="6b31a-213">0A1 协议：Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-213">0A1 agreement: Loopback:Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-214">说明：接收从 HOME 到 PARTNER 的 PIP 3A4 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-214">Description: Agreement to receive PIP 3A4 from HOME to PARTNER</span></span><br /><br /> <span data-ttu-id="6b31a-215">创建它的 Loopback 命令：Loopback /mirror Home_to_Partner_3A4 /NoF Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-215">Loopback Command to Create it: Loopback /mirror Home_to_Partner_3A4 /NoF Loopback:Home_to_Partner_Responder_0A1</span></span>|  
|<span data-ttu-id="6b31a-216">5</span><span class="sxs-lookup"><span data-stu-id="6b31a-216">5</span></span>|<span data-ttu-id="6b31a-217">Loopback:Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-217">Loopback:Home_to_Partner_Responder_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-218">本方：Partner</span><span class="sxs-lookup"><span data-stu-id="6b31a-218">Home: Partner</span></span><br /><br /> <span data-ttu-id="6b31a-219">合作伙伴：Home</span><span class="sxs-lookup"><span data-stu-id="6b31a-219">Partner: Home</span></span><br /><br /> <span data-ttu-id="6b31a-220">角色：发起方</span><span class="sxs-lookup"><span data-stu-id="6b31a-220">Role: Initiator</span></span><br /><br /> <span data-ttu-id="6b31a-221">说明：启动从 PARTNER 到 HOME 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-221">Description: Agreement to initiate PIP 0A1 from PARTNER to HOME</span></span><br /><br /> <span data-ttu-id="6b31a-222">创建它的 Loopback 命令：Loopback /mirror Home_to_Partner_Responder_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-222">Loopback Command to Create it: Loopback /mirror Home_to_Partner_Responder_0A1</span></span>|  
|<span data-ttu-id="6b31a-223">6</span><span class="sxs-lookup"><span data-stu-id="6b31a-223">6</span></span>|<span data-ttu-id="6b31a-224">Loopback:Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-224">Loopback:Home_to_Partner_Initiator_0A1</span></span><br /><br /> <span data-ttu-id="6b31a-225">本方：Partner</span><span class="sxs-lookup"><span data-stu-id="6b31a-225">Home: Partner</span></span><br /><br /> <span data-ttu-id="6b31a-226">合作伙伴：Home</span><span class="sxs-lookup"><span data-stu-id="6b31a-226">Partner: Home</span></span><br /><br /> <span data-ttu-id="6b31a-227">角色：响应方</span><span class="sxs-lookup"><span data-stu-id="6b31a-227">Role: Responder</span></span><br /><br /> <span data-ttu-id="6b31a-228">说明：接收从 HOME 到 PARTNER 的 PIP 0A1 的协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-228">Description: Agreement to receive PIP 0A1 from HOME to PARTNER</span></span><br /><br /> <span data-ttu-id="6b31a-229">创建它的 Loopback 命令：Loopback /mirror Home_to_Partner_Initiator_0A1</span><span class="sxs-lookup"><span data-stu-id="6b31a-229">Loopback Command to Create it: Loopback /mirror Home_to_Partner_Initiator_0A1</span></span>|  

 <span data-ttu-id="6b31a-230">在以下过程中需运行这些表中的 Loopback 命令。</span><span class="sxs-lookup"><span data-stu-id="6b31a-230">Run the Loopback commands in these tables as part of the following procedure.</span></span>  

#### <a name="to-create-the-agreements-for-a-loopback-scenario-using-0a1-messages"></a><span data-ttu-id="6b31a-231">为使用 0A1 消息的环回方案创建协议</span><span class="sxs-lookup"><span data-stu-id="6b31a-231">To create the agreements for a loopback scenario using 0A1 messages</span></span>  

1. <span data-ttu-id="6b31a-232">在 [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] 管理控制台中，创建一个用于由本组织发送的请求操作消息的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-232">In the [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, create an agreement for the request action message to be sent by the home organization.</span></span>  

2. <span data-ttu-id="6b31a-233">创建一个用于由本组织发送的发起方 0A1 消息的协议，并执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="6b31a-233">Create an agreement for the initiator 0A1 message to be sent by the home organization, and do the following:</span></span>  


   |         <span data-ttu-id="6b31a-234">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6b31a-234">Use this</span></span>         |                  <span data-ttu-id="6b31a-235">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6b31a-235">To do this</span></span>                  |
   |--------------------------|----------------------------------------------|
   |   <span data-ttu-id="6b31a-236">**我的组织**</span><span class="sxs-lookup"><span data-stu-id="6b31a-236">**My organization**</span></span>    |        <span data-ttu-id="6b31a-237">设为本组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-237">Set to the home organization.</span></span>         |
   | <span data-ttu-id="6b31a-238">**合作伙伴组织**</span><span class="sxs-lookup"><span data-stu-id="6b31a-238">**Partner organization**</span></span> |             <span data-ttu-id="6b31a-239">设为合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="6b31a-239">Set to the partner.</span></span>              |
   |      <span data-ttu-id="6b31a-240">**本组织角色**</span><span class="sxs-lookup"><span data-stu-id="6b31a-240">**Home role**</span></span>       | <span data-ttu-id="6b31a-241">设置为**PIP 失败通知方 （发起方）**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-241">Set to **PIP Failure Notifier (Initiator)**.</span></span> |


3. <span data-ttu-id="6b31a-242">使用 [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] 管理控制台创建一个用于由本组织发送的响应方 0A1 消息的协议，并执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="6b31a-242">Using [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, create an agreement for the responder 0A1 message to be sent to the home organization, and do the following:</span></span>  


   |         <span data-ttu-id="6b31a-243">使用此选项</span><span class="sxs-lookup"><span data-stu-id="6b31a-243">Use this</span></span>         |                      <span data-ttu-id="6b31a-244">执行的操作</span><span class="sxs-lookup"><span data-stu-id="6b31a-244">To do this</span></span>                      |
   |--------------------------|------------------------------------------------------|
   |   <span data-ttu-id="6b31a-245">**我的组织**</span><span class="sxs-lookup"><span data-stu-id="6b31a-245">**My organization**</span></span>    |            <span data-ttu-id="6b31a-246">设为本组织。</span><span class="sxs-lookup"><span data-stu-id="6b31a-246">Set to the home organization.</span></span>             |
   | <span data-ttu-id="6b31a-247">**合作伙伴组织**</span><span class="sxs-lookup"><span data-stu-id="6b31a-247">**Partner organization**</span></span> |                 <span data-ttu-id="6b31a-248">设为合作伙伴。</span><span class="sxs-lookup"><span data-stu-id="6b31a-248">Set to the partner.</span></span>                  |
   |      <span data-ttu-id="6b31a-249">**本组织角色**</span><span class="sxs-lookup"><span data-stu-id="6b31a-249">**Home role**</span></span>       | <span data-ttu-id="6b31a-250">设置为**失败报告管理员 （响应方）**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-250">Set to **Failure Report Administrator (Responder)**.</span></span> |


4. <span data-ttu-id="6b31a-251">使用[!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)]管理控制台中，设置**0A1 协议**本组织的请求操作-消息协议的名称的本组织的发起方 0A1 协议属性。</span><span class="sxs-lookup"><span data-stu-id="6b31a-251">Using [!INCLUDE[btaBTARN3.3abbrevnonumber](../../includes/btabtarn3-3abbrevnonumber-md.md)] Management Console, set the **0A1 agreement** property for the home organization's request action-message agreement to the name of the initiator 0A1 agreement for the home organization.</span></span>  

5. <span data-ttu-id="6b31a-252">使用 Loopback 实用工具创建用于由合作伙伴组织发送的发起方 0A1 消息的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-252">Using the Loopback utility, create an agreement for the initiator 0A1 message to be sent by the partner organization.</span></span> <span data-ttu-id="6b31a-253">为此，需要镜像本组织的响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-253">You do this by mirroring the responder 0A1 agreement for the home organization.</span></span> <span data-ttu-id="6b31a-254">这将创建同名的新 0A1 协议**环回：\<0A1 协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-254">This creates a new 0A1 agreement with the name **loopback:\<0A1 agreement name\>**.</span></span> <span data-ttu-id="6b31a-255">`My organization`属性设置为合作伙伴`Partner organization`属性设置为本组织，并`Home role`属性是**PIP 失败通知方 （发起方）**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-255">The `My organization` property is set to the partner, the `Partner organization` property is set to the home organization, and the `Home role` property is **PIP Failure Notifier (Initiator)**.</span></span>  

6. <span data-ttu-id="6b31a-256">使用 Loopback 实用工具创建用于合作伙伴组织的响应方 0A1 消息的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-256">Using the Loopback utility, create an agreement for the responder 0A1 message for the partner organization.</span></span> <span data-ttu-id="6b31a-257">为此，需要镜像本组织的 0A1 发起方协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-257">You do this by mirroring the 0A1 initiator agreement for the home organization.</span></span> <span data-ttu-id="6b31a-258">这将创建同名的新 0A1 协议**环回：\<0A1 协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-258">This creates a new 0A1 agreement with the name **loopback:\<0A1 agreement name\>**.</span></span> <span data-ttu-id="6b31a-259">`My organization`属性设置为合作伙伴`Partner organization`属性设置为本组织，并`Home role`属性是**失败报告管理员 （响应方）**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-259">The `My organization` property is set to the partner, the `Partner organization` property is set to the home organization, and the `Home role` property is **Failure Report Administrator (Responder)**.</span></span>  

7. <span data-ttu-id="6b31a-260">使用 Loopback 实用工具创建用于合作伙伴组织的响应操作消息的协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-260">Using the Loopback utility, create an agreement for the response action message for the partner organization.</span></span> <span data-ttu-id="6b31a-261">在此命令中，还必须将 0A1 协议属性设置为合作伙伴的响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-261">In the same command, you must set the 0A1 agreement property to the responder 0A1 agreement for the partner.</span></span> <span data-ttu-id="6b31a-262">执行此操作通过镜像本组织的请求操作-消息协议，并使用 **/NoF**开关与合作伙伴的响应方 0A1 协议的名称。</span><span class="sxs-lookup"><span data-stu-id="6b31a-262">You do this by mirroring the request action-message agreement for the home organization, and using the **/NoF** switch with the name of the partner's responder 0A1 agreement.</span></span> <span data-ttu-id="6b31a-263">这将创建新的响应操作-消息协议同名**Loopback:\<协议名称\>**。</span><span class="sxs-lookup"><span data-stu-id="6b31a-263">This creates a new response action-message agreement with the name **Loopback:\<agreement name\>**.</span></span> <span data-ttu-id="6b31a-264">将 `My organization` 属性设置为合作伙伴，0A1 协议属性设置为合作伙伴的响应方 0A1 协议。</span><span class="sxs-lookup"><span data-stu-id="6b31a-264">The `My organization` property is set to the partner, and the 0A1 agreement property is set to the partner's responder 0A1 agreement.</span></span>  

## <a name="see-also"></a><span data-ttu-id="6b31a-265">请参阅</span><span class="sxs-lookup"><span data-stu-id="6b31a-265">See Also</span></span>  
 <span data-ttu-id="6b31a-266">[实用程序](../../adapters-and-accelerators/accelerator-rosettanet/utilities1.md) </span><span class="sxs-lookup"><span data-stu-id="6b31a-266">[Utilities](../../adapters-and-accelerators/accelerator-rosettanet/utilities1.md) </span></span>  
 [<span data-ttu-id="6b31a-267">Loopback 教程</span><span class="sxs-lookup"><span data-stu-id="6b31a-267">Loopback Tutorial</span></span>](../../adapters-and-accelerators/accelerator-rosettanet/loopback-tutorial.md)
