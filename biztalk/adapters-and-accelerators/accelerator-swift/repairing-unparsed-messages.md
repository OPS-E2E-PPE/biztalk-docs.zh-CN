---
title: 修复未分析的消息 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- unparsed messages
- repairing messages, unparsed messages
- messages, unparsed messages
ms.assetid: cc061243-3539-4407-a096-71a3feded1c5
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: fd9e2a19e875df1d666d8a6a72ba92f39b7cc2c4
ms.sourcegitcommit: d27732e569b0897361dfaebca8352aa97bb7efe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/10/2019
ms.locfileid: "65530039"
---
# <a name="repairing-unparsed-messages"></a><span data-ttu-id="919c9-102">修复未分析的消息</span><span class="sxs-lookup"><span data-stu-id="919c9-102">Repairing Unparsed Messages</span></span>
<span data-ttu-id="919c9-103">如果[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]拆装器不能分析一条消息，则可以修复该消息。</span><span class="sxs-lookup"><span data-stu-id="919c9-103">If the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] disassembler cannot parse a message, you can repair that message.</span></span> <span data-ttu-id="919c9-104">此，请在[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]中的窗体[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]MRSR 站点。</span><span class="sxs-lookup"><span data-stu-id="919c9-104">You do so in an [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form from within the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] MRSR site.</span></span> <span data-ttu-id="919c9-105">但是，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]处理该消息以不同的方式从修复后的消息的 XML 或 BRE 验证失败。</span><span class="sxs-lookup"><span data-stu-id="919c9-105">However, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] processes that message differently from a repaired message that failed XML or BRE validation.</span></span>  
  
 <span data-ttu-id="919c9-106">如果消息或批失败分析过程中，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]将磁带标记为[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed = True，分析错误计数大于 0。</span><span class="sxs-lookup"><span data-stu-id="919c9-106">If a message or batch fails parsing, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] marks it as [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]_Failed = True, with a parse error count greater than 0.</span></span> <span data-ttu-id="919c9-107">消息正文将保留在平面文件窗体中，保存的 XML 包装器中。</span><span class="sxs-lookup"><span data-stu-id="919c9-107">The message body remains in flat-file form, encased in an XML wrapper.</span></span> <span data-ttu-id="919c9-108">如果修复规则设置为允许分析失败的处理，则会将消息发送到使用未分析的窗体处理的未分析的收件箱。</span><span class="sxs-lookup"><span data-stu-id="919c9-108">If the repair rule is set to permit the processing of parse failures, the message is sent to the Unparsed inbox for processing using the Unparsed form.</span></span>  
  
 <span data-ttu-id="919c9-109">没有为所有用户和所有部门，只有一个未分析的收件箱因为[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]可能不具有访问消息有关的任何数据，而不是原始接收位置。</span><span class="sxs-lookup"><span data-stu-id="919c9-109">There is only one Unparsed inbox for all users and all departments, because [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] may not have access to any data about the message other than the original receive location.</span></span> <span data-ttu-id="919c9-110">因此，若要修复未分析的消息，用户必须修复功能并且必须与所有部门中的修复角色相关联。</span><span class="sxs-lookup"><span data-stu-id="919c9-110">As a result, to repair an unparsed message, a user must have the repair capability and must be associated with the repair role in all departments.</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] <span data-ttu-id="919c9-111">Unparsed 的文本区域中显示的未分析的消息[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]窗体。</span><span class="sxs-lookup"><span data-stu-id="919c9-111">displays the unparsed message in the text area of the Unparsed [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form.</span></span> <span data-ttu-id="919c9-112">若要更正分析问题，可能会输入或删除根据需要的字符。</span><span class="sxs-lookup"><span data-stu-id="919c9-112">To correct the parsing problem, you may enter or delete characters as necessary.</span></span> <span data-ttu-id="919c9-113">提交后，将消息从 XML 包装器提取，并通过 SWIFT 接收管道重新提交。</span><span class="sxs-lookup"><span data-stu-id="919c9-113">After it is submitted, the message is extracted from the XML wrapper and resubmitted through the SWIFT receive pipeline.</span></span> <span data-ttu-id="919c9-114">如果分析成功，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]像任何其他消息处理的消息。</span><span class="sxs-lookup"><span data-stu-id="919c9-114">If parsing succeeds, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] processes the message as it would any other message.</span></span>  
  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] <span data-ttu-id="919c9-115">不会处理未分析的消息具有固定通过完全修复工作流。</span><span class="sxs-lookup"><span data-stu-id="919c9-115">does not process an unparsed message that you have fixed through a full repair workflow.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] <span data-ttu-id="919c9-116">将其发送出未验证和未批准。</span><span class="sxs-lookup"><span data-stu-id="919c9-116">sends it out unverified and unapproved.</span></span> <span data-ttu-id="919c9-117">当已修复未分析的消息进行签名，并提交它，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]不会调用 BRE 验证或检查部门，但该消息将直接发送到发送管道。</span><span class="sxs-lookup"><span data-stu-id="919c9-117">When you sign a repaired unparsed message and then submit it, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] does not call BRE validation or check the department, but sends the message directly to the send pipeline.</span></span> <span data-ttu-id="919c9-118">如果该管道无法处理该消息，[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]将其发送到修复过程。</span><span class="sxs-lookup"><span data-stu-id="919c9-118">If that pipeline cannot process the message, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sends it to the repair process.</span></span>  
  
 <span data-ttu-id="919c9-119">此过程使您能够更正来自另一个系统的格式不正确的消息。</span><span class="sxs-lookup"><span data-stu-id="919c9-119">This process enables you to correct badly formatted messages from another system.</span></span> <span data-ttu-id="919c9-120">但是，在更正分析问题时应小心。</span><span class="sxs-lookup"><span data-stu-id="919c9-120">However, you should use caution when correcting parsing issues.</span></span> <span data-ttu-id="919c9-121">当[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]处理未分析的消息，不会验证消息。</span><span class="sxs-lookup"><span data-stu-id="919c9-121">When [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] handles an unparsed message, it does not validate the message.</span></span> <span data-ttu-id="919c9-122">未分析的修复未定义为一个角色，因此，任何人都可以执行此过程。</span><span class="sxs-lookup"><span data-stu-id="919c9-122">Unparsed repair is not defined as a role, so anyone can perform this process.</span></span> <span data-ttu-id="919c9-123">由于未分析的消息不属于任何部门，提供上对其进行访问的唯一安全是未分析的收件箱中的 Acl。</span><span class="sxs-lookup"><span data-stu-id="919c9-123">Because unparsed message do not belong to any department, the only security provided on access to them is the ACLs on the Unparsed inbox.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] <span data-ttu-id="919c9-124">也不会保留原始接收消息的上下文属性作为未分析消息的位置。</span><span class="sxs-lookup"><span data-stu-id="919c9-124">also does not retain the original receive location of an unparsed message as a context property of the message.</span></span>  
  
 <span data-ttu-id="919c9-125">您可以编写自定义验证要在已修复未分析消息上执行。</span><span class="sxs-lookup"><span data-stu-id="919c9-125">You can write a custom validation to be performed on the repaired unparsed message.</span></span> <span data-ttu-id="919c9-126">此外可以编写要向原始文件管道发送已修复未分析的消息的订阅。</span><span class="sxs-lookup"><span data-stu-id="919c9-126">You can also write a subscription to send a repaired unparsed message to the original file pipeline.</span></span>  
  
 <span data-ttu-id="919c9-127">若要运行未分析的消息上的修复机制，需要将 EnvelopeUnparsedMessage.xsd 架构添加到包含消息架构的程序集。</span><span class="sxs-lookup"><span data-stu-id="919c9-127">For the repair mechanism to work on unparsed messages, you need to add the EnvelopeUnparsedMessage.xsd schema to the assembly that contains message schemas.</span></span> <span data-ttu-id="919c9-128">有关详细信息，请参阅[部署 A4SWIFT 架构](../../adapters-and-accelerators/accelerator-swift/deploying-a4swift-schemas.md)。</span><span class="sxs-lookup"><span data-stu-id="919c9-128">For more information, see [Deploying A4SWIFT Schemas](../../adapters-and-accelerators/accelerator-swift/deploying-a4swift-schemas.md).</span></span>