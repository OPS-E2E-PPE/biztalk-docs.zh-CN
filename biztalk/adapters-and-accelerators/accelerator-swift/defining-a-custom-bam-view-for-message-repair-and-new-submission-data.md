---
title: 定义用于消息修复和新提交数据的自定义 BAM 视图 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- BAM views
- Message Repair and New Submission, BAM views
ms.assetid: 76a6e78d-9b11-4b43-a500-a9d7666ee468
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e31545fae97387033fc0c9c97687b8973649f53e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65378368"
---
# <a name="defining-a-custom-bam-view-for-message-repair-and-new-submission-data"></a><span data-ttu-id="f59a0-102">定义用于消息修复和新提交数据的自定义 BAM 视图</span><span class="sxs-lookup"><span data-stu-id="f59a0-102">Defining a Custom BAM View for Message Repair and New Submission Data</span></span>
[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] <span data-ttu-id="f59a0-103">安装程序提供了用于定义业务活动和业务视图的 BAM 定义文件。</span><span class="sxs-lookup"><span data-stu-id="f59a0-103">Setup provides a BAM definition file that defines a business activity and a business view.</span></span> <span data-ttu-id="f59a0-104">可以部署 BAM 定义文件中使用该视图中，也可以创建自定义视图，可以将它们添加到 BAM 定义文件。</span><span class="sxs-lookup"><span data-stu-id="f59a0-104">You can deploy the BAM definition file to use that view, or you can create a custom view that you can add to the BAM definition file.</span></span>  

 <span data-ttu-id="f59a0-105">BAM 定义文件是在 MrsrActivities.xml *\<驱动器\>*: \Program Files\Microsoft BizTalk Accelerator for SWIFT\BAMTracking。</span><span class="sxs-lookup"><span data-stu-id="f59a0-105">The BAM definition file is MrsrActivities.xml in *\<drive\>*:\Program Files\Microsoft BizTalk Accelerator for SWIFT\BAMTracking.</span></span> <span data-ttu-id="f59a0-106">它定义了消息活动和 RepairView 视图。</span><span class="sxs-lookup"><span data-stu-id="f59a0-106">It defines a Message activity and a RepairView view.</span></span> <span data-ttu-id="f59a0-107">详细了解使用 bm 部署 MrsrActivities.xml 部署实用工具，请参阅 BizTalk Server 帮助。</span><span class="sxs-lookup"><span data-stu-id="f59a0-107">For more information about deploying MrsrActivities.xml by using the bm deploy utility, see BizTalk Server Help.</span></span>  

 <span data-ttu-id="f59a0-108">在业务活动监视视图向导从 BAM 工作簿中创建自定义视图。</span><span class="sxs-lookup"><span data-stu-id="f59a0-108">Create the custom view in the Business Activity Monitoring View Wizard from the BAM workbook.</span></span> <span data-ttu-id="f59a0-109">有关创建自定义视图的详细信息，请参阅"创建 BAM 视图"中 MicrosoftBizTalk 服务器信息工作人员帮助。</span><span class="sxs-lookup"><span data-stu-id="f59a0-109">For more information about creating a custom view, see "Creating a BAM View" in MicrosoftBizTalk Server Information Worker Help.</span></span>  

 <span data-ttu-id="f59a0-110">MrsrActivities.xml 中的消息活动包括以下各项可添加到自定义视图：</span><span class="sxs-lookup"><span data-stu-id="f59a0-110">The Message activity in MrsrActivities.xml includes the following items that you can add to the custom view:</span></span>  

> [!NOTE]
>  <span data-ttu-id="f59a0-111">持续时间在计算时在 BAM 中，它们被以一天 （14.4 分钟 =.01 天） 的单位。</span><span class="sxs-lookup"><span data-stu-id="f59a0-111">When durations are calculated in BAM, they are measured in units of one day (14.4 minutes = .01 day).</span></span>  

|      <span data-ttu-id="f59a0-112">项</span><span class="sxs-lookup"><span data-stu-id="f59a0-112">Item</span></span>       |                                                                                                                                                                                                                                  <span data-ttu-id="f59a0-113">改用</span><span class="sxs-lookup"><span data-stu-id="f59a0-113">Use</span></span>                                                                                                                                                                                                                                   |      <span data-ttu-id="f59a0-114">项类型</span><span class="sxs-lookup"><span data-stu-id="f59a0-114">Item type</span></span>       |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
| <span data-ttu-id="f59a0-115">目标 BIC</span><span class="sxs-lookup"><span data-stu-id="f59a0-115">Destination BIC</span></span> | <span data-ttu-id="f59a0-116">消息的接收方的 l T 地址 (从应用程序标头块的输入消息的 SWIFT，或从块 1 的消息来自 SWIFT 其中[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]机构是目标)。</span><span class="sxs-lookup"><span data-stu-id="f59a0-116">The LT address of the receiver of the message (taken from Application Header Block Input for messages to SWIFT, or from Block 1 for messages from SWIFT where the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] institution is the destination).</span></span><br /><br /> <span data-ttu-id="f59a0-117">此数据始终存在。 （从应用程序标头输入目标 LT SWIFTBound 消息或从基本从 SWIFT 接收的消息的标头 l T）</span><span class="sxs-lookup"><span data-stu-id="f59a0-117">This data is always present (from Application Header Input Destination LT for SWIFTBound messages, or from Basic Header LT for messages received from SWIFT).</span></span> | <span data-ttu-id="f59a0-118">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-118">Business Data - Text</span></span> |
|    <span data-ttu-id="f59a0-119">结束时间</span><span class="sxs-lookup"><span data-stu-id="f59a0-119">End Time</span></span>     |                                                                            <span data-ttu-id="f59a0-120">完成日期和时间时 MRSRRepair 业务流程处理消息 （MRSR_Completed 或 MRSR_Failed）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-120">The date and time when the MRSRRepair orchestration completed processing the message (MRSR_Completed or MRSR_Failed).</span></span><br /><br /> <span data-ttu-id="f59a0-121">仅对已完成，即 MRSR 工作流的消息具有已退出，该数据位于**BTS。操作** == **A4SWIFT_MRSRCompleted**或**A4SWIFT_MRSRFailed**。</span><span class="sxs-lookup"><span data-stu-id="f59a0-121">This data is present only for messages that have completed MRSR workflow, that is, have exited with **BTS.Operation** == **A4SWIFT_MRSRCompleted** or **A4SWIFT_MRSRFailed**.</span></span>                                                                             |  <span data-ttu-id="f59a0-122">业务里程碑</span><span class="sxs-lookup"><span data-stu-id="f59a0-122">Business Milestone</span></span>  |
|    <span data-ttu-id="f59a0-123">参考</span><span class="sxs-lookup"><span data-stu-id="f59a0-123">Reference</span></span>    |                                                                                                                                                                <span data-ttu-id="f59a0-124">此消息或事务由发送机构; 分配的唯一引用标识符来自字段 20 或 20C(SEME)</span><span class="sxs-lookup"><span data-stu-id="f59a0-124">The unique reference identifier for this message or transaction as assigned by the sending institution; taken from field 20 or 20C(SEME)</span></span>                                                                                                                                                                | <span data-ttu-id="f59a0-125">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-125">Business Data - Text</span></span> |
|  <span data-ttu-id="f59a0-126">消息类型</span><span class="sxs-lookup"><span data-stu-id="f59a0-126">Message Type</span></span>   |                                                                                                                                                                    <span data-ttu-id="f59a0-127">FIN 或 GPA 消息的类型。</span><span class="sxs-lookup"><span data-stu-id="f59a0-127">The type of FIN or GPA message.</span></span><br /><br /> <span data-ttu-id="f59a0-128">此数据将始终存在 （应用程序标头输入或应用程序标头输出）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-128">This data is always present (Application Header Input or Application Header Output).</span></span>                                                                                                                                                                    | <span data-ttu-id="f59a0-129">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-129">Business Data - Text</span></span> |
| <span data-ttu-id="f59a0-130">新提交</span><span class="sxs-lookup"><span data-stu-id="f59a0-130">New Submission</span></span>  |                                                                                                                       <span data-ttu-id="f59a0-131">指示器是否这是一个新条目 (Y) 或从另一个系统或 SWIFT (N) 发出的消息。</span><span class="sxs-lookup"><span data-stu-id="f59a0-131">An indicator as to whether this is a new entry (Y) or a message that originated from another system or SWIFT (N).</span></span><br /><br /> <span data-ttu-id="f59a0-132">此数据的已按角色发起与创建功能的消息才存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-132">This data is present only for messages that were originated by role with Create capability.</span></span>                                                                                                                        | <span data-ttu-id="f59a0-133">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-133">Business Data - Text</span></span> |
|    <span data-ttu-id="f59a0-134">Priority</span><span class="sxs-lookup"><span data-stu-id="f59a0-134">Priority</span></span>     |                                                                                                                                                                            <span data-ttu-id="f59a0-135">SWIFT 消息的优先级 (N = 正常，U = 紧急，S = 系统)。</span><span class="sxs-lookup"><span data-stu-id="f59a0-135">The priority of the SWIFT message (N = normal, U = urgent, S = system).</span></span><br /><br /> <span data-ttu-id="f59a0-136">此数据将始终存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-136">This data is always present.</span></span>                                                                                                                                                                            | <span data-ttu-id="f59a0-137">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-137">Business Data - Text</span></span> |
|  <span data-ttu-id="f59a0-138">接收的时间</span><span class="sxs-lookup"><span data-stu-id="f59a0-138">Received Time</span></span>  |                                                                                                                                                  <span data-ttu-id="f59a0-139">日期和 MRSRRepair 业务流程最近一次收到消息的时间 （从上一阶段 – 请参阅下面的阶段）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-139">The date and time when the MRSRRepair orchestration last received the message (from the previous stage – see Stage below).</span></span><br /><br /> <span data-ttu-id="f59a0-140">此数据将始终存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-140">This data is always present.</span></span>                                                                                                                                                   |  <span data-ttu-id="f59a0-141">业务里程碑</span><span class="sxs-lookup"><span data-stu-id="f59a0-141">Business Milestone</span></span>  |
|   <span data-ttu-id="f59a0-142">发件人 BIC</span><span class="sxs-lookup"><span data-stu-id="f59a0-142">Sender BIC</span></span>    |        <span data-ttu-id="f59a0-143">中的原始消息的发件人的 l T 地址 (摘自块 1 的消息向 SWIFT 其中[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]机构是发件人，或从应用程序来自 SWIFT 的消息的标头输出)。</span><span class="sxs-lookup"><span data-stu-id="f59a0-143">The LT address of the originator of the message (taken from Block 1 for messages to SWIFT where the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] institution is the sender, or from Application Header Output for messages from SWIFT).</span></span><br /><br /> <span data-ttu-id="f59a0-144">此数据将始终存在 （从基本的标头 LT 地址对于 SWIFTBound 消息，或从应用程序从 SWIFT 接收的消息的标头输出）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-144">This data is always present (from Basic Header LT Address for SWIFTBound Messages, or from Application Header Output for messages received from SWIFT).</span></span>        | <span data-ttu-id="f59a0-145">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-145">Business Data - Text</span></span> |
|    <span data-ttu-id="f59a0-146">发送时间</span><span class="sxs-lookup"><span data-stu-id="f59a0-146">Send Time</span></span>    |                                                                                                                             <span data-ttu-id="f59a0-147">日期和时间时 MRSRRepair 业务流程上一次将消息发送到 MRSR 站点 （适用于当前阶段）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-147">The date and time when the MRSRRepair orchestration last sent the message to MRSR site (for the current stage).</span></span><br /><br /> <span data-ttu-id="f59a0-148">此数据将始终存在，除非该邮件是在业务流程中的过程中。</span><span class="sxs-lookup"><span data-stu-id="f59a0-148">This data is always present unless the message is in process in the orchestration.</span></span>                                                                                                                             |  <span data-ttu-id="f59a0-149">业务里程碑</span><span class="sxs-lookup"><span data-stu-id="f59a0-149">Business Milestone</span></span>  |
|   <span data-ttu-id="f59a0-150">Start Time</span><span class="sxs-lookup"><span data-stu-id="f59a0-150">Start Time</span></span>    |                                                                                                                          <span data-ttu-id="f59a0-151">日期和时间时 MRSRRepair 业务流程最初收到该消息作为新的提交或来自接口 （内部系统或 SWIFT） 的消息。</span><span class="sxs-lookup"><span data-stu-id="f59a0-151">The date and time when the MRSRRepair orchestration initially received the message either as a new submission or as a message from an interface (internal system or SWIFT).</span></span><br /><br /> <span data-ttu-id="f59a0-152">此数据将始终存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-152">This data is always present.</span></span>                                                                                                                          |  <span data-ttu-id="f59a0-153">业务里程碑</span><span class="sxs-lookup"><span data-stu-id="f59a0-153">Business Milestone</span></span>  |
|   <span data-ttu-id="f59a0-154">最后一个阶段</span><span class="sxs-lookup"><span data-stu-id="f59a0-154">Last Stage</span></span>    |                                                                                                                                                                                       <span data-ttu-id="f59a0-155">在工作流 （始终之前消息现阶段） 中最后一个已完成的步骤</span><span class="sxs-lookup"><span data-stu-id="f59a0-155">The last completed step in the workflow (always the stage before where the message is now)</span></span>                                                                                                                                                                                       | <span data-ttu-id="f59a0-156">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-156">Business Data - Text</span></span> |
|     <span data-ttu-id="f59a0-157">“登录属性”</span><span class="sxs-lookup"><span data-stu-id="f59a0-157">Status</span></span>      |                                                                                               <span data-ttu-id="f59a0-158">可以是：</span><span class="sxs-lookup"><span data-stu-id="f59a0-158">Can be:</span></span><br /><br /> <span data-ttu-id="f59a0-159">-已完成 （如果成功）</span><span class="sxs-lookup"><span data-stu-id="f59a0-159">-   Completed (if successful)</span></span><br /><span data-ttu-id="f59a0-160">-重置和推断 （适用于重置如果重新启动工作流的工作流）</span><span class="sxs-lookup"><span data-stu-id="f59a0-160">-   Reset and reason (for workflow reset if the workflow restarted)</span></span><br /><span data-ttu-id="f59a0-161">-失败，原因 （如果未成功，已完成消息，即已拒绝或超时）。</span><span class="sxs-lookup"><span data-stu-id="f59a0-161">-   Failed and reason (if message completed unsuccessfully, that is, was rejected or timed out).</span></span><br /><br /> <span data-ttu-id="f59a0-162">此数据将始终存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-162">This data is always present.</span></span>                                                                                                | <span data-ttu-id="f59a0-163">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-163">Business Data - Text</span></span> |
|   <span data-ttu-id="f59a0-164">部门</span><span class="sxs-lookup"><span data-stu-id="f59a0-164">Department</span></span>    |                                                                                                                          <span data-ttu-id="f59a0-165">部门策略根据 MRSRRepair 业务流程所选的部门 (依赖于[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]机构)</span><span class="sxs-lookup"><span data-stu-id="f59a0-165">The department selected by the MRSRRepair orchestration according to the Department Policy (dependent on the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] institution)</span></span>                                                                                                                           | <span data-ttu-id="f59a0-166">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-166">Business Data - Text</span></span> |
|    <span data-ttu-id="f59a0-167">用户名</span><span class="sxs-lookup"><span data-stu-id="f59a0-167">Username</span></span>     |                                                                                                                                                                                               <span data-ttu-id="f59a0-168">与上一阶段相关联的用户的名称 （请参阅上面的阶段）</span><span class="sxs-lookup"><span data-stu-id="f59a0-168">The name of the user associated with the previous stage (see Stage above)</span></span>                                                                                                                                                                                                | <span data-ttu-id="f59a0-169">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-169">Business Data - Text</span></span> |
|  <span data-ttu-id="f59a0-170">当前阶段</span><span class="sxs-lookup"><span data-stu-id="f59a0-170">Current Stage</span></span>  |                                                                                                                                     <span data-ttu-id="f59a0-171">MRSRRepair 业务流程的消息 （例如，收件箱） 传递到该工作流步骤。</span><span class="sxs-lookup"><span data-stu-id="f59a0-171">The workflow step to which the MRSRRepair orchestration has delivered the message (for example, the Inbox).</span></span><br /><br /> <span data-ttu-id="f59a0-172">除非消息已完成消息修复此数据存在。</span><span class="sxs-lookup"><span data-stu-id="f59a0-172">This data is present unless the message has completed message repair.</span></span>                                                                                                                                      | <span data-ttu-id="f59a0-173">业务数据-Text</span><span class="sxs-lookup"><span data-stu-id="f59a0-173">Business Data - Text</span></span> |

