---
title: 特殊处理消息修复和新的提交中 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- repairing messages, rekey verification
- repairing messages, process flow
- rekey verification
- repairing messages
- messages, templates
- messages, rekey verification
- BIC fields
- templates, messages
- BIC-12 data
- messages, process flow
- BIC-11 data
ms.assetid: 0ab729e3-4b67-47d3-84c9-f016318a4c41
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1d77d518b080fd84b874c9bb79dedd5173d0a78b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22214413"
---
# <a name="special-processing-in-message-repair-and-new-submission"></a><span data-ttu-id="b8a85-102">在消息修复和新提交的特殊处理</span><span class="sxs-lookup"><span data-stu-id="b8a85-102">Special Processing in Message Repair and New Submission</span></span>
<span data-ttu-id="b8a85-103">[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]消息修复和新功能使客户能够开发企业实现的提交。</span><span class="sxs-lookup"><span data-stu-id="b8a85-103">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission functionality enables customers to develop an enterprise implementation.</span></span> <span data-ttu-id="b8a85-104">功能支持以下特殊处理：</span><span class="sxs-lookup"><span data-stu-id="b8a85-104">The functionality supports the following special processing:</span></span>  
  
-   <span data-ttu-id="b8a85-105">重新生成密钥验证</span><span class="sxs-lookup"><span data-stu-id="b8a85-105">Rekeying verification</span></span>  
  
-   <span data-ttu-id="b8a85-106">部门特定工作流支持 (有关详细信息，请参阅[修复消息和提交新消息](../../adapters-and-accelerators/accelerator-swift/repairing-messages-and-submitting-new-messages.md)。)</span><span class="sxs-lookup"><span data-stu-id="b8a85-106">Department-specific workflow support (For more information, see [Repairing Messages and Submitting New Messages](../../adapters-and-accelerators/accelerator-swift/repairing-messages-and-submitting-new-messages.md).)</span></span>  
  
-   <span data-ttu-id="b8a85-107">输入作为 BIC 11 BIC 12 数据</span><span class="sxs-lookup"><span data-stu-id="b8a85-107">Entry of BIC-12 data as BIC-11</span></span>  
  
-   <span data-ttu-id="b8a85-108">BIC 字段的项作为一个字符串</span><span class="sxs-lookup"><span data-stu-id="b8a85-108">Entry of BIC fields as one string</span></span>  
  
-   <span data-ttu-id="b8a85-109">修复并重新提交的分析失败 (有关详细信息，请参阅[修复未分析消息](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md)。)</span><span class="sxs-lookup"><span data-stu-id="b8a85-109">Repair and resubmission of parse failures (For more information, see [Repairing Unparsed Messages](../../adapters-and-accelerators/accelerator-swift/repairing-unparsed-messages.md).)</span></span>  
  
-   <span data-ttu-id="b8a85-110">正在保存修复，通过使用保存命令</span><span class="sxs-lookup"><span data-stu-id="b8a85-110">Saving repairs in progress by using the Save command</span></span>  
  
-   <span data-ttu-id="b8a85-111">通过使用另存为命令创建新模板</span><span class="sxs-lookup"><span data-stu-id="b8a85-111">Creating a new template by using the Save As command</span></span>  
  
## <a name="rekey-verification"></a><span data-ttu-id="b8a85-112">重新生成密钥验证</span><span class="sxs-lookup"><span data-stu-id="b8a85-112">Rekey Verification</span></span>  
 <span data-ttu-id="b8a85-113">对于许多金融机构中，检查工作的主要方式是供第二个用户事务的最重要的字段重新生成密钥。</span><span class="sxs-lookup"><span data-stu-id="b8a85-113">For many financial institutions, the primary means of checking work is for a second person to rekey the most important fields of a transaction.</span></span> <span data-ttu-id="b8a85-114">此操作将验证的第二个用户具有读取和理解，这些字段中的数据。</span><span class="sxs-lookup"><span data-stu-id="b8a85-114">This operation verifies that the second person has read, and understands, the data in those fields.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-115">提供的消息修复或在其中创建了此功能[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="b8a85-115"> provides this capability for messages repaired or created in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="b8a85-116">如果重新生成密钥步骤是必需的[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]出要向用户显示的形式将重新生成的字段的空白。</span><span class="sxs-lookup"><span data-stu-id="b8a85-116">If a rekey step is required, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] blanks out the fields to be rekeyed in the form presented to the user.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-117">仍在任务窗格中，显示原始消息的内容，因此在输入数据时，验证程序可以使用这些内容。</span><span class="sxs-lookup"><span data-stu-id="b8a85-117"> still displays the contents of the original message in the task pane, so the verifier can use those contents when entering the data.</span></span> <span data-ttu-id="b8a85-118">验证程序不应更改在消息中，其他字段，因为这可能允许更改而无需验证。</span><span class="sxs-lookup"><span data-stu-id="b8a85-118">The verifier should not change other fields in the message, because this might allow changes without verification.</span></span> <span data-ttu-id="b8a85-119">相反，验证程序应拒绝消息修复，如果需要进行其他更改。</span><span class="sxs-lookup"><span data-stu-id="b8a85-119">Instead, the verifier should reject the message repair if other changes need to be made.</span></span>  
  
 <span data-ttu-id="b8a85-120">在重新生成密钥步骤中，完成之后[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]使用修复结果重新加密操作的结果进行比较。</span><span class="sxs-lookup"><span data-stu-id="b8a85-120">After the rekey step, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] compares the results of the rekeying with the results of the repair.</span></span> <span data-ttu-id="b8a85-121">它只能在具有已重新生成，基于按字段的字段上执行这种比较。</span><span class="sxs-lookup"><span data-stu-id="b8a85-121">It performs this comparison only on the fields that have been rekeyed, on a field-by-field basis.</span></span> <span data-ttu-id="b8a85-122">如果基于字符的字符不一致的两个版本，则必须再次修复消息。</span><span class="sxs-lookup"><span data-stu-id="b8a85-122">If the two versions do not agree on a character-by-character basis, the message must be repaired again.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-123">指示存在密钥验证不匹配，并将错误添加到消息的错误集合部分。</span><span class="sxs-lookup"><span data-stu-id="b8a85-123"> indicates that there was a key verification mismatch, and adds the error to the error-collection part of the message.</span></span> <span data-ttu-id="b8a85-124">输入由验证程序的数据不会保存。</span><span class="sxs-lookup"><span data-stu-id="b8a85-124">The data entered by the verifier is not saved.</span></span>  
  
 <span data-ttu-id="b8a85-125">下的 MRSR 文件夹中 MrsrXpathConfig.xml 文件中指定要将重新生成的字段[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]文件夹。</span><span class="sxs-lookup"><span data-stu-id="b8a85-125">The fields to be rekeyed are specified in the MrsrXpathConfig.xml file in the MRSR folder under the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] folder.</span></span> <span data-ttu-id="b8a85-126">此文件包含要将重新生成的字段和字段到 xpath 组成的名称/值对。</span><span class="sxs-lookup"><span data-stu-id="b8a85-126">This file contains name/value pairs consisting of the field to be rekeyed and the xpath to the field.</span></span> <span data-ttu-id="b8a85-127">你可以自定义此文件可更改的字段将为每个消息重新生成。</span><span class="sxs-lookup"><span data-stu-id="b8a85-127">You can customize this file to change which fields will be rekeyed for each message.</span></span> <span data-ttu-id="b8a85-128">要将重新生成的字段通常是那些表示最重要日期与消息内容，关联的事务，并在事务量的货币。</span><span class="sxs-lookup"><span data-stu-id="b8a85-128">The fields to be rekeyed are generally those representing the most important date associated with the message contents, the currency of the transaction, and the amount of the transaction.</span></span>  
  
 <span data-ttu-id="b8a85-129">在消息修复和新提交的所有验证步骤都涉及重新生成密钥验证。</span><span class="sxs-lookup"><span data-stu-id="b8a85-129">All verification steps in Message Repair and New Submission involve rekey verification.</span></span> <span data-ttu-id="b8a85-130">使其不可见验证通过审批者执行。</span><span class="sxs-lookup"><span data-stu-id="b8a85-130">Sight verification is performed by the approver.</span></span>  
  
## <a name="entry-of-bic-12-data-as-bic-11"></a><span data-ttu-id="b8a85-131">输入作为 BIC 11 BIC 12 数据</span><span class="sxs-lookup"><span data-stu-id="b8a85-131">Entry of BIC-12 Data as BIC-11</span></span>  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-132">还包含一条消息的逻辑终端 (LT) 地址中的其他字符的需求。</span><span class="sxs-lookup"><span data-stu-id="b8a85-132"> accommodates the need for an additional character in the Logical Terminal (LT) Address of a message.</span></span> <span data-ttu-id="b8a85-133">LT 地址包含仅有 11 个字符的数据，但 SWIFT 联盟访问 (SAA) 需要 LT 字段，才能在位置 9 中具有"X"。</span><span class="sxs-lookup"><span data-stu-id="b8a85-133">The LT Address contains only 11 characters of data, but the SWIFT Alliance Access (SAA) requires the LT field to have an "X" in position 9.</span></span> <span data-ttu-id="b8a85-134">向 SAA 指示此额外的字符，它应选择正确的 LT.</span><span class="sxs-lookup"><span data-stu-id="b8a85-134">This extra character indicates to SAA that it should select the correct LT.</span></span>  
  
 <span data-ttu-id="b8a85-135">LT 地址用于通过 FIN 网络进行传输的消息。</span><span class="sxs-lookup"><span data-stu-id="b8a85-135">The LT address is used for transmission of the message over the FIN network.</span></span> <span data-ttu-id="b8a85-136">可在两个字段的 SWIFTBound 消息 （基本标头块的 LT 地址字段） 或输入的应用程序标头块中的目标地址字段中包含和 SWIFT 的消息的两个字段中 (基本标头块的 LT 地址字段或LT 地址的消息输入参考中的输出应用程序标头块）。</span><span class="sxs-lookup"><span data-stu-id="b8a85-136">It can be contained in two fields of a SWIFTBound message (the LT Address field of the Basic Header block or the Destination Address field in the input Application Header block) and in two fields of a message from SWIFT (the LT Address field of the Basic Header block or the LT Address in the Message Input Reference in the Output Application Header block).</span></span>  
  
 <span data-ttu-id="b8a85-137">在创建或修复一条消息，或重新字段验证的一部分生成密钥时，用户必须输入仅 11 个字符。</span><span class="sxs-lookup"><span data-stu-id="b8a85-137">Users must enter only 11 characters when they create or repair a message, or rekey the field as part of verification.</span></span> <span data-ttu-id="b8a85-138">即使修复或重新生成密钥 LT 具有 12 个字符，则用户必须输入仅 11 个字符。</span><span class="sxs-lookup"><span data-stu-id="b8a85-138">Even when repairing or rekeying an LT that has 12 characters, a user must enter only 11 characters.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-139">插入第 12 个字符，并验证 12 个字符字段。</span><span class="sxs-lookup"><span data-stu-id="b8a85-139"> inserts the twelfth character and validates the 12-character field.</span></span> [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="b8a85-140">验证针对 BIC 加上数据库中的地址的 11 个字符 LT 地址。</span><span class="sxs-lookup"><span data-stu-id="b8a85-140"> validates the 11-character LT address against the address in the BIC Plus database.</span></span>  
  
## <a name="entry-of-bic-fields-as-one-string"></a><span data-ttu-id="b8a85-141">作为一个字符串 BIC 字段的项</span><span class="sxs-lookup"><span data-stu-id="b8a85-141">Entry of BIC Fields as One String</span></span>  
 <span data-ttu-id="b8a85-142">你可以输入有关 BIC 成单个字段[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]窗体。</span><span class="sxs-lookup"><span data-stu-id="b8a85-142">You can enter the BIC into a single field on [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span> <span data-ttu-id="b8a85-143">BIC 包含四个子字段，其中每个有子字段[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]窗体。</span><span class="sxs-lookup"><span data-stu-id="b8a85-143">The BIC contains four subfields, each of which has a subfield on the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] forms.</span></span> <span data-ttu-id="b8a85-144">到单个字段中，输入完整的 BIC 字符串后[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]填充每四个个子字段。</span><span class="sxs-lookup"><span data-stu-id="b8a85-144">After you enter the full BIC string into the single field, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] populates each of the four subfields.</span></span>  
  
## <a name="saving-repairs-in-progress"></a><span data-ttu-id="b8a85-145">正在保存修复</span><span class="sxs-lookup"><span data-stu-id="b8a85-145">Saving Repairs in Progress</span></span>  
 <span data-ttu-id="b8a85-146">如果你需要以中断修复，你可以在其当前状态回修复收件箱来保存消息。</span><span class="sxs-lookup"><span data-stu-id="b8a85-146">If you need to interrupt a repair, you can save a message in its current state back into the repair inbox.</span></span> <span data-ttu-id="b8a85-147">通过使用保存命令来检查消息中执行此操作。</span><span class="sxs-lookup"><span data-stu-id="b8a85-147">You do so by using the Save command to check in the message.</span></span> <span data-ttu-id="b8a85-148">你可以关闭[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]窗体并检查消息更高版本，或其他人可以查看它继续修复。</span><span class="sxs-lookup"><span data-stu-id="b8a85-148">You can close the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form and check the message out later, or someone else can check it out to continue the repair.</span></span> <span data-ttu-id="b8a85-149">消息的历史记录指示保存操作和第二个 repairer 就可以看到你执行修复。</span><span class="sxs-lookup"><span data-stu-id="b8a85-149">The message's history indicates the save operation, and a second repairer can see the repairs that you performed.</span></span>  
  
 <span data-ttu-id="b8a85-150">你可以执行的另存为命令来将一条消息存储在用户的本地计算机上，其当前状态。</span><span class="sxs-lookup"><span data-stu-id="b8a85-150">You can execute a Save As command to store a message in its current state on the user's local machine.</span></span> <span data-ttu-id="b8a85-151">签出到另存为执行的用户消息仍会保留。</span><span class="sxs-lookup"><span data-stu-id="b8a85-151">This leaves the message checked out to the user who performed the Save As.</span></span> <span data-ttu-id="b8a85-152">用户可以关闭[!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)]窗体并返回更高版本以完成修复，但另一个用户无法签出该消息并将其修复。</span><span class="sxs-lookup"><span data-stu-id="b8a85-152">The user can close the [!INCLUDE[btsInpathNoVersion](../../includes/btsinpathnoversion-md.md)] form and return later to complete the repair, but another user cannot check out the message and repair it.</span></span>  
  
## <a name="creating-a-new-template"></a><span data-ttu-id="b8a85-153">创建新模板</span><span class="sxs-lookup"><span data-stu-id="b8a85-153">Creating a New Template</span></span>  
 <span data-ttu-id="b8a85-154">在创建新消息时，你可以通过执行另存为命令创建新的模板。</span><span class="sxs-lookup"><span data-stu-id="b8a85-154">When creating a new message, you can create a new template by executing a Save As command.</span></span> <span data-ttu-id="b8a85-155">这使您要打开现有模板，将数据添加到字段，然后创建新模板基于现有模板包含的其他数据。</span><span class="sxs-lookup"><span data-stu-id="b8a85-155">This enables you to open an existing template, add data to fields, and then create a new template based on the existing template that includes the additional data.</span></span> <span data-ttu-id="b8a85-156">使用新名称保存该模板并有权访问新的消息文件夹 MRSR 站点中的任何人都可以创建基于模板的新消息。</span><span class="sxs-lookup"><span data-stu-id="b8a85-156">You save the template with a new name, and anyone with access to the new message folder in MRSR site can create a new message based on the template.</span></span> <span data-ttu-id="b8a85-157">必须将模板保存到 MRSR 站点提交根据模板消息[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="b8a85-157">You must save the template to the MRSR site to submit a message based on the template to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="b8a85-158">否则为将发生错误或你将不能打开窗体。</span><span class="sxs-lookup"><span data-stu-id="b8a85-158">Otherwise, errors will occur or you will not be able to open the form.</span></span>