---
title: SQL 适配器与 BizTalk Server 的安全性 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc439d65-1d7e-4e6e-bb0d-a8cb9f0607b8
caps.latest.revision: 11
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 179051a8d9522ca760780c7a7f1060789129724e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65367936"
---
# <a name="security-with-the-sql-adapter-and-biztalk-server"></a><span data-ttu-id="a86ff-102">SQL 适配器与 BizTalk Server 安全性</span><span class="sxs-lookup"><span data-stu-id="a86ff-102">Security with the SQL adapter and BizTalk Server</span></span>
<span data-ttu-id="a86ff-103">配置发送端口或接收端口 （位置） 时使用 BizTalk Server 管理控制台，或者使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]若要检索的 BizTalk 解决方案的消息架构，必须提供凭据的 SQL Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="a86ff-103">When you configure a send port or a receive port (location) by using the BizTalk Server Administration console or use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] to retrieve message schemas for a BizTalk solution, you must provide credentials for the SQL Server database.</span></span> <span data-ttu-id="a86ff-104">请务必以安全的方式来帮助防止暴露给潜在的恶意执行组件提供这些凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-104">It is important to supply these credentials in a secure way to help prevent them from being revealed to potentially malicious actors.</span></span> <span data-ttu-id="a86ff-105">本主题讨论如何最安全地提供的凭据[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]的 BizTalk Server 解决方案。</span><span class="sxs-lookup"><span data-stu-id="a86ff-105">This topic discusses how to most securely supply credentials for the [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)] for BizTalk Server solutions.</span></span>  
  
 <span data-ttu-id="a86ff-106">BizTalk 解决方案的上下文中的安全性的更多常规讨论是一个广泛的主题并不在此文档的范围。</span><span class="sxs-lookup"><span data-stu-id="a86ff-106">A more general discussion of security in the context of BizTalk solutions is an expansive topic and is beyond the scope of this documentation.</span></span> <span data-ttu-id="a86ff-107">有关如何使你的 BizTalk 解决方案更安全的信息，请参阅[安全和保护你的 BizTalk 消息](../../core/secure-and-protect-your-biztalk-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="a86ff-107">For information about how you can make your BizTalk solutions more secure, see [Secure and protect your BizTalk messages](../../core/secure-and-protect-your-biztalk-messages.md).</span></span>
  
## <a name="how-do-i-protect-credentials-when-i-use-the-consume-adapter-service-biztalk-project-add-in"></a><span data-ttu-id="a86ff-108">在使用时如何保护凭据使用适配器服务的 BizTalk 项目外接程序？</span><span class="sxs-lookup"><span data-stu-id="a86ff-108">How Do I Protect Credentials When I Use the Consume Adapter Service BizTalk Project Add-in?</span></span>  
 <span data-ttu-id="a86ff-109">当你使用[!INCLUDE[consumeadapterservshort_md](../../includes/consumeadapterservshort-md.md)]若要检索的 BizTalk 解决方案的消息架构，必须提供用户名和密码**安全**选项卡上**配置适配器**对话框。</span><span class="sxs-lookup"><span data-stu-id="a86ff-109">When you use the [!INCLUDE[consumeadapterservshort_md](../../includes/consumeadapterservshort-md.md)] to retrieve message schemas for a BizTalk solution, you must supply the user name and password from the **Security** tab on the **Configure Adapter** dialog box.</span></span> <span data-ttu-id="a86ff-110">[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]将不允许您设置凭据**配置 URI**字段。</span><span class="sxs-lookup"><span data-stu-id="a86ff-110">The [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] will not allow you to set credentials in the **Configure a URI** field.</span></span> <span data-ttu-id="a86ff-111">这可以提高安全性，通过防止凭据以明文形式显示。</span><span class="sxs-lookup"><span data-stu-id="a86ff-111">This improves security by preventing credentials from appearing in clear text.</span></span> <span data-ttu-id="a86ff-112">详细了解如何通过使用检索消息架构[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，包括如何为 SQL Server 数据库中输入用户名和密码，请参阅[获取 Visual Studio 中使用 SQL 适配器中的SQLServer操作的元数据](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="a86ff-112">For more information about how to retrieve message schemas by using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], including how to enter a user name and password for the SQL Server database, see [Get metadata for SQL Server operations in Visual Studio using the SQL adapter](../../adapters-and-accelerators/adapter-sql/get-metadata-for-sql-server-operations-in-visual-studio-using-the-sql-adapter.md).</span></span>  
  
## <a name="how-do-i-protect-credentials-when-i-configure-a-send-port-or-a-receive-location"></a><span data-ttu-id="a86ff-113">如何保护凭据时配置发送端口或接收位置？</span><span class="sxs-lookup"><span data-stu-id="a86ff-113">How Do I Protect Credentials When I Configure a Send Port or a Receive Location?</span></span>  
 <span data-ttu-id="a86ff-114">BizTalk 解决方案使用 Microsoft BizTalk Wcf-custom 适配器使用 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="a86ff-114">BizTalk solutions use the Microsoft BizTalk WCF-Custom adapter to consume WCF services.</span></span> <span data-ttu-id="a86ff-115">[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]是使客户端能够使用 SQL Server 数据库，就像 WCF 服务的 WCF 自定义绑定。</span><span class="sxs-lookup"><span data-stu-id="a86ff-115">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] is a WCF custom binding that enables clients to consume the SQL Server database as if it were a WCF service.</span></span> <span data-ttu-id="a86ff-116">BizTalk 解决方案使用[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]通过发送端口和接收位置配置为使用 Wcf-custom 适配器。</span><span class="sxs-lookup"><span data-stu-id="a86ff-116">BizTalk solutions consume the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] through send ports and receive locations that are configured to use the WCF-Custom adapter.</span></span> <span data-ttu-id="a86ff-117">Wcf-custom 适配器，反过来，配置为使用[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]作为其传输。</span><span class="sxs-lookup"><span data-stu-id="a86ff-117">The WCF-Custom adapter is, in turn, configured to use the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] as its transport.</span></span> <span data-ttu-id="a86ff-118">有关如何配置发送端口和接收的端口 （接收位置），包括如何配置 WCF 自定义适配器的详细信息，请参阅[手动配置与 SQL 适配器的物理端口绑定](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="a86ff-118">For more information about how to configure send ports and receive ports (receive locations), including how to configure the WCF-Custom adapter, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span>
  
 <span data-ttu-id="a86ff-119">配置中的 SQL Server 数据库凭据**凭据**选项卡**Wcf-custom 传输属性**对话框中为发送端口或从**其他**选项卡**Wcf-custom 传输属性**对话框中的接收位置。</span><span class="sxs-lookup"><span data-stu-id="a86ff-119">You configure the SQL Server database credentials from the **Credentials** tab of the **WCF-Custom Transport Properties** dialog box for send ports or from the **Other** tab of the **WCF-Custom Transport Properties** dialog box for receive locations.</span></span> <span data-ttu-id="a86ff-120">由于 WCF 自定义适配器支持企业单一登录 (SSO)，可以选择这些选项卡中的任何一个提供用户名和密码或 SSO 关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="a86ff-120">Because the WCF-Custom adapter supports Enterprise Single Sign-On (SSO), you can also choose to provide either a user name and password or an SSO affiliate application on either of these tabs.</span></span> <span data-ttu-id="a86ff-121">以下主题讨论这两个选项。</span><span class="sxs-lookup"><span data-stu-id="a86ff-121">The following topics discuss both options.</span></span>  
  
### <a name="user-name-password-credentials"></a><span data-ttu-id="a86ff-122">用户名密码凭据</span><span class="sxs-lookup"><span data-stu-id="a86ff-122">User Name Password Credentials</span></span>  
 <span data-ttu-id="a86ff-123">您应仅提供用户名和密码从**凭据**（适用于发送端口） 的选项卡或**其他**选项卡 （用于接收位置） 中**Wcf-custom 传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="a86ff-123">You should only supply a user name and password from the **Credentials** tab (for send ports) or the **Other** tab (for receive locations) in the **WCF-Custom Transport Properties** dialog box.</span></span> <span data-ttu-id="a86ff-124">这可确保：</span><span class="sxs-lookup"><span data-stu-id="a86ff-124">This ensures the following:</span></span>  
  
-   <span data-ttu-id="a86ff-125">你的凭据不会显示在**地址 (URI)** 对话框的字段。</span><span class="sxs-lookup"><span data-stu-id="a86ff-125">Your credentials will not be displayed in the **Address (URI)** field of the dialog box.</span></span> <span data-ttu-id="a86ff-126">这可以阻止那些有权访问你的屏幕 （或具有权限，使他们能够查看发送端口或接收位置属性） 查看你的凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-126">This prevents those who have access to your screen (or who have permissions that enable them to view the send port or receive location properties) from seeing your credentials.</span></span>  
  
-   <span data-ttu-id="a86ff-127">如果导出的发送端口或接收端口绑定，你的密码将不写入到绑定文件中。</span><span class="sxs-lookup"><span data-stu-id="a86ff-127">Your password will not be written to the binding file if you export the send port or receive port binding.</span></span> <span data-ttu-id="a86ff-128">这可以防止任何人访问到文件中查看你的密码。</span><span class="sxs-lookup"><span data-stu-id="a86ff-128">This prevents anyone with access to the file from viewing your password.</span></span>  
  
### <a name="enterprise-single-sign-on-and-sso-affiliate-applications"></a><span data-ttu-id="a86ff-129">企业单一登录和 SSO 关联应用程序</span><span class="sxs-lookup"><span data-stu-id="a86ff-129">Enterprise Single Sign-On and SSO Affiliate Applications</span></span>  
 <span data-ttu-id="a86ff-130">你可以配置 Wcf-custom 适配器，以便它使用企业单一登录 (SSO) 来获取 SQL Server 数据库的凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-130">You can configure the WCF-Custom adapter so that it uses Enterprise Single Sign-on (SSO) to get the credentials for the SQL Server database.</span></span> <span data-ttu-id="a86ff-131">SSO 使用数据库和主密钥进行加密和存储用户凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-131">SSO uses a database and a master secret to encrypt and store user credentials.</span></span> <span data-ttu-id="a86ff-132">它还提供服务，以将 Microsoft Windows 帐户映射到用于访问后端系统的辅助凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-132">It also provides services to map Microsoft Windows accounts to secondary credentials that are used to access a back-end system.</span></span> <span data-ttu-id="a86ff-133">通过使用 SSO，您可以映射到的用户名和密码在 SQL Server 数据库上的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="a86ff-133">By using SSO, you can map a Windows account to a user name and password on the SQL Server database.</span></span>  
  
 <span data-ttu-id="a86ff-134">使用 SSO*关联应用程序*并*SSO 映射*将凭据映射到后端系统。</span><span class="sxs-lookup"><span data-stu-id="a86ff-134">SSO uses *affiliate applications* and *SSO mappings* to map credentials to the back-end system.</span></span> <span data-ttu-id="a86ff-135">关联应用程序是指的是一个系统或应用程序需要辅助凭据的 SSO 中的逻辑实体。</span><span class="sxs-lookup"><span data-stu-id="a86ff-135">An affiliate application is a logical entity in SSO that refers to a system or an application that requires secondary credentials.</span></span> <span data-ttu-id="a86ff-136">SSO 映射是与关联应用程序相关联。</span><span class="sxs-lookup"><span data-stu-id="a86ff-136">An SSO mapping is associated with an affiliate application.</span></span> <span data-ttu-id="a86ff-137">它映射到该帐户用于访问关联系统或应用程序的辅助凭据的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="a86ff-137">It maps a Windows account to the secondary credentials used by that account to access the affiliate system or application.</span></span> <span data-ttu-id="a86ff-138">SSO 映射可以与 Windows 用户帐户或组相关联。</span><span class="sxs-lookup"><span data-stu-id="a86ff-138">An SSO mapping can be associated with a Windows user account or with a group.</span></span>  
  
 <span data-ttu-id="a86ff-139">若要使用的 SSO [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]，必须执行以下操作。</span><span class="sxs-lookup"><span data-stu-id="a86ff-139">To use SSO with the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], you must do the following.</span></span>  
  
1.  <span data-ttu-id="a86ff-140">中用于保存 SQL Server 数据库的名称密码凭据的用户的 SSO 创建关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="a86ff-140">Create an affiliate application in SSO to hold the user name password credentials for the SQL Server database.</span></span> <span data-ttu-id="a86ff-141">此步骤通常由具有特殊类型的 SSO 管理权限的人员执行。</span><span class="sxs-lookup"><span data-stu-id="a86ff-141">This step is often performed by someone with special types of SSO administrative privileges.</span></span>  
  
2.  <span data-ttu-id="a86ff-142">创建一个用户或组映射映射到的用户名和密码，以用来建立与 SQL Server 数据库的连接的 Windows 帐户与关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="a86ff-142">Create a user or group mapping for the affiliate application that maps your Windows account to the user name and password that are used to establish a connection with the SQL Server database.</span></span> <span data-ttu-id="a86ff-143">具体取决于您的安装，用户可能能够执行此步骤中，或可能还需要具有特殊类型的 SSO 管理权限的人员。</span><span class="sxs-lookup"><span data-stu-id="a86ff-143">Depending on your installation, a user might be able to perform this step, or it might require someone with special types of SSO administrative privileges.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a86ff-144">为 SSO 配置时，WCF 自定义适配器将使用提供的 SSO 服务从 SSO 数据库中获取 SQL Server 用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="a86ff-144">When configured for SSO, the WCF-Custom adapter uses services provided by SSO to get the SQL Server user name and password from the SSO database.</span></span> <span data-ttu-id="a86ff-145">它提供了这些 （未加密的） 到[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]，以便该适配器可以打开与 SQL Server 数据库的连接。</span><span class="sxs-lookup"><span data-stu-id="a86ff-145">It provides these (unencrypted) to the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)], so that the adapter can open a connection to the SQL Server database.</span></span> <span data-ttu-id="a86ff-146">SSO 提供不加密或保护之间的连接[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]和 SQL Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="a86ff-146">SSO provides no encryption or protection across the connection between the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] and the SQL Server database.</span></span>  
  
 <span data-ttu-id="a86ff-147">有关如何使用 SSO，包括有关如何创建关联应用程序和 SSO 映射信息的信息，请参阅[使用 SSO](../../core/using-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="a86ff-147">For information about how to use SSO, including information about how to create affiliate applications and SSO mappings, see [Using SSO](../../core/using-sso.md).</span></span> <span data-ttu-id="a86ff-148">有关 SSO 的详细信息，请参阅[实现企业单一登录](../../core/implementing-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="a86ff-148">For more general information about SSO, see [Implementing Enterprise Single Sign-On](../../core/implementing-enterprise-single-sign-on.md).</span></span>
  
## <a name="the-acceptcredentialsinuri-binding-property"></a><span data-ttu-id="a86ff-149">AcceptCredentialsInUri 绑定属性</span><span class="sxs-lookup"><span data-stu-id="a86ff-149">The AcceptCredentialsInUri Binding Property</span></span>  
 <span data-ttu-id="a86ff-150">[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]不支持**AcceptCredentialsInUri**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="a86ff-150">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] does not support **AcceptCredentialsInUri** binding property.</span></span> <span data-ttu-id="a86ff-151">在连接 URI 中永远不会允许凭据。</span><span class="sxs-lookup"><span data-stu-id="a86ff-151">Credentials are never permitted in the connection URI.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a86ff-152">请参阅</span><span class="sxs-lookup"><span data-stu-id="a86ff-152">See Also</span></span>  
[<span data-ttu-id="a86ff-153">保护 SQL 应用程序</span><span class="sxs-lookup"><span data-stu-id="a86ff-153">Secure your SQL applications</span></span>](../../adapters-and-accelerators/adapter-sql/secure-your-sql-applications.md)  
[<span data-ttu-id="a86ff-154">最佳做法来保护 SQL 适配器</span><span class="sxs-lookup"><span data-stu-id="a86ff-154">Best practices to secure the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/best-practices-to-secure-the-sql-adapter.md)