---
title: 配置使用的端口绑定文件以使用 SQL 适配器的物理端口绑定 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 95b54357-b23d-4ed7-8e31-bd60ed3e625f
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d01bd33712d2b0b3315afa79d2894d7f81c46845
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22225453"
---
# <a name="configure-a-physical-port-binding-using-a-port-binding-file-to-use-the-sql-adapter"></a><span data-ttu-id="1da29-102">配置使用的端口绑定文件以使用 SQL 适配器的物理端口绑定</span><span class="sxs-lookup"><span data-stu-id="1da29-102">Configure a physical port binding using a port binding file to use the SQL adapter</span></span>
<span data-ttu-id="1da29-103">当你使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]生成一个 SQL Server 项目，以外的架构文件，元数据[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]还会生成端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-103">When you use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] to generate metadata for a SQL Server artifact, other than the schema files, the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also generates a port binding file.</span></span> <span data-ttu-id="1da29-104">你可以将此绑定文件导入你的 BizTalk 应用程序创建物理发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-104">You can import this binding file into your BizTalk application to create a physical send or receive port.</span></span> <span data-ttu-id="1da29-105">有关导入绑定文件的说明，请参阅[重用适配器绑定](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="1da29-105">For instructions on importing binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span> <span data-ttu-id="1da29-106">如果你导入此绑定文件，你无需手动创建物理发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-106">If you import this binding file, you do not have to manually create a physical send or receive port.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1da29-107">在使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，如果未指定的字符串类型的绑定属性的值，并且其默认值为 null，然后，绑定属性将不可用的绑定中。</span><span class="sxs-lookup"><span data-stu-id="1da29-107">While using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], if you do not specify a value for a binding property of type string and whose default value is null then that binding property will not be available in the binding file.</span></span> <span data-ttu-id="1da29-108">你必须手动添加绑定属性，并且其值在绑定文件中，如果需要。</span><span class="sxs-lookup"><span data-stu-id="1da29-108">You must manually add the binding property and its value in the binding file, if required.</span></span>  
  
 <span data-ttu-id="1da29-109">创建始终使用端口绑定文件的端口创建双向发送端口或单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-109">Creating a port using the port binding file always creates a two-way send port or a one-way receive port.</span></span> <span data-ttu-id="1da29-110">如果你想要创建单向发送端口，则可以创建它使用的步骤手动[手动配置到 SQL 适配器的物理端口绑定](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="1da29-110">If you want to create a one-way send port, you can create it manually using the steps at [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="1da29-111">或者，你可以按照本主题，以修改要创建单向发送端口的端口绑定文件中所述的解决方法。</span><span class="sxs-lookup"><span data-stu-id="1da29-111">Or, you can follow the workarounds documented in this topic to modify the port binding file to create one-way send ports.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1da29-112">为入站的操作，绑定文件的端口将始终会创建单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-112">For inbound operations, the port binding file will always create a one-way receive port.</span></span> <span data-ttu-id="1da29-113">这是因为[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]仅支持单向接收端口的入站操作。</span><span class="sxs-lookup"><span data-stu-id="1da29-113">This is because the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] only supports one-way receive port for inbound operations.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="1da29-114">使用[!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)]不会创建使用该可以创建一个 WCF SQL 端口的端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-114">Using the [!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)] does not create a port binding file using which you can create a WCF-SQL port.</span></span> <span data-ttu-id="1da29-115">但是，您无法对生成的端口绑定文件进行一些更改[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]并用它来创建 WCF SQL 端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-115">However, you could make some changes to the port binding file generated by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] and use it to create a WCF-SQL port.</span></span> <span data-ttu-id="1da29-116">有关详细信息，请参阅[配置端口绑定文件生成使用使用适配器服务外接程序使用 WCF SQL 端口](#BKMK_Create_WCF_SQL)。</span><span class="sxs-lookup"><span data-stu-id="1da29-116">For more information, see [Configuring a WCF-SQL Port Using the Port Binding File Generated Using Consume Adapter Service Add-in](#BKMK_Create_WCF_SQL).</span></span>  
  
 <span data-ttu-id="1da29-117">以下是你必须了解与绑定有关的一些要点文件[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]生成：</span><span class="sxs-lookup"><span data-stu-id="1da29-117">Following are some key points that you must understand with respect to the binding file that the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] generates:</span></span>  
  
-   <span data-ttu-id="1da29-118">使用特定的命名约定创建这些文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-118">The files are created with a specific naming convention.</span></span> <span data-ttu-id="1da29-119">如果你生成出站操作的元数据，即，将消息发送到 SQL Server，文件的名称 WcfSendPort_SqlAdapterBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="1da29-119">If you generated metadata for outbound operations, that is, to send messages to SQL Server, the name of the file is WcfSendPort_SqlAdapterBinding_Custom.bindinginfo.xml.</span></span>  
  
     <span data-ttu-id="1da29-120">如果生成入站操作的元数据，即，从 SQL Server，接收消息的文件名称 WcfReceivePort_SqlAdapterBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="1da29-120">If you generated metadata for inbound operations, that is, to receive messages from SQL Server, the name of the file is WcfReceivePort_SqlAdapterBinding_Custom.bindinginfo.xml.</span></span>  
  
-   <span data-ttu-id="1da29-121">该文件包含有关绑定配置、 绑定类型、 终结点 URI，和基于为其生成元数据的操作的端口操作的信息。</span><span class="sxs-lookup"><span data-stu-id="1da29-121">The file contains information about the binding configuration, the binding type, the endpoint URI, and the port action based on the operations for which metadata was generated.</span></span> <span data-ttu-id="1da29-122">当此绑定文件导入你的 BizTalk 应用程序，以创建端口中时，在端口上自动设置所有所需配置的物理端口的相关信息。</span><span class="sxs-lookup"><span data-stu-id="1da29-122">When you import this binding file into your BizTalk application to create a port, all the relevant information required to configure a physical port is automatically set on the port.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="1da29-123">默认情况下，发送端口上的操作映射到为其生成元数据的操作名称。</span><span class="sxs-lookup"><span data-stu-id="1da29-123">By default, the action on the send port is mapped to the operation name for which you generated metadata.</span></span> <span data-ttu-id="1da29-124">例如，如果您生成在 Customer 表上执行插入操作的元数据，则端口上的操作设置为`<Operation Name="Insert" Action="TableOp/Insert/dbo/CustomerTable" />`。</span><span class="sxs-lookup"><span data-stu-id="1da29-124">For example, if you generate metadata for the Insert operation on the Customer table, the action on the port is set to `<Operation Name="Insert" Action="TableOp/Insert/dbo/CustomerTable" />`.</span></span> <span data-ttu-id="1da29-125">但是，创建 BizTalk 业务流程中的逻辑发送端口上的操作名称可能不能相同。</span><span class="sxs-lookup"><span data-stu-id="1da29-125">However, the operation name on the logical send port you create in the BizTalk orchestration might not be the same.</span></span> <span data-ttu-id="1da29-126">你必须确保操作名称中的逻辑发送端口 （在 BizTalk 业务流程） 和物理发送端口 (在[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台) 相同。</span><span class="sxs-lookup"><span data-stu-id="1da29-126">You must ensure that the operation name in the logical send port (in the BizTalk orchestration) and the physical send port (in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console) are the same.</span></span> <span data-ttu-id="1da29-127">如果没有，你将通过发送端口将消息发送到 SQL Server 时收到错误。</span><span class="sxs-lookup"><span data-stu-id="1da29-127">If not, you will receive an error while sending messages to SQL Server through the send port.</span></span>  
  
-   <span data-ttu-id="1da29-128">只需提供要连接到 SQL Server 的端口的凭据。</span><span class="sxs-lookup"><span data-stu-id="1da29-128">You only need to provide the credentials for the port to connect to SQL Server.</span></span> <span data-ttu-id="1da29-129">尽管绑定文件未保留与要连接的用户名称，但出于安全原因绑定文件不包含密码。</span><span class="sxs-lookup"><span data-stu-id="1da29-129">Although the binding file does retain the user name with which to connect, for security reasons the binding file does not contain the password.</span></span>  
  
## <a name="key-considerations-for-using-the-port-binding-file"></a><span data-ttu-id="1da29-130">使用的端口绑定文件的重要注意事项</span><span class="sxs-lookup"><span data-stu-id="1da29-130">Key Considerations for Using the Port Binding File</span></span>  
  
-   <span data-ttu-id="1da29-131">当你导入绑定文件时，你可能会收到对话框消息，通知绑定文件中的 BizTalk 应用程序名称不到导入的绑定文件的应用程序名称不匹配。</span><span class="sxs-lookup"><span data-stu-id="1da29-131">When you import the binding file, you might get a dialog message informing that the BizTalk application name in the binding file does not match the application name to which you are importing the binding file.</span></span> <span data-ttu-id="1da29-132">你可以安全地忽略此消息并继续。</span><span class="sxs-lookup"><span data-stu-id="1da29-132">You can safely ignore this message and continue.</span></span>  
  
-   <span data-ttu-id="1da29-133">绑定文件还包含端口的名称和接收位置。</span><span class="sxs-lookup"><span data-stu-id="1da29-133">The binding file also contains names of ports and receive locations.</span></span> <span data-ttu-id="1da29-134">如果 BizTalk 应用程序向其导入的绑定文件创建一个端口或接收位置与在相同的 BizTalk 应用程序中的现有端口具有相同的名称，将出现错误。</span><span class="sxs-lookup"><span data-stu-id="1da29-134">If the BizTalk application to which you are importing the binding file creates a port or a receive location that has the same name as an already existing port in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="1da29-135">你必须手动编辑要指定端口的唯一名称，或接收位置的绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-135">You must manually edit the binding file to specify a unique name for the ports or receive locations.</span></span>  
  
-   <span data-ttu-id="1da29-136">绑定文件还包含有关连接 URI 的信息。</span><span class="sxs-lookup"><span data-stu-id="1da29-136">The binding file also contains information about the connection URI.</span></span> <span data-ttu-id="1da29-137">如果绑定文件创建为接收位置相同的 BizTalk 应用程序中已存在具有相同接收 URI 的接收位置，则将出现错误。</span><span class="sxs-lookup"><span data-stu-id="1da29-137">If the binding file creates a receive location that has the same receive URI as an already existing receive location in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="1da29-138">你必须手动编辑该绑定文件以指定一个唯一的 URI。</span><span class="sxs-lookup"><span data-stu-id="1da29-138">You must manually edit the binding file to specify a unique URI.</span></span>  
  
-   <span data-ttu-id="1da29-139">默认情况下，出站操作的端口绑定文件始终包含双向发送端口的定义。</span><span class="sxs-lookup"><span data-stu-id="1da29-139">By default, the port binding file for outbound operations always contains definitions for a two-way send port.</span></span> <span data-ttu-id="1da29-140">当你导入此文件在 BizTalk 应用程序时，它会创建双向发送端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-140">When you import this file in a BizTalk application, it creates a two-way send port.</span></span> <span data-ttu-id="1da29-141">但是，您可能必须有一个单向发送端口业务流程。</span><span class="sxs-lookup"><span data-stu-id="1da29-141">However, you may have an orchestration that has a one-way send port.</span></span> <span data-ttu-id="1da29-142">因此，当你配置此类业务流程，并使用通过导入绑定文件创建的端口，端口不可用在列表中。</span><span class="sxs-lookup"><span data-stu-id="1da29-142">So, when you configure such an orchestration and use the port created by importing the binding file, the port is not available in the list.</span></span> <span data-ttu-id="1da29-143">这是因为业务流程的一部分创建的逻辑端口是单向的端口，而在业务流程中创建的物理端口是双向端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-143">This happens because the logical port you created as part of the orchestration is a one-way port while the physical port created in the orchestration is a two-way port.</span></span> <span data-ttu-id="1da29-144">在这种情况下，你可以编辑绑定文件以进行以下更改：</span><span class="sxs-lookup"><span data-stu-id="1da29-144">In such cases, you can edit the binding file to make the following changes:</span></span>  
  
    |<span data-ttu-id="1da29-145">若要了解</span><span class="sxs-lookup"><span data-stu-id="1da29-145">For this</span></span>|<span data-ttu-id="1da29-146">操作</span><span class="sxs-lookup"><span data-stu-id="1da29-146">Do this</span></span>|  
    |--------------|-------------|  
    |<span data-ttu-id="1da29-147">若要编辑要配置的端口绑定文件单向发送端口</span><span class="sxs-lookup"><span data-stu-id="1da29-147">To edit the port binding file to configure a one-way send port</span></span>|<span data-ttu-id="1da29-148">1.在以下摘录内容中，将的值更改**IsTwoWay**属性**false**。</span><span class="sxs-lookup"><span data-stu-id="1da29-148">1.  In the following excerpt, change the value of the **IsTwoWay** property to **false**.</span></span> <span data-ttu-id="1da29-149">最初，此值设置为**true**。</span><span class="sxs-lookup"><span data-stu-id="1da29-149">Originally, this is set to **true**.</span></span><br />     `<SendPort Name="port_name" IsStatic="true" IsTwoWay="false" BindingOption="0">`<br /><span data-ttu-id="1da29-150">2.注释掉下面的摘录：</span><span class="sxs-lookup"><span data-stu-id="1da29-150">2.  Comment out the following excerpts:</span></span><br />     `<ReceivePipeline Name="Microsoft.BizTalk.DefaultPipelines.XMLReceive"    FullyQualifiedName="Microsoft.BizTalk.DefaultPipelines.XMLReceive,    Microsoft.BizTalk.DefaultPipelines, Version=3.0.1.0, Culture=neutral,    PublicKeyToken=token" Type="1" TrackingOption="None" Description=""/>`<br />     `<ReceivePipelineData xsi:nil="true" />`|  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="1da29-151">为入站的操作，绑定文件的端口将始终会创建单向接收端口。</span><span class="sxs-lookup"><span data-stu-id="1da29-151">For inbound operations, the port binding file will always create a one-way receive port.</span></span> <span data-ttu-id="1da29-152">这是因为[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]仅支持单向接收端口的入站操作。</span><span class="sxs-lookup"><span data-stu-id="1da29-152">This is because the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] only supports one-way receive port for inbound operations.</span></span>  
  
##  <a name="BKMK_Create_WCF_SQL"></a><span data-ttu-id="1da29-153">配置 WCF SQL 端口使用生成使用使用的端口绑定文件适配器服务外接程序</span><span class="sxs-lookup"><span data-stu-id="1da29-153">Configure a WCF-SQL Port Using the Port Binding File Generated Using Consume Adapter Service Add-in</span></span>  
 <span data-ttu-id="1da29-154">[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]还会创建，您可以导入的端口绑定文件[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="1da29-154">The [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also creates a port binding file that you can import in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="1da29-155">你可以使用相同的端口绑定文件也可用来创建中的 BizTalk WCF SQL 端口[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="1da29-155">You can use the same port binding file to also create the BizTalk WCF-SQL port in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="1da29-156">但是，在创建 WCF SQL 端口之前必须执行以下任务来修改端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-156">However, before creating WCF-SQL port you must perform the following tasks to modify the port binding file.</span></span>  
  
1.  <span data-ttu-id="1da29-157">在文本编辑器中打开端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-157">Open the port binding file in a text editor.</span></span>  
  
2.  <span data-ttu-id="1da29-158">搜索和替换与其添加中的 WCF SQL 适配器的名称替换"WCF 自定义"[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="1da29-158">Search and replace “WCF-Custom” with the name with which you added the WCF-SQL adapter in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="1da29-159">例如，如果你添加为"SQLAdapter"WCF SQL 适配器，将"WCF 自定义"与"SQLAdapter"。</span><span class="sxs-lookup"><span data-stu-id="1da29-159">For example, if you added the WCF-SQL adapter as “SQLAdapter”, replace “WCF-Custom” with “SQLAdapter”.</span></span>  
  
3.  <span data-ttu-id="1da29-160">搜索"ConfigurationClsid"属性，并将该特性的现有值替换为"59B35D03-6A06-4734-A249-EF561254ECF7"。</span><span class="sxs-lookup"><span data-stu-id="1da29-160">Search for the “ConfigurationClsid” attribute, and replace the existing value of the attribute with “59B35D03-6A06-4734-A249-EF561254ECF7”.</span></span>  
  
4.  <span data-ttu-id="1da29-161">保存并关闭绑定文件。</span><span class="sxs-lookup"><span data-stu-id="1da29-161">Save and close the binding file.</span></span>  
  
5.  <span data-ttu-id="1da29-162">导入中的绑定文件[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="1da29-162">Import the binding file in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="1da29-163">有关如何导入的绑定文件的说明，请参阅[重用适配器绑定](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="1da29-163">For instructions on how to import the binding file, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="1da29-164">另请参阅</span><span class="sxs-lookup"><span data-stu-id="1da29-164">See Also</span></span>  
[<span data-ttu-id="1da29-165">开发具有 SQL 适配器的 BizTalk 应用程序的构建基块</span><span class="sxs-lookup"><span data-stu-id="1da29-165">Building blocks to develop BizTalk applications with the SQL adapter</span></span>](../../adapters-and-accelerators/adapter-sql/building-blocks-to-develop-biztalk-applications-with-the-sql-adapter.md)