---
title: "交互适配器安全体系结构 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a4924b8c-1fda-4a0c-b9be-8f2ccba38013
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: de0eee57daec102507a9e502e3146e1cfcdec723
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="interact-adapter-security-architecture"></a><span data-ttu-id="c16d4-102">交互适配器安全体系结构</span><span class="sxs-lookup"><span data-stu-id="c16d4-102">InterAct Adapter Security Architecture</span></span>
<span data-ttu-id="c16d4-103">使用 SWIFTNet 链接 (SNL) 和 SWIFTAlliance 网关 （压降） 中的固有的证书和加密功能实现的消息发送和接收的安全性。</span><span class="sxs-lookup"><span data-stu-id="c16d4-103">Security for the message transmission and receipt is implemented using the certificate and crypto features inherent in SWIFTNet Link (SNL) and the SWIFTAlliance Gateway (SAG).</span></span> <span data-ttu-id="c16d4-104">SWIFT 建议服务设计为将"端到端"签名应用的交互 — 也就是说，来签署请求和响应消息。</span><span class="sxs-lookup"><span data-stu-id="c16d4-104">SWIFT recommends that services designed for InterAct to apply an “end-to-end” signature—that is, to sign both request and response messages.</span></span>  
  
 <span data-ttu-id="c16d4-105">SWIFTNet 链接安全模块通过实现加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-105">The cryptographic operations are implemented by the security module of SWIFTNet Link.</span></span> <span data-ttu-id="c16d4-106">此模块将允许签名和加密使用 PKI 密钥。</span><span class="sxs-lookup"><span data-stu-id="c16d4-106">This module allows signature and encryption using PKI keys.</span></span> <span data-ttu-id="c16d4-107">性质和加密操作的范围被指定为传递给 Api 的请求和响应控件数据结构的一部分。</span><span class="sxs-lookup"><span data-stu-id="c16d4-107">The nature and extent of cryptography operations are specified as part of the Request and Response Control data structures passed to the APIs.</span></span>  
  
 <span data-ttu-id="c16d4-108">SWIFTNet 支持签名/加密 RequestPayload 或 ResponsePayload。</span><span class="sxs-lookup"><span data-stu-id="c16d4-108">SWIFTNet supports the sign/encrypt of the RequestPayload or ResponsePayload.</span></span> <span data-ttu-id="c16d4-109">此外可以签名 RequestHeader 或 ResponseHeader。</span><span class="sxs-lookup"><span data-stu-id="c16d4-109">Also the RequestHeader or ResponseHeader can be signed.</span></span>  
  
## <a name="signingencrypting-requests-and-responses"></a><span data-ttu-id="c16d4-110">签名/加密请求和响应</span><span class="sxs-lookup"><span data-stu-id="c16d4-110">Signing/Encrypting Requests and Responses</span></span>  
 <span data-ttu-id="c16d4-111">应用 SWIFTNet 交互请求的元素上的加密操作的规则如下所示：</span><span class="sxs-lookup"><span data-stu-id="c16d4-111">The rules for applying cryptographic operations on SWIFTNet InterAct Request elements are as follows:</span></span>  
  
-   <span data-ttu-id="c16d4-112">RequestControl： 这是要发送到 SWIFTNet 仅。</span><span class="sxs-lookup"><span data-stu-id="c16d4-112">RequestControl: this is destined to SWIFTNet only.</span></span> <span data-ttu-id="c16d4-113">SWIFTNet 将 RequestDescriptor 传递到响应方 （和某些元素还与请求者）。</span><span class="sxs-lookup"><span data-stu-id="c16d4-113">SWIFTNet delivers a RequestDescriptor to the responder (and some elements also to the Requestor).</span></span> <span data-ttu-id="c16d4-114">因此，可以对其不执行任何客户端进程向服务器处理加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-114">Therefore, no client process to server process cryptographic operation can be performed on it.</span></span>  
  
-   <span data-ttu-id="c16d4-115">RequestE2EControl： 此元素包含的信息，以确保可靠的端到端消息传送。</span><span class="sxs-lookup"><span data-stu-id="c16d4-115">RequestE2EControl: this element contains information to ensure reliable end-to-end messaging.</span></span> <span data-ttu-id="c16d4-116">可以在其上不执行任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-116">No cryptographic operation can be performed on it.</span></span>  
  
-   <span data-ttu-id="c16d4-117">RequestHeader： 它是由 SWIFTNet 和传达到响应方保持不变。</span><span class="sxs-lookup"><span data-stu-id="c16d4-117">RequestHeader: it is used by SWIFTNet and conveyed unchanged to the Responder.</span></span> <span data-ttu-id="c16d4-118">因此，这可以仅进行签名。</span><span class="sxs-lookup"><span data-stu-id="c16d4-118">Therefore, this can only be signed.</span></span>  
  
-   <span data-ttu-id="c16d4-119">RequestPayload： 可以对这执行任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-119">RequestPayload: any cryptographic operations can be performed on this.</span></span>  
  
-   <span data-ttu-id="c16d4-120">加密的元素： 这些与此请求以前激活加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-120">Crypto element(s): these relate to previously activated cryptographic operations on this Request.</span></span> <span data-ttu-id="c16d4-121">可以对这些不执行任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-121">No cryptographic operations can be performed on these.</span></span>  
  
 <span data-ttu-id="c16d4-122">将加密函数应用于 SWIFTNet 交互响应的规则包括：</span><span class="sxs-lookup"><span data-stu-id="c16d4-122">The rules for applying cryptographic functions on SWIFTNet InterAct responses are:</span></span>  
  
-   <span data-ttu-id="c16d4-123">ResponseControl： 这是要发送到 SWIFTNet 仅。</span><span class="sxs-lookup"><span data-stu-id="c16d4-123">ResponseControl: this is destined to SWIFTNet only.</span></span> <span data-ttu-id="c16d4-124">SWIFTNet 将 ResponseDescriptor 提供给请求者。</span><span class="sxs-lookup"><span data-stu-id="c16d4-124">SWIFTNet delivers a ResponseDescriptor to the Requestor.</span></span> <span data-ttu-id="c16d4-125">因此，向客户端处理加密操作，没有服务器进程可以对它执行。</span><span class="sxs-lookup"><span data-stu-id="c16d4-125">Therefore, no server process to client process cryptographic operation, can be performed on it.</span></span>  
  
-   <span data-ttu-id="c16d4-126">ResponseE2EControl： 此元素包含的信息，以确保可靠的端到端消息传送。</span><span class="sxs-lookup"><span data-stu-id="c16d4-126">ResponseE2EControl: this element contains information to ensure reliable end-to-end messaging.</span></span> <span data-ttu-id="c16d4-127">可以在其上不执行任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-127">No cryptographic operation can be performed on it.</span></span>  
  
-   <span data-ttu-id="c16d4-128">ResponseHeader： 此元素可以进行签名 （它传输不变到请求者）。</span><span class="sxs-lookup"><span data-stu-id="c16d4-128">ResponseHeader: this element can be signed (it is transferred unchanged to the Requestor).</span></span>  
  
-   <span data-ttu-id="c16d4-129">ResponsePayload： 可以进行加密和/或签名。</span><span class="sxs-lookup"><span data-stu-id="c16d4-129">ResponsePayload: can be encrypted and/or signed.</span></span>  
  
-   <span data-ttu-id="c16d4-130">加密的元素： 这些与此请求以前激活加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-130">Crypto element(s): these relate to previously activated cryptographic operations on this Request.</span></span> <span data-ttu-id="c16d4-131">可以对这些不执行任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-131">No cryptographic operations can be performed on these.</span></span>  
  
## <a name="receiving-requests-with-cryptography"></a><span data-ttu-id="c16d4-132">接收请求加密</span><span class="sxs-lookup"><span data-stu-id="c16d4-132">Receiving Requests with Cryptography</span></span>  
 <span data-ttu-id="c16d4-133">服务器进程可能会收到已受到请求者的加密操作的请求。</span><span class="sxs-lookup"><span data-stu-id="c16d4-133">A server process may receive Requests that were subjected to cryptographic operations by the Requestor.</span></span> <span data-ttu-id="c16d4-134">传入的请求包含启用反向加密操作的所有相关信息。</span><span class="sxs-lookup"><span data-stu-id="c16d4-134">The incoming Request contains all relevant information to enable the reverse cryptographic operations.</span></span> <span data-ttu-id="c16d4-135">会因此现在将有效地执行运算的解密和验证函数的 CryptoInternal 信息。</span><span class="sxs-lookup"><span data-stu-id="c16d4-135">The CryptoInternal information is such that the decryption and verification function will now effectively operate.</span></span>  
  
 <span data-ttu-id="c16d4-136">服务器进程将需要激活的解密需要发生 DN 的安全上下文</span><span class="sxs-lookup"><span data-stu-id="c16d4-136">The server process will need to activate the security contexts of the DN for which decryption needs to take place</span></span>  
  
 <span data-ttu-id="c16d4-137">然后将反向加密操作由修改请求验证 (解密） 的方式，将发出原始请求可用原封不动地到服务器过程中，因为最初将它传送到加密客户端进程操作。</span><span class="sxs-lookup"><span data-stu-id="c16d4-137">The Request will then be modified by the reverse cryptographic operations (verify, decrypt) in such a way that the original Request will be made available unaltered to the server process, as it was originally delivered by the client process to the cryptographic operations.</span></span> <span data-ttu-id="c16d4-138">响应，类似的处理会发生。</span><span class="sxs-lookup"><span data-stu-id="c16d4-138">For the Response, similar processing takes place.</span></span> <span data-ttu-id="c16d4-139">务必要实现的签名验证不仅验证的签署未被更改，但其将进行身份验证是否签名者为正版。</span><span class="sxs-lookup"><span data-stu-id="c16d4-139">It is important to realize that verification of a signature will not only verify what was signed was not altered, but that it will authenticate whether the signer is genuine.</span></span> <span data-ttu-id="c16d4-140">这要求 SignDN 使用有效的证书。</span><span class="sxs-lookup"><span data-stu-id="c16d4-140">This requires that the SignDN uses a valid certificate.</span></span> <span data-ttu-id="c16d4-141">有效的证书是证书尚未吊销 （在证书吊销列表中，保留集中在 SWIFTNet 内查找）。</span><span class="sxs-lookup"><span data-stu-id="c16d4-141">A valid certificate is a certificate has not been revoked (a lookup in the Certificate Revocation List, kept centrally within SWIFTNet).</span></span>  
  
## <a name="activation"></a><span data-ttu-id="c16d4-142">激活</span><span class="sxs-lookup"><span data-stu-id="c16d4-142">Activation</span></span>  
 <span data-ttu-id="c16d4-143">SWIFTNet 链接可以运行验证和解密在自动模式下的所有传入的请求和传入响应。</span><span class="sxs-lookup"><span data-stu-id="c16d4-143">SWIFTNet Link can operate verification and decryption in automatic mode for all incoming Requests and incoming Responses.</span></span> <span data-ttu-id="c16d4-144">这意味着 SWIFTNet 链接将自动处理 （验证和解密） 最后一个加密阻止所有传入的请求 （服务器端） 或传入响应 （客户端）。</span><span class="sxs-lookup"><span data-stu-id="c16d4-144">This means that SWIFTNet Link will automatically process (verify and decrypt) the last crypto block of all incoming Requests (server side) or incoming Responses (client side).</span></span> <span data-ttu-id="c16d4-145">先决条件都已打开解密 （如果请求解密） 所需的安全上下文并且都具有已 SWIFTNet 链接在自动模式下 （此设置为自动模式下由 Sw:InitRequest 或 Sw:HandleInitResponse，未初始化设置为"自动"CryptoMode 或更好地仍"高级"交互。</span><span class="sxs-lookup"><span data-stu-id="c16d4-145">The prerequisites are that the security context required for decryption (if decryption is requested) is opened and that SWIFTNet Link has been initialized in automatic mode (this setting to automatic mode is done on the Sw:InitRequest or Sw:HandleInitResponse, by setting the CryptoMode to "Automatic" or better still "Advanced" for InterAct.</span></span> <span data-ttu-id="c16d4-146">(我们将始终使用"高级"对于交互适配器，因为这会使客户端或服务器应用程序窗体中恢复意外的加密通过远程位置，或从过期的证书。</span><span class="sxs-lookup"><span data-stu-id="c16d4-146">(We will always use “Advanced” for the InterAct Adapter, as this allows the client or server application to recover form unexpected encryption by the remote side, or from an expired certificate.</span></span>  
  
 <span data-ttu-id="c16d4-147">如果字段 RequestCrypto (ResponseCrypto) 初始化为"TRUE"的请求 （响应） RequestControl (ResponseControl) 中，SWIFTNet 链接进行操作签名和加密的自动在一个传出的请求 （或一个传出的响应）。</span><span class="sxs-lookup"><span data-stu-id="c16d4-147">SWIFTNet Link operates signature and encryption automatically on one outgoing Request (or one outgoing Response) if the field RequestCrypto (ResponseCrypto) is initialized to “TRUE” in the RequestControl (ResponseControl) of the Request (Response).</span></span>  
  
 <span data-ttu-id="c16d4-148">在这种情况下 SWIFTNet 链接处理的最后一个加密块。</span><span class="sxs-lookup"><span data-stu-id="c16d4-148">In that case SWIFTNet Link processes the last crypto block.</span></span> <span data-ttu-id="c16d4-149">先决条件是，打开所需的签名 （如果请求签名） 的安全上下文，加密的块是在使用上的签名和加密所需，指示请求，并存在 RequestCrypto (ResponseCrypto)标志中 RequestControl (ResponseControl) 设置为"TRUE"。</span><span class="sxs-lookup"><span data-stu-id="c16d4-149">The prerequisites are that the security context required for signature (if signature is requested) is opened, that the crypto block is present in the Request with indication on the signature and encryption required, and that the RequestCrypto (ResponseCrypto) flag is set to “TRUE” in the RequestControl (ResponseControl).</span></span> <span data-ttu-id="c16d4-150">此操作始终后，而不考虑使用在客户端或服务器初始化 CryptoMode。</span><span class="sxs-lookup"><span data-stu-id="c16d4-150">This is always done, irrespective of the CryptoMode used at initialization of the client or server.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c16d4-151">另请参阅</span><span class="sxs-lookup"><span data-stu-id="c16d4-151">See Also</span></span>  
 <span data-ttu-id="c16d4-152">[交互适配器体系结构](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-152">[InterAct Adapter Architecture](../../adapters-and-accelerators/fileact-interact/interact-adapter-architecture.md) </span></span>  
 <span data-ttu-id="c16d4-153">[交互适配器组件](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-153">[InterAct Adapter Components](../../adapters-and-accelerators/fileact-interact/interact-adapter-components.md) </span></span>  
 <span data-ttu-id="c16d4-154">[适用于业务 Exchange 交互适配器消息](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-154">[InterAct Adapter Messages for Business Exchange](../../adapters-and-accelerators/fileact-interact/interact-adapter-messages-for-business-exchange.md) </span></span>  
 <span data-ttu-id="c16d4-155">[交互适配器客户端应用程序](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-155">[InterAct Adapter Client Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-client-application.md) </span></span>  
 <span data-ttu-id="c16d4-156">[交互适配器服务器应用程序](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-156">[InterAct Adapter Server Application](../../adapters-and-accelerators/fileact-interact/interact-adapter-server-application.md) </span></span>  
 <span data-ttu-id="c16d4-157">[交互适配器存储和转发](../../adapters-and-accelerators/fileact-interact/interact-adapter-store-and-forward.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-157">[InterAct Adapter Store and Forward](../../adapters-and-accelerators/fileact-interact/interact-adapter-store-and-forward.md) </span></span>  
 <span data-ttu-id="c16d4-158">[交互适配器端到端可靠传递](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-158">[InterAct Adapter End-to-End Reliable Delivery](../../adapters-and-accelerators/fileact-interact/interact-adapter-end-to-end-reliable-delivery.md) </span></span>  
 <span data-ttu-id="c16d4-159">[交互适配器状态监视](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span><span class="sxs-lookup"><span data-stu-id="c16d4-159">[InterAct Adapter Status Monitoring](../../adapters-and-accelerators/fileact-interact/interact-adapter-status-monitoring.md) </span></span>  
 [<span data-ttu-id="c16d4-160">交互适配器不可否认性</span><span class="sxs-lookup"><span data-stu-id="c16d4-160">InterAct Adapter Non-Repudiation</span></span>](../../adapters-and-accelerators/fileact-interact/interact-adapter-non-repudiation.md)