---
title: 使用 Oracle 数据库中的大型对象数据类型运行对表的操作 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- operations, performing on tables
- operations, performing on LOB data
ms.assetid: 74276b85-daf1-4d0f-92f9-46d5c27a95a6
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 407c161590753a1d6d31b03f1b97eb86ddb58723
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65376340"
---
# <a name="run-operations-on-tables-with-large-object-data-types-in-oracle-database"></a><span data-ttu-id="4ad4c-102">使用 Oracle 数据库中的大型对象数据类型运行对表的操作</span><span class="sxs-lookup"><span data-stu-id="4ad4c-102">Run operations on tables with large object data types in Oracle Database</span></span>
<span data-ttu-id="4ad4c-103">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]对 Oracle 大型对象 (LOB) 数据类型提供支持：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-103">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] provides support for the Oracle large object (LOB) data types:</span></span>  

- <span data-ttu-id="4ad4c-104">二进制大型对象 (BLOB)</span><span class="sxs-lookup"><span data-stu-id="4ad4c-104">Binary large object (BLOB)</span></span>  

- <span data-ttu-id="4ad4c-105">字符大型对象 (CLOB)</span><span class="sxs-lookup"><span data-stu-id="4ad4c-105">Character large object (CLOB)</span></span>  

- <span data-ttu-id="4ad4c-106">国家/地区字符大型对象 (NCLOB)</span><span class="sxs-lookup"><span data-stu-id="4ad4c-106">National character large object (NCLOB)</span></span>  

- <span data-ttu-id="4ad4c-107">二进制文件 (BFILE)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-107">Binary file (BFILE).</span></span> <span data-ttu-id="4ad4c-108">有关详细信息，请参阅[对包含 BFILE 数据类型，请使用 BizTalk Server 的 Oracle 数据库中的表执行操作](../../adapters-and-accelerators/adapter-oracle-database/run-operations-on-tables-with-bfile-data-types-in-oracle-db-using-biztalk.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-108">For more information, see [Performing Operations on Tables with BFILE Data Types in Oracle Database using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/run-operations-on-tables-with-bfile-data-types-in-oracle-db-using-biztalk.md).</span></span>  

  <span data-ttu-id="4ad4c-109">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]呈现为包含 LOB 列的表的 ReadLOB 和 UpdateLOB 操作为此目的。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-109">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] does this by surfacing the ReadLOB and UpdateLOB operations for tables that contain LOB columns.</span></span> <span data-ttu-id="4ad4c-110">有关这些操作的详细信息请参阅[对表和视图，包含 LOB 数据在 Oracle 数据库中操作](../../adapters-and-accelerators/adapter-oracle-database/operations-on-tables-and-views-that-contain-lob-data-in-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-110">For more information about these operations see [Operations on Tables and Views That Contain LOB Data in Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/operations-on-tables-and-views-that-contain-lob-data-in-oracle-database.md).</span></span> <span data-ttu-id="4ad4c-111">有关调用这些操作的 SOAP 消息的结构的详细信息，请参阅[特殊 LOB 操作的消息架构](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-111">For more information about the structure of the SOAP message for invoking these operations, see [Message Schemas for Special LOB Operations](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md).</span></span>  

> [!NOTE]
>  <span data-ttu-id="4ad4c-112">使用时[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]与[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，ReadLOB 操作不支持从 Oracle 数据库的流式处理 LOB 类型数据。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-112">When using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], the ReadLOB operation does not support streaming LOB type data from an Oracle database.</span></span> <span data-ttu-id="4ad4c-113">将数据从 Oracle 数据库使用的流式传输 LOB[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]应改为使用选择的操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-113">To stream LOB data from an Oracle database using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] you should instead use the Select operation.</span></span> <span data-ttu-id="4ad4c-114">有关流式处理的详细信息，请参阅[Oracle 数据库中的 LOB 数据类型的流式处理支持](../../adapters-and-accelerators/adapter-oracle-database/streaming-support-for-lob-data-types-in-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-114">For more information about streaming, see [Streaming Support for LOB Data Types in Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/streaming-support-for-lob-data-types-in-oracle-database.md).</span></span> <span data-ttu-id="4ad4c-115">此外，从 Oracle 数据库 ReadLOB 操作响应将失败 WSDL 的验证。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-115">Also, the response from the Oracle database for the ReadLOB operation will fail validation against the WSDL.</span></span> <span data-ttu-id="4ad4c-116">了解如何解决失败，请参阅[故障排除操作问题](https://msdn.microsoft.com/library/dd787883.aspx)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-116">For instructions on how to workaround the failure, see [Troubleshooting operational issues](https://msdn.microsoft.com/library/dd787883.aspx).</span></span>  

## <a name="how-to-perform-operations-on-lob-data"></a><span data-ttu-id="4ad4c-117">如何对 LOB 数据执行操作？</span><span class="sxs-lookup"><span data-stu-id="4ad4c-117">How to Perform Operations on LOB Data?</span></span>  
 <span data-ttu-id="4ad4c-118">执行对 Oracle 数据库使用的操作[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]与[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]涉及过程中所述的任务[构建基块来开发 BizTalk 应用程序与 Oracle 数据库](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-118">Performing an operation on an Oracle database using [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to develop BizTalk Applications with Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md).</span></span> <span data-ttu-id="4ad4c-119">若要调用 ReadLOB 和 UpdateLOB Oracle 数据库中的表操作，这些任务包括：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-119">To invoke both ReadLOB and UpdateLOB operations on a table in an Oracle database, these tasks are:</span></span>  

1. <span data-ttu-id="4ad4c-120">创建 BizTalk 项目，并为 ReadLOB 和 UpdateLOB 操作生成架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-120">Create a BizTalk project and generate schema for both ReadLOB and UpdateLOB operations.</span></span>  

2. <span data-ttu-id="4ad4c-121">在 BizTalk 项目中为发送和接收消息从 Oracle 数据库创建消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-121">Create messages in the BizTalk project for sending and receiving messages from the Oracle database.</span></span> <span data-ttu-id="4ad4c-122">必须创建用于发送请求和接收针对这两个操作的响应消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-122">You must create messages for both the sending request and receiving responses for both the operations.</span></span>  

3. <span data-ttu-id="4ad4c-123">创建一个业务流程调用 ReadLOB 和 UpdateLOB 操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-123">Create an orchestration to invoke both ReadLOB and UpdateLOB operations.</span></span>  

4. <span data-ttu-id="4ad4c-124">生成并部署 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-124">Build and deploy the BizTalk project.</span></span>  

5. <span data-ttu-id="4ad4c-125">配置的 BizTalk 应用程序通过创建物理发送端口和接收端口。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-125">Configure the BizTalk application by creating physical send and receive ports.</span></span>  

6. <span data-ttu-id="4ad4c-126">启动 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-126">Start the BizTalk application.</span></span>  

   <span data-ttu-id="4ad4c-127">本主题介绍如何执行这些任务。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-127">This topic provides instructions to perform these tasks.</span></span>  

## <a name="sample-based-on-this-topic"></a><span data-ttu-id="4ad4c-128">基于本主题的示例</span><span class="sxs-lookup"><span data-stu-id="4ad4c-128">Sample Based On This Topic</span></span>  
 <span data-ttu-id="4ad4c-129">示例中，Operate_LOB，根据本主题还提供与[!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-129">A sample, Operate_LOB, based on this topic is also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="4ad4c-130">有关详细信息，请参阅[适配器示例](../../adapters-and-accelerators/accelerator-rosettanet/adapter-samples.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-130">For more information, see [Adapter Samples](../../adapters-and-accelerators/accelerator-rosettanet/adapter-samples.md).</span></span>  

## <a name="generating-schema"></a><span data-ttu-id="4ad4c-131">生成架构</span><span class="sxs-lookup"><span data-stu-id="4ad4c-131">Generating Schema</span></span>  
 <span data-ttu-id="4ad4c-132">在本主题中，若要演示如何执行 ReadLOB 和 UpdateLOB 操作，我们将生成的 Oracle 数据库中的 SCOTT 架构下的客户表显示这些操作的元数据。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-132">In this topic, to demonstrate how to perform ReadLOB and UpdateLOB operations, we will generate metadata for these operations surfaced for the CUSTOMER table under the SCOTT schema in the Oracle database.</span></span> <span data-ttu-id="4ad4c-133">通过运行这些示例提供的 SQL 脚本在 SCOTT 架构下创建此表。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-133">This table is created under the SCOTT schema by running the SQL scripts provided with the samples.</span></span> <span data-ttu-id="4ad4c-134">若要了解有关这些示例的详细信息，请参阅[架构示例](../../adapters-and-accelerators/accelerator-rosettanet/schema-samples.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-134">To know more about the samples, see [Schema Samples](../../adapters-and-accelerators/accelerator-rosettanet/schema-samples.md).</span></span>  

## <a name="defining-messages-and-message-types"></a><span data-ttu-id="4ad4c-135">定义消息和消息类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-135">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="4ad4c-136">先前生成的架构描述业务流程中的消息所需的"类型"。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-136">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="4ad4c-137">一条消息通常是一个变量，要为其类型定义由相应的架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-137">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="4ad4c-138">必须链接生成的架构，第一步中的消息从 BizTalk 项目的业务流程视图窗口。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-138">You must link the schema you generated in the first step to the messages from the Orchestration View window of the BizTalk project.</span></span>  

 <span data-ttu-id="4ad4c-139">对于本主题中，您必须创建两个请求-响应消息集 — ReadLOB 操作和第二个请求的响应为 UpdateLOB 操作设置的一个请求-响应设置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-139">For this topic, you must create two request-response message sets—one request-response set for the ReadLOB operation and the second request-response set for the UpdateLOB operation.</span></span>  

 <span data-ttu-id="4ad4c-140">执行以下步骤来创建消息并将其链接到该架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-140">Perform the following steps to create messages and link them to the schema.</span></span>  

#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="4ad4c-141">若要创建消息并将链接到架构</span><span class="sxs-lookup"><span data-stu-id="4ad4c-141">To create messages and link to schema</span></span>  

1. <span data-ttu-id="4ad4c-142">如果尚未打开，请打开 BizTalk 项目的业务流程视图窗口。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-142">Open the Orchestration View window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="4ad4c-143">若要执行此操作，请单击**视图**，依次指向**其他 Windows**，然后单击**业务流程视图**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-143">To do this, click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  

2. <span data-ttu-id="4ad4c-144">在业务流程视图中，右键单击**消息**，然后单击**新消息**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-144">In Orchestration View, right-click **Messages**, and then click **New Message**.</span></span>  

3. <span data-ttu-id="4ad4c-145">右键单击新创建的消息，然后依次**属性窗口**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-145">Right-click the newly created message, and then select **Properties Window**.</span></span>  

4. <span data-ttu-id="4ad4c-146">在中**属性**窗格**Message_1**，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-146">In the **Properties** pane for **Message_1**, do the following:</span></span>  


   |   <span data-ttu-id="4ad4c-147">使用此选项</span><span class="sxs-lookup"><span data-stu-id="4ad4c-147">Use this</span></span>   |                                                                                                                                       <span data-ttu-id="4ad4c-148">执行的操作</span><span class="sxs-lookup"><span data-stu-id="4ad4c-148">To do this</span></span>                                                                                                                                       |
   |--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |  <span data-ttu-id="4ad4c-149">Identifier</span><span class="sxs-lookup"><span data-stu-id="4ad4c-149">Identifier</span></span>  |                                                                                                                                   <span data-ttu-id="4ad4c-150">类型**请求**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-150">Type **Request**.</span></span>                                                                                                                                    |
   | <span data-ttu-id="4ad4c-151">消息类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-151">Message Type</span></span> | <span data-ttu-id="4ad4c-152">从下拉列表中，展开**架构**，然后选择*Operate_LOB。OracleDBBindingSchema.ReadLOB*<em>，</em>其中*Operate_LOB*是 BizTalk 项目的名称。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-152">From the drop-down list, expand **Schemas**, and select *Operate_LOB.OracleDBBindingSchema.ReadLOB*<em>,</em> where *Operate_LOB* is the name of your BizTalk project.</span></span> <span data-ttu-id="4ad4c-153">*OracleDBBindingSchema*是对 CUSTOMER 表的 ReadLOB 和 UpdateLOB 操作生成的架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-153">*OracleDBBindingSchema* is the schema generated for the ReadLOB and UpdateLOB operations on the CUSTOMER table.</span></span> |


5. <span data-ttu-id="4ad4c-154">重复上述步骤创建三个更多的消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-154">Repeat the previous step to create three more messages.</span></span> <span data-ttu-id="4ad4c-155">在中**属性**窗格中的新消息，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-155">In the **Properties** pane for the new messages, do the following:</span></span>  

   |<span data-ttu-id="4ad4c-156">将标识符设置为</span><span class="sxs-lookup"><span data-stu-id="4ad4c-156">Set Identifier to</span></span>|<span data-ttu-id="4ad4c-157">将消息类型设置为</span><span class="sxs-lookup"><span data-stu-id="4ad4c-157">Set Message Type to</span></span>|  
   |-----------------------|-------------------------|  
   |<span data-ttu-id="4ad4c-158">响应</span><span class="sxs-lookup"><span data-stu-id="4ad4c-158">Response</span></span>|<span data-ttu-id="4ad4c-159">*Operate_LOB.OracleDBBindingSchema.ReadLOBResponse*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-159">*Operate_LOB.OracleDBBindingSchema.ReadLOBResponse*</span></span>|  
   |<span data-ttu-id="4ad4c-160">请求 2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-160">Request2</span></span>|<span data-ttu-id="4ad4c-161">*Operate_LOB.OracleDBBindingSchema.UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-161">*Operate_LOB.OracleDBBindingSchema.UpdateLOB*</span></span>|  
   |<span data-ttu-id="4ad4c-162">Response2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-162">Response2</span></span>|<span data-ttu-id="4ad4c-163">*Operate_LOB.OracleDBBindingSchema.UpdateLOBResponse*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-163">*Operate_LOB.OracleDBBindingSchema.UpdateLOBResponse*</span></span>|  

## <a name="setting-up-the-orchestration"></a><span data-ttu-id="4ad4c-164">设置业务流程</span><span class="sxs-lookup"><span data-stu-id="4ad4c-164">Setting up the Orchestration</span></span>  
 <span data-ttu-id="4ad4c-165">必须创建 BizTalk 业务流程使用[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]调用 ReadLOB 和 UpdateLOB 对表的操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-165">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for invoking ReadLOB and UpdateLOB operations on a table.</span></span> <span data-ttu-id="4ad4c-166">在此业务流程，则删除两个请求消息，一个用于 ReadLOB 操作，另一个用于 UpdateLOB 操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-166">In this orchestration, you drop two request messages, one for the ReadLOB operation and the other for the UpdateLOB operation.</span></span> <span data-ttu-id="4ad4c-167">这些消息的接收位置将被删除。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-167">These messages are dropped at a receive location.</span></span> <span data-ttu-id="4ad4c-168">[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]使用的消息并通过 ODP 将它们传递到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-168">The [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] consumes the messages and passes them on to the Oracle database via ODP.</span></span> <span data-ttu-id="4ad4c-169">从 Oracle 数据库的响应保存到另一个位置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-169">The response from the Oracle database is saved to another location.</span></span>  

 <span data-ttu-id="4ad4c-170">因为业务流程提取两个请求的同时，您需要在业务流程中包括并行操作形状。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-170">Because the orchestration picks two requests simultaneously, you need to include a Parallel Actions shape in the orchestration.</span></span> <span data-ttu-id="4ad4c-171">对于每个并行操作，必须包括发送和接收形状来将消息发送到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-171">For each parallel action, you must include Send and Receive shapes to send messages to Oracle database and receive responses.</span></span> <span data-ttu-id="4ad4c-172">但是，您可以使用相同的端口来发送和接收这两种操作的消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-172">However, you could use the same ports for sending and receiving messages for both operations.</span></span> <span data-ttu-id="4ad4c-173">将包含一个典型的业务流程的同时执行的 ReadLOB 和 UpdateLOB 操作：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-173">A typical orchestration for performing the ReadLOB and UpdateLOB operations simultaneously would contain:</span></span>  

- <span data-ttu-id="4ad4c-174">发送和接收形状来将消息发送到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-174">Send and Receive shapes to send messages to Oracle database and receive responses.</span></span>  

- <span data-ttu-id="4ad4c-175">一个单向接收端口接收请求消息将发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-175">A one-way receive port to receive request messages to send to the Oracle database.</span></span>  

- <span data-ttu-id="4ad4c-176">一个双向发送端口以发送请求消息到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-176">A two-way send port to send request messages to Oracle database and receive responses.</span></span>  

- <span data-ttu-id="4ad4c-177">一个单向发送端口用于从 Oracle 数据库将响应发送到的文件夹。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-177">A one-way send port to send the responses from Oracle database to a folder.</span></span>  

  <span data-ttu-id="4ad4c-178">示例业务流程如下所示：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-178">A sample orchestration resembles the following:</span></span>  

  <span data-ttu-id="4ad4c-179">![用于读取和更新 LOB 数据的业务流程](../../adapters-and-accelerators/adapter-oracle-database/media/6523b5e4-3689-433a-8287-eebc36f10442.gif "6523b5e4-3689-433a-8287-eebc36f10442")</span><span class="sxs-lookup"><span data-stu-id="4ad4c-179">![Orchestration for reading and updating LOB data](../../adapters-and-accelerators/adapter-oracle-database/media/6523b5e4-3689-433a-8287-eebc36f10442.gif "6523b5e4-3689-433a-8287-eebc36f10442")</span></span>  

### <a name="adding-message-shapes"></a><span data-ttu-id="4ad4c-180">添加消息形状</span><span class="sxs-lookup"><span data-stu-id="4ad4c-180">Adding Message Shapes</span></span>  
 <span data-ttu-id="4ad4c-181">请确保为每个消息形状中指定以下属性。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-181">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="4ad4c-182">形状列中列出的名称是在刚提到的业务流程中显示的消息形状的名称。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-182">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span> <span data-ttu-id="4ad4c-183">下表列出了必须包括一个并行操作形状。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-183">The following table lists the shapes you must include for one of the parallel actions.</span></span>  

|<span data-ttu-id="4ad4c-184">形状</span><span class="sxs-lookup"><span data-stu-id="4ad4c-184">Shape</span></span>|<span data-ttu-id="4ad4c-185">形状类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-185">Shape Type</span></span>|<span data-ttu-id="4ad4c-186">属性</span><span class="sxs-lookup"><span data-stu-id="4ad4c-186">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="4ad4c-187">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="4ad4c-187">ReceiveMessage</span></span>|<span data-ttu-id="4ad4c-188">Receive</span><span class="sxs-lookup"><span data-stu-id="4ad4c-188">Receive</span></span>|<span data-ttu-id="4ad4c-189">-设置**名称**到*ReceiveMessage*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-189">-   Set **Name** to *ReceiveMessage*</span></span><br /><span data-ttu-id="4ad4c-190">-设置**激活**到 *，则返回 True*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-190">-   Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="4ad4c-191">SendMessage</span><span class="sxs-lookup"><span data-stu-id="4ad4c-191">SendMessage</span></span>|<span data-ttu-id="4ad4c-192">Send</span><span class="sxs-lookup"><span data-stu-id="4ad4c-192">Send</span></span>|<span data-ttu-id="4ad4c-193">-设置**名称**到*SendMessage*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-193">-   Set **Name** to *SendMessage*</span></span>|  
|<span data-ttu-id="4ad4c-194">ReceiveResponse</span><span class="sxs-lookup"><span data-stu-id="4ad4c-194">ReceiveResponse</span></span>|<span data-ttu-id="4ad4c-195">Receive</span><span class="sxs-lookup"><span data-stu-id="4ad4c-195">Receive</span></span>|<span data-ttu-id="4ad4c-196">-设置**名称**到*ReceiveResponse*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-196">-   Set **Name** to *ReceiveResponse*</span></span><br /><span data-ttu-id="4ad4c-197">-设置**激活**到*False*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-197">-   Set **Activate** to *False*</span></span>|  
|<span data-ttu-id="4ad4c-198">SendResponse</span><span class="sxs-lookup"><span data-stu-id="4ad4c-198">SendResponse</span></span>|<span data-ttu-id="4ad4c-199">Send</span><span class="sxs-lookup"><span data-stu-id="4ad4c-199">Send</span></span>|<span data-ttu-id="4ad4c-200">-设置**名称**到*SendResponse*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-200">-   Set **Name** to *SendResponse*</span></span>|  

 <span data-ttu-id="4ad4c-201">下表列出了你必须将包含其他并行操作形状。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-201">The following table lists the shapes that you must include for the other parallel action.</span></span>  

|<span data-ttu-id="4ad4c-202">形状</span><span class="sxs-lookup"><span data-stu-id="4ad4c-202">Shape</span></span>|<span data-ttu-id="4ad4c-203">形状类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-203">Shape Type</span></span>|<span data-ttu-id="4ad4c-204">属性</span><span class="sxs-lookup"><span data-stu-id="4ad4c-204">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="4ad4c-205">ReceiveMessage2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-205">ReceiveMessage2</span></span>|<span data-ttu-id="4ad4c-206">Receive</span><span class="sxs-lookup"><span data-stu-id="4ad4c-206">Receive</span></span>|<span data-ttu-id="4ad4c-207">-设置**名称**到*ReceiveMessage2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-207">-   Set **Name** to *ReceiveMessage2*</span></span><br /><span data-ttu-id="4ad4c-208">-设置**激活**到 *，则返回 True*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-208">-   Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="4ad4c-209">SendMessage2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-209">SendMessage2</span></span>|<span data-ttu-id="4ad4c-210">Send</span><span class="sxs-lookup"><span data-stu-id="4ad4c-210">Send</span></span>|<span data-ttu-id="4ad4c-211">-设置**名称**到*SendMessage2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-211">-   Set **Name** to *SendMessage2*</span></span>|  
|<span data-ttu-id="4ad4c-212">ReceiveResponse2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-212">ReceiveResponse2</span></span>|<span data-ttu-id="4ad4c-213">Receive</span><span class="sxs-lookup"><span data-stu-id="4ad4c-213">Receive</span></span>|<span data-ttu-id="4ad4c-214">-设置**名称**到*ReceiveResponse2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-214">-   Set **Name** to *ReceiveResponse2*</span></span><br /><span data-ttu-id="4ad4c-215">-设置**激活**到*False*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-215">-   Set **Activate** to *False*</span></span>|  
|<span data-ttu-id="4ad4c-216">SendResponse2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-216">SendResponse2</span></span>|<span data-ttu-id="4ad4c-217">Send</span><span class="sxs-lookup"><span data-stu-id="4ad4c-217">Send</span></span>|<span data-ttu-id="4ad4c-218">-设置**名称**到*SendResponse2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-218">-   Set **Name** to *SendResponse2*</span></span>|  

### <a name="adding-ports"></a><span data-ttu-id="4ad4c-219">添加端口</span><span class="sxs-lookup"><span data-stu-id="4ad4c-219">Adding Ports</span></span>  
 <span data-ttu-id="4ad4c-220">请确保为每个逻辑端口中指定以下属性。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-220">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="4ad4c-221">端口列中列出的名称是在业务流程中显示的端口的名称。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-221">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  

|<span data-ttu-id="4ad4c-222">Port</span><span class="sxs-lookup"><span data-stu-id="4ad4c-222">Port</span></span>|<span data-ttu-id="4ad4c-223">属性</span><span class="sxs-lookup"><span data-stu-id="4ad4c-223">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="4ad4c-224">FileIn</span><span class="sxs-lookup"><span data-stu-id="4ad4c-224">FileIn</span></span>|<span data-ttu-id="4ad4c-225">-设置**标识符**到*FileIn*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-225">-   Set **Identifier** to *FileIn*</span></span><br /><span data-ttu-id="4ad4c-226">-设置**类型**到*FileInType*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-226">-   Set **Type** to *FileInType*</span></span><br /><span data-ttu-id="4ad4c-227">-设置**通信模式**到*单向*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-227">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="4ad4c-228">-设置**通信方向**到*接收*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-228">-   Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="4ad4c-229">LOBPort</span><span class="sxs-lookup"><span data-stu-id="4ad4c-229">LOBPort</span></span>|<span data-ttu-id="4ad4c-230">-设置**标识符**到*LOBPort*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-230">-   Set **Identifier** to *LOBPort*</span></span><br /><span data-ttu-id="4ad4c-231">-设置**类型**到*LOBPortType*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-231">-   Set **Type** to *LOBPortType*</span></span><br /><span data-ttu-id="4ad4c-232">-设置**通信模式**到*请求-响应*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-232">-   Set **Communication Pattern** to *Request-Response*</span></span><br /><span data-ttu-id="4ad4c-233">-设置**通信方向**到*发送接收*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-233">-   Set **Communication Direction** to *Send-Receive*</span></span>|  
|<span data-ttu-id="4ad4c-234">SaveResponse</span><span class="sxs-lookup"><span data-stu-id="4ad4c-234">SaveResponse</span></span>|<span data-ttu-id="4ad4c-235">-设置**标识符**到*SaveResponse*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-235">-   Set **Identifier** to *SaveResponse*</span></span><br /><span data-ttu-id="4ad4c-236">-设置**类型**到*SaveResponseType*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-236">-   Set **Type** to *SaveResponseType*</span></span><br /><span data-ttu-id="4ad4c-237">-设置**通信模式**到*单向*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-237">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="4ad4c-238">-设置**通信方向**到*发送*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-238">-   Set **Communication Direction** to *Send*</span></span>|  

 <span data-ttu-id="4ad4c-239">因为您将处理这两个请求和响应消息使用这些端口，则必须创建每个端口，其中每个操作对应于一种消息类型的两个操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-239">Because you will be processing two request and response messages using these ports, you must create two operations for each port, where each operation corresponds to one message type.</span></span> <span data-ttu-id="4ad4c-240">要创建一个操作，端口形状中，右键单击，然后选择**新的操作**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-240">To create an operation, right-click the port shape, and then select **New Operation**.</span></span> <span data-ttu-id="4ad4c-241">命名为每个端口的第一个操作**ReadLOB**并为每个端口的第二个操作**UpdateLOB**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-241">Name the first operation for each port as **ReadLOB** and the second operation for each port as **UpdateLOB**.</span></span>  

### <a name="using-correlation"></a><span data-ttu-id="4ad4c-242">使用相关</span><span class="sxs-lookup"><span data-stu-id="4ad4c-242">Using Correlation</span></span>  
 <span data-ttu-id="4ad4c-243">相关是将传入消息与业务流程的相应实例相匹配的过程。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-243">Correlation is the process of matching an incoming message with the appropriate instance of an orchestration.</span></span> <span data-ttu-id="4ad4c-244">将删除您在业务流程中两个请求消息，一个用于每个重载。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-244">In the orchestration you will be dropping two request messages, one for each overload.</span></span> <span data-ttu-id="4ad4c-245">要使用相关，与正确的业务流程关联的请求消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-245">Using correlation, you associate a request message with the right orchestration.</span></span> <span data-ttu-id="4ad4c-246">有关相关的详细信息，请参阅[业务流程中使用相关性](../../core/using-correlations-in-orchestrations.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-246">For more information about correlation, see [Using Correlations in Orchestrations](../../core/using-correlations-in-orchestrations.md).</span></span>  

##### <a name="to-use-correlations"></a><span data-ttu-id="4ad4c-247">若要使用的相关性</span><span class="sxs-lookup"><span data-stu-id="4ad4c-247">To use correlations</span></span>  

1.  <span data-ttu-id="4ad4c-248">从每个操作生成的架构升级属性。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-248">Promote a property from the schema generated for each operation.</span></span> <span data-ttu-id="4ad4c-249">例如，从 ReadLOB 操作架构; 升级 LOB_COLUMN 属性将筛选器属性提升从 UpdateLOB 操作架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-249">For example, promote the LOB_COLUMN property from the ReadLOB operation schema; promote the FILTER property from the UpdateLOB operation schema.</span></span> <span data-ttu-id="4ad4c-250">若要将属性升级，右键单击架构视图中的属性，指向**Promote**，然后选择**快速升级**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-250">To promote a property, right-click the property in the schema view, point to **Promote**, and then select **Quick Promotion**.</span></span> <span data-ttu-id="4ad4c-251">这将 PropertySchema.xsd 文件添加到您的 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-251">This adds a PropertySchema.xsd file to your BizTalk project.</span></span>  

     <span data-ttu-id="4ad4c-252">有关提升的属性的信息，请参阅[升级属性](../../core/promoting-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-252">For information about promoting a property, see [Promoting Properties](../../core/promoting-properties.md).</span></span>  

2.  <span data-ttu-id="4ad4c-253">从业务流程视图中，右键单击**相关类型**，然后选择**新相关类型**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-253">From the Orchestration View, right-click **Correlation Types**, and then select **New Correlation Type**.</span></span>  

3.  <span data-ttu-id="4ad4c-254">**相关性属性**对话框会列出升级在步骤 1 中的属性。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-254">The **Correlation Properties** dialog box lists the properties you promoted in step 1.</span></span> <span data-ttu-id="4ad4c-255">选择一个属性，然后依次**添加**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-255">Select a property, and then click **Add**.</span></span>  

4.  <span data-ttu-id="4ad4c-256">单击“确定” 。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-256">Click **OK**.</span></span>  

5.  <span data-ttu-id="4ad4c-257">若要创建其他升级属性的相关类型，请重复这些步骤。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-257">To create correlation types for the other promoted property, repeat these steps.</span></span>  

6.  <span data-ttu-id="4ad4c-258">重命名基于与之关联的操作的相关类型。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-258">Rename the correlation types based on the operation they are associated with.</span></span> <span data-ttu-id="4ad4c-259">你可以重命名为相关类型*CorrelationType_ReadLOB* （适用于 ReadLOB 操作） 和*CorrelationType_UpdateLOB* （适用于 UpdateLOB 操作）。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-259">You could rename the correlation types to *CorrelationType_ReadLOB* (for the ReadLOB operation) and *CorrelationType_UpdateLOB* (for the UpdateLOB operation).</span></span>  

7.  <span data-ttu-id="4ad4c-260">从业务流程视图中，右键单击**相关集**，然后选择**新建相关集**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-260">From Orchestration View, right-click **Correlation Sets**, and then select **New Correlation Set**.</span></span>  

8.  <span data-ttu-id="4ad4c-261">右键单击新添加的相关集，然后依次**属性**。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-261">Right-click the newly added correlation set, and then click **Properties**.</span></span> <span data-ttu-id="4ad4c-262">在中**属性**窗格中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-262">In the **Properties** pane, do the following:</span></span>  

    |<span data-ttu-id="4ad4c-263">使用此选项</span><span class="sxs-lookup"><span data-stu-id="4ad4c-263">Use this</span></span>|<span data-ttu-id="4ad4c-264">执行的操作</span><span class="sxs-lookup"><span data-stu-id="4ad4c-264">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="4ad4c-265">相关类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-265">Correlation Type</span></span>|<span data-ttu-id="4ad4c-266">*Operate_LOB.CorrelationType_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-266">*Operate_LOB.CorrelationType_ReadLOB*</span></span>|  
    |<span data-ttu-id="4ad4c-267">Identifier</span><span class="sxs-lookup"><span data-stu-id="4ad4c-267">Identifier</span></span>|<span data-ttu-id="4ad4c-268">*Correlation_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-268">*Correlation_ReadLOB*</span></span>|  

9. <span data-ttu-id="4ad4c-269">添加另一个相关集，并指定属性窗格的以下属性。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-269">Add another correlation set and specify the following properties from the Properties pane.</span></span>  

    |<span data-ttu-id="4ad4c-270">使用此选项</span><span class="sxs-lookup"><span data-stu-id="4ad4c-270">Use this</span></span>|<span data-ttu-id="4ad4c-271">执行的操作</span><span class="sxs-lookup"><span data-stu-id="4ad4c-271">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="4ad4c-272">相关类型</span><span class="sxs-lookup"><span data-stu-id="4ad4c-272">Correlation Type</span></span>|<span data-ttu-id="4ad4c-273">*Operate_LOB.CorrelationType_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-273">*Operate_LOB.CorrelationType_UpdateLOB*</span></span>|  
    |<span data-ttu-id="4ad4c-274">Identifier</span><span class="sxs-lookup"><span data-stu-id="4ad4c-274">Identifier</span></span>|<span data-ttu-id="4ad4c-275">*Correlation_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-275">*Correlation_UpdateLOB*</span></span>|  

## <a name="specify-messages-for-action-shapes-and-connect-them-to-ports"></a><span data-ttu-id="4ad4c-276">为操作形状指定消息并将它们连接到端口</span><span class="sxs-lookup"><span data-stu-id="4ad4c-276">Specify Messages for Action Shapes, and Connect Them to Ports</span></span>  
 <span data-ttu-id="4ad4c-277">下表指定的属性和它们应设置为指定操作形状的消息并将其链接到的端口的值。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-277">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link them to the ports.</span></span> <span data-ttu-id="4ad4c-278">形状列中列出的名称是消息形状的名称，前面所述的业务流程中所示。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-278">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  

|<span data-ttu-id="4ad4c-279">形状</span><span class="sxs-lookup"><span data-stu-id="4ad4c-279">Shape</span></span>|<span data-ttu-id="4ad4c-280">属性</span><span class="sxs-lookup"><span data-stu-id="4ad4c-280">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="4ad4c-281">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="4ad4c-281">ReceiveMessage</span></span>|<span data-ttu-id="4ad4c-282">-设置**初始化相关集**到*Correlation_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-282">-   Set **Initializing Correlation Sets** to *Correlation_ReadLOB*</span></span><br /><span data-ttu-id="4ad4c-283">-设置**消息**到*请求*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-283">-   Set **Message** to *Request*</span></span><br /><span data-ttu-id="4ad4c-284">-设置**操作**到*FileIn.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-284">-   Set **Operation** to *FileIn.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="4ad4c-285">SendMessage</span><span class="sxs-lookup"><span data-stu-id="4ad4c-285">SendMessage</span></span>|<span data-ttu-id="4ad4c-286">-设置**消息**到*请求*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-286">-   Set **Message** to *Request*</span></span><br /><span data-ttu-id="4ad4c-287">-设置**操作**到*LOBPort.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-287">-   Set **Operation** to *LOBPort.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="4ad4c-288">ReceiveResponse</span><span class="sxs-lookup"><span data-stu-id="4ad4c-288">ReceiveResponse</span></span>|<span data-ttu-id="4ad4c-289">-设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-289">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="4ad4c-290">-设置**操作**到*LOBPort.ReadLOB.Response*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-290">-   Set **Operation** to *LOBPort.ReadLOB.Response*</span></span>|  
|<span data-ttu-id="4ad4c-291">SendResponse</span><span class="sxs-lookup"><span data-stu-id="4ad4c-291">SendResponse</span></span>|<span data-ttu-id="4ad4c-292">-设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-292">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="4ad4c-293">-设置**操作**到*SaveResponse.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-293">-   Set **Operation** to *SaveResponse.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="4ad4c-294">ReceiveMessage2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-294">ReceiveMessage2</span></span>|<span data-ttu-id="4ad4c-295">-设置**初始化相关集**到*Correlation_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-295">-   Set **Initializing Correlation Sets** to *Correlation_UpdateLOB*</span></span><br /><span data-ttu-id="4ad4c-296">-设置**消息**到*请求 2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-296">-   Set **Message** to *Request2*</span></span><br /><span data-ttu-id="4ad4c-297">-设置**操作**到*FileIn.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-297">-   Set **Operation** to *FileIn.UpdateLOB.Request*</span></span>|  
|<span data-ttu-id="4ad4c-298">SendMessage2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-298">SendMessage2</span></span>|<span data-ttu-id="4ad4c-299">-设置**消息**到*请求 2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-299">-   Set **Message** to *Request2*</span></span><br /><span data-ttu-id="4ad4c-300">-设置**操作**到*LOBPort.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-300">-   Set **Operation** to *LOBPort.UpdateLOB.Request*</span></span>|  
|<span data-ttu-id="4ad4c-301">ReceiveResponse2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-301">ReceiveResponse2</span></span>|<span data-ttu-id="4ad4c-302">-设置**消息**到*Response2*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-302">-   Set **Message** to *Response2*</span></span><br /><span data-ttu-id="4ad4c-303">-设置**操作**到*LOBPort.UpdateLOB.Response*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-303">-   Set **Operation** to *LOBPort.UpdateLOB.Response*</span></span>|  
|<span data-ttu-id="4ad4c-304">SendResponse2</span><span class="sxs-lookup"><span data-stu-id="4ad4c-304">SendResponse2</span></span>|<span data-ttu-id="4ad4c-305">-设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-305">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="4ad4c-306">-设置**操作**到*SaveResponse.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="4ad4c-306">-   Set **Operation** to *SaveResponse.UpdateLOB.Request*</span></span>|  

 <span data-ttu-id="4ad4c-307">指定这些属性后，消息形状和端口进行连接，您的业务流程已完成。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-307">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  

 <span data-ttu-id="4ad4c-308">现在必须生成 BizTalk 解决方案，并将其部署到[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-308">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="4ad4c-309">有关详细信息，请参阅[构建和运行业务流程](../../core/building-and-running-orchestrations.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-309">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>  

## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="4ad4c-310">配置 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="4ad4c-310">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="4ad4c-311">部署 BizTalk 项目后，将前面创建的业务流程下列出**业务流程**BizTalk Server 管理控制台窗格中的。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-311">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="4ad4c-312">必须使用 BizTalk Server 管理控制台来配置应用程序。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-312">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="4ad4c-313">有关演练，请参阅[演练：部署基本 BizTalk 应用程序](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-313">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>

 <span data-ttu-id="4ad4c-314">配置应用程序包括：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-314">Configuring an application involves:</span></span>  

- <span data-ttu-id="4ad4c-315">选择应用程序的主机。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-315">Selecting a host for the application.</span></span>  

- <span data-ttu-id="4ad4c-316">映射到 BizTalk Server 管理控制台中的物理端口在业务流程中创建的端口。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-316">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="4ad4c-317">对于此业务流程，您必须：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-317">For this orchestration you must:</span></span>  

  - <span data-ttu-id="4ad4c-318">硬盘和相应的文件端口请求消息，分别对应于 ReadLOB 和 UpdateLOB 操作放置上定义的位置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-318">Define a location on the hard disk and a corresponding file port where you will drop the request messages, one each for ReadLOB and UpdateLOB operations.</span></span> <span data-ttu-id="4ad4c-319">BizTalk 业务流程将使用请求消息并将其发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-319">The BizTalk orchestration will consume the request messages and send it to the Oracle database.</span></span>  

  - <span data-ttu-id="4ad4c-320">硬盘和相应的 BizTalk 业务流程放置响应消息，一个用于每个操作，其中包含从 Oracle 数据库的响应的位置的文件端口上定义的位置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-320">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the response messages, one for each operation, containing the response from the Oracle database.</span></span>  

  - <span data-ttu-id="4ad4c-321">定义一个物理 WCF 自定义或 Wcf-oracledb 发送端口将消息发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-321">Define a physical WCF-Custom or WCF-OracleDB send port to send messages to the Oracle database.</span></span> <span data-ttu-id="4ad4c-322">您必须在发送端口中指定的操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-322">You must also specify the action in the send port.</span></span> <span data-ttu-id="4ad4c-323">有关如何创建 WCF 自定义或 Wcf-oracledb 端口的信息，请参阅[手动配置到 Oracle 数据库适配器的物理端口绑定](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-323">For information about how to create WCF-Custom or WCF-OracleDB ports, see [Manually configure a physical port binding to the Oracle Database Adapter](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md).</span></span> <span data-ttu-id="4ad4c-324">由于 WCF 自定义或 Wcf-oracledb 发送端口发送和接收符合多个架构的消息并执行两个操作，必须设置为这两种操作的动态操作。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-324">Because the WCF-Custom or WCF-OracleDB send port sends and receive messages conforming to more than one schema and performs two operations, you must set dynamic action for both the operations.</span></span> <span data-ttu-id="4ad4c-325">有关操作的详细信息，请参阅[配置 Oracle 数据库的 SOAP 操作](../../adapters-and-accelerators/adapter-oracle-database/configure-the-soap-action-for-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-325">For more information about actions, see [Configure the SOAP action for Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-the-soap-action-for-oracle-database.md).</span></span> <span data-ttu-id="4ad4c-326">对于此业务流程，应将操作设置，如下所示：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-326">For this orchestration, the action should be set as follows:</span></span>  

    ```  
    <BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
      <Operation Name="ReadLOB" Action="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER/ReadLOB" />  
      <Operation Name="UpdateLOB" Action="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER/UpdateLOB" />  
    </BtsActionMapping>  
    ```  

    > [!NOTE]
    >  <span data-ttu-id="4ad4c-327">生成架构使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]还会创建包含有关端口和要为这些端口设置的操作信息的绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-327">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="4ad4c-328">从 BizTalk Server 管理控制台来创建 （对于出站调用） 的发送端口或接收端口 （对于入站调用），可以导入此绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-328">You can import this binding file from the BizTalk Server Administration console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="4ad4c-329">有关详细信息，请参阅[配置使用的 Oracle 数据库的端口绑定文件的物理端口绑定](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-329">For more information, see [Configure a physical port binding using a port binding file to Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span></span>  

## <a name="starting-the-application"></a><span data-ttu-id="4ad4c-330">启动应用程序</span><span class="sxs-lookup"><span data-stu-id="4ad4c-330">Starting the Application</span></span>  
 <span data-ttu-id="4ad4c-331">必须启动 Oracle 数据库上执行操作的 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-331">You must start the BizTalk application for performing an operation on the Oracle database.</span></span> <span data-ttu-id="4ad4c-332">在启动 BizTalk 应用程序的说明，请参阅[如何启动业务流程](../../core/how-to-start-an-orchestration.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-332">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>  

 <span data-ttu-id="4ad4c-333">在此阶段，请确保：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-333">At this stage, make sure:</span></span>  

-   <span data-ttu-id="4ad4c-334">文件接收端口接收请求消息的业务流程正在运行。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-334">The FILE receive port to receive request messages for the orchestration is running.</span></span>  

-   <span data-ttu-id="4ad4c-335">运行文件发送端口以接收来自业务流程的响应消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-335">The FILE send port to receive the response messages from the orchestration is running.</span></span>  

-   <span data-ttu-id="4ad4c-336">WCF 自定义发送端口或 Wcf-oracledb 将消息发送到 Oracle 数据库正在运行。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-336">The WCF-Custom send port or WCF-OracleDB to send messages to the Oracle database is running.</span></span>  

-   <span data-ttu-id="4ad4c-337">该操作的 BizTalk 业务流程正在运行。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-337">The BizTalk orchestration for the operation is running.</span></span>  

## <a name="executing-the-operation"></a><span data-ttu-id="4ad4c-338">执行该操作</span><span class="sxs-lookup"><span data-stu-id="4ad4c-338">Executing the Operation</span></span>  
 <span data-ttu-id="4ad4c-339">在运行该应用程序后，必须删除的文件的消息的接收位置的请求。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-339">After you run the application, you must drop request messages to the FILE receive location.</span></span> <span data-ttu-id="4ad4c-340">请求消息的架构必须符合前面生成的操作的架构。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-340">The schema for the request messages must conform to the schema for the operations you generated earlier.</span></span> <span data-ttu-id="4ad4c-341">请参阅[特殊 LOB 操作的消息架构](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md)详细了解针对 LOB 数据类型使用调用操作的请求消息架构[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-341">See [Message Schemas for Special LOB Operations](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md) for more information about the request message schema for invoking operations on LOB data types using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span>  

 <span data-ttu-id="4ad4c-342">业务流程使用的请求消息并将其发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-342">The orchestration consumes the request messages and sends them to the Oracle database.</span></span> <span data-ttu-id="4ad4c-343">从 Oracle 数据库的响应保存在定义为业务流程的一部分的其他文件位置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-343">The response from the Oracle database is saved at other FILE location defined as part of the orchestration.</span></span>  

 <span data-ttu-id="4ad4c-344">对于此业务流程，我们先删除 UpdateLOB 操作来更新客户表的照片列 （的 BLOB 数据类型） 的请求消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-344">For this orchestration, we first drop a request message for the UpdateLOB operation to update the PHOTO column (of BLOB data type) of the CUSTOMER table.</span></span> <span data-ttu-id="4ad4c-345">请求消息以调用特定客户的 PHOTO 列更新为：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-345">The request message to invoke the update the PHOTO column for a specific customer is:</span></span>  

```  
<UpdateLOB xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <LOB_COLUMN>PHOTO</LOB_COLUMN>  
  <FILTER>Name='Mindy Martin'</FILTER>  
  <Stream>YWJjZA==</Stream>  
</UpdateLOB>  
```  

> [!NOTE]
>  <span data-ttu-id="4ad4c-346">筛选器字符串必须始终提取一个匹配行否则 XmlReaderParsingException Oracle 数据库适配器引发。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-346">The filter string must always fetch one matching row otherwise the Oracle Database adapter throws an XmlReaderParsingException.</span></span> <span data-ttu-id="4ad4c-347">值为\<Stream\>元素必须为 base64Binary 类型。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-347">Also the value for the \<Stream\> element must be of base64Binary type.</span></span>  

 <span data-ttu-id="4ad4c-348">UpdateLOB 操作的响应是：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-348">The response for the UpdateLOB operation is:</span></span>  

```  
<?xml version="1.0" encoding="utf-8"?>  
<UpdateLOBResponse xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER"></UpdateLOBResponse>  
```  

 <span data-ttu-id="4ad4c-349">我们现在删除 ReadLOB 操作读取 UpdateLOB 操作已更新的数据的请求消息。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-349">We now drop a request message for the ReadLOB operation to read the data that was updated by the UpdateLOB operation.</span></span> <span data-ttu-id="4ad4c-350">要调用特定客户的 PHOTO 列 ReadLOB 操作的请求消息是：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-350">The request message to invoke the ReadLOB operation on the PHOTO column for a specific customer is:</span></span>  

```  
<ReadLOB xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <LOB_COLUMN>PHOTO</LOB_COLUMN>  
  <FILTER>NAME='Mindy Martin'</FILTER>  
</ReadLOB>  
```  

> [!NOTE]
>  <span data-ttu-id="4ad4c-351">筛选器字符串始终必须获取一个匹配行。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-351">The filter string must always fetch one matching row.</span></span> <span data-ttu-id="4ad4c-352">如果多个匹配行，[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]只返回第一个 （匹配） 行的 LOB 列。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-352">If there is more than one matching row, the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] only returns the LOB column for the first (matching) row.</span></span>  

 <span data-ttu-id="4ad4c-353">ReadLOB 操作的响应是：</span><span class="sxs-lookup"><span data-stu-id="4ad4c-353">The response for the ReadLOB operation is:</span></span>  

```  
<?xml version="1.0" encoding="utf-8"?>  
<ReadLOBResponse mlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <ReadLOBResult>YWJjZA==</ReadLOBResult>  
</ReadLOBResponse>  
```  

> [!NOTE]
>  <span data-ttu-id="4ad4c-354">ReadLOB 操作的响应可能会失败，以对 WSDL 进行验证。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-354">The response for the ReadLOB operation may fail to validate against the WSDL.</span></span> <span data-ttu-id="4ad4c-355">必须执行某些任务来验证对 WSDL ReadLOB。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-355">You must perform certain tasks to validate the ReadLOB against the WSDL.</span></span> <span data-ttu-id="4ad4c-356">有关详细信息请参阅[故障排除操作问题](https://msdn.microsoft.com/library/dd787883.aspx)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-356">For more information see [Troubleshooting operational issues](https://msdn.microsoft.com/library/dd787883.aspx).</span></span>  

## <a name="possible-exceptions"></a><span data-ttu-id="4ad4c-357">可能的异常</span><span class="sxs-lookup"><span data-stu-id="4ad4c-357">Possible Exceptions</span></span>  
 <span data-ttu-id="4ad4c-358">对包含 LOB 数据使用表执行操作时可能遇到的有关异常的信息[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，请参阅[异常和错误处理](../../adapters-and-accelerators/adapter-oracle-database/exceptions-and-error-handling-with-the-oracle-database-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-358">For information about the exceptions you might encounter while performing operations on table containing LOB data using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], see [Exceptions and error handling](../../adapters-and-accelerators/adapter-oracle-database/exceptions-and-error-handling-with-the-oracle-database-adapter.md).</span></span>  

## <a name="best-practices"></a><span data-ttu-id="4ad4c-359">最佳实践</span><span class="sxs-lookup"><span data-stu-id="4ad4c-359">Best Practices</span></span>  
 <span data-ttu-id="4ad4c-360">部署和配置 BizTalk 项目后，你可以配置设置导出到名为绑定文件的 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-360">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="4ad4c-361">一旦生成绑定文件，可以以便不需要创建发送端口、 接收端口，等等。 对于同一业务流程从文件导的配置设置。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-361">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="4ad4c-362">有关绑定文件的详细信息，请参阅[重复使用 Oracle 数据库适配器绑定](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="4ad4c-362">For more information about binding files, see [Reuse Oracle Database Adapter bindings](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md).</span></span>  

## <a name="see-also"></a><span data-ttu-id="4ad4c-363">请参阅</span><span class="sxs-lookup"><span data-stu-id="4ad4c-363">See Also</span></span>  
[<span data-ttu-id="4ad4c-364">向开发 BizTalk 应用程序与 Oracle 数据库的构建基块</span><span class="sxs-lookup"><span data-stu-id="4ad4c-364">Building Blocks to Develop BizTalk applications with Oracle Database</span></span>](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md)