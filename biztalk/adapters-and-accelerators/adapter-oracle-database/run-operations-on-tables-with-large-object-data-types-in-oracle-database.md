---
title: "运行与 Oracle 数据库中的大型对象数据类型对表的操作 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- operations, performing on tables
- operations, performing on LOB data
ms.assetid: 74276b85-daf1-4d0f-92f9-46d5c27a95a6
caps.latest.revision: "8"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6d01593fb50fd1b6faf851652319628b3d0cae58
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="run-operations-on-tables-with-large-object-data-types-in-oracle-database"></a><span data-ttu-id="2af6e-102">运行与 Oracle 数据库中的大型对象数据类型对表的操作</span><span class="sxs-lookup"><span data-stu-id="2af6e-102">Run operations on tables with large object data types in Oracle Database</span></span>
<span data-ttu-id="2af6e-103">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]提供对 Oracle 大型对象 (LOB) 数据类型的支持：</span><span class="sxs-lookup"><span data-stu-id="2af6e-103">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] provides support for the Oracle large object (LOB) data types:</span></span>  
  
-   <span data-ttu-id="2af6e-104">二进制大型对象 (BLOB)</span><span class="sxs-lookup"><span data-stu-id="2af6e-104">Binary large object (BLOB)</span></span>  
  
-   <span data-ttu-id="2af6e-105">字符大型对象 (CLOB)</span><span class="sxs-lookup"><span data-stu-id="2af6e-105">Character large object (CLOB)</span></span>  
  
-   <span data-ttu-id="2af6e-106">国家/地区字符大型对象 (NCLOB)</span><span class="sxs-lookup"><span data-stu-id="2af6e-106">National character large object (NCLOB)</span></span>  
  
-   <span data-ttu-id="2af6e-107">二进制文件 (BFILE)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-107">Binary file (BFILE).</span></span> <span data-ttu-id="2af6e-108">有关详细信息，请参阅[BFILE 数据类型，使用 BizTalk Server 的 Oracle 数据库中的表上执行操作](../../adapters-and-accelerators/adapter-oracle-database/run-operations-on-tables-with-bfile-data-types-in-oracle-db-using-biztalk.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-108">For more information, see [Performing Operations on Tables with BFILE Data Types in Oracle Database using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/run-operations-on-tables-with-bfile-data-types-in-oracle-db-using-biztalk.md).</span></span>  
  
 <span data-ttu-id="2af6e-109">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]工作的进行公开包含 LOB 列的表 ReadLOB 和 UpdateLOB 操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-109">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] does this by surfacing the ReadLOB and UpdateLOB operations for tables that contain LOB columns.</span></span> <span data-ttu-id="2af6e-110">有关这些操作的详细信息请参阅[对表和视图，包含 LOB 数据 Oracle 数据库中的操作](../../adapters-and-accelerators/adapter-oracle-database/operations-on-tables-and-views-that-contain-lob-data-in-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-110">For more information about these operations see [Operations on Tables and Views That Contain LOB Data in Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/operations-on-tables-and-views-that-contain-lob-data-in-oracle-database.md).</span></span> <span data-ttu-id="2af6e-111">有关调用这些操作的 SOAP 消息结构的详细信息，请参阅[特殊 LOB 操作的消息架构](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-111">For more information about the structure of the SOAP message for invoking these operations, see [Message Schemas for Special LOB Operations](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2af6e-112">使用时[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]与[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，ReadLOB 操作不支持从 Oracle 数据库的流式处理 LOB 类型数据。</span><span class="sxs-lookup"><span data-stu-id="2af6e-112">When using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], the ReadLOB operation does not support streaming LOB type data from an Oracle database.</span></span> <span data-ttu-id="2af6e-113">从 Oracle 数据库使用数据进行流处理 LOB[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]则应改用选择操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-113">To stream LOB data from an Oracle database using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] you should instead use the Select operation.</span></span> <span data-ttu-id="2af6e-114">有关流式处理的详细信息，请参阅[流式处理 Oracle 数据库中的 LOB 数据类型的支持](../../adapters-and-accelerators/adapter-oracle-database/streaming-support-for-lob-data-types-in-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-114">For more information about streaming, see [Streaming Support for LOB Data Types in Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/streaming-support-for-lob-data-types-in-oracle-database.md).</span></span> <span data-ttu-id="2af6e-115">另外，从 Oracle 数据库 ReadLOB 操作响应将会失败对 WSDL 验证。</span><span class="sxs-lookup"><span data-stu-id="2af6e-115">Also, the response from the Oracle database for the ReadLOB operation will fail validation against the WSDL.</span></span> <span data-ttu-id="2af6e-116">有关如何解决失败的说明，请参阅[故障排除操作问题](https://msdn.microsoft.com/library/dd787883.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-116">For instructions on how to workaround the failure, see [Troubleshooting operational issues](https://msdn.microsoft.com/library/dd787883.aspx).</span></span>  
  
## <a name="how-to-perform-operations-on-lob-data"></a><span data-ttu-id="2af6e-117">如何对 LOB 数据执行操作？</span><span class="sxs-lookup"><span data-stu-id="2af6e-117">How to Perform Operations on LOB Data?</span></span>  
 <span data-ttu-id="2af6e-118">使用 Oracle 数据库上执行操作[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]与[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]涉及过程中所述的任务[开发与 Oracle 数据库的 BizTalk 应用程序的构建基块](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-118">Performing an operation on an Oracle database using [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to develop BizTalk Applications with Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md).</span></span> <span data-ttu-id="2af6e-119">若要调用 ReadLOB 和 UpdateLOB 操作对 Oracle 数据库中的表，这些任务包括：</span><span class="sxs-lookup"><span data-stu-id="2af6e-119">To invoke both ReadLOB and UpdateLOB operations on a table in an Oracle database, these tasks are:</span></span>  
  
1.  <span data-ttu-id="2af6e-120">创建 BizTalk 项目，并为 ReadLOB 和 UpdateLOB 操作生成架构。</span><span class="sxs-lookup"><span data-stu-id="2af6e-120">Create a BizTalk project and generate schema for both ReadLOB and UpdateLOB operations.</span></span>  
  
2.  <span data-ttu-id="2af6e-121">在发送和接收消息从 Oracle 数据库的 BizTalk 项目中创建消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-121">Create messages in the BizTalk project for sending and receiving messages from the Oracle database.</span></span> <span data-ttu-id="2af6e-122">你必须创建用于发送请求和接收有关这两种操作的响应消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-122">You must create messages for both the sending request and receiving responses for both the operations.</span></span>  
  
3.  <span data-ttu-id="2af6e-123">创建业务流程来调用 ReadLOB 和 UpdateLOB 操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-123">Create an orchestration to invoke both ReadLOB and UpdateLOB operations.</span></span>  
  
4.  <span data-ttu-id="2af6e-124">生成和部署 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="2af6e-124">Build and deploy the BizTalk project.</span></span>  
  
5.  <span data-ttu-id="2af6e-125">配置的 BizTalk 应用程序创建的物理发送和接收端口。</span><span class="sxs-lookup"><span data-stu-id="2af6e-125">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
6.  <span data-ttu-id="2af6e-126">启动 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="2af6e-126">Start the BizTalk application.</span></span>  
  
 <span data-ttu-id="2af6e-127">本主题提供执行这些任务的说明。</span><span class="sxs-lookup"><span data-stu-id="2af6e-127">This topic provides instructions to perform these tasks.</span></span>  
  
## <a name="sample-based-on-this-topic"></a><span data-ttu-id="2af6e-128">基于本主题的示例</span><span class="sxs-lookup"><span data-stu-id="2af6e-128">Sample Based On This Topic</span></span>  
 <span data-ttu-id="2af6e-129">示例中，Operate_LOB，基于本主题还提供与[!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2af6e-129">A sample, Operate_LOB, based on this topic is also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="2af6e-130">有关详细信息，请参阅[适配器示例](../../adapters-and-accelerators/accelerator-rosettanet/adapter-samples.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-130">For more information, see [Adapter Samples](../../adapters-and-accelerators/accelerator-rosettanet/adapter-samples.md).</span></span>  
  
## <a name="generating-schema"></a><span data-ttu-id="2af6e-131">生成架构</span><span class="sxs-lookup"><span data-stu-id="2af6e-131">Generating Schema</span></span>  
 <span data-ttu-id="2af6e-132">在本主题中，来演示如何执行 ReadLOB 和 UpdateLOB 操作，我们将生成为 Oracle 数据库中的 SCOTT 架构下的客户表显示这些操作的元数据。</span><span class="sxs-lookup"><span data-stu-id="2af6e-132">In this topic, to demonstrate how to perform ReadLOB and UpdateLOB operations, we will generate metadata for these operations surfaced for the CUSTOMER table under the SCOTT schema in the Oracle database.</span></span> <span data-ttu-id="2af6e-133">通过运行这些示例提供的 SQL 脚本在 SCOTT 架构下创建此表。</span><span class="sxs-lookup"><span data-stu-id="2af6e-133">This table is created under the SCOTT schema by running the SQL scripts provided with the samples.</span></span> <span data-ttu-id="2af6e-134">若要了解有关这些示例的详细信息，请参阅[架构示例](../../adapters-and-accelerators/accelerator-rosettanet/schema-samples.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-134">To know more about the samples, see [Schema Samples](../../adapters-and-accelerators/accelerator-rosettanet/schema-samples.md).</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="2af6e-135">定义消息和消息类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-135">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="2af6e-136">你先前生成的架构描述业务流程中的消息所需的"类型"。</span><span class="sxs-lookup"><span data-stu-id="2af6e-136">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="2af6e-137">一条消息通常是一个变量，为其类型由相应的架构定义。</span><span class="sxs-lookup"><span data-stu-id="2af6e-137">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="2af6e-138">你必须链接您生成第一步中的邮件从 BizTalk 项目的业务流程视图窗口的架构。</span><span class="sxs-lookup"><span data-stu-id="2af6e-138">You must link the schema you generated in the first step to the messages from the Orchestration View window of the BizTalk project.</span></span>  
  
 <span data-ttu-id="2af6e-139">对于本主题中，你必须创建两个请求-响应消息集-一个请求-响应设置 ReadLOB 操作和为 UpdateLOB 操作设置第二个请求-响应。</span><span class="sxs-lookup"><span data-stu-id="2af6e-139">For this topic, you must create two request-response message sets—one request-response set for the ReadLOB operation and the second request-response set for the UpdateLOB operation.</span></span>  
  
 <span data-ttu-id="2af6e-140">执行以下步骤以创建消息并将它们链接到该架构。</span><span class="sxs-lookup"><span data-stu-id="2af6e-140">Perform the following steps to create messages and link them to the schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="2af6e-141">创建消息并将链接到架构</span><span class="sxs-lookup"><span data-stu-id="2af6e-141">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="2af6e-142">如果尚未打开，请打开 BizTalk 项目的业务流程视图窗口。</span><span class="sxs-lookup"><span data-stu-id="2af6e-142">Open the Orchestration View window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="2af6e-143">若要执行此操作，请单击**视图**，指向**其他窗口**，然后单击**业务流程视图**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-143">To do this, click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
2.  <span data-ttu-id="2af6e-144">在业务流程视图中，右键单击**消息**，然后单击**新消息**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-144">In Orchestration View, right-click **Messages**, and then click **New Message**.</span></span>  
  
3.  <span data-ttu-id="2af6e-145">右键单击新创建的消息中，，然后选择**属性窗口**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-145">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
4.  <span data-ttu-id="2af6e-146">在**属性**窗格**Message_1**，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2af6e-146">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="2af6e-147">使用此选项</span><span class="sxs-lookup"><span data-stu-id="2af6e-147">Use this</span></span>|<span data-ttu-id="2af6e-148">执行的操作</span><span class="sxs-lookup"><span data-stu-id="2af6e-148">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="2af6e-149">Identifier</span><span class="sxs-lookup"><span data-stu-id="2af6e-149">Identifier</span></span>|<span data-ttu-id="2af6e-150">类型**请求**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-150">Type **Request**.</span></span>|  
    |<span data-ttu-id="2af6e-151">消息类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-151">Message Type</span></span>|<span data-ttu-id="2af6e-152">从下拉列表中，展开**架构**，然后选择*Operate_LOB。OracleDBBindingSchema.ReadLOB**，*其中*Operate_LOB*是 BizTalk 项目的名称。</span><span class="sxs-lookup"><span data-stu-id="2af6e-152">From the drop-down list, expand **Schemas**, and select *Operate_LOB.OracleDBBindingSchema.ReadLOB**,* where *Operate_LOB* is the name of your BizTalk project.</span></span> <span data-ttu-id="2af6e-153">*OracleDBBindingSchema*是为 CUSTOMER 表中的 ReadLOB 和 UpdateLOB 操作生成的架构。</span><span class="sxs-lookup"><span data-stu-id="2af6e-153">*OracleDBBindingSchema* is the schema generated for the ReadLOB and UpdateLOB operations on the CUSTOMER table.</span></span>|  
  
5.  <span data-ttu-id="2af6e-154">重复上述步骤以创建三个详细消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-154">Repeat the previous step to create three more messages.</span></span> <span data-ttu-id="2af6e-155">在**属性**窗格中是否有新消息，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2af6e-155">In the **Properties** pane for the new messages, do the following:</span></span>  
  
    |<span data-ttu-id="2af6e-156">设置为标识符</span><span class="sxs-lookup"><span data-stu-id="2af6e-156">Set Identifier to</span></span>|<span data-ttu-id="2af6e-157">将消息类型设置为</span><span class="sxs-lookup"><span data-stu-id="2af6e-157">Set Message Type to</span></span>|  
    |-----------------------|-------------------------|  
    |<span data-ttu-id="2af6e-158">响应</span><span class="sxs-lookup"><span data-stu-id="2af6e-158">Response</span></span>|<span data-ttu-id="2af6e-159">*Operate_LOB。OracleDBBindingSchema.ReadLOBResponse*</span><span class="sxs-lookup"><span data-stu-id="2af6e-159">*Operate_LOB.OracleDBBindingSchema.ReadLOBResponse*</span></span>|  
    |<span data-ttu-id="2af6e-160">次数 2</span><span class="sxs-lookup"><span data-stu-id="2af6e-160">Request2</span></span>|<span data-ttu-id="2af6e-161">*Operate_LOB。OracleDBBindingSchema.UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-161">*Operate_LOB.OracleDBBindingSchema.UpdateLOB*</span></span>|  
    |<span data-ttu-id="2af6e-162">Response2</span><span class="sxs-lookup"><span data-stu-id="2af6e-162">Response2</span></span>|<span data-ttu-id="2af6e-163">*Operate_LOB。OracleDBBindingSchema.UpdateLOBResponse*</span><span class="sxs-lookup"><span data-stu-id="2af6e-163">*Operate_LOB.OracleDBBindingSchema.UpdateLOBResponse*</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="2af6e-164">设置业务流程</span><span class="sxs-lookup"><span data-stu-id="2af6e-164">Setting up the Orchestration</span></span>  
 <span data-ttu-id="2af6e-165">你必须创建要使用 BizTalk 业务流程[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]调用 ReadLOB 和 UpdateLOB 对表的操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-165">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for invoking ReadLOB and UpdateLOB operations on a table.</span></span> <span data-ttu-id="2af6e-166">此业务流程，在你删除两个请求消息，一个用于 ReadLOB 操作，另一个用于 UpdateLOB 操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-166">In this orchestration, you drop two request messages, one for the ReadLOB operation and the other for the UpdateLOB operation.</span></span> <span data-ttu-id="2af6e-167">在接收位置丢弃这些消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-167">These messages are dropped at a receive location.</span></span> <span data-ttu-id="2af6e-168">[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]使用消息，并通过 ODP 将它们传递到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2af6e-168">The [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] consumes the messages and passes them on to the Oracle database via ODP.</span></span> <span data-ttu-id="2af6e-169">从 Oracle 数据库的响应保存到另一个位置。</span><span class="sxs-lookup"><span data-stu-id="2af6e-169">The response from the Oracle database is saved to another location.</span></span>  
  
 <span data-ttu-id="2af6e-170">业务流程同时选取两个请求，因为你需要包括并行操作形状中业务流程。</span><span class="sxs-lookup"><span data-stu-id="2af6e-170">Because the orchestration picks two requests simultaneously, you need to include a Parallel Actions shape in the orchestration.</span></span> <span data-ttu-id="2af6e-171">对于每个并行操作，必须包括发送和接收形状来将消息发送到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="2af6e-171">For each parallel action, you must include Send and Receive shapes to send messages to Oracle database and receive responses.</span></span> <span data-ttu-id="2af6e-172">但是，你可以使用相同的端口用于发送和接收两个操作的消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-172">However, you could use the same ports for sending and receiving messages for both operations.</span></span> <span data-ttu-id="2af6e-173">同时执行 ReadLOB 和 UpdateLOB 操作典型业务流程会包含：</span><span class="sxs-lookup"><span data-stu-id="2af6e-173">A typical orchestration for performing the ReadLOB and UpdateLOB operations simultaneously would contain:</span></span>  
  
-   <span data-ttu-id="2af6e-174">发送和接收形状来将消息发送到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="2af6e-174">Send and Receive shapes to send messages to Oracle database and receive responses.</span></span>  
  
-   <span data-ttu-id="2af6e-175">单向接收端口接收请求消息发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2af6e-175">A one-way receive port to receive request messages to send to the Oracle database.</span></span>  
  
-   <span data-ttu-id="2af6e-176">双向发送端口发送请求消息到 Oracle 数据库和接收响应。</span><span class="sxs-lookup"><span data-stu-id="2af6e-176">A two-way send port to send request messages to Oracle database and receive responses.</span></span>  
  
-   <span data-ttu-id="2af6e-177">单向发送端口将响应从 Oracle 数据库发送到的文件夹。</span><span class="sxs-lookup"><span data-stu-id="2af6e-177">A one-way send port to send the responses from Oracle database to a folder.</span></span>  
  
 <span data-ttu-id="2af6e-178">示例业务流程如下所示：</span><span class="sxs-lookup"><span data-stu-id="2af6e-178">A sample orchestration resembles the following:</span></span>  
  
 <span data-ttu-id="2af6e-179">![读取和更新 LOB 数据的业务流程](../../adapters-and-accelerators/adapter-oracle-database/media/6523b5e4-3689-433a-8287-eebc36f10442.gif "6523b5e4-3689-433a-8287-eebc36f10442")</span><span class="sxs-lookup"><span data-stu-id="2af6e-179">![Orchestration for reading and updating LOB data](../../adapters-and-accelerators/adapter-oracle-database/media/6523b5e4-3689-433a-8287-eebc36f10442.gif "6523b5e4-3689-433a-8287-eebc36f10442")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="2af6e-180">添加消息形状</span><span class="sxs-lookup"><span data-stu-id="2af6e-180">Adding Message Shapes</span></span>  
 <span data-ttu-id="2af6e-181">请确保为每个消息形状指定以下属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-181">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="2af6e-182">刚提到业务流程中所示，形状列中列出的名称将是消息形状的名称。</span><span class="sxs-lookup"><span data-stu-id="2af6e-182">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span> <span data-ttu-id="2af6e-183">下表列出了你必须将包含并行操作之一的形状。</span><span class="sxs-lookup"><span data-stu-id="2af6e-183">The following table lists the shapes you must include for one of the parallel actions.</span></span>  
  
|<span data-ttu-id="2af6e-184">形状</span><span class="sxs-lookup"><span data-stu-id="2af6e-184">Shape</span></span>|<span data-ttu-id="2af6e-185">形状类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-185">Shape Type</span></span>|<span data-ttu-id="2af6e-186">属性</span><span class="sxs-lookup"><span data-stu-id="2af6e-186">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="2af6e-187">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="2af6e-187">ReceiveMessage</span></span>|<span data-ttu-id="2af6e-188">Receive</span><span class="sxs-lookup"><span data-stu-id="2af6e-188">Receive</span></span>|<span data-ttu-id="2af6e-189">-将设置**名称**到*ReceiveMessage*</span><span class="sxs-lookup"><span data-stu-id="2af6e-189">-   Set **Name** to *ReceiveMessage*</span></span><br /><span data-ttu-id="2af6e-190">-将设置**激活**到*True*</span><span class="sxs-lookup"><span data-stu-id="2af6e-190">-   Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="2af6e-191">发送消息</span><span class="sxs-lookup"><span data-stu-id="2af6e-191">SendMessage</span></span>|<span data-ttu-id="2af6e-192">Send</span><span class="sxs-lookup"><span data-stu-id="2af6e-192">Send</span></span>|<span data-ttu-id="2af6e-193">-将设置**名称**到*SendMessage*</span><span class="sxs-lookup"><span data-stu-id="2af6e-193">-   Set **Name** to *SendMessage*</span></span>|  
|<span data-ttu-id="2af6e-194">ReceiveResponse</span><span class="sxs-lookup"><span data-stu-id="2af6e-194">ReceiveResponse</span></span>|<span data-ttu-id="2af6e-195">Receive</span><span class="sxs-lookup"><span data-stu-id="2af6e-195">Receive</span></span>|<span data-ttu-id="2af6e-196">-将设置**名称**到*ReceiveResponse*</span><span class="sxs-lookup"><span data-stu-id="2af6e-196">-   Set **Name** to *ReceiveResponse*</span></span><br /><span data-ttu-id="2af6e-197">-将设置**激活**到*False*</span><span class="sxs-lookup"><span data-stu-id="2af6e-197">-   Set **Activate** to *False*</span></span>|  
|<span data-ttu-id="2af6e-198">SendResponse</span><span class="sxs-lookup"><span data-stu-id="2af6e-198">SendResponse</span></span>|<span data-ttu-id="2af6e-199">Send</span><span class="sxs-lookup"><span data-stu-id="2af6e-199">Send</span></span>|<span data-ttu-id="2af6e-200">-将设置**名称**到*SendResponse*</span><span class="sxs-lookup"><span data-stu-id="2af6e-200">-   Set **Name** to *SendResponse*</span></span>|  
  
 <span data-ttu-id="2af6e-201">下表列出了你必须将包含其他并行操作的形状。</span><span class="sxs-lookup"><span data-stu-id="2af6e-201">The following table lists the shapes that you must include for the other parallel action.</span></span>  
  
|<span data-ttu-id="2af6e-202">形状</span><span class="sxs-lookup"><span data-stu-id="2af6e-202">Shape</span></span>|<span data-ttu-id="2af6e-203">形状类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-203">Shape Type</span></span>|<span data-ttu-id="2af6e-204">属性</span><span class="sxs-lookup"><span data-stu-id="2af6e-204">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="2af6e-205">ReceiveMessage2</span><span class="sxs-lookup"><span data-stu-id="2af6e-205">ReceiveMessage2</span></span>|<span data-ttu-id="2af6e-206">Receive</span><span class="sxs-lookup"><span data-stu-id="2af6e-206">Receive</span></span>|<span data-ttu-id="2af6e-207">-将设置**名称**到*ReceiveMessage2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-207">-   Set **Name** to *ReceiveMessage2*</span></span><br /><span data-ttu-id="2af6e-208">-将设置**激活**到*True*</span><span class="sxs-lookup"><span data-stu-id="2af6e-208">-   Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="2af6e-209">SendMessage2</span><span class="sxs-lookup"><span data-stu-id="2af6e-209">SendMessage2</span></span>|<span data-ttu-id="2af6e-210">Send</span><span class="sxs-lookup"><span data-stu-id="2af6e-210">Send</span></span>|<span data-ttu-id="2af6e-211">-将设置**名称**到*SendMessage2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-211">-   Set **Name** to *SendMessage2*</span></span>|  
|<span data-ttu-id="2af6e-212">ReceiveResponse2</span><span class="sxs-lookup"><span data-stu-id="2af6e-212">ReceiveResponse2</span></span>|<span data-ttu-id="2af6e-213">Receive</span><span class="sxs-lookup"><span data-stu-id="2af6e-213">Receive</span></span>|<span data-ttu-id="2af6e-214">-将设置**名称**到*ReceiveResponse2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-214">-   Set **Name** to *ReceiveResponse2*</span></span><br /><span data-ttu-id="2af6e-215">-将设置**激活**到*False*</span><span class="sxs-lookup"><span data-stu-id="2af6e-215">-   Set **Activate** to *False*</span></span>|  
|<span data-ttu-id="2af6e-216">SendResponse2</span><span class="sxs-lookup"><span data-stu-id="2af6e-216">SendResponse2</span></span>|<span data-ttu-id="2af6e-217">Send</span><span class="sxs-lookup"><span data-stu-id="2af6e-217">Send</span></span>|<span data-ttu-id="2af6e-218">-将设置**名称**到*SendResponse2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-218">-   Set **Name** to *SendResponse2*</span></span>|  
  
### <a name="adding-ports"></a><span data-ttu-id="2af6e-219">添加端口</span><span class="sxs-lookup"><span data-stu-id="2af6e-219">Adding Ports</span></span>  
 <span data-ttu-id="2af6e-220">请确保为每个逻辑端口指定以下属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-220">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="2af6e-221">端口列中列出的名称是在业务流程中显示的端口的名称。</span><span class="sxs-lookup"><span data-stu-id="2af6e-221">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="2af6e-222">端口</span><span class="sxs-lookup"><span data-stu-id="2af6e-222">Port</span></span>|<span data-ttu-id="2af6e-223">属性</span><span class="sxs-lookup"><span data-stu-id="2af6e-223">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="2af6e-224">文件</span><span class="sxs-lookup"><span data-stu-id="2af6e-224">FileIn</span></span>|<span data-ttu-id="2af6e-225">-将设置**标识符**到*文件*</span><span class="sxs-lookup"><span data-stu-id="2af6e-225">-   Set **Identifier** to *FileIn*</span></span><br /><span data-ttu-id="2af6e-226">-将设置**类型**到*FileInType*</span><span class="sxs-lookup"><span data-stu-id="2af6e-226">-   Set **Type** to *FileInType*</span></span><br /><span data-ttu-id="2af6e-227">-将设置**通信模式**到*单向*</span><span class="sxs-lookup"><span data-stu-id="2af6e-227">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="2af6e-228">-将设置**通信方向**到*接收*</span><span class="sxs-lookup"><span data-stu-id="2af6e-228">-   Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="2af6e-229">LOBPort</span><span class="sxs-lookup"><span data-stu-id="2af6e-229">LOBPort</span></span>|<span data-ttu-id="2af6e-230">-将设置**标识符**到*LOBPort*</span><span class="sxs-lookup"><span data-stu-id="2af6e-230">-   Set **Identifier** to *LOBPort*</span></span><br /><span data-ttu-id="2af6e-231">-将设置**类型**到*LOBPortType*</span><span class="sxs-lookup"><span data-stu-id="2af6e-231">-   Set **Type** to *LOBPortType*</span></span><br /><span data-ttu-id="2af6e-232">-将设置**通信模式**到*请求-响应*</span><span class="sxs-lookup"><span data-stu-id="2af6e-232">-   Set **Communication Pattern** to *Request-Response*</span></span><br /><span data-ttu-id="2af6e-233">-将设置**通信方向**到*发送接收*</span><span class="sxs-lookup"><span data-stu-id="2af6e-233">-   Set **Communication Direction** to *Send-Receive*</span></span>|  
|<span data-ttu-id="2af6e-234">SaveResponse</span><span class="sxs-lookup"><span data-stu-id="2af6e-234">SaveResponse</span></span>|<span data-ttu-id="2af6e-235">-将设置**标识符**到*SaveResponse*</span><span class="sxs-lookup"><span data-stu-id="2af6e-235">-   Set **Identifier** to *SaveResponse*</span></span><br /><span data-ttu-id="2af6e-236">-将设置**类型**到*SaveResponseType*</span><span class="sxs-lookup"><span data-stu-id="2af6e-236">-   Set **Type** to *SaveResponseType*</span></span><br /><span data-ttu-id="2af6e-237">-将设置**通信模式**到*单向*</span><span class="sxs-lookup"><span data-stu-id="2af6e-237">-   Set **Communication Pattern** to *One-Way*</span></span><br /><span data-ttu-id="2af6e-238">-将设置**通信方向**到*发送*</span><span class="sxs-lookup"><span data-stu-id="2af6e-238">-   Set **Communication Direction** to *Send*</span></span>|  
  
 <span data-ttu-id="2af6e-239">因为你将处理这两个请求和响应消息使用这些端口，你必须创建每个端口，其中每个操作对应于一种消息类型的两个操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-239">Because you will be processing two request and response messages using these ports, you must create two operations for each port, where each operation corresponds to one message type.</span></span> <span data-ttu-id="2af6e-240">若要创建一个操作，请右击端口形状，，然后选择**新操作**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-240">To create an operation, right-click the port shape, and then select **New Operation**.</span></span> <span data-ttu-id="2af6e-241">名称为每个端口的第一个操作**ReadLOB**和每个端口作为第二个操作**UpdateLOB**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-241">Name the first operation for each port as **ReadLOB** and the second operation for each port as **UpdateLOB**.</span></span>  
  
### <a name="using-correlation"></a><span data-ttu-id="2af6e-242">使用相关</span><span class="sxs-lookup"><span data-stu-id="2af6e-242">Using Correlation</span></span>  
 <span data-ttu-id="2af6e-243">相关是将传入消息与业务流程的相应实例相匹配的过程。</span><span class="sxs-lookup"><span data-stu-id="2af6e-243">Correlation is the process of matching an incoming message with the appropriate instance of an orchestration.</span></span> <span data-ttu-id="2af6e-244">业务流程将删除你在两个请求消息，另一个用于每个重载。</span><span class="sxs-lookup"><span data-stu-id="2af6e-244">In the orchestration you will be dropping two request messages, one for each overload.</span></span> <span data-ttu-id="2af6e-245">要使用相关，与右业务流程关联的请求消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-245">Using correlation, you associate a request message with the right orchestration.</span></span> <span data-ttu-id="2af6e-246">有关相关的详细信息，请参阅[在业务流程中使用相关性](../../core/using-correlations-in-orchestrations.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-246">For more information about correlation, see [Using Correlations in Orchestrations](../../core/using-correlations-in-orchestrations.md).</span></span>  
  
##### <a name="to-use-correlations"></a><span data-ttu-id="2af6e-247">若要使用的相关性</span><span class="sxs-lookup"><span data-stu-id="2af6e-247">To use correlations</span></span>  
  
1.  <span data-ttu-id="2af6e-248">从为每个操作生成架构升级属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-248">Promote a property from the schema generated for each operation.</span></span> <span data-ttu-id="2af6e-249">例如，将从 ReadLOB 操作架构; 提升 LOB_COLUMN 属性将从 UpdateLOB 操作架构中提升的筛选器属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-249">For example, promote the LOB_COLUMN property from the ReadLOB operation schema; promote the FILTER property from the UpdateLOB operation schema.</span></span> <span data-ttu-id="2af6e-250">若要提升一个属性，右键单击该属性在架构视图中的，依次指向**Promote**，然后选择**快速升级**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-250">To promote a property, right-click the property in the schema view, point to **Promote**, and then select **Quick Promotion**.</span></span> <span data-ttu-id="2af6e-251">这将 PropertySchema.xsd 文件添加到你的 BizTalk 项目。</span><span class="sxs-lookup"><span data-stu-id="2af6e-251">This adds a PropertySchema.xsd file to your BizTalk project.</span></span>  
  
     <span data-ttu-id="2af6e-252">有关将升级属性的信息，请参阅[提升属性](../../core/promoting-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-252">For information about promoting a property, see [Promoting Properties](../../core/promoting-properties.md).</span></span>  
  
2.  <span data-ttu-id="2af6e-253">在业务流程视图中，右键单击**相关性类型**，然后选择**新相关类型**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-253">From the Orchestration View, right-click **Correlation Types**, and then select **New Correlation Type**.</span></span>  
  
3.  <span data-ttu-id="2af6e-254">**相关性属性**对话框将列出你在步骤 1 中提升的属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-254">The **Correlation Properties** dialog box lists the properties you promoted in step 1.</span></span> <span data-ttu-id="2af6e-255">选择一个属性，然后单击**添加**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-255">Select a property, and then click **Add**.</span></span>  
  
4.  <span data-ttu-id="2af6e-256">单击 **“确定”**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-256">Click **OK**.</span></span>  
  
5.  <span data-ttu-id="2af6e-257">若要创建其他升级属性的相关类型，请重复这些步骤。</span><span class="sxs-lookup"><span data-stu-id="2af6e-257">To create correlation types for the other promoted property, repeat these steps.</span></span>  
  
6.  <span data-ttu-id="2af6e-258">重命名基于它们与之关联的操作的相关类型。</span><span class="sxs-lookup"><span data-stu-id="2af6e-258">Rename the correlation types based on the operation they are associated with.</span></span> <span data-ttu-id="2af6e-259">你可以重命名的相关类型*CorrelationType_ReadLOB* （对于 ReadLOB 操作中） 和*CorrelationType_UpdateLOB* （对于 UpdateLOB 操作中）。</span><span class="sxs-lookup"><span data-stu-id="2af6e-259">You could rename the correlation types to *CorrelationType_ReadLOB* (for the ReadLOB operation) and *CorrelationType_UpdateLOB* (for the UpdateLOB operation).</span></span>  
  
7.  <span data-ttu-id="2af6e-260">从 Orchestration 视图中，右键单击**关联集**，然后选择**新关联集**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-260">From Orchestration View, right-click **Correlation Sets**, and then select **New Correlation Set**.</span></span>  
  
8.  <span data-ttu-id="2af6e-261">右键单击新添加的关联集，并依次**属性**。</span><span class="sxs-lookup"><span data-stu-id="2af6e-261">Right-click the newly added correlation set, and then click **Properties**.</span></span> <span data-ttu-id="2af6e-262">在**属性**窗格中，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="2af6e-262">In the **Properties** pane, do the following:</span></span>  
  
    |<span data-ttu-id="2af6e-263">使用此选项</span><span class="sxs-lookup"><span data-stu-id="2af6e-263">Use this</span></span>|<span data-ttu-id="2af6e-264">执行的操作</span><span class="sxs-lookup"><span data-stu-id="2af6e-264">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="2af6e-265">相关类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-265">Correlation Type</span></span>|<span data-ttu-id="2af6e-266">*Operate_LOB。CorrelationType_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-266">*Operate_LOB.CorrelationType_ReadLOB*</span></span>|  
    |<span data-ttu-id="2af6e-267">Identifier</span><span class="sxs-lookup"><span data-stu-id="2af6e-267">Identifier</span></span>|<span data-ttu-id="2af6e-268">*Correlation_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-268">*Correlation_ReadLOB*</span></span>|  
  
9. <span data-ttu-id="2af6e-269">添加另一个关联集并指定属性窗格中的以下属性。</span><span class="sxs-lookup"><span data-stu-id="2af6e-269">Add another correlation set and specify the following properties from the Properties pane.</span></span>  
  
    |<span data-ttu-id="2af6e-270">使用此选项</span><span class="sxs-lookup"><span data-stu-id="2af6e-270">Use this</span></span>|<span data-ttu-id="2af6e-271">执行的操作</span><span class="sxs-lookup"><span data-stu-id="2af6e-271">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="2af6e-272">相关类型</span><span class="sxs-lookup"><span data-stu-id="2af6e-272">Correlation Type</span></span>|<span data-ttu-id="2af6e-273">*Operate_LOB。CorrelationType_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-273">*Operate_LOB.CorrelationType_UpdateLOB*</span></span>|  
    |<span data-ttu-id="2af6e-274">Identifier</span><span class="sxs-lookup"><span data-stu-id="2af6e-274">Identifier</span></span>|<span data-ttu-id="2af6e-275">*Correlation_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-275">*Correlation_UpdateLOB*</span></span>|  
  
## <a name="specify-messages-for-action-shapes-and-connect-them-to-ports"></a><span data-ttu-id="2af6e-276">对于操作形状，指定消息并将其连接到端口</span><span class="sxs-lookup"><span data-stu-id="2af6e-276">Specify Messages for Action Shapes, and Connect Them to Ports</span></span>  
 <span data-ttu-id="2af6e-277">下表指定属性应设置为指定操作形状的消息并将它们链接到端口及其值。</span><span class="sxs-lookup"><span data-stu-id="2af6e-277">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link them to the ports.</span></span> <span data-ttu-id="2af6e-278">前面提到的业务流程中所示，形状列中列出的名称将是消息形状的名称。</span><span class="sxs-lookup"><span data-stu-id="2af6e-278">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="2af6e-279">形状</span><span class="sxs-lookup"><span data-stu-id="2af6e-279">Shape</span></span>|<span data-ttu-id="2af6e-280">属性</span><span class="sxs-lookup"><span data-stu-id="2af6e-280">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="2af6e-281">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="2af6e-281">ReceiveMessage</span></span>|<span data-ttu-id="2af6e-282">-将设置**初始化相关集**到*Correlation_ReadLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-282">-   Set **Initializing Correlation Sets** to *Correlation_ReadLOB*</span></span><br /><span data-ttu-id="2af6e-283">-将设置**消息**到*请求*</span><span class="sxs-lookup"><span data-stu-id="2af6e-283">-   Set **Message** to *Request*</span></span><br /><span data-ttu-id="2af6e-284">-将设置**操作**到*FileIn.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-284">-   Set **Operation** to *FileIn.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="2af6e-285">发送消息</span><span class="sxs-lookup"><span data-stu-id="2af6e-285">SendMessage</span></span>|<span data-ttu-id="2af6e-286">-将设置**消息**到*请求*</span><span class="sxs-lookup"><span data-stu-id="2af6e-286">-   Set **Message** to *Request*</span></span><br /><span data-ttu-id="2af6e-287">-将设置**操作**到*LOBPort.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-287">-   Set **Operation** to *LOBPort.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="2af6e-288">ReceiveResponse</span><span class="sxs-lookup"><span data-stu-id="2af6e-288">ReceiveResponse</span></span>|<span data-ttu-id="2af6e-289">-将设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="2af6e-289">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="2af6e-290">-将设置**操作**到*LOBPort.ReadLOB.Response*</span><span class="sxs-lookup"><span data-stu-id="2af6e-290">-   Set **Operation** to *LOBPort.ReadLOB.Response*</span></span>|  
|<span data-ttu-id="2af6e-291">SendResponse</span><span class="sxs-lookup"><span data-stu-id="2af6e-291">SendResponse</span></span>|<span data-ttu-id="2af6e-292">-将设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="2af6e-292">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="2af6e-293">-将设置**操作**到*SaveResponse.ReadLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-293">-   Set **Operation** to *SaveResponse.ReadLOB.Request*</span></span>|  
|<span data-ttu-id="2af6e-294">ReceiveMessage2</span><span class="sxs-lookup"><span data-stu-id="2af6e-294">ReceiveMessage2</span></span>|<span data-ttu-id="2af6e-295">-将设置**初始化相关集**到*Correlation_UpdateLOB*</span><span class="sxs-lookup"><span data-stu-id="2af6e-295">-   Set **Initializing Correlation Sets** to *Correlation_UpdateLOB*</span></span><br /><span data-ttu-id="2af6e-296">-将设置**消息**到*次数 2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-296">-   Set **Message** to *Request2*</span></span><br /><span data-ttu-id="2af6e-297">-将设置**操作**到*FileIn.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-297">-   Set **Operation** to *FileIn.UpdateLOB.Request*</span></span>|  
|<span data-ttu-id="2af6e-298">SendMessage2</span><span class="sxs-lookup"><span data-stu-id="2af6e-298">SendMessage2</span></span>|<span data-ttu-id="2af6e-299">-将设置**消息**到*次数 2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-299">-   Set **Message** to *Request2*</span></span><br /><span data-ttu-id="2af6e-300">-将设置**操作**到*LOBPort.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-300">-   Set **Operation** to *LOBPort.UpdateLOB.Request*</span></span>|  
|<span data-ttu-id="2af6e-301">ReceiveResponse2</span><span class="sxs-lookup"><span data-stu-id="2af6e-301">ReceiveResponse2</span></span>|<span data-ttu-id="2af6e-302">-将设置**消息**到*Response2*</span><span class="sxs-lookup"><span data-stu-id="2af6e-302">-   Set **Message** to *Response2*</span></span><br /><span data-ttu-id="2af6e-303">-将设置**操作**到*LOBPort.UpdateLOB.Response*</span><span class="sxs-lookup"><span data-stu-id="2af6e-303">-   Set **Operation** to *LOBPort.UpdateLOB.Response*</span></span>|  
|<span data-ttu-id="2af6e-304">SendResponse2</span><span class="sxs-lookup"><span data-stu-id="2af6e-304">SendResponse2</span></span>|<span data-ttu-id="2af6e-305">-将设置**消息**到*响应*</span><span class="sxs-lookup"><span data-stu-id="2af6e-305">-   Set **Message** to *Response*</span></span><br /><span data-ttu-id="2af6e-306">-将设置**操作**到*SaveResponse.UpdateLOB.Request*</span><span class="sxs-lookup"><span data-stu-id="2af6e-306">-   Set **Operation** to *SaveResponse.UpdateLOB.Request*</span></span>|  
  
 <span data-ttu-id="2af6e-307">指定这些属性后，连接的消息形状和端口，您的业务流程已完成。</span><span class="sxs-lookup"><span data-stu-id="2af6e-307">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="2af6e-308">现在必须生成 BizTalk 解决方案，并将其部署到[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2af6e-308">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="2af6e-309">有关详细信息，请参阅[生成和运行业务流程](../../core/building-and-running-orchestrations.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-309">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>  
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="2af6e-310">配置 BizTalk 应用程序</span><span class="sxs-lookup"><span data-stu-id="2af6e-310">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="2af6e-311">部署 BizTalk 项目后，业务流程之前创建下列出**业务流程**BizTalk Server 管理控制台窗格中的。</span><span class="sxs-lookup"><span data-stu-id="2af6e-311">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="2af6e-312">必须使用 BizTalk Server 管理控制台配置该应用程序。</span><span class="sxs-lookup"><span data-stu-id="2af6e-312">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="2af6e-313">有关演练，请参阅[演练： 将基本的 BizTalk 应用程序部署](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-313">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>
  
 <span data-ttu-id="2af6e-314">配置应用程序涉及：</span><span class="sxs-lookup"><span data-stu-id="2af6e-314">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="2af6e-315">选择应用程序的主机。</span><span class="sxs-lookup"><span data-stu-id="2af6e-315">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="2af6e-316">映射到在 BizTalk Server 管理控制台中的物理端口业务流程中创建的端口。</span><span class="sxs-lookup"><span data-stu-id="2af6e-316">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="2af6e-317">对于此业务流程，您必须：</span><span class="sxs-lookup"><span data-stu-id="2af6e-317">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="2af6e-318">硬盘和将的请求消息，每个用于 ReadLOB 和 UpdateLOB 操作放置位置的相应文件端口上定义的位置。</span><span class="sxs-lookup"><span data-stu-id="2af6e-318">Define a location on the hard disk and a corresponding file port where you will drop the request messages, one each for ReadLOB and UpdateLOB operations.</span></span> <span data-ttu-id="2af6e-319">BizTalk 业务流程将使用请求消息并将其发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2af6e-319">The BizTalk orchestration will consume the request messages and send it to the Oracle database.</span></span>  
  
    -   <span data-ttu-id="2af6e-320">硬盘和 BizTalk 业务流程放置响应消息，另一个用于每个操作，包含从 Oracle 数据库响应的位置的相应文件端口上定义的位置。</span><span class="sxs-lookup"><span data-stu-id="2af6e-320">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the response messages, one for each operation, containing the response from the Oracle database.</span></span>  
  
    -   <span data-ttu-id="2af6e-321">定义物理 WCF 自定义或 WCF OracleDB 发送端口将消息发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2af6e-321">Define a physical WCF-Custom or WCF-OracleDB send port to send messages to the Oracle database.</span></span> <span data-ttu-id="2af6e-322">你必须在发送端口中指定的操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-322">You must also specify the action in the send port.</span></span> <span data-ttu-id="2af6e-323">有关如何创建 WCF 自定义或 WCF OracleDB 端口的信息，请参阅[手动配置到 Oracle 数据库适配器的物理端口绑定](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-323">For information about how to create WCF-Custom or WCF-OracleDB ports, see [Manually configure a physical port binding to the Oracle Database Adapter](../../adapters-and-accelerators/adapter-oracle-database/manually-configure-a-physical-port-binding-to-the-oracle-database-adapter.md).</span></span> <span data-ttu-id="2af6e-324">由于 WCF 自定义或 WCF OracleDB 发送端口发送和接收符合到多个架构的消息并执行两个操作，必须设置为这两种操作的动态操作。</span><span class="sxs-lookup"><span data-stu-id="2af6e-324">Because the WCF-Custom or WCF-OracleDB send port sends and receive messages conforming to more than one schema and performs two operations, you must set dynamic action for both the operations.</span></span> <span data-ttu-id="2af6e-325">有关操作的详细信息，请参阅[配置 Oracle 数据库的 SOAP 操作](../../adapters-and-accelerators/adapter-oracle-database/configure-the-soap-action-for-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-325">For more information about actions, see [Configure the SOAP action for Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-the-soap-action-for-oracle-database.md).</span></span> <span data-ttu-id="2af6e-326">适用于此业务流程，应将操作设置，如下所示：</span><span class="sxs-lookup"><span data-stu-id="2af6e-326">For this orchestration, the action should be set as follows:</span></span>  
  
        ```  
        \<BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
          <Operation Name="ReadLOB" Action="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER/ReadLOB" />  
          <Operation Name="UpdateLOB" Action="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER/UpdateLOB" />  
        </BtsActionMapping>  
        ```  
  
        > [!NOTE]
        >  <span data-ttu-id="2af6e-327">生成架构使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]还会创建包含有关端口和要为这些端口设置的操作的信息的绑定文件。</span><span class="sxs-lookup"><span data-stu-id="2af6e-327">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="2af6e-328">从 BizTalk Server 管理控制台来创建发送端口 （对于出站调用），或接收 （对于入站调用） 的端口，可以导入此绑定文件。</span><span class="sxs-lookup"><span data-stu-id="2af6e-328">You can import this binding file from the BizTalk Server Administration console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="2af6e-329">有关详细信息，请参阅[配置使用端口绑定文件到 Oracle 数据库的物理端口绑定](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-329">For more information, see [Configure a physical port binding using a port binding file to Oracle Database](../../adapters-and-accelerators/adapter-oracle-database/configure-a-physical-port-binding-using-a-port-binding-file-to-oracle-database.md).</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="2af6e-330">启动应用程序</span><span class="sxs-lookup"><span data-stu-id="2af6e-330">Starting the Application</span></span>  
 <span data-ttu-id="2af6e-331">你必须启动 Oracle 数据库上执行操作的 BizTalk 应用程序。</span><span class="sxs-lookup"><span data-stu-id="2af6e-331">You must start the BizTalk application for performing an operation on the Oracle database.</span></span> <span data-ttu-id="2af6e-332">有关启动 BizTalk 应用程序的说明，请参阅[如何启动 Orchestration](../../core/how-to-start-an-orchestration.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-332">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>  
  
 <span data-ttu-id="2af6e-333">在此阶段，请确保：</span><span class="sxs-lookup"><span data-stu-id="2af6e-333">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="2af6e-334">FILE 接收端口，以便运行业务流程的是接收请求消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-334">The FILE receive port to receive request messages for the orchestration is running.</span></span>  
  
-   <span data-ttu-id="2af6e-335">要从业务流程接收响应消息的文件发送端口正在运行。</span><span class="sxs-lookup"><span data-stu-id="2af6e-335">The FILE send port to receive the response messages from the orchestration is running.</span></span>  
  
-   <span data-ttu-id="2af6e-336">WCF 自定义发送端口或 WCF-OracleDB 将消息发送到 Oracle 数据库正在运行。</span><span class="sxs-lookup"><span data-stu-id="2af6e-336">The WCF-Custom send port or WCF-OracleDB to send messages to the Oracle database is running.</span></span>  
  
-   <span data-ttu-id="2af6e-337">BizTalk 业务流程操作正在运行。</span><span class="sxs-lookup"><span data-stu-id="2af6e-337">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="2af6e-338">执行该操作</span><span class="sxs-lookup"><span data-stu-id="2af6e-338">Executing the Operation</span></span>  
 <span data-ttu-id="2af6e-339">运行应用程序后，必须删除的文件的消息接收位置的请求。</span><span class="sxs-lookup"><span data-stu-id="2af6e-339">After you run the application, you must drop request messages to the FILE receive location.</span></span> <span data-ttu-id="2af6e-340">请求消息的架构必须与你先前生成的操作的架构一致。</span><span class="sxs-lookup"><span data-stu-id="2af6e-340">The schema for the request messages must conform to the schema for the operations you generated earlier.</span></span> <span data-ttu-id="2af6e-341">请参阅[特殊 LOB 操作的消息架构](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md)有关调用上使用的 LOB 数据类型的操作的请求消息架构的详细信息[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2af6e-341">See [Message Schemas for Special LOB Operations](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-special-lob-operations2.md) for more information about the request message schema for invoking operations on LOB data types using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span>  
  
 <span data-ttu-id="2af6e-342">业务流程使用请求消息，并将其发送到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2af6e-342">The orchestration consumes the request messages and sends them to the Oracle database.</span></span> <span data-ttu-id="2af6e-343">从 Oracle 数据库的响应保存在定义为业务流程的一部分的其他文件位置中。</span><span class="sxs-lookup"><span data-stu-id="2af6e-343">The response from the Oracle database is saved at other FILE location defined as part of the orchestration.</span></span>  
  
 <span data-ttu-id="2af6e-344">适用于此业务流程，我们先删除 UpdateLOB 操作以更新在 CUSTOMER 表的照片列 （的 BLOB 数据类型） 的请求消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-344">For this orchestration, we first drop a request message for the UpdateLOB operation to update the PHOTO column (of BLOB data type) of the CUSTOMER table.</span></span> <span data-ttu-id="2af6e-345">请求消息来调用特定客户的更新照片列，则：</span><span class="sxs-lookup"><span data-stu-id="2af6e-345">The request message to invoke the update the PHOTO column for a specific customer is:</span></span>  
  
```  
<UpdateLOB xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <LOB_COLUMN>PHOTO</LOB_COLUMN>  
  <FILTER>Name='Mindy Martin'</FILTER>  
  <Stream>YWJjZA==</Stream>  
</UpdateLOB>  
```  
  
> [!NOTE]
>  <span data-ttu-id="2af6e-346">筛选器字符串必须始终提取一个匹配行否则 XmlReaderParsingException Oracle 数据库适配器引发。</span><span class="sxs-lookup"><span data-stu-id="2af6e-346">The filter string must always fetch one matching row otherwise the Oracle Database adapter throws an XmlReaderParsingException.</span></span> <span data-ttu-id="2af6e-347">值为\<流 > 元素必须为 base64Binary 类型。</span><span class="sxs-lookup"><span data-stu-id="2af6e-347">Also the value for the \<Stream> element must be of base64Binary type.</span></span>  
  
 <span data-ttu-id="2af6e-348">UpdateLOB 操作的响应是：</span><span class="sxs-lookup"><span data-stu-id="2af6e-348">The response for the UpdateLOB operation is:</span></span>  
  
```  
\<?xml version="1.0" encoding="utf-8"?>  
<UpdateLOBResponse xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER"></UpdateLOBResponse>  
```  
  
 <span data-ttu-id="2af6e-349">我们现在删除 ReadLOB 操作来读取已由 UpdateLOB 操作更新的数据的请求消息。</span><span class="sxs-lookup"><span data-stu-id="2af6e-349">We now drop a request message for the ReadLOB operation to read the data that was updated by the UpdateLOB operation.</span></span> <span data-ttu-id="2af6e-350">请求消息来调用特定客户的照片列上的 ReadLOB 操作，则：</span><span class="sxs-lookup"><span data-stu-id="2af6e-350">The request message to invoke the ReadLOB operation on the PHOTO column for a specific customer is:</span></span>  
  
```  
<ReadLOB xmlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <LOB_COLUMN>PHOTO</LOB_COLUMN>  
  <FILTER>NAME='Mindy Martin'</FILTER>  
</ReadLOB>  
```  
  
> [!NOTE]
>  <span data-ttu-id="2af6e-351">筛选器字符串必须始终提取一个匹配行。</span><span class="sxs-lookup"><span data-stu-id="2af6e-351">The filter string must always fetch one matching row.</span></span> <span data-ttu-id="2af6e-352">如果存在多个匹配的行，[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]只返回第一个 （匹配） 行的 LOB 列。</span><span class="sxs-lookup"><span data-stu-id="2af6e-352">If there is more than one matching row, the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] only returns the LOB column for the first (matching) row.</span></span>  
  
 <span data-ttu-id="2af6e-353">ReadLOB 操作的响应是：</span><span class="sxs-lookup"><span data-stu-id="2af6e-353">The response for the ReadLOB operation is:</span></span>  
  
```  
\<?xml version="1.0" encoding="utf-8"?>  
<ReadLOBResponse mlns="http://Microsoft.LobServices.OracleDB/2007/03/SCOTT/Table/CUSTOMER">  
  <ReadLOBResult>YWJjZA==</ReadLOBResult>  
</ReadLOBResponse>  
```  
  
> [!NOTE]
>  <span data-ttu-id="2af6e-354">ReadLOB 操作的响应可能会失败，以对 WSDL 进行验证。</span><span class="sxs-lookup"><span data-stu-id="2af6e-354">The response for the ReadLOB operation may fail to validate against the WSDL.</span></span> <span data-ttu-id="2af6e-355">你必须执行某些任务来验证对 WSDL ReadLOB。</span><span class="sxs-lookup"><span data-stu-id="2af6e-355">You must perform certain tasks to validate the ReadLOB against the WSDL.</span></span> <span data-ttu-id="2af6e-356">有关详细信息请参阅[故障排除操作问题](https://msdn.microsoft.com/library/dd787883.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-356">For more information see [Troubleshooting operational issues](https://msdn.microsoft.com/library/dd787883.aspx).</span></span>  
  
## <a name="possible-exceptions"></a><span data-ttu-id="2af6e-357">可能的异常</span><span class="sxs-lookup"><span data-stu-id="2af6e-357">Possible Exceptions</span></span>  
 <span data-ttu-id="2af6e-358">对包含 LOB 数据使用表执行操作时可能遇到的异常的相关信息[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，请参阅[异常和错误处理](../../adapters-and-accelerators/adapter-oracle-database/exceptions-and-error-handling-with-the-oracle-database-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-358">For information about the exceptions you might encounter while performing operations on table containing LOB data using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], see [Exceptions and error handling](../../adapters-and-accelerators/adapter-oracle-database/exceptions-and-error-handling-with-the-oracle-database-adapter.md).</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="2af6e-359">最佳实践</span><span class="sxs-lookup"><span data-stu-id="2af6e-359">Best Practices</span></span>  
 <span data-ttu-id="2af6e-360">已部署并配置 BizTalk 项目之后，你可以将配置设置导出到 XML 文件称为绑定文件。</span><span class="sxs-lookup"><span data-stu-id="2af6e-360">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="2af6e-361">一旦生成绑定文件，你可以从文件导的配置设置，以便不需要创建发送端口，接收端口等相同的业务流程。</span><span class="sxs-lookup"><span data-stu-id="2af6e-361">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="2af6e-362">有关绑定文件的详细信息，请参阅[重复使用 Oracle 数据库适配器绑定](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="2af6e-362">For more information about binding files, see [Reuse Oracle Database Adapter bindings](../../adapters-and-accelerators/adapter-oracle-database/reuse-oracle-database-adapter-bindings.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2af6e-363">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2af6e-363">See Also</span></span>  
[<span data-ttu-id="2af6e-364">对开发 BizTalk 应用程序与 Oracle 数据库的构建基块</span><span class="sxs-lookup"><span data-stu-id="2af6e-364">Building Blocks to Develop BizTalk applications with Oracle Database</span></span>](../../adapters-and-accelerators/adapter-oracle-database/building-blocks-to-develop-biztalk-applications-with-oracle-database.md)