---
title: 接收 Oracle 数据库更改通知 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3ffabf27-7223-4473-b33e-af6f2990cb96
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9cf6c56df7f72a92c41f4c1d206d4244d67829da
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65376210"
---
# <a name="receive-oracle-database-change-notifications"></a><span data-ttu-id="2ac7b-102">接收 Oracle 数据库更改通知</span><span class="sxs-lookup"><span data-stu-id="2ac7b-102">Receive Oracle Database Change Notifications</span></span>
<span data-ttu-id="2ac7b-103">[!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)]支持 ODP.NET 数据库更改通知功能。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-103">The [!INCLUDE[adapteroracle](../../includes/adapteroracle-md.md)] supports the ODP.NET Database Change Notification feature.</span></span> <span data-ttu-id="2ac7b-104">使用此功能，适配器客户端可以将注册的 SELECT 语句为通知查询上，对数据库和数据库将通知发送到适配器客户端和结果集的 SELECT 语句更改。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-104">Using this feature, the adapter clients can register a SELECT statement as the notification query on the database, and the database sends a notification to the adapter client as and when the result set of the SELECT statement changes.</span></span> <span data-ttu-id="2ac7b-105">在适配器使用 OracleDependency 类中实现数据库更改通知。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-105">The database change notification is implemented in the adapter using the OracleDependency class.</span></span> <span data-ttu-id="2ac7b-106">有关 ODP.NET 和 OracleDependency 类中的数据库的更改支持功能的详细信息，请参阅[ http://go.microsoft.com/fwlink/?LinkId=124801 ](http://go.microsoft.com/fwlink/?LinkId=124801)。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-106">For more information about the Database Change Support feature in ODP.NET and the OracleDependency class, see [http://go.microsoft.com/fwlink/?LinkId=124801](http://go.microsoft.com/fwlink/?LinkId=124801).</span></span>  

 <span data-ttu-id="2ac7b-107">[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]公开的入站的操作，通知，以支持数据库更改通知。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-107">The [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] exposes an inbound operation, Notification, to support database change notification.</span></span> <span data-ttu-id="2ac7b-108">但是，数据库的更改通知，以使用[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]，必须确保以下：</span><span class="sxs-lookup"><span data-stu-id="2ac7b-108">However, for the database change notification to work with [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)], you must ensure the following:</span></span>  

- <span data-ttu-id="2ac7b-109">连接到 Oracle 数据库与基础 Oracle 数据库版本 10.2 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-109">Connect to the Oracle database with the underlying Oracle database version 10.2 or later.</span></span> <span data-ttu-id="2ac7b-110">10.2 之前的 oracle 数据库版本不支持通知。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-110">Oracle database versions prior to 10.2 do not support notifications.</span></span>  

- <span data-ttu-id="2ac7b-111">以有权创建通知注册更改通知的用户身份连接到 Oracle 数据库。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-111">Connect to Oracle database as a user that has the CHANGE NOTIFICATION privilege to create a notification registration.</span></span> <span data-ttu-id="2ac7b-112">若要向用户授予更改通知权限，以具有管理权限的用户身份连接到 Oracle 数据库，并在 SQL 提示符处运行以下命令：</span><span class="sxs-lookup"><span data-stu-id="2ac7b-112">To grant the CHANGE NOTIFICATION privilege to a user, connect to the Oracle database as a user with administrative privileges, and run the following command at the SQL prompt:</span></span>  

  ```  
  grant change notification to <user name>  
  ```  

- <span data-ttu-id="2ac7b-113">决定 ODP.NET 可用于从 Oracle 数据库接收数据库更改通知的 TCP 端口。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-113">Decide on a TCP port that can be used by ODP.NET to receive database change notifications from Oracle database.</span></span> <span data-ttu-id="2ac7b-114">将 TCP 端口添加到 Windows 防火墙例外列表。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-114">Add the TCP port to Windows Firewall exceptions list.</span></span> <span data-ttu-id="2ac7b-115">有关如何将端口添加到 Windows 防火墙例外列表的说明，请参阅[ http://go.microsoft.com/fwlink/?LinkID=196959 ](http://go.microsoft.com/fwlink/?LinkID=196959)。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-115">For instructions on how to add ports to Windows Firewall exceptions list, see [http://go.microsoft.com/fwlink/?LinkID=196959](http://go.microsoft.com/fwlink/?LinkID=196959).</span></span> <span data-ttu-id="2ac7b-116">必须提供的同一 TCP 端口号**NotificationPort**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-116">You must provide the same TCP port number for the **NotificationPort** binding property.</span></span> <span data-ttu-id="2ac7b-117">有关绑定属性的详细信息，请参阅[使用的绑定属性](https://msdn.microsoft.com/library/dd788467.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-117">For more information about the binding property, see [Working with binding properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span>  

  <span data-ttu-id="2ac7b-118">典型的数据库更改通知使用[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]涉及以下：</span><span class="sxs-lookup"><span data-stu-id="2ac7b-118">A typical database change notification using the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] involves the following:</span></span>  

1.  <span data-ttu-id="2ac7b-119">适配器客户端必须指定`Notification`中的入站操作**InboundOperationType**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-119">The adapter clients must specify `Notification` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="2ac7b-120">轮询此绑定属性的默认值。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-120">The default value for this binding property is Polling.</span></span>  

2.  <span data-ttu-id="2ac7b-121">适配器客户端必须指定 SQL SELECT 语句中的数据库更改通知注册**NotificationStatement**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-121">The adapter clients must specify a SQL SELECT statement to register for database change notifications in the **NotificationStatement** binding property.</span></span> <span data-ttu-id="2ac7b-122">适配器客户端收到一条通知，从 Oracle 数据库作为和的结果集的指定的 SQL 语句更改。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-122">The adapter client gets a notification from Oracle database as and when the result set for the specified SQL statement changes.</span></span>  

3.  <span data-ttu-id="2ac7b-123">适配器客户端必须指定适配器是否一旦启动侦听器在向适配器客户端发送了通知**NotifyOnListenerStart**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-123">The adapter clients must specify whether the adapter sends a notification to the adapter clients as soon as the listener is started in the **NotifyOnListenerStart** binding property.</span></span>  

4.  <span data-ttu-id="2ac7b-124">通知发送到作为适配器客户端，如果结果集的 SELECT 语句中指定**NotificationStatement**绑定属性发生更改。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-124">The notification is sent to the adapter clients as and when the result set of the SELECT statement specified in the **NotificationStatement** binding property is changed.</span></span>  

> [!CAUTION]
>  <span data-ttu-id="2ac7b-125">如果没有在 Oracle 数据库和适配器客户端之间的网络中断，通知将不会发送到适配器客户端的网络中断期间对 Oracle 数据库进行的更改，此后。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-125">If there is a network outage between the Oracle database and the adapter client, the notifications will not be sent to the adapter clients for the changes done on the Oracle database during the period of network outage, and thereafter.</span></span> <span data-ttu-id="2ac7b-126">因此，您必须使用轮询操作而不是关键方案的通知操作。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-126">Therefore, you must use the Polling operation instead of the Notification operation for critical scenarios.</span></span>  

## <a name="differences-between-notification-and-polling"></a><span data-ttu-id="2ac7b-127">通知和轮询之间的差异</span><span class="sxs-lookup"><span data-stu-id="2ac7b-127">Differences between Notification and Polling</span></span>  
 <span data-ttu-id="2ac7b-128">尽管通知和轮询是这两个入站的操作，并在 Oracle 数据库中的数据更改通知适配器客户端下, 表说明了这两个之间的一些差异。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-128">Though notification and polling are both inbound operations, and inform the adapter clients about the data changes in the Oracle database, the following table illustrates some differences between the two.</span></span> <span data-ttu-id="2ac7b-129">以下差异将帮助你决定具体取决于您的要求操作：</span><span class="sxs-lookup"><span data-stu-id="2ac7b-129">The following differences will help you decide on an operation depending on your requirements:</span></span>  


|                                                                                                                              <span data-ttu-id="2ac7b-130">通知</span><span class="sxs-lookup"><span data-stu-id="2ac7b-130">Notification</span></span>                                                                                                                               |                                                                                                                                                                                                                                                      <span data-ttu-id="2ac7b-131">轮询</span><span class="sxs-lookup"><span data-stu-id="2ac7b-131">Polling</span></span>                                                                                                                                                                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                               <span data-ttu-id="2ac7b-132">通知是仅支持 Oracle 数据库版本 10.2 和更高版本。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-132">Notification is supported only for Oracle database versions 10.2 and later.</span></span>                                                                                               |                                                                                                                                                                          <span data-ttu-id="2ac7b-133">对于所有支持的 Oracle 数据库版本支持轮询[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-133">Polling is supported for all the Oracle database versions that are supported by the [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)].</span></span>                                                                                                                                                                           |
|                                                                                                          <span data-ttu-id="2ac7b-134">数据更改通知始终是瞬间完成的。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-134">The data-change notification is always instantaneous.</span></span>                                                                                                          | <span data-ttu-id="2ac7b-135">你可以配置轮询间隔来检查可用的固定时间间隔轮询的数据或在瞬间完成，以及何时有可用的数据。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-135">You can either configure the polling interval to check the data available for polling at regular intervals or instantaneously as and when the data is available.</span></span> <span data-ttu-id="2ac7b-136">**提示：** 轮询可以提供更好的吞吐量中情况下，数据更改发生的连续，并且不希望为每个更改的和发生时收到通知。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-136">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="2ac7b-137">相反，您指定要在其后的发生是因为最后一个更改通知的所有更改通知的轮询间隔。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-137">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span> |
| <span data-ttu-id="2ac7b-138">Oracle 数据库发出通知。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-138">Notification is initiated by the Oracle database.</span></span> <span data-ttu-id="2ac7b-139">只需在适配器发出的通知语句指示要在没有语句的结果集中的更改的情况下启动通知的数据库。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-139">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span> <span data-ttu-id="2ac7b-140">通知是 Oracle 数据库的一项功能。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-140">Notification is a feature of the Oracle database.</span></span> |                                                                                                                                         <span data-ttu-id="2ac7b-141">由适配器启动轮询。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-141">Polling is initiated by the adapter.</span></span> <span data-ttu-id="2ac7b-142">适配器执行 SQL 语句，以验证是否可用于轮询，然后通过执行轮询语句，如果某些数据可用于轮询启动轮询数据。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-142">The adapter executes a SQL statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>                                                                                                                                         |
|                                                                                             <span data-ttu-id="2ac7b-143">通知语句可用于只读取 Oracle 数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-143">You can use the notification statement to only read data in an Oracle database.</span></span>                                                                                             |                                                                                                                                                                                                                 <span data-ttu-id="2ac7b-144">轮询语句可用于读取或更新 Oracle 数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-144">You can use the polling statement to read or update data in the Oracle database.</span></span>                                                                                                                                                                                                                  |
|                                                                                   <span data-ttu-id="2ac7b-145">通知只告知如 Insert、 数据更改的类型更新和删除。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-145">Notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>                                                                                    |                                                                                                                                                                                                                            <span data-ttu-id="2ac7b-146">轮询通知您已更改的实际数据。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-146">Polling informs you about the actual data that has changed.</span></span>                                                                                                                                                                                                                            |

 <span data-ttu-id="2ac7b-147">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="2ac7b-147">For more information about:</span></span>  

- <span data-ttu-id="2ac7b-148">绑定属性通知与操作相关的请参阅[使用的绑定属性](https://msdn.microsoft.com/library/dd788467.aspx)。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-148">The binding properties related to the Notification operation, see [Working with binding properties](https://msdn.microsoft.com/library/dd788467.aspx).</span></span>  

- <span data-ttu-id="2ac7b-149">如何使用中的通知操作[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]，请参阅[接收 Oracle 数据库更改通知使用 BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="2ac7b-149">How to use the Notification operation in [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)], see [Receiving Oracle Database Change Notifications Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-database/receive-oracle-database-change-notifications-using-biztalk-server.md).</span></span>  

## <a name="see-also"></a><span data-ttu-id="2ac7b-150">请参阅</span><span class="sxs-lookup"><span data-stu-id="2ac7b-150">See Also</span></span>  
 <span data-ttu-id="2ac7b-151">[哪些操作可以是执行使用适配器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="2ac7b-151">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>