---
title: 在 SAP 中的 Idoc 的操作 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- IDOC, operations to receive an
- IDOCs
- IDOCs, operations on
- tRFC server
- IDOC, operations to send an
- RFC server
ms.assetid: 6abcc646-c7a3-48cf-a09e-01f516dcef97
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c9c3bbf45074024b8745b845b3f9ca85f5ff814e
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36972222"
---
# <a name="operations-on-idocs-in-sap"></a><span data-ttu-id="d7e83-102">在 SAP 中的 Idoc 的操作</span><span class="sxs-lookup"><span data-stu-id="d7e83-102">Operations on IDOCs in SAP</span></span>
<span data-ttu-id="d7e83-103">Idoc 是 SAP 支持用于以异步方式与 SAP 和非 SAP 系统进行通信的标准化类似于 EDI 的文档。</span><span class="sxs-lookup"><span data-stu-id="d7e83-103">IDOCs are standardized EDI-like documents that SAP supports for asynchronously communicating with SAP and non-SAP systems.</span></span> <span data-ttu-id="d7e83-104">Idoc 用于发送和接收"business"文档，例如销售订单，例如，与贸易合作伙伴的 SAP 系统或外部程序。</span><span class="sxs-lookup"><span data-stu-id="d7e83-104">IDOCs are used for sending and receiving “business” documents such as sales orders, for example, to or from a trading partner’s SAP system or an external program.</span></span>  
  
 <span data-ttu-id="d7e83-105">虽然 SAP 系统支持多个发送和接收 Idoc 的端口类型 (如文件端口 CPIC 端口)，则[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持发送和接收 Idoc 通过 tRFC 端口。</span><span class="sxs-lookup"><span data-stu-id="d7e83-105">Although the SAP system supports a number of port types to send and receive IDOCs (such as file port, CPIC port), the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending and receiving IDOCs via the tRFC port.</span></span>  
  
## <a name="operations-to-send-an-idoc"></a><span data-ttu-id="d7e83-106">操作以发送 IDOC</span><span class="sxs-lookup"><span data-stu-id="d7e83-106">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="d7e83-107">所有对 SAP 的 IDOC 调用在内部视为 tRFC 调用中的适配器可用作 tRFC 客户端，并在 SAP 发送 IDOC 中调用 RFC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-107">All IDOC calls to SAP are internally treated as tRFC calls in which the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="d7e83-108">就像任何其他 tRFC 客户端调用，适配器客户端 （可选） 将 GUID 传递给适配器，这又将它与事务 ID (TID) 用于 SAP 系统上调用相关联。</span><span class="sxs-lookup"><span data-stu-id="d7e83-108">Just like any other tRFC client call, the adapter client optionally passes a GUID to the adapter, which in turn associates it with the transaction ID (TID) that it uses for the call on the SAP system.</span></span> <span data-ttu-id="d7e83-109">（如果适配器客户端未通过一个 GUID，适配器生成其自己的 GUID。）向适配器客户端的响应消息中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="d7e83-109">(If the adapter client does not pass a GUID, the adapter generates its own GUID.) The GUID is returned to the adapter client in the response message.</span></span> <span data-ttu-id="d7e83-110">适配器客户端可以使用此 GUID 来确认 TID SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="d7e83-110">The adapter client can use this GUID to confirm the TID on the SAP system.</span></span> <span data-ttu-id="d7e83-111">实际 tRFC 调用可以获取通过调用一种特殊的静态方法，在 SAP 绑定中，适配器使用的 SAP TID **ConvertGuidToTid**。</span><span class="sxs-lookup"><span data-stu-id="d7e83-111">The actual SAP TID used by the adapter for the tRFC call can be obtained by invoking a special static method in the SAP binding, **ConvertGuidToTid**.</span></span> <span data-ttu-id="d7e83-112">无实际 TID 可能可用于 SAP 系统上进行问题排查。</span><span class="sxs-lookup"><span data-stu-id="d7e83-112">Having the actual TID may be useful for troubleshooting issues on the SAP system.</span></span>  
  
 <span data-ttu-id="d7e83-113">在调用后将发送完成 IDOC，TID 必须确认 SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="d7e83-113">After the call to send the IDOC is completed, the TID must be confirmed on the SAP system.</span></span> <span data-ttu-id="d7e83-114">这使 SAP 系统从其数据库中删除 TID。</span><span class="sxs-lookup"><span data-stu-id="d7e83-114">This enables the SAP system to delete the TID from its database.</span></span> <span data-ttu-id="d7e83-115">适配器客户端可以确认 SAP 系统上的 TID。</span><span class="sxs-lookup"><span data-stu-id="d7e83-115">The adapter client can confirm the TID on the SAP system.</span></span>  
  
- <span data-ttu-id="d7e83-116">显式，通过调用**RfcConfirmTransID**在适配器上的操作。</span><span class="sxs-lookup"><span data-stu-id="d7e83-116">Explicitly, by invoking the **RfcConfirmTransID** operation on the adapter.</span></span> <span data-ttu-id="d7e83-117">此操作采用一个 GUID （上面的响应消息中返回），并会导致适配器需要确认相关联的 TID SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="d7e83-117">This operation takes a GUID (returned in the response message above) and causes the adapter to confirm the associated TID on the SAP system.</span></span>  
  
- <span data-ttu-id="d7e83-118">隐式，通过设置**AutoConfirmSentIdocs**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="d7e83-118">Implicitly, by setting the **AutoConfirmSentIdocs** binding property.</span></span> <span data-ttu-id="d7e83-119">如果此绑定属性为 true，则适配器将自动提交 TID 后它将 IDOC 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="d7e83-119">If this binding property is true, the adapter automatically commits the TID after it sends the IDOC to the SAP system.</span></span> <span data-ttu-id="d7e83-120">请参阅[了解用于 mySAP Business Suite 绑定属性的 BizTalk 适配器](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="d7e83-120">See [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md) for more information.</span></span>  
  
  <span data-ttu-id="d7e83-121">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]使用以下 Rfc 以将 IDOC 发送：</span><span class="sxs-lookup"><span data-stu-id="d7e83-121">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following RFCs to send an IDOC:</span></span>  
  
- <span data-ttu-id="d7e83-122">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="d7e83-122">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="d7e83-123">使用此函数模块的 SAP 在 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="d7e83-123">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="d7e83-124">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="d7e83-124">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="d7e83-125">此函数模块是使用 SAP 版 4.0 及更高版本。</span><span class="sxs-lookup"><span data-stu-id="d7e83-125">This function module is used for SAP release 4.0 and later.</span></span>  
  
### <a name="sending-idocs-with-segment-data-across-multiple-lines"></a><span data-ttu-id="d7e83-126">使用跨多行数据分段发送 Idoc</span><span class="sxs-lookup"><span data-stu-id="d7e83-126">Sending IDOCs with Segment Data Across Multiple Lines</span></span>  
 <span data-ttu-id="d7e83-127">Idoc 被构成的段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-127">IDOCs are constituted of segments.</span></span> <span data-ttu-id="d7e83-128">IDOC 平面文件中的每个段条目包含段标头信息 （包含 DOCNUM 字段） 和数据分段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-128">Each segment entry in an IDOC flat-file contains the segment header info (containing the DOCNUM field) and the segment data.</span></span> <span data-ttu-id="d7e83-129">某些 Idoc 中段数据可以拆分到多个行。</span><span class="sxs-lookup"><span data-stu-id="d7e83-129">In some IDOCs, the segment data can be split across multiple lines.</span></span> <span data-ttu-id="d7e83-130">例如：</span><span class="sxs-lookup"><span data-stu-id="d7e83-130">For example:</span></span>  
  
```  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment data wrapped from the previous line  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
```  
  
 <span data-ttu-id="d7e83-131">基于 WCF 的[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持将此类 Idoc 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="d7e83-131">The WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending such IDOCs to the SAP system.</span></span> <span data-ttu-id="d7e83-132">若要支持发送此类 Idoc[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]确定每个段数据的上一个延续或者它是否是新段数据。</span><span class="sxs-lookup"><span data-stu-id="d7e83-132">To support sending such IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] determines whether each segment data is a continuation of the previous one, or whether it is a new segment data.</span></span> <span data-ttu-id="d7e83-133">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]决定这通过分析每个段标头，然后查找 DOCNUM 字段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-133">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] decides this by parsing each segment header and looking for the DOCNUM field.</span></span> <span data-ttu-id="d7e83-134">如果段数据拆分到两行，第二行不具有的段标头并因此导致[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]不到 DOCNUM 字段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-134">If the segment data is split across two lines, the second line does not have a segment header and as a result the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find the DOCNUM field.</span></span> <span data-ttu-id="d7e83-135">因此，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可以确定它是上一段数据的延续。</span><span class="sxs-lookup"><span data-stu-id="d7e83-135">Hence, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can determine that it is a continuation of the previous segment data.</span></span>  
  
 <span data-ttu-id="d7e83-136">例如，在表示形式，如上所示的 IDOC[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]找不到任何 DOCNUM 字段中的"`Segment data wrapped from the previous line`"并且能够确定行是上一段数据的延续。</span><span class="sxs-lookup"><span data-stu-id="d7e83-136">For example, in the representation of an IDOC shown above, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find any DOCNUM field in “`Segment data wrapped from the previous line`” and is able to decide that the line is a continuation of the previous segment data.</span></span> <span data-ttu-id="d7e83-137">考虑到的 IDOC 大小在生产环境中，为每个段数据执行此类检查平面文件可能会导致处理时间增加。</span><span class="sxs-lookup"><span data-stu-id="d7e83-137">Considering the size of IDOC flat files in production environments, performing such checks for each segment data may result in increased processing time.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d7e83-138">适配器使用 DOCNUM 字段而不是回车换行符 (CRLF) 来标识和提取每个段记录从 IDOC 数据。</span><span class="sxs-lookup"><span data-stu-id="d7e83-138">The adapter uses the DOCNUM field instead of a carriage return line feed (CRLF) to identify and extract each segment record from IDOC data.</span></span> <span data-ttu-id="d7e83-139">如果中的控件和数据记录的 DOCNUM 字段无效或部分保留为空，则适配器将无法分析 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-139">If the DOCNUM fields in the control and data records are invalid or partly blank, the adapter fails to parse the IDOC.</span></span> <span data-ttu-id="d7e83-140">因此，不到 SAP 系统发送 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-140">Hence, the IDOC is not sent to the SAP system.</span></span>  
  
### <a name="operations-to-send-an-idoc"></a><span data-ttu-id="d7e83-141">操作以发送 IDOC</span><span class="sxs-lookup"><span data-stu-id="d7e83-141">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="d7e83-142">用于将 Idoc 发送到 SAP 系统支持以下操作：</span><span class="sxs-lookup"><span data-stu-id="d7e83-142">The following operations are supported for sending IDOCs to an SAP system:</span></span>  
  
- <span data-ttu-id="d7e83-143">**发送**。</span><span class="sxs-lookup"><span data-stu-id="d7e83-143">**Send**.</span></span> <span data-ttu-id="d7e83-144">使用此操作以将 IDOC 发送到 SAP 系统使用强类型化的架构。</span><span class="sxs-lookup"><span data-stu-id="d7e83-144">Use this operation to send an IDOC to the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="d7e83-145">此操作的架构公开控件记录字段和数据记录的字段，包括段标头和段字段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-145">The schema for this operation exposes control record fields and data record fields, including segment headers and segment fields.</span></span> <span data-ttu-id="d7e83-146">发送操作是特定于 IDocType + CimType + ReleaseNumber + 版本组合。</span><span class="sxs-lookup"><span data-stu-id="d7e83-146">The Send operation is specific to an IDocType + CimType + ReleaseNumber + Version combination.</span></span>  
  
   <span data-ttu-id="d7e83-147">此操作显示每个 idoc，并位于中的特定 IDOC 节点下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d7e83-147">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="d7e83-148">若要能够成功执行**发送**操作，你必须在 SAP 系统中有相关的授权。</span><span class="sxs-lookup"><span data-stu-id="d7e83-148">To be able to successfully perform a **Send** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="d7e83-149">有关详细信息，</span><span class="sxs-lookup"><span data-stu-id="d7e83-149">For more information.</span></span>  
  
- <span data-ttu-id="d7e83-150">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="d7e83-150">**SendIdoc**.</span></span> <span data-ttu-id="d7e83-151">使用此操作以将 IDOC 发送到 SAP 系统使用弱类型的架构。</span><span class="sxs-lookup"><span data-stu-id="d7e83-151">Use this operation to send an IDOC to the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="d7e83-152">此操作的架构公开包含控制记录和数据记录的单个字符串字段为 Idoc。</span><span class="sxs-lookup"><span data-stu-id="d7e83-152">The schema for this operation exposes IDOCs as a single string field consisting the control record and data record.</span></span> <span data-ttu-id="d7e83-153">SendIdoc 操作将 IDOC 字符串和一个 GUID 作为参数。</span><span class="sxs-lookup"><span data-stu-id="d7e83-153">The SendIdoc operation takes an IDOC string and a GUID as a parameter.</span></span>  
  
   <span data-ttu-id="d7e83-154">这是一次性显示所有 Idoc 公开的 SAP 系统，可在根目录下**IDOC**中的节点[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d7e83-154">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="d7e83-155">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="d7e83-155">For more information about:</span></span>  
  
- <span data-ttu-id="d7e83-156">将 IDOC 发送到 SAP 系统使用 BizTalk Server，请参阅[发送到通过使用 BizTalk Server 的 SAP 的 Idoc](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-156">Sending an IDOC to an SAP system using BizTalk Server, see [Send IDOCs to SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md).</span></span>  
  
- <span data-ttu-id="d7e83-157">将 IDOC 发送到 SAP 系统使用 WCF 服务模型，请参阅[向使用 WCF 服务模型的 SAP 发送 Idoc](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-157">Sending an IDOC to an SAP system using WCF service model, see [Send IDOCs to SAP by Using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md).</span></span>  
  
- <span data-ttu-id="d7e83-158">消息结构和 SOAP 操作以发送 IDOC，请参见[IDOC 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-158">Message structures and SOAP action for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="operations-to-receive-an-idoc"></a><span data-ttu-id="d7e83-159">若要接收 IDOC 的操作</span><span class="sxs-lookup"><span data-stu-id="d7e83-159">Operations to Receive an IDOC</span></span>  
 <span data-ttu-id="d7e83-160">若要接收 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]作为 tRFC 服务器或 RFC 服务器行为：</span><span class="sxs-lookup"><span data-stu-id="d7e83-160">To receive an IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can behave either as a tRFC server or an RFC server:</span></span>  
  
- <span data-ttu-id="d7e83-161">为使适配器为 tRFC 服务器，绑定属性的行为**TidDatabaseConnectionString**必须设置为您的计算机上的 TID 数据库的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="d7e83-161">For the adapter to behave as a tRFC server, the binding property **TidDatabaseConnectionString** must be set to the connection string for the TID database on your computer.</span></span> <span data-ttu-id="d7e83-162">TRFC 服务器方案中，对于适配器接受从 SAP 系统的 tRFC 客户端调用，用于接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-162">For a tRFC server scenario, the adapter accepts a tRFC client call from the SAP system to receive the IDOC.</span></span>  
  
- <span data-ttu-id="d7e83-163">适配器为 RFC 服务器行为**TidDatabaseConnectionString**应为 null （默认值）。</span><span class="sxs-lookup"><span data-stu-id="d7e83-163">For the adapter to behave as an RFC server, the **TidDatabaseConnectionString** should be null (default).</span></span> <span data-ttu-id="d7e83-164">RFC 服务器方案，该适配器接受从 SAP 系统的 RFC 客户端调用，用于接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-164">For an RFC server scenario, the adapter accepts an RFC client call from the SAP system to receive the IDOC.</span></span>  
  
  <span data-ttu-id="d7e83-165">以下 Rfc 用于发送和接收 Idoc;将发送 Idoc，适配器将使用这些 Rfc，而 SAP 系统接收 IDOC 时, 使用它们。</span><span class="sxs-lookup"><span data-stu-id="d7e83-165">The following RFCs are used to send and receive IDOCs; when sending IDOCs, the adapter uses these RFCs, whereas when receiving IDOCS, the SAP system uses them.</span></span>  
  
- <span data-ttu-id="d7e83-166">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="d7e83-166">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="d7e83-167">使用此函数模块的 SAP 在 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="d7e83-167">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="d7e83-168">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="d7e83-168">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="d7e83-169">此函数模块是使用 SAP 版 4.0 及更高版本。</span><span class="sxs-lookup"><span data-stu-id="d7e83-169">This function module is used for SAP release 4.0 and later.</span></span>  
  
  <span data-ttu-id="d7e83-170">用于从 SAP 系统接收 Idoc 支持以下操作：</span><span class="sxs-lookup"><span data-stu-id="d7e83-170">The following operations are supported for receiving IDOCs from an SAP system:</span></span>  
  
- <span data-ttu-id="d7e83-171">**接收**。</span><span class="sxs-lookup"><span data-stu-id="d7e83-171">**Receive**.</span></span> <span data-ttu-id="d7e83-172">此操作用于从使用强类型架构的 SAP 系统接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-172">Use this operation to receive an IDOC from the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="d7e83-173">此操作的架构公开控件记录字段和数据包括段标头和段字段的记录字段。</span><span class="sxs-lookup"><span data-stu-id="d7e83-173">The schema for this operation exposes control record fields and data record fields including segment headers and segment fields.</span></span>  
  
   <span data-ttu-id="d7e83-174">此操作显示每个 idoc，并位于中的特定 IDOC 节点下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d7e83-174">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="d7e83-175">若要能够成功执行**接收**操作，你必须在 SAP 系统中有相关的授权。</span><span class="sxs-lookup"><span data-stu-id="d7e83-175">To be able to successfully perform a **Receive** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="d7e83-176">有关详细信息，</span><span class="sxs-lookup"><span data-stu-id="d7e83-176">For more information.</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="d7e83-177">使用**接收**操作，也可能会收到多个 Idoc。</span><span class="sxs-lookup"><span data-stu-id="d7e83-177">Using the **Receive** operation, you can also receive multiple IDOCs.</span></span>  
  
- <span data-ttu-id="d7e83-178">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="d7e83-178">**ReceiveIdoc**.</span></span> <span data-ttu-id="d7e83-179">此操作用于从 SAP 系统使用弱类型架构接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-179">Use this operation to receive an IDOC from the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="d7e83-180">此操作的架构公开为控制记录和数据记录组成的单个字符串字段的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="d7e83-180">The schema for this operation exposes IDOCs as a single string field consisting of the control record and data record.</span></span> <span data-ttu-id="d7e83-181">此操作在下一条 XML 消息中字符串形式接收 Idoc \<idocData\>标记。</span><span class="sxs-lookup"><span data-stu-id="d7e83-181">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
   <span data-ttu-id="d7e83-182">这是一次性显示所有 Idoc 公开的 SAP 系统，可在根目录下**IDOC**中的节点[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d7e83-182">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="d7e83-183">在接收 Idoc 时,[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持不同的消息格式，可以指定为绑定属性的值， **ReceiveIDocFormat**公开[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="d7e83-183">When receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports different message formats, which can be specified as a value for the binding property, **ReceiveIDocFormat** exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
- <span data-ttu-id="d7e83-184">如果设置为"类型化"，XML 架构强类型化为特定所收到的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-184">If set to "Typed", the XML schema is strongly typed to the specific IDOC being received.</span></span> <span data-ttu-id="d7e83-185">（从接收操作，就可以查看此消息的架构。</span><span class="sxs-lookup"><span data-stu-id="d7e83-185">(The schema for this message can be seen from the Receive operations.</span></span> <span data-ttu-id="d7e83-186">请注意，架构是不同的 idoc 不同）。</span><span class="sxs-lookup"><span data-stu-id="d7e83-186">Note that the schema is different for different IDOCs).</span></span> <span data-ttu-id="d7e83-187">这会生成 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-187">This yields an XML IDOC.</span></span>  
  
- <span data-ttu-id="d7e83-188">如果设置为"String"，传入的 IDOC 数据返回为字符串值。</span><span class="sxs-lookup"><span data-stu-id="d7e83-188">If set to "String", the incoming IDOC data is returned as a String value.</span></span> <span data-ttu-id="d7e83-189">（此消息的架构，可以查看从 ReceiveIdoc 操作）。</span><span class="sxs-lookup"><span data-stu-id="d7e83-189">(The schema for this message can be seen from the ReceiveIdoc operation).</span></span> <span data-ttu-id="d7e83-190">这将生成的 XML 消息\<idocData\>标记。</span><span class="sxs-lookup"><span data-stu-id="d7e83-190">This yields an XML message with the \<idocData\> tag.</span></span>  
  
- <span data-ttu-id="d7e83-191">如果设置为"Rfc"，消息架构匹配的 RFC 操作 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS，具体取决于传入的 IDOC 版本的 RFC （或 tRFC） 架构。</span><span class="sxs-lookup"><span data-stu-id="d7e83-191">If set to "Rfc", the message schema matches the RFC (or tRFC) schema for the RFC operations IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS, depending on the incoming IDOC version.</span></span> <span data-ttu-id="d7e83-192">如果指定此绑定的属性应使用 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-192">If you specify this binding property you should use the IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS RFC to receive the IDOC.</span></span> <span data-ttu-id="d7e83-193">在前两个选项中，则适配器将在内部使用此 RFC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-193">In the first two options, the adapter internally uses this RFC.</span></span> <span data-ttu-id="d7e83-194">在此选项中，您显式使用此 RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-194">In this option, you explicitly use this RFC to receive an IDOC.</span></span>  
  
  <span data-ttu-id="d7e83-195">用于接收 IDOC 的操作必须与匹配适配器发出的 IDOC 数据的格式。</span><span class="sxs-lookup"><span data-stu-id="d7e83-195">The operation that you use to receive an IDOC must match the format of the IDOC data emitted by the adapter.</span></span> <span data-ttu-id="d7e83-196">下表提供了在其中你可以从 SAP 接收 IDOC 的不同组合的摘要。</span><span class="sxs-lookup"><span data-stu-id="d7e83-196">The following table provides a summary of the different combinations in which you can receive an IDOC from SAP.</span></span>  
  
|<span data-ttu-id="d7e83-197">若要接收 IDOC 使用</span><span class="sxs-lookup"><span data-stu-id="d7e83-197">To receive an IDOC using</span></span>|<span data-ttu-id="d7e83-198">设置绑定属性 ReceiveIDOCFormat 到</span><span class="sxs-lookup"><span data-stu-id="d7e83-198">Set the binding property ReceiveIDOCFormat to</span></span>|  
|------------------------------|---------------------------------------------------|  
|<span data-ttu-id="d7e83-199">**接收**操作</span><span class="sxs-lookup"><span data-stu-id="d7e83-199">**Receive** operation</span></span>|<span data-ttu-id="d7e83-200">类型化</span><span class="sxs-lookup"><span data-stu-id="d7e83-200">Typed</span></span>|  
|<span data-ttu-id="d7e83-201">**ReciveIdoc**操作</span><span class="sxs-lookup"><span data-stu-id="d7e83-201">**ReciveIdoc** operation</span></span>|<span data-ttu-id="d7e83-202">String</span><span class="sxs-lookup"><span data-stu-id="d7e83-202">String</span></span>|  
|<span data-ttu-id="d7e83-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="d7e83-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span></span>|<span data-ttu-id="d7e83-204">Rfc</span><span class="sxs-lookup"><span data-stu-id="d7e83-204">Rfc</span></span>|  
|<span data-ttu-id="d7e83-205">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="d7e83-205">INBOUND_IDOC_PROCESS RFC</span></span>|<span data-ttu-id="d7e83-206">Rfc</span><span class="sxs-lookup"><span data-stu-id="d7e83-206">Rfc</span></span>|  
  
 <span data-ttu-id="d7e83-207">另一个绑定属性**PadReceivedIdocsWithSpaces**为可选字段时填充空格与收到的 IDOC 接收所需格式为"String"。</span><span class="sxs-lookup"><span data-stu-id="d7e83-207">Another binding property **PadReceivedIdocsWithSpaces** pads the received IDOC with white spaces for optional fields when receive format expected is “String”.</span></span> <span data-ttu-id="d7e83-208">这样，与使用以前版本的适配器接收 IDOC 数据格式的兼容性。</span><span class="sxs-lookup"><span data-stu-id="d7e83-208">This enables compatibility with the IDOC data format received using the previous version of the adapter.</span></span>  
  
 <span data-ttu-id="d7e83-209">有关绑定属性的详细信息，请参阅[了解用于 mySAP Business Suite 绑定属性的 BizTalk 适配器](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-209">For more information about binding properties, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="d7e83-210">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="d7e83-210">For more information about:</span></span>  
  
-   <span data-ttu-id="d7e83-211">请参阅使用 BizTalk Server 中，某个 SAP 系统从接收 IDOC[从通过使用 BizTalk Server 的 SAP 接收 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-211">Receiving an IDOC from an SAP system using BizTalk Server, see [Receive IDOCs from SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="d7e83-212">从事务性上下文中使用 BizTalk Server 中的 SAP 系统接收 IDOC，请参阅[接收来自事务性上下文中使用 BizTalk server 中的 SAP 的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-212">Receiving an IDOC from an SAP system in a transactional context using BizTalk Server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="d7e83-213">消息结构和用于接收 IDOC 的 SOAP 操作，请参见[IDOC 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="d7e83-213">Message structures and SOAP action for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
##  <a name="BKMK_Authorize"></a> <span data-ttu-id="d7e83-214">SAP 授权的使用发送或接收操作</span><span class="sxs-lookup"><span data-stu-id="d7e83-214">SAP Authorization for Using Send or Receive Operations</span></span>  
 <span data-ttu-id="d7e83-215">当你使用**发送**或**接收**操作发送或接收 Idoc 使用强类型化的架构，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]在内部调用 IDOCTYPE_READ_COMPLETE RFC，若要检索的元数据IDOC。</span><span class="sxs-lookup"><span data-stu-id="d7e83-215">When you use the **Send** or **Receive** operations to send or receive IDOCs using a strongly-typed schema, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] internally invokes the IDOCTYPE_READ_COMPLETE RFC to retrieve the metadata for the IDOC.</span></span> <span data-ttu-id="d7e83-216">调用此 RFC 需要在 SAP 中的以下授权：</span><span class="sxs-lookup"><span data-stu-id="d7e83-216">Invoking this RFC requires the following authorization in SAP:</span></span>  
  
```  
Authorisation object S_IDOCDEFT, Fields:  
EDI_TCD, value 'WE30'  
ACTVT, value - 03 (display)  
EDI_DOC, value  *  
EDI_CIM, value *  
```  
  
 <span data-ttu-id="d7e83-217">您可以使用 sap SU01 事务添加授权对象。</span><span class="sxs-lookup"><span data-stu-id="d7e83-217">You can use the SU01 transaction in SAP to add an authorization object.</span></span> <span data-ttu-id="d7e83-218">有关事务的详细信息，请联系您的 SAP 管理员或，请参阅 SAP 文档。</span><span class="sxs-lookup"><span data-stu-id="d7e83-218">For more information about the transaction, contact your SAP administrator or refer to SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d7e83-219">请参阅</span><span class="sxs-lookup"><span data-stu-id="d7e83-219">See Also</span></span>  
 <span data-ttu-id="d7e83-220">[哪些操作可以是执行使用适配器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="d7e83-220">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>