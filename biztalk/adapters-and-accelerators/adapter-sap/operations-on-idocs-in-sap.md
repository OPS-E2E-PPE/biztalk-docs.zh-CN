---
title: "SAP 中的 Idoc 上的操作 |Microsoft 文档"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- IDOC, operations to receive an
- IDOCs
- IDOCs, operations on
- tRFC server
- IDOC, operations to send an
- RFC server
ms.assetid: 6abcc646-c7a3-48cf-a09e-01f516dcef97
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cebc9e3fb8382fecf7791d14d52a21ac96f77cde
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/28/2017
---
# <a name="operations-on-idocs-in-sap"></a><span data-ttu-id="5257d-102">SAP 中的 Idoc 上的操作</span><span class="sxs-lookup"><span data-stu-id="5257d-102">Operations on IDOCs in SAP</span></span>
<span data-ttu-id="5257d-103">Idoc 是 SAP 支持用于以异步方式与 SAP 和非 SAP 系统进行通信的标准化的 EDI 类似文档。</span><span class="sxs-lookup"><span data-stu-id="5257d-103">IDOCs are standardized EDI-like documents that SAP supports for asynchronously communicating with SAP and non-SAP systems.</span></span> <span data-ttu-id="5257d-104">Idoc 用于发送和接收到或从贸易合作伙伴的 SAP 系统或外部程序的销售订单，例如，如"business"文档。</span><span class="sxs-lookup"><span data-stu-id="5257d-104">IDOCs are used for sending and receiving “business” documents such as sales orders, for example, to or from a trading partner’s SAP system or an external program.</span></span>  
  
 <span data-ttu-id="5257d-105">尽管 SAP 系统支持大量的发送和接收到的 Idoc 的端口类型 (如文件端口 CPIC 端口)，则[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持发送和接收到的 Idoc 通过 tRFC 端口。</span><span class="sxs-lookup"><span data-stu-id="5257d-105">Although the SAP system supports a number of port types to send and receive IDOCs (such as file port, CPIC port), the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending and receiving IDOCs via the tRFC port.</span></span>  
  
## <a name="operations-to-send-an-idoc"></a><span data-ttu-id="5257d-106">操作以将 IDOC 发送</span><span class="sxs-lookup"><span data-stu-id="5257d-106">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="5257d-107">对 SAP 的所有 IDOC 调用内部都视为 tRFC 调用其中适配器充当 tRFC 客户端，以将 IDOC 发送的 SAP 中调用 RFC。</span><span class="sxs-lookup"><span data-stu-id="5257d-107">All IDOC calls to SAP are internally treated as tRFC calls in which the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="5257d-108">就像任何其他 tRFC 客户端调用，适配器客户端 （可选） 将 GUID 传递给适配器，这反过来将它与事务 ID (TID) 用于 SAP 系统上调用相关联。</span><span class="sxs-lookup"><span data-stu-id="5257d-108">Just like any other tRFC client call, the adapter client optionally passes a GUID to the adapter, which in turn associates it with the transaction ID (TID) that it uses for the call on the SAP system.</span></span> <span data-ttu-id="5257d-109">（如果适配器客户端未通过 GUID，该适配器将生成其自己的 GUID。）向适配器客户端的响应消息中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="5257d-109">(If the adapter client does not pass a GUID, the adapter generates its own GUID.) The GUID is returned to the adapter client in the response message.</span></span> <span data-ttu-id="5257d-110">适配器客户端可以使用此 GUID 以确认 TID SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="5257d-110">The adapter client can use this GUID to confirm the TID on the SAP system.</span></span> <span data-ttu-id="5257d-111">可以通过调用一种特殊的静态方法，在 SAP 绑定中，获得 tRFC 调用用于适配器实际 SAP TID **ConvertGuidToTid**。</span><span class="sxs-lookup"><span data-stu-id="5257d-111">The actual SAP TID used by the adapter for the tRFC call can be obtained by invoking a special static method in the SAP binding, **ConvertGuidToTid**.</span></span> <span data-ttu-id="5257d-112">具有实际 TID 可能有助于故障排除 SAP 系统上的问题。</span><span class="sxs-lookup"><span data-stu-id="5257d-112">Having the actual TID may be useful for troubleshooting issues on the SAP system.</span></span>  
  
 <span data-ttu-id="5257d-113">在调用后将发送完成 IDOC，TID 必须确认 SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="5257d-113">After the call to send the IDOC is completed, the TID must be confirmed on the SAP system.</span></span> <span data-ttu-id="5257d-114">这使得 SAP 系统从其数据库中删除 TID。</span><span class="sxs-lookup"><span data-stu-id="5257d-114">This enables the SAP system to delete the TID from its database.</span></span> <span data-ttu-id="5257d-115">适配器客户端可以确认 TID SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="5257d-115">The adapter client can confirm the TID on the SAP system.</span></span>  
  
-   <span data-ttu-id="5257d-116">显式，通过调用**RfcConfirmTransID**适配器上的操作。</span><span class="sxs-lookup"><span data-stu-id="5257d-116">Explicitly, by invoking the **RfcConfirmTransID** operation on the adapter.</span></span> <span data-ttu-id="5257d-117">此操作采用 （上面的响应消息中返回） 的 GUID，并会导致确认关联的 TID SAP 系统上的适配器。</span><span class="sxs-lookup"><span data-stu-id="5257d-117">This operation takes a GUID (returned in the response message above) and causes the adapter to confirm the associated TID on the SAP system.</span></span>  
  
-   <span data-ttu-id="5257d-118">隐式，通过设置**AutoConfirmSentIdocs**绑定属性。</span><span class="sxs-lookup"><span data-stu-id="5257d-118">Implicitly, by setting the **AutoConfirmSentIdocs** binding property.</span></span> <span data-ttu-id="5257d-119">如果此绑定属性为 true，该适配器将自动提交 TID 后它将 IDOC 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="5257d-119">If this binding property is true, the adapter automatically commits the TID after it sends the IDOC to the SAP system.</span></span> <span data-ttu-id="5257d-120">请参阅[阅读有关 BizTalk 适配器用于 mySAP Business Suite 绑定属性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="5257d-120">See [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md) for more information.</span></span>  
  
 <span data-ttu-id="5257d-121">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]使用了以下 Rfc 将 IDOC 发送：</span><span class="sxs-lookup"><span data-stu-id="5257d-121">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following RFCs to send an IDOC:</span></span>  
  
-   <span data-ttu-id="5257d-122">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="5257d-122">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="5257d-123">使用此函数的模块有关 SAP 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="5257d-123">This function module is used for SAP releases before 4.0.</span></span>  
  
-   <span data-ttu-id="5257d-124">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="5257d-124">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="5257d-125">此函数模块是用于 SAP 版本 4.0 及更高版本。</span><span class="sxs-lookup"><span data-stu-id="5257d-125">This function module is used for SAP release 4.0 and later.</span></span>  
  
### <a name="sending-idocs-with-segment-data-across-multiple-lines"></a><span data-ttu-id="5257d-126">与跨多行数据分段发送到的 Idoc</span><span class="sxs-lookup"><span data-stu-id="5257d-126">Sending IDOCs with Segment Data Across Multiple Lines</span></span>  
 <span data-ttu-id="5257d-127">Idoc 被构成的段。</span><span class="sxs-lookup"><span data-stu-id="5257d-127">IDOCs are constituted of segments.</span></span> <span data-ttu-id="5257d-128">IDOC 平面文件中的每个段条目包含 （包含 DOCNUM 字段） 的段标头信息和数据分段。</span><span class="sxs-lookup"><span data-stu-id="5257d-128">Each segment entry in an IDOC flat-file contains the segment header info (containing the DOCNUM field) and the segment data.</span></span> <span data-ttu-id="5257d-129">在某些 Idoc，可以跨多行拆分数据分段。</span><span class="sxs-lookup"><span data-stu-id="5257d-129">In some IDOCs, the segment data can be split across multiple lines.</span></span> <span data-ttu-id="5257d-130">例如：</span><span class="sxs-lookup"><span data-stu-id="5257d-130">For example:</span></span>  
  
```  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment data wrapped from the previous line  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
```  
  
 <span data-ttu-id="5257d-131">基于 WCF 的[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持将此类 Idoc 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="5257d-131">The WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending such IDOCs to the SAP system.</span></span> <span data-ttu-id="5257d-132">若要支持发送此类 Idoc[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]确定每个段数据是否是上一个，延续或者它是否是新的段数据。</span><span class="sxs-lookup"><span data-stu-id="5257d-132">To support sending such IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] determines whether each segment data is a continuation of the previous one, or whether it is a new segment data.</span></span> <span data-ttu-id="5257d-133">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]决定此分析每个段标头，查找 DOCNUM 字段。</span><span class="sxs-lookup"><span data-stu-id="5257d-133">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] decides this by parsing each segment header and looking for the DOCNUM field.</span></span> <span data-ttu-id="5257d-134">如果对段数据已拆分到两行，第二行没有段标头和因此[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]未找到 DOCNUM 字段。</span><span class="sxs-lookup"><span data-stu-id="5257d-134">If the segment data is split across two lines, the second line does not have a segment header and as a result the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find the DOCNUM field.</span></span> <span data-ttu-id="5257d-135">因此，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可以确定它是否是上一段数据的延续。</span><span class="sxs-lookup"><span data-stu-id="5257d-135">Hence, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can determine that it is a continuation of the previous segment data.</span></span>  
  
 <span data-ttu-id="5257d-136">例如，在的表示形式，如上所示的 IDOC[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]未找到任何 DOCNUM 字段"`Segment data wrapped from the previous line`"并且能够决定行是上一段数据的延续。</span><span class="sxs-lookup"><span data-stu-id="5257d-136">For example, in the representation of an IDOC shown above, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find any DOCNUM field in “`Segment data wrapped from the previous line`” and is able to decide that the line is a continuation of the previous segment data.</span></span> <span data-ttu-id="5257d-137">考虑到的 IDOC 的大小在生产环境中，为每个段数据执行此类检查的平面文件可能会导致处理时间增加。</span><span class="sxs-lookup"><span data-stu-id="5257d-137">Considering the size of IDOC flat files in production environments, performing such checks for each segment data may result in increased processing time.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5257d-138">适配器使用的 DOCNUM 字段而不是回车换行符 (CRLF) 标识和提取每个段记录从 IDOC 数据。</span><span class="sxs-lookup"><span data-stu-id="5257d-138">The adapter uses the DOCNUM field instead of a carriage return line feed (CRLF) to identify and extract each segment record from IDOC data.</span></span> <span data-ttu-id="5257d-139">如果控制和数据记录中的 DOCNUM 字段无效或部分为空，该适配器无法分析 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-139">If the DOCNUM fields in the control and data records are invalid or partly blank, the adapter fails to parse the IDOC.</span></span> <span data-ttu-id="5257d-140">因此，IDOC 不会发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="5257d-140">Hence, the IDOC is not sent to the SAP system.</span></span>  
  
### <a name="operations-to-send-an-idoc"></a><span data-ttu-id="5257d-141">操作以将 IDOC 发送</span><span class="sxs-lookup"><span data-stu-id="5257d-141">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="5257d-142">将 Idoc 发送到 SAP 系统支持以下操作：</span><span class="sxs-lookup"><span data-stu-id="5257d-142">The following operations are supported for sending IDOCs to an SAP system:</span></span>  
  
-   <span data-ttu-id="5257d-143">**发送**。</span><span class="sxs-lookup"><span data-stu-id="5257d-143">**Send**.</span></span> <span data-ttu-id="5257d-144">使用此操作以将 IDOC 发送到使用强类型的架构的 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="5257d-144">Use this operation to send an IDOC to the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="5257d-145">此操作的架构公开控件记录字段和数据记录字段，包括段标头和段字段。</span><span class="sxs-lookup"><span data-stu-id="5257d-145">The schema for this operation exposes control record fields and data record fields, including segment headers and segment fields.</span></span> <span data-ttu-id="5257d-146">发送操作是特定于 IDocType + CimType + ReleaseNumber + 版本组合。</span><span class="sxs-lookup"><span data-stu-id="5257d-146">The Send operation is specific to an IDocType + CimType + ReleaseNumber + Version combination.</span></span>  
  
     <span data-ttu-id="5257d-147">此操作会显示每个 idoc 并位于中的特定 IDOC 节点下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5257d-147">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="5257d-148">若要能够成功执行**发送**操作，你必须在 SAP 系统中有相关的授权。</span><span class="sxs-lookup"><span data-stu-id="5257d-148">To be able to successfully perform a **Send** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="5257d-149">有关详细信息，</span><span class="sxs-lookup"><span data-stu-id="5257d-149">For more information.</span></span>  
  
-   <span data-ttu-id="5257d-150">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="5257d-150">**SendIdoc**.</span></span> <span data-ttu-id="5257d-151">使用此操作以将 IDOC 发送到使用弱类型的架构的 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="5257d-151">Use this operation to send an IDOC to the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="5257d-152">此操作的架构将作为单个字符串字段组成的控制记录和数据记录公开 Idoc。</span><span class="sxs-lookup"><span data-stu-id="5257d-152">The schema for this operation exposes IDOCs as a single string field consisting the control record and data record.</span></span> <span data-ttu-id="5257d-153">SendIdoc 操作将作为参数的 IDOC 字符串和一个 GUID。</span><span class="sxs-lookup"><span data-stu-id="5257d-153">The SendIdoc operation takes an IDOC string and a GUID as a parameter.</span></span>  
  
     <span data-ttu-id="5257d-154">这是为公开的 SAP 系统的所有 Idoc 中加以表示单个操作，可以在根目录下**IDOC**中的节点[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5257d-154">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
 <span data-ttu-id="5257d-155">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="5257d-155">For more information about:</span></span>  
  
-   <span data-ttu-id="5257d-156">将 IDOC 发送到使用 BizTalk Server SAP 系统，请参阅[将 Idoc 发送到 SAP 使用 BizTalk server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-156">Sending an IDOC to an SAP system using BizTalk Server, see [Send IDOCs to SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="5257d-157">将 IDOC 发送到使用 WCF 服务模型 SAP 系统，请参阅[将 Idoc 发送到使用 WCF 服务模型的 SAP](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-157">Sending an IDOC to an SAP system using WCF service model, see [Send IDOCs to SAP by Using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md).</span></span>  
  
-   <span data-ttu-id="5257d-158">消息结构和用于发送 IDOC 的 SOAP 操作，请参阅[IDOC 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-158">Message structures and SOAP action for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="operations-to-receive-an-idoc"></a><span data-ttu-id="5257d-159">操作接收 IDOC</span><span class="sxs-lookup"><span data-stu-id="5257d-159">Operations to Receive an IDOC</span></span>  
 <span data-ttu-id="5257d-160">若要接收 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可以具有作为 tRFC 服务器或 RFC 服务器的行为：</span><span class="sxs-lookup"><span data-stu-id="5257d-160">To receive an IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can behave either as a tRFC server or an RFC server:</span></span>  
  
-   <span data-ttu-id="5257d-161">为使适配器为 tRFC 服务器，绑定属性的行为**TidDatabaseConnectionString**必须设置为你计算机上的 TID 数据库的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="5257d-161">For the adapter to behave as a tRFC server, the binding property **TidDatabaseConnectionString** must be set to the connection string for the TID database on your computer.</span></span> <span data-ttu-id="5257d-162">对于 tRFC 服务器方案，该适配器接受从 SAP 系统的 tRFC 客户端调用，以接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-162">For a tRFC server scenario, the adapter accepts a tRFC client call from the SAP system to receive the IDOC.</span></span>  
  
-   <span data-ttu-id="5257d-163">为使适配器充当 RFC 服务器，行为**TidDatabaseConnectionString**应为 null （默认值）。</span><span class="sxs-lookup"><span data-stu-id="5257d-163">For the adapter to behave as an RFC server, the **TidDatabaseConnectionString** should be null (default).</span></span> <span data-ttu-id="5257d-164">有关 RFC 服务器方案，该适配器接受从 SAP 系统的 RFC 客户端调用，以接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-164">For an RFC server scenario, the adapter accepts an RFC client call from the SAP system to receive the IDOC.</span></span>  
  
 <span data-ttu-id="5257d-165">以下 Rfc 用于发送和接收到的 Idoc;发送到的 Idoc 时, 适配器将使用这些 Rfc，而当接收到的 IDOC，SAP 系统使用它们。</span><span class="sxs-lookup"><span data-stu-id="5257d-165">The following RFCs are used to send and receive IDOCs; when sending IDOCs, the adapter uses these RFCs, whereas when receiving IDOCS, the SAP system uses them.</span></span>  
  
-   <span data-ttu-id="5257d-166">INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="5257d-166">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="5257d-167">使用此函数的模块有关 SAP 4.0 之前的版本。</span><span class="sxs-lookup"><span data-stu-id="5257d-167">This function module is used for SAP releases before 4.0.</span></span>  
  
-   <span data-ttu-id="5257d-168">IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="5257d-168">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="5257d-169">此函数模块是用于 SAP 版本 4.0 及更高版本。</span><span class="sxs-lookup"><span data-stu-id="5257d-169">This function module is used for SAP release 4.0 and later.</span></span>  
  
 <span data-ttu-id="5257d-170">用于从 SAP 系统接收到的 Idoc 支持以下操作：</span><span class="sxs-lookup"><span data-stu-id="5257d-170">The following operations are supported for receiving IDOCs from an SAP system:</span></span>  
  
-   <span data-ttu-id="5257d-171">**接收**。</span><span class="sxs-lookup"><span data-stu-id="5257d-171">**Receive**.</span></span> <span data-ttu-id="5257d-172">使用此操作使用强类型的架构的 SAP 系统从接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-172">Use this operation to receive an IDOC from the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="5257d-173">此操作的架构公开控件记录字段和数据包括段标头和段字段的记录字段。</span><span class="sxs-lookup"><span data-stu-id="5257d-173">The schema for this operation exposes control record fields and data record fields including segment headers and segment fields.</span></span>  
  
     <span data-ttu-id="5257d-174">此操作会显示每个 idoc 并位于中的特定 IDOC 节点下[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5257d-174">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="5257d-175">若要能够成功执行**接收**操作，你必须在 SAP 系统中有相关的授权。</span><span class="sxs-lookup"><span data-stu-id="5257d-175">To be able to successfully perform a **Receive** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="5257d-176">有关详细信息，</span><span class="sxs-lookup"><span data-stu-id="5257d-176">For more information.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="5257d-177">使用**接收**操作，也可以接收多个 Idoc。</span><span class="sxs-lookup"><span data-stu-id="5257d-177">Using the **Receive** operation, you can also receive multiple IDOCs.</span></span>  
  
-   <span data-ttu-id="5257d-178">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="5257d-178">**ReceiveIdoc**.</span></span> <span data-ttu-id="5257d-179">使用此操作使用弱类型的架构的 SAP 系统从接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-179">Use this operation to receive an IDOC from the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="5257d-180">此操作的架构将作为单个字符串字段组成的控制记录和数据记录公开 Idoc。</span><span class="sxs-lookup"><span data-stu-id="5257d-180">The schema for this operation exposes IDOCs as a single string field consisting of the control record and data record.</span></span> <span data-ttu-id="5257d-181">此操作作为字符串下一条 XML 消息中接收到的 Idoc \<idocData\>标记。</span><span class="sxs-lookup"><span data-stu-id="5257d-181">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
     <span data-ttu-id="5257d-182">这是为公开的 SAP 系统的所有 Idoc 中加以表示单个操作，可以在根目录下**IDOC**中的节点[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]或[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5257d-182">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
 <span data-ttu-id="5257d-183">当接收到的 Idoc，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持不同的消息格式，可以指定为绑定属性的值， **ReceiveIDocFormat**公开[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="5257d-183">When receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports different message formats, which can be specified as a value for the binding property, **ReceiveIDocFormat** exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
-   <span data-ttu-id="5257d-184">如果设置为"类型"，XML 架构强类型化为特定所收到的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-184">If set to "Typed", the XML schema is strongly typed to the specific IDOC being received.</span></span> <span data-ttu-id="5257d-185">（从接收操作，就可以看到此消息的架构。</span><span class="sxs-lookup"><span data-stu-id="5257d-185">(The schema for this message can be seen from the Receive operations.</span></span> <span data-ttu-id="5257d-186">请注意，架构是不同的不同 Idoc）。</span><span class="sxs-lookup"><span data-stu-id="5257d-186">Note that the schema is different for different IDOCs).</span></span> <span data-ttu-id="5257d-187">这会生成 XML IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-187">This yields an XML IDOC.</span></span>  
  
-   <span data-ttu-id="5257d-188">如果设置为"String"，传入的 IDOC 数据返回为字符串值。</span><span class="sxs-lookup"><span data-stu-id="5257d-188">If set to "String", the incoming IDOC data is returned as a String value.</span></span> <span data-ttu-id="5257d-189">（此消息的架构，可以查看从 ReceiveIdoc 操作）。</span><span class="sxs-lookup"><span data-stu-id="5257d-189">(The schema for this message can be seen from the ReceiveIdoc operation).</span></span> <span data-ttu-id="5257d-190">这将生成的 XML 消息\<idocData\>标记。</span><span class="sxs-lookup"><span data-stu-id="5257d-190">This yields an XML message with the \<idocData\> tag.</span></span>  
  
-   <span data-ttu-id="5257d-191">如果设置为"Rfc"，消息架构匹配的 RFC 操作 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS，具体取决于传入的 IDOC 版本的 RFC （或 tRFC） 架构。</span><span class="sxs-lookup"><span data-stu-id="5257d-191">If set to "Rfc", the message schema matches the RFC (or tRFC) schema for the RFC operations IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS, depending on the incoming IDOC version.</span></span> <span data-ttu-id="5257d-192">如果指定此绑定属性，你应使用 IDOC_INBOUND_ASYNCHRONOUS 或 INBOUND_IDOC_PROCESS RFC 接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-192">If you specify this binding property you should use the IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS RFC to receive the IDOC.</span></span> <span data-ttu-id="5257d-193">在前两个选项中，适配器在内部使用此 RFC。</span><span class="sxs-lookup"><span data-stu-id="5257d-193">In the first two options, the adapter internally uses this RFC.</span></span> <span data-ttu-id="5257d-194">在此选项，则显式使用此 RFC 来接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-194">In this option, you explicitly use this RFC to receive an IDOC.</span></span>  
  
 <span data-ttu-id="5257d-195">用于接收 IDOC 操作必须与匹配适配器发出的 IDOC 数据的格式。</span><span class="sxs-lookup"><span data-stu-id="5257d-195">The operation that you use to receive an IDOC must match the format of the IDOC data emitted by the adapter.</span></span> <span data-ttu-id="5257d-196">下表提供了在其中您可以从 SAP 接收 IDOC 的不同组合的摘要。</span><span class="sxs-lookup"><span data-stu-id="5257d-196">The following table provides a summary of the different combinations in which you can receive an IDOC from SAP.</span></span>  
  
|<span data-ttu-id="5257d-197">若要接收 IDOC 使用</span><span class="sxs-lookup"><span data-stu-id="5257d-197">To receive an IDOC using</span></span>|<span data-ttu-id="5257d-198">设置绑定属性 ReceiveIDOCFormat 到</span><span class="sxs-lookup"><span data-stu-id="5257d-198">Set the binding property ReceiveIDOCFormat to</span></span>|  
|------------------------------|---------------------------------------------------|  
|<span data-ttu-id="5257d-199">**接收**操作</span><span class="sxs-lookup"><span data-stu-id="5257d-199">**Receive** operation</span></span>|<span data-ttu-id="5257d-200">类型化</span><span class="sxs-lookup"><span data-stu-id="5257d-200">Typed</span></span>|  
|<span data-ttu-id="5257d-201">**ReciveIdoc**操作</span><span class="sxs-lookup"><span data-stu-id="5257d-201">**ReciveIdoc** operation</span></span>|<span data-ttu-id="5257d-202">字符串</span><span class="sxs-lookup"><span data-stu-id="5257d-202">String</span></span>|  
|<span data-ttu-id="5257d-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="5257d-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span></span>|<span data-ttu-id="5257d-204">Rfc</span><span class="sxs-lookup"><span data-stu-id="5257d-204">Rfc</span></span>|  
|<span data-ttu-id="5257d-205">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="5257d-205">INBOUND_IDOC_PROCESS RFC</span></span>|<span data-ttu-id="5257d-206">Rfc</span><span class="sxs-lookup"><span data-stu-id="5257d-206">Rfc</span></span>|  
  
 <span data-ttu-id="5257d-207">另一个绑定属性**PadReceivedIdocsWithSpaces**可选字段时将填充以空格收到的 IDOC 接收的预期格式为"字符串"。</span><span class="sxs-lookup"><span data-stu-id="5257d-207">Another binding property **PadReceivedIdocsWithSpaces** pads the received IDOC with white spaces for optional fields when receive format expected is “String”.</span></span> <span data-ttu-id="5257d-208">这使与接收到使用以前的版本的适配器的 IDOC 数据格式的兼容性。</span><span class="sxs-lookup"><span data-stu-id="5257d-208">This enables compatibility with the IDOC data format received using the previous version of the adapter.</span></span>  
  
 <span data-ttu-id="5257d-209">有关绑定属性的详细信息，请参阅[阅读有关 BizTalk 适配器用于 mySAP Business Suite 绑定属性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-209">For more information about binding properties, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="5257d-210">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="5257d-210">For more information about:</span></span>  
  
-   <span data-ttu-id="5257d-211">使用 BizTalk Server 中，某个 SAP 系统从接收 IDOC 请参阅[从 SAP 使用 BizTalk server 接收 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-211">Receiving an IDOC from an SAP system using BizTalk Server, see [Receive IDOCs from SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="5257d-212">从 SAP 系统中使用 BizTalk Server 的事务上下文中接收 IDOC，请参阅[接收从通过使用 BizTalk Server 事务上下文中的 SAP 的 Idoc](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-212">Receiving an IDOC from an SAP system in a transactional context using BizTalk Server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="5257d-213">消息结构和用于接收 IDOC 的 SOAP 操作，请参阅[IDOC 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="5257d-213">Message structures and SOAP action for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
##  <a name="BKMK_Authorize"></a><span data-ttu-id="5257d-214">SAP 授权使用发送或接收操作</span><span class="sxs-lookup"><span data-stu-id="5257d-214">SAP Authorization for Using Send or Receive Operations</span></span>  
 <span data-ttu-id="5257d-215">当你使用**发送**或**接收**操作发送或接收到的 Idoc 使用强类型的架构，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]内部调用 IDOCTYPE_READ_COMPLETE RFC 若要检索的元数据IDOC。</span><span class="sxs-lookup"><span data-stu-id="5257d-215">When you use the **Send** or **Receive** operations to send or receive IDOCs using a strongly-typed schema, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] internally invokes the IDOCTYPE_READ_COMPLETE RFC to retrieve the metadata for the IDOC.</span></span> <span data-ttu-id="5257d-216">调用此 RFC 需要在 SAP 中的以下授权：</span><span class="sxs-lookup"><span data-stu-id="5257d-216">Invoking this RFC requires the following authorization in SAP:</span></span>  
  
```  
Authorisation object S_IDOCDEFT, Fields:  
EDI_TCD, value 'WE30'  
ACTVT, value - 03 (display)  
EDI_DOC, value  *  
EDI_CIM, value *  
```  
  
 <span data-ttu-id="5257d-217">可以使用在 SAP 中 SU01 事务可以添加的授权对象。</span><span class="sxs-lookup"><span data-stu-id="5257d-217">You can use the SU01 transaction in SAP to add an authorization object.</span></span> <span data-ttu-id="5257d-218">有关事务的详细信息，请与您的 SAP 管理员，或请参阅 SAP 文档。</span><span class="sxs-lookup"><span data-stu-id="5257d-218">For more information about the transaction, contact your SAP administrator or refer to SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5257d-219">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5257d-219">See Also</span></span>  
 <span data-ttu-id="5257d-220">[哪些操作可以是执行使用适配器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="5257d-220">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>