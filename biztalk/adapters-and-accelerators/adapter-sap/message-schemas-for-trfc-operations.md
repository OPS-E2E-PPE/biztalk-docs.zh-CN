---
title: TRFC 操作的消息架构 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- tRFC operations, message structure for
- tRFC operations, message schemas for
- tRFC operations, message actions for
ms.assetid: 0e269555-f0a1-40ae-a1b5-d8c4981e730f
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2a25413854b35a7bd27b3621a9c8ddfff31f083a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36999774"
---
# <a name="message-schemas-for-trfc-operations"></a><span data-ttu-id="698d6-102">TRFC 操作的消息架构</span><span class="sxs-lookup"><span data-stu-id="698d6-102">Message Schemas for tRFC Operations</span></span>
<span data-ttu-id="698d6-103">Transactiostructnal 远程函数调用 (Trfc) 用于在工作 (LUW) 的逻辑单元中执行 RFC 调用。</span><span class="sxs-lookup"><span data-stu-id="698d6-103">Transactiostructnal Remote Function Calls (tRFCs) are used to execute RFC calls in a logical unit of work (LUW).</span></span> <span data-ttu-id="698d6-104">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持多个 Trfc 每 LUW 的入站的 tRFC 调用。</span><span class="sxs-lookup"><span data-stu-id="698d6-104">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports multiple tRFCs per LUW for inbound tRFC calls.</span></span> <span data-ttu-id="698d6-105">对于出站 （客户端） tRFC 调用，该适配器可以支持单个一个 tRFC 中 LUW;它因此为 LUW 上创建 SAP 为每个客户端 tRFC 调用。</span><span class="sxs-lookup"><span data-stu-id="698d6-105">For outbound (client) tRFC calls, the adapter can support only a single tRFC in an LUW; it therefore for creates an LUW on SAP for each client tRFC call.</span></span> <span data-ttu-id="698d6-106">详细了解如何[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持 tRFC 操作，请参阅[Trfc 在 SAP 中的操作](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md)。</span><span class="sxs-lookup"><span data-stu-id="698d6-106">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports tRFC operations, see [Operations on tRFCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-trfcs-in-sap.md).</span></span> <span data-ttu-id="698d6-107">本部分介绍的消息架构和 tRFC 操作的操作。</span><span class="sxs-lookup"><span data-stu-id="698d6-107">This section describes the message schemas and actions for tRFC operations.</span></span>  

## <a name="message-structure-for-trfc-operations"></a><span data-ttu-id="698d6-108">TRFC 操作的消息结构</span><span class="sxs-lookup"><span data-stu-id="698d6-108">Message Structure for tRFC Operations</span></span>  
 <span data-ttu-id="698d6-109">每个 tRFC 操作包含请求消息和答复 （响应） 消息。</span><span class="sxs-lookup"><span data-stu-id="698d6-109">Each tRFC operation consists of a request message and a reply (response) message.</span></span> <span data-ttu-id="698d6-110">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将 GUID 与 SAP 系统事务 ID (TID)，用于标识 LUW 上的 SAP 系统相关联。</span><span class="sxs-lookup"><span data-stu-id="698d6-110">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] associates a GUID with the SAP system transaction ID (TID) that identifies the LUW on the SAP system.</span></span> <span data-ttu-id="698d6-111">此 GUID 可出现在这两个 tRFC 请求和响应中的消息\<TransactionalRfcOperationIdentifier\>元素。</span><span class="sxs-lookup"><span data-stu-id="698d6-111">This GUID can be present in both the tRFC request and response messages in the \<TransactionalRfcOperationIdentifier\> element.</span></span>  

-   <span data-ttu-id="698d6-112">对于出站 tRFC 调用，可以将 GUID 传递到 tRFC 请求消息中的适配器。</span><span class="sxs-lookup"><span data-stu-id="698d6-112">For outbound tRFC calls, you can pass a GUID to the adapter in the tRFC request message.</span></span> <span data-ttu-id="698d6-113">如果未提供一个 GUID，适配器将生成一个用于您。</span><span class="sxs-lookup"><span data-stu-id="698d6-113">If you do not supply a GUID, the adapter generates one for you.</span></span> <span data-ttu-id="698d6-114">适配器始终 tRFC 响应消息中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-114">The adapter always returns the GUID in the tRFC response message.</span></span> <span data-ttu-id="698d6-115">若要确认 SAP 系统上的 TID RfcConfirmTransID 操作中传递此 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-115">You pass this GUID in the RfcConfirmTransID operation to confirm the TID on the SAP system.</span></span>  

-   <span data-ttu-id="698d6-116">对于入站的 tRFC 调用，适配器将传递一个 GUID，它具有生成的映射到 SAP TID tRFC 请求消息中。</span><span class="sxs-lookup"><span data-stu-id="698d6-116">For inbound tRFC calls, the adapter passes a GUID that it has generated and mapped to the SAP TID in the tRFC request message.</span></span> <span data-ttu-id="698d6-117">响应消息中，可以选择性地返回此 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-117">You can optionally return this GUID in the response message.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="698d6-118">在某些情况下，例如若要排查问题上的 SAP 系统，可能需要 SAP TID 标识 tRFC SAP 系统上的实际值。</span><span class="sxs-lookup"><span data-stu-id="698d6-118">In some scenarios, for example to troubleshoot an issue on the SAP system, you may need the actual value of the SAP TID that identifies the tRFC on the SAP system.</span></span> <span data-ttu-id="698d6-119">可以获取的值通过调用与 GUID 关联的 SAP TID **ConvertGuidToTid**方法。</span><span class="sxs-lookup"><span data-stu-id="698d6-119">You can get the value of the SAP TID that is associated with a GUID by calling the **ConvertGuidToTid** method.</span></span> <span data-ttu-id="698d6-120">有关详细信息**ConvertGuidToTid**，请参阅[特殊操作](../../adapters-and-accelerators/adapter-sap/special-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="698d6-120">For more information about **ConvertGuidToTid**, see [Special Operations](../../adapters-and-accelerators/adapter-sap/special-operations.md).</span></span>  

 <span data-ttu-id="698d6-121">下表显示了使用 tRFC 操作和 RfcConfirmTransID 操作的消息架构。</span><span class="sxs-lookup"><span data-stu-id="698d6-121">The following table shows the message schemas used for tRFC operations and for the RfcConfirmTransID operation.</span></span> <span data-ttu-id="698d6-122">RfcConfirmTransID 操作显示的适配器，以便你可以确认在客户端 tRFC 调用 SAP TID。</span><span class="sxs-lookup"><span data-stu-id="698d6-122">The RfcConfirmTransID operation is surfaced by the adapter so that you can confirm the SAP TID in client tRFC calls.</span></span>  


|                             <span data-ttu-id="698d6-123">运算</span><span class="sxs-lookup"><span data-stu-id="698d6-123">Operation</span></span>                             |                                                                                                                                                                                                                                                                         <span data-ttu-id="698d6-124">XML 结构</span><span class="sxs-lookup"><span data-stu-id="698d6-124">XML Structure</span></span>                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="698d6-125">Description</span><span class="sxs-lookup"><span data-stu-id="698d6-125">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
|-------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                   <span data-ttu-id="698d6-126">tRFC</span><span class="sxs-lookup"><span data-stu-id="698d6-126">tRFC</span></span><br /><br /> <span data-ttu-id="698d6-127">([RFC_NAME])</span><span class="sxs-lookup"><span data-stu-id="698d6-127">([RFC_NAME])</span></span>                   | `<[RFC_NAME] xmlns="[VERSION]/Trfc/">   <IN1_PARAM_NAME>v1</IN1_PARAM_NAME>   <IN2_PARAM_NAME>v2</IN2_PARAM_NAME>   …   <INOUT1_PARAM_NAME>v3</INOUT1_PARAM_NAME>   <INOUT2_PARAM_NAME>v4</INOUT2_PARAM_NAME>   …   <TABLE1_PARAM_NAME xmlns="[VERSION]/Types/Trfc/">     <STRUCT1_PARAM_NAME>       <[FIELD1_NAME]>value1</[FIELD1_NAME]>       <[FIELD2_NAME]>value2</[FIELD2_NAME]>       …     </STRUCT1_PARAM_NAME>     …   </TABLE1_PARAM_NAME>   …   <TransactionalRfcOperationIdentifier>GUID   </TransactionalRfcOperationIdentifier> </[RFC_NAME]>` | <span data-ttu-id="698d6-128">调用 tRFC SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="698d6-128">Invokes a tRFC on the SAP system.</span></span><br /><br /> <span data-ttu-id="698d6-129">-导入，更改，并支持表参数。</span><span class="sxs-lookup"><span data-stu-id="698d6-129">- Import, changing, and table parameters are supported.</span></span><br /><br /> <span data-ttu-id="698d6-130">-导入并更改参数可以为 SAP 结构类型、 SAP 表类型或 SAP 简单数据类型。</span><span class="sxs-lookup"><span data-stu-id="698d6-130">- Import and changing parameters can be of SAP STRUCTURE TYPES, SAP TABLE TYPES or SAP simple data types.</span></span><br /><br /> <span data-ttu-id="698d6-131">-tRFC 客户端调用没有在输出端中返回的值。</span><span class="sxs-lookup"><span data-stu-id="698d6-131">- tRFC client calls do not have values returned in the output side.</span></span> <span data-ttu-id="698d6-132">SAP 以异步方式执行这些与仅端输入的值。</span><span class="sxs-lookup"><span data-stu-id="698d6-132">SAP asynchronously executes them with only input-side values.</span></span><br /><br /> <span data-ttu-id="698d6-133">\<TransactionalRfcOperationIdentifier\>元素：</span><span class="sxs-lookup"><span data-stu-id="698d6-133">The \<TransactionalRfcOperationIdentifier\> element:</span></span><br /><br /> <span data-ttu-id="698d6-134">-对于出站 tRFC 调用，可以选择指定一个 GUID，应通过此元素中的适配器映射到 SAP TID。</span><span class="sxs-lookup"><span data-stu-id="698d6-134">- For outbound tRFC calls, you can optionally specify a GUID that should be mapped to the SAP TID by the adapter in this element.</span></span> <span data-ttu-id="698d6-135">如果未指定一个 GUID，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]生成一个密钥并将其映射到 tRFC SAP TID。</span><span class="sxs-lookup"><span data-stu-id="698d6-135">If a GUID is not specified, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] generates one and maps it to the SAP TID for the tRFC.</span></span><br /><br /> <span data-ttu-id="698d6-136">-对于入站的 tRFC 调用适配器通过映射到 SAP TID 此元素中的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-136">- For inbound tRFC calls, the adapter passes the GUID that is mapped to the SAP TID in this element.</span></span> |
|          <span data-ttu-id="698d6-137">tRFC 响应</span><span class="sxs-lookup"><span data-stu-id="698d6-137">tRFC Response</span></span><br /><br /> <span data-ttu-id="698d6-138">（[RFC_NAME] 响应）</span><span class="sxs-lookup"><span data-stu-id="698d6-138">([RFC_NAME]Response)</span></span>           |                                                                                                                                                                                                   `<[RFC_NAME]Response xmlns="[VERSION]/Trfc/">   <TransactionalRfcOperationIdentifier>GUID   </TransactionalRfcOperationIdentifier> </[RFC_NAME]Response>`                                                                                                                                                                                                   |                                                                                                                                                                   <span data-ttu-id="698d6-139">指示 RFC，已发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="698d6-139">Indicates that the RFC has been sent to the SAP system.</span></span><br /><br /> <span data-ttu-id="698d6-140">-tRFC 客户端调用没有在输出端中返回的值。</span><span class="sxs-lookup"><span data-stu-id="698d6-140">- tRFC client calls do not have values returned in the output side.</span></span> <span data-ttu-id="698d6-141">SAP 以异步方式执行这些与仅端输入的值。</span><span class="sxs-lookup"><span data-stu-id="698d6-141">SAP asynchronously executes them with only input-side values.</span></span><br /><br /> <span data-ttu-id="698d6-142">\<TransactionalRfcOperationIdentifier\>元素：</span><span class="sxs-lookup"><span data-stu-id="698d6-142">The \<TransactionalRfcOperationIdentifier\> element:</span></span><br /><br /> <span data-ttu-id="698d6-143">-对于出站 tRFC 调用适配器发送此元素中 tRFC SAP TID 与关联的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-143">- For outbound tRFC calls, the adapter sends the GUID associated with the SAP TID for the tRFC in this element.</span></span><br /><br /> <span data-ttu-id="698d6-144">-对于入站的 tRFC 调用可以选择性地返回了适配器发送的请求消息中的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-144">- For inbound tRFC calls you can optionally return the GUID that was sent by the adapter in the request message.</span></span>                                                                                                                                                                    |
|         <span data-ttu-id="698d6-145">RfcConfirmTransID</span><span class="sxs-lookup"><span data-stu-id="698d6-145">RfcConfirmTransID</span></span><br /><br /> <span data-ttu-id="698d6-146">(RfcConfirmTransID)</span><span class="sxs-lookup"><span data-stu-id="698d6-146">(RfcConfirmTransID)</span></span>         |                                                                                                                                                                                                    `<RfcConfirmTransID xmlns="[VERSION]/Trfc/">   <TransactionalRfcOperationIdentifier>GUID   </TransactionalRfcOperationIdentifier> </RfcConfirmTransID>`                                                                                                                                                                                                    |                                                                                                                                                             <span data-ttu-id="698d6-147">RfcConfirmTransID 操作确认 TID SAP 系统上的出站 tRFC 操作中使用。</span><span class="sxs-lookup"><span data-stu-id="698d6-147">The RfcConfirmTransID operation confirms the TID used in an outbound tRFC operation on the SAP system.</span></span><br /><br /> <span data-ttu-id="698d6-148">\<TransactionalRfcOperationIdentifier\>元素包含映射到 TID 与出站 tRFC 调用关联的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-148">The \<TransactionalRfcOperationIdentifier\> element contains the GUID that is mapped to the TID associated with the outbound tRFC call.</span></span> <span data-ttu-id="698d6-149">您应设置为值 tRFC 响应消息中的适配器返回的 guid。</span><span class="sxs-lookup"><span data-stu-id="698d6-149">You should set this to the value of the GUID that was returned by the adapter in the tRFC response message.</span></span><br /><br /> <span data-ttu-id="698d6-150">有关 RfcConfirmTransID 操作的详细信息，请参阅[特殊操作](../../adapters-and-accelerators/adapter-sap/special-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="698d6-150">For more information about the RfcConfirmTransID operation, see [Special Operations](../../adapters-and-accelerators/adapter-sap/special-operations.md).</span></span>                                                                                                                                                              |
| <span data-ttu-id="698d6-151">RfcConfirmTransIDResponse</span><span class="sxs-lookup"><span data-stu-id="698d6-151">RfcConfirmTransIDResponse</span></span><br /><br /> <span data-ttu-id="698d6-152">(RfcConfirmTransIDResponse)</span><span class="sxs-lookup"><span data-stu-id="698d6-152">(RfcConfirmTransIDResponse)</span></span> |                                                                                                                                                                                                                                      `<RfcConfirmTransIDResponse xmlns="[VERSION]/Trfc/"> </RfcConfirmTransIDResponse>`                                                                                                                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="698d6-153">指示[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]已经确认 TID SAP 系统上的。</span><span class="sxs-lookup"><span data-stu-id="698d6-153">Indicates that the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] has confirmed the TID on the SAP system.</span></span>                                                                                                                                                                                                                                                                                                                                                                    |

 <span data-ttu-id="698d6-154">[VERSION] = 消息版本字符串;例如， http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="698d6-154">[VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  

 <span data-ttu-id="698d6-155">[RFC_NAME] = RFC; 的名称例如，RFC_CUSTOMER_GET。</span><span class="sxs-lookup"><span data-stu-id="698d6-155">[RFC_NAME] = Name of the RFC; for example, RFC_CUSTOMER_GET.</span></span>  

 <span data-ttu-id="698d6-156">[IN_PARAM_NAME] = RFC 导入参数的名称。</span><span class="sxs-lookup"><span data-stu-id="698d6-156">[IN_PARAM_NAME] = The name of the RFC Import parameter.</span></span>  

 <span data-ttu-id="698d6-157">[INOUT_PARAM_NAME] = RFC 更改参数的名称。</span><span class="sxs-lookup"><span data-stu-id="698d6-157">[INOUT_PARAM_NAME] = The name of an RFC Changing parameter.</span></span>  

 <span data-ttu-id="698d6-158">[TABLE_PARAM_NAME] = RFC 表参数的名称。</span><span class="sxs-lookup"><span data-stu-id="698d6-158">[TABLE_PARAM_NAME] = The name of an RFC Table parameter.</span></span>  

 <span data-ttu-id="698d6-159">[STRUCT_PARAM_NAME] = RFC 结构参数的名称。</span><span class="sxs-lookup"><span data-stu-id="698d6-159">[STRUCT_PARAM_NAME] = The name of an RFC Structure parameter.</span></span>  

 <span data-ttu-id="698d6-160">GUID = 标识 SAP TID tRFC 与关联的 GUID。</span><span class="sxs-lookup"><span data-stu-id="698d6-160">GUID = A GUID that identifies the SAP TID associated with the tRFC.</span></span>  

## <a name="message-actions-for-trfc-operations"></a><span data-ttu-id="698d6-161">TRFC 操作的消息操作</span><span class="sxs-lookup"><span data-stu-id="698d6-161">Message Actions for tRFC Operations</span></span>  
 <span data-ttu-id="698d6-162">下表显示了用于 tRFC 操作的消息操作。</span><span class="sxs-lookup"><span data-stu-id="698d6-162">The following table shows the message actions that are used for tRFC operations.</span></span>  


|         <span data-ttu-id="698d6-163">运算</span><span class="sxs-lookup"><span data-stu-id="698d6-163">Operation</span></span>          |              <span data-ttu-id="698d6-164">消息操作</span><span class="sxs-lookup"><span data-stu-id="698d6-164">Message Action</span></span>              |                                 <span data-ttu-id="698d6-165">示例</span><span class="sxs-lookup"><span data-stu-id="698d6-165">Example</span></span>                                  |
|----------------------------|------------------------------------------|--------------------------------------------------------------------------|
|         <span data-ttu-id="698d6-166">[RFC_NAME]</span><span class="sxs-lookup"><span data-stu-id="698d6-166">[RFC_NAME]</span></span>         |        <span data-ttu-id="698d6-167">[VERSION] /Trfc/ [RFC_NAME]</span><span class="sxs-lookup"><span data-stu-id="698d6-167">[VERSION]/Trfc/[RFC_NAME]</span></span>         |      http://Microsoft.LobServices.Sap/2007/03/Trfc/RFC_CUSTOMER_GET      |
|    <span data-ttu-id="698d6-168">[RFC_NAME]响应</span><span class="sxs-lookup"><span data-stu-id="698d6-168">[RFC_NAME] Response</span></span>     |    <span data-ttu-id="698d6-169">[VERSION] /Trfc/ [RFC_NAME] / 响应</span><span class="sxs-lookup"><span data-stu-id="698d6-169">[VERSION]/Trfc/[RFC_NAME]/response</span></span>    | http://Microsoft.LobServices.Sap/2007/03/Trfc/RFC_CUSTOMER_GET/response  |
|     <span data-ttu-id="698d6-170">RfcConfirmTransID</span><span class="sxs-lookup"><span data-stu-id="698d6-170">RfcConfirmTransID</span></span>      |     <span data-ttu-id="698d6-171">[VERSION] / Trfc/RfcConfirmTransID</span><span class="sxs-lookup"><span data-stu-id="698d6-171">[VERSION]/Trfc/RfcConfirmTransID</span></span>     |     http://Microsoft.LobServices.Sap/2007/03/Trfc/RfcConfirmTransID      |
| <span data-ttu-id="698d6-172">RfcConfirmTransID 响应</span><span class="sxs-lookup"><span data-stu-id="698d6-172">RfcConfirmTransID Response</span></span> | <span data-ttu-id="698d6-173">[版本/Trfc/RfcConfirmTransID/响应</span><span class="sxs-lookup"><span data-stu-id="698d6-173">[VERSION/Trfc/RfcConfirmTransID/response</span></span> | http://Microsoft.LobServices.Sap/2007/03/Trfc/RfcConfirmTransID/response |

 <span data-ttu-id="698d6-174">[VERSION] = 消息版本字符串;例如， http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="698d6-174">[VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  

 <span data-ttu-id="698d6-175">[RFC_NAME] = RFC 调用; 的名称例如，RFC_CUSTOMER_GET。</span><span class="sxs-lookup"><span data-stu-id="698d6-175">[RFC_NAME] = The name of the RFC to be invoked; for example, RFC_CUSTOMER_GET.</span></span>  

## <a name="see-also"></a><span data-ttu-id="698d6-176">请参阅</span><span class="sxs-lookup"><span data-stu-id="698d6-176">See Also</span></span>  
 [<span data-ttu-id="698d6-177">消息和消息架构用于 mySAP Business Suite 的 BizTalk 适配器</span><span class="sxs-lookup"><span data-stu-id="698d6-177">Messages and Message Schemas for BizTalk Adapter for mySAP Business Suite</span></span>](../../adapters-and-accelerators/adapter-sap/messages-and-message-schemas-for-biztalk-adapter-for-mysap-business-suite.md)