---
title: SAP 适配器与 BizTalk Server 的安全 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- credentials, protecting
- Enterprise Single Sign-On
- security, when using BizTalk Server
- security, protecting credentials
- SSO
ms.assetid: 702cd0f9-d8e1-4dad-8774-b552481d5390
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4689424deced097d901464263d75e5ae10e4b99f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
ms.locfileid: "22217773"
---
# <a name="security-with-the-sap-adapter-and-biztalk-server"></a><span data-ttu-id="87b80-102">SAP 适配器与 BizTalk Server 的安全</span><span class="sxs-lookup"><span data-stu-id="87b80-102">Security with the SAP adapter and BizTalk Server</span></span>
<span data-ttu-id="87b80-103">配置发送端口或接收端口 （位置） 时使用 BizTalk Server 管理控制台或使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]若要检索 BizTalk 解决方案的消息架构，必须提供凭据的 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="87b80-103">When you configure a send port or a receive port (location) by using the BizTalk Server Administration console or use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] to retrieve message schemas for a BizTalk solution, you must provide credentials for the SAP system.</span></span> <span data-ttu-id="87b80-104">请务必在一个安全的方法，可帮助防止它们被暴露给潜在的恶意 actors 中提供这些凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-104">It is important to supply these credentials in a secure way to help prevent them from being revealed to potentially malicious actors.</span></span> <span data-ttu-id="87b80-105">本主题讨论如何最安全地提供的凭据[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]BizTalk Server 解决方案。</span><span class="sxs-lookup"><span data-stu-id="87b80-105">This topic discusses how to most securely supply credentials for the [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] for BizTalk Server solutions.</span></span>  
  
 <span data-ttu-id="87b80-106">BizTalk 解决方案的上下文中的安全的更多常规讨论是广泛的主题，以及不在本文档的范围。</span><span class="sxs-lookup"><span data-stu-id="87b80-106">A more general discussion of security in the context of BizTalk solutions is an expansive topic and is beyond the scope of this documentation.</span></span> <span data-ttu-id="87b80-107">有关如何使 BizTalk 解决方案更安全的信息，请参阅[安全和保护 BizTalk 消息](../../core/secure-and-protect-your-biztalk-messages.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-107">For information about how you can make your BizTalk solutions more secure, see the [Secure and protect your BizTalk messages](../../core/secure-and-protect-your-biztalk-messages.md).</span></span>  
  
## <a name="how-do-i-protect-credentials-when-i-use-the-consume-adapter-service-biztalk-project-add-in"></a><span data-ttu-id="87b80-108">当我使用时如何保护凭据使用适配器服务 BizTalk Project 外接程序？</span><span class="sxs-lookup"><span data-stu-id="87b80-108">How Do I Protect Credentials When I Use the Consume Adapter Service BizTalk Project Add-in?</span></span>  
 <span data-ttu-id="87b80-109">当你使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]要检索 BizTalk 解决方案的消息架构，您必须提供用户名和密码 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="87b80-109">When you use the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] to retrieve message schemas for a BizTalk solution, you must supply a user name and password for the SAP system.</span></span> <span data-ttu-id="87b80-110">你应当只做这从**安全**选项卡上**配置适配器**对话框。</span><span class="sxs-lookup"><span data-stu-id="87b80-110">You should only do this from the **Security** tab on the **Configure Adapter** dialog box.</span></span> <span data-ttu-id="87b80-111">这可确保你的凭据将不显示在**Uri**字段[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]对话框中，有权访问您的计算机屏幕的任何人都可以读取。</span><span class="sxs-lookup"><span data-stu-id="87b80-111">This ensures that your credentials will not be displayed in the **Uri** field of the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] dialog box, where anyone with access to your computer screen can read them.</span></span> <span data-ttu-id="87b80-112">有关如何通过使用来检索消息架构的详细信息[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，包括如何的 SAP 系统输入用户名和密码，请参阅[获取 Visual Studio 中的 SAP 操作的元数据](../../adapters-and-accelerators/adapter-sap/get-metadata-for-sap-operations-in-visual-studio.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-112">For more information about how to retrieve message schemas by using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], including how to enter a user name and password for the SAP system, see [Get Metadata for SAP Operations in Visual Studio](../../adapters-and-accelerators/adapter-sap/get-metadata-for-sap-operations-in-visual-studio.md).</span></span>  
  
## <a name="how-do-i-protect-credentials-when-i-configure-a-send-port-or-a-receive-location"></a><span data-ttu-id="87b80-113">如何保护凭据时配置发送端口或接收位置？</span><span class="sxs-lookup"><span data-stu-id="87b80-113">How Do I Protect Credentials When I Configure a Send Port or a Receive Location?</span></span>  
 <span data-ttu-id="87b80-114">BizTalk 解决方案使用 Microsoft BizTalk WCF 自定义适配器来使用 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="87b80-114">BizTalk solutions use the Microsoft BizTalk WCF-Custom adapter to consume WCF services.</span></span> <span data-ttu-id="87b80-115">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]是使客户端可以使用 SAP 系统，就像它是 WCF 服务的 WCF 自定义绑定。</span><span class="sxs-lookup"><span data-stu-id="87b80-115">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] is a WCF custom binding that enables clients to consume the SAP system as if it were a WCF service.</span></span> <span data-ttu-id="87b80-116">BizTalk 解决方案使用[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]通过发送端口和接收配置为使用 WCF 自定义适配器，这反过来，，配置为使用的位置[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]用作其传输方式。</span><span class="sxs-lookup"><span data-stu-id="87b80-116">BizTalk solutions consume the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] through send ports and receive locations that are configured to use the WCF-Custom adapter, which is, in turn, configured to use the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as its transport.</span></span> <span data-ttu-id="87b80-117">有关如何配置发送端口和接收的端口 （接收位置），包括如何配置 WCF 自定义适配器的详细信息，请参阅[手动配置到 SAP 适配器的物理端口绑定](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-117">For more information about how to configure send ports and receive ports (receive locations), including how to configure the WCF-Custom adapter, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>  
  
 <span data-ttu-id="87b80-118">配置中的 SAP 系统凭据**凭据**选项卡**WCF 自定义传输属性**对话框发送端口或从**其他**选项卡**WCF 自定义传输属性**对话框接收位置。</span><span class="sxs-lookup"><span data-stu-id="87b80-118">You configure the SAP system credentials from the **Credentials** tab of the **WCF-Custom Transport Properties** dialog box for send ports or from the **Other** tab of the **WCF-Custom Transport Properties** dialog box for receive locations.</span></span> <span data-ttu-id="87b80-119">由于 WCF 自定义适配器支持企业单一登录 (SSO)，你可以选择这些选项卡中的任何一个提供用户名和密码或 SSO 关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="87b80-119">Because the WCF-Custom adapter supports Enterprise Single Sign-On (SSO), you can choose to provide either a user name and password or an SSO affiliate application on either of these tabs.</span></span> <span data-ttu-id="87b80-120">以下主题讨论这两个选项。</span><span class="sxs-lookup"><span data-stu-id="87b80-120">The following topics discuss both options.</span></span>  
  
### <a name="user-name-password-credentials"></a><span data-ttu-id="87b80-121">用户名密码凭据</span><span class="sxs-lookup"><span data-stu-id="87b80-121">User Name Password Credentials</span></span>  
 <span data-ttu-id="87b80-122">你应仅提供用户名和密码从**凭据**选项卡 （对于发送端口） 或**其他**选项卡 （用于接收位置） 中**WCF 自定义传输属性**对话框。</span><span class="sxs-lookup"><span data-stu-id="87b80-122">You should only supply a user name and password from the **Credentials** tab (for send ports) or the **Other** tab (for receive locations) in the **WCF-Custom Transport Properties** dialog box.</span></span> <span data-ttu-id="87b80-123">这可确保以下项：</span><span class="sxs-lookup"><span data-stu-id="87b80-123">This ensures the following:</span></span>  
  
-   <span data-ttu-id="87b80-124">你的凭据将不会显示在**Uri**对话框中的字段。</span><span class="sxs-lookup"><span data-stu-id="87b80-124">Your credentials will not be displayed in the **Uri** field of the dialog box.</span></span> <span data-ttu-id="87b80-125">这可以阻止有权访问你的屏幕 （或具有权限，使他们能够查看发送端口或接收位置属性） 的那些看到你的凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-125">This prevents those who have access to your screen (or who have permissions that enable them to view the send port or receive location properties) from seeing your credentials.</span></span>  
  
-   <span data-ttu-id="87b80-126">如果导出发送端口或接收端口绑定，你的密码将不写入到绑定文件中。</span><span class="sxs-lookup"><span data-stu-id="87b80-126">Your password will not be written to the binding file if you export the send port or receive port binding.</span></span> <span data-ttu-id="87b80-127">这将禁止所有人具有访问权限到文件中查看你的密码。</span><span class="sxs-lookup"><span data-stu-id="87b80-127">This prevents anyone from with access to the file from viewing your password.</span></span>  
  
### <a name="enterprise-single-sign-on-and-sso-affiliate-applications"></a><span data-ttu-id="87b80-128">企业单一登录和 SSO Affiliate 应用程序</span><span class="sxs-lookup"><span data-stu-id="87b80-128">Enterprise Single Sign-On and SSO Affiliate Applications</span></span>  
 <span data-ttu-id="87b80-129">你可以配置 WCF 自定义适配器以使用 SSO 以获取有关 SAP 系统的凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-129">You can configure the WCF-Custom adapter to use SSO to get the credentials for the SAP system.</span></span> <span data-ttu-id="87b80-130">SSO 使用数据库和主密钥进行加密和存储用户凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-130">SSO uses a database and a master secret to encrypt and store user credentials.</span></span> <span data-ttu-id="87b80-131">它还提供服务，以 Microsoft Windows 帐户映射到用于访问后端系统的辅助凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-131">It also provides services to map Microsoft Windows accounts to secondary credentials that are used to access a backend system.</span></span> <span data-ttu-id="87b80-132">通过使用 SSO，你可以映射到的用户名和密码 SAP 系统上的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="87b80-132">By using SSO, you can map a Windows account to a user name and password on the SAP system.</span></span>  
  
 <span data-ttu-id="87b80-133">SSO 使用*affiliate 应用程序*和*SSO 映射*映射到后端系统的凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-133">SSO uses *affiliate applications* and *SSO mappings* to map credentials to the backend system.</span></span> <span data-ttu-id="87b80-134">关联应用程序是指系统或需要辅助凭据的应用程序的 sso 的逻辑实体。</span><span class="sxs-lookup"><span data-stu-id="87b80-134">An affiliate application is a logical entity in SSO that refers to a system or an application that requires secondary credentials.</span></span> <span data-ttu-id="87b80-135">SSO 映射是与关联应用程序相关联。</span><span class="sxs-lookup"><span data-stu-id="87b80-135">An SSO mapping is associated with an affiliate application.</span></span> <span data-ttu-id="87b80-136">它映射到该帐户用于访问关联系统或应用程序的辅助凭据的 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="87b80-136">It maps a Windows account to the secondary credentials used by that account to access the affiliate system or application.</span></span> <span data-ttu-id="87b80-137">SSO 映射可以与 Windows 用户帐户或与组相关联。</span><span class="sxs-lookup"><span data-stu-id="87b80-137">An SSO mapping can be associated with a Windows user account or with a group.</span></span>  
  
 <span data-ttu-id="87b80-138">若要使用具有 SSO [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]，你必须执行以下操作。</span><span class="sxs-lookup"><span data-stu-id="87b80-138">To use SSO with the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)], you must do the following.</span></span>  
  
1.  <span data-ttu-id="87b80-139">在 SSO 来保留名称为 SAP 系统的密码凭据的用户中创建关联应用程序。</span><span class="sxs-lookup"><span data-stu-id="87b80-139">Create an affiliate application in SSO to hold the user name password credentials for the SAP system.</span></span> <span data-ttu-id="87b80-140">通常由拥有 SSO 管理权限的特殊类型执行此步骤。</span><span class="sxs-lookup"><span data-stu-id="87b80-140">This step is often performed by someone with special types of SSO administrative privileges.</span></span>  
  
2.  <span data-ttu-id="87b80-141">创建一个用户或组映射将您的 Windows 帐户映射到的用户的关联应用程序和用于建立与 SAP 系统的连接的密码。</span><span class="sxs-lookup"><span data-stu-id="87b80-141">Create a user or group mapping for the affiliate application that maps your Windows account to the user name and password that are used to establish a connection with the SAP system.</span></span> <span data-ttu-id="87b80-142">具体取决于你的安装，用户可能能够执行此步骤，或它可能需要具有特殊类型的 SSO 管理权限的人员。</span><span class="sxs-lookup"><span data-stu-id="87b80-142">Depending on your installation, a user might be able to perform this step or it might require someone with special types of SSO administrative privileges.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="87b80-143">为 SSO 配置时，WCF 自定义适配器使用提供的 SSO 服务从 SSO 数据库中获取的 SAP 用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="87b80-143">When configured for SSO, the WCF-Custom adapter uses services provided by SSO to get the SAP user name and password from the SSO database.</span></span> <span data-ttu-id="87b80-144">它提供了这些 （未加密的） 到[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]，以便该适配器可以打开与 SAP 系统的连接。</span><span class="sxs-lookup"><span data-stu-id="87b80-144">It provides these (unencrypted) to the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)], so that the adapter can open a connection to the SAP system.</span></span> <span data-ttu-id="87b80-145">SSO 跨之间的连接提供任何加密或保护[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]和 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="87b80-145">SSO provides no encryption or protection across the connection between the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and the SAP system.</span></span>  
  
 <span data-ttu-id="87b80-146">有关如何使用 SSO，包括有关如何创建关联应用程序和 SSO 映射信息的信息请参阅[使用 SSO](../../core/using-sso.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-146">For information about how to use SSO, including information about how to create affiliate applications and SSO mappings, see [Using SSO](../../core/using-sso.md).</span></span> <span data-ttu-id="87b80-147">有关 SSO 的更多常规信息，请参阅[实现 Enterprise 上单一登录](../../core/implementing-enterprise-single-sign-on.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-147">For more general information about SSO, see [Implementing Enterprise Single Sign-On](../../core/implementing-enterprise-single-sign-on.md).</span></span>  
  
## <a name="the-acceptcredentialsinuri-binding-property"></a><span data-ttu-id="87b80-148">AcceptCredentialsInUri 绑定属性</span><span class="sxs-lookup"><span data-stu-id="87b80-148">The AcceptCredentialsInUri Binding Property</span></span>  
 <span data-ttu-id="87b80-149">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]曲面**AcceptCredentialsInUri**绑定属性。</span><span class="sxs-lookup"><span data-stu-id="87b80-149">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces the **AcceptCredentialsInUri** binding property.</span></span> <span data-ttu-id="87b80-150">此属性确定是否允许连接 URI 中使用 SAP 系统凭据。</span><span class="sxs-lookup"><span data-stu-id="87b80-150">This property determines whether SAP system credentials are permitted in the connection URI.</span></span> <span data-ttu-id="87b80-151">默认情况下， **AcceptCredentialsInUri**是**false**和[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]URI 中包括凭据时引发异常。</span><span class="sxs-lookup"><span data-stu-id="87b80-151">By default, **AcceptCredentialsInUri** is **false** and the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] throws an exception if credentials are included in the URI.</span></span>  
  
 <span data-ttu-id="87b80-152">此属性是因为存在某些编程方案中需要的凭据必须存在于连接 URI 显示中。</span><span class="sxs-lookup"><span data-stu-id="87b80-152">This property is surfaced because there are certain programming scenarios that require the credentials to be present in the connection URI.</span></span> <span data-ttu-id="87b80-153">这应永远不会是这种情况，在您配置发送端口或接收位置，或当你使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]检索消息架构从[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="87b80-153">This should never be the case when you are configuring a send port or a receive location, or when you are using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] to retrieve message schemas from the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="87b80-154">在这种情况下，建议你不要设置**AcceptCredentialsInUri**到**true**。</span><span class="sxs-lookup"><span data-stu-id="87b80-154">In such cases, it is recommended that you do not set **AcceptCredentialsInUri** to **true**.</span></span> <span data-ttu-id="87b80-155">有关详细信息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]绑定属性，请参阅[了解针对 ORacle E-business Suite 绑定属性的 BizTalk 适配器](../../adapters-and-accelerators/adapter-oracle-ebs/read-about-the-biztalk-adapter-for-oracle-e-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="87b80-155">For more information about the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] binding properties, see [Read about the BizTalk Adapter for ORacle E-Business Suite binding properties](../../adapters-and-accelerators/adapter-oracle-ebs/read-about-the-biztalk-adapter-for-oracle-e-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="87b80-156">**AcceptCredentialsInUri**绑定属性中不可用[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]中**绑定**选项卡上配置 WCF 自定义或 WCF SAP 时接收或发送端口。</span><span class="sxs-lookup"><span data-stu-id="87b80-156">The **AcceptCredentialsInUri** binding property is not available in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] in the **Binding** tab while configuring a WCF-Custom or WCF-SAP receive or send port.</span></span> <span data-ttu-id="87b80-157">若要设置的值**AcceptCredentialsInUri**绑定属性，则必须打开后已生成元数据中使用创建的适配器绑定文件 （XML 文件） [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，然后找到中的此绑定属性该文件。</span><span class="sxs-lookup"><span data-stu-id="87b80-157">To set the value of the **AcceptCredentialsInUri** binding property, you must open the adapter bindings file (XML file) that is created after you have generated metadata using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], and then locate this binding property in the file.</span></span> <span data-ttu-id="87b80-158">指定此绑定属性适当的值，保存该绑定文件，然后导入中的绑定文件[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="87b80-158">Specify an appropriate value for this binding property, save the binding file, and then import the binding file in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="87b80-159">请参阅[重用 SAP 适配器绑定](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md)有关的说明。</span><span class="sxs-lookup"><span data-stu-id="87b80-159">See [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md) for instructions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="87b80-160">另请参阅</span><span class="sxs-lookup"><span data-stu-id="87b80-160">See Also</span></span>  
[<span data-ttu-id="87b80-161">最佳做法来保护 SAP 适配器</span><span class="sxs-lookup"><span data-stu-id="87b80-161">Best practices to secure the SAP adapter</span></span>](../../adapters-and-accelerators/adapter-sap/best-practices-to-secure-the-sap-adapter.md)  
 [<span data-ttu-id="87b80-162">保护你的 SAP 应用程序</span><span class="sxs-lookup"><span data-stu-id="87b80-162">Secure your SAP applications</span></span>](../../adapters-and-accelerators/adapter-sap/secure-your-sap-applications.md)   