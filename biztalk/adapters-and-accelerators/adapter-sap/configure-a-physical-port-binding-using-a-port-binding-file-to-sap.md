---
title: 配置物理端口绑定使用的端口绑定文件与 SAP |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- port binding file
- physical port binding, configuring using a port binding file
ms.assetid: c637971c-3ecd-4026-8f74-bd5173774438
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 05d22dffdf99285c5def9843d2a9aa67a90b7175
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65373951"
---
# <a name="configure-a-physical-port-binding-using-a-port-binding-file-to-sap"></a><span data-ttu-id="4bdc5-102">配置使用到 SAP 的端口绑定文件的物理端口绑定</span><span class="sxs-lookup"><span data-stu-id="4bdc5-102">Configure a physical port binding using a port binding file to SAP</span></span>
<span data-ttu-id="4bdc5-103">当你使用[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]若要为 SAP 项目以外的架构文件，生成元数据[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]还会生成端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-103">When you use the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] to generate metadata for an SAP artifact, other than the schema files, the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also generates a port binding file.</span></span> <span data-ttu-id="4bdc5-104">您可以将此绑定文件导入 BizTalk 应用程序，以创建物理发送端口或接收端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-104">You can import this binding file into your BizTalk application to create a physical send or receive port.</span></span> <span data-ttu-id="4bdc5-105">[重复使用 SAP 适配器绑定](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md)包括导入绑定文件的步骤。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-105">[Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md) includes steps to import binding files.</span></span> <span data-ttu-id="4bdc5-106">如果此绑定文件导入，您无需手动创建物理发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-106">If you import this binding file, you do not have to manually create a physical send or receive port.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="4bdc5-107">同时使用[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]，如果未指定字符串类型的绑定属性的值，并且其默认值为 null，然后，绑定属性将不能在绑定文件中。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-107">While using the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)], if you do not specify a value for a binding property of type string and whose default value is null then that binding property will not be available in the binding file.</span></span> <span data-ttu-id="4bdc5-108">您必须手动添加的绑定属性和其值在绑定文件中，如果所需。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-108">You must manually add the binding property and its value in the binding file, if required.</span></span>  
  
 <span data-ttu-id="4bdc5-109">创建端口始终使用端口绑定文件创建双向发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-109">Creating a port using the port binding file always creates a two-way send or receive port.</span></span> <span data-ttu-id="4bdc5-110">如果你想要创建单向端口，则可以创建它手动使用在步骤[手动配置到 SAP 适配器的物理端口绑定](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-110">If you want to create one-way port, you can create it manually by using the steps at [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span> <span data-ttu-id="4bdc5-111">或者，可以按照本主题，以修改要创建单向端口的端口绑定文件中所述的解决方法。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-111">Or, you can follow the workarounds documented in this topic to modify the port binding file to create one-way ports.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="4bdc5-112">使用[!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)]不会创建使用可创建 WCF SAP 端口的端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-112">Using the [!INCLUDE[addadapterwiz](../../includes/addadapterwiz-md.md)] does not create a port binding file using which you can create a WCF-SAP port.</span></span> <span data-ttu-id="4bdc5-113">但是，无法对生成的端口绑定文件进行一些更改[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]并用它来创建 WCF SAP 端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-113">However, you could make some changes to the port binding file generated by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] and use it to create a WCF-SAP port.</span></span> <span data-ttu-id="4bdc5-114">有关详细信息，请参阅[端口绑定文件生成使用使用适配器服务外接程序使用 WCF SAP 端口配置](#BKMK_add_wcf_sap)。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-114">For more information, see [Configuring a WCF-SAP Port Using the Port Binding File Generated Using Consume Adapter Service Add-in](#BKMK_add_wcf_sap).</span></span>  
  
 <span data-ttu-id="4bdc5-115">以下是一些您必须了解与生成的绑定文件相关的关键点[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="4bdc5-115">Following are some key points that you must understand with respect to the binding file generated by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]:</span></span>  
  
-   <span data-ttu-id="4bdc5-116">创建文件时特定的命名约定。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-116">The files are created with a specific naming convention.</span></span> <span data-ttu-id="4bdc5-117">如果生成是将消息发送到 SAP 系统，为出站操作元数据文件的名称是 WcfSendPort_SAPBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-117">If you generated metadata for outbound operations, that is to send messages to the SAP system, the name of the file is WcfSendPort_SAPBinding_Custom.bindinginfo.xml.</span></span>  
  
     <span data-ttu-id="4bdc5-118">如果生成，若要从 SAP 系统接收消息的入站操作，元数据文件的名称是 WcfReceivePort_SAPBinding_Custom.bindinginfo.xml。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-118">If you generated metadata for inbound operations, that is to receive messages from the SAP system, the name of the file is WcfReceivePort_SAPBinding_Custom.bindinginfo.xml.</span></span>  
  
-   <span data-ttu-id="4bdc5-119">该文件包含有关绑定配置、 绑定类型、 终结点 URI，和基于为其生成元数据的操作的端口操作的信息。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-119">The file contains information about the binding configuration, the binding type, the endpoint URI, and the port action based on the operations for which metadata was generated.</span></span> <span data-ttu-id="4bdc5-120">导入该绑定文件来创建端口时，将自动在端口上设置配置物理端口所需的所有相关信息。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-120">When you import this binding file to create a port, all the relevant information required to configure a physical port is automatically set on the port.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="4bdc5-121">默认情况下，发送端口上的操作映射到为其生成元数据的操作名称。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-121">By default, the action on the send port is mapped to the operation name for which you generate metadata.</span></span> <span data-ttu-id="4bdc5-122">例如，如果 RFC_CUSTOMER_GET 生成元数据，则在端口上的操作设置为`<Operation Name="RFC_CUSTOMER_GET" Action="http://Microsoft.LobServices.Sap/2007/03/Rfc/RFC_CUSTOMER_GET " />`。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-122">For example, if you generate metadata for RFC_CUSTOMER_GET, the action on the port is set to `<Operation Name="RFC_CUSTOMER_GET" Action="http://Microsoft.LobServices.Sap/2007/03/Rfc/RFC_CUSTOMER_GET " />`.</span></span> <span data-ttu-id="4bdc5-123">但是，在 BizTalk 业务流程中创建的逻辑发送端口上的操作名称可能不能相同。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-123">However, the operation name on the logical send port you create in the BizTalk orchestration might not be the same.</span></span> <span data-ttu-id="4bdc5-124">您必须确保 （在 BizTalk 业务流程） 的逻辑端口 （在 BizTalk Server 管理控制台） 的物理发送端口中的操作名称都相同。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-124">You must ensure that the operation name in the logical port (in the BizTalk orchestration) and the physical send port (in BizTalk Server Administration console) are the same.</span></span> <span data-ttu-id="4bdc5-125">否则，会将消息发送到发送端口通过 SAP 系统时收到错误。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-125">If not, you will receive an error while sending messages to the SAP system through the send port.</span></span>  
  
-   <span data-ttu-id="4bdc5-126">只需提供要连接到 SAP 系统的端口的凭据。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-126">You only need to provide the credentials for the port to connect to the SAP system.</span></span> <span data-ttu-id="4bdc5-127">虽然该绑定文件确实保留与要连接的用户名，出于安全原因该绑定文件不包含密码。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-127">While the binding file does retain the username with which to connect, for security reasons the binding file does not contain the password.</span></span>  
  
## <a name="key-considerations-for-using-the-port-binding-file"></a><span data-ttu-id="4bdc5-128">使用端口绑定文件的重要注意事项</span><span class="sxs-lookup"><span data-stu-id="4bdc5-128">Key Considerations for Using the Port Binding File</span></span>  
  
-   <span data-ttu-id="4bdc5-129">导入绑定文件时，可能会收到通知绑定文件中的 BizTalk 应用程序名称与要向其导入绑定文件的应用程序名称不匹配对话框消息。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-129">When you import the binding file, you might get a dialog message informing that the BizTalk application name in the binding file does not match the application name to which you are importing the binding file.</span></span> <span data-ttu-id="4bdc5-130">可以安全地忽略此消息并继续。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-130">You can safely ignore this message and continue.</span></span>  
  
-   <span data-ttu-id="4bdc5-131">绑定文件还包含端口的名称和接收位置。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-131">The binding file also contains names of ports and receive locations.</span></span> <span data-ttu-id="4bdc5-132">如果要向其导入绑定文件的 BizTalk 应用程序创建一个端口或与同一个 BizTalk 应用程序中的现有端口具有相同名称的接收位置，将会出错。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-132">If the BizTalk application to which you are importing the binding file creates a port or a receive location that has the same name as an already existing port in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="4bdc5-133">您必须手动编辑绑定文件指定唯一名称的端口或接收位置。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-133">You must manually edit the bindings file to specify a unique name for the ports or receive locations.</span></span>  
  
-   <span data-ttu-id="4bdc5-134">绑定文件还包含有关连接 URI 的信息。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-134">The binding file also contains information about the connection URI.</span></span> <span data-ttu-id="4bdc5-135">如果绑定文件将创建具有相同的接收 URI 与同一个 BizTalk 应用程序中的现有接收位置的接收位置，将会出错。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-135">If the binding file creates a receive location that has the same receive URI as an already existing receive location in the same BizTalk application, you will get an error.</span></span> <span data-ttu-id="4bdc5-136">您必须手动编辑绑定文件以指定一个唯一的 URI。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-136">You must manually edit the binding file to specify a unique URI.</span></span>  
  
-   <span data-ttu-id="4bdc5-137">默认情况下，端口绑定文件将始终包含定义双向端口 （发送或接收）。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-137">By default, the port binding file always contains definitions for two-way ports (send or receive).</span></span> <span data-ttu-id="4bdc5-138">导入 BizTalk 应用程序中的此文件时，它创建双向发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-138">When you import this file in a BizTalk application, it creates a two-way send or receive port.</span></span> <span data-ttu-id="4bdc5-139">但是，你可能具有一个业务流程具有单向发送或接收端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-139">However, you may have an orchestration that has a one-way send or receive port.</span></span> <span data-ttu-id="4bdc5-140">因此，当您配置此类业务流程，并使用通过导入绑定文件创建的端口，端口不可用在列表中。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-140">So, when you configure such an orchestration and use the port created by importing the binding file, the port is not available in the list.</span></span> <span data-ttu-id="4bdc5-141">发生这种情况是因为业务流程的一部分创建的逻辑端口是单向端口，而在业务流程中创建的物理端口为双向端口。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-141">This happens because the logical port you created as part of the orchestration is a one-way port while the physical port created in the orchestration is a two-way port.</span></span> <span data-ttu-id="4bdc5-142">在这种情况下，可以编辑绑定文件以进行以下更改：</span><span class="sxs-lookup"><span data-stu-id="4bdc5-142">In such cases, you can edit the bindings file to make the following changes:</span></span>  
  
    |<span data-ttu-id="4bdc5-143">为此</span><span class="sxs-lookup"><span data-stu-id="4bdc5-143">For this</span></span>|<span data-ttu-id="4bdc5-144">操作</span><span class="sxs-lookup"><span data-stu-id="4bdc5-144">Do this</span></span>|  
    |--------------|-------------|  
    |<span data-ttu-id="4bdc5-145">若要编辑该端口的绑定文件，以配置一个单向发送端口</span><span class="sxs-lookup"><span data-stu-id="4bdc5-145">To edit the port bindings file to configure a one-way send port</span></span>|<span data-ttu-id="4bdc5-146">1.在以下摘录中，更改的值**IsTwoWay**属性设置为**false**。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-146">1.  In the following excerpt, change the value of **IsTwoWay** property to **false**.</span></span> <span data-ttu-id="4bdc5-147">最初，此值设置为 **，则返回 true**。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-147">Originally, this is set to **true**.</span></span><br />     `<SendPort Name="port_name" IsStatic="true" IsTwoWay="false" BindingOption="0">`<br /><span data-ttu-id="4bdc5-148">2.注释掉下面的摘录：</span><span class="sxs-lookup"><span data-stu-id="4bdc5-148">2.  Comment out the following excerpts:</span></span><br />     `<ReceivePipeline Name="Microsoft.BizTalk.DefaultPipelines.XMLReceive"    FullyQualifiedName="Microsoft.BizTalk.DefaultPipelines.XMLReceive,    Microsoft.BizTalk.DefaultPipelines, Version=3.0.1.0, Culture=neutral,    PublicKeyToken=token" Type="1" TrackingOption="None" Description=""/>`<br />     `<ReceivePipelineData xsi:nil="true" />`|  
    |<span data-ttu-id="4bdc5-149">若要编辑该端口的绑定文件，以配置一个单向接收端口</span><span class="sxs-lookup"><span data-stu-id="4bdc5-149">To edit the port bindings file to configure a one-way receive port</span></span>|<span data-ttu-id="4bdc5-150">1.在以下摘录中，更改的值**IsTwoWay**属性设置为**false**。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-150">1.  In the following excerpt, change the value of **IsTwoWay** property to **false**.</span></span> <span data-ttu-id="4bdc5-151">最初，此值设置为 **，则返回 true**。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-151">Originally, this is set to **true**.</span></span><br />     `<ReceivePort Name="port_name" IsTwoWay="false" BindingOption="1">`<br /><span data-ttu-id="4bdc5-152">2.注释掉下面的摘录：</span><span class="sxs-lookup"><span data-stu-id="4bdc5-152">2.  Comment out the following excerpts:</span></span><br />     `<SendPipeline Name="Microsoft.BizTalk.DefaultPipelines.XMLTransmit"    FullyQualifiedName="Microsoft.BizTalk.DefaultPipelines.XMLTransmit,    Microsoft.BizTalk.DefaultPipelines, Version=3.0.1.0, Culture=neutral,    PublicKeyToken=token" Type="2" TrackingOption="None" Description="" />`<br />     `<SendPipelineData xsi:nil="true" />`<br />     `<SendPipelineData xsi:nil="true" />`|  
  
##  <a name="BKMK_add_wcf_sap"></a> <span data-ttu-id="4bdc5-153">配置使用生成使用的端口绑定文件的 WCF SAP 端口使用适配器服务外接程序</span><span class="sxs-lookup"><span data-stu-id="4bdc5-153">Configuring a WCF-SAP Port Using the Port Binding File Generated Using Consume Adapter Service Add-in</span></span>  
 <span data-ttu-id="4bdc5-154">[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]还会创建一个端口绑定文件，您可以在导入[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-154">The [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] also creates a port binding file that you can import in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="4bdc5-155">可以使用相同的端口绑定文件，也创建中的 BizTalk WCF SAP 端口[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-155">You can use the same port binding file to also create the BizTalk WCF-SAP port in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="4bdc5-156">但是，在创建 WCF SAP 端口之前必须执行以下任务来修改端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-156">However, before creating WCF-SAP port you must perform the following tasks to modify the port binding file.</span></span>  
  
1. <span data-ttu-id="4bdc5-157">在文本编辑器中打开端口绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-157">Open the port binding file in a text editor.</span></span>  
  
2. <span data-ttu-id="4bdc5-158">搜索并替换与添加中的 WCF SAP 适配器的名称为"Wcf-custom"[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-158">Search and replace “WCF-Custom” with the name with which you added the WCF-SAP adapter in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="4bdc5-159">例如，如果你添加为"SAPAdapter"WCF-SAP 适配器，将为"Wcf-custom"与"SAPAdapter"。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-159">For example, if you added the WCF-SAP adapter as “SAPAdapter”, replace “WCF-Custom” with “SAPAdapter”.</span></span>  
  
3. <span data-ttu-id="4bdc5-160">"ConfigurationClsid"属性中，搜索并替换"A5F15999-8879-472d-8C62-3B5EA9406504"现有属性的值。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-160">Search for the “ConfigurationClsid” attribute, and replace the existing value of the attribute with “A5F15999-8879-472d-8C62-3B5EA9406504”.</span></span>  
  
4. <span data-ttu-id="4bdc5-161">保存并关闭绑定文件。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-161">Save and close the binding file.</span></span>  
  
5. <span data-ttu-id="4bdc5-162">导入绑定文件中的[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理控制台。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-162">Import the binding file in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="4bdc5-163">[重复使用 SAP 适配器绑定](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md)列出的步骤。</span><span class="sxs-lookup"><span data-stu-id="4bdc5-163">[Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md) lists the steps.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="4bdc5-164">请参阅</span><span class="sxs-lookup"><span data-stu-id="4bdc5-164">See Also</span></span>  
[<span data-ttu-id="4bdc5-165">生成块以创建 SAP 应用程序</span><span class="sxs-lookup"><span data-stu-id="4bdc5-165">Building blocks to create SAP applications</span></span>](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md)