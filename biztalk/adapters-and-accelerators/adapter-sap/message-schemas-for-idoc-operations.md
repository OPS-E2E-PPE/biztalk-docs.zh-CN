---
title: "为 IDOC 操作消息架构中 BizTalk 我 SAP 适配器 |Microsoft 文档"
description: "消息操作、 结构和操作发送和接收到的 Idoc 使用 mySAP 适配器-BizTalk 适配器包 (BAP)"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 601aa9f9-e42f-47aa-b020-7a1eed4f0780
caps.latest.revision: "7"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 76d6cc5a7c8c651bcd9fcc6198b7069180c511bf
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/20/2017
---
# <a name="message-schemas-for-idoc-operations"></a><span data-ttu-id="e8f42-103">IDOC 操作的消息架构</span><span class="sxs-lookup"><span data-stu-id="e8f42-103">Message Schemas for IDOC Operations</span></span>
<span data-ttu-id="e8f42-104">中间文档 (IDOC) 是用于以异步方式与 SAP 和非 SAP 系统进行通信的 SAP 支持的标准化的 EDI 类似文档。</span><span class="sxs-lookup"><span data-stu-id="e8f42-104">Intermediate documents (IDOCS) are standardized EDI-like documents supported by SAP for asynchronously communicating with both SAP and non-SAP systems.</span></span> <span data-ttu-id="e8f42-105">IDOC 用于发送和接收到或从贸易合作伙伴的 SAP 系统或外部程序的销售订单类似的商业文档。</span><span class="sxs-lookup"><span data-stu-id="e8f42-105">IDOCS are used to send and receive business documents like sales orders to or from a trading partner’s SAP system or external program.</span></span>  
  
 <span data-ttu-id="e8f42-106">虽然 SAP 系统支持多个端口类型来发送和接收 IDOC （例如，文件端口或 CPIC 端口），但[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]支持发送和接收到的 IDOC 通过 tRFC 端口。</span><span class="sxs-lookup"><span data-stu-id="e8f42-106">Although the SAP system supports a number of port types to send and receive IDOCS (for example, a file port or a CPIC port), the [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] supports sending and receiving IDOCS by using a tRFC port.</span></span>  
  
-   <span data-ttu-id="e8f42-107">为出站 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]充当 tRFC 客户端并调用以将 IDOC 发送到 SAP RFC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-107">For an outbound IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] acts as a tRFC client and invokes an RFC to send the IDOC to SAP.</span></span>  
  
-   <span data-ttu-id="e8f42-108">为入站 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]充当 tRFC 服务器并接受来自 SAP 的 tRFC 客户端调用，以接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-108">For an inbound IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] acts as a tRFC server and accepts a tRFC client call from SAP to receive the IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-109">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]呈现在可用来发送和接收到的 IDOC 与 SAP 系统的 IDOC 节点下的四个操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-109">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces four operations under the IDOC node that you can use to send and receive IDOCS with an SAP system.</span></span>  
  
-   <span data-ttu-id="e8f42-110">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-110">**SendIdoc**.</span></span> <span data-ttu-id="e8f42-111">将 IDOC 发送到适配器中，作为字符串数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-111">Sends an IDOC to the adapter as string data.</span></span> <span data-ttu-id="e8f42-112">直接在 IDOC 根节点下显示此操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-112">This operation is surfaced directly under the IDOC root node.</span></span> <span data-ttu-id="e8f42-113">同一操作适用于所有 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-113">The same operation is used for all IDOCs.</span></span>  
  
-   <span data-ttu-id="e8f42-114">**发送**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-114">**Send**.</span></span> <span data-ttu-id="e8f42-115">将 IDOC 发送到适配器中，作为强类型数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-115">Sends an IDOC to the adapter as strongly-typed data.</span></span> <span data-ttu-id="e8f42-116">此操作在特定节点下显示为每个 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-116">This operation is surfaced under a node specific to each IDOC.</span></span>  
  
-   <span data-ttu-id="e8f42-117">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-117">**ReceiveIdoc**.</span></span> <span data-ttu-id="e8f42-118">作为字符串数据从适配器接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-118">Receives an IDOC from the adapter as string data.</span></span> <span data-ttu-id="e8f42-119">直接在 IDOC 根节点下显示此操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-119">This operation is surfaced directly under the IDOC root node.</span></span> <span data-ttu-id="e8f42-120">同一操作适用于所有 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-120">The same operation is used for all IDOCs.</span></span>  
  
-   <span data-ttu-id="e8f42-121">**接收**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-121">**Receive**.</span></span> <span data-ttu-id="e8f42-122">从适配器接收 IDOC，作为强类型数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-122">Receives an IDOC from the adapter as strongly-typed data.</span></span> <span data-ttu-id="e8f42-123">此操作在特定节点下显示为每个 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-123">This operation is surfaced under a node specific to each IDOC.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e8f42-124">这些四个操作提供程序之间交换 Idoc 不同的方法和[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="e8f42-124">These four operations provide different ways of exchanging IDOCs between your program and the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="e8f42-125">适配器始终使用 RFC （如在下一节中讨论） 发送或接收到的 Idoc 与 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="e8f42-125">The adapter always uses an RFC (as discussed in the next section) to send or receive IDOCs with the SAP system.</span></span>  
  
 <span data-ttu-id="e8f42-126">除了使用四个 IDOC 操作之一，你可以还发送或接收 IDOC 通过内部使用的 Rfc[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]与 SAP 系统交换 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-126">In addition to using one of the four IDOC operations, you can also send or receive an IDOC by using one of the RFCs that are used internally by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to exchange IDOCs with the SAP system.</span></span> <span data-ttu-id="e8f42-127">有关如何概述[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持 Idoc，请参阅[SAP 中的 Idoc 上的操作](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md)。</span><span class="sxs-lookup"><span data-stu-id="e8f42-127">For an overview of how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports IDOCs, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span>  
  
 <span data-ttu-id="e8f42-128">本主题包含有关消息架构和用于 IDOC 操作的消息操作的信息。</span><span class="sxs-lookup"><span data-stu-id="e8f42-128">This topic contains information about the message schemas and message actions used for IDOC operations.</span></span>  
  
## <a name="rfcs-used-by-the-sap-adapter-to-send-and-receive-idocs"></a><span data-ttu-id="e8f42-129">Rfc SAP 适配器用于发送和接收到的 Idoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-129">RFCs Used by the SAP Adapter to Send and Receive IDOCs</span></span>  
 <span data-ttu-id="e8f42-130">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]使用以下远程函数调用 (文档 Rfc) 内部与 SAP 系统交换 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-130">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following remote function calls (RFCs) internally to exchange IDOCS with the SAP system.</span></span> <span data-ttu-id="e8f42-131">在出站端 （到 SAP 系统的适配器），该适配器充当 tRFC 客户端调用 RFC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-131">On the outbound side (adapter to the SAP system), the adapter acts as a tRFC client to invoke the RFC.</span></span> <span data-ttu-id="e8f42-132">在入站端 (SAP 到适配器)，SAP 调用适配器，它将充当 tRFC 服务器上的 RFC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-132">On the inbound side (SAP to adapter), SAP invokes the RFC on the adapter, which acts as a tRFC server.</span></span>  
  
|<span data-ttu-id="e8f42-133">RFC</span><span class="sxs-lookup"><span data-stu-id="e8f42-133">RFC</span></span>|<span data-ttu-id="e8f42-134">Description</span><span class="sxs-lookup"><span data-stu-id="e8f42-134">Description</span></span>|  
|---------|-----------------|  
|<span data-ttu-id="e8f42-135">IDOC_INBOUND_ASYNCHRONOUS</span><span class="sxs-lookup"><span data-stu-id="e8f42-135">IDOC_INBOUND_ASYNCHRONOUS</span></span>|<span data-ttu-id="e8f42-136">从版本 4.0 及更高版本使用此函数模块。</span><span class="sxs-lookup"><span data-stu-id="e8f42-136">This function module is used from release 4.0 and later.</span></span> <span data-ttu-id="e8f42-137">在对 4.x 版本有效的记录类型，它处理 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-137">It processes IDOCS in record types that are valid for 4.x releases.</span></span> <span data-ttu-id="e8f42-138">这可确保，支持较长的 IDOC 段名称。</span><span class="sxs-lookup"><span data-stu-id="e8f42-138">This ensures that longer IDOC segment names are supported.</span></span><br /><br /> <span data-ttu-id="e8f42-139">此 RFC 的参数包括：</span><span class="sxs-lookup"><span data-stu-id="e8f42-139">The parameters to this RFC include:</span></span><br /><br /> <span data-ttu-id="e8f42-140">-idoc_control_rec_40 （SAP 结构是 EDI_DC40）</span><span class="sxs-lookup"><span data-stu-id="e8f42-140">- idoc_control_rec_40 (SAP structure is EDI_DC40)</span></span><br /><br /> <span data-ttu-id="e8f42-141">-idoc_data_rec_40 （SAP 结构是 EDI_DD40）</span><span class="sxs-lookup"><span data-stu-id="e8f42-141">- idoc_data_rec_40 (SAP structure is EDI_DD40)</span></span><br /><br /> <span data-ttu-id="e8f42-142">IDOC 控制记录包含以下字段：</span><span class="sxs-lookup"><span data-stu-id="e8f42-142">The IDOC control record consists of the following fields:</span></span><br /><br /> <span data-ttu-id="e8f42-143">- **Mestyp**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-143">- **Mestyp**.</span></span> <span data-ttu-id="e8f42-144">逻辑消息类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-144">The logical message type.</span></span> <span data-ttu-id="e8f42-145">业务表达消息。</span><span class="sxs-lookup"><span data-stu-id="e8f42-145">Conveys the business meaning of the message.</span></span> <span data-ttu-id="e8f42-146">此字段是必需字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-146">This is a mandatory field.</span></span><br /><br /> <span data-ttu-id="e8f42-147">- **Idoctyp**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-147">- **Idoctyp**.</span></span> <span data-ttu-id="e8f42-148">IDOC 基本结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-148">The basic structure of the IDOC.</span></span> <span data-ttu-id="e8f42-149">此字段标识的此消息的布局集。</span><span class="sxs-lookup"><span data-stu-id="e8f42-149">This field identifies the layout set that uses this message.</span></span> <span data-ttu-id="e8f42-150">此字段是必需字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-150">This is a mandatory field.</span></span><br /><br /> <span data-ttu-id="e8f42-151">-                      **Cimtyp**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-151">-                      **Cimtyp**.</span></span> <span data-ttu-id="e8f42-152">客户扩展的结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-152">The structure of customer extension.</span></span> <span data-ttu-id="e8f42-153">如果 SAP 基本结构进行扩展，客户必须为指定名称，该扩展的结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-153">If an SAP basic structure is extended, the customer must give a name to the structure of the extension.</span></span> <span data-ttu-id="e8f42-154">如果客户已进行一项增强功能; 这是必填字段否则为初始。</span><span class="sxs-lookup"><span data-stu-id="e8f42-154">This is a mandatory field if a customer has made an enhancement; otherwise initial.</span></span><br /><br /> <span data-ttu-id="e8f42-155">- **合作伙伴字段**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-155">- **Partner fields**.</span></span> <span data-ttu-id="e8f42-156">这些是发送方和接收端合作伙伴参数，如合作伙伴类型、 伙伴号、 合作伙伴函数。</span><span class="sxs-lookup"><span data-stu-id="e8f42-156">These are send side and receive side partner parameters such as partner type, partner number, partner function.</span></span><br /><br /> <span data-ttu-id="e8f42-157">IDOC 数据记录包含以下字段：</span><span class="sxs-lookup"><span data-stu-id="e8f42-157">The IDOC data record consists of the following fields:</span></span><br /><br /> <span data-ttu-id="e8f42-158">- **标头字段**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-158">- **Header fields**.</span></span> <span data-ttu-id="e8f42-159">分段标头字段，如表名称、 段号、 的段类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-159">Segment header fields like table name, segment number, segment type.</span></span> <span data-ttu-id="e8f42-160">这些是必填字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-160">These are mandatory fields.</span></span><br /><br /> <span data-ttu-id="e8f42-161">-                      **Sdata**。</span><span class="sxs-lookup"><span data-stu-id="e8f42-161">-                      **Sdata**.</span></span> <span data-ttu-id="e8f42-162">使用 IDOC 的数据的 1000年字节字符字段。这是必填字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-162">1000-byte character field for the data used by the IDOC .This is a mandatory field.</span></span>|  
|<span data-ttu-id="e8f42-163">INBOUND_IDOC_PROCESS</span><span class="sxs-lookup"><span data-stu-id="e8f42-163">INBOUND_IDOC_PROCESS</span></span>|<span data-ttu-id="e8f42-164">此函数模块用于最多 4.0 版本。</span><span class="sxs-lookup"><span data-stu-id="e8f42-164">This function module is used for releases up to 4.0.</span></span> <span data-ttu-id="e8f42-165">在对 3.x 版本有效的记录类型，它处理 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-165">It processes IDOCS in record types that are valid for 3.x releases.</span></span> <span data-ttu-id="e8f42-166">还有可能要在 4.x 中使用此函数模块。</span><span class="sxs-lookup"><span data-stu-id="e8f42-166">It is also possible to use this function module in 4.x.</span></span><br /><br /> <span data-ttu-id="e8f42-167">此 RFC 的参数包括：</span><span class="sxs-lookup"><span data-stu-id="e8f42-167">The parameters to this RFC include:</span></span><br /><br /> <span data-ttu-id="e8f42-168">-idoc_control （SAP 结构是 EDI_DC）</span><span class="sxs-lookup"><span data-stu-id="e8f42-168">- idoc_control (SAP structure is EDI_DC)</span></span><br /><br /> <span data-ttu-id="e8f42-169">-idoc_data （SAP 结构是 EDI_DD）</span><span class="sxs-lookup"><span data-stu-id="e8f42-169">- idoc_data (SAP structure is EDI_DD)</span></span>|  
  
## <a name="operations-to-send-idocs"></a><span data-ttu-id="e8f42-170">操作发送到的 Idoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-170">Operations to Send IDOCs</span></span>  
 <span data-ttu-id="e8f42-171">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]公开客户端将 Idoc 发送到 SAP 系统的发送和 SendIdoc 操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-171">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] exposes the Send and SendIdoc operations for clients to send IDOCs to an SAP system.</span></span> <span data-ttu-id="e8f42-172">对于发送操作中，IDOC 表示为强类型数据;对于 SendIdoc 操作中，IDOC 表示为字符串数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-172">For the Send operation, the IDOC is represented as strongly-typed data; for the SendIdoc operation, the IDOC is represented as string data.</span></span> <span data-ttu-id="e8f42-173">这些操作确定 IDOC 数据适配器和你的应用程序之间的表示方式。</span><span class="sxs-lookup"><span data-stu-id="e8f42-173">These operations determine how the IDOC data is represented between the adapter and your application.</span></span> <span data-ttu-id="e8f42-174">适配器始终使用将发送到的 Idoc 给 SAP IDOC_INBOUND_ASYNCHRONOUS 或 IDOC_INBOUND_PROCESS (t) RFC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-174">The adapter always sends IDOCs to SAP by using either the IDOC_INBOUND_ASYNCHRONOUS or the IDOC_INBOUND_PROCESS (t)RFC.</span></span> <span data-ttu-id="e8f42-175">若要将 IDOC 发送到 SAP 系统，你可以使用发送或 SendIdoc 操作中，或您可直接调用适当的 RFC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-175">To send an IDOC to your SAP system, you can either use the Send or SendIdoc operation, or you can directly invoke the appropriate RFC.</span></span>  
  
### <a name="message-structures-for-idoc-client-operations"></a><span data-ttu-id="e8f42-176">IDOC 客户端操作的消息结构</span><span class="sxs-lookup"><span data-stu-id="e8f42-176">Message Structures for IDOC Client Operations</span></span>  
 <span data-ttu-id="e8f42-177">下表显示发送和 SendIdoc 操作的消息结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-177">The following table shows the message structures for the Send and SendIdoc operations.</span></span>  
  
|<span data-ttu-id="e8f42-178">运算</span><span class="sxs-lookup"><span data-stu-id="e8f42-178">Operation</span></span>|<span data-ttu-id="e8f42-179">XML 结构</span><span class="sxs-lookup"><span data-stu-id="e8f42-179">XML Structure</span></span>|<span data-ttu-id="e8f42-180">Description</span><span class="sxs-lookup"><span data-stu-id="e8f42-180">Description</span></span>|  
|---------------|-------------------|-----------------|  
|<span data-ttu-id="e8f42-181">Send</span><span class="sxs-lookup"><span data-stu-id="e8f42-181">Send</span></span>|`<Send xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/                    [CIMTYP]/[RELNO]/Send">   <idocData>     <[EDI_DC40/EDI_DC] xmlns="/Types/Idoc/      [VERSION]/[IDOCTYP]/[CIMTYP]/[RELNO]">       <EDIDC_FIELD1>value1</ EDIDC_FIELD1>       <EDIDC_FIELD2>value2</ EDIDC_FIELD2>       …     </EDI_DC40>     <[SEGMENT_DEFN]_1>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_1>     <[SEGMENT_DEFN]_2>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_2>     …     </[EDI_DC40/EDI_DC]>   </idocData>   <guid>guid</guid> </Send>`|<span data-ttu-id="e8f42-182">将强类型的 IDOC 发送到 SAP</span><span class="sxs-lookup"><span data-stu-id="e8f42-182">Sends a strongly-typed IDOC to SAP</span></span><br /><br /> <span data-ttu-id="e8f42-183">-IDOC 架构是强类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-183">- IDOC schema is strongly-typed.</span></span><br /><br /> <span data-ttu-id="e8f42-184">-公开控制记录的字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-184">- Exposes control record fields.</span></span><br /><br /> <span data-ttu-id="e8f42-185">-公开包括段标头和段字段的数据记录字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-185">- Exposes data record fields including segment headers and segment fields.</span></span><br /><br /> <span data-ttu-id="e8f42-186">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将 GUID 与 SAP 事务 ID (TID)，并用于将 IDOC 发送相关联。</span><span class="sxs-lookup"><span data-stu-id="e8f42-186">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] associates a GUID with the SAP transaction ID (TID) that it uses to send the IDOC.</span></span> <span data-ttu-id="e8f42-187">你可以选择是否在请求消息中指定的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-187">You can choose whether to specify a GUID in the request message.</span></span> <span data-ttu-id="e8f42-188">如果在请求消息中，不包含 GUID[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]生成一个密钥。</span><span class="sxs-lookup"><span data-stu-id="e8f42-188">If a GUID is not included in the request message, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] generates one.</span></span> <span data-ttu-id="e8f42-189">在响应消息中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-189">The GUID is returned in the response message.</span></span>|  
|<span data-ttu-id="e8f42-190">发送响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-190">Send Response</span></span>|`<SendResponse xmlns="[MSG_VERSION]/Idoc/[VERSION]/         [IDOCTYP]/[CIMTYP]/[RELNO]/Send">   <guid>guid</guid> </SendResponse>`|<span data-ttu-id="e8f42-191">指示 IDOC，已发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="e8f42-191">Indicates that the IDOC has been sent to the SAP system.</span></span><br /><br /> <span data-ttu-id="e8f42-192">如果**AutoConfirmSentIdocs**绑定属性是**true**、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]自动确定事务在 SAP 系统上的，你可以忽略响应中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-192">If the **AutoConfirmSentIdocs** binding property is **true**, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] automatically confirms the transaction on the SAP system, and you can ignore the GUID returned in the response.</span></span> <span data-ttu-id="e8f42-193">如果**AutoConfirmSentIdocs**绑定属性是**false**，必须调用**RfcConfirmTransID**具有 GUID 的操作返回[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]到完成事务在 SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="e8f42-193">If the **AutoConfirmSentIdocs** binding property is **false**, you must invoke the **RfcConfirmTransID** operation with the GUID returned by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to complete the transaction on the SAP system.</span></span><br /><br /> <span data-ttu-id="e8f42-194">你可以调用**SapAdapterUtilities.ConvertGuidToTid**方法来获取 TID 与的工作 (LUW) 的逻辑单元关联。</span><span class="sxs-lookup"><span data-stu-id="e8f42-194">You can invoke the **SapAdapterUtilities.ConvertGuidToTid** method to obtain the TID associated with the logical unit of work (LUW).</span></span>|  
|<span data-ttu-id="e8f42-195">SendIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-195">SendIdoc</span></span>|`<SendIdoc xmlns="[MSG_VERSION]/Idoc">   <idocData>docDataString</idocData>   <guid>guid</guid> </SendIdoc>`|<span data-ttu-id="e8f42-196">将弱类型 IDOC 发送到 SAP。</span><span class="sxs-lookup"><span data-stu-id="e8f42-196">Sends a weakly-typed IDOC to SAP.</span></span><br /><br /> <span data-ttu-id="e8f42-197">-IDOC 架构是弱类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-197">- IDOC schema is weakly-typed.</span></span><br /><br /> <span data-ttu-id="e8f42-198">-作为单个字符串字段组成的控制记录和数据记录公开 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-198">- Exposes the IDOC as a single string field that consists of the control record and data record.</span></span><br /><br /> <span data-ttu-id="e8f42-199">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将 GUID 与它使用以将 IDOC 发送 SAP TID 相关联。</span><span class="sxs-lookup"><span data-stu-id="e8f42-199">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] associates a GUID with the SAP TID that it uses to send the IDOC.</span></span> <span data-ttu-id="e8f42-200">你可以选择是否在请求消息中指定的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-200">You can choose whether to specify a GUID in the request message.</span></span> <span data-ttu-id="e8f42-201">如果在请求消息中，不包含 GUID[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将生成一个构造函数。</span><span class="sxs-lookup"><span data-stu-id="e8f42-201">If a GUID is not included in the request message, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] will generate one.</span></span> <span data-ttu-id="e8f42-202">在响应消息中返回的 GUID</span><span class="sxs-lookup"><span data-stu-id="e8f42-202">The GUID is returned in the response message</span></span>|  
|<span data-ttu-id="e8f42-203">SendIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-203">SendIdoc Response</span></span>|`<SendIdocResponse xmlns="[MSG_VERSION]/Idoc">   <guid>guid</guid> </SendIdocResponse>`|<span data-ttu-id="e8f42-204">指示 IDOC，已发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="e8f42-204">Indicates that the IDOC has been sent to the SAP system.</span></span><br /><br /> <span data-ttu-id="e8f42-205">如果**AutoConfirmSentIdocs**绑定属性是**true**、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]自动确定事务在 SAP 系统上的，你可以忽略响应中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-205">If the **AutoConfirmSentIdocs** binding property is **true**, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] automatically confirms the transaction on the SAP system, and you can ignore the GUID returned in the response.</span></span> <span data-ttu-id="e8f42-206">如果**AutoConfirmSentIdocs**绑定属性是**false**，必须调用**RfcConfirmTransID**具有 GUID 的操作返回[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]到完成事务在 SAP 系统上。</span><span class="sxs-lookup"><span data-stu-id="e8f42-206">If the **AutoConfirmSentIdocs** binding property is **false**, you must invoke the **RfcConfirmTransID** operation with the GUID returned by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]to complete the transaction on the SAP system.</span></span><br /><br /> <span data-ttu-id="e8f42-207">你可以调用**SapAdapterUtilities.ConvertGuidToTid** LUW 与关联的方法来获取 TID。</span><span class="sxs-lookup"><span data-stu-id="e8f42-207">You can invoke the **SapAdapterUtilities.ConvertGuidToTid** method to obtain the TID associated with the LUW.</span></span>|  
  
 <span data-ttu-id="e8f42-208">[MSG_VERSION] = 消息版本字符串;例如，http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="e8f42-208">[MSG_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  
  
 <span data-ttu-id="e8f42-209">[VERSION] = IDOC 发行版 （2 或 3）。</span><span class="sxs-lookup"><span data-stu-id="e8f42-209">[VERSION] = IDOC release version (2 or 3).</span></span>  
  
 <span data-ttu-id="e8f42-210">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="e8f42-210">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  
  
 <span data-ttu-id="e8f42-211">[CIMTYP] = Cimtype 的自定义的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-211">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-212">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="e8f42-212">[RELNO] = Release number; for example, 620.</span></span>  
  
 <span data-ttu-id="e8f42-213">[EDI_DC40/EDI_DC] = EDI_DC40 版本发布的版本 3 Idoc 和为 EDI_DC version2 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-213">[EDI_DC40/EDI_DC]  = EDI_DC40 for release version 3 IDOCs and EDI_DC for release version2 IDOCs.</span></span>  
  
 <span data-ttu-id="e8f42-214">[EDIDC_FIELD] = 构成 EDI_DC40/EDI_DC 控件记录结构的字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-214">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure.</span></span>  
  
 <span data-ttu-id="e8f42-215">[SEGMENT_DEFN] = 段定义名称 （不段类型名称）;例如，E2EDK01005。</span><span class="sxs-lookup"><span data-stu-id="e8f42-215">[SEGMENT_DEFN] = Segment definition name (NOT segment type name); for example, E2EDK01005.</span></span> <span data-ttu-id="e8f42-216">请注意，段定义节点无法还显示在某个段组节点下, 基于的 idoc 的结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-216">Note that the segment definition node could also appear under a segment group node, based on the structure of the IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-217">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = 每个段都有一组标准的跟段数据的标头字段组成的段标题。</span><span class="sxs-lookup"><span data-stu-id="e8f42-217">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="e8f42-218">段数据的所有段字段和数据组成。</span><span class="sxs-lookup"><span data-stu-id="e8f42-218">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="e8f42-219">此节点表示段标头字段;例如，DATAHEADERCOLUMN_SEGNAM。</span><span class="sxs-lookup"><span data-stu-id="e8f42-219">This node represents the segment header fields; for example, DATAHEADERCOLUMN_SEGNAM.</span></span>  
  
 <span data-ttu-id="e8f42-220">[SEG_FIELD] = 构成特定段定义 [SEGMENT_DEFN] 段字段名称。</span><span class="sxs-lookup"><span data-stu-id="e8f42-220">[SEG_FIELD] = Segment field name constituting a particular segment definition [SEGMENT_DEFN].</span></span>  
  
 <span data-ttu-id="e8f42-221">[guid] = GUID 参数。</span><span class="sxs-lookup"><span data-stu-id="e8f42-221">[guid] = GUID parameter.</span></span>  
  
### <a name="message-actions-for-idoc-client-operations"></a><span data-ttu-id="e8f42-222">IDOC 客户端操作的消息操作</span><span class="sxs-lookup"><span data-stu-id="e8f42-222">Message Actions for IDOC Client Operations</span></span>  
 <span data-ttu-id="e8f42-223">下表显示发送和 SendIdoc 操作的消息操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-223">The following table shows the message actions for the Send and SendIdoc operations.</span></span>  
  
|<span data-ttu-id="e8f42-224">运算</span><span class="sxs-lookup"><span data-stu-id="e8f42-224">Operation</span></span>|<span data-ttu-id="e8f42-225">操作</span><span class="sxs-lookup"><span data-stu-id="e8f42-225">Action</span></span>|<span data-ttu-id="e8f42-226">示例</span><span class="sxs-lookup"><span data-stu-id="e8f42-226">Example</span></span>|  
|---------------|------------|-------------|  
|<span data-ttu-id="e8f42-227">Send</span><span class="sxs-lookup"><span data-stu-id="e8f42-227">Send</span></span>|<span data-ttu-id="e8f42-228">[MESSAGE_VERSION] /Idoc/ [VERSION] / [IDOCTYP] / [CIMTYP] / [RELNO] / 发送</span><span class="sxs-lookup"><span data-stu-id="e8f42-228">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send</span></span>|<span data-ttu-id="e8f42-229">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send</span><span class="sxs-lookup"><span data-stu-id="e8f42-229">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send</span></span>|  
|<span data-ttu-id="e8f42-230">发送响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-230">Send Response</span></span>|<span data-ttu-id="e8f42-231">[MESSAGE_VERSION] /Idoc/ [VERSION] / [IDOCTYP] / [CIMTYP] / [RELNO] / 发送/响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-231">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send/response</span></span>|<span data-ttu-id="e8f42-232">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send/response</span><span class="sxs-lookup"><span data-stu-id="e8f42-232">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send/response</span></span>|  
|<span data-ttu-id="e8f42-233">SendIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-233">SendIdoc</span></span>|<span data-ttu-id="e8f42-234">[MESSAGE_VERSION] / Idoc/SendIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-234">[MESSAGE_VERSION]/Idoc/SendIdoc</span></span>|<span data-ttu-id="e8f42-235">http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-235">http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc</span></span>|  
|<span data-ttu-id="e8f42-236">SendIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-236">SendIdoc Response</span></span>|<span data-ttu-id="e8f42-237">[MESSAGE_VERSION] / Idoc/SendIdoc/响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-237">[MESSAGE_VERSION]/Idoc/SendIdoc/response</span></span>|<span data-ttu-id="e8f42-238">http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc/response</span><span class="sxs-lookup"><span data-stu-id="e8f42-238">http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc/response</span></span>|  
  
 <span data-ttu-id="e8f42-239">[MESSAGE_VERSION] = 消息版本字符串;例如，http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="e8f42-239">[MESSAGE_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  
  
 <span data-ttu-id="e8f42-240">[VERSION] = IDOC 发行版 （2 或 3）。</span><span class="sxs-lookup"><span data-stu-id="e8f42-240">[VERSION] = IDOC release version (2 or 3).</span></span>  
  
 <span data-ttu-id="e8f42-241">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="e8f42-241">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  
  
 <span data-ttu-id="e8f42-242">[CIMTYP] = Cimtype 的自定义的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-242">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-243">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="e8f42-243">[RELNO] = Release number; for example, 620.</span></span>  
  
## <a name="operations-to-receive-idocs"></a><span data-ttu-id="e8f42-244">操作接收到的 Idoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-244">Operations to Receive IDOCs</span></span>  
 <span data-ttu-id="e8f42-245">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]公开应用程序从某个 SAP 系统接收到的 Idoc 的接收和 ReceiveIdoc 操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-245">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] exposes the Receive and ReceiveIdoc operations for applications to receive IDOCs from an SAP system.</span></span> <span data-ttu-id="e8f42-246">接收操作的 IDOC 表示为强类型数据;对于 ReceiveIdoc 操作中，IDOC 表示为字符串数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-246">For the Receive operation, the IDOC is represented as strongly-typed data; for the ReceiveIdoc operation, the IDOC is represented as string data.</span></span>  
  
 <span data-ttu-id="e8f42-247">这些操作确定如何 IDOC 数据发出的适配器到你的应用程序。</span><span class="sxs-lookup"><span data-stu-id="e8f42-247">These operations determine how the IDOC data is emitted by the adapter to your application.</span></span> <span data-ttu-id="e8f42-248">适配器始终会从 SAP 系统的 Idoc 作为 IDOC_INBOUND_ASYNCHRONOUS 或 IDOC_INBOUND_PROCESS tRFC 接收。</span><span class="sxs-lookup"><span data-stu-id="e8f42-248">The adapter always receives IDOCs from the SAP system as either an IDOC_INBOUND_ASYNCHRONOUS or IDOC_INBOUND_PROCESS tRFC.</span></span> <span data-ttu-id="e8f42-249">你可以使用接收或 ReceiveIdoc 操作中，也可以在 RFC 格式接收 IDOC 数据。</span><span class="sxs-lookup"><span data-stu-id="e8f42-249">You can either use the Receive or ReceiveIdoc operation, or you can receive IDOC data in RFC format.</span></span> <span data-ttu-id="e8f42-250">你设置**ReceiveIdocFormat**绑定属性，以指定在其中适配器发出到你的应用程序的 IDOC 数据的格式。</span><span class="sxs-lookup"><span data-stu-id="e8f42-250">You set the **ReceiveIdocFormat** binding property to specify the format in which the adapter emits the IDOC data to your application.</span></span> <span data-ttu-id="e8f42-251">有关详细信息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]绑定属性，请参阅[了解针对 mySAP Business Suite 绑定属性的 BizTalk 适配器](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="e8f42-251">For more information about the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] binding properties, see [Read about BizTalk Adapter for mySAP Business Suite binding properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
### <a name="message-structures-for-idoc-receive-operations"></a><span data-ttu-id="e8f42-252">消息结构的 IDOC 接收操作</span><span class="sxs-lookup"><span data-stu-id="e8f42-252">Message Structures for IDOC Receive Operations</span></span>  
 <span data-ttu-id="e8f42-253">下表显示在接收和 ReceiveIdoc 操作的消息结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-253">The following table shows the message structures for the Receive and ReceiveIdoc operations.</span></span>  
  
|<span data-ttu-id="e8f42-254">运算</span><span class="sxs-lookup"><span data-stu-id="e8f42-254">Operation</span></span>|<span data-ttu-id="e8f42-255">XML 结构</span><span class="sxs-lookup"><span data-stu-id="e8f42-255">XML Structure</span></span>|<span data-ttu-id="e8f42-256">Description</span><span class="sxs-lookup"><span data-stu-id="e8f42-256">Description</span></span>|  
|---------------|-------------------|-----------------|  
|<span data-ttu-id="e8f42-257">Receive</span><span class="sxs-lookup"><span data-stu-id="e8f42-257">Receive</span></span>|`<Receive xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/                 [CIMTYP]/[RELNO]/Receive">   <idocData>     <[EDI_DC40/EDI_DC] xmlns="/Types/Idoc/      [VERSION]/[IDOCTYP]/[CIMTYP]/[RELNO]">       <EDIDC_FIELD1>value1</ EDIDC_FIELD1>       <EDIDC_FIELD2>value2</ EDIDC_FIELD2>       …     </EDI_DC40>     <[SEGMENT_DEFN]_1>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_1>     <[SEGMENT_DEFN]_2>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_2>     …     </[EDI_DC40/EDI_DC]>   </idocData> </Receive>`|<span data-ttu-id="e8f42-258">从 SAP 接收强类型的 IDOC</span><span class="sxs-lookup"><span data-stu-id="e8f42-258">Receives a strongly-typed IDOC from SAP</span></span><br /><br /> <span data-ttu-id="e8f42-259">-IDOC 架构是强类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-259">- IDOC schema is strongly-typed.</span></span><br /><br /> <span data-ttu-id="e8f42-260">-公开控制记录的字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-260">- Exposes control record fields.</span></span><br /><br /> <span data-ttu-id="e8f42-261">-公开包括段标头和段字段的数据记录字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-261">- Exposes data record fields including segment headers and segment fields.</span></span>|  
|<span data-ttu-id="e8f42-262">接收响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-262">Receive Response</span></span>|`<ReceiveResponse xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/         [CIMTYP]/[RELNO]/Receive"> </ReceiveResponse>`|<span data-ttu-id="e8f42-263">指示已从 SAP 系统接收了 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-263">Indicates that the IDOC has been received from the SAP system.</span></span>|  
|<span data-ttu-id="e8f42-264">ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-264">ReceiveIdoc</span></span>|`<ReceiveIdoc xmlns="[MSG_VERSION]/Idoc">   <idocData>docDataString</idocData> </ReceiveIdoc>`|<span data-ttu-id="e8f42-265">从 SAP 接收弱类型 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-265">Receives a weakly-typed IDOC from SAP.</span></span><br /><br /> <span data-ttu-id="e8f42-266">-IDOC 架构是弱类型。</span><span class="sxs-lookup"><span data-stu-id="e8f42-266">- IDOC schema is weakly-typed.</span></span><br /><br /> <span data-ttu-id="e8f42-267">-作为单个字符串字段组成的控制记录和数据记录公开 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-267">- Exposes the IDOC as a single string field that consists of the control record and data record.</span></span>|  
|<span data-ttu-id="e8f42-268">ReceiveIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-268">ReceiveIdoc Response</span></span>|`<ReceiveIdocResponse xmlns="[MSG_VERSION]/Idoc"> </ReceiveIdocResponse>`|<span data-ttu-id="e8f42-269">指示已从 SAP 系统接收了 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-269">Indicates that the IDOC has been received from the SAP system.</span></span>|  
  
 <span data-ttu-id="e8f42-270">[MSG_VERSION] = 消息版本字符串;例如，http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="e8f42-270">[MSG_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  
  
 <span data-ttu-id="e8f42-271">[VERSION] = IDOC 发行版 （2 或 3）。</span><span class="sxs-lookup"><span data-stu-id="e8f42-271">[VERSION] = IDOC release version (2 or 3).</span></span>  
  
 <span data-ttu-id="e8f42-272">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="e8f42-272">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  
  
 <span data-ttu-id="e8f42-273">[CIMTYP] = Cimtype 的自定义的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="e8f42-273">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-274">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="e8f42-274">[RELNO] = Release number; for example, 620.</span></span>  
  
 <span data-ttu-id="e8f42-275">[EDI_DC40/EDI_DC] = EDI_DC40 版本发布的版本 3 Idoc 和 EDI_DC 为版本 2 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-275">[EDI_DC40/EDI_DC]  = EDI_DC40 for release version 3 IDOCs and EDI_DC for release version 2 IDOCs.</span></span>  
  
 <span data-ttu-id="e8f42-276">[EDIDC_FIELD] = 构成 EDI_DC40/EDI_DC 控件记录结构的字段。</span><span class="sxs-lookup"><span data-stu-id="e8f42-276">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure.</span></span>  
  
 <span data-ttu-id="e8f42-277">[SEGMENT_DEFN] = 段定义名称 （不段类型名称）;例如，E2EDK01005。</span><span class="sxs-lookup"><span data-stu-id="e8f42-277">[SEGMENT_DEFN] = Segment definition name (NOT segment type name); for example, E2EDK01005.</span></span> <span data-ttu-id="e8f42-278">段定义节点也可以显示在基于的 idoc 结构段组节点下。</span><span class="sxs-lookup"><span data-stu-id="e8f42-278">The segment definition node can also appear under a segment group node, based on the structure of the IDOC.</span></span>  
  
 <span data-ttu-id="e8f42-279">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = 每个段都有一组标准的跟段数据的标头字段组成的段标题。</span><span class="sxs-lookup"><span data-stu-id="e8f42-279">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="e8f42-280">段数据的所有段字段和数据组成。</span><span class="sxs-lookup"><span data-stu-id="e8f42-280">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="e8f42-281">此节点表示段标头字段;例如，DATAHEADERCOLUMN_SEGNAM。</span><span class="sxs-lookup"><span data-stu-id="e8f42-281">This node represents the segment header fields; for example, DATAHEADERCOLUMN_SEGNAM.</span></span>  
  
 <span data-ttu-id="e8f42-282">[SEG_FIELD] = 构成特定段定义 [SEGMENT_DEFN] 段字段名称。</span><span class="sxs-lookup"><span data-stu-id="e8f42-282">[SEG_FIELD] = Segment field name constituting a particular segment definition [SEGMENT_DEFN].</span></span>  
  
#### <a name="receiving-an-idoc-in-rfc-format"></a><span data-ttu-id="e8f42-283">RFC 格式接收 IDOC</span><span class="sxs-lookup"><span data-stu-id="e8f42-283">Receiving an IDOC in RFC Format</span></span>  
 <span data-ttu-id="e8f42-284">也可以在 RFC 格式接收到的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="e8f42-284">You can also receive IDocs in RFC format.</span></span> <span data-ttu-id="e8f42-285">用于从 SAP 接收到的 Idoc 的 Rfc 是：</span><span class="sxs-lookup"><span data-stu-id="e8f42-285">The RFCs used to receive IDOCs from SAP are:</span></span>  
  
-   <span data-ttu-id="e8f42-286">版本 3 Idoc 的 IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="e8f42-286">IDOC_INBOUND_ASYNCHRONOUS for version 3 IDOCs.</span></span>  
  
-   <span data-ttu-id="e8f42-287">版本 2 Idoc 的 INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="e8f42-287">INBOUND_IDOC_PROCESS for version 2 IDOCs.</span></span>  
  
 <span data-ttu-id="e8f42-288">下面的代码演示 IDOC_INBOUND_ASYNCHRONOUS 操作的形式收到的 IDOC 的结构。</span><span class="sxs-lookup"><span data-stu-id="e8f42-288">The following code shows the structure of an IDOC received as an IDOC_INBOUND_ASYNCHRONOUS operation.</span></span>  
  
```  
<IDOC_INBOUND_ASYNCHRONOUS xmlns="http://Microsoft.LobServices.Sap/2007/03/Rfc/">  
  <IDOC_CONTROL_REC_40>  
    <EDI_DC40 xmlns="http://Microsoft.LobServices.Sap/2007/03/Types/Rfc/">  
      <EDIDC_FIELD1>field1</EDIDC_FIELD1>  
      <EDIDC_FIELD2>field2</EDIDC_FIELD2>  
      …  
    </EDI_DC40>  
  <IDOC_DATA_REC_40>  
    <EDI_DD40 xmlns="http://Microsoft.LobServices.Sap/2007/03/Types/Rfc/">  
      \<[SEG_HEADER_FIELD1]>value1\</[SEG_HEADER_FIELD1]>  
      \<[SEG_HEADER_FIELD2]>value2\</[SEG_HEADER_FIELD2]>  
      …  
      <SDATA>segment value</SDATA>  
    </EDI_DD40>  
    …  
  </IDOC_DATA_REC_40>  
</IDOC_INBOUND_ASYNCHRONOUS>  
```  
  
 <span data-ttu-id="e8f42-289">[EDIDC_FIELD] = 构成 EDI_DC40/EDI_DC 控件记录结构的字段</span><span class="sxs-lookup"><span data-stu-id="e8f42-289">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure</span></span>  
  
 <span data-ttu-id="e8f42-290">[SEG_HEADER_FIELD] = 每个段都有一组标准的跟段数据的标头字段组成的段标题。</span><span class="sxs-lookup"><span data-stu-id="e8f42-290">[SEG_HEADER_FIELD] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="e8f42-291">段数据的所有段字段和数据组成。</span><span class="sxs-lookup"><span data-stu-id="e8f42-291">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="e8f42-292">此节点表示段标头字段;例如，SEGNAM、 MANDT 和 DOCNUM。</span><span class="sxs-lookup"><span data-stu-id="e8f42-292">This node represents the segment header fields; for example, SEGNAM, MANDT, and DOCNUM.</span></span>  
  
 <span data-ttu-id="e8f42-293">有关格式 tRFC 操作的详细信息，请参阅[trfc 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="e8f42-293">For more information about the format of tRFC operations, see [Message Schemas for tRFC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span></span>  
  
### <a name="message-actions-for-idoc-receive-operations"></a><span data-ttu-id="e8f42-294">IDOC 的消息操作接收操作</span><span class="sxs-lookup"><span data-stu-id="e8f42-294">Message Actions for IDOC Receive Operations</span></span>  
 <span data-ttu-id="e8f42-295">下表显示在接收和 ReceiveIdoc 操作的消息操作。</span><span class="sxs-lookup"><span data-stu-id="e8f42-295">The following table shows the message actions for the Receive and ReceiveIdoc operations.</span></span>  
  
|<span data-ttu-id="e8f42-296">运算</span><span class="sxs-lookup"><span data-stu-id="e8f42-296">Operation</span></span>|<span data-ttu-id="e8f42-297">操作</span><span class="sxs-lookup"><span data-stu-id="e8f42-297">Action</span></span>|<span data-ttu-id="e8f42-298">示例</span><span class="sxs-lookup"><span data-stu-id="e8f42-298">Example</span></span>|  
|---------------|------------|-------------|  
|<span data-ttu-id="e8f42-299">Receive</span><span class="sxs-lookup"><span data-stu-id="e8f42-299">Receive</span></span>|<span data-ttu-id="e8f42-300">[MESSAGE_VERSION] /Idoc/ [VERSION] / [IDOCTYP] / [CIMTYP] / [RELNO] / 接收</span><span class="sxs-lookup"><span data-stu-id="e8f42-300">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive</span></span>|<span data-ttu-id="e8f42-301">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive</span><span class="sxs-lookup"><span data-stu-id="e8f42-301">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive</span></span>|  
|<span data-ttu-id="e8f42-302">接收响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-302">Receive Response</span></span>|<span data-ttu-id="e8f42-303">[MESSAGE_VERSION] /Idoc/ [VERSION] / [IDOCTYP] / [CIMTYP] / [RELNO] / 接收/响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-303">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive/response</span></span>|<span data-ttu-id="e8f42-304">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive/response</span><span class="sxs-lookup"><span data-stu-id="e8f42-304">http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive/response</span></span>|  
|<span data-ttu-id="e8f42-305">ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-305">ReceiveIdoc</span></span>|<span data-ttu-id="e8f42-306">[MESSAGE_VERSION] / Idoc/ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-306">[MESSAGE_VERSION]/Idoc/ReceiveIdoc</span></span>|<span data-ttu-id="e8f42-307">http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="e8f42-307">http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc</span></span>|  
|<span data-ttu-id="e8f42-308">ReceiveIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-308">ReceiveIdoc Response</span></span>|<span data-ttu-id="e8f42-309">[MESSAGE_VERSION] / Idoc/ReceiveIdoc/响应</span><span class="sxs-lookup"><span data-stu-id="e8f42-309">[MESSAGE_VERSION]/Idoc/ReceiveIdoc/response</span></span>|<span data-ttu-id="e8f42-310">http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc/response</span><span class="sxs-lookup"><span data-stu-id="e8f42-310">http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc/response</span></span>|  
  
