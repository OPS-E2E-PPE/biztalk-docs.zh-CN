---
title: IDOC 操作的消息架构在 BizTalk 中的我 SAP 适配器 |Microsoft Docs
description: 消息操作、 结构和操作来发送和接收 Idoc 使用 mySAP 适配器的 BizTalk 适配器包 (BAP)
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 601aa9f9-e42f-47aa-b020-7a1eed4f0780
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 45ef2f5de5a9e7e13eb2fb53918cb1208a0aeeee
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/27/2018
ms.locfileid: "36980022"
---
# <a name="message-schemas-for-idoc-operations"></a><span data-ttu-id="0bf94-103">IDOC 操作的消息架构</span><span class="sxs-lookup"><span data-stu-id="0bf94-103">Message Schemas for IDOC Operations</span></span>
<span data-ttu-id="0bf94-104">中间文档 (IDOC) 是用于以异步方式与 SAP 和非 SAP 系统进行通信的 SAP 支持的标准化类似于 EDI 的文档。</span><span class="sxs-lookup"><span data-stu-id="0bf94-104">Intermediate documents (IDOCS) are standardized EDI-like documents supported by SAP for asynchronously communicating with both SAP and non-SAP systems.</span></span> <span data-ttu-id="0bf94-105">IDOC 用于发送和接收业务文档，如销售订单与贸易合作伙伴的 SAP 系统或外部程序。</span><span class="sxs-lookup"><span data-stu-id="0bf94-105">IDOCS are used to send and receive business documents like sales orders to or from a trading partner’s SAP system or external program.</span></span>  

 <span data-ttu-id="0bf94-106">虽然 SAP 系统支持多个端口类型来发送和接收 IDOC （例如，file 端口或 CPIC 端口），但[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]支持发送和接收 IDOC 使用 tRFC 端口。</span><span class="sxs-lookup"><span data-stu-id="0bf94-106">Although the SAP system supports a number of port types to send and receive IDOCS (for example, a file port or a CPIC port), the [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] supports sending and receiving IDOCS by using a tRFC port.</span></span>  

- <span data-ttu-id="0bf94-107">对于出站 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]充当 tRFC 客户端并调用以将 IDOC 发送到 SAP RFC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-107">For an outbound IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] acts as a tRFC client and invokes an RFC to send the IDOC to SAP.</span></span>  

- <span data-ttu-id="0bf94-108">对于入站 IDOC，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]充当 tRFC 服务器并接受来自 SAP 的 tRFC 客户端调用，用于接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-108">For an inbound IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] acts as a tRFC server and accepts a tRFC client call from SAP to receive the IDOC.</span></span>  

  <span data-ttu-id="0bf94-109">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]显示可用于发送和接收与 SAP 系统的 IDOC 的 IDOC 节点下的四个操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-109">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces four operations under the IDOC node that you can use to send and receive IDOCS with an SAP system.</span></span>  

- <span data-ttu-id="0bf94-110">**SendIdoc**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-110">**SendIdoc**.</span></span> <span data-ttu-id="0bf94-111">字符串数据作为将 IDOC 发送到适配器。</span><span class="sxs-lookup"><span data-stu-id="0bf94-111">Sends an IDOC to the adapter as string data.</span></span> <span data-ttu-id="0bf94-112">直接在 IDOC 根节点下显示此操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-112">This operation is surfaced directly under the IDOC root node.</span></span> <span data-ttu-id="0bf94-113">相同的操作用于所有 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-113">The same operation is used for all IDOCs.</span></span>  

- <span data-ttu-id="0bf94-114">**发送**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-114">**Send**.</span></span> <span data-ttu-id="0bf94-115">强类型化数据作为将 IDOC 发送到适配器。</span><span class="sxs-lookup"><span data-stu-id="0bf94-115">Sends an IDOC to the adapter as strongly-typed data.</span></span> <span data-ttu-id="0bf94-116">此操作在特定的节点下显示为每个 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-116">This operation is surfaced under a node specific to each IDOC.</span></span>  

- <span data-ttu-id="0bf94-117">**ReceiveIdoc**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-117">**ReceiveIdoc**.</span></span> <span data-ttu-id="0bf94-118">作为字符串数据从适配器接收 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-118">Receives an IDOC from the adapter as string data.</span></span> <span data-ttu-id="0bf94-119">直接在 IDOC 根节点下显示此操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-119">This operation is surfaced directly under the IDOC root node.</span></span> <span data-ttu-id="0bf94-120">相同的操作用于所有 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-120">The same operation is used for all IDOCs.</span></span>  

- <span data-ttu-id="0bf94-121">**接收**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-121">**Receive**.</span></span> <span data-ttu-id="0bf94-122">从适配器接收 IDOC 作为强类型化数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-122">Receives an IDOC from the adapter as strongly-typed data.</span></span> <span data-ttu-id="0bf94-123">此操作在特定的节点下显示为每个 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-123">This operation is surfaced under a node specific to each IDOC.</span></span>  

> [!NOTE]
>  <span data-ttu-id="0bf94-124">这些四个操作提供程序之间交换 Idoc 的不同的方式和[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="0bf94-124">These four operations provide different ways of exchanging IDOCs between your program and the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="0bf94-125">适配器始终使用 RFC （如在下一节中所述） 来发送或接收与 SAP 系统的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-125">The adapter always uses an RFC (as discussed in the next section) to send or receive IDOCs with the SAP system.</span></span>  

 <span data-ttu-id="0bf94-126">除了使用四个 IDOC 操作之一，还可以发送或接收 IDOC，通过在内部使用的 Rfc[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]交换与 SAP 系统的 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-126">In addition to using one of the four IDOC operations, you can also send or receive an IDOC by using one of the RFCs that are used internally by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to exchange IDOCs with the SAP system.</span></span> <span data-ttu-id="0bf94-127">有关如何概述[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持 Idoc，请参阅[sap 的 Idoc 的操作](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md)。</span><span class="sxs-lookup"><span data-stu-id="0bf94-127">For an overview of how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports IDOCs, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span>  

 <span data-ttu-id="0bf94-128">本主题包含有关消息架构和用于 IDOC 操作的消息操作的信息。</span><span class="sxs-lookup"><span data-stu-id="0bf94-128">This topic contains information about the message schemas and message actions used for IDOC operations.</span></span>  

## <a name="rfcs-used-by-the-sap-adapter-to-send-and-receive-idocs"></a><span data-ttu-id="0bf94-129">SAP 适配器用于发送和接收 Idoc 的 Rfc</span><span class="sxs-lookup"><span data-stu-id="0bf94-129">RFCs Used by the SAP Adapter to Send and Receive IDOCs</span></span>  
 <span data-ttu-id="0bf94-130">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]在内部使用以下远程函数调用 (Rfc) 来交换与 SAP 系统的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-130">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following remote function calls (RFCs) internally to exchange IDOCS with the SAP system.</span></span> <span data-ttu-id="0bf94-131">在出站端 （到 SAP 系统的适配器），适配器可充当 tRFC 客户端以调用 RFC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-131">On the outbound side (adapter to the SAP system), the adapter acts as a tRFC client to invoke the RFC.</span></span> <span data-ttu-id="0bf94-132">在入站端 (SAP 到适配器)，SAP 调用适配器，充当 tRFC 服务器上的 RFC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-132">On the inbound side (SAP to adapter), SAP invokes the RFC on the adapter, which acts as a tRFC server.</span></span>  

|<span data-ttu-id="0bf94-133">RFC</span><span class="sxs-lookup"><span data-stu-id="0bf94-133">RFC</span></span>|<span data-ttu-id="0bf94-134">Description</span><span class="sxs-lookup"><span data-stu-id="0bf94-134">Description</span></span>|  
|---------|-----------------|  
|<span data-ttu-id="0bf94-135">IDOC_INBOUND_ASYNCHRONOUS</span><span class="sxs-lookup"><span data-stu-id="0bf94-135">IDOC_INBOUND_ASYNCHRONOUS</span></span>|<span data-ttu-id="0bf94-136">从版本 4.0 及更高版本使用此函数模块。</span><span class="sxs-lookup"><span data-stu-id="0bf94-136">This function module is used from release 4.0 and later.</span></span> <span data-ttu-id="0bf94-137">在记录类型有效的 4.x 版本中，它处理 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-137">It processes IDOCS in record types that are valid for 4.x releases.</span></span> <span data-ttu-id="0bf94-138">这可确保支持较长的 IDOC 段名称。</span><span class="sxs-lookup"><span data-stu-id="0bf94-138">This ensures that longer IDOC segment names are supported.</span></span><br /><br /> <span data-ttu-id="0bf94-139">此 rfc 参数包括：</span><span class="sxs-lookup"><span data-stu-id="0bf94-139">The parameters to this RFC include:</span></span><br /><br /> <span data-ttu-id="0bf94-140">-idoc_control_rec_40 （SAP 结构是 EDI_DC40）</span><span class="sxs-lookup"><span data-stu-id="0bf94-140">- idoc_control_rec_40 (SAP structure is EDI_DC40)</span></span><br /><br /> <span data-ttu-id="0bf94-141">-idoc_data_rec_40 （SAP 结构是 EDI_DD40）</span><span class="sxs-lookup"><span data-stu-id="0bf94-141">- idoc_data_rec_40 (SAP structure is EDI_DD40)</span></span><br /><br /> <span data-ttu-id="0bf94-142">IDOC 控制记录包含以下字段：</span><span class="sxs-lookup"><span data-stu-id="0bf94-142">The IDOC control record consists of the following fields:</span></span><br /><br /> <span data-ttu-id="0bf94-143">- **Mestyp**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-143">- **Mestyp**.</span></span> <span data-ttu-id="0bf94-144">逻辑消息类型。</span><span class="sxs-lookup"><span data-stu-id="0bf94-144">The logical message type.</span></span> <span data-ttu-id="0bf94-145">传达消息的业务含义。</span><span class="sxs-lookup"><span data-stu-id="0bf94-145">Conveys the business meaning of the message.</span></span> <span data-ttu-id="0bf94-146">此字段是必需字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-146">This is a mandatory field.</span></span><br /><br /> <span data-ttu-id="0bf94-147">- **Idoctyp**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-147">- **Idoctyp**.</span></span> <span data-ttu-id="0bf94-148">IDOC 的基本结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-148">The basic structure of the IDOC.</span></span> <span data-ttu-id="0bf94-149">此字段标识使用此消息布局设置。</span><span class="sxs-lookup"><span data-stu-id="0bf94-149">This field identifies the layout set that uses this message.</span></span> <span data-ttu-id="0bf94-150">此字段是必需字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-150">This is a mandatory field.</span></span><br /><br /> <span data-ttu-id="0bf94-151">-                      **Cimtyp**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-151">-                      **Cimtyp**.</span></span> <span data-ttu-id="0bf94-152">客户扩展的结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-152">The structure of customer extension.</span></span> <span data-ttu-id="0bf94-153">如果 SAP 基础结构已扩展，客户必须为扩展插件的结构提供名称。</span><span class="sxs-lookup"><span data-stu-id="0bf94-153">If an SAP basic structure is extended, the customer must give a name to the structure of the extension.</span></span> <span data-ttu-id="0bf94-154">如果客户已增强功能; 这是必填字段否则为初始。</span><span class="sxs-lookup"><span data-stu-id="0bf94-154">This is a mandatory field if a customer has made an enhancement; otherwise initial.</span></span><br /><br /> <span data-ttu-id="0bf94-155">- **合作伙伴字段**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-155">- **Partner fields**.</span></span> <span data-ttu-id="0bf94-156">这是发送端，接收方合作伙伴参数，如合作伙伴类型、 合作伙伴数量合作伙伴函数。</span><span class="sxs-lookup"><span data-stu-id="0bf94-156">These are send side and receive side partner parameters such as partner type, partner number, partner function.</span></span><br /><br /> <span data-ttu-id="0bf94-157">IDOC 数据记录包含以下字段：</span><span class="sxs-lookup"><span data-stu-id="0bf94-157">The IDOC data record consists of the following fields:</span></span><br /><br /> <span data-ttu-id="0bf94-158">- **标头字段**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-158">- **Header fields**.</span></span> <span data-ttu-id="0bf94-159">分段标头字段，例如表名称、 段数量的段类型。</span><span class="sxs-lookup"><span data-stu-id="0bf94-159">Segment header fields like table name, segment number, segment type.</span></span> <span data-ttu-id="0bf94-160">这些是必填字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-160">These are mandatory fields.</span></span><br /><br /> <span data-ttu-id="0bf94-161">-                      **Sdata**。</span><span class="sxs-lookup"><span data-stu-id="0bf94-161">-                      **Sdata**.</span></span> <span data-ttu-id="0bf94-162">1000 字节字符所使用的 IDOC 数据字段。这是必填字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-162">1000-byte character field for the data used by the IDOC .This is a mandatory field.</span></span>|  
|<span data-ttu-id="0bf94-163">INBOUND_IDOC_PROCESS</span><span class="sxs-lookup"><span data-stu-id="0bf94-163">INBOUND_IDOC_PROCESS</span></span>|<span data-ttu-id="0bf94-164">此函数模块用于 4.0 的版本。</span><span class="sxs-lookup"><span data-stu-id="0bf94-164">This function module is used for releases up to 4.0.</span></span> <span data-ttu-id="0bf94-165">在记录类型有效的 3.x 版本中，它处理 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-165">It processes IDOCS in record types that are valid for 3.x releases.</span></span> <span data-ttu-id="0bf94-166">还有可能要在 4.x 中使用此函数模块。</span><span class="sxs-lookup"><span data-stu-id="0bf94-166">It is also possible to use this function module in 4.x.</span></span><br /><br /> <span data-ttu-id="0bf94-167">此 rfc 参数包括：</span><span class="sxs-lookup"><span data-stu-id="0bf94-167">The parameters to this RFC include:</span></span><br /><br /> <span data-ttu-id="0bf94-168">-idoc_control （SAP 结构是 EDI_DC）</span><span class="sxs-lookup"><span data-stu-id="0bf94-168">- idoc_control (SAP structure is EDI_DC)</span></span><br /><br /> <span data-ttu-id="0bf94-169">-idoc_data （SAP 结构是 EDI_DD）</span><span class="sxs-lookup"><span data-stu-id="0bf94-169">- idoc_data (SAP structure is EDI_DD)</span></span>|  

## <a name="operations-to-send-idocs"></a><span data-ttu-id="0bf94-170">操作以发送 Idoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-170">Operations to Send IDOCs</span></span>  
 <span data-ttu-id="0bf94-171">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]公开客户端将 Idoc 发送到 SAP 系统的发送和 SendIdoc 操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-171">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] exposes the Send and SendIdoc operations for clients to send IDOCs to an SAP system.</span></span> <span data-ttu-id="0bf94-172">发送操作 IDOC 表示为强类型化数据;SendIdoc 操作 IDOC 表示为字符串数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-172">For the Send operation, the IDOC is represented as strongly-typed data; for the SendIdoc operation, the IDOC is represented as string data.</span></span> <span data-ttu-id="0bf94-173">这些操作确定 IDOC 数据适配器与你的应用程序之间的表示方式。</span><span class="sxs-lookup"><span data-stu-id="0bf94-173">These operations determine how the IDOC data is represented between the adapter and your application.</span></span> <span data-ttu-id="0bf94-174">适配器始终会向 SAP 的 Idoc 使用 IDOC_INBOUND_ASYNCHRONOUS 或 IDOC_INBOUND_PROCESS (t) RFC 发送。</span><span class="sxs-lookup"><span data-stu-id="0bf94-174">The adapter always sends IDOCs to SAP by using either the IDOC_INBOUND_ASYNCHRONOUS or the IDOC_INBOUND_PROCESS (t)RFC.</span></span> <span data-ttu-id="0bf94-175">若要将 IDOC 发送到 SAP 系统，您可以使用发送或 SendIdoc 操作，也可直接调用相应的 RFC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-175">To send an IDOC to your SAP system, you can either use the Send or SendIdoc operation, or you can directly invoke the appropriate RFC.</span></span>  

### <a name="message-structures-for-idoc-client-operations"></a><span data-ttu-id="0bf94-176">IDOC 客户端操作的消息结构</span><span class="sxs-lookup"><span data-stu-id="0bf94-176">Message Structures for IDOC Client Operations</span></span>  
 <span data-ttu-id="0bf94-177">下表显示了发送和 SendIdoc 操作的消息结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-177">The following table shows the message structures for the Send and SendIdoc operations.</span></span>  


|     <span data-ttu-id="0bf94-178">运算</span><span class="sxs-lookup"><span data-stu-id="0bf94-178">Operation</span></span>     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="0bf94-179">XML 结构</span><span class="sxs-lookup"><span data-stu-id="0bf94-179">XML Structure</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="0bf94-180">Description</span><span class="sxs-lookup"><span data-stu-id="0bf94-180">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                   |
|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       <span data-ttu-id="0bf94-181">Send</span><span class="sxs-lookup"><span data-stu-id="0bf94-181">Send</span></span>        | `<Send xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/                    [CIMTYP]/[RELNO]/Send">   <idocData>     <[EDI_DC40/EDI_DC] xmlns="/Types/Idoc/      [VERSION]/[IDOCTYP]/[CIMTYP]/[RELNO]">       <EDIDC_FIELD1>value1</ EDIDC_FIELD1>       <EDIDC_FIELD2>value2</ EDIDC_FIELD2>       …     </EDI_DC40>     <[SEGMENT_DEFN]_1>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_1>     <[SEGMENT_DEFN]_2>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_2>     …     </[EDI_DC40/EDI_DC]>   </idocData>   <guid>guid</guid> </Send>` |                                               <span data-ttu-id="0bf94-182">将强类型化的 IDOC 发送到 SAP</span><span class="sxs-lookup"><span data-stu-id="0bf94-182">Sends a strongly-typed IDOC to SAP</span></span><br /><br /> <span data-ttu-id="0bf94-183">-IDOC 架构是强类型化。</span><span class="sxs-lookup"><span data-stu-id="0bf94-183">- IDOC schema is strongly-typed.</span></span><br /><br /> <span data-ttu-id="0bf94-184">-公开控制记录字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-184">- Exposes control record fields.</span></span><br /><br /> <span data-ttu-id="0bf94-185">-公开包括段标头和段字段的数据记录字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-185">- Exposes data record fields including segment headers and segment fields.</span></span><br /><br /> <span data-ttu-id="0bf94-186">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将 GUID 与 SAP 事务 ID (TID)，它使用以将 IDOC 发送相关联。</span><span class="sxs-lookup"><span data-stu-id="0bf94-186">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] associates a GUID with the SAP transaction ID (TID) that it uses to send the IDOC.</span></span> <span data-ttu-id="0bf94-187">您可以选择是否要在请求消息中指定的 GUID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-187">You can choose whether to specify a GUID in the request message.</span></span> <span data-ttu-id="0bf94-188">如果请求消息中不包含 GUID[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]生成一个密钥。</span><span class="sxs-lookup"><span data-stu-id="0bf94-188">If a GUID is not included in the request message, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] generates one.</span></span> <span data-ttu-id="0bf94-189">响应消息中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-189">The GUID is returned in the response message.</span></span>                                                |
|   <span data-ttu-id="0bf94-190">发送响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-190">Send Response</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         `<SendResponse xmlns="[MSG_VERSION]/Idoc/[VERSION]/         [IDOCTYP]/[CIMTYP]/[RELNO]/Send">   <guid>guid</guid> </SendResponse>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | <span data-ttu-id="0bf94-191">指示具有已对 IDOC 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="0bf94-191">Indicates that the IDOC has been sent to the SAP system.</span></span><br /><br /> <span data-ttu-id="0bf94-192">如果**AutoConfirmSentIdocs**绑定属性是**true**，则[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]自动确认 SAP 系统上的事务，可以忽略响应中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-192">If the **AutoConfirmSentIdocs** binding property is **true**, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] automatically confirms the transaction on the SAP system, and you can ignore the GUID returned in the response.</span></span> <span data-ttu-id="0bf94-193">如果**AutoConfirmSentIdocs**绑定属性是**false**，必须调用**RfcConfirmTransID**具有 GUID 的操作返回的[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]到完成 SAP 系统上的事务。</span><span class="sxs-lookup"><span data-stu-id="0bf94-193">If the **AutoConfirmSentIdocs** binding property is **false**, you must invoke the **RfcConfirmTransID** operation with the GUID returned by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to complete the transaction on the SAP system.</span></span><br /><br /> <span data-ttu-id="0bf94-194">可以调用**SapAdapterUtilities.ConvertGuidToTid**与工作 (LUW) 的逻辑单元关联的方法来获取 TID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-194">You can invoke the **SapAdapterUtilities.ConvertGuidToTid** method to obtain the TID associated with the logical unit of work (LUW).</span></span> |
|     <span data-ttu-id="0bf94-195">SendIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-195">SendIdoc</span></span>      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    `<SendIdoc xmlns="[MSG_VERSION]/Idoc">   <idocData>docDataString</idocData>   <guid>guid</guid> </SendIdoc>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                   <span data-ttu-id="0bf94-196">向 SAP 发送弱类型的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-196">Sends a weakly-typed IDOC to SAP.</span></span><br /><br /> <span data-ttu-id="0bf94-197">-IDOC 架构是弱类型。</span><span class="sxs-lookup"><span data-stu-id="0bf94-197">- IDOC schema is weakly-typed.</span></span><br /><br /> <span data-ttu-id="0bf94-198">-公开为控制记录和数据记录组成的单个字符串字段的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-198">- Exposes the IDOC as a single string field that consists of the control record and data record.</span></span><br /><br /> <span data-ttu-id="0bf94-199">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将 GUID 与 SAP TID，它使用以将 IDOC 发送相关联。</span><span class="sxs-lookup"><span data-stu-id="0bf94-199">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] associates a GUID with the SAP TID that it uses to send the IDOC.</span></span> <span data-ttu-id="0bf94-200">您可以选择是否要在请求消息中指定的 GUID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-200">You can choose whether to specify a GUID in the request message.</span></span> <span data-ttu-id="0bf94-201">如果请求消息中不包含 GUID[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]将生成一个。</span><span class="sxs-lookup"><span data-stu-id="0bf94-201">If a GUID is not included in the request message, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] will generate one.</span></span> <span data-ttu-id="0bf94-202">响应消息中返回的 GUID</span><span class="sxs-lookup"><span data-stu-id="0bf94-202">The GUID is returned in the response message</span></span>                                                                    |
| <span data-ttu-id="0bf94-203">SendIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-203">SendIdoc Response</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              `<SendIdocResponse xmlns="[MSG_VERSION]/Idoc">   <guid>guid</guid> </SendIdocResponse>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |             <span data-ttu-id="0bf94-204">指示具有已对 IDOC 发送到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="0bf94-204">Indicates that the IDOC has been sent to the SAP system.</span></span><br /><br /> <span data-ttu-id="0bf94-205">如果**AutoConfirmSentIdocs**绑定属性是**true**，则[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]自动确认 SAP 系统上的事务，可以忽略响应中返回的 GUID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-205">If the **AutoConfirmSentIdocs** binding property is **true**, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] automatically confirms the transaction on the SAP system, and you can ignore the GUID returned in the response.</span></span> <span data-ttu-id="0bf94-206">如果**AutoConfirmSentIdocs**绑定属性是**false**，必须调用**RfcConfirmTransID**具有 GUID 的操作返回的[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]到完成 SAP 系统上的事务。</span><span class="sxs-lookup"><span data-stu-id="0bf94-206">If the **AutoConfirmSentIdocs** binding property is **false**, you must invoke the **RfcConfirmTransID** operation with the GUID returned by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]to complete the transaction on the SAP system.</span></span><br /><br /> <span data-ttu-id="0bf94-207">可以调用**SapAdapterUtilities.ConvertGuidToTid** LUW 与关联的方法来获取 TID。</span><span class="sxs-lookup"><span data-stu-id="0bf94-207">You can invoke the **SapAdapterUtilities.ConvertGuidToTid** method to obtain the TID associated with the LUW.</span></span>             |

 <span data-ttu-id="0bf94-208">[MSG_VERSION] = 消息版本字符串;例如， http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="0bf94-208">[MSG_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  

 <span data-ttu-id="0bf94-209">[VERSION] = （2 或 3） 的 IDOC 版本。</span><span class="sxs-lookup"><span data-stu-id="0bf94-209">[VERSION] = IDOC release version (2 or 3).</span></span>  

 <span data-ttu-id="0bf94-210">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="0bf94-210">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  

 <span data-ttu-id="0bf94-211">[CIMTYP] = Cimtype 的自定义 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-211">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  

 <span data-ttu-id="0bf94-212">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="0bf94-212">[RELNO] = Release number; for example, 620.</span></span>  

 <span data-ttu-id="0bf94-213">[EDI_DC40/EDI_DC] = EDI_DC40 版发布的版本 3 Idoc 和为 EDI_DC version2 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-213">[EDI_DC40/EDI_DC]  = EDI_DC40 for release version 3 IDOCs and EDI_DC for release version2 IDOCs.</span></span>  

 <span data-ttu-id="0bf94-214">[EDIDC_FIELD] = 构成 EDI_DC40/EDI_DC 控制记录结构的字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-214">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure.</span></span>  

 <span data-ttu-id="0bf94-215">[SEGMENT_DEFN] = 段定义名称 （不段类型名称）;例如，E2EDK01005。</span><span class="sxs-lookup"><span data-stu-id="0bf94-215">[SEGMENT_DEFN] = Segment definition name (NOT segment type name); for example, E2EDK01005.</span></span> <span data-ttu-id="0bf94-216">请注意，也可能会段定义节点显示下一个段组节点中，基于的 IDOC 的结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-216">Note that the segment definition node could also appear under a segment group node, based on the structure of the IDOC.</span></span>  

 <span data-ttu-id="0bf94-217">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = 每个段具有包含一组标准的跟段数据的标头字段的段标头。</span><span class="sxs-lookup"><span data-stu-id="0bf94-217">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="0bf94-218">段数据包含的所有段字段和数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-218">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="0bf94-219">此节点表示的段标头字段;例如，DATAHEADERCOLUMN_SEGNAM。</span><span class="sxs-lookup"><span data-stu-id="0bf94-219">This node represents the segment header fields; for example, DATAHEADERCOLUMN_SEGNAM.</span></span>  

 <span data-ttu-id="0bf94-220">[SEG_FIELD] = 构成特定段定义 [SEGMENT_DEFN] 段字段名称。</span><span class="sxs-lookup"><span data-stu-id="0bf94-220">[SEG_FIELD] = Segment field name constituting a particular segment definition [SEGMENT_DEFN].</span></span>  

 <span data-ttu-id="0bf94-221">[guid] = GUID 参数。</span><span class="sxs-lookup"><span data-stu-id="0bf94-221">[guid] = GUID parameter.</span></span>  

### <a name="message-actions-for-idoc-client-operations"></a><span data-ttu-id="0bf94-222">IDOC 客户端操作的消息操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-222">Message Actions for IDOC Client Operations</span></span>  
 <span data-ttu-id="0bf94-223">下表显示了发送和 SendIdoc 操作的消息操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-223">The following table shows the message actions for the Send and SendIdoc operations.</span></span>  


|     <span data-ttu-id="0bf94-224">运算</span><span class="sxs-lookup"><span data-stu-id="0bf94-224">Operation</span></span>     |                                   <span data-ttu-id="0bf94-225">操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-225">Action</span></span>                                   |                                   <span data-ttu-id="0bf94-226">示例</span><span class="sxs-lookup"><span data-stu-id="0bf94-226">Example</span></span>                                   |
|-------------------|----------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|       <span data-ttu-id="0bf94-227">Send</span><span class="sxs-lookup"><span data-stu-id="0bf94-227">Send</span></span>        |     <span data-ttu-id="0bf94-228">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send</span><span class="sxs-lookup"><span data-stu-id="0bf94-228">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send</span></span>      |     http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send      |
|   <span data-ttu-id="0bf94-229">发送响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-229">Send Response</span></span>   | <span data-ttu-id="0bf94-230">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send/response</span><span class="sxs-lookup"><span data-stu-id="0bf94-230">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Send/response</span></span> | http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Send/response |
|     <span data-ttu-id="0bf94-231">SendIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-231">SendIdoc</span></span>      |                      <span data-ttu-id="0bf94-232">[MESSAGE_VERSION]/Idoc/SendIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-232">[MESSAGE_VERSION]/Idoc/SendIdoc</span></span>                       |           http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc            |
| <span data-ttu-id="0bf94-233">SendIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-233">SendIdoc Response</span></span> |                  <span data-ttu-id="0bf94-234">[MESSAGE_VERSION]/Idoc/SendIdoc/response</span><span class="sxs-lookup"><span data-stu-id="0bf94-234">[MESSAGE_VERSION]/Idoc/SendIdoc/response</span></span>                  |       http://Microsoft.LobServices.Sap/2007/03/Idoc/SendIdoc/response       |

 <span data-ttu-id="0bf94-235">[MESSAGE_VERSION] = 消息版本字符串;例如， http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="0bf94-235">[MESSAGE_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  

 <span data-ttu-id="0bf94-236">[VERSION] = （2 或 3） 的 IDOC 版本。</span><span class="sxs-lookup"><span data-stu-id="0bf94-236">[VERSION] = IDOC release version (2 or 3).</span></span>  

 <span data-ttu-id="0bf94-237">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="0bf94-237">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  

 <span data-ttu-id="0bf94-238">[CIMTYP] = Cimtype 的自定义 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-238">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  

 <span data-ttu-id="0bf94-239">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="0bf94-239">[RELNO] = Release number; for example, 620.</span></span>  

## <a name="operations-to-receive-idocs"></a><span data-ttu-id="0bf94-240">用于接收 Idoc 的操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-240">Operations to Receive IDOCs</span></span>  
 <span data-ttu-id="0bf94-241">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]公开应用程序用于从 SAP 系统接收 Idoc 的接收和 ReceiveIdoc 操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-241">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] exposes the Receive and ReceiveIdoc operations for applications to receive IDOCs from an SAP system.</span></span> <span data-ttu-id="0bf94-242">对于接收操作，IDOC 表示为强类型化数据;ReceiveIdoc 操作 IDOC 表示为字符串数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-242">For the Receive operation, the IDOC is represented as strongly-typed data; for the ReceiveIdoc operation, the IDOC is represented as string data.</span></span>  

 <span data-ttu-id="0bf94-243">这些操作确定如何将适配器添加到你的应用程序发出的 IDOC 数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-243">These operations determine how the IDOC data is emitted by the adapter to your application.</span></span> <span data-ttu-id="0bf94-244">适配器始终会从 SAP 系统的 Idoc 的 IDOC_INBOUND_ASYNCHRONOUS 或 IDOC_INBOUND_PROCESS tRFC 作为接收。</span><span class="sxs-lookup"><span data-stu-id="0bf94-244">The adapter always receives IDOCs from the SAP system as either an IDOC_INBOUND_ASYNCHRONOUS or IDOC_INBOUND_PROCESS tRFC.</span></span> <span data-ttu-id="0bf94-245">您可以使用 Receive 或 ReceiveIdoc 操作，也可以采用 RFC 格式接收 IDOC 数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-245">You can either use the Receive or ReceiveIdoc operation, or you can receive IDOC data in RFC format.</span></span> <span data-ttu-id="0bf94-246">您设置**ReceiveIdocFormat**绑定属性来指定在其中适配器发出到你的应用程序的 IDOC 数据的格式。</span><span class="sxs-lookup"><span data-stu-id="0bf94-246">You set the **ReceiveIdocFormat** binding property to specify the format in which the adapter emits the IDOC data to your application.</span></span> <span data-ttu-id="0bf94-247">有关详细信息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]绑定属性，请参阅[了解关于 BizTalk Adapter for mySAP Business Suite 绑定属性](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="0bf94-247">For more information about the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] binding properties, see [Read about BizTalk Adapter for mySAP Business Suite binding properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  

### <a name="message-structures-for-idoc-receive-operations"></a><span data-ttu-id="0bf94-248">IDOC 的消息结构接收操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-248">Message Structures for IDOC Receive Operations</span></span>  
 <span data-ttu-id="0bf94-249">下表显示了接收和 ReceiveIdoc 操作的消息结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-249">The following table shows the message structures for the Receive and ReceiveIdoc operations.</span></span>  

|<span data-ttu-id="0bf94-250">运算</span><span class="sxs-lookup"><span data-stu-id="0bf94-250">Operation</span></span>|<span data-ttu-id="0bf94-251">XML 结构</span><span class="sxs-lookup"><span data-stu-id="0bf94-251">XML Structure</span></span>|<span data-ttu-id="0bf94-252">Description</span><span class="sxs-lookup"><span data-stu-id="0bf94-252">Description</span></span>|  
|---------------|-------------------|-----------------|  
|<span data-ttu-id="0bf94-253">Receive</span><span class="sxs-lookup"><span data-stu-id="0bf94-253">Receive</span></span>|`<Receive xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/                 [CIMTYP]/[RELNO]/Receive">   <idocData>     <[EDI_DC40/EDI_DC] xmlns="/Types/Idoc/      [VERSION]/[IDOCTYP]/[CIMTYP]/[RELNO]">       <EDIDC_FIELD1>value1</ EDIDC_FIELD1>       <EDIDC_FIELD2>value2</ EDIDC_FIELD2>       …     </EDI_DC40>     <[SEGMENT_DEFN]_1>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_1>     <[SEGMENT_DEFN]_2>       <[DATAHEADERCOLUMN_[SEGHDR_FLD1]>         header_value_1       </[DATAHEADERCOLUMN_[SEGHDR_FLD1]>       <[DATAHEADERCOLUMN_[SEGHDR_FLD2]>         header_value_2       </[DATAHEADERCOLUMN_[SEGHDR_FLD2]>       …       <SEG_FIELD1>value1</SEG_FIELD1>       <SEG_FIELD2>value2</SEG_FIELD2>       …     </[SEGMENT_DEFN]_2>     …     </[EDI_DC40/EDI_DC]>   </idocData> </Receive>`|<span data-ttu-id="0bf94-254">从 SAP 接收强类型化的 IDOC</span><span class="sxs-lookup"><span data-stu-id="0bf94-254">Receives a strongly-typed IDOC from SAP</span></span><br /><br /> <span data-ttu-id="0bf94-255">-IDOC 架构是强类型化。</span><span class="sxs-lookup"><span data-stu-id="0bf94-255">- IDOC schema is strongly-typed.</span></span><br /><br /> <span data-ttu-id="0bf94-256">-公开控制记录字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-256">- Exposes control record fields.</span></span><br /><br /> <span data-ttu-id="0bf94-257">-公开包括段标头和段字段的数据记录字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-257">- Exposes data record fields including segment headers and segment fields.</span></span>|  
|<span data-ttu-id="0bf94-258">接收响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-258">Receive Response</span></span>|`<ReceiveResponse xmlns="[MSG_VERSION]/Idoc/[VERSION]/[IDOCTYP]/         [CIMTYP]/[RELNO]/Receive"> </ReceiveResponse>`|<span data-ttu-id="0bf94-259">指示已从 SAP 系统接收了 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-259">Indicates that the IDOC has been received from the SAP system.</span></span>|  
|<span data-ttu-id="0bf94-260">ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-260">ReceiveIdoc</span></span>|`<ReceiveIdoc xmlns="[MSG_VERSION]/Idoc">   <idocData>docDataString</idocData> </ReceiveIdoc>`|<span data-ttu-id="0bf94-261">从 SAP 接收弱类型的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-261">Receives a weakly-typed IDOC from SAP.</span></span><br /><br /> <span data-ttu-id="0bf94-262">-IDOC 架构是弱类型。</span><span class="sxs-lookup"><span data-stu-id="0bf94-262">- IDOC schema is weakly-typed.</span></span><br /><br /> <span data-ttu-id="0bf94-263">-公开为控制记录和数据记录组成的单个字符串字段的 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-263">- Exposes the IDOC as a single string field that consists of the control record and data record.</span></span>|  
|<span data-ttu-id="0bf94-264">ReceiveIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-264">ReceiveIdoc Response</span></span>|`<ReceiveIdocResponse xmlns="[MSG_VERSION]/Idoc"> </ReceiveIdocResponse>`|<span data-ttu-id="0bf94-265">指示已从 SAP 系统接收了 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-265">Indicates that the IDOC has been received from the SAP system.</span></span>|  

 <span data-ttu-id="0bf94-266">[MSG_VERSION] = 消息版本字符串;例如， http://Microsoft.LobServices.Sap/2007/03。</span><span class="sxs-lookup"><span data-stu-id="0bf94-266">[MSG_VERSION] = The message version string; for example, http://Microsoft.LobServices.Sap/2007/03.</span></span>  

 <span data-ttu-id="0bf94-267">[VERSION] = （2 或 3） 的 IDOC 版本。</span><span class="sxs-lookup"><span data-stu-id="0bf94-267">[VERSION] = IDOC release version (2 or 3).</span></span>  

 <span data-ttu-id="0bf94-268">[IDOCTYP] = IDOC 类型;例如，ORDERS05。</span><span class="sxs-lookup"><span data-stu-id="0bf94-268">[IDOCTYP] = IDOC type; for example, ORDERS05.</span></span>  

 <span data-ttu-id="0bf94-269">[CIMTYP] = Cimtype 的自定义 IDOC。</span><span class="sxs-lookup"><span data-stu-id="0bf94-269">[CIMTYP] = Cimtype of the customized IDOC.</span></span>  

 <span data-ttu-id="0bf94-270">[RELNO] = 发行版号;例如，620。</span><span class="sxs-lookup"><span data-stu-id="0bf94-270">[RELNO] = Release number; for example, 620.</span></span>  

 <span data-ttu-id="0bf94-271">[EDI_DC40/EDI_DC] = EDI_DC40 版发布的版本 3 Idoc 和 EDI_DC 为版本 2 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-271">[EDI_DC40/EDI_DC]  = EDI_DC40 for release version 3 IDOCs and EDI_DC for release version 2 IDOCs.</span></span>  

 <span data-ttu-id="0bf94-272">[EDIDC_FIELD] = 构成 EDI_DC40/EDI_DC 控制记录结构的字段。</span><span class="sxs-lookup"><span data-stu-id="0bf94-272">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure.</span></span>  

 <span data-ttu-id="0bf94-273">[SEGMENT_DEFN] = 段定义名称 （不段类型名称）;例如，E2EDK01005。</span><span class="sxs-lookup"><span data-stu-id="0bf94-273">[SEGMENT_DEFN] = Segment definition name (NOT segment type name); for example, E2EDK01005.</span></span> <span data-ttu-id="0bf94-274">段定义节点也可以基于该结构的 IDOC 的段组节点下显示。</span><span class="sxs-lookup"><span data-stu-id="0bf94-274">The segment definition node can also appear under a segment group node, based on the structure of the IDOC.</span></span>  

 <span data-ttu-id="0bf94-275">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = 每个段具有包含一组标准的跟段数据的标头字段的段标头。</span><span class="sxs-lookup"><span data-stu-id="0bf94-275">[DATAHEADERCOLUMN_(SEGHDR_FLD)] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="0bf94-276">段数据包含的所有段字段和数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-276">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="0bf94-277">此节点表示的段标头字段;例如，DATAHEADERCOLUMN_SEGNAM。</span><span class="sxs-lookup"><span data-stu-id="0bf94-277">This node represents the segment header fields; for example, DATAHEADERCOLUMN_SEGNAM.</span></span>  

 <span data-ttu-id="0bf94-278">[SEG_FIELD] = 构成特定段定义 [SEGMENT_DEFN] 段字段名称。</span><span class="sxs-lookup"><span data-stu-id="0bf94-278">[SEG_FIELD] = Segment field name constituting a particular segment definition [SEGMENT_DEFN].</span></span>  

#### <a name="receiving-an-idoc-in-rfc-format"></a><span data-ttu-id="0bf94-279">RFC 格式接收 IDOC</span><span class="sxs-lookup"><span data-stu-id="0bf94-279">Receiving an IDOC in RFC Format</span></span>  
 <span data-ttu-id="0bf94-280">此外可以在 RFC 格式接收 Idoc。</span><span class="sxs-lookup"><span data-stu-id="0bf94-280">You can also receive IDocs in RFC format.</span></span> <span data-ttu-id="0bf94-281">用于从 SAP 接收 Idoc 的 Rfc 是：</span><span class="sxs-lookup"><span data-stu-id="0bf94-281">The RFCs used to receive IDOCs from SAP are:</span></span>  

- <span data-ttu-id="0bf94-282">版本 3 idoc IDOC_INBOUND_ASYNCHRONOUS。</span><span class="sxs-lookup"><span data-stu-id="0bf94-282">IDOC_INBOUND_ASYNCHRONOUS for version 3 IDOCs.</span></span>  

- <span data-ttu-id="0bf94-283">版本 2 idoc INBOUND_IDOC_PROCESS。</span><span class="sxs-lookup"><span data-stu-id="0bf94-283">INBOUND_IDOC_PROCESS for version 2 IDOCs.</span></span>  

  <span data-ttu-id="0bf94-284">下面的代码演示 IDOC_INBOUND_ASYNCHRONOUS 操作的形式收到的 IDOC 的结构。</span><span class="sxs-lookup"><span data-stu-id="0bf94-284">The following code shows the structure of an IDOC received as an IDOC_INBOUND_ASYNCHRONOUS operation.</span></span>  

```  
<IDOC_INBOUND_ASYNCHRONOUS xmlns="http://Microsoft.LobServices.Sap/2007/03/Rfc/">  
  <IDOC_CONTROL_REC_40>  
    <EDI_DC40 xmlns="http://Microsoft.LobServices.Sap/2007/03/Types/Rfc/">  
      <EDIDC_FIELD1>field1</EDIDC_FIELD1>  
      <EDIDC_FIELD2>field2</EDIDC_FIELD2>  
      …  
    </EDI_DC40>  
  <IDOC_DATA_REC_40>  
    <EDI_DD40 xmlns="http://Microsoft.LobServices.Sap/2007/03/Types/Rfc/">  
      <[SEG_HEADER_FIELD1]>value1</[SEG_HEADER_FIELD1]>  
      <[SEG_HEADER_FIELD2]>value2</[SEG_HEADER_FIELD2]>  
      …  
      <SDATA>segment value</SDATA>  
    </EDI_DD40>  
    …  
  </IDOC_DATA_REC_40>  
</IDOC_INBOUND_ASYNCHRONOUS>  
```  

 <span data-ttu-id="0bf94-285">[EDIDC_FIELD] = 字段构成 EDI_DC40/EDI_DC 控制记录结构</span><span class="sxs-lookup"><span data-stu-id="0bf94-285">[EDIDC_FIELD] = Field constituting the EDI_DC40/EDI_DC control record structure</span></span>  

 <span data-ttu-id="0bf94-286">[SEG_HEADER_FIELD] = 每个段具有包含一组标准的跟段数据的标头字段的段标头。</span><span class="sxs-lookup"><span data-stu-id="0bf94-286">[SEG_HEADER_FIELD] = Each segment has a segment header that consists of a standard set of header fields followed by the segment data.</span></span> <span data-ttu-id="0bf94-287">段数据包含的所有段字段和数据。</span><span class="sxs-lookup"><span data-stu-id="0bf94-287">The segment data consists of all segment fields and data.</span></span> <span data-ttu-id="0bf94-288">此节点表示的段标头字段;例如，SEGNAM、 MANDT 和 DOCNUM。</span><span class="sxs-lookup"><span data-stu-id="0bf94-288">This node represents the segment header fields; for example, SEGNAM, MANDT, and DOCNUM.</span></span>  

 <span data-ttu-id="0bf94-289">TRFC 操作的格式的详细信息，请参阅[tRFC 操作的消息架构](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="0bf94-289">For more information about the format of tRFC operations, see [Message Schemas for tRFC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-trfc-operations.md).</span></span>  

### <a name="message-actions-for-idoc-receive-operations"></a><span data-ttu-id="0bf94-290">IDOC 的消息操作接收操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-290">Message Actions for IDOC Receive Operations</span></span>  
 <span data-ttu-id="0bf94-291">下表显示了接收和 ReceiveIdoc 操作的消息操作。</span><span class="sxs-lookup"><span data-stu-id="0bf94-291">The following table shows the message actions for the Receive and ReceiveIdoc operations.</span></span>  


|      <span data-ttu-id="0bf94-292">运算</span><span class="sxs-lookup"><span data-stu-id="0bf94-292">Operation</span></span>       |                                    <span data-ttu-id="0bf94-293">操作</span><span class="sxs-lookup"><span data-stu-id="0bf94-293">Action</span></span>                                     |                                    <span data-ttu-id="0bf94-294">示例</span><span class="sxs-lookup"><span data-stu-id="0bf94-294">Example</span></span>                                     |
|----------------------|-------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|       <span data-ttu-id="0bf94-295">Receive</span><span class="sxs-lookup"><span data-stu-id="0bf94-295">Receive</span></span>        |     <span data-ttu-id="0bf94-296">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive</span><span class="sxs-lookup"><span data-stu-id="0bf94-296">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive</span></span>      |     http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive      |
|   <span data-ttu-id="0bf94-297">接收响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-297">Receive Response</span></span>   | <span data-ttu-id="0bf94-298">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive/response</span><span class="sxs-lookup"><span data-stu-id="0bf94-298">[MESSAGE_VERSION]/Idoc/[VERSION] /[IDOCTYP]/[CIMTYP]/[RELNO]/Receive/response</span></span> | http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS05//620/Receive/response |
|     <span data-ttu-id="0bf94-299">ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-299">ReceiveIdoc</span></span>      |                      <span data-ttu-id="0bf94-300">[MESSAGE_VERSION]/Idoc/ReceiveIdoc</span><span class="sxs-lookup"><span data-stu-id="0bf94-300">[MESSAGE_VERSION]/Idoc/ReceiveIdoc</span></span>                       |           http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc            |
| <span data-ttu-id="0bf94-301">ReceiveIdoc 响应</span><span class="sxs-lookup"><span data-stu-id="0bf94-301">ReceiveIdoc Response</span></span> |                  <span data-ttu-id="0bf94-302">[MESSAGE_VERSION]/Idoc/ReceiveIdoc/response</span><span class="sxs-lookup"><span data-stu-id="0bf94-302">[MESSAGE_VERSION]/Idoc/ReceiveIdoc/response</span></span>                  |       http://Microsoft.LobServices.Sap/2007/03/Idoc/ReceiveIdoc/response       |

