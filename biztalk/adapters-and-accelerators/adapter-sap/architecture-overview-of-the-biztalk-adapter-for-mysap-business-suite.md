---
title: 为 mySAP Business Suite 的 BizTalk 适配器的体系结构概述 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- architecture of SAP adapter
- adapters, architecture
ms.assetid: 1b45edb0-2476-427b-b6cd-41e38ed815e0
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d571cdd3beea2bc9a57ec7ad15f865e7ef51e53a
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/23/2018
ms.locfileid: "22218413"
---
# <a name="architecture-overview-of-the-biztalk-adapter-for-mysap-business-suite"></a><span data-ttu-id="6b014-102">为 mySAP Business Suite 的 BizTalk 适配器的体系结构概述</span><span class="sxs-lookup"><span data-stu-id="6b014-102">Architecture overview of the BizTalk Adapter for mySAP Business Suite</span></span>
<span data-ttu-id="6b014-103">[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]实现[!INCLUDE[firstref_btsWinCommFoundation](../../includes/firstref-btswincommfoundation-md.md)]自定义绑定，其中包含单个自定义传输绑定元素，可实现与 SAP 系统的通信。</span><span class="sxs-lookup"><span data-stu-id="6b014-103">The [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] implements a [!INCLUDE[firstref_btsWinCommFoundation](../../includes/firstref-btswincommfoundation-md.md)] custom binding, which contains a single custom transport binding element that enables communication with an SAP system.</span></span> <span data-ttu-id="6b014-104">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]由包装[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]运行时，向应用程序可以通过公开[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通道体系结构。</span><span class="sxs-lookup"><span data-stu-id="6b014-104">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] is wrapped by the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] runtime and is exposed to applications through the [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel architecture.</span></span> <span data-ttu-id="6b014-105">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]与通过 SAP Unicode RFC SDK (librfc32u.dll) 的 64 位或 32 位版本的 SAP 系统进行通信。</span><span class="sxs-lookup"><span data-stu-id="6b014-105">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] communicates with the SAP system through either the 64-bit or 32-bit version of the SAP Unicode RFC SDK (librfc32u.dll).</span></span> 

<span data-ttu-id="6b014-106">下图显示了通过使用开发的解决方案的端到端体系结构[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-106">The following figure shows the end-to-end architecture for solutions that are developed by using the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
 <span data-ttu-id="6b014-107">![SAP 结束&#45;到&#45;结束体系结构](../../adapters-and-accelerators/adapter-sap/media/9ba0c31f-90df-444d-8192-42743c893d51.gif "9ba0c31f-90df-444d-8192-42743c893d51")</span><span class="sxs-lookup"><span data-stu-id="6b014-107">![SAP End&#45;to&#45;End Architecture](../../adapters-and-accelerators/adapter-sap/media/9ba0c31f-90df-444d-8192-42743c893d51.gif "9ba0c31f-90df-444d-8192-42743c893d51")</span></span>  
  
## <a name="consuming-the-adapter"></a><span data-ttu-id="6b014-108">使用适配器</span><span class="sxs-lookup"><span data-stu-id="6b014-108">Consuming the Adapter</span></span>  
 <span data-ttu-id="6b014-109">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]公开与 SAP 系统[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="6b014-109">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] exposes the SAP system as a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] service to client applications.</span></span> <span data-ttu-id="6b014-110">客户端应用程序交换使用 SOAP 消息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]通过[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通道执行操作并访问 SAP 系统上的数据。</span><span class="sxs-lookup"><span data-stu-id="6b014-110">Client applications exchange SOAP messages with the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] through [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channels to perform operations and to access data on the SAP system.</span></span> <span data-ttu-id="6b014-111">上图显示四种方式在其中[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]可使用。</span><span class="sxs-lookup"><span data-stu-id="6b014-111">The preceding figure shows four ways in which the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can be consumed.</span></span>  
  
-   <span data-ttu-id="6b014-112">通过[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通道使用执行 SAP 系统的操作的应用程序[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]直接与通道模型交换 SOAP 消息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-112">Through a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel application that performs operations on the SAP system by using the [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel model to exchange SOAP messages directly with the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="6b014-113">有关开发解决方案的详细信息[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]使用[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通道模型编程，请参见[开发应用程序使用 WCF 通道模型](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-channel-model.md)。</span><span class="sxs-lookup"><span data-stu-id="6b014-113">For more information about developing solutions for the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] by using [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel model programming, see [Develop applications using the WCF Channel Model](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-channel-model.md).</span></span>  
  
-   <span data-ttu-id="6b014-114">通过[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务调用方法的模型应用程序[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]客户端在 SAP 系统上执行操作。</span><span class="sxs-lookup"><span data-stu-id="6b014-114">Through a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] service model application that calls methods on a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] client to perform operations on the SAP system.</span></span> <span data-ttu-id="6b014-115">A[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]客户端模型公开的运算[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]作为.NET 方法。</span><span class="sxs-lookup"><span data-stu-id="6b014-115">A [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] client models the operations exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as .NET methods.</span></span> <span data-ttu-id="6b014-116">你可以使用[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]或 svcutil.exe 工具来创建[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]从公开元数据的客户端类[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-116">You can use the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] or the svcutil.exe tool to create a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] client class from metadata exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="6b014-117">有关详细信息[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务模型编程和[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]，请参阅[开发应用程序使用 WCF 服务模型](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-service-model.md)。</span><span class="sxs-lookup"><span data-stu-id="6b014-117">For more information about [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] service model programming and the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)], see [Develop applications using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/develop-sap-applications-using-the-wcf-service-model.md).</span></span>  
  
-   <span data-ttu-id="6b014-118">通过配置为使用带有 SAP 绑定配置的绑定中的 WCF 自定义传输类型为 BizTalk WCF 自定义适配器某一 BizTalk 端口[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]应用程序。</span><span class="sxs-lookup"><span data-stu-id="6b014-118">Through a BizTalk port that is configured to use the BizTalk WCF-Custom adapter with the SAP Binding configured as the binding for the WCF-Custom transport type in a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] application.</span></span> <span data-ttu-id="6b014-119">BizTalk WCF 自定义适配器启用之间的通信[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]应用程序和[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务。</span><span class="sxs-lookup"><span data-stu-id="6b014-119">The BizTalk WCF-Custom adapter enables communication between a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] application and a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6b014-120">BizTalk WCF 自定义适配器支持自定义[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通过其 WCF 自定义绑定传输类型，该对话框可以配置任何[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]作为 BizTalk WCF 自定义适配器使用的绑定公开给配置系统的绑定。</span><span class="sxs-lookup"><span data-stu-id="6b014-120">The BizTalk WCF-Custom adapter supports custom [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] bindings through its WCF-Custom transport type, which enables you to configure any [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] binding exposed to the configuration system as the binding used by the BizTalk WCF-Custom adapter.</span></span> <span data-ttu-id="6b014-121">有关如何使用[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]中[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]解决方案，请参阅[开发 BizTalk 应用程序](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="6b014-121">For more information about how to use the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] in [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] solutions, see [Develop BizTalk applications](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md).</span></span> <span data-ttu-id="6b014-122">可以通过在 SAP 绑定上设置绑定属性加载 BizTalk 分层通道绑定元素支持 BizTalk 事务。</span><span class="sxs-lookup"><span data-stu-id="6b014-122">BizTalk transactions are supported by the BizTalk Layered Channel binding element which can be loaded by setting a binding property on the SAP Binding.</span></span>  
  
-   <span data-ttu-id="6b014-123">通过 IIS 托管的 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="6b014-123">Through an IIS-hosted Web service.</span></span> <span data-ttu-id="6b014-124">在此方案中，[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]通过公开[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务代理，承载于 IIS 中使用的标准之一[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]HTTP 绑定。</span><span class="sxs-lookup"><span data-stu-id="6b014-124">In this scenario, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] is exposed through a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] Service proxy, which is hosted in IIS by using one of the standard [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] HTTP bindings.</span></span>  
  
-   <span data-ttu-id="6b014-125">通过[!INCLUDE[adoprovidersaplong](../../includes/adoprovidersaplong-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-125">Through the [!INCLUDE[adoprovidersaplong](../../includes/adoprovidersaplong-md.md)].</span></span> <span data-ttu-id="6b014-126">[!INCLUDE[adoprovidersapshort](../../includes/adoprovidersapshort-md.md)]上运行[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]并提供一个 ADO.NET 接口到 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="6b014-126">The [!INCLUDE[adoprovidersapshort](../../includes/adoprovidersapshort-md.md)] runs on top of the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and provides an ADO.NET interface to an SAP system.</span></span>  
  
 <span data-ttu-id="6b014-127">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]和 SAP RFC 库始终托管进程的应用程序或服务使用适配器。</span><span class="sxs-lookup"><span data-stu-id="6b014-127">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and the SAP RFC library are always hosted in-process with the application or service that consumes the adapter.</span></span>  
  
## <a name="sap-adapter-and-wcf"></a><span data-ttu-id="6b014-128">SAP 适配器和 WCF</span><span class="sxs-lookup"><span data-stu-id="6b014-128">SAP Adapter and WCF</span></span>  
 [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]<span data-ttu-id="6b014-129"> 提供一个基于 SOAP 消息的交换对客户端和服务之间的通道的编程模型。</span><span class="sxs-lookup"><span data-stu-id="6b014-129"> presents a programming model based on the exchange of SOAP messages over channels between clients and services.</span></span> <span data-ttu-id="6b014-130">这些消息将由通信的客户端和服务公开的终结点之间发送。</span><span class="sxs-lookup"><span data-stu-id="6b014-130">These messages are sent between endpoints exposed by a communicating client and service.</span></span>  
  
 <span data-ttu-id="6b014-131">终结点组成*终结点地址*指定的位置从该处接收消息，*绑定*它指定用于交换消息，以及通信协议*协定*指定终结点公开的操作和数据类型。</span><span class="sxs-lookup"><span data-stu-id="6b014-131">An endpoint consists of an *endpoint address* which specifies the location at which messages are received, a *binding* which specifies the communication protocols used to exchange messages, and a *contract* which specifies the operations and data types exposed by the endpoint.</span></span> <span data-ttu-id="6b014-132">绑定由一个或多个堆叠在一起以定义如何与终结点交换消息的绑定元素组成。</span><span class="sxs-lookup"><span data-stu-id="6b014-132">A binding consists of one or more binding elements that stack on top of each other to define how messages are exchanged with the endpoint.</span></span>  
  
 <span data-ttu-id="6b014-133">至少，绑定必须指定的传输和编码用于与终结点交换消息。</span><span class="sxs-lookup"><span data-stu-id="6b014-133">At a minimum, a binding must specify the transport and encoding used to exchange messages with the endpoint.</span></span> <span data-ttu-id="6b014-134">会通过组成一个或多个通道的通道堆栈终结点之间的消息交换。</span><span class="sxs-lookup"><span data-stu-id="6b014-134">Message exchange between endpoints occurs over a channel stack that is composed of one or more channels.</span></span> <span data-ttu-id="6b014-135">每个通道是一个终结点配置的绑定中的绑定元素的具体实现。</span><span class="sxs-lookup"><span data-stu-id="6b014-135">Each channel is a concrete implementation of one of the binding elements in the binding configured for the endpoint.</span></span>  
  
<span data-ttu-id="6b014-136">[WCF 文档](http://go.microsoft.com/fwlink/?LinkID=196850)更多详细信息包括有关[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]，和[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]编程模型。</span><span class="sxs-lookup"><span data-stu-id="6b014-136">The [WCF documentation](http://go.microsoft.com/fwlink/?LinkID=196850) includes more details about [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)], and the [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] programming model.</span></span>  
  
 <span data-ttu-id="6b014-137">[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]公开[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]自定义绑定，SAP 绑定 (**Microsoft.Adapters.SAP.SAPBinding**)。</span><span class="sxs-lookup"><span data-stu-id="6b014-137">The [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] exposes a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] custom binding, the SAP Binding (**Microsoft.Adapters.SAP.SAPBinding**).</span></span> <span data-ttu-id="6b014-138">默认情况下，此绑定包含单个自定义传输绑定元素，SAP 适配器绑定元素 (**Microsoft.Adapters.SAP.SAPAdapter**)，从而使 SAP 系统的操作。</span><span class="sxs-lookup"><span data-stu-id="6b014-138">By default, this binding contains a single custom transport binding element, the SAP Adapter Binding Element (**Microsoft.Adapters.SAP.SAPAdapter**), which enables operations on an SAP system.</span></span> <span data-ttu-id="6b014-139">使用时[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]与[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，你可以设置**EnableBizTalkCompatibilityMode**绑定属性加载自定义绑定元素，BizTalk 分层通道绑定元素，之上 SAP 适配器绑定元素。</span><span class="sxs-lookup"><span data-stu-id="6b014-139">When using the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] with [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], you can set the **EnableBizTalkCompatibilityMode** binding property to load a custom binding element, the BizTalk Layered Channel Binding Element, on top of the SAP Adapter Binding Element.</span></span> <span data-ttu-id="6b014-140">BizTalk 分层通道绑定元素实现内部[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]并且不公开的外部 SAP 绑定。</span><span class="sxs-lookup"><span data-stu-id="6b014-140">The BizTalk Layered Channel Binding Element is implemented internally by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and is not exposed outside the SAP Binding.</span></span>  
  
 <span data-ttu-id="6b014-141">**Microsoft.Adapters.SAP.SAPBinding** （SAP 绑定） 和**Microsoft.Adapters.SAP.SAPAdapter** （SAP 适配器绑定元素） 为公共类，并还公开给配置系统。</span><span class="sxs-lookup"><span data-stu-id="6b014-141">**Microsoft.Adapters.SAP.SAPBinding** (the SAP Binding) and **Microsoft.Adapters.SAP.SAPAdapter** (the SAP Adapter Binding Element) are public classes and are also exposed to the configuration system.</span></span> <span data-ttu-id="6b014-142">由于 SAP 适配器绑定元素公开时公开，你可以构建自己的自定义[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]绑定支持的扩展的功能[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-142">Because the SAP Adapter Binding Element is exposed publicly, you can build your own custom [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] bindings capable of extending the functionality of the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="6b014-143">例如，可以实现一个自定义绑定以支持企业单一登录 (SSO) 在[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]通道或[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]服务模型编程解决方案，用于聚合数据库操作到单个多功能操作，或执行架构由自定义应用程序实现的操作和 SAP 系统上的操作之间进行转换。</span><span class="sxs-lookup"><span data-stu-id="6b014-143">For example, you could implement a custom binding to support Enterprise Single Sign-On (SSO) in a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel or a [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] service model programming solution, to aggregate database operations into a single multifunction operation, or to perform schema transformation between operations implemented by a custom application and operations on the SAP system.</span></span>  
  
 <span data-ttu-id="6b014-144">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]之上生成[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]和上运行[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]运行时。</span><span class="sxs-lookup"><span data-stu-id="6b014-144">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] is built on top of the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] and runs on top of the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] runtime.</span></span> <span data-ttu-id="6b014-145">[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]提供的软件框架和工具可供基础结构，它[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]利用为了给用户和适配器客户端提供一组丰富的功能。</span><span class="sxs-lookup"><span data-stu-id="6b014-145">The [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] provides a software framework and tooling infrastructure that the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] leverages to provide a rich set of features to users and adapter clients.</span></span>  

## <a name="sap-adapter-and-the-wcf-lob-adapter-sdk"></a><span data-ttu-id="6b014-146">SAP 适配器和 WCF LOB 适配器 SDK</span><span class="sxs-lookup"><span data-stu-id="6b014-146">SAP adapter and the WCF LOB Adapter SDK</span></span>
<span data-ttu-id="6b014-147">[!INCLUDE[adaptersap](../../includes/adaptersap-md.md)]实现利用提供的功能的核心组件的一组[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]和提供连接到 SAP 系统通过 SAP Unicode RFC SDK 库 (librfc32u.dll)。</span><span class="sxs-lookup"><span data-stu-id="6b014-147">The [!INCLUDE[adaptersap](../../includes/adaptersap-md.md)] implements a set of core components that leverage functionality provided by the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] and provide connectivity to the SAP system through the SAP Unicode RFC SDK Library (librfc32u.dll).</span></span>  
  
 <span data-ttu-id="6b014-148">[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]用作通过其软件层[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]接口与[!INCLUDE[firstref_btsWinCommFoundation](../../includes/firstref-btswincommfoundation-md.md)]，和 RFC SDK 用作通过其层[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]与 SAP 系统的接口。</span><span class="sxs-lookup"><span data-stu-id="6b014-148">The [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] serves as the software layer through which the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] interfaces with [!INCLUDE[firstref_btsWinCommFoundation](../../includes/firstref-btswincommfoundation-md.md)], and the RFC SDK serves as the layer through which the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] interfaces with the SAP system.</span></span> <span data-ttu-id="6b014-149">下图显示的内部组件之间的关系[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]以及这些组件和 RFC SDK 之间。</span><span class="sxs-lookup"><span data-stu-id="6b014-149">The following figure shows the relationships between the internal components of the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and between these components and the RFC SDK.</span></span>  
  
 <span data-ttu-id="6b014-150">![内部适配器组件的关系](../../adapters-and-accelerators/adapter-sap/media/10f97b95-4e82-4592-ba07-0f58478305c2.gif "10f97b95-4e82-4592-ba07-0f58478305c2")</span><span class="sxs-lookup"><span data-stu-id="6b014-150">![The relationship of internal adapter components](../../adapters-and-accelerators/adapter-sap/media/10f97b95-4e82-4592-ba07-0f58478305c2.gif "10f97b95-4e82-4592-ba07-0f58478305c2")</span></span>  
  
## <a name="connection-to-the-sap-system"></a><span data-ttu-id="6b014-151">连接到 SAP 系统</span><span class="sxs-lookup"><span data-stu-id="6b014-151">Connection to the SAP system</span></span>  
 <span data-ttu-id="6b014-152">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]与 SAP 系统通过 SAP Unicode RFC SDK 库 (librfc32u.dll) 连接。</span><span class="sxs-lookup"><span data-stu-id="6b014-152">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] connects with the SAP system through the SAP Unicode RFC SDK Library (librfc32u.dll).</span></span> <span data-ttu-id="6b014-153">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持 32 位和 64 位版本的 SAP RFC SDK。</span><span class="sxs-lookup"><span data-stu-id="6b014-153">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports both the 32 bit and the 64 bit versions of the SAP RFC SDK.</span></span> <span data-ttu-id="6b014-154">SAP RFC SDK 启用外部程序来调用 ABAP 函数上的 SAP 系统。</span><span class="sxs-lookup"><span data-stu-id="6b014-154">The SAP RFC SDK enables external programs to call ABAP functions on a SAP system.</span></span>  
  
 <span data-ttu-id="6b014-155">通过提供一个连接 URI 建立到 SAP 系统连接到[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="6b014-155">You establish a connection to an SAP system by providing a connection URI to the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span> <span data-ttu-id="6b014-156">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]支持以下类型的到 SAP 系统的连接：</span><span class="sxs-lookup"><span data-stu-id="6b014-156">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports the following kinds of connections to an SAP system:</span></span>  
  
-   <span data-ttu-id="6b014-157">应用程序基于主机的连接 (A)，在其中[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]直接连接到 SAP 应用程序服务器。</span><span class="sxs-lookup"><span data-stu-id="6b014-157">An application host–based connection (A), in which the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] connects directly to an SAP application server.</span></span>  
  
-   <span data-ttu-id="6b014-158">负载平衡连接 (B)，在其中[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]连接到 SAP 消息服务器。</span><span class="sxs-lookup"><span data-stu-id="6b014-158">A load balancing connection (B), in which the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] connects to an SAP messaging server.</span></span>  
  
-   <span data-ttu-id="6b014-159">基于目标的连接 (D) 到 SAP 系统的连接由 saprfc.ini 配置文件中的目标。</span><span class="sxs-lookup"><span data-stu-id="6b014-159">A destination-based connection (D), in which the connection to the SAP system is specified by a destination in the saprfc.ini configuration file.</span></span> <span data-ttu-id="6b014-160">A、 B 和 R 支持类型连接。</span><span class="sxs-lookup"><span data-stu-id="6b014-160">A, B, and R type connections are supported.</span></span>  
  
-   <span data-ttu-id="6b014-161">在其中适配器接收 Rfc、 tRFC 和通过 SAP 系统指定的侦听器主机、 侦听器网关服务和侦听器程序 ID，在连接 URI 中直接或通过基于 R 的上一个 RFC 目标的 Idoc 侦听器连接 (R)saprfc.ini 配置文件中的目标。</span><span class="sxs-lookup"><span data-stu-id="6b014-161">A listener connection (R), in which the adapter receives RFCs, tRFC and IDOCs through an RFC Destination on the SAP system that is specified by a listener host, a listener gateway service, and a listener program ID, either directly in the connection URI or by an R-based destination in the saprfc.ini configuration file.</span></span>  
  
 <span data-ttu-id="6b014-162">Saprfc.ini 文件有关的详细信息，请参阅"SAPRFC。INI 文件"中的[SAP 文档](https://help.sap.com/doc/PRODUCTION/saphelp_nwpi711/7.1.1/en-US/48/c4168eca64581de10000000a42189c/frameset.htm)。</span><span class="sxs-lookup"><span data-stu-id="6b014-162">For more information about the saprfc.ini file, see "The SAPRFC.INI File" in the [SAP documentation](https://help.sap.com/doc/PRODUCTION/saphelp_nwpi711/7.1.1/en-US/48/c4168eca64581de10000000a42189c/frameset.htm).</span></span>  
  
 <span data-ttu-id="6b014-163">有关详细信息，如何[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]连接到 SAP 系统，请参阅[创建与 SAP 系统的连接](../../adapters-and-accelerators/adapter-sap/create-a-connection-to-the-sap-system.md)。</span><span class="sxs-lookup"><span data-stu-id="6b014-163">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] connects to an SAP system, see [Create a Connection to the SAP System](../../adapters-and-accelerators/adapter-sap/create-a-connection-to-the-sap-system.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6b014-164">另请参阅</span><span class="sxs-lookup"><span data-stu-id="6b014-164">See Also</span></span>  
 [<span data-ttu-id="6b014-165">了解用于 mySAP Business Suite 的 BizTalk 适配器</span><span class="sxs-lookup"><span data-stu-id="6b014-165">Understand BizTalk Adapter for mySAP Business Suite</span></span>](../../adapters-and-accelerators/adapter-sap/understand-biztalk-adapter-for-mysap-business-suite.md)