---
title: BizTalk Accelerator for HL7 中的新增功能 |Microsoft Docs
description: 更改和更新使用不同版本的 BizTalk Server 中的 HL7 accelerator
ms.custom: ''
ms.date: 11/22/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e98595a1-2d1e-488e-8a97-7cd561948b3b
caps.latest.revision: 15
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a7d55ea48d6fd8d7e9f61d1427f615cc8b3ec76c
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65285276"
---
# <a name="whats-new-in-biztalk-accelerator-for-hl7"></a><span data-ttu-id="de507-103">什么是 BizTalk Accelerator for HL7 中的新增功能</span><span class="sxs-lookup"><span data-stu-id="de507-103">What's new in BizTalk Accelerator for HL7</span></span>
<span data-ttu-id="de507-104">更改和更新与[!INCLUDE[HL7_CurrentVersion_FirstRef_md](../../includes/hl7-currentversion-firstref-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="de507-104">Changes and updates with the [!INCLUDE[HL7_CurrentVersion_FirstRef_md](../../includes/hl7-currentversion-firstref-md.md)].</span></span> 

## <a name="biztalk-server-2016"></a><span data-ttu-id="de507-105">BizTalk Server 2016</span><span class="sxs-lookup"><span data-stu-id="de507-105">BizTalk Server 2016</span></span>

|               <span data-ttu-id="de507-106">功能</span><span class="sxs-lookup"><span data-stu-id="de507-106">Feature</span></span>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="de507-107">Description</span><span class="sxs-lookup"><span data-stu-id="de507-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de507-108">**启动了到 LOB 连接**</span><span class="sxs-lookup"><span data-stu-id="de507-108">**Initiates the connection to LOB**</span></span> | <span data-ttu-id="de507-109">使用 MLLP 适配器[!INCLUDE[HL7_CurrentVersion_abbrev_md](../../includes/hl7-currentversion-abbrev-md.md)]可以启动或发起到远程的业务线服务器 (LOB) 系统的连接。</span><span class="sxs-lookup"><span data-stu-id="de507-109">Using the MLLP adapter, [!INCLUDE[HL7_CurrentVersion_abbrev_md](../../includes/hl7-currentversion-abbrev-md.md)] can start or initiate the connection to a remote Line of Business server (LOB) system.</span></span> <span data-ttu-id="de507-110">LOB 等待连接，然后将消息发送到[!INCLUDE[btsBizTalkServerNoVersion_md](../../includes/btsbiztalkservernoversion-md.md)]使用 MLLP 适配器。</span><span class="sxs-lookup"><span data-stu-id="de507-110">The LOB waits for the connection, and then sends the messages to [!INCLUDE[btsBizTalkServerNoVersion_md](../../includes/btsbiztalkservernoversion-md.md)] using the MLLP adapter.</span></span> <span data-ttu-id="de507-111">有一些新属性中 MLLP 的接收位置配置此选项。</span><span class="sxs-lookup"><span data-stu-id="de507-111">There are some new properties in the MLLP receive location that configure this option.</span></span> <span data-ttu-id="de507-112">请参阅：</span><span class="sxs-lookup"><span data-stu-id="de507-112">See:</span></span> <br/><ul><li>[<span data-ttu-id="de507-113">步骤 4 中的端到端教程</span><span class="sxs-lookup"><span data-stu-id="de507-113">Step 4 in the end-to-end tutorial</span></span>](../../adapters-and-accelerators/accelerator-hl7/step-4-create-receive-port-to-accept-adt^a03-messages-from-adt-using-mllp.md)</li><li>[<span data-ttu-id="de507-114">步骤 4 中询问教程</span><span class="sxs-lookup"><span data-stu-id="de507-114">Step 4 in the interrogative tutorial</span></span>](../../adapters-and-accelerators/accelerator-hl7/step-4-create-the-receive-port-for-accepting-adt-query-messages.md)</li><li>[<span data-ttu-id="de507-115">询问教程中的步骤 5</span><span class="sxs-lookup"><span data-stu-id="de507-115">Step 5 in the interrogative tutorial</span></span>](../../adapters-and-accelerators/accelerator-hl7/step-5-create-the-receive-port-for-accepting-his-messages.md)</li><li>[<span data-ttu-id="de507-116">步骤 4 中批处理教程</span><span class="sxs-lookup"><span data-stu-id="de507-116">Step 4 in the batching tutorial</span></span>](../../adapters-and-accelerators/accelerator-hl7/step-4-create-a-receive-port-for-accepting-the-batch-message.md)</li></ul><span data-ttu-id="de507-117">在[!INCLUDE[bts2013r2_md](../../includes/bts2013r2-md.md)]和较旧版本中，HL7 MLLP 接收适配器等待远程 LOB 服务器连接到 MLLP 适配器和 LOB 然后发送消息。</span><span class="sxs-lookup"><span data-stu-id="de507-117">In [!INCLUDE[bts2013r2_md](../../includes/bts2013r2-md.md)] and older versions, the HL7 MLLP receive adapter waits for the remote LOB server to connect to the MLLP adapter, and then the LOB sends messages.</span></span> <br/><br/><span data-ttu-id="de507-118">请参阅[BTAHL7 如何路由消息](../../adapters-and-accelerators/accelerator-hl7/how-btahl7-routes-messages.md)的更多详细信息。</span><span class="sxs-lookup"><span data-stu-id="de507-118">See [how BTAHL7 routes messages](../../adapters-and-accelerators/accelerator-hl7/how-btahl7-routes-messages.md) for more details.</span></span> |

## <a name="biztalk-server-2013-r2"></a><span data-ttu-id="de507-119">BizTalk Server 2013 R2</span><span class="sxs-lookup"><span data-stu-id="de507-119">BizTalk Server 2013 R2</span></span>  
  
|                        <span data-ttu-id="de507-120">功能</span><span class="sxs-lookup"><span data-stu-id="de507-120">Feature</span></span>                        |                                                                                                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="de507-121">Description</span><span class="sxs-lookup"><span data-stu-id="de507-121">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                  <span data-ttu-id="de507-122">**64 位支持**</span><span class="sxs-lookup"><span data-stu-id="de507-122">**64-bit Support**</span></span>                   |                                                                                                                            <span data-ttu-id="de507-123">MLLP 适配器和 HL7 管道可在这两个 32 位和 64 位主机实例中运行。</span><span class="sxs-lookup"><span data-stu-id="de507-123">The MLLP adapters and the HL7 pipeline can run in both the 32-bit and 64-bit host instances.</span></span><br /><br /> <span data-ttu-id="de507-124">[!INCLUDE[HL7_CurrentVersion_abbrev_md](../../includes/hl7-currentversion-abbrev-md.md)]安装包括 32 位安装包和 64 位安装包。</span><span class="sxs-lookup"><span data-stu-id="de507-124">The [!INCLUDE[HL7_CurrentVersion_abbrev_md](../../includes/hl7-currentversion-abbrev-md.md)] installation includes a 32-bit installation package and a 64-bit installation package.</span></span> <span data-ttu-id="de507-125">在 32 位计算机上安装仅 32 位包。</span><span class="sxs-lookup"><span data-stu-id="de507-125">On a 32-bit computer, install only the 32-bit package.</span></span> <span data-ttu-id="de507-126">在 64 位计算机上安装 32 位**或**64 位包。</span><span class="sxs-lookup"><span data-stu-id="de507-126">On a 64-bit computer, install the 32-bit **or** 64-bit package.</span></span> <br/><br/><span data-ttu-id="de507-127">**重要提示：** 若要使用 64 位支持，仅安装 64 位包。</span><span class="sxs-lookup"><span data-stu-id="de507-127">**Important:**  To use 64-bit support, only install the 64-bit package.</span></span> <span data-ttu-id="de507-128">64 位包使适配器和管道在 32 位和 64 位模式下运行。</span><span class="sxs-lookup"><span data-stu-id="de507-128">The 64-bit package enables the adapter and pipelines to run in both 32-bit and 64-bit mode.</span></span>                                                                                                                            |
|                <span data-ttu-id="de507-129">**2.6 版架构支持**</span><span class="sxs-lookup"><span data-stu-id="de507-129">**v2.6 Schema Support**</span></span>                |                                                                                                                                                                                                                 <span data-ttu-id="de507-130">支持包括：</span><span class="sxs-lookup"><span data-stu-id="de507-130">Support includes:</span></span><br /><br /> <span data-ttu-id="de507-131">-   **BTAHL7V26Common**项目：包括 2.6 版架构。</span><span class="sxs-lookup"><span data-stu-id="de507-131">-   **BTAHL7V26Common** project: Includes the v2.6 schemas.</span></span><br /><span data-ttu-id="de507-132">-   **BTAHL7Common**项目：包括 2.6 版架构和 ACK_26_GLO_DEF 确认架构;这将生成 2.6 版消息的确认。</span><span class="sxs-lookup"><span data-stu-id="de507-132">-   **BTAHL7Common** project: Includes the v2.6 schemas and the ACK_26_GLO_DEF acknowledgement schema; which generates the acknowledgement for v2.6 messages.</span></span><br /><span data-ttu-id="de507-133">-   **MSH_25_GLO_DEF**架构：处理新附带 2.6 版架构的消息标头字段，并继续支持所有 v2。*x*架构。</span><span class="sxs-lookup"><span data-stu-id="de507-133">-   **MSH_25_GLO_DEF** schema: Handles new message header fields that are included with the v2.6 schema and continues to support all v2.*x* schemas.</span></span>                                                                                                                                                                                                                  |
|           <span data-ttu-id="de507-134">**动态 MLLP 适配器支持**</span><span class="sxs-lookup"><span data-stu-id="de507-134">**Dynamic MLLP Adapter Support**</span></span>            |                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="de507-135">属性可以配置在运行时使用的单向或双向 （请求-响应） 的适配器的发送端口。</span><span class="sxs-lookup"><span data-stu-id="de507-135">The adapter properties can be configured at Runtime using a One-Way or Two-Way (request-response) send port.</span></span> <span data-ttu-id="de507-136">请参阅[动态 MLLP 适配器](../../adapters-and-accelerators/accelerator-hl7/dynamic-mllp-adapter.md)。</span><span class="sxs-lookup"><span data-stu-id="de507-136">See [Dynamic MLLP Adapter](../../adapters-and-accelerators/accelerator-hl7/dynamic-mllp-adapter.md).</span></span>                                                                                                                                                                                                                                                                                                                    |
|                <span data-ttu-id="de507-137">**"FreeText"支持**</span><span class="sxs-lookup"><span data-stu-id="de507-137">**“FreeText” Support**</span></span>                 |                                                                                                                                                                                                                                                                                                        <span data-ttu-id="de507-138">如果字段或段被定义为"FreeText"，未解析字段/段中的字符数据。</span><span class="sxs-lookup"><span data-stu-id="de507-138">If a field or segment is defined as “FreeText”, the character data in the field/segment is not parsed.</span></span> <span data-ttu-id="de507-139">请参阅[使用自定义文本编码字符](../../adapters-and-accelerators/accelerator-hl7/encoding-characters-using-free-text.md)。</span><span class="sxs-lookup"><span data-stu-id="de507-139">See [Encoding Characters using Free Text](../../adapters-and-accelerators/accelerator-hl7/encoding-characters-using-free-text.md).</span></span>                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="de507-140">**ACK 或 NACK 发送具有无效的 MSH 的消息**</span><span class="sxs-lookup"><span data-stu-id="de507-140">**Messages with invalid MSH are sent an ACK or NACK**</span></span> |                                 <span data-ttu-id="de507-141">使用**ReturnErrorForInvalidMSH3**注册表项，将否定确认 (NACK) 发送到参与方如果出现下列情况：</span><span class="sxs-lookup"><span data-stu-id="de507-141">Using the **ReturnErrorForInvalidMSH3** registry key, a negative acknowledgement (NACK) is sent to the party if the following occurs:</span></span><br /><br /> <span data-ttu-id="de507-142">-Invalid MSH3 （不在 HL7 配置资源管理器中定义参与方）</span><span class="sxs-lookup"><span data-stu-id="de507-142">-   Invalid MSH3 (party is not defined in HL7 Configuration Explorer)</span></span> <br />    <span data-ttu-id="de507-143">**AND**</span><span class="sxs-lookup"><span data-stu-id="de507-143">**AND**</span></span><br /><span data-ttu-id="de507-144">-将消息中的 MSH15 和 MSH16 值为 null 或为空</span><span class="sxs-lookup"><span data-stu-id="de507-144">-   MSH15 and MSH16 values in the message are null or empty</span></span><br /><br /> <span data-ttu-id="de507-145">若要发送 NACK，将以下注册表项设置为 1，然后重新启动主机实例：</span><span class="sxs-lookup"><span data-stu-id="de507-145">To send the NACK, set the following registry key to 1 and then restart the host instance:</span></span><br /><br /> <span data-ttu-id="de507-146">32 位主机： `HKLM\SOFTWARE\Microsoft\BizTalk Accelerator for HL7`</span><span class="sxs-lookup"><span data-stu-id="de507-146">32-bit host: `HKLM\SOFTWARE\Microsoft\BizTalk Accelerator for HL7`</span></span><br /><br /> <span data-ttu-id="de507-147">64 位主机： `HKLM\ SOFTWARE\Wow6432Node\Microsoft\BizTalk Accelerator for HL7`</span><span class="sxs-lookup"><span data-stu-id="de507-147">64-bit host: `HKLM\ SOFTWARE\Wow6432Node\Microsoft\BizTalk Accelerator for HL7`</span></span> <br/><br/><span data-ttu-id="de507-148">**提示：** 一个端口可以订阅失败消息：</span><span class="sxs-lookup"><span data-stu-id="de507-148">**Tip:**  A port can subscribe to the failed message:</span></span> <ul><li><span data-ttu-id="de507-149">使用**BTAHL7Schemas.ParseError = True**筛选条件。</span><span class="sxs-lookup"><span data-stu-id="de507-149">Use the **BTAHL7Schemas.ParseError = True** filter condition.</span></span></li><li><span data-ttu-id="de507-150">使用**Pass Through**管道。</span><span class="sxs-lookup"><span data-stu-id="de507-150">Use the **Pass Through** pipeline.</span></span></li></ul>                                  |
|        <span data-ttu-id="de507-151">**ACK 消息实例保持处于活动状态**</span><span class="sxs-lookup"><span data-stu-id="de507-151">**ACK message instance remains Active**</span></span>        |                                                                                                                                                                                                                                                                                                <span data-ttu-id="de507-152">如果无法连接到上游系统，确认 (ACK) 发送到上游系统仍然处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="de507-152">If there is connection failure to the upstream system, the acknowledgement (ACK) sent to the upstream system remained in an Active state.</span></span><br /><br /> <span data-ttu-id="de507-153">新行为：如果没有连接到上游系统失败，则挂起的确认消息。</span><span class="sxs-lookup"><span data-stu-id="de507-153">New Behavior: If there is connection failure to the upstream system, the ACK message is suspended.</span></span>                                                                                                                                                                                                                                                                                                 |
|                <span data-ttu-id="de507-154">**不发送\<SB\>**</span><span class="sxs-lookup"><span data-stu-id="de507-154">**Do not send \<SB\>**</span></span>                 |                               <span data-ttu-id="de507-155">此属性添加到接收适配器端口配置属性。</span><span class="sxs-lookup"><span data-stu-id="de507-155">This property is added to the receive adapter port configuration properties.</span></span> <span data-ttu-id="de507-156">若要启用此属性，设置**UseMLLPTransACK**值：</span><span class="sxs-lookup"><span data-stu-id="de507-156">To enable this property, set the **UseMLLPTransACK** value:</span></span><br /><br /> <span data-ttu-id="de507-157">-设置为**False** （默认值），适配器将消息发送的数据开头时才\<SB\>。</span><span class="sxs-lookup"><span data-stu-id="de507-157">-   When set to **False** (default), the adapter sends the message if the data begins with \<SB\>.</span></span> <span data-ttu-id="de507-158">例如，发送以下消息：</span><span class="sxs-lookup"><span data-stu-id="de507-158">For example, the following message is sent:</span></span><br /> `<SB\>DataData<CR\>DataData<CR\>…`<br/><br /><span data-ttu-id="de507-159">-设置为 **，则返回 True**，该适配器将消息发送的数据是否缺少\<SB\>开始。</span><span class="sxs-lookup"><span data-stu-id="de507-159">-   When set to **True**, the adapter sends the message if the data is missing \<SB\> in the beginning.</span></span> <span data-ttu-id="de507-160">例如，发送以下消息：</span><span class="sxs-lookup"><span data-stu-id="de507-160">For example, the following message is sent:</span></span><br /> `DataData<CR\>DataData<CR\>…` <br/><br/><span data-ttu-id="de507-161">**重要提示：** 如果两个双向发送端口已**不会发送\<SB\>** 设置为 True，则它不会发送 SB 消息到下游系统。</span><span class="sxs-lookup"><span data-stu-id="de507-161">**Important:**  If a two way send port has **Do not send \<SB\>** set to True, then it will not send SB with the message to the downstream system.</span></span> <span data-ttu-id="de507-162">同时，它可与下游系统缺少 SB 接收确认。</span><span class="sxs-lookup"><span data-stu-id="de507-162">At the same time it can receive ACK with missing SB from the downstream system.</span></span>                               |
|               <span data-ttu-id="de507-163">**接受缺少\<SB\>**</span><span class="sxs-lookup"><span data-stu-id="de507-163">**Accept missing \<SB\>**</span></span>               | <span data-ttu-id="de507-164">此属性添加到发送适配器端口配置属性。</span><span class="sxs-lookup"><span data-stu-id="de507-164">This property is added to the send adapter port configuration properties.</span></span> <span data-ttu-id="de507-165">若要启用此属性，设置**UseMLLPTransACK**值：</span><span class="sxs-lookup"><span data-stu-id="de507-165">To enable this property, set the **UseMLLPTransACK** value:</span></span><br /><br /> <span data-ttu-id="de507-166">-设置为**False** （默认值），如果缺少数据适配器返回错误\<SB\>开始。</span><span class="sxs-lookup"><span data-stu-id="de507-166">-   When set to **False** (default), the adapter returns an error if the data is missing \<SB\> in the beginning.</span></span> <span data-ttu-id="de507-167">例如，以下消息将返回错误：</span><span class="sxs-lookup"><span data-stu-id="de507-167">For example, the following message returns an error:</span></span><br /> `DataData<CR\>DataData<CR\>…`<br/><br /><span data-ttu-id="de507-168">-设置为 **，则返回 True**，该适配器可以接收该消息，如果数据丢失\<SB\>开始。</span><span class="sxs-lookup"><span data-stu-id="de507-168">-   When set to **True**, the adapter can receive the message if the data is missing \<SB\> in the beginning.</span></span> <span data-ttu-id="de507-169">例如，收到以下消息：</span><span class="sxs-lookup"><span data-stu-id="de507-169">For example, the following messages are received:</span></span><br /> `<SB\>DataData<CR\>DataData<CR\>…` <br />`DataData<CR\>DataData<CR\>…` <br/><br/><span data-ttu-id="de507-170">**重要提示：** 如果两个双向接收端口已**接受缺少\<SB\>** 设置为 True，则它将接受来自上游系统的消息中缺少 SB。</span><span class="sxs-lookup"><span data-stu-id="de507-170">**Important:**  If a two way receive port has **Accept Missing \<SB\>** set to True, then it will accept the missing SB in the message from upstream system.</span></span> <span data-ttu-id="de507-171">在同一时间它不会发送 SB 到上游系统。</span><span class="sxs-lookup"><span data-stu-id="de507-171">At the same time it will not send SB to the upstream system.</span></span> |
  
## <a name="biztalk-server-2013"></a><span data-ttu-id="de507-172">BizTalk Server 2013</span><span class="sxs-lookup"><span data-stu-id="de507-172">BizTalk Server 2013</span></span>  
  
 <span data-ttu-id="de507-173">在以前的版本包含以下增强功能：</span><span class="sxs-lookup"><span data-stu-id="de507-173">The following enhancements were included in the previous releases:</span></span>  
  
- <span data-ttu-id="de507-174">可恢复对批处理中批处理出方案在 HL7 管道中的交换支持。</span><span class="sxs-lookup"><span data-stu-id="de507-174">Recoverable Interchange support in HL7 pipeline for Batch In Batch Out Scenario.</span></span>  
  
  <span data-ttu-id="de507-175">在上一版本中删除了以下功能：</span><span class="sxs-lookup"><span data-stu-id="de507-175">The following feature was removed in the previous releases:</span></span>  
  
- <span data-ttu-id="de507-176">从 BizTalk Server 删除运行状况活动跟踪功能并因此从 BTAHL7 删除审核功能，但日志记录将保持不变。</span><span class="sxs-lookup"><span data-stu-id="de507-176">Health Activity Tracking feature is removed from BizTalk Server and hence Auditing feature is removed from BTAHL7 but Logging remains intact.</span></span>  
  
  <span data-ttu-id="de507-177">在早期版本中被修改以下功能：</span><span class="sxs-lookup"><span data-stu-id="de507-177">The following feature was modified in the previous releases:</span></span>  
  
- <span data-ttu-id="de507-178">"审核和日志记录服务"会重命名为"HL7 日志记录服务"。</span><span class="sxs-lookup"><span data-stu-id="de507-178">The “Auditing and Logging service” is renamed as “HL7 Logging service”.</span></span>  

## <a name="see-also"></a><span data-ttu-id="de507-179">另请参阅</span><span class="sxs-lookup"><span data-stu-id="de507-179">See also</span></span>

[<span data-ttu-id="de507-180">BizTalk Server 2016 中的新增功能</span><span class="sxs-lookup"><span data-stu-id="de507-180">What's New in BizTalk Server 2016</span></span>](../../install-and-config-guides/what-s-new-in-biztalk-server-2016.md)  
[<span data-ttu-id="de507-181">什么是 BizTalk Server 2013 R2 和 2013年中的新增功能</span><span class="sxs-lookup"><span data-stu-id="de507-181">What's New in BizTalk Server 2013 R2 and 2013</span></span>](../../install-and-config-guides/what-s-new-in-biztalk-server-2013-and-2013-r2.md)