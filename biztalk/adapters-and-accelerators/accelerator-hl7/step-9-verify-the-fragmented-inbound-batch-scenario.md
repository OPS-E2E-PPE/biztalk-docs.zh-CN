---
title: 步骤 9： 验证零碎的入站的批处理方案 |Microsoft 文档
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 1ba61866-2e1b-49e2-be57-ef281407d0a5
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 47d5ec8ffa7a7875af7073e60d6578149d532a7a
ms.sourcegitcommit: 3fd1c85d9dc2ce7b77da75a5c2087cc48cfcbe50
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/17/2018
ms.locfileid: "25962075"
---
# <a name="step-9-verify-the-fragmented-inbound-batch-scenario"></a><span data-ttu-id="4d016-102">步骤 9： 验证零碎的入站的批处理方案</span><span class="sxs-lookup"><span data-stu-id="4d016-102">Step 9: Verify the Fragmented Inbound Batch Scenario</span></span>
<span data-ttu-id="4d016-103">在此步骤中，你可以验证分片入站批处理方案。</span><span class="sxs-lookup"><span data-stu-id="4d016-103">In this step, you verify the Fragmented Inbound Batch scenario.</span></span>  
  
 <span data-ttu-id="4d016-104">正在验证方案涉及使用以下工具：</span><span class="sxs-lookup"><span data-stu-id="4d016-104">Verifying the scenario involves using the following tools:</span></span>  
  
-   <span data-ttu-id="4d016-105">**MllpSend 工具**，从命令行中用于将批处理消息发送到接收端口。</span><span class="sxs-lookup"><span data-stu-id="4d016-105">**MllpSend Tool**, which you use from the command line to send a batch message to the receive port.</span></span>  
  
-   <span data-ttu-id="4d016-106">**MllpReceive 工具**，从命令行中用于验证来自发送端口 （作为包含批处理中） 的单个消息的接收。</span><span class="sxs-lookup"><span data-stu-id="4d016-106">**MllpReceive Tool**, which you use from the command line to verify reception of the individual messages (as contained in the batch) from the send port.</span></span> <span data-ttu-id="4d016-107">此实例 MllpReceive 工具充当模拟的业务线应用程序。</span><span class="sxs-lookup"><span data-stu-id="4d016-107">This instance of the MllpReceive Tool functions as a simulated line-of-business application.</span></span> <span data-ttu-id="4d016-108">在收到的消息，它还生成确认回[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]集成引擎。</span><span class="sxs-lookup"><span data-stu-id="4d016-108">On reception of the messages, it also generates an acknowledgment back to the [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] integration engine.</span></span>  
  
-   <span data-ttu-id="4d016-109">MllpReceive 工具，它用于验证接收的从发送端口的确认第二个实例。</span><span class="sxs-lookup"><span data-stu-id="4d016-109">A second instance of the MllpReceive Tool, which you use to verify reception of acknowledgments from the send port.</span></span>  
  
### <a name="to-test-the-fragmented-inbound-batch-scenario"></a><span data-ttu-id="4d016-110">若要测试分片入站批处理方案</span><span class="sxs-lookup"><span data-stu-id="4d016-110">To test the Fragmented Inbound Batch scenario</span></span>  
  
1.  <span data-ttu-id="4d016-111">单击**启动**，指向**所有程序**，指向**附件**，然后单击**命令提示符**。</span><span class="sxs-lookup"><span data-stu-id="4d016-111">Click **Start**, point to **All Programs**, point to **Accessories**, and then click **Command Prompt**.</span></span>  
  
2.  <span data-ttu-id="4d016-112">在命令提示符下，将移到 **\<*驱动器*\>: files\microsoft BizTalk\<版本\>Accelerator for HL7\SDK\MLLP 实用工具**。</span><span class="sxs-lookup"><span data-stu-id="4d016-112">At the command prompt, move to **\<*drive*\>:\Program Files\Microsoft BizTalk \<version\> Accelerator for HL7\SDK\MLLP Utilities**.</span></span>  
  
3.  <span data-ttu-id="4d016-113">在命令提示符处，键入**mllpreceive/p 41000 /sb 11 /eb 28 /cr 13 /hl7ack"\<*驱动器*\>: files\microsoft BizTalk\<版本\>快捷键HL7\Samples\Sample 应用程序接受 ACK.txt**，然后按**Enter**。</span><span class="sxs-lookup"><span data-stu-id="4d016-113">At the command prompt, type **mllpreceive /p 41000 /sb 11 /eb 28 /cr 13 /hl7ack "\<*drive*\>:\Program Files\Microsoft BizTalk \<version\> Accelerator for HL7\Samples\Sample Application Accept ACK.txt**, and then press **Enter**.</span></span> <span data-ttu-id="4d016-114">命令提示符窗口进入等待状态，直到你执行步骤 5 和系统接收输入。</span><span class="sxs-lookup"><span data-stu-id="4d016-114">The Command Prompt window enters a waiting state until you perform step 5 and the system receives input.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="4d016-115">步骤 3 中的命令运行侦听端口 41000 MLLP 侦听器应用程序。</span><span class="sxs-lookup"><span data-stu-id="4d016-115">The command in step 3 runs the MLLP listener application that listens to port 41000.</span></span> <span data-ttu-id="4d016-116">此端口是与发送端口将消息传送相关联 (在创建[步骤 5： 创建到传递消息的发送端口](../../adapters-and-accelerators/accelerator-hl7/step-5-create-a-send-port-to-deliver-messages.md))。</span><span class="sxs-lookup"><span data-stu-id="4d016-116">This port is associated with the send port that delivers messages (as created in [Step 5: Create a Send Port to Deliver Messages](../../adapters-and-accelerators/accelerator-hl7/step-5-create-a-send-port-to-deliver-messages.md)).</span></span> <span data-ttu-id="4d016-117">MllpReceive 工具充当的业务线应用程序接收的消息，并将确认 (ACK) 发送回 BTAHL7 （为包含在示例应用程序接受 ACK.txt 的示例文件）。</span><span class="sxs-lookup"><span data-stu-id="4d016-117">The MllpReceive Tool acts as the line-of-business application that receives the messages, and sends the acknowledgment (ACK) back to BTAHL7 (as contained in the sample file Sample Application Accept ACK.txt).</span></span> <span data-ttu-id="4d016-118">该工具显示在命令提示符窗口中返回到它的任何消息。</span><span class="sxs-lookup"><span data-stu-id="4d016-118">The tool displays any messages returned to it in the Command Prompt window.</span></span> <span data-ttu-id="4d016-119">步骤 3 中的命令指定 MLLP 消息的默认 EB、 SB 和 CR 字符。</span><span class="sxs-lookup"><span data-stu-id="4d016-119">The command in step 3 specifies the default EB, SB, and CR characters of the MLLP message.</span></span>  
  
4.  <span data-ttu-id="4d016-120">重复步骤 1 和 2，打开另一个命令提示符窗口并浏览至 MLLP Utilities 目录。</span><span class="sxs-lookup"><span data-stu-id="4d016-120">Repeat steps 1 and 2 to open another Command Prompt window and browse to the MLLP Utilities directory.</span></span> <span data-ttu-id="4d016-121">在命令提示符处，键入**mllpreceive/p 41002**，然后按**Enter**。</span><span class="sxs-lookup"><span data-stu-id="4d016-121">At the command prompt, type **mllpreceive /p 41002**, and then press **Enter**.</span></span> <span data-ttu-id="4d016-122">命令提示符窗口进入等待状态，直到你执行步骤 5 和系统接收输出。</span><span class="sxs-lookup"><span data-stu-id="4d016-122">The Command Prompt window enters a waiting state until you perform step 5 and the system receives output.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="4d016-123">步骤 4 中的命令运行侦听端口 41002 MLLP 侦听器应用程序。</span><span class="sxs-lookup"><span data-stu-id="4d016-123">The command in step 4 runs the MLLP listener application listening to port 41002.</span></span> <span data-ttu-id="4d016-124">此端口是与将确认传递回批处理消息源发送端口相关联 (在创建[步骤 6： 创建到传递确认发送端口](../../adapters-and-accelerators/accelerator-hl7/step-6-create-a-send-port-to-deliver-acknowledgments.md))。</span><span class="sxs-lookup"><span data-stu-id="4d016-124">This port is associated with the send port that delivers acknowledgments back to the source of the batch message (as created in [Step 6: Create a Send Port to Deliver Acknowledgments](../../adapters-and-accelerators/accelerator-hl7/step-6-create-a-send-port-to-deliver-acknowledgments.md)).</span></span> <span data-ttu-id="4d016-125">MllpReceive 工具充当的业务线应用程序发送原始的批处理。</span><span class="sxs-lookup"><span data-stu-id="4d016-125">The MllpReceive Tool acts as the line-of-business application that sent the original batch.</span></span> <span data-ttu-id="4d016-126">该工具会显示任何确认返回到它在命令提示符窗口中。</span><span class="sxs-lookup"><span data-stu-id="4d016-126">The tool displays any acknowledgments returned to it in the Command Prompt window.</span></span> <span data-ttu-id="4d016-127">步骤 4 中的命令指定 MLLP 消息的默认 EB、 SB 和 CR 字符。</span><span class="sxs-lookup"><span data-stu-id="4d016-127">The command in step 4 specifies the default EB, SB, and CR characters of the MLLP message.</span></span>  
  
5.  <span data-ttu-id="4d016-128">重复步骤 1 和 2，打开另一个命令提示符窗口并浏览至 MLLP Utilities 目录。</span><span class="sxs-lookup"><span data-stu-id="4d016-128">Repeat steps 1 and 2 to open another Command Prompt window and browse to the MLLP Utilities directory.</span></span> <span data-ttu-id="4d016-129">在命令提示符处，键入**mllpsend /twoway /sb 11 /eb 28 /cr 13 /f"\<*驱动器*\>: \Batching Tutorial\Instances\FragmentedInboundBatch.txt"/ p 21000**，其中\<*驱动器*\>是你安装的驱动器号，，然后按**Enter**。</span><span class="sxs-lookup"><span data-stu-id="4d016-129">At the command prompt, type **mllpsend /twoway /sb 11 /eb 28 /cr 13 /f "\<*drive*\>:\Batching Tutorial\Instances\FragmentedInboundBatch.txt" /p 21000**, where \<*drive*\> is your installation drive letter, and then press **Enter**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="4d016-130">步骤 5 中的命令模拟发送到接收端口原始批处理消息。</span><span class="sxs-lookup"><span data-stu-id="4d016-130">The command in step 5 simulates sending of the original batch message to the receive port.</span></span> <span data-ttu-id="4d016-131">控制台应显示"已发送消息： 1"，指示 MllpSend 工具发送一批消息。</span><span class="sxs-lookup"><span data-stu-id="4d016-131">The console should display "Sent message: 1", indicating that the MllpSend tool sent the single batch message.</span></span> <span data-ttu-id="4d016-132">如果它不会显示"已发送消息： 1"，检查事件查看器中。</span><span class="sxs-lookup"><span data-stu-id="4d016-132">If it does not display "Sent message: 1", check the event viewer.</span></span> <span data-ttu-id="4d016-133">验证在步骤 5 中输入命令的文本，然后解决的配置发送和接收端口和的状态[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]和 BTAHL7。</span><span class="sxs-lookup"><span data-stu-id="4d016-133">Verify the text of the command entered in step 5, then troubleshoot the configuration of the send and receive ports, and the status of [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] and BTAHL7.</span></span>  
  
### <a name="to-verify-the-results-of-the-fragmented-inbound-batch-tutorial"></a><span data-ttu-id="4d016-134">若要验证的分片入站批处理教程结果</span><span class="sxs-lookup"><span data-stu-id="4d016-134">To verify the results of the Fragmented Inbound Batch Tutorial</span></span>  
  
1.  <span data-ttu-id="4d016-135">验证一小段延迟后，对端口 41000 上的消息的侦听 MllpReceive 工具显示的批次中分片和发送到 Tutorial_BatchSource 方的单个消息的内容。</span><span class="sxs-lookup"><span data-stu-id="4d016-135">Verify that after a short delay, the MllpReceive tool listening for messages on port 41000 displays the contents of the individual messages fragmented from the batch and sent to the Tutorial_BatchSource party.</span></span> <span data-ttu-id="4d016-136">两个消息的内容应如下所示：</span><span class="sxs-lookup"><span data-stu-id="4d016-136">The contents of the two messages should be as follows:</span></span>  
  
    |<span data-ttu-id="4d016-137">MSH.9</span><span class="sxs-lookup"><span data-stu-id="4d016-137">MSH.9</span></span>|<span data-ttu-id="4d016-138">MSH.10</span><span class="sxs-lookup"><span data-stu-id="4d016-138">MSH.10</span></span>|<span data-ttu-id="4d016-139">MSH.3</span><span class="sxs-lookup"><span data-stu-id="4d016-139">MSH.3</span></span>|<span data-ttu-id="4d016-140">MSH.5</span><span class="sxs-lookup"><span data-stu-id="4d016-140">MSH.5</span></span>|  
    |-----------|------------|-----------|-----------|  
    |<span data-ttu-id="4d016-141">ADT^A03</span><span class="sxs-lookup"><span data-stu-id="4d016-141">ADT^A03</span></span>|<span data-ttu-id="4d016-142">000001</span><span class="sxs-lookup"><span data-stu-id="4d016-142">000001</span></span>|<span data-ttu-id="4d016-143">Tutorial_BatchSource</span><span class="sxs-lookup"><span data-stu-id="4d016-143">Tutorial_BatchSource</span></span>|<span data-ttu-id="4d016-144">MESA_IS</span><span class="sxs-lookup"><span data-stu-id="4d016-144">MESA_IS</span></span>|  
    |<span data-ttu-id="4d016-145">ADT^A03</span><span class="sxs-lookup"><span data-stu-id="4d016-145">ADT^A03</span></span>|<span data-ttu-id="4d016-146">000002</span><span class="sxs-lookup"><span data-stu-id="4d016-146">000002</span></span>|<span data-ttu-id="4d016-147">Tutorial_BatchSource</span><span class="sxs-lookup"><span data-stu-id="4d016-147">Tutorial_BatchSource</span></span>|<span data-ttu-id="4d016-148">MESA_IS</span><span class="sxs-lookup"><span data-stu-id="4d016-148">MESA_IS</span></span>|  
  
2.  <span data-ttu-id="4d016-149">验证一小段延迟后，侦听端口 41002 上确认 MllpReceive 工具将显示两个确认从 BTAHL7 集成引擎返回到批处理的源的内容。</span><span class="sxs-lookup"><span data-stu-id="4d016-149">Verify that after a short delay, the MllpReceive tool listening for acknowledgments on port 41002 displays the contents of two acknowledgments returned from the BTAHL7 integration engine to the source of the batch.</span></span> <span data-ttu-id="4d016-150">两个确认的内容应如下所示：</span><span class="sxs-lookup"><span data-stu-id="4d016-150">The contents of the two acknowledgments should be as follows:</span></span>  
  
    |<span data-ttu-id="4d016-151">MSH.9</span><span class="sxs-lookup"><span data-stu-id="4d016-151">MSH.9</span></span>|<span data-ttu-id="4d016-152">MSH.3</span><span class="sxs-lookup"><span data-stu-id="4d016-152">MSH.3</span></span>|<span data-ttu-id="4d016-153">MSH.5</span><span class="sxs-lookup"><span data-stu-id="4d016-153">MSH.5</span></span>|<span data-ttu-id="4d016-154">MSA.2</span><span class="sxs-lookup"><span data-stu-id="4d016-154">MSA.2</span></span>|<span data-ttu-id="4d016-155">MSA.1</span><span class="sxs-lookup"><span data-stu-id="4d016-155">MSA.1</span></span>|  
    |-----------|-----------|-----------|-----------|-----------|  
    |<span data-ttu-id="4d016-156">ACK^A03^ACK</span><span class="sxs-lookup"><span data-stu-id="4d016-156">ACK^A03^ACK</span></span>|<span data-ttu-id="4d016-157">MESA_IS</span><span class="sxs-lookup"><span data-stu-id="4d016-157">MESA_IS</span></span>|<span data-ttu-id="4d016-158">Tutorial_BatchSource</span><span class="sxs-lookup"><span data-stu-id="4d016-158">Tutorial_BatchSource</span></span>|<span data-ttu-id="4d016-159">000001</span><span class="sxs-lookup"><span data-stu-id="4d016-159">000001</span></span>|<span data-ttu-id="4d016-160">AA</span><span class="sxs-lookup"><span data-stu-id="4d016-160">AA</span></span>|  
    |<span data-ttu-id="4d016-161">ACK^A03^ACK</span><span class="sxs-lookup"><span data-stu-id="4d016-161">ACK^A03^ACK</span></span>|<span data-ttu-id="4d016-162">MESA_IS</span><span class="sxs-lookup"><span data-stu-id="4d016-162">MESA_IS</span></span>|<span data-ttu-id="4d016-163">Tutorial_BatchSource</span><span class="sxs-lookup"><span data-stu-id="4d016-163">Tutorial_BatchSource</span></span>|<span data-ttu-id="4d016-164">000002</span><span class="sxs-lookup"><span data-stu-id="4d016-164">000002</span></span>|<span data-ttu-id="4d016-165">AA</span><span class="sxs-lookup"><span data-stu-id="4d016-165">AA</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="4d016-166">另请参阅</span><span class="sxs-lookup"><span data-stu-id="4d016-166">See Also</span></span>  
 <span data-ttu-id="4d016-167">[第 2 部分： 中的批处理 / 批处理出方案](../../adapters-and-accelerators/accelerator-hl7/part-2-batch-in-batch-out-scenario.md) </span><span class="sxs-lookup"><span data-stu-id="4d016-167">[Part 2: Batch In/Batch Out Scenario](../../adapters-and-accelerators/accelerator-hl7/part-2-batch-in-batch-out-scenario.md) </span></span>  
 [<span data-ttu-id="4d016-168">第 3 部分：Create-Batch 方案</span><span class="sxs-lookup"><span data-stu-id="4d016-168">Part 3: Create-Batch Scenario</span></span>](../../adapters-and-accelerators/accelerator-hl7/part-3-create-batch-scenario.md)