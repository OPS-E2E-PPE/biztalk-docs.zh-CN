---
title: 配置批处理确认 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- batching, acknowledgements
- acknowledgements, batching
ms.assetid: f3529638-e036-4270-ae6d-1bdc3ef98727
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 88b892fb7d525a567662956501b15e3414c17967
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65251394"
---
# <a name="configuring-batching-acknowledgments"></a><span data-ttu-id="545c3-102">配置批处理确认</span><span class="sxs-lookup"><span data-stu-id="545c3-102">Configuring Batching Acknowledgments</span></span>
<span data-ttu-id="545c3-103">您使用[!INCLUDE[HL7_CurrentVersion_FirstRef](../../includes/hl7-currentversion-firstref-md.md)]配置资源管理器来指定入站和生成确认的确认属性。</span><span class="sxs-lookup"><span data-stu-id="545c3-103">You use [!INCLUDE[HL7_CurrentVersion_FirstRef](../../includes/hl7-currentversion-firstref-md.md)] Configuration Explorer to specify the acknowledgment properties for inbound and generated acknowledgments.</span></span>  
  
### <a name="to-run-btahl7-configuration-explorer"></a><span data-ttu-id="545c3-104">若要运行 BTAHL7 配置资源管理器</span><span class="sxs-lookup"><span data-stu-id="545c3-104">To run BTAHL7 Configuration Explorer</span></span>  
  
-   <span data-ttu-id="545c3-105">单击**启动**，依次指向**程序**，指向**Microsoft BizTalk\<版本\>Accelerator for HL7**，然后单击**BTAHL7 配置资源管理器**。</span><span class="sxs-lookup"><span data-stu-id="545c3-105">Click **Start**, point to **Programs**, point to **Microsoft BizTalk \<version\> Accelerator for HL7**, and then click **BTAHL7 Configuration Explorer**.</span></span>  
  
### <a name="to-configure-message-batching-acknowledgments"></a><span data-ttu-id="545c3-106">若要配置批处理确认的消息</span><span class="sxs-lookup"><span data-stu-id="545c3-106">To configure message batching acknowledgments</span></span>  
  
-   <span data-ttu-id="545c3-107">在 BTAHL7 配置资源管理器中**BTAHL7 配置资源管理器**对话框中，在**方**选项卡上，选择你想要配置，该参与的方，然后在**确认**选项卡上，执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="545c3-107">In BTAHL7 Configuration Explorer, in the **BTAHL7 Configuration Explorer** dialog box, on the **Parties** tab, select the party you want to configure, and then, on the **Acknowledgments** tab, do the following:</span></span>  
  
    |<span data-ttu-id="545c3-108">使用此选项</span><span class="sxs-lookup"><span data-stu-id="545c3-108">Use this</span></span>|<span data-ttu-id="545c3-109">执行的操作</span><span class="sxs-lookup"><span data-stu-id="545c3-109">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="545c3-110">**确认类型**</span><span class="sxs-lookup"><span data-stu-id="545c3-110">**Acknowledgment type**</span></span>|<span data-ttu-id="545c3-111">选择下列选项之一：</span><span class="sxs-lookup"><span data-stu-id="545c3-111">Select one of the following:</span></span><br /><br /> <span data-ttu-id="545c3-112">-   **None**。</span><span class="sxs-lookup"><span data-stu-id="545c3-112">-   **None**.</span></span> <span data-ttu-id="545c3-113">如果不想配置任何确认，请选择此选项。</span><span class="sxs-lookup"><span data-stu-id="545c3-113">Select if you do not want to configure any acknowledgments.</span></span><br /><span data-ttu-id="545c3-114">-   **OriginalMode**。</span><span class="sxs-lookup"><span data-stu-id="545c3-114">-   **OriginalMode**.</span></span> <span data-ttu-id="545c3-115">选择此选项可以配置**MSH1 – 字段分隔符**， **MSH2 – 编码的字符**，并**MSH8 – 安全**仅选项。</span><span class="sxs-lookup"><span data-stu-id="545c3-115">Select to configure the **MSH1 – Field Separator**, **MSH2 – Encoding Characters**, and **MSH8 – Security** options only.</span></span><br /><span data-ttu-id="545c3-116">-   **EnhancedMode**。</span><span class="sxs-lookup"><span data-stu-id="545c3-116">-   **EnhancedMode**.</span></span> <span data-ttu-id="545c3-117">选择此选项可以配置所有可用确认选项。</span><span class="sxs-lookup"><span data-stu-id="545c3-117">Select to configure all available acknowledgment options.</span></span><br /><span data-ttu-id="545c3-118">-   **DeferredMode**。</span><span class="sxs-lookup"><span data-stu-id="545c3-118">-   **DeferredMode**.</span></span> <span data-ttu-id="545c3-119">选择此选项可以配置**MSH1 – 字段分隔符**， **MSH2 – 编码的字符**，并**MSH8 – 安全**仅选项。</span><span class="sxs-lookup"><span data-stu-id="545c3-119">Select to configure the **MSH1 – Field Separator**, **MSH2 – Encoding Characters**, and **MSH8 – Security** options only.</span></span><br /><span data-ttu-id="545c3-120">-   **StaticMode**。</span><span class="sxs-lookup"><span data-stu-id="545c3-120">-   **StaticMode**.</span></span> <span data-ttu-id="545c3-121">选择此选项可以配置**成功**并**失败**确认选项。</span><span class="sxs-lookup"><span data-stu-id="545c3-121">Select to configure the **On success** and **On failure** acknowledgment options.</span></span>|  
    |<span data-ttu-id="545c3-122">**MSH 15 接受确认类型**</span><span class="sxs-lookup"><span data-stu-id="545c3-122">**MSH 15 Accept Acknowledgment Type**</span></span>|<span data-ttu-id="545c3-123">选择下列选项之一：</span><span class="sxs-lookup"><span data-stu-id="545c3-123">Select one of the following:</span></span><br /><br /> <span data-ttu-id="545c3-124">-   **AL**。</span><span class="sxs-lookup"><span data-stu-id="545c3-124">-   **AL**.</span></span> <span data-ttu-id="545c3-125">选择将始终发送接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-125">Select to always send accept acknowledgments.</span></span><br /><span data-ttu-id="545c3-126">-   **NE**。</span><span class="sxs-lookup"><span data-stu-id="545c3-126">-   **NE**.</span></span> <span data-ttu-id="545c3-127">选择到永远不会发送接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-127">Select to never send accept acknowledgments.</span></span><br /><span data-ttu-id="545c3-128">-   **SU**。</span><span class="sxs-lookup"><span data-stu-id="545c3-128">-   **SU**.</span></span> <span data-ttu-id="545c3-129">选择要发送成功传输消息之后接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-129">Select to send accept acknowledgments after successful transmission of a message.</span></span><br /><span data-ttu-id="545c3-130">-   **ER**。</span><span class="sxs-lookup"><span data-stu-id="545c3-130">-   **ER**.</span></span> <span data-ttu-id="545c3-131">选择要发送接受确认仅发生错误。</span><span class="sxs-lookup"><span data-stu-id="545c3-131">Select to send accept acknowledgments only in the event of an error.</span></span>|  
    |<span data-ttu-id="545c3-132">**MSH 15 应用程序确认类型**</span><span class="sxs-lookup"><span data-stu-id="545c3-132">**MSH 15 Application Acknowledgment Type**</span></span>|<span data-ttu-id="545c3-133">选择下列选项之一：</span><span class="sxs-lookup"><span data-stu-id="545c3-133">Select one of the following:</span></span><br /><br /> <span data-ttu-id="545c3-134">-   **AL**。</span><span class="sxs-lookup"><span data-stu-id="545c3-134">-   **AL**.</span></span> <span data-ttu-id="545c3-135">选中此选项始终发送应用程序确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-135">Select to always send application acknowledgments.</span></span><br /><span data-ttu-id="545c3-136">-   **NE**。</span><span class="sxs-lookup"><span data-stu-id="545c3-136">-   **NE**.</span></span> <span data-ttu-id="545c3-137">选择此选项可以永远不会发送应用程序确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-137">Select to never send application acknowledgments.</span></span><br /><span data-ttu-id="545c3-138">-   **SU**。</span><span class="sxs-lookup"><span data-stu-id="545c3-138">-   **SU**.</span></span> <span data-ttu-id="545c3-139">选中此选项后成功发送一条消息的发送应用程序确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-139">Select to send application acknowledgments after successful transmission of a message.</span></span><br /><span data-ttu-id="545c3-140">-   **ER**。</span><span class="sxs-lookup"><span data-stu-id="545c3-140">-   **ER**.</span></span> <span data-ttu-id="545c3-141">选择此选项可以仅发生错误时发送应用程序确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-141">Select to send application acknowledgments only in the event of an error.</span></span>|  
    |<span data-ttu-id="545c3-142">**MSH1 – 字段分隔符**</span><span class="sxs-lookup"><span data-stu-id="545c3-142">**MSH1 – Field Separator**</span></span>|<span data-ttu-id="545c3-143">键入唯一的字符作为字段分隔符。</span><span class="sxs-lookup"><span data-stu-id="545c3-143">Type a unique character as a field separator.</span></span> <span data-ttu-id="545c3-144">默认值是管道字符 (**&#124;**)，和允许的最大字符数是 1 个字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-144">The default value is a pipe character (**&#124;**), and the maximum characters allowed is one character.</span></span> <span data-ttu-id="545c3-145">请注意，是否您需要修改 MSH1，则必须使用相应的 MSH1 值写入到 HL7 消息上下文中的业务流程。</span><span class="sxs-lookup"><span data-stu-id="545c3-145">Note that if you need to modify MSH1, then you must use an orchestration that writes the appropriate value of MSH1 to your HL7 message context.</span></span> <span data-ttu-id="545c3-146">BTAHL7 序列化程序上下文中读取值，并使用它在序列化的消息。</span><span class="sxs-lookup"><span data-stu-id="545c3-146">The BTAHL7 serializer reads the value from the context and uses it in the serialized message.</span></span>|  
    |<span data-ttu-id="545c3-147">**MSH2 – 编码的字符**</span><span class="sxs-lookup"><span data-stu-id="545c3-147">**MSH2 – Encoding Characters**</span></span>|<span data-ttu-id="545c3-148">为根据 HL7 标准编码字符键入唯一的字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-148">Type unique characters as the encoding characters as per the HL7 standard.</span></span> <span data-ttu-id="545c3-149">默认编码的字符为 ^，~， \\，和 （& a)。</span><span class="sxs-lookup"><span data-stu-id="545c3-149">The default encoding characters are ^, ~, \\, and &.</span></span> <span data-ttu-id="545c3-150">所需最少字符数为两个字符，并允许的最大为 4 个字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-150">The minimum characters required are two characters, and the maximum allowed are four characters.</span></span> <span data-ttu-id="545c3-151">请注意，如果 MSH2_3 或 MSH2_4 （转义和子组件动态分隔符） 中未指定在原始消息的确认 (ACK) 消息会自动填充这些字段。</span><span class="sxs-lookup"><span data-stu-id="545c3-151">Note that if MSH2_3 or MSH2_4 (the escape and subcomponent dynamic delimiters) are not specified in your original message, the acknowledgment (ACK) message automatically populates these fields.</span></span> <span data-ttu-id="545c3-152">例如，如果在原始消息 MSH 段`MSH&#124;^~&#124;`，其中指定了仅的组件和重复分隔符，然后确认消息自动填充该字段，以便包含第三个和第四个组件作为`MSH&#124;^~\&`，同时提供字段值必须尚未配置 BTAHL7 配置资源管理器中的确认部分。</span><span class="sxs-lookup"><span data-stu-id="545c3-152">For example, if your original message MSH segment is `MSH&#124;^~&#124;`, where only the component and repetition delimiters are specified, then the ACK message automatically populates that field to include the third and fourth component as `MSH&#124;^~\&`, providing that the field values had not already been configured in the acknowledgment section in BTAHL7 Configuration Explorer.</span></span>|  
    |<span data-ttu-id="545c3-153">**MSH3**</span><span class="sxs-lookup"><span data-stu-id="545c3-153">**MSH3**</span></span>|<span data-ttu-id="545c3-154">键入生成确认中为发送应用程序的字段值。</span><span class="sxs-lookup"><span data-stu-id="545c3-154">Type the field values for generated acknowledgments for the sending application.</span></span> <span data-ttu-id="545c3-155">允许的最大长度统称为 180 个字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-155">The maximum allowed length is 180 characters collectively.</span></span><br /><br /> <span data-ttu-id="545c3-156">如果未配置，生成的确认包含传入**MSH5**消息值。</span><span class="sxs-lookup"><span data-stu-id="545c3-156">When not configured, generated acknowledgments contain incoming **MSH5** message values.</span></span> <span data-ttu-id="545c3-157">**注意：** 此选项仅适用于 2.X 消息。</span><span class="sxs-lookup"><span data-stu-id="545c3-157">**Note:**  This option only applies to 2.X messages.</span></span> <span data-ttu-id="545c3-158">**注意：** 若要覆盖现有值设置为 null，请键入**\\**。</span><span class="sxs-lookup"><span data-stu-id="545c3-158">**Note:**  To override the existing value to null, type **\\**.</span></span>|  
    |<span data-ttu-id="545c3-159">**MSH5**</span><span class="sxs-lookup"><span data-stu-id="545c3-159">**MSH5**</span></span>|<span data-ttu-id="545c3-160">键入生成确认中为目标应用程序的字段值。</span><span class="sxs-lookup"><span data-stu-id="545c3-160">Type the field values for generated acknowledgments for the destination application.</span></span> <span data-ttu-id="545c3-161">允许的最大长度统称为 180 个字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-161">The maximum allowed length is 180 characters collectively.</span></span><br /><br /> <span data-ttu-id="545c3-162">如果未配置，生成的确认包含传入**MSH3**消息值。</span><span class="sxs-lookup"><span data-stu-id="545c3-162">When not configured, generated acknowledgments contain incoming **MSH3** message values.</span></span> <span data-ttu-id="545c3-163">**注意：** 此选项仅适用于 2.X 消息。</span><span class="sxs-lookup"><span data-stu-id="545c3-163">**Note:**  This option only applies to 2.X messages.</span></span> <span data-ttu-id="545c3-164">**注意：** 若要覆盖现有值设置为 null，请键入**\\**。</span><span class="sxs-lookup"><span data-stu-id="545c3-164">**Note:**  To override the existing value to null, type **\\**.</span></span>|  
    |<span data-ttu-id="545c3-165">**MSH8-安全**</span><span class="sxs-lookup"><span data-stu-id="545c3-165">**MSH8 – Security**</span></span>|<span data-ttu-id="545c3-166">键入可选的安全字符。</span><span class="sxs-lookup"><span data-stu-id="545c3-166">Type an optional security character.</span></span>|  
    |<span data-ttu-id="545c3-167">**MSH15 – 接受确认类型**</span><span class="sxs-lookup"><span data-stu-id="545c3-167">**MSH15 – Accept Acknowledgment Type**</span></span>|<span data-ttu-id="545c3-168">从接受确认类型的以下选项中选择：</span><span class="sxs-lookup"><span data-stu-id="545c3-168">Select from the following options for the accept acknowledgment type:</span></span><br /><br /> <span data-ttu-id="545c3-169">-   **AL**。</span><span class="sxs-lookup"><span data-stu-id="545c3-169">-   **AL**.</span></span> <span data-ttu-id="545c3-170">如果你想要始终发送，接受确认选择。</span><span class="sxs-lookup"><span data-stu-id="545c3-170">Select if you want to always send accept acknowledgments.</span></span><br /><span data-ttu-id="545c3-171">-   **NE**。</span><span class="sxs-lookup"><span data-stu-id="545c3-171">-   **NE**.</span></span> <span data-ttu-id="545c3-172">选择希望永远不会发送接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-172">Select if you never want to send accept acknowledgments.</span></span><br /><span data-ttu-id="545c3-173">-   **SU**。</span><span class="sxs-lookup"><span data-stu-id="545c3-173">-   **SU**.</span></span> <span data-ttu-id="545c3-174">如果你想要发送，请选择此选项后的消息传输成功接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-174">Select this option if you want to send accept acknowledgments after successful transmission of a message.</span></span><br /><span data-ttu-id="545c3-175">-   **ER**。</span><span class="sxs-lookup"><span data-stu-id="545c3-175">-   **ER**.</span></span> <span data-ttu-id="545c3-176">如果你想要发送，请选择此选项仅当出现错误时，接受确认。</span><span class="sxs-lookup"><span data-stu-id="545c3-176">Select this option if you want to send accept acknowledgments only in the event of an error.</span></span>|  
    |<span data-ttu-id="545c3-177">**如果成功**</span><span class="sxs-lookup"><span data-stu-id="545c3-177">**On Success**</span></span>|<span data-ttu-id="545c3-178">键入静态确认成功的消息传递的文本。</span><span class="sxs-lookup"><span data-stu-id="545c3-178">Type text for static acknowledgment for a successful message delivery.</span></span>|  
    |<span data-ttu-id="545c3-179">**在失败**</span><span class="sxs-lookup"><span data-stu-id="545c3-179">**On failure**</span></span>|<span data-ttu-id="545c3-180">键入静态确认不成功的消息传递的文本。</span><span class="sxs-lookup"><span data-stu-id="545c3-180">Type text for static acknowledgment for an unsuccessful message delivery.</span></span>|  
    |<span data-ttu-id="545c3-181">**将确认请求-响应发送管道路由到发送端口**</span><span class="sxs-lookup"><span data-stu-id="545c3-181">**Route ACK to send pipeline on request-response send port**</span></span>|<span data-ttu-id="545c3-182">选择此选项可将同步的确认消息发送到源 LOB 应用程序。</span><span class="sxs-lookup"><span data-stu-id="545c3-182">Select this option to send a synchronous ACK message to the source LOB application.</span></span> <span data-ttu-id="545c3-183">要求响应发送端口上，此选项才可用。</span><span class="sxs-lookup"><span data-stu-id="545c3-183">This option is only available on a solicit-response send port.</span></span><br /><br /> <span data-ttu-id="545c3-184">如果未选择此选项，接收管道会生成基于你的确认设置的确认消息。</span><span class="sxs-lookup"><span data-stu-id="545c3-184">If this option is not selected, the receive pipeline generates the ACK message based upon your acknowledgment settings.</span></span>|  
  
    > [!NOTE]
    >  <span data-ttu-id="545c3-185">为批处理消息碎片关闭与生成的确认将包含 MSH12.1 值 2.4。</span><span class="sxs-lookup"><span data-stu-id="545c3-185">Acknowledgments generated for a batch message with fragmentation turned off will contain MSH12.1 with value 2.4.</span></span> <span data-ttu-id="545c3-186">通过应用发送管道中的地图，您可以手动修改的版本号。</span><span class="sxs-lookup"><span data-stu-id="545c3-186">You can manually modify the version number by applying a map in the send pipeline.</span></span> <span data-ttu-id="545c3-187">有关详细信息，请参阅[创建和处理确认](../../adapters-and-accelerators/accelerator-hl7/creating-and-processing-acknowledgments.md)。</span><span class="sxs-lookup"><span data-stu-id="545c3-187">For more information, see [Creating and Processing Acknowledgments](../../adapters-and-accelerators/accelerator-hl7/creating-and-processing-acknowledgments.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="545c3-188">请参阅</span><span class="sxs-lookup"><span data-stu-id="545c3-188">See Also</span></span>  
 [<span data-ttu-id="545c3-189">配置批处理</span><span class="sxs-lookup"><span data-stu-id="545c3-189">Configuring Batching</span></span>](../../adapters-and-accelerators/accelerator-hl7/configuring-batching.md)