---
title: 支持使用轮询的入站调用 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ae02a93a-808f-4774-a2c4-efdf39a4d49a
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7c292b3a4b75c97e0930fe57a3078bafa81a2169
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "65374521"
---
# <a name="support-for-inbound-calls-using-polling"></a><span data-ttu-id="c1d3a-102">支持使用轮询的入站调用</span><span class="sxs-lookup"><span data-stu-id="c1d3a-102">Support for Inbound Calls Using Polling</span></span>
<span data-ttu-id="c1d3a-103">[!INCLUDE[adapteroracleebusinesslong](../../includes/adapteroracleebusinesslong-md.md)] ，客户端程序可以接收来自 Oracle E-business Suite 告知他们对 Oracle E-business Suite 中的数据的更改的消息。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-103">The [!INCLUDE[adapteroracleebusinesslong](../../includes/adapteroracleebusinesslong-md.md)] enables client programs to receive messages from Oracle E-Business Suite informing them of changes to data in Oracle E-Business Suite.</span></span> <span data-ttu-id="c1d3a-104">[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]支持接收适配器指定的 SQL 语句、 存储的过程、 函数或在包中的过程将执行其中的"基于轮询的"消息中检索数据，并到客户端的定期提供的结果时间。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-104">The [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)] supports receiving "polling-based" messages wherein the adapter executes a specified SQL statement, stored procedure, function or a procedure within a package, retrieves the data, and provides the result to the client at regular intervals of time.</span></span>  

> [!NOTE]
>  <span data-ttu-id="c1d3a-105">此外可以设置中的轮询操作的应用程序上下文[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-105">You can also set the applications context for the Poll operation in [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)].</span></span> <span data-ttu-id="c1d3a-106">它是必需的接口表或界面视图上执行该操作将轮询操作的应用程序上下文。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-106">It is mandatory to set the applications context for the Poll operation if the operation is performed on an interface table or interface view.</span></span> <span data-ttu-id="c1d3a-107">有关应用程序上下文中，以及如何将其设置的信息，请参阅[设置应用程序上下文](../../adapters-and-accelerators/adapter-oracle-ebs/set-application-context.md)。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-107">For information about applications context, and how to set it, see [Set Application Context](../../adapters-and-accelerators/adapter-oracle-ebs/set-application-context.md).</span></span>  

 <span data-ttu-id="c1d3a-108">典型轮询操作使用[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]涉及以下：</span><span class="sxs-lookup"><span data-stu-id="c1d3a-108">A typical polling operation using the [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)] involves the following:</span></span>  

1. <span data-ttu-id="c1d3a-109">适配器客户端必须指定`Polling`中的入站操作**InboundOperationType**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-109">The adapter clients must specify `Polling` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="c1d3a-110">此绑定属性的默认值是**轮询**。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-110">The default value for this binding property is **Polling**.</span></span>  

2. <span data-ttu-id="c1d3a-111">适配器客户端必须指定 SELECT 语句，以**PolledDataAvailableStatement**属性以确定是否存在可用于轮询数据绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-111">The adapter clients must specify a SELECT statement for the **PolledDataAvailableStatement** binding property to determine whether there is data available for polling.</span></span> <span data-ttu-id="c1d3a-112">如果第一个返回的结果集上执行此语句的第一行的第一列包含一个正整数值，则日期可用于轮询。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-112">If the first column of the first row of the first result set returned on execution of this statement contains a positive integer value, there is date available for polling.</span></span>  

3. <span data-ttu-id="c1d3a-113">适配器客户端必须指定为一个轮询间隔**PollingInterval**绑定属性，以秒为单位中指定的语句定义间隔**PolledDataAvailableStatement**执行属性绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-113">The adapter clients must specify a polling interval for the **PollingInterval** binding property to define the interval in seconds at which the statement specified in the **PolledDataAvailableStatement** binding property is executed.</span></span> <span data-ttu-id="c1d3a-114">在每个轮询间隔结束时，执行轮询的数据可用语句，并返回的结果集。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-114">At the end of every polling interval, the polled data available statement is executed, and the result set is returned.</span></span>  

4. <span data-ttu-id="c1d3a-115">适配器客户端必须指定 SELECT 语句或存储的过程**PollingInput**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-115">The adapter clients must specify a SELECT statement or a stored procedure for the **PollingInput** binding property.</span></span> <span data-ttu-id="c1d3a-116">如果你想要轮询的表或视图，则必须指定此绑定属性的 SELECT 语句。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-116">If you want to poll a table or view, you must specify a SELECT statement for this binding property.</span></span> <span data-ttu-id="c1d3a-117">如果你想要使用的存储的过程轮询，则必须指定此绑定属性的整个请求消息。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-117">If you want to poll using a stored procedure, you must specify the entire request message for this binding property.</span></span>  

    <span data-ttu-id="c1d3a-118">中的语句**PollingInput**仅当没有可用于轮询，由数据绑定属性执行**PolledDataAvailableStatement**属性绑定在步骤 2 中。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-118">The statement in the **PollingInput** binding property is executed only if there is data available for polling, which is determined by the **PolledDataAvailableStatement** binding property in step 2.</span></span>  

5. <span data-ttu-id="c1d3a-119">适配器客户端必须指定操作中轮询操作**PollingAction**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-119">The adapter clients must specify an action for the polling operation in the **PollingAction** binding property.</span></span> <span data-ttu-id="c1d3a-120">有关使用适配器服务外接程序使用的操作生成的元数据确定特定操作的轮询操作。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-120">The polling action for a specific operation is determined from the metadata generated for the operation using the Consume Adapter Service Add-in.</span></span>  

6. <span data-ttu-id="c1d3a-121">适配器客户端可以使用**PollWhileDataFound**属性要忽略的轮询间隔，并连续轮询数据，以及可用时绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-121">The adapter clients can use the **PollWhileDataFound** binding property to ignore the polling interval, and continuously poll data, as and when available.</span></span>  

   > [!IMPORTANT]
   >  <span data-ttu-id="c1d3a-122">如果设置的值**PollWhileDataFound**绑定属性设为 True，连续轮询适配器客户端数据从 Oracle 或进程中打开和关闭连接到 Oracle 数据库在循环中。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-122">If you set the value of the **PollWhileDataFound** binding property to True, the adapter clients continuously poll data from Oracle and in the process open and close connections to the Oracle database in a loop.</span></span> <span data-ttu-id="c1d3a-123">如 ODP.NET 打开连接的速率大于连接处于关闭状态，连接用尽段时间后，并引发异常。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-123">As the rate at which connections are opened by ODP.NET is greater than the connections being closed, the connections get exhausted after some time, and an exception is thrown.</span></span> <span data-ttu-id="c1d3a-124">作为替代方案，请确保的值**UseOracleConnectionPool**设置为 True，并适当的值中提及**IncrPoolSize**绑定属性来控制连接数可以通过适配器客户端打开的。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-124">As a work around, make sure that the value of the **UseOracleConnectionPool** is set to True, and an appropriate value is mentioned in the **IncrPoolSize** binding property to control the number of connections that can be opened by the adapter clients.</span></span>  

7. <span data-ttu-id="c1d3a-125">适配器客户端可以为指定的轮询后语句，Oracle PL/SQL 块中， **PostPollStatement**属性绑定。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-125">The adapter clients can specify a post-poll statement, an Oracle PL/SQL block, for the **PostPollStatement** binding property.</span></span> <span data-ttu-id="c1d3a-126">在此绑定属性中指定的语句执行后的语句中指定**PollingInput**执行绑定属性。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-126">The statement specified in this binding property is executed after the statement specified in the **PollingInput** binding property is executed.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="c1d3a-127">适配器执行的语句中指定**PollingInput**并**PostPollStatement**属性绑定在事务中。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-127">The adapter executes the statement specified in the **PollingInput** and **PostPollStatement** binding properties in a transaction.</span></span> <span data-ttu-id="c1d3a-128">有关中的事务的详细信息[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]，请参阅[原理适配器处理事务？](https://msdn.microsoft.com/library/dd788428.aspx)。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-128">For more information about transactions in the [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)], see [How does the Adapter Handle Transactions?](https://msdn.microsoft.com/library/dd788428.aspx).</span></span>  

   <span data-ttu-id="c1d3a-129">适配器禁止显示来自 Oracle E-business Suite 的任何空轮询响应。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-129">The adapter suppresses any empty polling responses coming from Oracle E-Business Suite.</span></span>  

   <span data-ttu-id="c1d3a-130">下图提供了有关中的轮询工作流信息[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-130">The illustration below provides information about the polling workflow in [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)].</span></span> <span data-ttu-id="c1d3a-131">轮询工作流的两种方案是所示：</span><span class="sxs-lookup"><span data-stu-id="c1d3a-131">Two scenarios for the polling workflow are illustrated:</span></span>  

8. <span data-ttu-id="c1d3a-132">时的值**PollWhileDataFound**设置为"False"（默认设置）。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-132">When the value of the **PollWhileDataFound** is set to “False” (default setting).</span></span>  

9. <span data-ttu-id="c1d3a-133">时的值**PollWhileDataFound**设置为"True。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-133">When the value of the **PollWhileDataFound** is set to “True.”</span></span>  

   <span data-ttu-id="c1d3a-134">![轮询方案&#40;PollWhileDataFound&#61;False&#41;](../../adapters-and-accelerators/adapter-oracle-ebs/media/e5f00f4c-cc76-4e8b-9991-b4471f9d4865.gif "e5f00f4c-cc76-4e8b-9991-b4471f9d4865") ![轮询方案&#40;PollWhileDataFound &#61; True&#41; ](../../adapters-and-accelerators/adapter-oracle-ebs/media/ebecf64c-a770-4525-9c75-62fdb71e1fb1.gif "ebecf64c-a770-4525-9c75-62fdb71e1fb1")</span><span class="sxs-lookup"><span data-stu-id="c1d3a-134">![Polling Scenario &#40;PollWhileDataFound&#61;False&#41;](../../adapters-and-accelerators/adapter-oracle-ebs/media/e5f00f4c-cc76-4e8b-9991-b4471f9d4865.gif "e5f00f4c-cc76-4e8b-9991-b4471f9d4865") ![Polling Scenario &#40;PollWhileDataFound &#61; True&#41;](../../adapters-and-accelerators/adapter-oracle-ebs/media/ebecf64c-a770-4525-9c75-62fdb71e1fb1.gif "ebecf64c-a770-4525-9c75-62fdb71e1fb1")</span></span>  

## <a name="differences-between-polling-and-notification"></a><span data-ttu-id="c1d3a-135">轮询和通知之间的差异</span><span class="sxs-lookup"><span data-stu-id="c1d3a-135">Differences between Polling and Notification</span></span>  
 <span data-ttu-id="c1d3a-136">尽管轮询和通知这两个入站操作，并在 Oracle 数据库中的数据更改通知适配器客户端下, 表列出了两者之间的一些差异。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-136">Though polling and notification are both inbound operations, and inform the adapter clients about the data changes in the Oracle database, the following table lists some differences between the two.</span></span> <span data-ttu-id="c1d3a-137">以下差异将帮助你决定具体取决于您的要求操作：</span><span class="sxs-lookup"><span data-stu-id="c1d3a-137">The following differences will help you decide on an operation depending on your requirements:</span></span>  


|                                                                                                                                                                                                                                                      <span data-ttu-id="c1d3a-138">轮询</span><span class="sxs-lookup"><span data-stu-id="c1d3a-138">Polling</span></span>                                                                                                                                                                                                                                                      |                                                                                                                              <span data-ttu-id="c1d3a-139">通知</span><span class="sxs-lookup"><span data-stu-id="c1d3a-139">Notification</span></span>                                                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                                                                   <span data-ttu-id="c1d3a-140">对于所有支持的 Oracle 数据库版本支持轮询[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-140">Polling is supported for all the Oracle database versions that are supported by the [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)].</span></span>                                                                                                                                                                    |                                                                                               <span data-ttu-id="c1d3a-141">特定 Oracle 数据库版本 10.2 和更高版本才支持通知。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-141">Notification is only supported for Oracle database versions 10.2 and later.</span></span>                                                                                               |
| <span data-ttu-id="c1d3a-142">你可以配置轮询间隔来检查可用的固定时间间隔轮询的数据或在瞬间完成，以及何时有可用的数据。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-142">You can either configure the polling interval to check the data available for polling at regular intervals or instantaneously as and when the data is available.</span></span> <span data-ttu-id="c1d3a-143">**提示：** 轮询可以提供更好的吞吐量中情况下，数据更改发生的连续，并且不希望为每个更改的和发生时收到通知。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-143">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="c1d3a-144">相反，您指定要在其后的发生是因为最后一个更改通知的所有更改通知的轮询间隔。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-144">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span> |                                                                                                          <span data-ttu-id="c1d3a-145">数据更改通知始终是瞬间完成的。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-145">The data-change notification is always instantaneous.</span></span>                                                                                                          |
|                                                                                                                                         <span data-ttu-id="c1d3a-146">由适配器启动轮询。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-146">Polling is initiated by the adapter.</span></span> <span data-ttu-id="c1d3a-147">适配器执行 SQL 语句，以验证是否可用于轮询，然后通过执行轮询语句，如果某些数据可用于轮询启动轮询数据。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-147">The adapter executes a SQL statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>                                                                                                                                         | <span data-ttu-id="c1d3a-148">Oracle 数据库发出通知。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-148">Notification is initiated by the Oracle database.</span></span> <span data-ttu-id="c1d3a-149">只需在适配器发出的通知语句指示要在没有语句的结果集中的更改的情况下启动通知的数据库。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-149">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span> <span data-ttu-id="c1d3a-150">通知是 Oracle 数据库的一项功能。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-150">Notification is a feature of the Oracle database.</span></span> |
|                                                                                                                                                                                                                 <span data-ttu-id="c1d3a-151">轮询语句可用于读取或更新 Oracle 数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-151">You can use the polling statement to read or update data in the Oracle database.</span></span>                                                                                                                                                                                                                  |                                                                                             <span data-ttu-id="c1d3a-152">通知语句可用于只读取 Oracle 数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-152">You can use the notification statement to only read data in an Oracle database.</span></span>                                                                                             |
|                                                                                                                                                                                                                            <span data-ttu-id="c1d3a-153">轮询通知您已更改的实际数据。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-153">Polling informs you about the actual data that has changed.</span></span>                                                                                                                                                                                                                            |                                                                                   <span data-ttu-id="c1d3a-154">通知只告知如 Insert、 数据更改的类型更新和删除。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-154">Notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>                                                                                    |

 <span data-ttu-id="c1d3a-155">有关详细信息：</span><span class="sxs-lookup"><span data-stu-id="c1d3a-155">For more information about:</span></span>  

- <span data-ttu-id="c1d3a-156">绑定属性与轮询，请参阅[了解关于 BizTalk Adapter for Oracle E-business Suite 绑定属性](../../adapters-and-accelerators/adapter-oracle-ebs/read-about-the-biztalk-adapter-for-oracle-e-business-suite-binding-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-156">The binding properties related to polling, see [Read about the  BizTalk Adapter for Oracle E-Business Suite Binding Properties](../../adapters-and-accelerators/adapter-oracle-ebs/read-about-the-biztalk-adapter-for-oracle-e-business-suite-binding-properties.md).</span></span>  

- <span data-ttu-id="c1d3a-157">接收基于轮询的消息使用[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]，请参阅[轮询 Oracle E-business Suite 使用 BizTalk Server 进行](../../adapters-and-accelerators/adapter-oracle-ebs/poll-oracle-e-business-suite-using-biztalk-server.md)。</span><span class="sxs-lookup"><span data-stu-id="c1d3a-157">Receiving polling-based messages using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)], see [Poll Oracle E-Business Suite Using BizTalk Server](../../adapters-and-accelerators/adapter-oracle-ebs/poll-oracle-e-business-suite-using-biztalk-server.md).</span></span>  

## <a name="see-also"></a><span data-ttu-id="c1d3a-158">请参阅</span><span class="sxs-lookup"><span data-stu-id="c1d3a-158">See Also</span></span>  
 <span data-ttu-id="c1d3a-159">[哪些操作可以是执行使用适配器？](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="c1d3a-159">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>